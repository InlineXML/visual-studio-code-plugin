var $q=Object.create;var qu=Object.defineProperty;var Wq=Object.getOwnPropertyDescriptor;var Hq=Object.getOwnPropertyNames;var Uq=Object.getPrototypeOf,Bq=Object.prototype.hasOwnProperty;var js=(t,e)=>()=>(t&&(e=t(t=0)),e);var q=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Sv=(t,e)=>{for(var r in e)qu(t,r,{get:e[r],enumerable:!0})},Cv=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Hq(e))!Bq.call(t,i)&&i!==r&&qu(t,i,{get:()=>e[i],enumerable:!(n=Wq(e,i))||n.enumerable});return t};var gr=(t,e,r)=>(r=t!=null?$q(Uq(t)):{},Cv(e||!t||!t.__esModule?qu(r,"default",{value:t,enumerable:!0}):r,t)),zq=t=>Cv(qu({},"__esModule",{value:!0}),t);var un=q(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.asPromise=Wt.thenable=Wt.typedArray=Wt.stringArray=Wt.array=Wt.func=Wt.error=Wt.number=Wt.string=Wt.boolean=void 0;function Kq(t){return t===!0||t===!1}Wt.boolean=Kq;function Rv(t){return typeof t=="string"||t instanceof String}Wt.string=Rv;function Vq(t){return typeof t=="number"||t instanceof Number}Wt.number=Vq;function Gq(t){return t instanceof Error}Wt.error=Gq;function Tv(t){return typeof t=="function"}Wt.func=Tv;function Dv(t){return Array.isArray(t)}Wt.array=Dv;function Qq(t){return Dv(t)&&t.every(e=>Rv(e))}Wt.stringArray=Qq;function Xq(t,e){return Array.isArray(t)&&t.every(e)}Wt.typedArray=Xq;function Ev(t){return t&&Tv(t.then)}Wt.thenable=Ev;function Yq(t){return t instanceof Promise?t:Ev(t)?new Promise((e,r)=>{t.then(n=>e(n),n=>r(n))}):Promise.resolve(t)}Wt.asPromise=Yq});var Fo=q(mr=>{"use strict";Object.defineProperty(mr,"__esModule",{value:!0});mr.stringArray=mr.array=mr.func=mr.error=mr.number=mr.string=mr.boolean=void 0;function Jq(t){return t===!0||t===!1}mr.boolean=Jq;function Pv(t){return typeof t=="string"||t instanceof String}mr.string=Pv;function Zq(t){return typeof t=="number"||t instanceof Number}mr.number=Zq;function ex(t){return t instanceof Error}mr.error=ex;function tx(t){return typeof t=="function"}mr.func=tx;function kv(t){return Array.isArray(t)}mr.array=kv;function rx(t){return kv(t)&&t.every(e=>Pv(e))}mr.stringArray=rx});var cf=q(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.Message=Fe.NotificationType9=Fe.NotificationType8=Fe.NotificationType7=Fe.NotificationType6=Fe.NotificationType5=Fe.NotificationType4=Fe.NotificationType3=Fe.NotificationType2=Fe.NotificationType1=Fe.NotificationType0=Fe.NotificationType=Fe.RequestType9=Fe.RequestType8=Fe.RequestType7=Fe.RequestType6=Fe.RequestType5=Fe.RequestType4=Fe.RequestType3=Fe.RequestType2=Fe.RequestType1=Fe.RequestType=Fe.RequestType0=Fe.AbstractMessageSignature=Fe.ParameterStructures=Fe.ResponseError=Fe.ErrorCodes=void 0;var zi=Fo(),Md;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(Md||(Fe.ErrorCodes=Md={}));var jd=class t extends Error{constructor(e,r,n){super(r),this.code=zi.number(e)?e:Md.UnknownErrorCode,this.data=n,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Fe.ResponseError=jd;var Mr=class t{constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Fe.ParameterStructures=Mr;Mr.auto=new Mr("auto");Mr.byPosition=new Mr("byPosition");Mr.byName=new Mr("byName");var Et=class{constructor(e,r){this.method=e,this.numberOfParams=r}get parameterStructures(){return Mr.auto}};Fe.AbstractMessageSignature=Et;var $d=class extends Et{constructor(e){super(e,0)}};Fe.RequestType0=$d;var Wd=class extends Et{constructor(e,r=Mr.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Fe.RequestType=Wd;var Hd=class extends Et{constructor(e,r=Mr.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Fe.RequestType1=Hd;var Ud=class extends Et{constructor(e){super(e,2)}};Fe.RequestType2=Ud;var Bd=class extends Et{constructor(e){super(e,3)}};Fe.RequestType3=Bd;var zd=class extends Et{constructor(e){super(e,4)}};Fe.RequestType4=zd;var Kd=class extends Et{constructor(e){super(e,5)}};Fe.RequestType5=Kd;var Vd=class extends Et{constructor(e){super(e,6)}};Fe.RequestType6=Vd;var Gd=class extends Et{constructor(e){super(e,7)}};Fe.RequestType7=Gd;var Qd=class extends Et{constructor(e){super(e,8)}};Fe.RequestType8=Qd;var Xd=class extends Et{constructor(e){super(e,9)}};Fe.RequestType9=Xd;var Yd=class extends Et{constructor(e,r=Mr.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Fe.NotificationType=Yd;var Jd=class extends Et{constructor(e){super(e,0)}};Fe.NotificationType0=Jd;var Zd=class extends Et{constructor(e,r=Mr.auto){super(e,1),this._parameterStructures=r}get parameterStructures(){return this._parameterStructures}};Fe.NotificationType1=Zd;var ef=class extends Et{constructor(e){super(e,2)}};Fe.NotificationType2=ef;var tf=class extends Et{constructor(e){super(e,3)}};Fe.NotificationType3=tf;var rf=class extends Et{constructor(e){super(e,4)}};Fe.NotificationType4=rf;var nf=class extends Et{constructor(e){super(e,5)}};Fe.NotificationType5=nf;var of=class extends Et{constructor(e){super(e,6)}};Fe.NotificationType6=of;var sf=class extends Et{constructor(e){super(e,7)}};Fe.NotificationType7=sf;var af=class extends Et{constructor(e){super(e,8)}};Fe.NotificationType8=af;var uf=class extends Et{constructor(e){super(e,9)}};Fe.NotificationType9=uf;var qv;(function(t){function e(i){let o=i;return o&&zi.string(o.method)&&(zi.string(o.id)||zi.number(o.id))}t.isRequest=e;function r(i){let o=i;return o&&zi.string(o.method)&&i.id===void 0}t.isNotification=r;function n(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(zi.string(o.id)||zi.number(o.id)||o.id===null)}t.isResponse=n})(qv||(Fe.Message=qv={}))});var df=q(gi=>{"use strict";var xv;Object.defineProperty(gi,"__esModule",{value:!0});gi.LRUCache=gi.LinkedMap=gi.Touch=void 0;var yr;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(yr||(gi.Touch=yr={}));var xu=class{constructor(){this[xv]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,r=yr.None){let n=this._map.get(e);if(n)return r!==yr.None&&this.touch(n,r),n.value}set(e,r,n=yr.None){let i=this._map.get(e);if(i)i.value=r,n!==yr.None&&this.touch(i,n);else{switch(i={key:e,value:r,next:void 0,previous:void 0},n){case yr.None:this.addItemLast(i);break;case yr.First:this.addItemFirst(i);break;case yr.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let r=this._map.get(e);if(r)return this._map.delete(e),this.removeItem(r),this._size--,r.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,r){let n=this._state,i=this._head;for(;i;){if(r?e.bind(r)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.key,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}values(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:r.value,done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}entries(){let e=this._state,r=this._head,n={[Symbol.iterator]:()=>n,next:()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(r){let i={value:[r.key,r.value],done:!1};return r=r.next,i}else return{value:void 0,done:!0}}};return n}[(xv=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let r=this._head,n=this.size;for(;r&&n>e;)this._map.delete(r.key),r=r.next,n--;this._head=r,this._size=n,r&&(r.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let r=e.next,n=e.previous;if(!r||!n)throw new Error("Invalid list");r.previous=n,n.next=r}e.next=void 0,e.previous=void 0,this._state++}touch(e,r){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(r!==yr.First&&r!==yr.Last)){if(r===yr.First){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(r===yr.Last){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((r,n)=>{e.push([n,r])}),e}fromJSON(e){this.clear();for(let[r,n]of e)this.set(r,n)}};gi.LinkedMap=xu;var lf=class extends xu{constructor(e,r=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,r),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,r=yr.AsNew){return super.get(e,r)}peek(e){return super.get(e,yr.None)}set(e,r){return super.set(e,r,yr.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};gi.LRUCache=lf});var Ov=q(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.Disposable=void 0;var Fv;(function(t){function e(r){return{dispose:r}}t.create=e})(Fv||(Fu.Disposable=Fv={}))});var mi=q(pf=>{"use strict";Object.defineProperty(pf,"__esModule",{value:!0});var ff;function hf(){if(ff===void 0)throw new Error("No runtime abstraction layer installed");return ff}(function(t){function e(r){if(r===void 0)throw new Error("No runtime abstraction layer provided");ff=r}t.install=e})(hf||(hf={}));pf.default=hf});var Io=q(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.Emitter=Oo.Event=void 0;var nx=mi(),Iv;(function(t){let e={dispose(){}};t.None=function(){return e}})(Iv||(Oo.Event=Iv={}));var gf=class{add(e,r=null,n){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(r),Array.isArray(n)&&n.push({dispose:()=>this.remove(e,r)})}remove(e,r=null){if(!this._callbacks)return;let n=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===r){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else n=!0;if(n)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let r=[],n=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=n.length;o<a;o++)try{r.push(n[o].apply(i[o],e))}catch(u){(0,nx.default)().console.error(u)}return r}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},Ou=class t{constructor(e){this._options=e}get event(){return this._event||(this._event=(e,r,n)=>{this._callbacks||(this._callbacks=new gf),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,r);let i={dispose:()=>{this._callbacks&&(this._callbacks.remove(e,r),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(n)&&n.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};Oo.Emitter=Ou;Ou._noop=function(){}});var Lu=q(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.CancellationTokenSource=Ao.CancellationToken=void 0;var ix=mi(),ox=Fo(),mf=Io(),Iu;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:mf.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:mf.Event.None});function e(r){let n=r;return n&&(n===t.None||n===t.Cancelled||ox.boolean(n.isCancellationRequested)&&!!n.onCancellationRequested)}t.is=e})(Iu||(Ao.CancellationToken=Iu={}));var sx=Object.freeze(function(t,e){let r=(0,ix.default)().timer.setTimeout(t.bind(e),0);return{dispose(){r.dispose()}}}),Au=class{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?sx:(this._emitter||(this._emitter=new mf.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},yf=class{get token(){return this._token||(this._token=new Au),this._token}cancel(){this._token?this._token.cancel():this._token=Iu.Cancelled}dispose(){this._token?this._token instanceof Au&&this._token.dispose():this._token=Iu.None}};Ao.CancellationTokenSource=yf});var Av=q(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.SharedArrayReceiverStrategy=Lo.SharedArraySenderStrategy=void 0;var ax=Lu(),$s;(function(t){t.Continue=0,t.Cancelled=1})($s||($s={}));var vf=class{constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let r=new SharedArrayBuffer(4),n=new Int32Array(r,0,1);n[0]=$s.Continue,this.buffers.set(e.id,r),e.$cancellationData=r}async sendCancellation(e,r){let n=this.buffers.get(r);if(n===void 0)return;let i=new Int32Array(n,0,1);Atomics.store(i,0,$s.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};Lo.SharedArraySenderStrategy=vf;var _f=class{constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===$s.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},bf=class{constructor(e){this.token=new _f(e)}cancel(){}dispose(){}},wf=class{constructor(){this.kind="request"}createCancellationTokenSource(e){let r=e.$cancellationData;return r===void 0?new ax.CancellationTokenSource:new bf(r)}};Lo.SharedArrayReceiverStrategy=wf});var Cf=q(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Semaphore=void 0;var ux=mi(),Sf=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,ux.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};Nu.Semaphore=Sf});var Nv=q(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.ReadableStreamMessageReader=yi.AbstractMessageReader=yi.MessageReader=void 0;var Tf=mi(),No=Fo(),Rf=Io(),cx=Cf(),Lv;(function(t){function e(r){let n=r;return n&&No.func(n.listen)&&No.func(n.dispose)&&No.func(n.onError)&&No.func(n.onClose)&&No.func(n.onPartialMessage)}t.is=e})(Lv||(yi.MessageReader=Lv={}));var Mu=class{constructor(){this.errorEmitter=new Rf.Emitter,this.closeEmitter=new Rf.Emitter,this.partialMessageEmitter=new Rf.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${No.string(e.message)?e.message:"unknown"}`)}};yi.AbstractMessageReader=Mu;var Df;(function(t){function e(r){let n,i,o,a=new Map,u,c=new Map;if(r===void 0||typeof r=="string")n=r??"utf-8";else{if(n=r.charset??"utf-8",r.contentDecoder!==void 0&&(o=r.contentDecoder,a.set(o.name,o)),r.contentDecoders!==void 0)for(let d of r.contentDecoders)a.set(d.name,d);if(r.contentTypeDecoder!==void 0&&(u=r.contentTypeDecoder,c.set(u.name,u)),r.contentTypeDecoders!==void 0)for(let d of r.contentTypeDecoders)c.set(d.name,d)}return u===void 0&&(u=(0,Tf.default)().applicationJson.decoder,c.set(u.name,u)),{charset:n,contentDecoder:o,contentDecoders:a,contentTypeDecoder:u,contentTypeDecoders:c}}t.fromOptions=e})(Df||(Df={}));var Ef=class extends Mu{constructor(e,r){super(),this.readable=e,this.options=Df.fromOptions(r),this.buffer=(0,Tf.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new cx.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let r=this.readable.onData(n=>{this.onData(n)});return this.readable.onError(n=>this.fireError(n)),this.readable.onClose(()=>this.fireClose()),r}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let n=this.buffer.tryReadHeaders(!0);if(!n)return;let i=n.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(n))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let r=this.buffer.tryReadBody(this.nextMessageLength);if(r===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let n=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(r):r,i=await this.options.contentTypeDecoder.decode(n,this.options);this.callback(i)}).catch(n=>{this.fireError(n)})}}catch(r){this.fireError(r)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,Tf.default)().timer.setTimeout((e,r)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:r}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};yi.ReadableStreamMessageReader=Ef});var Hv=q(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.WriteableStreamMessageWriter=vi.AbstractMessageWriter=vi.MessageWriter=void 0;var Mv=mi(),Ws=Fo(),lx=Cf(),jv=Io(),dx="Content-Length: ",$v=`\r
`,Wv;(function(t){function e(r){let n=r;return n&&Ws.func(n.dispose)&&Ws.func(n.onClose)&&Ws.func(n.onError)&&Ws.func(n.write)}t.is=e})(Wv||(vi.MessageWriter=Wv={}));var ju=class{constructor(){this.errorEmitter=new jv.Emitter,this.closeEmitter=new jv.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,r,n){this.errorEmitter.fire([this.asError(e),r,n])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${Ws.string(e.message)?e.message:"unknown"}`)}};vi.AbstractMessageWriter=ju;var Pf;(function(t){function e(r){return r===void 0||typeof r=="string"?{charset:r??"utf-8",contentTypeEncoder:(0,Mv.default)().applicationJson.encoder}:{charset:r.charset??"utf-8",contentEncoder:r.contentEncoder,contentTypeEncoder:r.contentTypeEncoder??(0,Mv.default)().applicationJson.encoder}}t.fromOptions=e})(Pf||(Pf={}));var kf=class extends ju{constructor(e,r){super(),this.writable=e,this.options=Pf.fromOptions(r),this.errorCount=0,this.writeSemaphore=new lx.Semaphore(1),this.writable.onError(n=>this.fireError(n)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(n=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(n):n).then(n=>{let i=[];return i.push(dx,n.byteLength.toString(),$v),i.push($v),this.doWrite(e,i,n)},n=>{throw this.fireError(n),n}))}async doWrite(e,r,n){try{return await this.writable.write(r.join(""),"ascii"),this.writable.write(n)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){this.writable.end()}};vi.WriteableStreamMessageWriter=kf});var Uv=q($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.AbstractMessageBuffer=void 0;var fx=13,hx=10,px=`\r
`,qf=class{constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let r=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(r),this._totalLength+=r.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let r=0,n=0,i=0,o=0;e:for(;n<this._chunks.length;){let d=this._chunks[n];for(i=0;i<d.length;){switch(d[i]){case fx:switch(r){case 0:r=1;break;case 2:r=3;break;default:r=0}break;case hx:switch(r){case 1:r=2;break;case 3:r=4,i++;break e;default:r=0}break;default:r=0}i++}o+=d.byteLength,n++}if(r!==4)return;let a=this._read(o+i),u=new Map,c=this.toString(a,"ascii").split(px);if(c.length<2)return u;for(let d=0;d<c.length-2;d++){let f=c[d],y=f.indexOf(":");if(y===-1)throw new Error(`Message header must separate key and value using ':'
${f}`);let g=f.substr(0,y),m=f.substr(y+1).trim();u.set(e?g.toLowerCase():g,m)}return u}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let r=this.allocNative(e),n=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);r.set(a,n),n+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else r.set(o,n),n+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return r}};$u.AbstractMessageBuffer=qf});var Gv=q(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});ze.createMessageConnection=ze.ConnectionOptions=ze.MessageStrategy=ze.CancellationStrategy=ze.CancellationSenderStrategy=ze.CancellationReceiverStrategy=ze.RequestCancellationReceiverStrategy=ze.IdCancellationReceiverStrategy=ze.ConnectionStrategy=ze.ConnectionError=ze.ConnectionErrors=ze.LogTraceNotification=ze.SetTraceNotification=ze.TraceFormat=ze.TraceValues=ze.Trace=ze.NullLogger=ze.ProgressType=ze.ProgressToken=void 0;var Bv=mi(),It=Fo(),Me=cf(),zv=df(),Hs=Io(),xf=Lu(),zs;(function(t){t.type=new Me.NotificationType("$/cancelRequest")})(zs||(zs={}));var Ff;(function(t){function e(r){return typeof r=="string"||typeof r=="number"}t.is=e})(Ff||(ze.ProgressToken=Ff={}));var Us;(function(t){t.type=new Me.NotificationType("$/progress")})(Us||(Us={}));var Of=class{constructor(){}};ze.ProgressType=Of;var If;(function(t){function e(r){return It.func(r)}t.is=e})(If||(If={}));ze.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var lt;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(lt||(ze.Trace=lt={}));var Kv;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Kv||(ze.TraceValues=Kv={}));(function(t){function e(n){if(!It.string(n))return t.Off;switch(n=n.toLowerCase(),n){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}t.fromString=e;function r(n){switch(n){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}t.toString=r})(lt||(ze.Trace=lt={}));var Qr;(function(t){t.Text="text",t.JSON="json"})(Qr||(ze.TraceFormat=Qr={}));(function(t){function e(r){return It.string(r)?(r=r.toLowerCase(),r==="json"?t.JSON:t.Text):t.Text}t.fromString=e})(Qr||(ze.TraceFormat=Qr={}));var Af;(function(t){t.type=new Me.NotificationType("$/setTrace")})(Af||(ze.SetTraceNotification=Af={}));var Wu;(function(t){t.type=new Me.NotificationType("$/logTrace")})(Wu||(ze.LogTraceNotification=Wu={}));var Bs;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})(Bs||(ze.ConnectionErrors=Bs={}));var Mo=class t extends Error{constructor(e,r){super(r),this.code=e,Object.setPrototypeOf(this,t.prototype)}};ze.ConnectionError=Mo;var Lf;(function(t){function e(r){let n=r;return n&&It.func(n.cancelUndispatched)}t.is=e})(Lf||(ze.ConnectionStrategy=Lf={}));var Hu;(function(t){function e(r){let n=r;return n&&(n.kind===void 0||n.kind==="id")&&It.func(n.createCancellationTokenSource)&&(n.dispose===void 0||It.func(n.dispose))}t.is=e})(Hu||(ze.IdCancellationReceiverStrategy=Hu={}));var Nf;(function(t){function e(r){let n=r;return n&&n.kind==="request"&&It.func(n.createCancellationTokenSource)&&(n.dispose===void 0||It.func(n.dispose))}t.is=e})(Nf||(ze.RequestCancellationReceiverStrategy=Nf={}));var Uu;(function(t){t.Message=Object.freeze({createCancellationTokenSource(r){return new xf.CancellationTokenSource}});function e(r){return Hu.is(r)||Nf.is(r)}t.is=e})(Uu||(ze.CancellationReceiverStrategy=Uu={}));var Bu;(function(t){t.Message=Object.freeze({sendCancellation(r,n){return r.sendNotification(zs.type,{id:n})},cleanup(r){}});function e(r){let n=r;return n&&It.func(n.sendCancellation)&&It.func(n.cleanup)}t.is=e})(Bu||(ze.CancellationSenderStrategy=Bu={}));var zu;(function(t){t.Message=Object.freeze({receiver:Uu.Message,sender:Bu.Message});function e(r){let n=r;return n&&Uu.is(n.receiver)&&Bu.is(n.sender)}t.is=e})(zu||(ze.CancellationStrategy=zu={}));var Ku;(function(t){function e(r){let n=r;return n&&It.func(n.handleMessage)}t.is=e})(Ku||(ze.MessageStrategy=Ku={}));var Vv;(function(t){function e(r){let n=r;return n&&(zu.is(n.cancellationStrategy)||Lf.is(n.connectionStrategy)||Ku.is(n.messageStrategy))}t.is=e})(Vv||(ze.ConnectionOptions=Vv={}));var Sn;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(Sn||(Sn={}));function gx(t,e,r,n){let i=r!==void 0?r:ze.NullLogger,o=0,a=0,u=0,c="2.0",d,f=new Map,y,g=new Map,m=new Map,h,S=new zv.LinkedMap,R=new Map,D=new Set,I=new Map,A=lt.Off,N=Qr.Text,ee,fe=Sn.New,re=new Hs.Emitter,de=new Hs.Emitter,se=new Hs.Emitter,_e=new Hs.Emitter,G=new Hs.Emitter,K=n&&n.cancellationStrategy?n.cancellationStrategy:zu.Message;function j(C){if(C===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+C.toString()}function X(C){return C===null?"res-unknown-"+(++u).toString():"res-"+C.toString()}function $(){return"not-"+(++a).toString()}function H(C,F){Me.Message.isRequest(F)?C.set(j(F.id),F):Me.Message.isResponse(F)?C.set(X(F.id),F):C.set($(),F)}function V(C){}function ne(){return fe===Sn.Listening}function P(){return fe===Sn.Closed}function ue(){return fe===Sn.Disposed}function ye(){(fe===Sn.New||fe===Sn.Listening)&&(fe=Sn.Closed,de.fire(void 0))}function me(C){re.fire([C,void 0,void 0])}function L(C){re.fire(C)}t.onClose(ye),t.onError(me),e.onClose(ye),e.onError(L);function Y(){h||S.size===0||(h=(0,Bv.default)().timer.setImmediate(()=>{h=void 0,pe()}))}function ae(C){Me.Message.isRequest(C)?Ce(C):Me.Message.isNotification(C)?ct(C):Me.Message.isResponse(C)?He(C):Vt(C)}function pe(){if(S.size===0)return;let C=S.shift();try{let F=n?.messageStrategy;Ku.is(F)?F.handleMessage(C,ae):ae(C)}finally{Y()}}let Te=C=>{try{if(Me.Message.isNotification(C)&&C.method===zs.type.method){let F=C.params.id,U=j(F),te=S.get(U);if(Me.Message.isRequest(te)){let ke=n?.connectionStrategy,ve=ke&&ke.cancelUndispatched?ke.cancelUndispatched(te,V):void 0;if(ve&&(ve.error!==void 0||ve.result!==void 0)){S.delete(U),I.delete(F),ve.id=te.id,wt(ve,C.method,Date.now()),e.write(ve).catch(()=>i.error("Sending response for canceled message failed."));return}}let we=I.get(F);if(we!==void 0){we.cancel(),er(C);return}else D.add(F)}H(S,C)}finally{Y()}};function Ce(C){if(ue())return;function F(Pe,Le,Oe){let st={jsonrpc:c,id:C.id};Pe instanceof Me.ResponseError?st.error=Pe.toJson():st.result=Pe===void 0?null:Pe,wt(st,Le,Oe),e.write(st).catch(()=>i.error("Sending response failed."))}function U(Pe,Le,Oe){let st={jsonrpc:c,id:C.id,error:Pe.toJson()};wt(st,Le,Oe),e.write(st).catch(()=>i.error("Sending response failed."))}function te(Pe,Le,Oe){Pe===void 0&&(Pe=null);let st={jsonrpc:c,id:C.id,result:Pe};wt(st,Le,Oe),e.write(st).catch(()=>i.error("Sending response failed."))}Ir(C);let we=f.get(C.method),ke,ve;we&&(ke=we.type,ve=we.handler);let xe=Date.now();if(ve||d){let Pe=C.id??String(Date.now()),Le=Hu.is(K.receiver)?K.receiver.createCancellationTokenSource(Pe):K.receiver.createCancellationTokenSource(C);C.id!==null&&D.has(C.id)&&Le.cancel(),C.id!==null&&I.set(Pe,Le);try{let Oe;if(ve)if(C.params===void 0){if(ke!==void 0&&ke.numberOfParams!==0){U(new Me.ResponseError(Me.ErrorCodes.InvalidParams,`Request ${C.method} defines ${ke.numberOfParams} params but received none.`),C.method,xe);return}Oe=ve(Le.token)}else if(Array.isArray(C.params)){if(ke!==void 0&&ke.parameterStructures===Me.ParameterStructures.byName){U(new Me.ResponseError(Me.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by name but received parameters by position`),C.method,xe);return}Oe=ve(...C.params,Le.token)}else{if(ke!==void 0&&ke.parameterStructures===Me.ParameterStructures.byPosition){U(new Me.ResponseError(Me.ErrorCodes.InvalidParams,`Request ${C.method} defines parameters by position but received parameters by name`),C.method,xe);return}Oe=ve(C.params,Le.token)}else d&&(Oe=d(C.method,C.params,Le.token));let st=Oe;Oe?st.then?st.then(mt=>{I.delete(Pe),F(mt,C.method,xe)},mt=>{I.delete(Pe),mt instanceof Me.ResponseError?U(mt,C.method,xe):mt&&It.string(mt.message)?U(new Me.ResponseError(Me.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${mt.message}`),C.method,xe):U(new Me.ResponseError(Me.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,xe)}):(I.delete(Pe),F(Oe,C.method,xe)):(I.delete(Pe),te(Oe,C.method,xe))}catch(Oe){I.delete(Pe),Oe instanceof Me.ResponseError?F(Oe,C.method,xe):Oe&&It.string(Oe.message)?U(new Me.ResponseError(Me.ErrorCodes.InternalError,`Request ${C.method} failed with message: ${Oe.message}`),C.method,xe):U(new Me.ResponseError(Me.ErrorCodes.InternalError,`Request ${C.method} failed unexpectedly without providing any details.`),C.method,xe)}}else U(new Me.ResponseError(Me.ErrorCodes.MethodNotFound,`Unhandled method ${C.method}`),C.method,xe)}function He(C){if(!ue())if(C.id===null)C.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(C.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let F=C.id,U=R.get(F);if(rr(C,U),U!==void 0){R.delete(F);try{if(C.error){let te=C.error;U.reject(new Me.ResponseError(te.code,te.message,te.data))}else if(C.result!==void 0)U.resolve(C.result);else throw new Error("Should never happen.")}catch(te){te.message?i.error(`Response handler '${U.method}' failed with message: ${te.message}`):i.error(`Response handler '${U.method}' failed unexpectedly.`)}}}}function ct(C){if(ue())return;let F,U;if(C.method===zs.type.method){let te=C.params.id;D.delete(te),er(C);return}else{let te=g.get(C.method);te&&(U=te.handler,F=te.type)}if(U||y)try{if(er(C),U)if(C.params===void 0)F!==void 0&&F.numberOfParams!==0&&F.parameterStructures!==Me.ParameterStructures.byName&&i.error(`Notification ${C.method} defines ${F.numberOfParams} params but received none.`),U();else if(Array.isArray(C.params)){let te=C.params;C.method===Us.type.method&&te.length===2&&Ff.is(te[0])?U({token:te[0],value:te[1]}):(F!==void 0&&(F.parameterStructures===Me.ParameterStructures.byName&&i.error(`Notification ${C.method} defines parameters by name but received parameters by position`),F.numberOfParams!==C.params.length&&i.error(`Notification ${C.method} defines ${F.numberOfParams} params but received ${te.length} arguments`)),U(...te))}else F!==void 0&&F.parameterStructures===Me.ParameterStructures.byPosition&&i.error(`Notification ${C.method} defines parameters by position but received parameters by name`),U(C.params);else y&&y(C.method,C.params)}catch(te){te.message?i.error(`Notification handler '${C.method}' failed with message: ${te.message}`):i.error(`Notification handler '${C.method}' failed unexpectedly.`)}else se.fire(C)}function Vt(C){if(!C){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(C,null,4)}`);let F=C;if(It.string(F.id)||It.number(F.id)){let U=F.id,te=R.get(U);te&&te.reject(new Error("The received response has neither a result nor an error property."))}}function vt(C){if(C!=null)switch(A){case lt.Verbose:return JSON.stringify(C,null,4);case lt.Compact:return JSON.stringify(C);default:return}}function jt(C){if(!(A===lt.Off||!ee))if(N===Qr.Text){let F;(A===lt.Verbose||A===lt.Compact)&&C.params&&(F=`Params: ${vt(C.params)}

`),ee.log(`Sending request '${C.method} - (${C.id})'.`,F)}else St("send-request",C)}function Ot(C){if(!(A===lt.Off||!ee))if(N===Qr.Text){let F;(A===lt.Verbose||A===lt.Compact)&&(C.params?F=`Params: ${vt(C.params)}

`:F=`No parameters provided.

`),ee.log(`Sending notification '${C.method}'.`,F)}else St("send-notification",C)}function wt(C,F,U){if(!(A===lt.Off||!ee))if(N===Qr.Text){let te;(A===lt.Verbose||A===lt.Compact)&&(C.error&&C.error.data?te=`Error data: ${vt(C.error.data)}

`:C.result?te=`Result: ${vt(C.result)}

`:C.error===void 0&&(te=`No result returned.

`)),ee.log(`Sending response '${F} - (${C.id})'. Processing request took ${Date.now()-U}ms`,te)}else St("send-response",C)}function Ir(C){if(!(A===lt.Off||!ee))if(N===Qr.Text){let F;(A===lt.Verbose||A===lt.Compact)&&C.params&&(F=`Params: ${vt(C.params)}

`),ee.log(`Received request '${C.method} - (${C.id})'.`,F)}else St("receive-request",C)}function er(C){if(!(A===lt.Off||!ee||C.method===Wu.type.method))if(N===Qr.Text){let F;(A===lt.Verbose||A===lt.Compact)&&(C.params?F=`Params: ${vt(C.params)}

`:F=`No parameters provided.

`),ee.log(`Received notification '${C.method}'.`,F)}else St("receive-notification",C)}function rr(C,F){if(!(A===lt.Off||!ee))if(N===Qr.Text){let U;if((A===lt.Verbose||A===lt.Compact)&&(C.error&&C.error.data?U=`Error data: ${vt(C.error.data)}

`:C.result?U=`Result: ${vt(C.result)}

`:C.error===void 0&&(U=`No result returned.

`)),F){let te=C.error?` Request failed: ${C.error.message} (${C.error.code}).`:"";ee.log(`Received response '${F.method} - (${C.id})' in ${Date.now()-F.timerStart}ms.${te}`,U)}else ee.log(`Received response ${C.id} without active response promise.`,U)}else St("receive-response",C)}function St(C,F){if(!ee||A===lt.Off)return;let U={isLSPMessage:!0,type:C,message:F,timestamp:Date.now()};ee.log(U)}function gt(){if(P())throw new Mo(Bs.Closed,"Connection is closed.");if(ue())throw new Mo(Bs.Disposed,"Connection is disposed.")}function ht(){if(ne())throw new Mo(Bs.AlreadyListening,"Connection is already listening")}function Bt(){if(!ne())throw new Error("Call listen() first.")}function Gt(C){return C===void 0?null:C}function Tr(C){if(C!==null)return C}function $t(C){return C!=null&&!Array.isArray(C)&&typeof C=="object"}function hr(C,F){switch(C){case Me.ParameterStructures.auto:return $t(F)?Tr(F):[Gt(F)];case Me.ParameterStructures.byName:if(!$t(F))throw new Error("Received parameters by name but param is not an object literal.");return Tr(F);case Me.ParameterStructures.byPosition:return[Gt(F)];default:throw new Error(`Unknown parameter structure ${C.toString()}`)}}function Ye(C,F){let U,te=C.numberOfParams;switch(te){case 0:U=void 0;break;case 1:U=hr(C.parameterStructures,F[0]);break;default:U=[];for(let we=0;we<F.length&&we<te;we++)U.push(Gt(F[we]));if(F.length<te)for(let we=F.length;we<te;we++)U.push(null);break}return U}let z={sendNotification:(C,...F)=>{gt();let U,te;if(It.string(C)){U=C;let ke=F[0],ve=0,xe=Me.ParameterStructures.auto;Me.ParameterStructures.is(ke)&&(ve=1,xe=ke);let Pe=F.length,Le=Pe-ve;switch(Le){case 0:te=void 0;break;case 1:te=hr(xe,F[ve]);break;default:if(xe===Me.ParameterStructures.byName)throw new Error(`Received ${Le} parameters for 'by Name' notification parameter structure.`);te=F.slice(ve,Pe).map(Oe=>Gt(Oe));break}}else{let ke=F;U=C.method,te=Ye(C,ke)}let we={jsonrpc:c,method:U,params:te};return Ot(we),e.write(we).catch(ke=>{throw i.error("Sending notification failed."),ke})},onNotification:(C,F)=>{gt();let U;return It.func(C)?y=C:F&&(It.string(C)?(U=C,g.set(C,{type:void 0,handler:F})):(U=C.method,g.set(C.method,{type:C,handler:F}))),{dispose:()=>{U!==void 0?g.delete(U):y=void 0}}},onProgress:(C,F,U)=>{if(m.has(F))throw new Error(`Progress handler for token ${F} already registered`);return m.set(F,U),{dispose:()=>{m.delete(F)}}},sendProgress:(C,F,U)=>z.sendNotification(Us.type,{token:F,value:U}),onUnhandledProgress:_e.event,sendRequest:(C,...F)=>{gt(),Bt();let U,te,we;if(It.string(C)){U=C;let Pe=F[0],Le=F[F.length-1],Oe=0,st=Me.ParameterStructures.auto;Me.ParameterStructures.is(Pe)&&(Oe=1,st=Pe);let mt=F.length;xf.CancellationToken.is(Le)&&(mt=mt-1,we=Le);let Qt=mt-Oe;switch(Qt){case 0:te=void 0;break;case 1:te=hr(st,F[Oe]);break;default:if(st===Me.ParameterStructures.byName)throw new Error(`Received ${Qt} parameters for 'by Name' request parameter structure.`);te=F.slice(Oe,mt).map(on=>Gt(on));break}}else{let Pe=F;U=C.method,te=Ye(C,Pe);let Le=C.numberOfParams;we=xf.CancellationToken.is(Pe[Le])?Pe[Le]:void 0}let ke=o++,ve;we&&(ve=we.onCancellationRequested(()=>{let Pe=K.sender.sendCancellation(z,ke);return Pe===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${ke}`),Promise.resolve()):Pe.catch(()=>{i.log(`Sending cancellation messages for id ${ke} failed`)})}));let xe={jsonrpc:c,id:ke,method:U,params:te};return jt(xe),typeof K.sender.enableCancellation=="function"&&K.sender.enableCancellation(xe),new Promise(async(Pe,Le)=>{let Oe=Qt=>{Pe(Qt),K.sender.cleanup(ke),ve?.dispose()},st=Qt=>{Le(Qt),K.sender.cleanup(ke),ve?.dispose()},mt={method:U,timerStart:Date.now(),resolve:Oe,reject:st};try{await e.write(xe),R.set(ke,mt)}catch(Qt){throw i.error("Sending request failed."),mt.reject(new Me.ResponseError(Me.ErrorCodes.MessageWriteError,Qt.message?Qt.message:"Unknown reason")),Qt}})},onRequest:(C,F)=>{gt();let U=null;return If.is(C)?(U=void 0,d=C):It.string(C)?(U=null,F!==void 0&&(U=C,f.set(C,{handler:F,type:void 0}))):F!==void 0&&(U=C.method,f.set(C.method,{type:C,handler:F})),{dispose:()=>{U!==null&&(U!==void 0?f.delete(U):d=void 0)}}},hasPendingResponse:()=>R.size>0,trace:async(C,F,U)=>{let te=!1,we=Qr.Text;U!==void 0&&(It.boolean(U)?te=U:(te=U.sendNotification||!1,we=U.traceFormat||Qr.Text)),A=C,N=we,A===lt.Off?ee=void 0:ee=F,te&&!P()&&!ue()&&await z.sendNotification(Af.type,{value:lt.toString(C)})},onError:re.event,onClose:de.event,onUnhandledNotification:se.event,onDispose:G.event,end:()=>{e.end()},dispose:()=>{if(ue())return;fe=Sn.Disposed,G.fire(void 0);let C=new Me.ResponseError(Me.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let F of R.values())F.reject(C);R=new Map,I=new Map,D=new Set,S=new zv.LinkedMap,It.func(e.dispose)&&e.dispose(),It.func(t.dispose)&&t.dispose()},listen:()=>{gt(),ht(),fe=Sn.Listening,t.listen(Te)},inspect:()=>{(0,Bv.default)().console.log("inspect")}};return z.onNotification(Wu.type,C=>{if(A===lt.Off||!ee)return;let F=A===lt.Verbose||A===lt.Compact;ee.log(C.message,F?C.verbose:void 0)}),z.onNotification(Us.type,C=>{let F=m.get(C.token);F?F(C.value):_e.fire(C)}),z}ze.createMessageConnection=gx});var Vu=q(oe=>{"use strict";Object.defineProperty(oe,"__esModule",{value:!0});oe.ProgressType=oe.ProgressToken=oe.createMessageConnection=oe.NullLogger=oe.ConnectionOptions=oe.ConnectionStrategy=oe.AbstractMessageBuffer=oe.WriteableStreamMessageWriter=oe.AbstractMessageWriter=oe.MessageWriter=oe.ReadableStreamMessageReader=oe.AbstractMessageReader=oe.MessageReader=oe.SharedArrayReceiverStrategy=oe.SharedArraySenderStrategy=oe.CancellationToken=oe.CancellationTokenSource=oe.Emitter=oe.Event=oe.Disposable=oe.LRUCache=oe.Touch=oe.LinkedMap=oe.ParameterStructures=oe.NotificationType9=oe.NotificationType8=oe.NotificationType7=oe.NotificationType6=oe.NotificationType5=oe.NotificationType4=oe.NotificationType3=oe.NotificationType2=oe.NotificationType1=oe.NotificationType0=oe.NotificationType=oe.ErrorCodes=oe.ResponseError=oe.RequestType9=oe.RequestType8=oe.RequestType7=oe.RequestType6=oe.RequestType5=oe.RequestType4=oe.RequestType3=oe.RequestType2=oe.RequestType1=oe.RequestType0=oe.RequestType=oe.Message=oe.RAL=void 0;oe.MessageStrategy=oe.CancellationStrategy=oe.CancellationSenderStrategy=oe.CancellationReceiverStrategy=oe.ConnectionError=oe.ConnectionErrors=oe.LogTraceNotification=oe.SetTraceNotification=oe.TraceFormat=oe.TraceValues=oe.Trace=void 0;var Rt=cf();Object.defineProperty(oe,"Message",{enumerable:!0,get:function(){return Rt.Message}});Object.defineProperty(oe,"RequestType",{enumerable:!0,get:function(){return Rt.RequestType}});Object.defineProperty(oe,"RequestType0",{enumerable:!0,get:function(){return Rt.RequestType0}});Object.defineProperty(oe,"RequestType1",{enumerable:!0,get:function(){return Rt.RequestType1}});Object.defineProperty(oe,"RequestType2",{enumerable:!0,get:function(){return Rt.RequestType2}});Object.defineProperty(oe,"RequestType3",{enumerable:!0,get:function(){return Rt.RequestType3}});Object.defineProperty(oe,"RequestType4",{enumerable:!0,get:function(){return Rt.RequestType4}});Object.defineProperty(oe,"RequestType5",{enumerable:!0,get:function(){return Rt.RequestType5}});Object.defineProperty(oe,"RequestType6",{enumerable:!0,get:function(){return Rt.RequestType6}});Object.defineProperty(oe,"RequestType7",{enumerable:!0,get:function(){return Rt.RequestType7}});Object.defineProperty(oe,"RequestType8",{enumerable:!0,get:function(){return Rt.RequestType8}});Object.defineProperty(oe,"RequestType9",{enumerable:!0,get:function(){return Rt.RequestType9}});Object.defineProperty(oe,"ResponseError",{enumerable:!0,get:function(){return Rt.ResponseError}});Object.defineProperty(oe,"ErrorCodes",{enumerable:!0,get:function(){return Rt.ErrorCodes}});Object.defineProperty(oe,"NotificationType",{enumerable:!0,get:function(){return Rt.NotificationType}});Object.defineProperty(oe,"NotificationType0",{enumerable:!0,get:function(){return Rt.NotificationType0}});Object.defineProperty(oe,"NotificationType1",{enumerable:!0,get:function(){return Rt.NotificationType1}});Object.defineProperty(oe,"NotificationType2",{enumerable:!0,get:function(){return Rt.NotificationType2}});Object.defineProperty(oe,"NotificationType3",{enumerable:!0,get:function(){return Rt.NotificationType3}});Object.defineProperty(oe,"NotificationType4",{enumerable:!0,get:function(){return Rt.NotificationType4}});Object.defineProperty(oe,"NotificationType5",{enumerable:!0,get:function(){return Rt.NotificationType5}});Object.defineProperty(oe,"NotificationType6",{enumerable:!0,get:function(){return Rt.NotificationType6}});Object.defineProperty(oe,"NotificationType7",{enumerable:!0,get:function(){return Rt.NotificationType7}});Object.defineProperty(oe,"NotificationType8",{enumerable:!0,get:function(){return Rt.NotificationType8}});Object.defineProperty(oe,"NotificationType9",{enumerable:!0,get:function(){return Rt.NotificationType9}});Object.defineProperty(oe,"ParameterStructures",{enumerable:!0,get:function(){return Rt.ParameterStructures}});var Mf=df();Object.defineProperty(oe,"LinkedMap",{enumerable:!0,get:function(){return Mf.LinkedMap}});Object.defineProperty(oe,"LRUCache",{enumerable:!0,get:function(){return Mf.LRUCache}});Object.defineProperty(oe,"Touch",{enumerable:!0,get:function(){return Mf.Touch}});var mx=Ov();Object.defineProperty(oe,"Disposable",{enumerable:!0,get:function(){return mx.Disposable}});var Qv=Io();Object.defineProperty(oe,"Event",{enumerable:!0,get:function(){return Qv.Event}});Object.defineProperty(oe,"Emitter",{enumerable:!0,get:function(){return Qv.Emitter}});var Xv=Lu();Object.defineProperty(oe,"CancellationTokenSource",{enumerable:!0,get:function(){return Xv.CancellationTokenSource}});Object.defineProperty(oe,"CancellationToken",{enumerable:!0,get:function(){return Xv.CancellationToken}});var Yv=Av();Object.defineProperty(oe,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return Yv.SharedArraySenderStrategy}});Object.defineProperty(oe,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return Yv.SharedArrayReceiverStrategy}});var jf=Nv();Object.defineProperty(oe,"MessageReader",{enumerable:!0,get:function(){return jf.MessageReader}});Object.defineProperty(oe,"AbstractMessageReader",{enumerable:!0,get:function(){return jf.AbstractMessageReader}});Object.defineProperty(oe,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return jf.ReadableStreamMessageReader}});var $f=Hv();Object.defineProperty(oe,"MessageWriter",{enumerable:!0,get:function(){return $f.MessageWriter}});Object.defineProperty(oe,"AbstractMessageWriter",{enumerable:!0,get:function(){return $f.AbstractMessageWriter}});Object.defineProperty(oe,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return $f.WriteableStreamMessageWriter}});var yx=Uv();Object.defineProperty(oe,"AbstractMessageBuffer",{enumerable:!0,get:function(){return yx.AbstractMessageBuffer}});var lr=Gv();Object.defineProperty(oe,"ConnectionStrategy",{enumerable:!0,get:function(){return lr.ConnectionStrategy}});Object.defineProperty(oe,"ConnectionOptions",{enumerable:!0,get:function(){return lr.ConnectionOptions}});Object.defineProperty(oe,"NullLogger",{enumerable:!0,get:function(){return lr.NullLogger}});Object.defineProperty(oe,"createMessageConnection",{enumerable:!0,get:function(){return lr.createMessageConnection}});Object.defineProperty(oe,"ProgressToken",{enumerable:!0,get:function(){return lr.ProgressToken}});Object.defineProperty(oe,"ProgressType",{enumerable:!0,get:function(){return lr.ProgressType}});Object.defineProperty(oe,"Trace",{enumerable:!0,get:function(){return lr.Trace}});Object.defineProperty(oe,"TraceValues",{enumerable:!0,get:function(){return lr.TraceValues}});Object.defineProperty(oe,"TraceFormat",{enumerable:!0,get:function(){return lr.TraceFormat}});Object.defineProperty(oe,"SetTraceNotification",{enumerable:!0,get:function(){return lr.SetTraceNotification}});Object.defineProperty(oe,"LogTraceNotification",{enumerable:!0,get:function(){return lr.LogTraceNotification}});Object.defineProperty(oe,"ConnectionErrors",{enumerable:!0,get:function(){return lr.ConnectionErrors}});Object.defineProperty(oe,"ConnectionError",{enumerable:!0,get:function(){return lr.ConnectionError}});Object.defineProperty(oe,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return lr.CancellationReceiverStrategy}});Object.defineProperty(oe,"CancellationSenderStrategy",{enumerable:!0,get:function(){return lr.CancellationSenderStrategy}});Object.defineProperty(oe,"CancellationStrategy",{enumerable:!0,get:function(){return lr.CancellationStrategy}});Object.defineProperty(oe,"MessageStrategy",{enumerable:!0,get:function(){return lr.MessageStrategy}});var vx=mi();oe.RAL=vx.default});var e_=q(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var Jv=require("util"),Kn=Vu(),Gu=class t extends Kn.AbstractMessageBuffer{constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,r){return Buffer.from(e,r)}toString(e,r){return e instanceof Buffer?e.toString(r):new Jv.TextDecoder(r).decode(e)}asNative(e,r){return r===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,r):Buffer.from(e,0,r)}allocNative(e){return Buffer.allocUnsafe(e)}};Gu.emptyBuffer=Buffer.allocUnsafe(0);var Wf=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Kn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Kn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Kn.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),Kn.Disposable.create(()=>this.stream.off("data",e))}},Hf=class{constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),Kn.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),Kn.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),Kn.Disposable.create(()=>this.stream.off("end",e))}write(e,r){return new Promise((n,i)=>{let o=a=>{a==null?n():i(a)};typeof e=="string"?this.stream.write(e,r,o):this.stream.write(e,o)})}end(){this.stream.end()}},Zv=Object.freeze({messageBuffer:Object.freeze({create:t=>new Gu(t)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(r){return Promise.reject(r)}}}),decoder:Object.freeze({name:"application/json",decode:(t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Jv.TextDecoder(e.charset).decode(t)))}catch(r){return Promise.reject(r)}}})}),stream:Object.freeze({asReadableStream:t=>new Wf(t),asWritableStream:t=>new Hf(t)}),console,timer:Object.freeze({setTimeout(t,e,...r){let n=setTimeout(t,e,...r);return{dispose:()=>clearTimeout(n)}},setImmediate(t,...e){let r=setImmediate(t,...e);return{dispose:()=>clearImmediate(r)}},setInterval(t,e,...r){let n=setInterval(t,e,...r);return{dispose:()=>clearInterval(n)}}})});function Uf(){return Zv}(function(t){function e(){Kn.RAL.install(Zv)}t.install=e})(Uf||(Uf={}));Bf.default=Uf});var Gi=q(rt=>{"use strict";var _x=rt&&rt.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),bx=rt&&rt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&_x(e,t,r)};Object.defineProperty(rt,"__esModule",{value:!0});rt.createMessageConnection=rt.createServerSocketTransport=rt.createClientSocketTransport=rt.createServerPipeTransport=rt.createClientPipeTransport=rt.generateRandomPipeName=rt.StreamMessageWriter=rt.StreamMessageReader=rt.SocketMessageWriter=rt.SocketMessageReader=rt.PortMessageWriter=rt.PortMessageReader=rt.IPCMessageWriter=rt.IPCMessageReader=void 0;var jo=e_();jo.default.install();var t_=require("path"),wx=require("os"),Sx=require("crypto"),Yu=require("net"),Xr=Vu();bx(Vu(),rt);var zf=class extends Xr.AbstractMessageReader{constructor(e){super(),this.process=e;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),Xr.Disposable.create(()=>this.process.off("message",e))}};rt.IPCMessageReader=zf;var Kf=class extends Xr.AbstractMessageWriter{constructor(e){super(),this.process=e,this.errorCount=0;let r=this.process;r.on("error",n=>this.fireError(n)),r.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,r=>{r?(this.errorCount++,this.handleError(r,e)):this.errorCount=0}),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};rt.IPCMessageWriter=Kf;var Vf=class extends Xr.AbstractMessageReader{constructor(e){super(),this.onData=new Xr.Emitter,e.on("close",()=>this.fireClose),e.on("error",r=>this.fireError(r)),e.on("message",r=>{this.onData.fire(r)})}listen(e){return this.onData.event(e)}};rt.PortMessageReader=Vf;var Gf=class extends Xr.AbstractMessageWriter{constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",r=>this.fireError(r))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(r){return this.handleError(r,e),Promise.reject(r)}}handleError(e,r){this.errorCount++,this.fireError(e,r,this.errorCount)}end(){}};rt.PortMessageWriter=Gf;var Ki=class extends Xr.ReadableStreamMessageReader{constructor(e,r="utf-8"){super((0,jo.default)().stream.asReadableStream(e),r)}};rt.SocketMessageReader=Ki;var Vi=class extends Xr.WriteableStreamMessageWriter{constructor(e,r){super((0,jo.default)().stream.asWritableStream(e),r),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};rt.SocketMessageWriter=Vi;var Qu=class extends Xr.ReadableStreamMessageReader{constructor(e,r){super((0,jo.default)().stream.asReadableStream(e),r)}};rt.StreamMessageReader=Qu;var Xu=class extends Xr.WriteableStreamMessageWriter{constructor(e,r){super((0,jo.default)().stream.asWritableStream(e),r)}};rt.StreamMessageWriter=Xu;var r_=process.env.XDG_RUNTIME_DIR,Cx=new Map([["linux",107],["darwin",103]]);function Rx(){let t=(0,Sx.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;r_?e=t_.join(r_,`vscode-ipc-${t}.sock`):e=t_.join(wx.tmpdir(),`vscode-${t}.sock`);let r=Cx.get(process.platform);return r!==void 0&&e.length>r&&(0,jo.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${r} characters.`),e}rt.generateRandomPipeName=Rx;function Tx(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,Yu.createServer)(u=>{a.close(),r([new Ki(u,e),new Vi(u,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:()=>n})})})}rt.createClientPipeTransport=Tx;function Dx(t,e="utf-8"){let r=(0,Yu.createConnection)(t);return[new Ki(r,e),new Vi(r,e)]}rt.createServerPipeTransport=Dx;function Ex(t,e="utf-8"){let r,n=new Promise((i,o)=>{r=i});return new Promise((i,o)=>{let a=(0,Yu.createServer)(u=>{a.close(),r([new Ki(u,e),new Vi(u,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:()=>n})})})}rt.createClientSocketTransport=Ex;function Px(t,e="utf-8"){let r=(0,Yu.createConnection)(t,"127.0.0.1");return[new Ki(r,e),new Vi(r,e)]}rt.createServerSocketTransport=Px;function kx(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}function qx(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}function xx(t,e,r,n){r||(r=Xr.NullLogger);let i=kx(t)?new Qu(t):t,o=qx(e)?new Xu(e):e;return Xr.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Xr.createMessageConnection)(i,o,r,n)}rt.createMessageConnection=xx});var Qf=q((a2,n_)=>{"use strict";n_.exports=Gi()});var Zu=q((i_,Ju)=>{(function(t){if(typeof Ju=="object"&&typeof Ju.exports=="object"){var e=t(require,i_);e!==void 0&&(Ju.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var r;(function(w){function x(O){return typeof O=="string"}w.is=x})(r||(e.DocumentUri=r={}));var n;(function(w){function x(O){return typeof O=="string"}w.is=x})(n||(e.URI=n={}));var i;(function(w){w.MIN_VALUE=-2147483648,w.MAX_VALUE=2147483647;function x(O){return typeof O=="number"&&w.MIN_VALUE<=O&&O<=w.MAX_VALUE}w.is=x})(i||(e.integer=i={}));var o;(function(w){w.MIN_VALUE=0,w.MAX_VALUE=2147483647;function x(O){return typeof O=="number"&&w.MIN_VALUE<=O&&O<=w.MAX_VALUE}w.is=x})(o||(e.uinteger=o={}));var a;(function(w){function x(T,_){return T===Number.MAX_VALUE&&(T=o.MAX_VALUE),_===Number.MAX_VALUE&&(_=o.MAX_VALUE),{line:T,character:_}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&B.uinteger(_.line)&&B.uinteger(_.character)}w.is=O})(a||(e.Position=a={}));var u;(function(w){function x(T,_,Q,ce){if(B.uinteger(T)&&B.uinteger(_)&&B.uinteger(Q)&&B.uinteger(ce))return{start:a.create(T,_),end:a.create(Q,ce)};if(a.is(T)&&a.is(_))return{start:T,end:_};throw new Error("Range#create called with invalid arguments[".concat(T,", ").concat(_,", ").concat(Q,", ").concat(ce,"]"))}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&a.is(_.start)&&a.is(_.end)}w.is=O})(u||(e.Range=u={}));var c;(function(w){function x(T,_){return{uri:T,range:_}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&u.is(_.range)&&(B.string(_.uri)||B.undefined(_.uri))}w.is=O})(c||(e.Location=c={}));var d;(function(w){function x(T,_,Q,ce){return{targetUri:T,targetRange:_,targetSelectionRange:Q,originSelectionRange:ce}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&u.is(_.targetRange)&&B.string(_.targetUri)&&u.is(_.targetSelectionRange)&&(u.is(_.originSelectionRange)||B.undefined(_.originSelectionRange))}w.is=O})(d||(e.LocationLink=d={}));var f;(function(w){function x(T,_,Q,ce){return{red:T,green:_,blue:Q,alpha:ce}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&B.numberRange(_.red,0,1)&&B.numberRange(_.green,0,1)&&B.numberRange(_.blue,0,1)&&B.numberRange(_.alpha,0,1)}w.is=O})(f||(e.Color=f={}));var y;(function(w){function x(T,_){return{range:T,color:_}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&u.is(_.range)&&f.is(_.color)}w.is=O})(y||(e.ColorInformation=y={}));var g;(function(w){function x(T,_,Q){return{label:T,textEdit:_,additionalTextEdits:Q}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&B.string(_.label)&&(B.undefined(_.textEdit)||ee.is(_))&&(B.undefined(_.additionalTextEdits)||B.typedArray(_.additionalTextEdits,ee.is))}w.is=O})(g||(e.ColorPresentation=g={}));var m;(function(w){w.Comment="comment",w.Imports="imports",w.Region="region"})(m||(e.FoldingRangeKind=m={}));var h;(function(w){function x(T,_,Q,ce,Ae,it){var Je={startLine:T,endLine:_};return B.defined(Q)&&(Je.startCharacter=Q),B.defined(ce)&&(Je.endCharacter=ce),B.defined(Ae)&&(Je.kind=Ae),B.defined(it)&&(Je.collapsedText=it),Je}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&B.uinteger(_.startLine)&&B.uinteger(_.startLine)&&(B.undefined(_.startCharacter)||B.uinteger(_.startCharacter))&&(B.undefined(_.endCharacter)||B.uinteger(_.endCharacter))&&(B.undefined(_.kind)||B.string(_.kind))}w.is=O})(h||(e.FoldingRange=h={}));var S;(function(w){function x(T,_){return{location:T,message:_}}w.create=x;function O(T){var _=T;return B.defined(_)&&c.is(_.location)&&B.string(_.message)}w.is=O})(S||(e.DiagnosticRelatedInformation=S={}));var R;(function(w){w.Error=1,w.Warning=2,w.Information=3,w.Hint=4})(R||(e.DiagnosticSeverity=R={}));var D;(function(w){w.Unnecessary=1,w.Deprecated=2})(D||(e.DiagnosticTag=D={}));var I;(function(w){function x(O){var T=O;return B.objectLiteral(T)&&B.string(T.href)}w.is=x})(I||(e.CodeDescription=I={}));var A;(function(w){function x(T,_,Q,ce,Ae,it){var Je={range:T,message:_};return B.defined(Q)&&(Je.severity=Q),B.defined(ce)&&(Je.code=ce),B.defined(Ae)&&(Je.source=Ae),B.defined(it)&&(Je.relatedInformation=it),Je}w.create=x;function O(T){var _,Q=T;return B.defined(Q)&&u.is(Q.range)&&B.string(Q.message)&&(B.number(Q.severity)||B.undefined(Q.severity))&&(B.integer(Q.code)||B.string(Q.code)||B.undefined(Q.code))&&(B.undefined(Q.codeDescription)||B.string((_=Q.codeDescription)===null||_===void 0?void 0:_.href))&&(B.string(Q.source)||B.undefined(Q.source))&&(B.undefined(Q.relatedInformation)||B.typedArray(Q.relatedInformation,S.is))}w.is=O})(A||(e.Diagnostic=A={}));var N;(function(w){function x(T,_){for(var Q=[],ce=2;ce<arguments.length;ce++)Q[ce-2]=arguments[ce];var Ae={title:T,command:_};return B.defined(Q)&&Q.length>0&&(Ae.arguments=Q),Ae}w.create=x;function O(T){var _=T;return B.defined(_)&&B.string(_.title)&&B.string(_.command)}w.is=O})(N||(e.Command=N={}));var ee;(function(w){function x(Q,ce){return{range:Q,newText:ce}}w.replace=x;function O(Q,ce){return{range:{start:Q,end:Q},newText:ce}}w.insert=O;function T(Q){return{range:Q,newText:""}}w.del=T;function _(Q){var ce=Q;return B.objectLiteral(ce)&&B.string(ce.newText)&&u.is(ce.range)}w.is=_})(ee||(e.TextEdit=ee={}));var fe;(function(w){function x(T,_,Q){var ce={label:T};return _!==void 0&&(ce.needsConfirmation=_),Q!==void 0&&(ce.description=Q),ce}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&B.string(_.label)&&(B.boolean(_.needsConfirmation)||_.needsConfirmation===void 0)&&(B.string(_.description)||_.description===void 0)}w.is=O})(fe||(e.ChangeAnnotation=fe={}));var re;(function(w){function x(O){var T=O;return B.string(T)}w.is=x})(re||(e.ChangeAnnotationIdentifier=re={}));var de;(function(w){function x(Q,ce,Ae){return{range:Q,newText:ce,annotationId:Ae}}w.replace=x;function O(Q,ce,Ae){return{range:{start:Q,end:Q},newText:ce,annotationId:Ae}}w.insert=O;function T(Q,ce){return{range:Q,newText:"",annotationId:ce}}w.del=T;function _(Q){var ce=Q;return ee.is(ce)&&(fe.is(ce.annotationId)||re.is(ce.annotationId))}w.is=_})(de||(e.AnnotatedTextEdit=de={}));var se;(function(w){function x(T,_){return{textDocument:T,edits:_}}w.create=x;function O(T){var _=T;return B.defined(_)&&P.is(_.textDocument)&&Array.isArray(_.edits)}w.is=O})(se||(e.TextDocumentEdit=se={}));var _e;(function(w){function x(T,_,Q){var ce={kind:"create",uri:T};return _!==void 0&&(_.overwrite!==void 0||_.ignoreIfExists!==void 0)&&(ce.options=_),Q!==void 0&&(ce.annotationId=Q),ce}w.create=x;function O(T){var _=T;return _&&_.kind==="create"&&B.string(_.uri)&&(_.options===void 0||(_.options.overwrite===void 0||B.boolean(_.options.overwrite))&&(_.options.ignoreIfExists===void 0||B.boolean(_.options.ignoreIfExists)))&&(_.annotationId===void 0||re.is(_.annotationId))}w.is=O})(_e||(e.CreateFile=_e={}));var G;(function(w){function x(T,_,Q,ce){var Ae={kind:"rename",oldUri:T,newUri:_};return Q!==void 0&&(Q.overwrite!==void 0||Q.ignoreIfExists!==void 0)&&(Ae.options=Q),ce!==void 0&&(Ae.annotationId=ce),Ae}w.create=x;function O(T){var _=T;return _&&_.kind==="rename"&&B.string(_.oldUri)&&B.string(_.newUri)&&(_.options===void 0||(_.options.overwrite===void 0||B.boolean(_.options.overwrite))&&(_.options.ignoreIfExists===void 0||B.boolean(_.options.ignoreIfExists)))&&(_.annotationId===void 0||re.is(_.annotationId))}w.is=O})(G||(e.RenameFile=G={}));var K;(function(w){function x(T,_,Q){var ce={kind:"delete",uri:T};return _!==void 0&&(_.recursive!==void 0||_.ignoreIfNotExists!==void 0)&&(ce.options=_),Q!==void 0&&(ce.annotationId=Q),ce}w.create=x;function O(T){var _=T;return _&&_.kind==="delete"&&B.string(_.uri)&&(_.options===void 0||(_.options.recursive===void 0||B.boolean(_.options.recursive))&&(_.options.ignoreIfNotExists===void 0||B.boolean(_.options.ignoreIfNotExists)))&&(_.annotationId===void 0||re.is(_.annotationId))}w.is=O})(K||(e.DeleteFile=K={}));var j;(function(w){function x(O){var T=O;return T&&(T.changes!==void 0||T.documentChanges!==void 0)&&(T.documentChanges===void 0||T.documentChanges.every(function(_){return B.string(_.kind)?_e.is(_)||G.is(_)||K.is(_):se.is(_)}))}w.is=x})(j||(e.WorkspaceEdit=j={}));var X=function(){function w(x,O){this.edits=x,this.changeAnnotations=O}return w.prototype.insert=function(x,O,T){var _,Q;if(T===void 0?_=ee.insert(x,O):re.is(T)?(Q=T,_=de.insert(x,O,T)):(this.assertChangeAnnotations(this.changeAnnotations),Q=this.changeAnnotations.manage(T),_=de.insert(x,O,Q)),this.edits.push(_),Q!==void 0)return Q},w.prototype.replace=function(x,O,T){var _,Q;if(T===void 0?_=ee.replace(x,O):re.is(T)?(Q=T,_=de.replace(x,O,T)):(this.assertChangeAnnotations(this.changeAnnotations),Q=this.changeAnnotations.manage(T),_=de.replace(x,O,Q)),this.edits.push(_),Q!==void 0)return Q},w.prototype.delete=function(x,O){var T,_;if(O===void 0?T=ee.del(x):re.is(O)?(_=O,T=de.del(x,O)):(this.assertChangeAnnotations(this.changeAnnotations),_=this.changeAnnotations.manage(O),T=de.del(x,_)),this.edits.push(T),_!==void 0)return _},w.prototype.add=function(x){this.edits.push(x)},w.prototype.all=function(){return this.edits},w.prototype.clear=function(){this.edits.splice(0,this.edits.length)},w.prototype.assertChangeAnnotations=function(x){if(x===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},w}(),$=function(){function w(x){this._annotations=x===void 0?Object.create(null):x,this._counter=0,this._size=0}return w.prototype.all=function(){return this._annotations},Object.defineProperty(w.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),w.prototype.manage=function(x,O){var T;if(re.is(x)?T=x:(T=this.nextId(),O=x),this._annotations[T]!==void 0)throw new Error("Id ".concat(T," is already in use."));if(O===void 0)throw new Error("No annotation provided for id ".concat(T));return this._annotations[T]=O,this._size++,T},w.prototype.nextId=function(){return this._counter++,this._counter.toString()},w}(),H=function(){function w(x){var O=this;this._textEditChanges=Object.create(null),x!==void 0?(this._workspaceEdit=x,x.documentChanges?(this._changeAnnotations=new $(x.changeAnnotations),x.changeAnnotations=this._changeAnnotations.all(),x.documentChanges.forEach(function(T){if(se.is(T)){var _=new X(T.edits,O._changeAnnotations);O._textEditChanges[T.textDocument.uri]=_}})):x.changes&&Object.keys(x.changes).forEach(function(T){var _=new X(x.changes[T]);O._textEditChanges[T]=_})):this._workspaceEdit={}}return Object.defineProperty(w.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),w.prototype.getTextEditChange=function(x){if(P.is(x)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var O={uri:x.uri,version:x.version},T=this._textEditChanges[O.uri];if(!T){var _=[],Q={textDocument:O,edits:_};this._workspaceEdit.documentChanges.push(Q),T=new X(_,this._changeAnnotations),this._textEditChanges[O.uri]=T}return T}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var T=this._textEditChanges[x];if(!T){var _=[];this._workspaceEdit.changes[x]=_,T=new X(_),this._textEditChanges[x]=T}return T}},w.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new $,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},w.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},w.prototype.createFile=function(x,O,T){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _;fe.is(O)||re.is(O)?_=O:T=O;var Q,ce;if(_===void 0?Q=_e.create(x,T):(ce=re.is(_)?_:this._changeAnnotations.manage(_),Q=_e.create(x,T,ce)),this._workspaceEdit.documentChanges.push(Q),ce!==void 0)return ce},w.prototype.renameFile=function(x,O,T,_){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var Q;fe.is(T)||re.is(T)?Q=T:_=T;var ce,Ae;if(Q===void 0?ce=G.create(x,O,_):(Ae=re.is(Q)?Q:this._changeAnnotations.manage(Q),ce=G.create(x,O,_,Ae)),this._workspaceEdit.documentChanges.push(ce),Ae!==void 0)return Ae},w.prototype.deleteFile=function(x,O,T){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var _;fe.is(O)||re.is(O)?_=O:T=O;var Q,ce;if(_===void 0?Q=K.create(x,T):(ce=re.is(_)?_:this._changeAnnotations.manage(_),Q=K.create(x,T,ce)),this._workspaceEdit.documentChanges.push(Q),ce!==void 0)return ce},w}();e.WorkspaceChange=H;var V;(function(w){function x(T){return{uri:T}}w.create=x;function O(T){var _=T;return B.defined(_)&&B.string(_.uri)}w.is=O})(V||(e.TextDocumentIdentifier=V={}));var ne;(function(w){function x(T,_){return{uri:T,version:_}}w.create=x;function O(T){var _=T;return B.defined(_)&&B.string(_.uri)&&B.integer(_.version)}w.is=O})(ne||(e.VersionedTextDocumentIdentifier=ne={}));var P;(function(w){function x(T,_){return{uri:T,version:_}}w.create=x;function O(T){var _=T;return B.defined(_)&&B.string(_.uri)&&(_.version===null||B.integer(_.version))}w.is=O})(P||(e.OptionalVersionedTextDocumentIdentifier=P={}));var ue;(function(w){function x(T,_,Q,ce){return{uri:T,languageId:_,version:Q,text:ce}}w.create=x;function O(T){var _=T;return B.defined(_)&&B.string(_.uri)&&B.string(_.languageId)&&B.integer(_.version)&&B.string(_.text)}w.is=O})(ue||(e.TextDocumentItem=ue={}));var ye;(function(w){w.PlainText="plaintext",w.Markdown="markdown";function x(O){var T=O;return T===w.PlainText||T===w.Markdown}w.is=x})(ye||(e.MarkupKind=ye={}));var me;(function(w){function x(O){var T=O;return B.objectLiteral(O)&&ye.is(T.kind)&&B.string(T.value)}w.is=x})(me||(e.MarkupContent=me={}));var L;(function(w){w.Text=1,w.Method=2,w.Function=3,w.Constructor=4,w.Field=5,w.Variable=6,w.Class=7,w.Interface=8,w.Module=9,w.Property=10,w.Unit=11,w.Value=12,w.Enum=13,w.Keyword=14,w.Snippet=15,w.Color=16,w.File=17,w.Reference=18,w.Folder=19,w.EnumMember=20,w.Constant=21,w.Struct=22,w.Event=23,w.Operator=24,w.TypeParameter=25})(L||(e.CompletionItemKind=L={}));var Y;(function(w){w.PlainText=1,w.Snippet=2})(Y||(e.InsertTextFormat=Y={}));var ae;(function(w){w.Deprecated=1})(ae||(e.CompletionItemTag=ae={}));var pe;(function(w){function x(T,_,Q){return{newText:T,insert:_,replace:Q}}w.create=x;function O(T){var _=T;return _&&B.string(_.newText)&&u.is(_.insert)&&u.is(_.replace)}w.is=O})(pe||(e.InsertReplaceEdit=pe={}));var Te;(function(w){w.asIs=1,w.adjustIndentation=2})(Te||(e.InsertTextMode=Te={}));var Ce;(function(w){function x(O){var T=O;return T&&(B.string(T.detail)||T.detail===void 0)&&(B.string(T.description)||T.description===void 0)}w.is=x})(Ce||(e.CompletionItemLabelDetails=Ce={}));var He;(function(w){function x(O){return{label:O}}w.create=x})(He||(e.CompletionItem=He={}));var ct;(function(w){function x(O,T){return{items:O||[],isIncomplete:!!T}}w.create=x})(ct||(e.CompletionList=ct={}));var Vt;(function(w){function x(T){return T.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}w.fromPlainText=x;function O(T){var _=T;return B.string(_)||B.objectLiteral(_)&&B.string(_.language)&&B.string(_.value)}w.is=O})(Vt||(e.MarkedString=Vt={}));var vt;(function(w){function x(O){var T=O;return!!T&&B.objectLiteral(T)&&(me.is(T.contents)||Vt.is(T.contents)||B.typedArray(T.contents,Vt.is))&&(O.range===void 0||u.is(O.range))}w.is=x})(vt||(e.Hover=vt={}));var jt;(function(w){function x(O,T){return T?{label:O,documentation:T}:{label:O}}w.create=x})(jt||(e.ParameterInformation=jt={}));var Ot;(function(w){function x(O,T){for(var _=[],Q=2;Q<arguments.length;Q++)_[Q-2]=arguments[Q];var ce={label:O};return B.defined(T)&&(ce.documentation=T),B.defined(_)?ce.parameters=_:ce.parameters=[],ce}w.create=x})(Ot||(e.SignatureInformation=Ot={}));var wt;(function(w){w.Text=1,w.Read=2,w.Write=3})(wt||(e.DocumentHighlightKind=wt={}));var Ir;(function(w){function x(O,T){var _={range:O};return B.number(T)&&(_.kind=T),_}w.create=x})(Ir||(e.DocumentHighlight=Ir={}));var er;(function(w){w.File=1,w.Module=2,w.Namespace=3,w.Package=4,w.Class=5,w.Method=6,w.Property=7,w.Field=8,w.Constructor=9,w.Enum=10,w.Interface=11,w.Function=12,w.Variable=13,w.Constant=14,w.String=15,w.Number=16,w.Boolean=17,w.Array=18,w.Object=19,w.Key=20,w.Null=21,w.EnumMember=22,w.Struct=23,w.Event=24,w.Operator=25,w.TypeParameter=26})(er||(e.SymbolKind=er={}));var rr;(function(w){w.Deprecated=1})(rr||(e.SymbolTag=rr={}));var St;(function(w){function x(O,T,_,Q,ce){var Ae={name:O,kind:T,location:{uri:Q,range:_}};return ce&&(Ae.containerName=ce),Ae}w.create=x})(St||(e.SymbolInformation=St={}));var gt;(function(w){function x(O,T,_,Q){return Q!==void 0?{name:O,kind:T,location:{uri:_,range:Q}}:{name:O,kind:T,location:{uri:_}}}w.create=x})(gt||(e.WorkspaceSymbol=gt={}));var ht;(function(w){function x(T,_,Q,ce,Ae,it){var Je={name:T,detail:_,kind:Q,range:ce,selectionRange:Ae};return it!==void 0&&(Je.children=it),Je}w.create=x;function O(T){var _=T;return _&&B.string(_.name)&&B.number(_.kind)&&u.is(_.range)&&u.is(_.selectionRange)&&(_.detail===void 0||B.string(_.detail))&&(_.deprecated===void 0||B.boolean(_.deprecated))&&(_.children===void 0||Array.isArray(_.children))&&(_.tags===void 0||Array.isArray(_.tags))}w.is=O})(ht||(e.DocumentSymbol=ht={}));var Bt;(function(w){w.Empty="",w.QuickFix="quickfix",w.Refactor="refactor",w.RefactorExtract="refactor.extract",w.RefactorInline="refactor.inline",w.RefactorRewrite="refactor.rewrite",w.Source="source",w.SourceOrganizeImports="source.organizeImports",w.SourceFixAll="source.fixAll"})(Bt||(e.CodeActionKind=Bt={}));var Gt;(function(w){w.Invoked=1,w.Automatic=2})(Gt||(e.CodeActionTriggerKind=Gt={}));var Tr;(function(w){function x(T,_,Q){var ce={diagnostics:T};return _!=null&&(ce.only=_),Q!=null&&(ce.triggerKind=Q),ce}w.create=x;function O(T){var _=T;return B.defined(_)&&B.typedArray(_.diagnostics,A.is)&&(_.only===void 0||B.typedArray(_.only,B.string))&&(_.triggerKind===void 0||_.triggerKind===Gt.Invoked||_.triggerKind===Gt.Automatic)}w.is=O})(Tr||(e.CodeActionContext=Tr={}));var $t;(function(w){function x(T,_,Q){var ce={title:T},Ae=!0;return typeof _=="string"?(Ae=!1,ce.kind=_):N.is(_)?ce.command=_:ce.edit=_,Ae&&Q!==void 0&&(ce.kind=Q),ce}w.create=x;function O(T){var _=T;return _&&B.string(_.title)&&(_.diagnostics===void 0||B.typedArray(_.diagnostics,A.is))&&(_.kind===void 0||B.string(_.kind))&&(_.edit!==void 0||_.command!==void 0)&&(_.command===void 0||N.is(_.command))&&(_.isPreferred===void 0||B.boolean(_.isPreferred))&&(_.edit===void 0||j.is(_.edit))}w.is=O})($t||(e.CodeAction=$t={}));var hr;(function(w){function x(T,_){var Q={range:T};return B.defined(_)&&(Q.data=_),Q}w.create=x;function O(T){var _=T;return B.defined(_)&&u.is(_.range)&&(B.undefined(_.command)||N.is(_.command))}w.is=O})(hr||(e.CodeLens=hr={}));var Ye;(function(w){function x(T,_){return{tabSize:T,insertSpaces:_}}w.create=x;function O(T){var _=T;return B.defined(_)&&B.uinteger(_.tabSize)&&B.boolean(_.insertSpaces)}w.is=O})(Ye||(e.FormattingOptions=Ye={}));var z;(function(w){function x(T,_,Q){return{range:T,target:_,data:Q}}w.create=x;function O(T){var _=T;return B.defined(_)&&u.is(_.range)&&(B.undefined(_.target)||B.string(_.target))}w.is=O})(z||(e.DocumentLink=z={}));var C;(function(w){function x(T,_){return{range:T,parent:_}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&u.is(_.range)&&(_.parent===void 0||w.is(_.parent))}w.is=O})(C||(e.SelectionRange=C={}));var F;(function(w){w.namespace="namespace",w.type="type",w.class="class",w.enum="enum",w.interface="interface",w.struct="struct",w.typeParameter="typeParameter",w.parameter="parameter",w.variable="variable",w.property="property",w.enumMember="enumMember",w.event="event",w.function="function",w.method="method",w.macro="macro",w.keyword="keyword",w.modifier="modifier",w.comment="comment",w.string="string",w.number="number",w.regexp="regexp",w.operator="operator",w.decorator="decorator"})(F||(e.SemanticTokenTypes=F={}));var U;(function(w){w.declaration="declaration",w.definition="definition",w.readonly="readonly",w.static="static",w.deprecated="deprecated",w.abstract="abstract",w.async="async",w.modification="modification",w.documentation="documentation",w.defaultLibrary="defaultLibrary"})(U||(e.SemanticTokenModifiers=U={}));var te;(function(w){function x(O){var T=O;return B.objectLiteral(T)&&(T.resultId===void 0||typeof T.resultId=="string")&&Array.isArray(T.data)&&(T.data.length===0||typeof T.data[0]=="number")}w.is=x})(te||(e.SemanticTokens=te={}));var we;(function(w){function x(T,_){return{range:T,text:_}}w.create=x;function O(T){var _=T;return _!=null&&u.is(_.range)&&B.string(_.text)}w.is=O})(we||(e.InlineValueText=we={}));var ke;(function(w){function x(T,_,Q){return{range:T,variableName:_,caseSensitiveLookup:Q}}w.create=x;function O(T){var _=T;return _!=null&&u.is(_.range)&&B.boolean(_.caseSensitiveLookup)&&(B.string(_.variableName)||_.variableName===void 0)}w.is=O})(ke||(e.InlineValueVariableLookup=ke={}));var ve;(function(w){function x(T,_){return{range:T,expression:_}}w.create=x;function O(T){var _=T;return _!=null&&u.is(_.range)&&(B.string(_.expression)||_.expression===void 0)}w.is=O})(ve||(e.InlineValueEvaluatableExpression=ve={}));var xe;(function(w){function x(T,_){return{frameId:T,stoppedLocation:_}}w.create=x;function O(T){var _=T;return B.defined(_)&&u.is(T.stoppedLocation)}w.is=O})(xe||(e.InlineValueContext=xe={}));var Pe;(function(w){w.Type=1,w.Parameter=2;function x(O){return O===1||O===2}w.is=x})(Pe||(e.InlayHintKind=Pe={}));var Le;(function(w){function x(T){return{value:T}}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&(_.tooltip===void 0||B.string(_.tooltip)||me.is(_.tooltip))&&(_.location===void 0||c.is(_.location))&&(_.command===void 0||N.is(_.command))}w.is=O})(Le||(e.InlayHintLabelPart=Le={}));var Oe;(function(w){function x(T,_,Q){var ce={position:T,label:_};return Q!==void 0&&(ce.kind=Q),ce}w.create=x;function O(T){var _=T;return B.objectLiteral(_)&&a.is(_.position)&&(B.string(_.label)||B.typedArray(_.label,Le.is))&&(_.kind===void 0||Pe.is(_.kind))&&_.textEdits===void 0||B.typedArray(_.textEdits,ee.is)&&(_.tooltip===void 0||B.string(_.tooltip)||me.is(_.tooltip))&&(_.paddingLeft===void 0||B.boolean(_.paddingLeft))&&(_.paddingRight===void 0||B.boolean(_.paddingRight))}w.is=O})(Oe||(e.InlayHint=Oe={}));var st;(function(w){function x(O){return{kind:"snippet",value:O}}w.createSnippet=x})(st||(e.StringValue=st={}));var mt;(function(w){function x(O,T,_,Q){return{insertText:O,filterText:T,range:_,command:Q}}w.create=x})(mt||(e.InlineCompletionItem=mt={}));var Qt;(function(w){function x(O){return{items:O}}w.create=x})(Qt||(e.InlineCompletionList=Qt={}));var on;(function(w){w.Invoked=0,w.Automatic=1})(on||(e.InlineCompletionTriggerKind=on={}));var vn;(function(w){function x(O,T){return{range:O,text:T}}w.create=x})(vn||(e.SelectedCompletionInfo=vn={}));var b;(function(w){function x(O,T){return{triggerKind:O,selectedCompletionInfo:T}}w.create=x})(b||(e.InlineCompletionContext=b={}));var Z;(function(w){function x(O){var T=O;return B.objectLiteral(T)&&n.is(T.uri)&&B.string(T.name)}w.is=x})(Z||(e.WorkspaceFolder=Z={})),e.EOL=[`
`,`\r
`,"\r"];var Re;(function(w){function x(Q,ce,Ae,it){return new nt(Q,ce,Ae,it)}w.create=x;function O(Q){var ce=Q;return!!(B.defined(ce)&&B.string(ce.uri)&&(B.undefined(ce.languageId)||B.string(ce.languageId))&&B.uinteger(ce.lineCount)&&B.func(ce.getText)&&B.func(ce.positionAt)&&B.func(ce.offsetAt))}w.is=O;function T(Q,ce){for(var Ae=Q.getText(),it=_(ce,function(Vr,p){var M=Vr.range.start.line-p.range.start.line;return M===0?Vr.range.start.character-p.range.start.character:M}),Je=Ae.length,nr=it.length-1;nr>=0;nr--){var zt=it[nr],Ar=Q.offsetAt(zt.range.start),Ge=Q.offsetAt(zt.range.end);if(Ge<=Je)Ae=Ae.substring(0,Ar)+zt.newText+Ae.substring(Ge,Ae.length);else throw new Error("Overlapping edit");Je=Ar}return Ae}w.applyEdits=T;function _(Q,ce){if(Q.length<=1)return Q;var Ae=Q.length/2|0,it=Q.slice(0,Ae),Je=Q.slice(Ae);_(it,ce),_(Je,ce);for(var nr=0,zt=0,Ar=0;nr<it.length&&zt<Je.length;){var Ge=ce(it[nr],Je[zt]);Ge<=0?Q[Ar++]=it[nr++]:Q[Ar++]=Je[zt++]}for(;nr<it.length;)Q[Ar++]=it[nr++];for(;zt<Je.length;)Q[Ar++]=Je[zt++];return Q}})(Re||(e.TextDocument=Re={}));var nt=function(){function w(x,O,T,_){this._uri=x,this._languageId=O,this._version=T,this._content=_,this._lineOffsets=void 0}return Object.defineProperty(w.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),w.prototype.getText=function(x){if(x){var O=this.offsetAt(x.start),T=this.offsetAt(x.end);return this._content.substring(O,T)}return this._content},w.prototype.update=function(x,O){this._content=x.text,this._version=O,this._lineOffsets=void 0},w.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var x=[],O=this._content,T=!0,_=0;_<O.length;_++){T&&(x.push(_),T=!1);var Q=O.charAt(_);T=Q==="\r"||Q===`
`,Q==="\r"&&_+1<O.length&&O.charAt(_+1)===`
`&&_++}T&&O.length>0&&x.push(O.length),this._lineOffsets=x}return this._lineOffsets},w.prototype.positionAt=function(x){x=Math.max(Math.min(x,this._content.length),0);var O=this.getLineOffsets(),T=0,_=O.length;if(_===0)return a.create(0,x);for(;T<_;){var Q=Math.floor((T+_)/2);O[Q]>x?_=Q:T=Q+1}var ce=T-1;return a.create(ce,x-O[ce])},w.prototype.offsetAt=function(x){var O=this.getLineOffsets();if(x.line>=O.length)return this._content.length;if(x.line<0)return 0;var T=O[x.line],_=x.line+1<O.length?O[x.line+1]:this._content.length;return Math.max(Math.min(T+x.character,_),T)},Object.defineProperty(w.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),w}(),B;(function(w){var x=Object.prototype.toString;function O(Ge){return typeof Ge<"u"}w.defined=O;function T(Ge){return typeof Ge>"u"}w.undefined=T;function _(Ge){return Ge===!0||Ge===!1}w.boolean=_;function Q(Ge){return x.call(Ge)==="[object String]"}w.string=Q;function ce(Ge){return x.call(Ge)==="[object Number]"}w.number=ce;function Ae(Ge,Vr,p){return x.call(Ge)==="[object Number]"&&Vr<=Ge&&Ge<=p}w.numberRange=Ae;function it(Ge){return x.call(Ge)==="[object Number]"&&-2147483648<=Ge&&Ge<=2147483647}w.integer=it;function Je(Ge){return x.call(Ge)==="[object Number]"&&0<=Ge&&Ge<=2147483647}w.uinteger=Je;function nr(Ge){return x.call(Ge)==="[object Function]"}w.func=nr;function zt(Ge){return Ge!==null&&typeof Ge=="object"}w.objectLiteral=zt;function Ar(Ge,Vr){return Array.isArray(Ge)&&Ge.every(Vr)}w.typedArray=Ar})(B||(B={}))})});var qt=q(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.ProtocolNotificationType=jr.ProtocolNotificationType0=jr.ProtocolRequestType=jr.ProtocolRequestType0=jr.RegistrationType=jr.MessageDirection=void 0;var $o=Gi(),o_;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(o_||(jr.MessageDirection=o_={}));var Xf=class{constructor(e){this.method=e}};jr.RegistrationType=Xf;var Yf=class extends $o.RequestType0{constructor(e){super(e)}};jr.ProtocolRequestType0=Yf;var Jf=class extends $o.RequestType{constructor(e){super(e,$o.ParameterStructures.byName)}};jr.ProtocolRequestType=Jf;var Zf=class extends $o.NotificationType0{constructor(e){super(e)}};jr.ProtocolNotificationType0=Zf;var eh=class extends $o.NotificationType{constructor(e){super(e,$o.ParameterStructures.byName)}};jr.ProtocolNotificationType=eh});var ec=q(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.objectLiteral=Yt.typedArray=Yt.stringArray=Yt.array=Yt.func=Yt.error=Yt.number=Yt.string=Yt.boolean=void 0;function Fx(t){return t===!0||t===!1}Yt.boolean=Fx;function s_(t){return typeof t=="string"||t instanceof String}Yt.string=s_;function Ox(t){return typeof t=="number"||t instanceof Number}Yt.number=Ox;function Ix(t){return t instanceof Error}Yt.error=Ix;function Ax(t){return typeof t=="function"}Yt.func=Ax;function a_(t){return Array.isArray(t)}Yt.array=a_;function Lx(t){return a_(t)&&t.every(e=>s_(e))}Yt.stringArray=Lx;function Nx(t,e){return Array.isArray(t)&&t.every(e)}Yt.typedArray=Nx;function Mx(t){return t!==null&&typeof t=="object"}Yt.objectLiteral=Mx});var l_=q(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.ImplementationRequest=void 0;var u_=qt(),c_;(function(t){t.method="textDocument/implementation",t.messageDirection=u_.MessageDirection.clientToServer,t.type=new u_.ProtocolRequestType(t.method)})(c_||(tc.ImplementationRequest=c_={}))});var h_=q(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.TypeDefinitionRequest=void 0;var d_=qt(),f_;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=d_.MessageDirection.clientToServer,t.type=new d_.ProtocolRequestType(t.method)})(f_||(rc.TypeDefinitionRequest=f_={}))});var m_=q(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.DidChangeWorkspaceFoldersNotification=Wo.WorkspaceFoldersRequest=void 0;var nc=qt(),p_;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=nc.MessageDirection.serverToClient,t.type=new nc.ProtocolRequestType0(t.method)})(p_||(Wo.WorkspaceFoldersRequest=p_={}));var g_;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=nc.MessageDirection.clientToServer,t.type=new nc.ProtocolNotificationType(t.method)})(g_||(Wo.DidChangeWorkspaceFoldersNotification=g_={}))});var __=q(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.ConfigurationRequest=void 0;var y_=qt(),v_;(function(t){t.method="workspace/configuration",t.messageDirection=y_.MessageDirection.serverToClient,t.type=new y_.ProtocolRequestType(t.method)})(v_||(oc.ConfigurationRequest=v_={}))});var S_=q(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.ColorPresentationRequest=Ho.DocumentColorRequest=void 0;var sc=qt(),b_;(function(t){t.method="textDocument/documentColor",t.messageDirection=sc.MessageDirection.clientToServer,t.type=new sc.ProtocolRequestType(t.method)})(b_||(Ho.DocumentColorRequest=b_={}));var w_;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=sc.MessageDirection.clientToServer,t.type=new sc.ProtocolRequestType(t.method)})(w_||(Ho.ColorPresentationRequest=w_={}))});var T_=q(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.FoldingRangeRefreshRequest=Uo.FoldingRangeRequest=void 0;var ac=qt(),C_;(function(t){t.method="textDocument/foldingRange",t.messageDirection=ac.MessageDirection.clientToServer,t.type=new ac.ProtocolRequestType(t.method)})(C_||(Uo.FoldingRangeRequest=C_={}));var R_;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=ac.MessageDirection.serverToClient,t.type=new ac.ProtocolRequestType0(t.method)})(R_||(Uo.FoldingRangeRefreshRequest=R_={}))});var P_=q(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.DeclarationRequest=void 0;var D_=qt(),E_;(function(t){t.method="textDocument/declaration",t.messageDirection=D_.MessageDirection.clientToServer,t.type=new D_.ProtocolRequestType(t.method)})(E_||(uc.DeclarationRequest=E_={}))});var x_=q(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.SelectionRangeRequest=void 0;var k_=qt(),q_;(function(t){t.method="textDocument/selectionRange",t.messageDirection=k_.MessageDirection.clientToServer,t.type=new k_.ProtocolRequestType(t.method)})(q_||(cc.SelectionRangeRequest=q_={}))});var A_=q(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.WorkDoneProgressCancelNotification=_i.WorkDoneProgressCreateRequest=_i.WorkDoneProgress=void 0;var jx=Gi(),lc=qt(),F_;(function(t){t.type=new jx.ProgressType;function e(r){return r===t.type}t.is=e})(F_||(_i.WorkDoneProgress=F_={}));var O_;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=lc.MessageDirection.serverToClient,t.type=new lc.ProtocolRequestType(t.method)})(O_||(_i.WorkDoneProgressCreateRequest=O_={}));var I_;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=lc.MessageDirection.clientToServer,t.type=new lc.ProtocolNotificationType(t.method)})(I_||(_i.WorkDoneProgressCancelNotification=I_={}))});var j_=q(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.CallHierarchyOutgoingCallsRequest=bi.CallHierarchyIncomingCallsRequest=bi.CallHierarchyPrepareRequest=void 0;var Bo=qt(),L_;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=Bo.MessageDirection.clientToServer,t.type=new Bo.ProtocolRequestType(t.method)})(L_||(bi.CallHierarchyPrepareRequest=L_={}));var N_;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=Bo.MessageDirection.clientToServer,t.type=new Bo.ProtocolRequestType(t.method)})(N_||(bi.CallHierarchyIncomingCallsRequest=N_={}));var M_;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=Bo.MessageDirection.clientToServer,t.type=new Bo.ProtocolRequestType(t.method)})(M_||(bi.CallHierarchyOutgoingCallsRequest=M_={}))});var z_=q($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.SemanticTokensRefreshRequest=$r.SemanticTokensRangeRequest=$r.SemanticTokensDeltaRequest=$r.SemanticTokensRequest=$r.SemanticTokensRegistrationType=$r.TokenFormat=void 0;var Vn=qt(),$_;(function(t){t.Relative="relative"})($_||($r.TokenFormat=$_={}));var Ks;(function(t){t.method="textDocument/semanticTokens",t.type=new Vn.RegistrationType(t.method)})(Ks||($r.SemanticTokensRegistrationType=Ks={}));var W_;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=Vn.MessageDirection.clientToServer,t.type=new Vn.ProtocolRequestType(t.method),t.registrationMethod=Ks.method})(W_||($r.SemanticTokensRequest=W_={}));var H_;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=Vn.MessageDirection.clientToServer,t.type=new Vn.ProtocolRequestType(t.method),t.registrationMethod=Ks.method})(H_||($r.SemanticTokensDeltaRequest=H_={}));var U_;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=Vn.MessageDirection.clientToServer,t.type=new Vn.ProtocolRequestType(t.method),t.registrationMethod=Ks.method})(U_||($r.SemanticTokensRangeRequest=U_={}));var B_;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=Vn.MessageDirection.serverToClient,t.type=new Vn.ProtocolRequestType0(t.method)})(B_||($r.SemanticTokensRefreshRequest=B_={}))});var G_=q(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.ShowDocumentRequest=void 0;var K_=qt(),V_;(function(t){t.method="window/showDocument",t.messageDirection=K_.MessageDirection.serverToClient,t.type=new K_.ProtocolRequestType(t.method)})(V_||(dc.ShowDocumentRequest=V_={}))});var Y_=q(fc=>{"use strict";Object.defineProperty(fc,"__esModule",{value:!0});fc.LinkedEditingRangeRequest=void 0;var Q_=qt(),X_;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=Q_.MessageDirection.clientToServer,t.type=new Q_.ProtocolRequestType(t.method)})(X_||(fc.LinkedEditingRangeRequest=X_={}))});var ob=q(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.WillDeleteFilesRequest=vr.DidDeleteFilesNotification=vr.DidRenameFilesNotification=vr.WillRenameFilesRequest=vr.DidCreateFilesNotification=vr.WillCreateFilesRequest=vr.FileOperationPatternKind=void 0;var cn=qt(),J_;(function(t){t.file="file",t.folder="folder"})(J_||(vr.FileOperationPatternKind=J_={}));var Z_;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolRequestType(t.method)})(Z_||(vr.WillCreateFilesRequest=Z_={}));var eb;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolNotificationType(t.method)})(eb||(vr.DidCreateFilesNotification=eb={}));var tb;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolRequestType(t.method)})(tb||(vr.WillRenameFilesRequest=tb={}));var rb;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolNotificationType(t.method)})(rb||(vr.DidRenameFilesNotification=rb={}));var nb;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolNotificationType(t.method)})(nb||(vr.DidDeleteFilesNotification=nb={}));var ib;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=cn.MessageDirection.clientToServer,t.type=new cn.ProtocolRequestType(t.method)})(ib||(vr.WillDeleteFilesRequest=ib={}))});var lb=q(wi=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});wi.MonikerRequest=wi.MonikerKind=wi.UniquenessLevel=void 0;var sb=qt(),ab;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(ab||(wi.UniquenessLevel=ab={}));var ub;(function(t){t.$import="import",t.$export="export",t.local="local"})(ub||(wi.MonikerKind=ub={}));var cb;(function(t){t.method="textDocument/moniker",t.messageDirection=sb.MessageDirection.clientToServer,t.type=new sb.ProtocolRequestType(t.method)})(cb||(wi.MonikerRequest=cb={}))});var pb=q(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.TypeHierarchySubtypesRequest=Si.TypeHierarchySupertypesRequest=Si.TypeHierarchyPrepareRequest=void 0;var zo=qt(),db;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=zo.MessageDirection.clientToServer,t.type=new zo.ProtocolRequestType(t.method)})(db||(Si.TypeHierarchyPrepareRequest=db={}));var fb;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=zo.MessageDirection.clientToServer,t.type=new zo.ProtocolRequestType(t.method)})(fb||(Si.TypeHierarchySupertypesRequest=fb={}));var hb;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=zo.MessageDirection.clientToServer,t.type=new zo.ProtocolRequestType(t.method)})(hb||(Si.TypeHierarchySubtypesRequest=hb={}))});var yb=q(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.InlineValueRefreshRequest=Ko.InlineValueRequest=void 0;var hc=qt(),gb;(function(t){t.method="textDocument/inlineValue",t.messageDirection=hc.MessageDirection.clientToServer,t.type=new hc.ProtocolRequestType(t.method)})(gb||(Ko.InlineValueRequest=gb={}));var mb;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=hc.MessageDirection.serverToClient,t.type=new hc.ProtocolRequestType0(t.method)})(mb||(Ko.InlineValueRefreshRequest=mb={}))});var wb=q(Ci=>{"use strict";Object.defineProperty(Ci,"__esModule",{value:!0});Ci.InlayHintRefreshRequest=Ci.InlayHintResolveRequest=Ci.InlayHintRequest=void 0;var Vo=qt(),vb;(function(t){t.method="textDocument/inlayHint",t.messageDirection=Vo.MessageDirection.clientToServer,t.type=new Vo.ProtocolRequestType(t.method)})(vb||(Ci.InlayHintRequest=vb={}));var _b;(function(t){t.method="inlayHint/resolve",t.messageDirection=Vo.MessageDirection.clientToServer,t.type=new Vo.ProtocolRequestType(t.method)})(_b||(Ci.InlayHintResolveRequest=_b={}));var bb;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=Vo.MessageDirection.serverToClient,t.type=new Vo.ProtocolRequestType0(t.method)})(bb||(Ci.InlayHintRefreshRequest=bb={}))});var Pb=q(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DiagnosticRefreshRequest=ln.WorkspaceDiagnosticRequest=ln.DocumentDiagnosticRequest=ln.DocumentDiagnosticReportKind=ln.DiagnosticServerCancellationData=void 0;var Eb=Gi(),$x=ec(),Go=qt(),Sb;(function(t){function e(r){let n=r;return n&&$x.boolean(n.retriggerRequest)}t.is=e})(Sb||(ln.DiagnosticServerCancellationData=Sb={}));var Cb;(function(t){t.Full="full",t.Unchanged="unchanged"})(Cb||(ln.DocumentDiagnosticReportKind=Cb={}));var Rb;(function(t){t.method="textDocument/diagnostic",t.messageDirection=Go.MessageDirection.clientToServer,t.type=new Go.ProtocolRequestType(t.method),t.partialResult=new Eb.ProgressType})(Rb||(ln.DocumentDiagnosticRequest=Rb={}));var Tb;(function(t){t.method="workspace/diagnostic",t.messageDirection=Go.MessageDirection.clientToServer,t.type=new Go.ProtocolRequestType(t.method),t.partialResult=new Eb.ProgressType})(Tb||(ln.WorkspaceDiagnosticRequest=Tb={}));var Db;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=Go.MessageDirection.serverToClient,t.type=new Go.ProtocolRequestType0(t.method)})(Db||(ln.DiagnosticRefreshRequest=Db={}))});var Ab=q(Ht=>{"use strict";Object.defineProperty(Ht,"__esModule",{value:!0});Ht.DidCloseNotebookDocumentNotification=Ht.DidSaveNotebookDocumentNotification=Ht.DidChangeNotebookDocumentNotification=Ht.NotebookCellArrayChange=Ht.DidOpenNotebookDocumentNotification=Ht.NotebookDocumentSyncRegistrationType=Ht.NotebookDocument=Ht.NotebookCell=Ht.ExecutionSummary=Ht.NotebookCellKind=void 0;var Vs=Zu(),Cn=ec(),Fn=qt(),th;(function(t){t.Markup=1,t.Code=2;function e(r){return r===1||r===2}t.is=e})(th||(Ht.NotebookCellKind=th={}));var rh;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}t.create=e;function r(i){let o=i;return Cn.objectLiteral(o)&&Vs.uinteger.is(o.executionOrder)&&(o.success===void 0||Cn.boolean(o.success))}t.is=r;function n(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}t.equals=n})(rh||(Ht.ExecutionSummary=rh={}));var pc;(function(t){function e(o,a){return{kind:o,document:a}}t.create=e;function r(o){let a=o;return Cn.objectLiteral(a)&&th.is(a.kind)&&Vs.DocumentUri.is(a.document)&&(a.metadata===void 0||Cn.objectLiteral(a.metadata))}t.is=r;function n(o,a){let u=new Set;return o.document!==a.document&&u.add("document"),o.kind!==a.kind&&u.add("kind"),o.executionSummary!==a.executionSummary&&u.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&u.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!rh.equals(o.executionSummary,a.executionSummary)&&u.add("executionSummary"),u}t.diff=n;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let u=Array.isArray(o),c=Array.isArray(a);if(u!==c)return!1;if(u&&c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++)if(!i(o[d],a[d]))return!1}if(Cn.objectLiteral(o)&&Cn.objectLiteral(a)){let d=Object.keys(o),f=Object.keys(a);if(d.length!==f.length||(d.sort(),f.sort(),!i(d,f)))return!1;for(let y=0;y<d.length;y++){let g=d[y];if(!i(o[g],a[g]))return!1}}return!0}})(pc||(Ht.NotebookCell=pc={}));var kb;(function(t){function e(n,i,o,a){return{uri:n,notebookType:i,version:o,cells:a}}t.create=e;function r(n){let i=n;return Cn.objectLiteral(i)&&Cn.string(i.uri)&&Vs.integer.is(i.version)&&Cn.typedArray(i.cells,pc.is)}t.is=r})(kb||(Ht.NotebookDocument=kb={}));var Qo;(function(t){t.method="notebookDocument/sync",t.messageDirection=Fn.MessageDirection.clientToServer,t.type=new Fn.RegistrationType(t.method)})(Qo||(Ht.NotebookDocumentSyncRegistrationType=Qo={}));var qb;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=Fn.MessageDirection.clientToServer,t.type=new Fn.ProtocolNotificationType(t.method),t.registrationMethod=Qo.method})(qb||(Ht.DidOpenNotebookDocumentNotification=qb={}));var xb;(function(t){function e(n){let i=n;return Cn.objectLiteral(i)&&Vs.uinteger.is(i.start)&&Vs.uinteger.is(i.deleteCount)&&(i.cells===void 0||Cn.typedArray(i.cells,pc.is))}t.is=e;function r(n,i,o){let a={start:n,deleteCount:i};return o!==void 0&&(a.cells=o),a}t.create=r})(xb||(Ht.NotebookCellArrayChange=xb={}));var Fb;(function(t){t.method="notebookDocument/didChange",t.messageDirection=Fn.MessageDirection.clientToServer,t.type=new Fn.ProtocolNotificationType(t.method),t.registrationMethod=Qo.method})(Fb||(Ht.DidChangeNotebookDocumentNotification=Fb={}));var Ob;(function(t){t.method="notebookDocument/didSave",t.messageDirection=Fn.MessageDirection.clientToServer,t.type=new Fn.ProtocolNotificationType(t.method),t.registrationMethod=Qo.method})(Ob||(Ht.DidSaveNotebookDocumentNotification=Ob={}));var Ib;(function(t){t.method="notebookDocument/didClose",t.messageDirection=Fn.MessageDirection.clientToServer,t.type=new Fn.ProtocolNotificationType(t.method),t.registrationMethod=Qo.method})(Ib||(Ht.DidCloseNotebookDocumentNotification=Ib={}))});var Mb=q(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.InlineCompletionRequest=void 0;var Lb=qt(),Nb;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Lb.MessageDirection.clientToServer,t.type=new Lb.ProtocolRequestType(t.method)})(Nb||(gc.InlineCompletionRequest=Nb={}))});var Yw=q(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.WorkspaceSymbolRequest=k.CodeActionResolveRequest=k.CodeActionRequest=k.DocumentSymbolRequest=k.DocumentHighlightRequest=k.ReferencesRequest=k.DefinitionRequest=k.SignatureHelpRequest=k.SignatureHelpTriggerKind=k.HoverRequest=k.CompletionResolveRequest=k.CompletionRequest=k.CompletionTriggerKind=k.PublishDiagnosticsNotification=k.WatchKind=k.RelativePattern=k.FileChangeType=k.DidChangeWatchedFilesNotification=k.WillSaveTextDocumentWaitUntilRequest=k.WillSaveTextDocumentNotification=k.TextDocumentSaveReason=k.DidSaveTextDocumentNotification=k.DidCloseTextDocumentNotification=k.DidChangeTextDocumentNotification=k.TextDocumentContentChangeEvent=k.DidOpenTextDocumentNotification=k.TextDocumentSyncKind=k.TelemetryEventNotification=k.LogMessageNotification=k.ShowMessageRequest=k.ShowMessageNotification=k.MessageType=k.DidChangeConfigurationNotification=k.ExitNotification=k.ShutdownRequest=k.InitializedNotification=k.InitializeErrorCodes=k.InitializeRequest=k.WorkDoneProgressOptions=k.TextDocumentRegistrationOptions=k.StaticRegistrationOptions=k.PositionEncodingKind=k.FailureHandlingKind=k.ResourceOperationKind=k.UnregistrationRequest=k.RegistrationRequest=k.DocumentSelector=k.NotebookCellTextDocumentFilter=k.NotebookDocumentFilter=k.TextDocumentFilter=void 0;k.MonikerRequest=k.MonikerKind=k.UniquenessLevel=k.WillDeleteFilesRequest=k.DidDeleteFilesNotification=k.WillRenameFilesRequest=k.DidRenameFilesNotification=k.WillCreateFilesRequest=k.DidCreateFilesNotification=k.FileOperationPatternKind=k.LinkedEditingRangeRequest=k.ShowDocumentRequest=k.SemanticTokensRegistrationType=k.SemanticTokensRefreshRequest=k.SemanticTokensRangeRequest=k.SemanticTokensDeltaRequest=k.SemanticTokensRequest=k.TokenFormat=k.CallHierarchyPrepareRequest=k.CallHierarchyOutgoingCallsRequest=k.CallHierarchyIncomingCallsRequest=k.WorkDoneProgressCancelNotification=k.WorkDoneProgressCreateRequest=k.WorkDoneProgress=k.SelectionRangeRequest=k.DeclarationRequest=k.FoldingRangeRefreshRequest=k.FoldingRangeRequest=k.ColorPresentationRequest=k.DocumentColorRequest=k.ConfigurationRequest=k.DidChangeWorkspaceFoldersNotification=k.WorkspaceFoldersRequest=k.TypeDefinitionRequest=k.ImplementationRequest=k.ApplyWorkspaceEditRequest=k.ExecuteCommandRequest=k.PrepareRenameRequest=k.RenameRequest=k.PrepareSupportDefaultBehavior=k.DocumentOnTypeFormattingRequest=k.DocumentRangesFormattingRequest=k.DocumentRangeFormattingRequest=k.DocumentFormattingRequest=k.DocumentLinkResolveRequest=k.DocumentLinkRequest=k.CodeLensRefreshRequest=k.CodeLensResolveRequest=k.CodeLensRequest=k.WorkspaceSymbolResolveRequest=void 0;k.InlineCompletionRequest=k.DidCloseNotebookDocumentNotification=k.DidSaveNotebookDocumentNotification=k.DidChangeNotebookDocumentNotification=k.NotebookCellArrayChange=k.DidOpenNotebookDocumentNotification=k.NotebookDocumentSyncRegistrationType=k.NotebookDocument=k.NotebookCell=k.ExecutionSummary=k.NotebookCellKind=k.DiagnosticRefreshRequest=k.WorkspaceDiagnosticRequest=k.DocumentDiagnosticRequest=k.DocumentDiagnosticReportKind=k.DiagnosticServerCancellationData=k.InlayHintRefreshRequest=k.InlayHintResolveRequest=k.InlayHintRequest=k.InlineValueRefreshRequest=k.InlineValueRequest=k.TypeHierarchySupertypesRequest=k.TypeHierarchySubtypesRequest=k.TypeHierarchyPrepareRequest=void 0;var ge=qt(),jb=Zu(),ir=ec(),Wx=l_();Object.defineProperty(k,"ImplementationRequest",{enumerable:!0,get:function(){return Wx.ImplementationRequest}});var Hx=h_();Object.defineProperty(k,"TypeDefinitionRequest",{enumerable:!0,get:function(){return Hx.TypeDefinitionRequest}});var Vw=m_();Object.defineProperty(k,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return Vw.WorkspaceFoldersRequest}});Object.defineProperty(k,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return Vw.DidChangeWorkspaceFoldersNotification}});var Ux=__();Object.defineProperty(k,"ConfigurationRequest",{enumerable:!0,get:function(){return Ux.ConfigurationRequest}});var Gw=S_();Object.defineProperty(k,"DocumentColorRequest",{enumerable:!0,get:function(){return Gw.DocumentColorRequest}});Object.defineProperty(k,"ColorPresentationRequest",{enumerable:!0,get:function(){return Gw.ColorPresentationRequest}});var Qw=T_();Object.defineProperty(k,"FoldingRangeRequest",{enumerable:!0,get:function(){return Qw.FoldingRangeRequest}});Object.defineProperty(k,"FoldingRangeRefreshRequest",{enumerable:!0,get:function(){return Qw.FoldingRangeRefreshRequest}});var Bx=P_();Object.defineProperty(k,"DeclarationRequest",{enumerable:!0,get:function(){return Bx.DeclarationRequest}});var zx=x_();Object.defineProperty(k,"SelectionRangeRequest",{enumerable:!0,get:function(){return zx.SelectionRangeRequest}});var ah=A_();Object.defineProperty(k,"WorkDoneProgress",{enumerable:!0,get:function(){return ah.WorkDoneProgress}});Object.defineProperty(k,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return ah.WorkDoneProgressCreateRequest}});Object.defineProperty(k,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return ah.WorkDoneProgressCancelNotification}});var uh=j_();Object.defineProperty(k,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return uh.CallHierarchyIncomingCallsRequest}});Object.defineProperty(k,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return uh.CallHierarchyOutgoingCallsRequest}});Object.defineProperty(k,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return uh.CallHierarchyPrepareRequest}});var Xo=z_();Object.defineProperty(k,"TokenFormat",{enumerable:!0,get:function(){return Xo.TokenFormat}});Object.defineProperty(k,"SemanticTokensRequest",{enumerable:!0,get:function(){return Xo.SemanticTokensRequest}});Object.defineProperty(k,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return Xo.SemanticTokensDeltaRequest}});Object.defineProperty(k,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return Xo.SemanticTokensRangeRequest}});Object.defineProperty(k,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return Xo.SemanticTokensRefreshRequest}});Object.defineProperty(k,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return Xo.SemanticTokensRegistrationType}});var Kx=G_();Object.defineProperty(k,"ShowDocumentRequest",{enumerable:!0,get:function(){return Kx.ShowDocumentRequest}});var Vx=Y_();Object.defineProperty(k,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return Vx.LinkedEditingRangeRequest}});var Qi=ob();Object.defineProperty(k,"FileOperationPatternKind",{enumerable:!0,get:function(){return Qi.FileOperationPatternKind}});Object.defineProperty(k,"DidCreateFilesNotification",{enumerable:!0,get:function(){return Qi.DidCreateFilesNotification}});Object.defineProperty(k,"WillCreateFilesRequest",{enumerable:!0,get:function(){return Qi.WillCreateFilesRequest}});Object.defineProperty(k,"DidRenameFilesNotification",{enumerable:!0,get:function(){return Qi.DidRenameFilesNotification}});Object.defineProperty(k,"WillRenameFilesRequest",{enumerable:!0,get:function(){return Qi.WillRenameFilesRequest}});Object.defineProperty(k,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return Qi.DidDeleteFilesNotification}});Object.defineProperty(k,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return Qi.WillDeleteFilesRequest}});var ch=lb();Object.defineProperty(k,"UniquenessLevel",{enumerable:!0,get:function(){return ch.UniquenessLevel}});Object.defineProperty(k,"MonikerKind",{enumerable:!0,get:function(){return ch.MonikerKind}});Object.defineProperty(k,"MonikerRequest",{enumerable:!0,get:function(){return ch.MonikerRequest}});var lh=pb();Object.defineProperty(k,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return lh.TypeHierarchyPrepareRequest}});Object.defineProperty(k,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return lh.TypeHierarchySubtypesRequest}});Object.defineProperty(k,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return lh.TypeHierarchySupertypesRequest}});var Xw=yb();Object.defineProperty(k,"InlineValueRequest",{enumerable:!0,get:function(){return Xw.InlineValueRequest}});Object.defineProperty(k,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return Xw.InlineValueRefreshRequest}});var dh=wb();Object.defineProperty(k,"InlayHintRequest",{enumerable:!0,get:function(){return dh.InlayHintRequest}});Object.defineProperty(k,"InlayHintResolveRequest",{enumerable:!0,get:function(){return dh.InlayHintResolveRequest}});Object.defineProperty(k,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return dh.InlayHintRefreshRequest}});var Gs=Pb();Object.defineProperty(k,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return Gs.DiagnosticServerCancellationData}});Object.defineProperty(k,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return Gs.DocumentDiagnosticReportKind}});Object.defineProperty(k,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return Gs.DocumentDiagnosticRequest}});Object.defineProperty(k,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return Gs.WorkspaceDiagnosticRequest}});Object.defineProperty(k,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return Gs.DiagnosticRefreshRequest}});var On=Ab();Object.defineProperty(k,"NotebookCellKind",{enumerable:!0,get:function(){return On.NotebookCellKind}});Object.defineProperty(k,"ExecutionSummary",{enumerable:!0,get:function(){return On.ExecutionSummary}});Object.defineProperty(k,"NotebookCell",{enumerable:!0,get:function(){return On.NotebookCell}});Object.defineProperty(k,"NotebookDocument",{enumerable:!0,get:function(){return On.NotebookDocument}});Object.defineProperty(k,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return On.NotebookDocumentSyncRegistrationType}});Object.defineProperty(k,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return On.DidOpenNotebookDocumentNotification}});Object.defineProperty(k,"NotebookCellArrayChange",{enumerable:!0,get:function(){return On.NotebookCellArrayChange}});Object.defineProperty(k,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return On.DidChangeNotebookDocumentNotification}});Object.defineProperty(k,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return On.DidSaveNotebookDocumentNotification}});Object.defineProperty(k,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return On.DidCloseNotebookDocumentNotification}});var Gx=Mb();Object.defineProperty(k,"InlineCompletionRequest",{enumerable:!0,get:function(){return Gx.InlineCompletionRequest}});var nh;(function(t){function e(r){let n=r;return ir.string(n)||ir.string(n.language)||ir.string(n.scheme)||ir.string(n.pattern)}t.is=e})(nh||(k.TextDocumentFilter=nh={}));var ih;(function(t){function e(r){let n=r;return ir.objectLiteral(n)&&(ir.string(n.notebookType)||ir.string(n.scheme)||ir.string(n.pattern))}t.is=e})(ih||(k.NotebookDocumentFilter=ih={}));var oh;(function(t){function e(r){let n=r;return ir.objectLiteral(n)&&(ir.string(n.notebook)||ih.is(n.notebook))&&(n.language===void 0||ir.string(n.language))}t.is=e})(oh||(k.NotebookCellTextDocumentFilter=oh={}));var sh;(function(t){function e(r){if(!Array.isArray(r))return!1;for(let n of r)if(!ir.string(n)&&!nh.is(n)&&!oh.is(n))return!1;return!0}t.is=e})(sh||(k.DocumentSelector=sh={}));var $b;(function(t){t.method="client/registerCapability",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolRequestType(t.method)})($b||(k.RegistrationRequest=$b={}));var Wb;(function(t){t.method="client/unregisterCapability",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolRequestType(t.method)})(Wb||(k.UnregistrationRequest=Wb={}));var Hb;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Hb||(k.ResourceOperationKind=Hb={}));var Ub;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Ub||(k.FailureHandlingKind=Ub={}));var Bb;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Bb||(k.PositionEncodingKind=Bb={}));var zb;(function(t){function e(r){let n=r;return n&&ir.string(n.id)&&n.id.length>0}t.hasId=e})(zb||(k.StaticRegistrationOptions=zb={}));var Kb;(function(t){function e(r){let n=r;return n&&(n.documentSelector===null||sh.is(n.documentSelector))}t.is=e})(Kb||(k.TextDocumentRegistrationOptions=Kb={}));var Vb;(function(t){function e(n){let i=n;return ir.objectLiteral(i)&&(i.workDoneProgress===void 0||ir.boolean(i.workDoneProgress))}t.is=e;function r(n){let i=n;return i&&ir.boolean(i.workDoneProgress)}t.hasWorkDoneProgress=r})(Vb||(k.WorkDoneProgressOptions=Vb={}));var Gb;(function(t){t.method="initialize",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Gb||(k.InitializeRequest=Gb={}));var Qb;(function(t){t.unknownProtocolVersion=1})(Qb||(k.InitializeErrorCodes=Qb={}));var Xb;(function(t){t.method="initialized",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(Xb||(k.InitializedNotification=Xb={}));var Yb;(function(t){t.method="shutdown",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType0(t.method)})(Yb||(k.ShutdownRequest=Yb={}));var Jb;(function(t){t.method="exit",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType0(t.method)})(Jb||(k.ExitNotification=Jb={}));var Zb;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(Zb||(k.DidChangeConfigurationNotification=Zb={}));var ew;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(ew||(k.MessageType=ew={}));var tw;(function(t){t.method="window/showMessage",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolNotificationType(t.method)})(tw||(k.ShowMessageNotification=tw={}));var rw;(function(t){t.method="window/showMessageRequest",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolRequestType(t.method)})(rw||(k.ShowMessageRequest=rw={}));var nw;(function(t){t.method="window/logMessage",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolNotificationType(t.method)})(nw||(k.LogMessageNotification=nw={}));var iw;(function(t){t.method="telemetry/event",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolNotificationType(t.method)})(iw||(k.TelemetryEventNotification=iw={}));var ow;(function(t){t.None=0,t.Full=1,t.Incremental=2})(ow||(k.TextDocumentSyncKind=ow={}));var sw;(function(t){t.method="textDocument/didOpen",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(sw||(k.DidOpenTextDocumentNotification=sw={}));var aw;(function(t){function e(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}t.isIncremental=e;function r(n){let i=n;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}t.isFull=r})(aw||(k.TextDocumentContentChangeEvent=aw={}));var uw;(function(t){t.method="textDocument/didChange",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(uw||(k.DidChangeTextDocumentNotification=uw={}));var cw;(function(t){t.method="textDocument/didClose",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(cw||(k.DidCloseTextDocumentNotification=cw={}));var lw;(function(t){t.method="textDocument/didSave",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(lw||(k.DidSaveTextDocumentNotification=lw={}));var dw;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(dw||(k.TextDocumentSaveReason=dw={}));var fw;(function(t){t.method="textDocument/willSave",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(fw||(k.WillSaveTextDocumentNotification=fw={}));var hw;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(hw||(k.WillSaveTextDocumentWaitUntilRequest=hw={}));var pw;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolNotificationType(t.method)})(pw||(k.DidChangeWatchedFilesNotification=pw={}));var gw;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(gw||(k.FileChangeType=gw={}));var mw;(function(t){function e(r){let n=r;return ir.objectLiteral(n)&&(jb.URI.is(n.baseUri)||jb.WorkspaceFolder.is(n.baseUri))&&ir.string(n.pattern)}t.is=e})(mw||(k.RelativePattern=mw={}));var yw;(function(t){t.Create=1,t.Change=2,t.Delete=4})(yw||(k.WatchKind=yw={}));var vw;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolNotificationType(t.method)})(vw||(k.PublishDiagnosticsNotification=vw={}));var _w;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(_w||(k.CompletionTriggerKind=_w={}));var bw;(function(t){t.method="textDocument/completion",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(bw||(k.CompletionRequest=bw={}));var ww;(function(t){t.method="completionItem/resolve",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(ww||(k.CompletionResolveRequest=ww={}));var Sw;(function(t){t.method="textDocument/hover",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Sw||(k.HoverRequest=Sw={}));var Cw;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(Cw||(k.SignatureHelpTriggerKind=Cw={}));var Rw;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Rw||(k.SignatureHelpRequest=Rw={}));var Tw;(function(t){t.method="textDocument/definition",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Tw||(k.DefinitionRequest=Tw={}));var Dw;(function(t){t.method="textDocument/references",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Dw||(k.ReferencesRequest=Dw={}));var Ew;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Ew||(k.DocumentHighlightRequest=Ew={}));var Pw;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Pw||(k.DocumentSymbolRequest=Pw={}));var kw;(function(t){t.method="textDocument/codeAction",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(kw||(k.CodeActionRequest=kw={}));var qw;(function(t){t.method="codeAction/resolve",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(qw||(k.CodeActionResolveRequest=qw={}));var xw;(function(t){t.method="workspace/symbol",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(xw||(k.WorkspaceSymbolRequest=xw={}));var Fw;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Fw||(k.WorkspaceSymbolResolveRequest=Fw={}));var Ow;(function(t){t.method="textDocument/codeLens",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Ow||(k.CodeLensRequest=Ow={}));var Iw;(function(t){t.method="codeLens/resolve",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Iw||(k.CodeLensResolveRequest=Iw={}));var Aw;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolRequestType0(t.method)})(Aw||(k.CodeLensRefreshRequest=Aw={}));var Lw;(function(t){t.method="textDocument/documentLink",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Lw||(k.DocumentLinkRequest=Lw={}));var Nw;(function(t){t.method="documentLink/resolve",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Nw||(k.DocumentLinkResolveRequest=Nw={}));var Mw;(function(t){t.method="textDocument/formatting",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Mw||(k.DocumentFormattingRequest=Mw={}));var jw;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(jw||(k.DocumentRangeFormattingRequest=jw={}));var $w;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})($w||(k.DocumentRangesFormattingRequest=$w={}));var Ww;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Ww||(k.DocumentOnTypeFormattingRequest=Ww={}));var Hw;(function(t){t.Identifier=1})(Hw||(k.PrepareSupportDefaultBehavior=Hw={}));var Uw;(function(t){t.method="textDocument/rename",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Uw||(k.RenameRequest=Uw={}));var Bw;(function(t){t.method="textDocument/prepareRename",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(Bw||(k.PrepareRenameRequest=Bw={}));var zw;(function(t){t.method="workspace/executeCommand",t.messageDirection=ge.MessageDirection.clientToServer,t.type=new ge.ProtocolRequestType(t.method)})(zw||(k.ExecuteCommandRequest=zw={}));var Kw;(function(t){t.method="workspace/applyEdit",t.messageDirection=ge.MessageDirection.serverToClient,t.type=new ge.ProtocolRequestType("workspace/applyEdit")})(Kw||(k.ApplyWorkspaceEditRequest=Kw={}))});var Zw=q(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.createProtocolConnection=void 0;var Jw=Gi();function Qx(t,e,r,n){return Jw.ConnectionStrategy.is(n)&&(n={connectionStrategy:n}),(0,Jw.createMessageConnection)(t,e,r,n)}mc.createProtocolConnection=Qx});var tS=q(Wr=>{"use strict";var Xx=Wr&&Wr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),yc=Wr&&Wr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xx(e,t,r)};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.LSPErrorCodes=Wr.createProtocolConnection=void 0;yc(Gi(),Wr);yc(Zu(),Wr);yc(qt(),Wr);yc(Yw(),Wr);var Yx=Zw();Object.defineProperty(Wr,"createProtocolConnection",{enumerable:!0,get:function(){return Yx.createProtocolConnection}});var eS;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(eS||(Wr.LSPErrorCodes=eS={}))});var We=q(In=>{"use strict";var Jx=In&&In.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rS=In&&In.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Jx(e,t,r)};Object.defineProperty(In,"__esModule",{value:!0});In.createProtocolConnection=void 0;var Zx=Qf();rS(Qf(),In);rS(tS(),In);function eF(t,e,r,n){return(0,Zx.createMessageConnection)(t,e,r,n)}In.createProtocolConnection=eF});var vc=q(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.forEach=_r.mapAsync=_r.map=_r.clearTestMode=_r.setTestMode=_r.Semaphore=_r.Delayer=void 0;var Xs=We(),fh=class{constructor(e){this.defaultDelay=e,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(e,r=this.defaultDelay){return this.task=e,r>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(n=>{this.onSuccess=n}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var n=this.task();return this.task=void 0,n})),(r>=0||this.timeout===void 0)&&(this.timeout=(0,Xs.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},r>=0?r:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let e=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,e}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}};_r.Delayer=fh;var hh=class{constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((r,n)=>{this._waiting.push({thunk:e,resolve:r,reject:n}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,Xs.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let r=e.thunk();r instanceof Promise?r.then(n=>{this._active--,e.resolve(n),this.runNext()},n=>{this._active--,e.reject(n),this.runNext()}):(this._active--,e.resolve(r),this.runNext())}catch(r){this._active--,e.reject(r),this.runNext()}}};_r.Semaphore=hh;var ph=!1;function tF(){ph=!0}_r.setTestMode=tF;function rF(){ph=!1}_r.clearTestMode=rF;var nS=15,Qs=class{constructor(e=nS){this.yieldAfter=ph===!0?Math.max(e,2):Math.max(e,nS),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){let e=Date.now()-this.startTime,r=Math.max(0,this.yieldAfter-e);if(this.total+=this.counter,this.counter=0,e>=this.yieldAfter||r<=1)return this.counterInterval=1,this.total=0,!0;switch(e){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}};async function nF(t,e,r,n){if(t.length===0)return[];let i=new Array(t.length),o=new Qs(n?.yieldAfter);function a(c){o.start();for(let d=c;d<t.length;d++)if(i[d]=e(t[d]),o.shouldYield())return n?.yieldCallback&&n.yieldCallback(),d+1;return-1}let u=a(0);for(;u!==-1&&!(r!==void 0&&r.isCancellationRequested);)u=await new Promise(c=>{(0,Xs.RAL)().timer.setImmediate(()=>{c(a(u))})});return i}_r.map=nF;async function iF(t,e,r,n){if(t.length===0)return[];let i=new Array(t.length),o=new Qs(n?.yieldAfter);async function a(c){o.start();for(let d=c;d<t.length;d++)if(i[d]=await e(t[d],r),o.shouldYield())return n?.yieldCallback&&n.yieldCallback(),d+1;return-1}let u=await a(0);for(;u!==-1&&!(r!==void 0&&r.isCancellationRequested);)u=await new Promise(c=>{(0,Xs.RAL)().timer.setImmediate(()=>{c(a(u))})});return i}_r.mapAsync=iF;async function oF(t,e,r,n){if(t.length===0)return;let i=new Qs(n?.yieldAfter);function o(u){i.start();for(let c=u;c<t.length;c++)if(e(t[c]),i.shouldYield())return n?.yieldCallback&&n.yieldCallback(),c+1;return-1}let a=o(0);for(;a!==-1&&!(r!==void 0&&r.isCancellationRequested);)a=await new Promise(u=>{(0,Xs.RAL)().timer.setImmediate(()=>{u(o(a))})})}_r.forEach=oF});var yh=q(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});var sF=require("vscode"),gh=class extends sF.CompletionItem{constructor(e){super(e)}};mh.default=gh});var bh=q(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});var aF=require("vscode"),vh=class extends aF.CodeLens{constructor(e){super(e)}};_h.default=vh});var Ch=q(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});var uF=require("vscode"),wh=class extends uF.DocumentLink{constructor(e,r){super(e,r)}};Sh.default=wh});var Dh=q(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});var cF=require("vscode"),Rh=class extends cF.CodeAction{constructor(e,r){super(e),this.data=r}};Th.default=Rh});var kh=q(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.ProtocolDiagnostic=Yo.DiagnosticCode=void 0;var lF=require("vscode"),Eh=un(),iS;(function(t){function e(r){let n=r;return n!=null&&(Eh.number(n.value)||Eh.string(n.value))&&Eh.string(n.target)}t.is=e})(iS||(Yo.DiagnosticCode=iS={}));var Ph=class extends lF.Diagnostic{constructor(e,r,n,i){super(e,r,n),this.data=i,this.hasDiagnosticCode=!1}};Yo.ProtocolDiagnostic=Ph});var Fh=q(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});var dF=require("vscode"),qh=class extends dF.CallHierarchyItem{constructor(e,r,n,i,o,a,u){super(e,r,n,i,o,a),u!==void 0&&(this.data=u)}};xh.default=qh});var Ah=q(Ih=>{"use strict";Object.defineProperty(Ih,"__esModule",{value:!0});var fF=require("vscode"),Oh=class extends fF.TypeHierarchyItem{constructor(e,r,n,i,o,a,u){super(e,r,n,i,o,a),u!==void 0&&(this.data=u)}};Ih.default=Oh});var Mh=q(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});var _c=require("vscode"),Lh=class extends _c.SymbolInformation{constructor(e,r,n,i,o){let a=!(i instanceof _c.Uri);super(e,r,n,a?i:new _c.Location(i,new _c.Range(0,0,0,0))),this.hasRange=a,o!==void 0&&(this.data=o)}};Nh.default=Lh});var Wh=q($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});var hF=require("vscode"),jh=class extends hF.InlayHint{constructor(e,r,n){super(e,r,n)}};$h.default=jh});var uS=q(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.createConverter=void 0;var Jt=require("vscode"),Ue=We(),Xi=un(),oS=vc(),pF=yh(),gF=bh(),mF=Ch(),sS=Dh(),aS=kh(),yF=Fh(),vF=Ah(),_F=Mh(),bF=Wh(),Hh;(function(t){function e(r){let n=r;return n&&!!n.inserting&&!!n.replacing}t.is=e})(Hh||(Hh={}));function wF(t){let r=t||(b=>b.toString());function n(b){return r(b)}function i(b){return{uri:r(b.uri)}}function o(b){return{uri:r(b.uri),languageId:b.languageId,version:b.version,text:b.getText()}}function a(b){return{uri:r(b.uri),version:b.version}}function u(b){return{textDocument:o(b)}}function c(b){let Z=b;return!!Z.document&&!!Z.contentChanges}function d(b){let Z=b;return!!Z.uri&&!!Z.version}function f(b,Z,Re){if(d(b))return{textDocument:{uri:r(b.uri),version:b.version},contentChanges:[{text:b.getText()}]};if(c(b)){let nt=Z,B=Re;return{textDocument:{uri:r(nt),version:B},contentChanges:b.contentChanges.map(x=>{let O=x.range;return{range:{start:{line:O.start.line,character:O.start.character},end:{line:O.end.line,character:O.end.character}},rangeLength:x.rangeLength,text:x.text}})}}else throw Error("Unsupported text document change parameter")}function y(b){return{textDocument:i(b)}}function g(b,Z=!1){let Re={textDocument:i(b)};return Z&&(Re.text=b.getText()),Re}function m(b){switch(b){case Jt.TextDocumentSaveReason.Manual:return Ue.TextDocumentSaveReason.Manual;case Jt.TextDocumentSaveReason.AfterDelay:return Ue.TextDocumentSaveReason.AfterDelay;case Jt.TextDocumentSaveReason.FocusOut:return Ue.TextDocumentSaveReason.FocusOut}return Ue.TextDocumentSaveReason.Manual}function h(b){return{textDocument:i(b.document),reason:m(b.reason)}}function S(b){return{files:b.files.map(Z=>({uri:r(Z)}))}}function R(b){return{files:b.files.map(Z=>({oldUri:r(Z.oldUri),newUri:r(Z.newUri)}))}}function D(b){return{files:b.files.map(Z=>({uri:r(Z)}))}}function I(b){return{files:b.files.map(Z=>({uri:r(Z)}))}}function A(b){return{files:b.files.map(Z=>({oldUri:r(Z.oldUri),newUri:r(Z.newUri)}))}}function N(b){return{files:b.files.map(Z=>({uri:r(Z)}))}}function ee(b,Z){return{textDocument:i(b),position:$(Z)}}function fe(b){switch(b){case Jt.CompletionTriggerKind.TriggerCharacter:return Ue.CompletionTriggerKind.TriggerCharacter;case Jt.CompletionTriggerKind.TriggerForIncompleteCompletions:return Ue.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return Ue.CompletionTriggerKind.Invoked}}function re(b,Z,Re){return{textDocument:i(b),position:$(Z),context:{triggerKind:fe(Re.triggerKind),triggerCharacter:Re.triggerCharacter}}}function de(b){switch(b){case Jt.SignatureHelpTriggerKind.Invoke:return Ue.SignatureHelpTriggerKind.Invoked;case Jt.SignatureHelpTriggerKind.TriggerCharacter:return Ue.SignatureHelpTriggerKind.TriggerCharacter;case Jt.SignatureHelpTriggerKind.ContentChange:return Ue.SignatureHelpTriggerKind.ContentChange}}function se(b){return{label:b.label}}function _e(b){return b.map(se)}function G(b){return{label:b.label,parameters:_e(b.parameters)}}function K(b){return b.map(G)}function j(b){return b===void 0?b:{signatures:K(b.signatures),activeSignature:b.activeSignature,activeParameter:b.activeParameter}}function X(b,Z,Re){return{textDocument:i(b),position:$(Z),context:{isRetrigger:Re.isRetrigger,triggerCharacter:Re.triggerCharacter,triggerKind:de(Re.triggerKind),activeSignatureHelp:j(Re.activeSignatureHelp)}}}function $(b){return{line:b.line,character:b.character}}function H(b){return b==null?b:{line:b.line>Ue.uinteger.MAX_VALUE?Ue.uinteger.MAX_VALUE:b.line,character:b.character>Ue.uinteger.MAX_VALUE?Ue.uinteger.MAX_VALUE:b.character}}function V(b,Z){return oS.map(b,H,Z)}function ne(b){return b.map(H)}function P(b){return b==null?b:{start:H(b.start),end:H(b.end)}}function ue(b){return b.map(P)}function ye(b){return b==null?b:Ue.Location.create(n(b.uri),P(b.range))}function me(b){switch(b){case Jt.DiagnosticSeverity.Error:return Ue.DiagnosticSeverity.Error;case Jt.DiagnosticSeverity.Warning:return Ue.DiagnosticSeverity.Warning;case Jt.DiagnosticSeverity.Information:return Ue.DiagnosticSeverity.Information;case Jt.DiagnosticSeverity.Hint:return Ue.DiagnosticSeverity.Hint}}function L(b){if(!b)return;let Z=[];for(let Re of b){let nt=Y(Re);nt!==void 0&&Z.push(nt)}return Z.length>0?Z:void 0}function Y(b){switch(b){case Jt.DiagnosticTag.Unnecessary:return Ue.DiagnosticTag.Unnecessary;case Jt.DiagnosticTag.Deprecated:return Ue.DiagnosticTag.Deprecated;default:return}}function ae(b){return{message:b.message,location:ye(b.location)}}function pe(b){return b.map(ae)}function Te(b){if(b!=null)return Xi.number(b)||Xi.string(b)?b:{value:b.value,target:n(b.target)}}function Ce(b){let Z=Ue.Diagnostic.create(P(b.range),b.message),Re=b instanceof aS.ProtocolDiagnostic?b:void 0;Re!==void 0&&Re.data!==void 0&&(Z.data=Re.data);let nt=Te(b.code);return aS.DiagnosticCode.is(nt)?Re!==void 0&&Re.hasDiagnosticCode?Z.code=nt:(Z.code=nt.value,Z.codeDescription={href:nt.target}):Z.code=nt,Xi.number(b.severity)&&(Z.severity=me(b.severity)),Array.isArray(b.tags)&&(Z.tags=L(b.tags)),b.relatedInformation&&(Z.relatedInformation=pe(b.relatedInformation)),b.source&&(Z.source=b.source),Z}function He(b,Z){return b==null?b:oS.map(b,Ce,Z)}function ct(b){return b==null?b:b.map(Ce)}function Vt(b,Z){switch(b){case"$string":return Z;case Ue.MarkupKind.PlainText:return{kind:b,value:Z};case Ue.MarkupKind.Markdown:return{kind:b,value:Z.value};default:return`Unsupported Markup content received. Kind is: ${b}`}}function vt(b){switch(b){case Jt.CompletionItemTag.Deprecated:return Ue.CompletionItemTag.Deprecated}}function jt(b){if(b===void 0)return b;let Z=[];for(let Re of b){let nt=vt(Re);nt!==void 0&&Z.push(nt)}return Z}function Ot(b,Z){return Z!==void 0?Z:b+1}function wt(b,Z=!1){let Re,nt;Xi.string(b.label)?Re=b.label:(Re=b.label.label,Z&&(b.label.detail!==void 0||b.label.description!==void 0)&&(nt={detail:b.label.detail,description:b.label.description}));let B={label:Re};nt!==void 0&&(B.labelDetails=nt);let w=b instanceof pF.default?b:void 0;b.detail&&(B.detail=b.detail),b.documentation&&(!w||w.documentationFormat==="$string"?B.documentation=b.documentation:B.documentation=Vt(w.documentationFormat,b.documentation)),b.filterText&&(B.filterText=b.filterText),Ir(B,b),Xi.number(b.kind)&&(B.kind=Ot(b.kind,w&&w.originalItemKind)),b.sortText&&(B.sortText=b.sortText),b.additionalTextEdits&&(B.additionalTextEdits=St(b.additionalTextEdits)),b.commitCharacters&&(B.commitCharacters=b.commitCharacters.slice()),b.command&&(B.command=te(b.command)),(b.preselect===!0||b.preselect===!1)&&(B.preselect=b.preselect);let x=jt(b.tags);if(w){if(w.data!==void 0&&(B.data=w.data),w.deprecated===!0||w.deprecated===!1){if(w.deprecated===!0&&x!==void 0&&x.length>0){let O=x.indexOf(Jt.CompletionItemTag.Deprecated);O!==-1&&x.splice(O,1)}B.deprecated=w.deprecated}w.insertTextMode!==void 0&&(B.insertTextMode=w.insertTextMode)}return x!==void 0&&x.length>0&&(B.tags=x),B.insertTextMode===void 0&&b.keepWhitespace===!0&&(B.insertTextMode=Ue.InsertTextMode.adjustIndentation),B}function Ir(b,Z){let Re=Ue.InsertTextFormat.PlainText,nt,B;Z.textEdit?(nt=Z.textEdit.newText,B=Z.textEdit.range):Z.insertText instanceof Jt.SnippetString?(Re=Ue.InsertTextFormat.Snippet,nt=Z.insertText.value):nt=Z.insertText,Z.range&&(B=Z.range),b.insertTextFormat=Re,Z.fromEdit&&nt!==void 0&&B!==void 0?b.textEdit=er(nt,B):b.insertText=nt}function er(b,Z){return Hh.is(Z)?Ue.InsertReplaceEdit.create(b,P(Z.inserting),P(Z.replacing)):{newText:b,range:P(Z)}}function rr(b){return{range:P(b.range),newText:b.newText}}function St(b){return b==null?b:b.map(rr)}function gt(b){return b<=Jt.SymbolKind.TypeParameter?b+1:Ue.SymbolKind.Property}function ht(b){return b}function Bt(b){return b.map(ht)}function Gt(b,Z,Re){return{textDocument:i(b),position:$(Z),context:{includeDeclaration:Re.includeDeclaration}}}async function Tr(b,Z){let Re=Ue.CodeAction.create(b.title);if(b instanceof sS.default&&b.data!==void 0&&(Re.data=b.data),b.kind!==void 0&&(Re.kind=C(b.kind)),b.diagnostics!==void 0&&(Re.diagnostics=await He(b.diagnostics,Z)),b.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return b.command!==void 0&&(Re.command=te(b.command)),b.isPreferred!==void 0&&(Re.isPreferred=b.isPreferred),b.disabled!==void 0&&(Re.disabled={reason:b.disabled.reason}),Re}function $t(b){let Z=Ue.CodeAction.create(b.title);if(b instanceof sS.default&&b.data!==void 0&&(Z.data=b.data),b.kind!==void 0&&(Z.kind=C(b.kind)),b.diagnostics!==void 0&&(Z.diagnostics=ct(b.diagnostics)),b.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return b.command!==void 0&&(Z.command=te(b.command)),b.isPreferred!==void 0&&(Z.isPreferred=b.isPreferred),b.disabled!==void 0&&(Z.disabled={reason:b.disabled.reason}),Z}async function hr(b,Z){if(b==null)return b;let Re;return b.only&&Xi.string(b.only.value)&&(Re=[b.only.value]),Ue.CodeActionContext.create(await He(b.diagnostics,Z),Re,z(b.triggerKind))}function Ye(b){if(b==null)return b;let Z;return b.only&&Xi.string(b.only.value)&&(Z=[b.only.value]),Ue.CodeActionContext.create(ct(b.diagnostics),Z,z(b.triggerKind))}function z(b){switch(b){case Jt.CodeActionTriggerKind.Invoke:return Ue.CodeActionTriggerKind.Invoked;case Jt.CodeActionTriggerKind.Automatic:return Ue.CodeActionTriggerKind.Automatic;default:return}}function C(b){if(b!=null)return b.value}function F(b){return b==null?b:Ue.InlineValueContext.create(b.frameId,P(b.stoppedLocation))}function U(b,Z,Re){return{context:Ue.InlineCompletionContext.create(Re.triggerKind,Re.selectedCompletionInfo),textDocument:i(b),position:H(Z)}}function te(b){let Z=Ue.Command.create(b.title,b.command);return b.arguments&&(Z.arguments=b.arguments),Z}function we(b){let Z=Ue.CodeLens.create(P(b.range));return b.command&&(Z.command=te(b.command)),b instanceof gF.default&&b.data&&(Z.data=b.data),Z}function ke(b,Z){let Re={tabSize:b.tabSize,insertSpaces:b.insertSpaces};return Z.trimTrailingWhitespace&&(Re.trimTrailingWhitespace=!0),Z.trimFinalNewlines&&(Re.trimFinalNewlines=!0),Z.insertFinalNewline&&(Re.insertFinalNewline=!0),Re}function ve(b){return{textDocument:i(b)}}function xe(b){return{textDocument:i(b)}}function Pe(b){let Z=Ue.DocumentLink.create(P(b.range));b.target&&(Z.target=n(b.target)),b.tooltip!==void 0&&(Z.tooltip=b.tooltip);let Re=b instanceof mF.default?b:void 0;return Re&&Re.data&&(Z.data=Re.data),Z}function Le(b){return{textDocument:i(b)}}function Oe(b){let Z={name:b.name,kind:gt(b.kind),uri:n(b.uri),range:P(b.range),selectionRange:P(b.selectionRange)};return b.detail!==void 0&&b.detail.length>0&&(Z.detail=b.detail),b.tags!==void 0&&(Z.tags=Bt(b.tags)),b instanceof yF.default&&b.data!==void 0&&(Z.data=b.data),Z}function st(b){let Z={name:b.name,kind:gt(b.kind),uri:n(b.uri),range:P(b.range),selectionRange:P(b.selectionRange)};return b.detail!==void 0&&b.detail.length>0&&(Z.detail=b.detail),b.tags!==void 0&&(Z.tags=Bt(b.tags)),b instanceof vF.default&&b.data!==void 0&&(Z.data=b.data),Z}function mt(b){let Z=b instanceof _F.default?{name:b.name,kind:gt(b.kind),location:b.hasRange?ye(b.location):{uri:r(b.location.uri)},data:b.data}:{name:b.name,kind:gt(b.kind),location:ye(b.location)};return b.tags!==void 0&&(Z.tags=Bt(b.tags)),b.containerName!==""&&(Z.containerName=b.containerName),Z}function Qt(b){let Z=typeof b.label=="string"?b.label:b.label.map(on),Re=Ue.InlayHint.create(H(b.position),Z);return b.kind!==void 0&&(Re.kind=b.kind),b.textEdits!==void 0&&(Re.textEdits=St(b.textEdits)),b.tooltip!==void 0&&(Re.tooltip=vn(b.tooltip)),b.paddingLeft!==void 0&&(Re.paddingLeft=b.paddingLeft),b.paddingRight!==void 0&&(Re.paddingRight=b.paddingRight),b instanceof bF.default&&b.data!==void 0&&(Re.data=b.data),Re}function on(b){let Z=Ue.InlayHintLabelPart.create(b.value);return b.location!==void 0&&(Z.location=ye(b.location)),b.command!==void 0&&(Z.command=te(b.command)),b.tooltip!==void 0&&(Z.tooltip=vn(b.tooltip)),Z}function vn(b){return typeof b=="string"?b:{kind:Ue.MarkupKind.Markdown,value:b.value}}return{asUri:n,asTextDocumentIdentifier:i,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:a,asOpenTextDocumentParams:u,asChangeTextDocumentParams:f,asCloseTextDocumentParams:y,asSaveTextDocumentParams:g,asWillSaveTextDocumentParams:h,asDidCreateFilesParams:S,asDidRenameFilesParams:R,asDidDeleteFilesParams:D,asWillCreateFilesParams:I,asWillRenameFilesParams:A,asWillDeleteFilesParams:N,asTextDocumentPositionParams:ee,asCompletionParams:re,asSignatureHelpParams:X,asWorkerPosition:$,asRange:P,asRanges:ue,asPosition:H,asPositions:V,asPositionsSync:ne,asLocation:ye,asDiagnosticSeverity:me,asDiagnosticTag:Y,asDiagnostic:Ce,asDiagnostics:He,asDiagnosticsSync:ct,asCompletionItem:wt,asTextEdit:rr,asSymbolKind:gt,asSymbolTag:ht,asSymbolTags:Bt,asReferenceParams:Gt,asCodeAction:Tr,asCodeActionSync:$t,asCodeActionContext:hr,asCodeActionContextSync:Ye,asInlineValueContext:F,asCommand:te,asCodeLens:we,asFormattingOptions:ke,asDocumentSymbolParams:ve,asCodeLensParams:xe,asDocumentLink:Pe,asDocumentLinkParams:Le,asCallHierarchyItem:Oe,asTypeHierarchyItem:st,asInlayHint:Qt,asWorkspaceSymbol:mt,asInlineCompletionParams:U}}bc.createConverter=wF});var dS=q(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.createConverter=void 0;var be=require("vscode"),je=We(),dn=un(),ut=vc(),SF=yh(),CF=bh(),RF=Ch(),TF=Dh(),cS=kh(),DF=Fh(),EF=Ah(),PF=Mh(),kF=Wh(),lS=We(),wc;(function(t){function e(r){let n=r;return n&&dn.string(n.language)&&dn.string(n.value)}t.is=e})(wc||(wc={}));function qF(t,e,r){let i=t||(p=>be.Uri.parse(p));function o(p){return i(p)}function a(p){let M=[];for(let le of p)if(typeof le=="string")M.push(le);else if(lS.NotebookCellTextDocumentFilter.is(le))if(typeof le.notebook=="string")M.push({notebookType:le.notebook,language:le.language});else{let qe=le.notebook.notebookType??"*";M.push({notebookType:qe,scheme:le.notebook.scheme,pattern:le.notebook.pattern,language:le.language})}else lS.TextDocumentFilter.is(le)&&M.push({language:le.language,scheme:le.scheme,pattern:le.pattern});return M}async function u(p,M){return ut.map(p,d,M)}function c(p){let M=new Array(p.length);for(let le=0;le<p.length;le++)M[le]=d(p[le]);return M}function d(p){let M=new cS.ProtocolDiagnostic(h(p.range),p.message,R(p.severity),p.data);if(p.code!==void 0){if(typeof p.code=="string"||typeof p.code=="number")je.CodeDescription.is(p.codeDescription)?M.code={value:p.code,target:o(p.codeDescription.href)}:M.code=p.code;else if(cS.DiagnosticCode.is(p.code)){M.hasDiagnosticCode=!0;let le=p.code;M.code={value:le.value,target:o(le.target)}}}return p.source&&(M.source=p.source),p.relatedInformation&&(M.relatedInformation=f(p.relatedInformation)),Array.isArray(p.tags)&&(M.tags=y(p.tags)),M}function f(p){let M=new Array(p.length);for(let le=0;le<p.length;le++){let qe=p[le];M[le]=new be.DiagnosticRelatedInformation(me(qe.location),qe.message)}return M}function y(p){if(!p)return;let M=[];for(let le of p){let qe=g(le);qe!==void 0&&M.push(qe)}return M.length>0?M:void 0}function g(p){switch(p){case je.DiagnosticTag.Unnecessary:return be.DiagnosticTag.Unnecessary;case je.DiagnosticTag.Deprecated:return be.DiagnosticTag.Deprecated;default:return}}function m(p){return p?new be.Position(p.line,p.character):void 0}function h(p){return p?new be.Range(p.start.line,p.start.character,p.end.line,p.end.character):void 0}async function S(p,M){return ut.map(p,le=>new be.Range(le.start.line,le.start.character,le.end.line,le.end.character),M)}function R(p){if(p==null)return be.DiagnosticSeverity.Error;switch(p){case je.DiagnosticSeverity.Error:return be.DiagnosticSeverity.Error;case je.DiagnosticSeverity.Warning:return be.DiagnosticSeverity.Warning;case je.DiagnosticSeverity.Information:return be.DiagnosticSeverity.Information;case je.DiagnosticSeverity.Hint:return be.DiagnosticSeverity.Hint}return be.DiagnosticSeverity.Error}function D(p){if(dn.string(p))return A(p);if(wc.is(p))return A().appendCodeblock(p.value,p.language);if(Array.isArray(p)){let M=[];for(let le of p){let qe=A();wc.is(le)?qe.appendCodeblock(le.value,le.language):qe.appendMarkdown(le),M.push(qe)}return M}else return A(p)}function I(p){if(dn.string(p))return p;switch(p.kind){case je.MarkupKind.Markdown:return A(p.value);case je.MarkupKind.PlainText:return p.value;default:return`Unsupported Markup content received. Kind is: ${p.kind}`}}function A(p){let M;if(p===void 0||typeof p=="string")M=new be.MarkdownString(p);else switch(p.kind){case je.MarkupKind.Markdown:M=new be.MarkdownString(p.value);break;case je.MarkupKind.PlainText:M=new be.MarkdownString,M.appendText(p.value);break;default:M=new be.MarkdownString,M.appendText(`Unsupported Markup content received. Kind is: ${p.kind}`);break}return M.isTrusted=e,M.supportHtml=r,M}function N(p){if(p)return new be.Hover(D(p.contents),h(p.range))}async function ee(p,M,le){if(!p)return;if(Array.isArray(p))return ut.map(p,Lr=>_e(Lr,M),le);let qe=p,{defaultRange:Kt,commitCharacters:Xt}=fe(qe,M),at=await ut.map(qe.items,Lr=>_e(Lr,Xt,Kt,qe.itemDefaults?.insertTextMode,qe.itemDefaults?.insertTextFormat,qe.itemDefaults?.data),le);return new be.CompletionList(at,qe.isIncomplete)}function fe(p,M){let le=p.itemDefaults?.editRange,qe=p.itemDefaults?.commitCharacters??M;return je.Range.is(le)?{defaultRange:h(le),commitCharacters:qe}:le!==void 0?{defaultRange:{inserting:h(le.insert),replacing:h(le.replace)},commitCharacters:qe}:{defaultRange:void 0,commitCharacters:qe}}function re(p){return je.CompletionItemKind.Text<=p&&p<=je.CompletionItemKind.TypeParameter?[p-1,void 0]:[be.CompletionItemKind.Text,p]}function de(p){switch(p){case je.CompletionItemTag.Deprecated:return be.CompletionItemTag.Deprecated}}function se(p){if(p==null)return[];let M=[];for(let le of p){let qe=de(le);qe!==void 0&&M.push(qe)}return M}function _e(p,M,le,qe,Kt,Xt){let at=se(p.tags),Lr=G(p),yt=new SF.default(Lr);p.detail&&(yt.detail=p.detail),p.documentation&&(yt.documentation=I(p.documentation),yt.documentationFormat=dn.string(p.documentation)?"$string":p.documentation.kind),p.filterText&&(yt.filterText=p.filterText);let bo=K(p,le,Kt);if(bo&&(yt.insertText=bo.text,yt.range=bo.range,yt.fromEdit=bo.fromEdit),dn.number(p.kind)){let[ui,iu]=re(p.kind);yt.kind=ui,iu&&(yt.originalItemKind=iu)}p.sortText&&(yt.sortText=p.sortText),p.additionalTextEdits&&(yt.additionalTextEdits=H(p.additionalTextEdits));let ru=p.commitCharacters!==void 0?dn.stringArray(p.commitCharacters)?p.commitCharacters:void 0:M;ru&&(yt.commitCharacters=ru.slice()),p.command&&(yt.command=St(p.command)),(p.deprecated===!0||p.deprecated===!1)&&(yt.deprecated=p.deprecated,p.deprecated===!0&&at.push(be.CompletionItemTag.Deprecated)),(p.preselect===!0||p.preselect===!1)&&(yt.preselect=p.preselect);let nu=p.data??Xt;nu!==void 0&&(yt.data=nu),at.length>0&&(yt.tags=at);let wo=p.insertTextMode??qe;return wo!==void 0&&(yt.insertTextMode=wo,wo===je.InsertTextMode.asIs&&(yt.keepWhitespace=!0)),yt}function G(p){return je.CompletionItemLabelDetails.is(p.labelDetails)?{label:p.label,detail:p.labelDetails.detail,description:p.labelDetails.description}:p.label}function K(p,M,le){let qe=p.insertTextFormat??le;if(p.textEdit!==void 0||M!==void 0){let[Kt,Xt]=p.textEdit!==void 0?j(p.textEdit):[M,p.textEditText??p.label];return qe===je.InsertTextFormat.Snippet?{text:new be.SnippetString(Xt),range:Kt,fromEdit:!0}:{text:Xt,range:Kt,fromEdit:!0}}else return p.insertText?qe===je.InsertTextFormat.Snippet?{text:new be.SnippetString(p.insertText),fromEdit:!1}:{text:p.insertText,fromEdit:!1}:void 0}function j(p){return je.InsertReplaceEdit.is(p)?[{inserting:h(p.insert),replacing:h(p.replace)},p.newText]:[h(p.range),p.newText]}function X(p){if(p)return new be.TextEdit(h(p.range),p.newText)}async function $(p,M){if(p)return ut.map(p,X,M)}function H(p){if(!p)return;let M=new Array(p.length);for(let le=0;le<p.length;le++)M[le]=X(p[le]);return M}async function V(p,M){if(!p)return;let le=new be.SignatureHelp;return dn.number(p.activeSignature)?le.activeSignature=p.activeSignature:le.activeSignature=0,dn.number(p.activeParameter)?le.activeParameter=p.activeParameter:le.activeParameter=0,p.signatures&&(le.signatures=await ne(p.signatures,M)),le}async function ne(p,M){return ut.mapAsync(p,P,M)}async function P(p,M){let le=new be.SignatureInformation(p.label);return p.documentation!==void 0&&(le.documentation=I(p.documentation)),p.parameters!==void 0&&(le.parameters=await ue(p.parameters,M)),p.activeParameter!==void 0&&(le.activeParameter=p.activeParameter),le}function ue(p,M){return ut.map(p,ye,M)}function ye(p){let M=new be.ParameterInformation(p.label);return p.documentation&&(M.documentation=I(p.documentation)),M}function me(p){return p?new be.Location(i(p.uri),h(p.range)):void 0}async function L(p,M){if(p)return pe(p,M)}async function Y(p,M){if(p)return pe(p,M)}function ae(p){if(!p)return;let M={targetUri:i(p.targetUri),targetRange:h(p.targetRange),originSelectionRange:h(p.originSelectionRange),targetSelectionRange:h(p.targetSelectionRange)};if(!M.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return M}async function pe(p,M){if(p)if(dn.array(p)){if(p.length===0)return[];if(je.LocationLink.is(p[0])){let le=p;return ut.map(le,ae,M)}else{let le=p;return ut.map(le,me,M)}}else return je.LocationLink.is(p)?[ae(p)]:me(p)}async function Te(p,M){if(p)return ut.map(p,me,M)}async function Ce(p,M){if(p)return ut.map(p,He,M)}function He(p){let M=new be.DocumentHighlight(h(p.range));return dn.number(p.kind)&&(M.kind=ct(p.kind)),M}function ct(p){switch(p){case je.DocumentHighlightKind.Text:return be.DocumentHighlightKind.Text;case je.DocumentHighlightKind.Read:return be.DocumentHighlightKind.Read;case je.DocumentHighlightKind.Write:return be.DocumentHighlightKind.Write}return be.DocumentHighlightKind.Text}async function Vt(p,M){if(p)return ut.map(p,wt,M)}function vt(p){return p<=je.SymbolKind.TypeParameter?p-1:be.SymbolKind.Property}function jt(p){switch(p){case je.SymbolTag.Deprecated:return be.SymbolTag.Deprecated;default:return}}function Ot(p){if(p==null)return;let M=[];for(let le of p){let qe=jt(le);qe!==void 0&&M.push(qe)}return M.length===0?void 0:M}function wt(p){let M=p.data,le=p.location,qe=le.range===void 0||M!==void 0?new PF.default(p.name,vt(p.kind),p.containerName??"",le.range===void 0?i(le.uri):new be.Location(i(p.location.uri),h(le.range)),M):new be.SymbolInformation(p.name,vt(p.kind),p.containerName??"",new be.Location(i(p.location.uri),h(le.range)));return rr(qe,p),qe}async function Ir(p,M){if(p!=null)return ut.map(p,er,M)}function er(p){let M=new be.DocumentSymbol(p.name,p.detail||"",vt(p.kind),h(p.range),h(p.selectionRange));if(rr(M,p),p.children!==void 0&&p.children.length>0){let le=[];for(let qe of p.children)le.push(er(qe));M.children=le}return M}function rr(p,M){p.tags=Ot(M.tags),M.deprecated&&(p.tags?p.tags.includes(be.SymbolTag.Deprecated)||(p.tags=p.tags.concat(be.SymbolTag.Deprecated)):p.tags=[be.SymbolTag.Deprecated])}function St(p){let M={title:p.title,command:p.command};return p.arguments&&(M.arguments=p.arguments),M}async function gt(p,M){if(p)return ut.map(p,St,M)}let ht=new Map;ht.set(je.CodeActionKind.Empty,be.CodeActionKind.Empty),ht.set(je.CodeActionKind.QuickFix,be.CodeActionKind.QuickFix),ht.set(je.CodeActionKind.Refactor,be.CodeActionKind.Refactor),ht.set(je.CodeActionKind.RefactorExtract,be.CodeActionKind.RefactorExtract),ht.set(je.CodeActionKind.RefactorInline,be.CodeActionKind.RefactorInline),ht.set(je.CodeActionKind.RefactorRewrite,be.CodeActionKind.RefactorRewrite),ht.set(je.CodeActionKind.Source,be.CodeActionKind.Source),ht.set(je.CodeActionKind.SourceOrganizeImports,be.CodeActionKind.SourceOrganizeImports);function Bt(p){if(p==null)return;let M=ht.get(p);if(M)return M;let le=p.split(".");M=be.CodeActionKind.Empty;for(let qe of le)M=M.append(qe);return M}function Gt(p){if(p!=null)return p.map(M=>Bt(M))}async function Tr(p,M){if(p==null)return;let le=new TF.default(p.title,p.data);return p.kind!==void 0&&(le.kind=Bt(p.kind)),p.diagnostics!==void 0&&(le.diagnostics=c(p.diagnostics)),p.edit!==void 0&&(le.edit=await z(p.edit,M)),p.command!==void 0&&(le.command=St(p.command)),p.isPreferred!==void 0&&(le.isPreferred=p.isPreferred),p.disabled!==void 0&&(le.disabled={reason:p.disabled.reason}),le}function $t(p,M){return ut.mapAsync(p,async le=>je.Command.is(le)?St(le):Tr(le,M),M)}function hr(p){if(!p)return;let M=new CF.default(h(p.range));return p.command&&(M.command=St(p.command)),p.data!==void 0&&p.data!==null&&(M.data=p.data),M}async function Ye(p,M){if(p)return ut.map(p,hr,M)}async function z(p,M){if(!p)return;let le=new Map;if(p.changeAnnotations!==void 0){let Xt=p.changeAnnotations;await ut.forEach(Object.keys(Xt),at=>{let Lr=C(Xt[at]);le.set(at,Lr)},M)}let qe=Xt=>{if(Xt!==void 0)return le.get(Xt)},Kt=new be.WorkspaceEdit;if(p.documentChanges){let Xt=p.documentChanges;await ut.forEach(Xt,at=>{if(je.CreateFile.is(at))Kt.createFile(i(at.uri),at.options,qe(at.annotationId));else if(je.RenameFile.is(at))Kt.renameFile(i(at.oldUri),i(at.newUri),at.options,qe(at.annotationId));else if(je.DeleteFile.is(at))Kt.deleteFile(i(at.uri),at.options,qe(at.annotationId));else if(je.TextDocumentEdit.is(at)){let Lr=i(at.textDocument.uri);for(let yt of at.edits)je.AnnotatedTextEdit.is(yt)?Kt.replace(Lr,h(yt.range),yt.newText,qe(yt.annotationId)):Kt.replace(Lr,h(yt.range),yt.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(at,void 0,4)}`)},M)}else if(p.changes){let Xt=p.changes;await ut.forEach(Object.keys(Xt),at=>{Kt.set(i(at),H(Xt[at]))},M)}return Kt}function C(p){if(p!==void 0)return{label:p.label,needsConfirmation:!!p.needsConfirmation,description:p.description}}function F(p){let M=h(p.range),le=p.target?o(p.target):void 0,qe=new RF.default(M,le);return p.tooltip!==void 0&&(qe.tooltip=p.tooltip),p.data!==void 0&&p.data!==null&&(qe.data=p.data),qe}async function U(p,M){if(p)return ut.map(p,F,M)}function te(p){return new be.Color(p.red,p.green,p.blue,p.alpha)}function we(p){return new be.ColorInformation(h(p.range),te(p.color))}async function ke(p,M){if(p)return ut.map(p,we,M)}function ve(p){let M=new be.ColorPresentation(p.label);return M.additionalTextEdits=H(p.additionalTextEdits),p.textEdit&&(M.textEdit=X(p.textEdit)),M}async function xe(p,M){if(p)return ut.map(p,ve,M)}function Pe(p){if(p)switch(p){case je.FoldingRangeKind.Comment:return be.FoldingRangeKind.Comment;case je.FoldingRangeKind.Imports:return be.FoldingRangeKind.Imports;case je.FoldingRangeKind.Region:return be.FoldingRangeKind.Region}}function Le(p){return new be.FoldingRange(p.startLine,p.endLine,Pe(p.kind))}async function Oe(p,M){if(p)return ut.map(p,Le,M)}function st(p){return new be.SelectionRange(h(p.range),p.parent?st(p.parent):void 0)}async function mt(p,M){return Array.isArray(p)?ut.map(p,st,M):[]}function Qt(p){return je.InlineValueText.is(p)?new be.InlineValueText(h(p.range),p.text):je.InlineValueVariableLookup.is(p)?new be.InlineValueVariableLookup(h(p.range),p.variableName,p.caseSensitiveLookup):new be.InlineValueEvaluatableExpression(h(p.range),p.expression)}async function on(p,M){return Array.isArray(p)?ut.map(p,Qt,M):[]}async function vn(p,M){let le=typeof p.label=="string"?p.label:await ut.map(p.label,b,M),qe=new kF.default(m(p.position),le);return p.kind!==void 0&&(qe.kind=p.kind),p.textEdits!==void 0&&(qe.textEdits=await $(p.textEdits,M)),p.tooltip!==void 0&&(qe.tooltip=Z(p.tooltip)),p.paddingLeft!==void 0&&(qe.paddingLeft=p.paddingLeft),p.paddingRight!==void 0&&(qe.paddingRight=p.paddingRight),p.data!==void 0&&(qe.data=p.data),qe}function b(p){let M=new be.InlayHintLabelPart(p.value);return p.location!==void 0&&(M.location=me(p.location)),p.tooltip!==void 0&&(M.tooltip=Z(p.tooltip)),p.command!==void 0&&(M.command=St(p.command)),M}function Z(p){return typeof p=="string"?p:A(p)}async function Re(p,M){if(Array.isArray(p))return ut.mapAsync(p,vn,M)}function nt(p){if(p===null)return;let M=new DF.default(vt(p.kind),p.name,p.detail||"",o(p.uri),h(p.range),h(p.selectionRange),p.data);return p.tags!==void 0&&(M.tags=Ot(p.tags)),M}async function B(p,M){if(p!==null)return ut.map(p,nt,M)}async function w(p,M){return new be.CallHierarchyIncomingCall(nt(p.from),await S(p.fromRanges,M))}async function x(p,M){if(p!==null)return ut.mapAsync(p,w,M)}async function O(p,M){return new be.CallHierarchyOutgoingCall(nt(p.to),await S(p.fromRanges,M))}async function T(p,M){if(p!==null)return ut.mapAsync(p,O,M)}async function _(p,M){if(p!=null)return new be.SemanticTokens(new Uint32Array(p.data),p.resultId)}function Q(p){return new be.SemanticTokensEdit(p.start,p.deleteCount,p.data!==void 0?new Uint32Array(p.data):void 0)}async function ce(p,M){if(p!=null)return new be.SemanticTokensEdits(p.edits.map(Q),p.resultId)}function Ae(p){return p}async function it(p,M){if(p!=null)return new be.LinkedEditingRanges(await S(p.ranges,M),Je(p.wordPattern))}function Je(p){if(p!=null)return new RegExp(p)}function nr(p){if(p===null)return;let M=new EF.default(vt(p.kind),p.name,p.detail||"",o(p.uri),h(p.range),h(p.selectionRange),p.data);return p.tags!==void 0&&(M.tags=Ot(p.tags)),M}async function zt(p,M){if(p!==null)return ut.map(p,nr,M)}function Ar(p){if(dn.string(p))return p;if(je.RelativePattern.is(p)){if(je.URI.is(p.baseUri))return new be.RelativePattern(o(p.baseUri),p.pattern);if(je.WorkspaceFolder.is(p.baseUri)){let M=be.workspace.getWorkspaceFolder(o(p.baseUri.uri));return M!==void 0?new be.RelativePattern(M,p.pattern):void 0}}}async function Ge(p,M){if(!p)return;if(Array.isArray(p))return ut.map(p,Kt=>Vr(Kt),M);let le=p,qe=await ut.map(le.items,Kt=>Vr(Kt),M);return new be.InlineCompletionList(qe)}function Vr(p){let M;typeof p.insertText=="string"?M=p.insertText:M=new be.SnippetString(p.insertText.value);let le;p.command&&(le=St(p.command));let qe=new be.InlineCompletionItem(M,h(p.range),le);return p.filterText&&(qe.filterText=p.filterText),qe}return{asUri:o,asDocumentSelector:a,asDiagnostics:u,asDiagnostic:d,asRange:h,asRanges:S,asPosition:m,asDiagnosticSeverity:R,asDiagnosticTag:g,asHover:N,asCompletionResult:ee,asCompletionItem:_e,asTextEdit:X,asTextEdits:$,asSignatureHelp:V,asSignatureInformations:ne,asSignatureInformation:P,asParameterInformations:ue,asParameterInformation:ye,asDeclarationResult:L,asDefinitionResult:Y,asLocation:me,asReferences:Te,asDocumentHighlights:Ce,asDocumentHighlight:He,asDocumentHighlightKind:ct,asSymbolKind:vt,asSymbolTag:jt,asSymbolTags:Ot,asSymbolInformations:Vt,asSymbolInformation:wt,asDocumentSymbols:Ir,asDocumentSymbol:er,asCommand:St,asCommands:gt,asCodeAction:Tr,asCodeActionKind:Bt,asCodeActionKinds:Gt,asCodeActionResult:$t,asCodeLens:hr,asCodeLenses:Ye,asWorkspaceEdit:z,asDocumentLink:F,asDocumentLinks:U,asFoldingRangeKind:Pe,asFoldingRange:Le,asFoldingRanges:Oe,asColor:te,asColorInformation:we,asColorInformations:ke,asColorPresentation:ve,asColorPresentations:xe,asSelectionRange:st,asSelectionRanges:mt,asInlineValue:Qt,asInlineValues:on,asInlayHint:vn,asInlayHints:Re,asSemanticTokensLegend:Ae,asSemanticTokens:_,asSemanticTokensEdit:Q,asSemanticTokensEdits:ce,asCallHierarchyItem:nt,asCallHierarchyItems:B,asCallHierarchyIncomingCall:w,asCallHierarchyIncomingCalls:x,asCallHierarchyOutgoingCall:O,asCallHierarchyOutgoingCalls:T,asLinkedEditingRanges:it,asTypeHierarchyItem:nr,asTypeHierarchyItems:zt,asGlobPattern:Ar,asInlineCompletionResult:Ge,asInlineCompletionItem:Vr}}Sc.createConverter=qF});var xt=q(fn=>{"use strict";Object.defineProperty(fn,"__esModule",{value:!0});fn.generateUuid=fn.parse=fn.isUUID=fn.v4=fn.empty=void 0;var Ys=class{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},Js=class t extends Ys{static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};Js._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];Js._timeHighBits=["8","9","a","b"];fn.empty=new Ys("00000000-0000-0000-0000-000000000000");function fS(){return new Js}fn.v4=fS;var xF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function hS(t){return xF.test(t)}fn.isUUID=hS;function FF(t){if(!hS(t))throw new Error("invalid uuid");return new Ys(t)}fn.parse=FF;function OF(){return fS().asHex()}fn.generateUuid=OF});var Bh=q(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.ProgressPart=void 0;var pS=require("vscode"),gS=We(),mS=un(),Uh=class{constructor(e,r,n){this._client=e,this._token=r,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(gS.WorkDoneProgress.type,this._token,i=>{switch(i.kind){case"begin":this.begin(i);break;case"report":this.report(i);break;case"end":this.done(),n&&n(this);break}})}begin(e){this._infinite=e.percentage===void 0,this._lspProgressDisposable!==void 0&&pS.window.withProgress({location:pS.ProgressLocation.Window,cancellable:e.cancellable,title:e.title},async(r,n)=>{if(this._lspProgressDisposable!==void 0)return this._progress=r,this._cancellationToken=n,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(gS.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(e),new Promise((i,o)=>{this._resolve=i,this._reject=o})})}report(e){if(this._infinite&&mS.string(e.message))this._progress!==void 0&&this._progress.report({message:e.message});else if(mS.number(e.percentage)){let r=Math.max(0,Math.min(e.percentage,100)),n=Math.max(0,r-this._reported);this._reported+=n,this._progress!==void 0&&this._progress.report({message:e.message,increment:n})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}};Cc.ProgressPart=Uh});var ot=q(or=>{"use strict";Object.defineProperty(or,"__esModule",{value:!0});or.WorkspaceFeature=or.TextDocumentLanguageFeature=or.TextDocumentEventFeature=or.DynamicDocumentFeature=or.DynamicFeature=or.StaticFeature=or.ensure=or.LSPCancellationError=void 0;var Yi=require("vscode"),zh=We(),Er=un(),yS=xt(),Kh=class extends Yi.CancellationError{constructor(e){super(),this.data=e}};or.LSPCancellationError=Kh;function IF(t,e){return t[e]===void 0&&(t[e]={}),t[e]}or.ensure=IF;var vS;(function(t){function e(r){let n=r;return n!=null&&Er.func(n.fillClientCapabilities)&&Er.func(n.initialize)&&Er.func(n.getState)&&Er.func(n.clear)&&(n.fillInitializeParams===void 0||Er.func(n.fillInitializeParams))}t.is=e})(vS||(or.StaticFeature=vS={}));var _S;(function(t){function e(r){let n=r;return n!=null&&Er.func(n.fillClientCapabilities)&&Er.func(n.initialize)&&Er.func(n.getState)&&Er.func(n.clear)&&(n.fillInitializeParams===void 0||Er.func(n.fillInitializeParams))&&Er.func(n.register)&&Er.func(n.unregister)&&n.registrationType!==void 0}t.is=e})(_S||(or.DynamicFeature=_S={}));var Zs=class{constructor(e){this._client=e}getState(){let e=this.getDocumentSelectors(),r=0;for(let i of e){r++;for(let o of Yi.workspace.textDocuments)if(Yi.languages.match(i,o)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}let n=r>0;return{kind:"document",id:this.registrationType.method,registrations:n,matches:!1}}};or.DynamicDocumentFeature=Zs;var Vh=class extends Zs{static textDocumentFilter(e,r){for(let n of e)if(Yi.languages.match(n,r)>0)return!0;return!1}constructor(e,r,n,i,o,a,u){super(e),this._event=r,this._type=n,this._middleware=i,this._createParams=o,this._textDocument=a,this._selectorFilter=u,this._selectors=new Map,this._onNotificationSent=new Yi.EventEmitter}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=this._event(r=>{this.callback(r).catch(n=>{this._client.error(`Sending document notification ${this._type.method} failed.`,n)})})),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}async callback(e){let r=async n=>{let i=this._createParams(n);await this._client.sendNotification(this._type,i),this.notificationSent(this.getTextDocument(n),this._type,i)};if(this.matches(e)){let n=this._middleware();return n?n(e,i=>r(i)):r(e)}}matches(e){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(e))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),e)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(e,r,n){this._onNotificationSent.fire({textDocument:e,type:r,params:n})}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(e){for(let r of this._selectors.values())if(Yi.languages.match(r,e)>0)return{send:n=>this.callback(n)}}};or.TextDocumentEventFeature=Vh;var Gh=class extends Zs{constructor(e,r){super(e),this._registrationType=r,this._registrations=new Map}*getDocumentSelectors(){for(let e of this._registrations.values()){let r=e.data.registerOptions.documentSelector;r!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(r))}}get registrationType(){return this._registrationType}register(e){if(!e.registerOptions.documentSelector)return;let r=this.registerLanguageProvider(e.registerOptions,e.id);this._registrations.set(e.id,{disposable:r[0],data:e,provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getRegistration(e,r){if(r){if(zh.TextDocumentRegistrationOptions.is(r)){let n=zh.StaticRegistrationOptions.hasId(r)?r.id:yS.generateUuid(),i=r.documentSelector??e;if(i)return[n,Object.assign({},r,{documentSelector:i})]}else if(Er.boolean(r)&&r===!0||zh.WorkDoneProgressOptions.is(r)){if(!e)return[void 0,void 0];let n=Er.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e});return[yS.generateUuid(),n]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(e,r){if(!(!e||!r))return Er.boolean(r)&&r===!0?{documentSelector:e}:Object.assign({},r,{documentSelector:e})}getProvider(e){for(let r of this._registrations.values()){let n=r.data.registerOptions.documentSelector;if(n!==null&&Yi.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(n),e)>0)return r.provider}}getAllProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};or.TextDocumentLanguageFeature=Gh;var Qh=class{constructor(e,r){this._client=e,this._registrationType=r,this._registrations=new Map}getState(){let e=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:e}}get registrationType(){return this._registrationType}register(e){let r=this.registerLanguageProvider(e.registerOptions);this._registrations.set(e.id,{disposable:r[0],provider:r[1]})}unregister(e){let r=this._registrations.get(e);r!==void 0&&r.disposable.dispose()}clear(){this._registrations.forEach(e=>{e.disposable.dispose()}),this._registrations.clear()}getProviders(){let e=[];for(let r of this._registrations.values())e.push(r.provider);return e}};or.WorkspaceFeature=Qh});var wS=q((X2,bS)=>{var AF=typeof process=="object"&&process&&process.platform==="win32";bS.exports=AF?{sep:"\\"}:{sep:"/"}});var DS=q((Y2,TS)=>{"use strict";TS.exports=CS;function CS(t,e,r){t instanceof RegExp&&(t=SS(t,r)),e instanceof RegExp&&(e=SS(e,r));var n=RS(t,e,r);return n&&{start:n[0],end:n[1],pre:r.slice(0,n[0]),body:r.slice(n[0]+t.length,n[1]),post:r.slice(n[1]+e.length)}}function SS(t,e){var r=e.match(t);return r?r[0]:null}CS.range=RS;function RS(t,e,r){var n,i,o,a,u,c=r.indexOf(t),d=r.indexOf(e,c+1),f=c;if(c>=0&&d>0){if(t===e)return[c,d];for(n=[],o=r.length;f>=0&&!u;)f==c?(n.push(f),c=r.indexOf(t,f+1)):n.length==1?u=[n.pop(),d]:(i=n.pop(),i<o&&(o=i,a=d),d=r.indexOf(e,f+1)),f=c<d&&c>=0?c:d;n.length&&(u=[o,a])}return u}});var IS=q((J2,OS)=>{var ES=DS();OS.exports=MF;var PS="\0SLASH"+Math.random()+"\0",kS="\0OPEN"+Math.random()+"\0",Yh="\0CLOSE"+Math.random()+"\0",qS="\0COMMA"+Math.random()+"\0",xS="\0PERIOD"+Math.random()+"\0";function Xh(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function LF(t){return t.split("\\\\").join(PS).split("\\{").join(kS).split("\\}").join(Yh).split("\\,").join(qS).split("\\.").join(xS)}function NF(t){return t.split(PS).join("\\").split(kS).join("{").split(Yh).join("}").split(qS).join(",").split(xS).join(".")}function FS(t){if(!t)return[""];var e=[],r=ES("{","}",t);if(!r)return t.split(",");var n=r.pre,i=r.body,o=r.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var u=FS(o);return o.length&&(a[a.length-1]+=u.shift(),a.push.apply(a,u)),e.push.apply(e,a),e}function MF(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),ea(LF(t),!0).map(NF)):[]}function jF(t){return"{"+t+"}"}function $F(t){return/^-?0\d/.test(t)}function WF(t,e){return t<=e}function HF(t,e){return t>=e}function ea(t,e){var r=[],n=ES("{","}",t);if(!n)return[t];var i=n.pre,o=n.post.length?ea(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<o.length;a++){var u=i+"{"+n.body+"}"+o[a];r.push(u)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),d=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),f=c||d,y=n.body.indexOf(",")>=0;if(!f&&!y)return n.post.match(/,(?!,).*\}/)?(t=n.pre+"{"+n.body+Yh+n.post,ea(t)):[t];var g;if(f)g=n.body.split(/\.\./);else if(g=FS(n.body),g.length===1&&(g=ea(g[0],!1).map(jF),g.length===1))return o.map(function(_e){return n.pre+g[0]+_e});var m;if(f){var h=Xh(g[0]),S=Xh(g[1]),R=Math.max(g[0].length,g[1].length),D=g.length==3?Math.abs(Xh(g[2])):1,I=WF,A=S<h;A&&(D*=-1,I=HF);var N=g.some($F);m=[];for(var ee=h;I(ee,S);ee+=D){var fe;if(d)fe=String.fromCharCode(ee),fe==="\\"&&(fe="");else if(fe=String(ee),N){var re=R-fe.length;if(re>0){var de=new Array(re+1).join("0");ee<0?fe="-"+de+fe.slice(1):fe=de+fe}}m.push(fe)}}else{m=[];for(var se=0;se<g.length;se++)m.push.apply(m,ea(g[se],!1))}for(var se=0;se<m.length;se++)for(var a=0;a<o.length;a++){var u=i+m[se]+o[a];(!e||f||u)&&r.push(u)}}return r}});var Tc=q((e$,rp)=>{var Yr=rp.exports=(t,e,r={})=>(Rc(e),!r.nocomment&&e.charAt(0)==="#"?!1:new Jo(e,r).match(t));rp.exports=Yr;var ep=wS();Yr.sep=ep.sep;var Rn=Symbol("globstar **");Yr.GLOBSTAR=Rn;var UF=IS(),AS={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},tp="[^/]",Jh=tp+"*?",BF="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",zF="(?:(?!(?:\\/|^)\\.).)*?",MS=t=>t.split("").reduce((e,r)=>(e[r]=!0,e),{}),LS=MS("().*{}+?[]^$\\!"),KF=MS("[.("),NS=/\/+/;Yr.filter=(t,e={})=>(r,n,i)=>Yr(r,t,e);var Ri=(t,e={})=>{let r={};return Object.keys(t).forEach(n=>r[n]=t[n]),Object.keys(e).forEach(n=>r[n]=e[n]),r};Yr.defaults=t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return Yr;let e=Yr,r=(n,i,o)=>e(n,i,Ri(t,o));return r.Minimatch=class extends e.Minimatch{constructor(i,o){super(i,Ri(t,o))}},r.Minimatch.defaults=n=>e.defaults(Ri(t,n)).Minimatch,r.filter=(n,i)=>e.filter(n,Ri(t,i)),r.defaults=n=>e.defaults(Ri(t,n)),r.makeRe=(n,i)=>e.makeRe(n,Ri(t,i)),r.braceExpand=(n,i)=>e.braceExpand(n,Ri(t,i)),r.match=(n,i,o)=>e.match(n,i,Ri(t,o)),r};Yr.braceExpand=(t,e)=>jS(t,e);var jS=(t,e={})=>(Rc(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:UF(t)),VF=1024*64,Rc=t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>VF)throw new TypeError("pattern is too long")},Zh=Symbol("subparse");Yr.makeRe=(t,e)=>new Jo(t,e||{}).makeRe();Yr.match=(t,e,r={})=>{let n=new Jo(e,r);return t=t.filter(i=>n.match(i)),n.options.nonull&&!t.length&&t.push(e),t};var GF=t=>t.replace(/\\(.)/g,"$1"),QF=t=>t.replace(/\\([^-\]])/g,"$1"),XF=t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),YF=t=>t.replace(/[[\]\\]/g,"\\$&"),Jo=class{constructor(e,r){Rc(e),r||(r={}),this.options=r,this.set=[],this.pattern=e,this.windowsPathsNoEscape=!!r.windowsPathsNoEscape||r.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!r.partial,this.make()}debug(){}make(){let e=this.pattern,r=this.options;if(!r.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate();let n=this.globSet=this.braceExpand();r.debug&&(this.debug=(...i)=>console.error(...i)),this.debug(this.pattern,n),n=this.globParts=n.map(i=>i.split(NS)),this.debug(this.pattern,n),n=n.map((i,o,a)=>i.map(this.parse,this)),this.debug(this.pattern,n),n=n.filter(i=>i.indexOf(!1)===-1),this.debug(this.pattern,n),this.set=n}parseNegate(){if(this.options.nonegate)return;let e=this.pattern,r=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)r=!r,n++;n&&(this.pattern=e.slice(n)),this.negate=r}matchOne(e,r,n){var i=this.options;this.debug("matchOne",{this:this,file:e,pattern:r}),this.debug("matchOne",e.length,r.length);for(var o=0,a=0,u=e.length,c=r.length;o<u&&a<c;o++,a++){this.debug("matchOne loop");var d=r[a],f=e[o];if(this.debug(r,d,f),d===!1)return!1;if(d===Rn){this.debug("GLOBSTAR",[r,d,f]);var y=o,g=a+1;if(g===c){for(this.debug("** at the end");o<u;o++)if(e[o]==="."||e[o]===".."||!i.dot&&e[o].charAt(0)===".")return!1;return!0}for(;y<u;){var m=e[y];if(this.debug(`
globstar while`,e,y,r,g,m),this.matchOne(e.slice(y),r.slice(g),n))return this.debug("globstar found match!",y,u,m),!0;if(m==="."||m===".."||!i.dot&&m.charAt(0)==="."){this.debug("dot detected!",e,y,r,g);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,y,r,g),y===u))}var h;if(typeof d=="string"?(h=f===d,this.debug("string match",d,f,h)):(h=f.match(d),this.debug("pattern match",d,f,h)),!h)return!1}if(o===u&&a===c)return!0;if(o===u)return n;if(a===c)return o===u-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return jS(this.pattern,this.options)}parse(e,r){Rc(e);let n=this.options;if(e==="**")if(n.noglobstar)e="*";else return Rn;if(e==="")return"";let i="",o=!1,a=!1,u=[],c=[],d,f=!1,y=-1,g=-1,m,h,S,R=e.charAt(0)===".",D=n.dot||R,I=()=>R?"":D?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",A=re=>re.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",N=()=>{if(d){switch(d){case"*":i+=Jh,o=!0;break;case"?":i+=tp,o=!0;break;default:i+="\\"+d;break}this.debug("clearStateChar %j %j",d,i),d=!1}};for(let re=0,de;re<e.length&&(de=e.charAt(re));re++){if(this.debug("%s	%s %s %j",e,re,i,de),a){if(de==="/")return!1;LS[de]&&(i+="\\"),i+=de,a=!1;continue}switch(de){case"/":return!1;case"\\":if(f&&e.charAt(re+1)==="-"){i+=de;continue}N(),a=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",e,re,i,de),f){this.debug("  in class"),de==="!"&&re===g+1&&(de="^"),i+=de;continue}this.debug("call clearStateChar %j",d),N(),d=de,n.noext&&N();continue;case"(":{if(f){i+="(";continue}if(!d){i+="\\(";continue}let se={type:d,start:re-1,reStart:i.length,open:AS[d].open,close:AS[d].close};this.debug(this.pattern,"	",se),u.push(se),i+=se.open,se.start===0&&se.type!=="!"&&(R=!0,i+=A(e.slice(re+1))),this.debug("plType %j %j",d,i),d=!1;continue}case")":{let se=u[u.length-1];if(f||!se){i+="\\)";continue}u.pop(),N(),o=!0,h=se,i+=h.close,h.type==="!"&&c.push(Object.assign(h,{reEnd:i.length}));continue}case"|":{let se=u[u.length-1];if(f||!se){i+="\\|";continue}N(),i+="|",se.start===0&&se.type!=="!"&&(R=!0,i+=A(e.slice(re+1)));continue}case"[":if(N(),f){i+="\\"+de;continue}f=!0,g=re,y=i.length,i+=de;continue;case"]":if(re===g+1||!f){i+="\\"+de;continue}m=e.substring(g+1,re);try{RegExp("["+YF(QF(m))+"]"),i+=de}catch{i=i.substring(0,y)+"(?:$.)"}o=!0,f=!1;continue;default:N(),LS[de]&&!(de==="^"&&f)&&(i+="\\"),i+=de;break}}for(f&&(m=e.slice(g+1),S=this.parse(m,Zh),i=i.substring(0,y)+"\\["+S[0],o=o||S[1]),h=u.pop();h;h=u.pop()){let re;re=i.slice(h.reStart+h.open.length),this.debug("setting tail",i,h),re=re.replace(/((?:\\{2}){0,64})(\\?)\|/g,(se,_e,G)=>(G||(G="\\"),_e+_e+G+"|")),this.debug(`tail=%j
   %s`,re,re,h,i);let de=h.type==="*"?Jh:h.type==="?"?tp:"\\"+h.type;o=!0,i=i.slice(0,h.reStart)+de+"\\("+re}N(),a&&(i+="\\\\");let ee=KF[i.charAt(0)];for(let re=c.length-1;re>-1;re--){let de=c[re],se=i.slice(0,de.reStart),_e=i.slice(de.reStart,de.reEnd-8),G=i.slice(de.reEnd),K=i.slice(de.reEnd-8,de.reEnd)+G,j=se.split(")").length,X=se.split("(").length-j,$=G;for(let V=0;V<X;V++)$=$.replace(/\)[+*?]?/,"");G=$;let H=G===""&&r!==Zh?"(?:$|\\/)":"";i=se+_e+G+H+K}if(i!==""&&o&&(i="(?=.)"+i),ee&&(i=I()+i),r===Zh)return[i,o];if(n.nocase&&!o&&(o=e.toUpperCase()!==e.toLowerCase()),!o)return GF(e);let fe=n.nocase?"i":"";try{return Object.assign(new RegExp("^"+i+"$",fe),{_glob:e,_src:i})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let r=this.options,n=r.noglobstar?Jh:r.dot?BF:zF,i=r.nocase?"i":"",o=e.map(a=>(a=a.map(u=>typeof u=="string"?XF(u):u===Rn?Rn:u._src).reduce((u,c)=>(u[u.length-1]===Rn&&c===Rn||u.push(c),u),[]),a.forEach((u,c)=>{u!==Rn||a[c-1]===Rn||(c===0?a.length>1?a[c+1]="(?:\\/|"+n+"\\/)?"+a[c+1]:a[c]=n:c===a.length-1?a[c-1]+="(?:\\/|"+n+")?":(a[c-1]+="(?:\\/|\\/"+n+"\\/)"+a[c+1],a[c+1]=Rn))}),a.filter(u=>u!==Rn).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,i)}catch{this.regexp=!1}return this.regexp}match(e,r=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&r)return!0;let n=this.options;ep.sep!=="/"&&(e=e.split(ep.sep).join("/")),e=e.split(NS),this.debug(this.pattern,"split",e);let i=this.set;this.debug(this.pattern,"set",i);let o;for(let a=e.length-1;a>=0&&(o=e[a],!o);a--);for(let a=0;a<i.length;a++){let u=i[a],c=e;if(n.matchBase&&u.length===1&&(c=[o]),this.matchOne(c,u,r))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return Yr.defaults(e).Minimatch}};Yr.Minimatch=Jo});var lp=q(Ti=>{"use strict";Object.defineProperty(Ti,"__esModule",{value:!0});Ti.DiagnosticFeature=Ti.DiagnosticPullMode=Ti.vsdiag=void 0;var JF=Tc(),et=require("vscode"),Ut=We(),ZF=xt(),np=ot();function Dc(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var hn;(function(t){let e;(function(r){r.full="full",r.unChanged="unChanged"})(e=t.DocumentDiagnosticReportKind||(t.DocumentDiagnosticReportKind={}))})(hn||(Ti.vsdiag=hn={}));var Ec;(function(t){t.onType="onType",t.onSave="onSave"})(Ec||(Ti.DiagnosticPullMode=Ec={}));var br;(function(t){t.active="open",t.reschedule="reschedule",t.outDated="drop"})(br||(br={}));var ip=class t{constructor(){this.open=new Set,this._onOpen=new et.EventEmitter,this._onClose=new et.EventEmitter,t.fillTabResources(this.open);let e=r=>{if(r.closed.length===0&&r.opened.length===0)return;let n=this.open,i=new Set;t.fillTabResources(i);let o=new Set,a=new Set(i);for(let u of n.values())i.has(u)?a.delete(u):o.add(u);if(this.open=i,o.size>0){let u=new Set;for(let c of o)u.add(et.Uri.parse(c));this._onClose.fire(u)}if(a.size>0){let u=new Set;for(let c of a)u.add(et.Uri.parse(c));this._onOpen.fire(u)}};et.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=et.window.tabGroups.onDidChangeTabs(e):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(e){return e instanceof et.Uri?et.window.activeTextEditor?.document.uri===e:et.window.activeTextEditor?.document===e}isVisible(e){let r=e instanceof et.Uri?e:e.uri;return this.open.has(r.toString())}getTabResources(){let e=new Set;return t.fillTabResources(new Set,e),e}static fillTabResources(e,r){let n=e??new Set;for(let i of et.window.tabGroups.all)for(let o of i.tabs){let a=o.input,u;a instanceof et.TabInputText?u=a.uri:a instanceof et.TabInputTextDiff?u=a.modified:a instanceof et.TabInputCustom&&(u=a.uri),u!==void 0&&!n.has(u.toString())&&(n.add(u.toString()),r!==void 0&&r.add(u))}}},tr;(function(t){t[t.document=1]="document",t[t.workspace=2]="workspace"})(tr||(tr={}));var Gn;(function(t){function e(r){return r instanceof et.Uri?r.toString():r.uri.toString()}t.asKey=e})(Gn||(Gn={}));var op=class{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(e,r,n){let i=e===tr.document?this.documentPullStates:this.workspacePullStates,[o,a,u]=r instanceof et.Uri?[r.toString(),r,n]:[r.uri.toString(),r.uri,r.version],c=i.get(o);return c===void 0&&(c={document:a,pulledVersion:u,resultId:void 0},i.set(o,c)),c}update(e,r,n,i){let o=e===tr.document?this.documentPullStates:this.workspacePullStates,[a,u,c,d]=r instanceof et.Uri?[r.toString(),r,n,i]:[r.uri.toString(),r.uri,r.version,n],f=o.get(a);f===void 0?(f={document:u,pulledVersion:c,resultId:d},o.set(a,f)):(f.pulledVersion=c,f.resultId=d)}unTrack(e,r){let n=Gn.asKey(r);(e===tr.document?this.documentPullStates:this.workspacePullStates).delete(n)}tracks(e,r){let n=Gn.asKey(r);return(e===tr.document?this.documentPullStates:this.workspacePullStates).has(n)}getResultId(e,r){let n=Gn.asKey(r);return(e===tr.document?this.documentPullStates:this.workspacePullStates).get(n)?.resultId}getAllResultIds(){let e=[];for(let[r,n]of this.workspacePullStates)this.documentPullStates.has(r)&&(n=this.documentPullStates.get(r)),n.resultId!==void 0&&e.push({uri:r,value:n.resultId});return e}},sp=class{constructor(e,r,n){this.client=e,this.tabs=r,this.options=n,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new et.EventEmitter,this.provider=this.createProvider(),this.diagnostics=et.languages.createDiagnosticCollection(n.identifier),this.openRequests=new Map,this.documentStates=new op,this.workspaceErrorCounter=0}knows(e,r){let n=r instanceof et.Uri?r:r.uri;return this.documentStates.tracks(e,r)||this.openRequests.has(n.toString())}forget(e,r){this.documentStates.unTrack(e,r)}pull(e,r){if(this.isDisposed)return;let n=e instanceof et.Uri?e:e.uri;this.pullAsync(e).then(()=>{r&&r()},i=>{this.client.error(`Document pull failed for text document ${n.toString()}`,i,!1)})}async pullAsync(e,r){if(this.isDisposed)return;let n=e instanceof et.Uri,i=n?e:e.uri,o=i.toString();r=n?r:e.version;let a=this.openRequests.get(o),u=n?this.documentStates.track(tr.document,e,r):this.documentStates.track(tr.document,e);if(a===void 0){let c=new et.CancellationTokenSource;this.openRequests.set(o,{state:br.active,document:e,version:r,tokenSource:c});let d,f;try{d=await this.provider.provideDiagnostics(e,u.resultId,c.token)??{kind:hn.DocumentDiagnosticReportKind.full,items:[]}}catch(y){if(y instanceof np.LSPCancellationError&&Ut.DiagnosticServerCancellationData.is(y.data)&&y.data.retriggerRequest===!1&&(f={state:br.outDated,document:e}),f===void 0&&y instanceof et.CancellationError)f={state:br.reschedule,document:e};else throw y}if(f=f??this.openRequests.get(o),f===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${o}`),this.diagnostics.delete(i);return}if(this.openRequests.delete(o),!this.tabs.isVisible(e)){this.documentStates.unTrack(tr.document,e);return}if(f.state===br.outDated)return;d!==void 0&&(d.kind===hn.DocumentDiagnosticReportKind.full&&this.diagnostics.set(i,d.items),u.pulledVersion=r,u.resultId=d.resultId),f.state===br.reschedule&&this.pull(e)}else a.state===br.active?(a.tokenSource.cancel(),this.openRequests.set(o,{state:br.reschedule,document:a.document})):a.state===br.outDated&&this.openRequests.set(o,{state:br.reschedule,document:a.document})}forgetDocument(e){let r=e instanceof et.Uri?e:e.uri,n=r.toString(),i=this.openRequests.get(n);this.options.workspaceDiagnostics?i!==void 0?this.openRequests.set(n,{state:br.reschedule,document:e}):this.pull(e,()=>{this.forget(tr.document,e)}):(i!==void 0&&(i.state===br.active&&i.tokenSource.cancel(),this.openRequests.set(n,{state:br.outDated,document:e})),this.diagnostics.delete(r),this.forget(tr.document,e))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,Ut.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},e=>{!(e instanceof np.LSPCancellationError)&&!Ut.DiagnosticServerCancellationData.is(e.data)&&(this.client.error("Workspace diagnostic pull failed.",e,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,Ut.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new et.CancellationTokenSource;let e=this.documentStates.getAllResultIds().map(r=>({uri:this.client.protocol2CodeConverter.asUri(r.uri),value:r.value}));await this.provider.provideWorkspaceDiagnostics(e,this.workspaceCancellation.token,r=>{if(!(!r||this.isDisposed))for(let n of r.items)n.kind===hn.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(tr.document,n.uri)||this.diagnostics.set(n.uri,n.items)),this.documentStates.update(tr.workspace,n.uri,n.version??void 0,n.resultId)})}createProvider(){let e={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(r,n,i)=>{let o=(u,c,d)=>{let f={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(u instanceof et.Uri?u:u.uri)},previousResultId:c};return this.isDisposed===!0||!this.client.isRunning()?{kind:hn.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(Ut.DocumentDiagnosticRequest.type,f,d).then(async y=>y==null||this.isDisposed||d.isCancellationRequested?{kind:hn.DocumentDiagnosticReportKind.full,items:[]}:y.kind===Ut.DocumentDiagnosticReportKind.Full?{kind:hn.DocumentDiagnosticReportKind.full,resultId:y.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(y.items,d)}:{kind:hn.DocumentDiagnosticReportKind.unChanged,resultId:y.resultId},y=>this.client.handleFailedRequest(Ut.DocumentDiagnosticRequest.type,d,y,{kind:hn.DocumentDiagnosticReportKind.full,items:[]}))},a=this.client.middleware;return a.provideDiagnostics?a.provideDiagnostics(r,n,i,o):o(r,n,i)}};return this.options.workspaceDiagnostics&&(e.provideWorkspaceDiagnostics=(r,n,i)=>{let o=async d=>d.kind===Ut.DocumentDiagnosticReportKind.Full?{kind:hn.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(d.uri),resultId:d.resultId,version:d.version,items:await this.client.protocol2CodeConverter.asDiagnostics(d.items,n)}:{kind:hn.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(d.uri),resultId:d.resultId,version:d.version},a=d=>{let f=[];for(let y of d)f.push({uri:this.client.code2ProtocolConverter.asUri(y.uri),value:y.value});return f},u=(d,f)=>{let y=(0,ZF.generateUuid)(),g=this.client.onProgress(Ut.WorkspaceDiagnosticRequest.partialResult,y,async h=>{if(h==null){i(null);return}let S={items:[]};for(let R of h.items)try{S.items.push(await o(R))}catch(D){this.client.error("Converting workspace diagnostics failed.",D)}i(S)}),m={identifier:this.options.identifier,previousResultIds:a(d),partialResultToken:y};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(Ut.WorkspaceDiagnosticRequest.type,m,f).then(async h=>{if(f.isCancellationRequested)return{items:[]};let S={items:[]};for(let R of h.items)S.items.push(await o(R));return g.dispose(),i(S),{items:[]}},h=>(g.dispose(),this.client.handleFailedRequest(Ut.DocumentDiagnosticRequest.type,f,h,{items:[]})))},c=this.client.middleware;return c.provideWorkspaceDiagnostics?c.provideWorkspaceDiagnostics(r,n,i,u):u(r,n,i)}),e}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(let[e,r]of this.openRequests)r.state===br.active&&r.tokenSource.cancel(),this.openRequests.set(e,{state:br.outDated,document:r.document});this.diagnostics.dispose()}},ap=class{constructor(e){this.diagnosticRequestor=e,this.documents=new Ut.LinkedMap,this.isDisposed=!1}add(e){if(this.isDisposed===!0)return;let r=Gn.asKey(e);this.documents.has(r)||(this.documents.set(r,e,Ut.Touch.Last),this.trigger())}remove(e){let r=Gn.asKey(e);this.documents.delete(r),this.documents.size===0?this.stop():r===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,Ut.RAL)().timer.setInterval(()=>{let e=this.documents.first;if(e!==void 0){let r=Gn.asKey(e);this.diagnosticRequestor.pull(e),this.documents.set(r,e,Ut.Touch.Last),r===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?Gn.asKey(this.endDocument):void 0}},up=class{constructor(e,r,n){let i=e.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},o=e.protocol2CodeConverter.asDocumentSelector(n.documentSelector),a=[],u=h=>{let S=n.documentSelector;if(i.match!==void 0)return i.match(S,h);for(let R of S)if(Ut.TextDocumentFilter.is(R)){if(typeof R=="string"||R.language!==void 0&&R.language!=="*"||R.scheme!==void 0&&R.scheme!=="*"&&R.scheme!==h.scheme)return!1;if(R.pattern!==void 0){let D=new JF.Minimatch(R.pattern,{noext:!0});if(!D.makeRe()||!D.match(h.fsPath))return!1}}return!0},c=h=>h instanceof et.Uri?u(h):et.languages.match(o,h)>0&&r.isVisible(h),d=h=>h instanceof et.Uri?this.activeTextDocument?.uri.toString()===h.toString():this.activeTextDocument===h;this.diagnosticRequestor=new sp(e,r,n),this.backgroundScheduler=new ap(this.diagnosticRequestor);let f=h=>{!c(h)||!n.interFileDependencies||d(h)||this.backgroundScheduler.add(h)};this.activeTextDocument=et.window.activeTextEditor?.document,et.window.onDidChangeActiveTextEditor(h=>{let S=this.activeTextDocument;this.activeTextDocument=h?.document,S!==void 0&&f(S),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});let y=e.getFeature(Ut.DidOpenTextDocumentNotification.method);a.push(y.onNotificationSent(h=>{let S=h.textDocument;this.diagnosticRequestor.knows(tr.document,S)||c(S)&&this.diagnosticRequestor.pull(S,()=>{f(S)})})),a.push(r.onOpen(h=>{for(let S of h){if(this.diagnosticRequestor.knows(tr.document,S))continue;let R=S.toString(),D;for(let I of et.workspace.textDocuments)if(R===I.uri.toString()){D=I;break}D!==void 0&&c(D)&&this.diagnosticRequestor.pull(D,()=>{f(D)})}}));let g=new Set;for(let h of et.workspace.textDocuments)c(h)&&(this.diagnosticRequestor.pull(h,()=>{f(h)}),g.add(h.uri.toString()));if(i.onTabs===!0)for(let h of r.getTabResources())!g.has(h.toString())&&c(h)&&this.diagnosticRequestor.pull(h,()=>{f(h)});if(i.onChange===!0){let h=e.getFeature(Ut.DidChangeTextDocumentNotification.method);a.push(h.onNotificationSent(async S=>{let R=S.textDocument;(i.filter===void 0||!i.filter(R,Ec.onType))&&this.diagnosticRequestor.knows(tr.document,R)&&this.diagnosticRequestor.pull(R,()=>{this.backgroundScheduler.trigger()})}))}if(i.onSave===!0){let h=e.getFeature(Ut.DidSaveTextDocumentNotification.method);a.push(h.onNotificationSent(S=>{let R=S.textDocument;(i.filter===void 0||!i.filter(R,Ec.onSave))&&this.diagnosticRequestor.knows(tr.document,R)&&this.diagnosticRequestor.pull(S.textDocument,()=>{this.backgroundScheduler.trigger()})}))}let m=e.getFeature(Ut.DidCloseTextDocumentNotification.method);a.push(m.onNotificationSent(h=>{this.cleanUpDocument(h.textDocument)})),r.onClose(h=>{for(let S of h)this.cleanUpDocument(S)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(let h of et.workspace.textDocuments)c(h)&&this.diagnosticRequestor.pull(h)}),n.workspaceDiagnostics===!0&&n.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=et.Disposable.from(...a,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(e){this.diagnosticRequestor.knows(tr.document,e)&&(this.diagnosticRequestor.forgetDocument(e),this.backgroundScheduler.remove(e))}},cp=class extends np.TextDocumentLanguageFeature{constructor(e){super(e,Ut.DocumentDiagnosticRequest.type)}fillClientCapabilities(e){let r=Dc(Dc(e,"textDocument"),"diagnostic");r.dynamicRegistration=!0,r.relatedDocumentSupport=!1,Dc(Dc(e,"workspace"),"diagnostics").refreshSupport=!0}initialize(e,r){this._client.onRequest(Ut.DiagnosticRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeDiagnosticsEmitter.fire()});let[i,o]=this.getRegistration(r,e.diagnosticProvider);!i||!o||this.register({id:i,registerOptions:o})}clear(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.clear()}registerLanguageProvider(e){this.tabs===void 0&&(this.tabs=new ip);let r=new up(this._client,this.tabs,e);return[r.disposable,r]}};Ti.DiagnosticFeature=cp});var HS=q(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.NotebookDocumentSyncFeature=void 0;var wr=require("vscode"),eO=Tc(),Qn=We(),tO=xt(),$S=un();function WS(t,e){return t[e]===void 0&&(t[e]={}),t[e]}var Zo;(function(t){let e;(function(r){function n(g,m){return{version:g.version,uri:m.asUri(g.uri)}}r.asVersionedNotebookDocumentIdentifier=n;function i(g,m,h){let S=Qn.NotebookDocument.create(h.asUri(g.uri),g.notebookType,g.version,o(m,h));return Object.keys(g.metadata).length>0&&(S.metadata=a(g.metadata)),S}r.asNotebookDocument=i;function o(g,m){return g.map(h=>u(h,m))}r.asNotebookCells=o;function a(g){return d(new Set,g)}r.asMetadata=a;function u(g,m){let h=Qn.NotebookCell.create(c(g.kind),m.asUri(g.document.uri));return Object.keys(g.metadata).length>0&&(h.metadata=a(g.metadata)),g.executionSummary!==void 0&&$S.number(g.executionSummary.executionOrder)&&$S.boolean(g.executionSummary.success)&&(h.executionSummary={executionOrder:g.executionSummary.executionOrder,success:g.executionSummary.success}),h}r.asNotebookCell=u;function c(g){switch(g){case wr.NotebookCellKind.Markup:return Qn.NotebookCellKind.Markup;case wr.NotebookCellKind.Code:return Qn.NotebookCellKind.Code}}function d(g,m){if(g.has(m))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(m)){let h=[];for(let S of m)if(S!==null&&typeof S=="object"||Array.isArray(S))h.push(d(g,S));else{if(S instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");h.push(S)}return h}else{let h=Object.keys(m),S=Object.create(null);for(let R of h){let D=m[R];if(D!==null&&typeof D=="object"||Array.isArray(D))S[R]=d(g,D);else{if(D instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");S[R]=D}}return S}}function f(g,m){let h=m.asChangeTextDocumentParams(g,g.document.uri,g.document.version);return{document:h.textDocument,changes:h.contentChanges}}r.asTextContentChange=f;function y(g,m){let h=Object.create(null);if(g.metadata&&(h.metadata=t.c2p.asMetadata(g.metadata)),g.cells!==void 0){let S=Object.create(null),R=g.cells;R.structure&&(S.structure={array:{start:R.structure.array.start,deleteCount:R.structure.array.deleteCount,cells:R.structure.array.cells!==void 0?R.structure.array.cells.map(D=>t.c2p.asNotebookCell(D,m)):void 0},didOpen:R.structure.didOpen!==void 0?R.structure.didOpen.map(D=>m.asOpenTextDocumentParams(D.document).textDocument):void 0,didClose:R.structure.didClose!==void 0?R.structure.didClose.map(D=>m.asCloseTextDocumentParams(D.document).textDocument):void 0}),R.data!==void 0&&(S.data=R.data.map(D=>t.c2p.asNotebookCell(D,m))),R.textContent!==void 0&&(S.textContent=R.textContent.map(D=>t.c2p.asTextContentChange(D,m))),Object.keys(S).length>0&&(h.cells=S)}return h}r.asNotebookDocumentChangeEvent=y})(e=t.c2p||(t.c2p={}))})(Zo||(Zo={}));var dp;(function(t){function e(u,c,d){let f=u.length,y=c.length,g=0;for(;g<y&&g<f&&r(u[g],c[g],d);)g++;if(g<y&&g<f){let m=f-1,h=y-1;for(;m>=0&&h>=0&&r(u[m],c[h],d);)m--,h--;let S=m+1-g,R=g===h+1?void 0:c.slice(g,h+1);return R!==void 0?{start:g,deleteCount:S,cells:R}:{start:g,deleteCount:S}}else return g<y?{start:g,deleteCount:0,cells:c.slice(g)}:g<f?{start:g,deleteCount:f-g}:void 0}t.computeDiff=e;function r(u,c,d=!0){return u.kind!==c.kind||u.document.uri.toString()!==c.document.uri.toString()||u.document.languageId!==c.document.languageId||!n(u.executionSummary,c.executionSummary)?!1:!d||d&&o(u.metadata,c.metadata)}function n(u,c){return u===c?!0:u===void 0||c===void 0?!1:u.executionOrder===c.executionOrder&&u.success===c.success&&i(u.timing,c.timing)}function i(u,c){return u===c?!0:u===void 0||c===void 0?!1:u.startTime===c.startTime&&u.endTime===c.endTime}function o(u,c){if(u===c)return!0;if(u==null||c===null||c===void 0||typeof u!=typeof c||typeof u!="object")return!1;let d=Array.isArray(u),f=Array.isArray(c);if(d!==f)return!1;if(d&&f){if(u.length!==c.length)return!1;for(let y=0;y<u.length;y++)if(!o(u[y],c[y]))return!1}if(a(u)&&a(c)){let y=Object.keys(u),g=Object.keys(c);if(y.length!==g.length||(y.sort(),g.sort(),!o(y,g)))return!1;for(let m=0;m<y.length;m++){let h=y[m];if(!o(u[h],c[h]))return!1}return!0}return!1}function a(u){return u!==null&&typeof u=="object"}t.isObjectLiteral=a})(dp||(dp={}));var fp;(function(t){function e(r,n){if(typeof r=="string")return r==="*"||n.notebookType===r;if(r.notebookType!==void 0&&r.notebookType!=="*"&&n.notebookType!==r.notebookType)return!1;let i=n.uri;if(r.scheme!==void 0&&r.scheme!=="*"&&i.scheme!==r.scheme)return!1;if(r.pattern!==void 0){let o=new eO.Minimatch(r.pattern,{noext:!0});if(!o.makeRe()||!o.match(i.fsPath))return!1}return!0}t.matchNotebook=e})(fp||(fp={}));var Pc;(function(t){function e(n){let i=n.notebookSelector,o=[];for(let a of i){let u=(typeof a.notebook=="string"?a.notebook:a.notebook?.notebookType)??"*",c=typeof a.notebook=="string"?void 0:a.notebook?.scheme,d=typeof a.notebook=="string"?void 0:a.notebook?.pattern;if(a.cells!==void 0)for(let f of a.cells)o.push(r(u,c,d,f.language));else o.push(r(u,c,d,void 0))}return o}t.asDocumentSelector=e;function r(n,i,o,a){return i===void 0&&o===void 0?{notebook:n,language:a}:{notebook:{notebookType:n,scheme:i,pattern:o},language:a}}})(Pc||(Pc={}));var kc;(function(t){function e(r){return{cells:r,uris:new Set(r.map(n=>n.document.uri.toString()))}}t.create=e})(kc||(kc={}));var es=class{constructor(e,r){this.client=e,this.options=r,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=e.protocol2CodeConverter.asDocumentSelector(Pc.asDocumentSelector(r)),wr.workspace.onDidOpenNotebookDocument(n=>{this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n)},void 0,this.disposables);for(let n of wr.workspace.notebookDocuments)this.notebookDidOpen.add(n.uri.toString()),this.didOpen(n);wr.workspace.onDidChangeNotebookDocument(n=>this.didChangeNotebookDocument(n),void 0,this.disposables),this.options.save===!0&&wr.workspace.onDidSaveNotebookDocument(n=>this.didSave(n),void 0,this.disposables),wr.workspace.onDidCloseNotebookDocument(n=>{this.didClose(n),this.notebookDidOpen.delete(n.uri.toString())},void 0,this.disposables)}getState(){for(let e of wr.workspace.notebookDocuments)if(this.getMatchingCells(e)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(e){return wr.languages.match(this.selector,e)>0}didOpenNotebookCellTextDocument(e,r){if(wr.languages.match(this.selector,r.document)===0||!this.notebookDidOpen.has(e.uri.toString()))return;let n=this.notebookSyncInfo.get(e.uri.toString()),i=this.cellMatches(e,r);if(n!==void 0){let o=n.uris.has(r.document.uri.toString());if(i&&o||!i&&!o)return;if(i){let a=this.getMatchingCells(e);if(a!==void 0){let u=this.asNotebookDocumentChangeEvent(e,void 0,n,a);u!==void 0&&this.doSendChange(u,a).catch(()=>{})}}}else i&&this.doSendOpen(e,[r]).catch(()=>{})}didChangeNotebookCellTextDocument(e,r){wr.languages.match(this.selector,r.document)!==0&&this.doSendChange({notebook:e,cells:{textContent:[r]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(e,r){let n=this.notebookSyncInfo.get(e.uri.toString());if(n===void 0)return;let i=r.document.uri,o=n.cells.findIndex(a=>a.document.uri.toString()===i.toString());if(o!==-1)if(o===0&&n.cells.length===1)this.doSendClose(e,n.cells).catch(()=>{});else{let a=n.cells.slice(),u=a.splice(o,1);this.doSendChange({notebook:e,cells:{structure:{array:{start:o,deleteCount:1},didClose:u}}},a).catch(()=>{})}}dispose(){for(let e of this.disposables)e.dispose()}didOpen(e,r=this.getMatchingCells(e),n=this.notebookSyncInfo.get(e.uri.toString())){if(n!==void 0)if(r!==void 0){let i=this.asNotebookDocumentChangeEvent(e,void 0,n,r);i!==void 0&&this.doSendChange(i,r).catch(()=>{})}else this.doSendClose(e,[]).catch(()=>{});else{if(r===void 0)return;this.doSendOpen(e,r).catch(()=>{})}}didChangeNotebookDocument(e){let r=e.notebook,n=this.notebookSyncInfo.get(r.uri.toString());if(n===void 0){if(e.contentChanges.length===0)return;let i=this.getMatchingCells(r);if(i===void 0)return;this.didOpen(r,i,n)}else{let i=this.getMatchingCells(r);if(i===void 0){this.didClose(r,n);return}let o=this.asNotebookDocumentChangeEvent(e.notebook,e,n,i);o!==void 0&&this.doSendChange(o,i).catch(()=>{})}}didSave(e){this.notebookSyncInfo.get(e.uri.toString())!==void 0&&this.doSendSave(e).catch(()=>{})}didClose(e,r=this.notebookSyncInfo.get(e.uri.toString())){if(r===void 0)return;let n=e.getCells().filter(i=>r.uris.has(i.document.uri.toString()));this.doSendClose(e,n).catch(()=>{})}async sendDidOpenNotebookDocument(e){let r=this.getMatchingCells(e);if(r!==void 0)return this.doSendOpen(e,r)}async doSendOpen(e,r){let n=async(o,a)=>{let u=Zo.c2p.asNotebookDocument(o,a,this.client.code2ProtocolConverter),c=a.map(d=>this.client.code2ProtocolConverter.asTextDocumentItem(d.document));try{await this.client.sendNotification(Qn.DidOpenNotebookDocumentNotification.type,{notebookDocument:u,cellTextDocuments:c})}catch(d){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",d),d}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(e.uri.toString(),kc.create(r)),i?.didOpen!==void 0?i.didOpen(e,r,n):n(e,r)}async sendDidChangeNotebookDocument(e){return this.doSendChange(e,void 0)}async doSendChange(e,r=this.getMatchingCells(e.notebook)){let n=async o=>{try{await this.client.sendNotification(Qn.DidChangeNotebookDocumentNotification.type,{notebookDocument:Zo.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:Zo.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(a){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",a),a}},i=this.client.middleware?.notebooks;return e.cells?.structure!==void 0&&this.notebookSyncInfo.set(e.notebook.uri.toString(),kc.create(r??[])),i?.didChange!==void 0?i?.didChange(e,n):n(e)}async sendDidSaveNotebookDocument(e){return this.doSendSave(e)}async doSendSave(e){let r=async i=>{try{await this.client.sendNotification(Qn.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(i.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},n=this.client.middleware?.notebooks;return n?.didSave!==void 0?n.didSave(e,r):r(e)}async sendDidCloseNotebookDocument(e){return this.doSendClose(e,this.getMatchingCells(e)??[])}async doSendClose(e,r){let n=async(o,a)=>{try{await this.client.sendNotification(Qn.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:a.map(u=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(u.document))})}catch(u){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",u),u}},i=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(e.uri.toString()),i?.didClose!==void 0?i.didClose(e,r,n):n(e,r)}asNotebookDocumentChangeEvent(e,r,n,i){if(r!==void 0&&r.notebook!==e)throw new Error("Notebook must be identical");let o={notebook:e};r?.metadata!==void 0&&(o.metadata=Zo.c2p.asMetadata(r.metadata));let a;if(r?.cellChanges!==void 0&&r.cellChanges.length>0){let u=[];a=new Set(i.map(c=>c.document.uri.toString()));for(let c of r.cellChanges)a.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&u.push(c.cell);u.length>0&&(o.cells=o.cells??{},o.cells.data=u)}if((r?.contentChanges!==void 0&&r.contentChanges.length>0||r===void 0)&&n!==void 0&&i!==void 0){let u=n.cells,c=i,d=dp.computeDiff(u,c,!1),f,y;if(d!==void 0){f=d.cells===void 0?new Map:new Map(d.cells.map(h=>[h.document.uri.toString(),h])),y=d.deleteCount===0?new Map:new Map(u.slice(d.start,d.start+d.deleteCount).map(h=>[h.document.uri.toString(),h]));for(let h of Array.from(y.keys()))f.has(h)&&(y.delete(h),f.delete(h));o.cells=o.cells??{};let g=[],m=[];if(f.size>0||y.size>0){for(let h of f.values())g.push(h);for(let h of y.values())m.push(h)}o.cells.structure={array:d,didOpen:g,didClose:m}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(e,r=e.getCells()){if(this.options.notebookSelector!==void 0){for(let n of this.options.notebookSelector)if(n.notebook===void 0||fp.matchNotebook(n.notebook,e)){let i=this.filterCells(e,r,n.cells);return i.length===0?void 0:i}}}cellMatches(e,r){let n=this.getMatchingCells(e,[r]);return n!==void 0&&n[0]===r}filterCells(e,r,n){let i=n!==void 0?r.filter(o=>{let a=o.document.languageId;return n.some(u=>u.language==="*"||a===u.language)}):r;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(e,i):i}},qc=class t{constructor(e){this.client=e,this.registrations=new Map,this.registrationType=Qn.NotebookDocumentSyncRegistrationType.type,wr.workspace.onDidOpenTextDocument(r=>{if(r.uri.scheme!==t.CellScheme)return;let[n,i]=this.findNotebookDocumentAndCell(r);if(!(n===void 0||i===void 0))for(let o of this.registrations.values())o instanceof es&&o.didOpenNotebookCellTextDocument(n,i)}),wr.workspace.onDidChangeTextDocument(r=>{if(r.contentChanges.length===0)return;let n=r.document;if(n.uri.scheme!==t.CellScheme)return;let[i]=this.findNotebookDocumentAndCell(n);if(i!==void 0)for(let o of this.registrations.values())o instanceof es&&o.didChangeNotebookCellTextDocument(i,r)}),wr.workspace.onDidCloseTextDocument(r=>{if(r.uri.scheme!==t.CellScheme)return;let[n,i]=this.findNotebookDocumentAndCell(r);if(!(n===void 0||i===void 0))for(let o of this.registrations.values())o instanceof es&&o.didCloseNotebookCellTextDocument(n,i)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(let e of this.registrations.values()){let r=e.getState();if(r.kind==="document"&&r.registrations===!0&&r.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(e){let r=WS(WS(e,"notebookDocument"),"synchronization");r.dynamicRegistration=!0,r.executionSummarySupport=!0}preInitialize(e){let r=e.notebookDocumentSync;r!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Pc.asDocumentSelector(r)))}initialize(e){let r=e.notebookDocumentSync;if(r===void 0)return;let n=r.id??tO.generateUuid();this.register({id:n,registerOptions:r})}register(e){let r=new es(this.client,e.registerOptions);this.registrations.set(e.id,r)}unregister(e){let r=this.registrations.get(e);r&&r.dispose()}clear(){for(let e of this.registrations.values())e.dispose();this.registrations.clear()}handles(e){if(e.uri.scheme!==t.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&wr.languages.match(this.dedicatedChannel,e)>0)return!0;for(let r of this.registrations.values())if(r.handles(e))return!0;return!1}getProvider(e){for(let r of this.registrations.values())if(r.handles(e.document))return r}findNotebookDocumentAndCell(e){let r=e.uri.toString();for(let n of wr.workspace.notebookDocuments)for(let i of n.getCells())if(i.document.uri.toString()===r)return[n,i];return[void 0,void 0]}};xc.NotebookDocumentSyncFeature=qc;qc.CellScheme="vscode-notebook-cell"});var BS=q(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.SyncConfigurationFeature=Di.toJSONObject=Di.ConfigurationFeature=void 0;var ts=require("vscode"),ta=We(),rO=un(),nO=xt(),US=ot(),hp=class{constructor(e){this._client=e}getState(){return{kind:"static"}}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.configuration=!0}initialize(){let e=this._client;e.onRequest(ta.ConfigurationRequest.type,(r,n)=>{let i=a=>{let u=[];for(let c of a.items){let d=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;u.push(this.getConfiguration(d,c.section!==null?c.section:void 0))}return u},o=e.middleware.workspace;return o&&o.configuration?o.configuration(r,n,i):i(r,n)})}getConfiguration(e,r){let n=null;if(r){let i=r.lastIndexOf(".");if(i===-1)n=Ji(ts.workspace.getConfiguration(void 0,e).get(r));else{let o=ts.workspace.getConfiguration(r.substr(0,i),e);o&&(n=Ji(o.get(r.substr(i+1))))}}else{let i=ts.workspace.getConfiguration(void 0,e);n={};for(let o of Object.keys(i))i.has(o)&&(n[o]=Ji(i.get(o)))}return n===void 0&&(n=null),n}clear(){}};Di.ConfigurationFeature=hp;function Ji(t){if(t){if(Array.isArray(t))return t.map(Ji);if(typeof t=="object"){let e=Object.create(null);for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=Ji(t[r]));return e}}return t}Di.toJSONObject=Ji;var pp=class{constructor(e){this._client=e,this.isCleared=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ta.DidChangeConfigurationNotification.type}fillClientCapabilities(e){(0,US.ensure)((0,US.ensure)(e,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){this.isCleared=!1;let e=this._client.clientOptions.synchronize?.configurationSection;e!==void 0&&this.register({id:nO.generateUuid(),registerOptions:{section:e}})}register(e){let r=ts.workspace.onDidChangeConfiguration(n=>{this.onDidChangeConfiguration(e.registerOptions.section,n)});this._listeners.set(e.id,r),e.registerOptions.section!==void 0&&this.onDidChangeConfiguration(e.registerOptions.section,void 0)}unregister(e){let r=this._listeners.get(e);r&&(this._listeners.delete(e),r.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear(),this.isCleared=!0}onDidChangeConfiguration(e,r){if(this.isCleared)return;let n;if(rO.string(e)?n=[e]:n=e,n!==void 0&&r!==void 0&&!n.some(u=>r.affectsConfiguration(u)))return;let i=async a=>a===void 0?this._client.sendNotification(ta.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(ta.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(a)}),o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(n,i):i(n)).catch(a=>{this._client.error(`Sending notification ${ta.DidChangeConfigurationNotification.type.method} failed`,a)})}extractSettingsInformation(e){function r(o,a){let u=o;for(let c=0;c<a.length-1;c++){let d=u[a[c]];d||(d=Object.create(null),u[a[c]]=d),u=d}return u}let n=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,i=Object.create(null);for(let o=0;o<e.length;o++){let a=e[o],u=a.indexOf("."),c=null;if(u>=0?c=ts.workspace.getConfiguration(a.substr(0,u),n).get(a.substr(u+1)):c=ts.workspace.getConfiguration(void 0,n).get(a),c){let d=e[o].split(".");r(i,d)[d[d.length-1]]=Ji(c)}}return i}};Di.SyncConfigurationFeature=pp});var zS=q(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.DidSaveTextDocumentFeature=Hr.WillSaveWaitUntilFeature=Hr.WillSaveFeature=Hr.DidChangeTextDocumentFeature=Hr.DidCloseTextDocumentFeature=Hr.DidOpenTextDocumentFeature=void 0;var Jr=require("vscode"),bt=We(),At=ot(),rs=xt(),gp=class extends At.TextDocumentEventFeature{constructor(e,r){super(e,Jr.workspace.onDidOpenTextDocument,bt.DidOpenTextDocumentNotification.type,()=>e.middleware.didOpen,n=>e.code2ProtocolConverter.asOpenTextDocumentParams(n),n=>n,At.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=r}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:rs.generateUuid(),registerOptions:{documentSelector:r}})}get registrationType(){return bt.DidOpenTextDocumentNotification.type}register(e){if(super.register(e),!e.registerOptions.documentSelector)return;let r=this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector);Jr.workspace.textDocuments.forEach(n=>{let i=n.uri.toString();if(!this._syncedDocuments.has(i)&&Jr.languages.match(r,n)>0&&!this._client.hasDedicatedTextSynchronizationFeature(n)){let o=this._client.middleware,a=u=>this._client.sendNotification(this._type,this._createParams(u));(o.didOpen?o.didOpen(n,a):a(n)).catch(u=>{this._client.error(`Sending document notification ${this._type.method} failed`,u)}),this._syncedDocuments.set(i,n)}})}getTextDocument(e){return e}notificationSent(e,r,n){this._syncedDocuments.set(e.uri.toString(),e),super.notificationSent(e,r,n)}};Hr.DidOpenTextDocumentFeature=gp;var mp=class extends At.TextDocumentEventFeature{constructor(e,r,n){super(e,Jr.workspace.onDidCloseTextDocument,bt.DidCloseTextDocumentNotification.type,()=>e.middleware.didClose,i=>e.code2ProtocolConverter.asCloseTextDocumentParams(i),i=>i,At.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=r,this._pendingTextDocumentChanges=n}get registrationType(){return bt.DidCloseTextDocumentNotification.type}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.openClose&&this.register({id:rs.generateUuid(),registerOptions:{documentSelector:r}})}async callback(e){await super.callback(e),this._pendingTextDocumentChanges.delete(e.uri.toString())}getTextDocument(e){return e}notificationSent(e,r,n){this._syncedDocuments.delete(e.uri.toString()),super.notificationSent(e,r,n)}unregister(e){let r=this._selectors.get(e);super.unregister(e);let n=this._selectors.values();this._syncedDocuments.forEach(i=>{if(Jr.languages.match(r,i)>0&&!this._selectorFilter(n,i)&&!this._client.hasDedicatedTextSynchronizationFeature(i)){let o=this._client.middleware,a=u=>this._client.sendNotification(this._type,this._createParams(u));this._syncedDocuments.delete(i.uri.toString()),(o.didClose?o.didClose(i,a):a(i)).catch(u=>{this._client.error(`Sending document notification ${this._type.method} failed`,u)})}})}};Hr.DidCloseTextDocumentFeature=mp;var yp=class extends At.DynamicDocumentFeature{constructor(e,r){super(e),this._changeData=new Map,this._onNotificationSent=new Jr.EventEmitter,this._onPendingChangeAdded=new Jr.EventEmitter,this._pendingTextDocumentChanges=r,this._syncKind=bt.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return bt.DidChangeTextDocumentNotification.type}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.change!==void 0&&n.change!==bt.TextDocumentSyncKind.None&&this.register({id:rs.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},{syncKind:n.change})})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Jr.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(e.id,{syncKind:e.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)}),this.updateSyncKind(e.registerOptions.syncKind))}*getDocumentSelectors(){for(let e of this._changeData.values())yield e.documentSelector}async callback(e){if(e.contentChanges.length===0)return;let r=e.document.uri,n=e.document.version,i=[];for(let o of this._changeData.values())if(Jr.languages.match(o.documentSelector,e.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let a=this._client.middleware;if(o.syncKind===bt.TextDocumentSyncKind.Incremental){let u=async c=>{let d=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,r,n);await this._client.sendNotification(bt.DidChangeTextDocumentNotification.type,d),this.notificationSent(c.document,bt.DidChangeTextDocumentNotification.type,d)};i.push(a.didChange?a.didChange(e,c=>u(c)):u(e))}else if(o.syncKind===bt.TextDocumentSyncKind.Full){let u=async c=>{let d=c.document.uri.toString();this._pendingTextDocumentChanges.set(d,c.document),this._onPendingChangeAdded.fire()};i.push(a.didChange?a.didChange(e,c=>u(c)):u(e))}}return Promise.all(i).then(void 0,o=>{throw this._client.error(`Sending document notification ${bt.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(e,r,n){this._onNotificationSent.fire({textDocument:e,type:r,params:n})}unregister(e){if(this._changeData.delete(e),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=bt.TextDocumentSyncKind.None;else{this._syncKind=bt.TextDocumentSyncKind.None;for(let r of this._changeData.values())if(this.updateSyncKind(r.syncKind),this._syncKind===bt.TextDocumentSyncKind.Full)break}}clear(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=bt.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(e){if(this._pendingTextDocumentChanges.size===0)return[];let r;if(e.size===0)r=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{r=[];for(let n of this._pendingTextDocumentChanges)e.has(n[0])||(r.push(n[1]),this._pendingTextDocumentChanges.delete(n[0]))}return r}getProvider(e){for(let r of this._changeData.values())if(Jr.languages.match(r.documentSelector,e)>0)return{send:n=>this.callback(n)}}updateSyncKind(e){if(this._syncKind!==bt.TextDocumentSyncKind.Full)switch(e){case bt.TextDocumentSyncKind.Full:this._syncKind=e;break;case bt.TextDocumentSyncKind.Incremental:this._syncKind===bt.TextDocumentSyncKind.None&&(this._syncKind=bt.TextDocumentSyncKind.Incremental);break}}};Hr.DidChangeTextDocumentFeature=yp;var vp=class extends At.TextDocumentEventFeature{constructor(e){super(e,Jr.workspace.onWillSaveTextDocument,bt.WillSaveTextDocumentNotification.type,()=>e.middleware.willSave,r=>e.code2ProtocolConverter.asWillSaveTextDocumentParams(r),r=>r.document,(r,n)=>At.TextDocumentEventFeature.textDocumentFilter(r,n.document))}get registrationType(){return bt.WillSaveTextDocumentNotification.type}fillClientCapabilities(e){let r=(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization");r.willSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSave&&this.register({id:rs.generateUuid(),registerOptions:{documentSelector:r}})}getTextDocument(e){return e.document}};Hr.WillSaveFeature=vp;var _p=class extends At.DynamicDocumentFeature{constructor(e){super(e),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return bt.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(e){let r=(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization");r.willSaveWaitUntil=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;r&&n&&n.willSaveWaitUntil&&this.register({id:rs.generateUuid(),registerOptions:{documentSelector:r}})}register(e){e.registerOptions.documentSelector&&(this._listener||(this._listener=Jr.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(e.id,this._client.protocol2CodeConverter.asDocumentSelector(e.registerOptions.documentSelector)))}callback(e){if(At.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),e.document)&&!this._client.hasDedicatedTextSynchronizationFeature(e.document)){let r=this._client.middleware,n=i=>this._client.sendRequest(bt.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(i)).then(async o=>{let a=await this._client.protocol2CodeConverter.asTextEdits(o);return a===void 0?[]:a});e.waitUntil(r.willSaveWaitUntil?r.willSaveWaitUntil(e,n):n(e))}}unregister(e){this._selectors.delete(e),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}};Hr.WillSaveWaitUntilFeature=_p;var bp=class extends At.TextDocumentEventFeature{constructor(e){super(e,Jr.workspace.onDidSaveTextDocument,bt.DidSaveTextDocumentNotification.type,()=>e.middleware.didSave,r=>e.code2ProtocolConverter.asSaveTextDocumentParams(r,this._includeText),r=>r,At.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return bt.DidSaveTextDocumentNotification.type}fillClientCapabilities(e){(0,At.ensure)((0,At.ensure)(e,"textDocument"),"synchronization").didSave=!0}initialize(e,r){let n=e.resolvedTextDocumentSync;if(r&&n&&n.save){let i=typeof n.save=="boolean"?{includeText:!1}:{includeText:!!n.save.includeText};this.register({id:rs.generateUuid(),registerOptions:Object.assign({},{documentSelector:r},i)})}}register(e){this._includeText=!!e.registerOptions.includeText,super.register(e)}getTextDocument(e){return e}};Hr.DidSaveTextDocumentFeature=bp});var KS=q(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.CompletionItemFeature=void 0;var iO=require("vscode"),tt=We(),wp=ot(),oO=xt(),sO=[tt.CompletionItemKind.Text,tt.CompletionItemKind.Method,tt.CompletionItemKind.Function,tt.CompletionItemKind.Constructor,tt.CompletionItemKind.Field,tt.CompletionItemKind.Variable,tt.CompletionItemKind.Class,tt.CompletionItemKind.Interface,tt.CompletionItemKind.Module,tt.CompletionItemKind.Property,tt.CompletionItemKind.Unit,tt.CompletionItemKind.Value,tt.CompletionItemKind.Enum,tt.CompletionItemKind.Keyword,tt.CompletionItemKind.Snippet,tt.CompletionItemKind.Color,tt.CompletionItemKind.File,tt.CompletionItemKind.Reference,tt.CompletionItemKind.Folder,tt.CompletionItemKind.EnumMember,tt.CompletionItemKind.Constant,tt.CompletionItemKind.Struct,tt.CompletionItemKind.Event,tt.CompletionItemKind.Operator,tt.CompletionItemKind.TypeParameter],Sp=class extends wp.TextDocumentLanguageFeature{constructor(e){super(e,tt.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(e){let r=(0,wp.ensure)((0,wp.ensure)(e,"textDocument"),"completion");r.dynamicRegistration=!0,r.contextSupport=!0,r.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[tt.MarkupKind.Markdown,tt.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[tt.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[tt.InsertTextMode.asIs,tt.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},r.insertTextMode=tt.InsertTextMode.adjustIndentation,r.completionItemKind={valueSet:sO},r.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode","data"]}}initialize(e,r){let n=this.getRegistrationOptions(r,e.completionProvider);n&&this.register({id:oO.generateUuid(),registerOptions:n})}registerLanguageProvider(e,r){this.labelDetailsSupport.set(r,!!e.completionItem?.labelDetailsSupport);let n=e.triggerCharacters??[],i=e.allCommitCharacters,o=e.documentSelector,a={provideCompletionItems:(u,c,d,f)=>{let y=this._client,g=this._client.middleware,m=(h,S,R,D)=>y.sendRequest(tt.CompletionRequest.type,y.code2ProtocolConverter.asCompletionParams(h,S,R),D).then(I=>D.isCancellationRequested?null:y.protocol2CodeConverter.asCompletionResult(I,i,D),I=>y.handleFailedRequest(tt.CompletionRequest.type,D,I,null));return g.provideCompletionItem?g.provideCompletionItem(u,c,f,d,m):m(u,c,f,d)},resolveCompletionItem:e.resolveProvider?(u,c)=>{let d=this._client,f=this._client.middleware,y=(g,m)=>d.sendRequest(tt.CompletionResolveRequest.type,d.code2ProtocolConverter.asCompletionItem(g,!!this.labelDetailsSupport.get(r)),m).then(h=>m.isCancellationRequested?null:d.protocol2CodeConverter.asCompletionItem(h),h=>d.handleFailedRequest(tt.CompletionResolveRequest.type,m,h,g));return f.resolveCompletionItem?f.resolveCompletionItem(u,c,y):y(u,c)}:void 0};return[iO.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),a,...n),a]}};Fc.CompletionItemFeature=Sp});var VS=q(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.HoverFeature=void 0;var aO=require("vscode"),ra=We(),Cp=ot(),uO=xt(),Rp=class extends Cp.TextDocumentLanguageFeature{constructor(e){super(e,ra.HoverRequest.type)}fillClientCapabilities(e){let r=(0,Cp.ensure)((0,Cp.ensure)(e,"textDocument"),"hover");r.dynamicRegistration=!0,r.contentFormat=[ra.MarkupKind.Markdown,ra.MarkupKind.PlainText]}initialize(e,r){let n=this.getRegistrationOptions(r,e.hoverProvider);n&&this.register({id:uO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideHover:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(ra.HoverRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asHover(m),m=>u.handleFailedRequest(ra.HoverRequest.type,g,m,null)),d=u.middleware;return d.provideHover?d.provideHover(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return aO.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Oc.HoverFeature=Rp});var GS=q(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.DefinitionFeature=void 0;var cO=require("vscode"),Tp=We(),Dp=ot(),lO=xt(),Ep=class extends Dp.TextDocumentLanguageFeature{constructor(e){super(e,Tp.DefinitionRequest.type)}fillClientCapabilities(e){let r=(0,Dp.ensure)((0,Dp.ensure)(e,"textDocument"),"definition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.definitionProvider);n&&this.register({id:lO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDefinition:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(Tp.DefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asDefinitionResult(m,g),m=>u.handleFailedRequest(Tp.DefinitionRequest.type,g,m,null)),d=u.middleware;return d.provideDefinition?d.provideDefinition(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return cO.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Ic.DefinitionFeature=Ep});var XS=q(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.SignatureHelpFeature=void 0;var QS=require("vscode"),na=We(),Pp=ot(),dO=xt(),kp=class extends Pp.TextDocumentLanguageFeature{constructor(e){super(e,na.SignatureHelpRequest.type)}fillClientCapabilities(e){let r=(0,Pp.ensure)((0,Pp.ensure)(e,"textDocument"),"signatureHelp");r.dynamicRegistration=!0,r.signatureInformation={documentationFormat:[na.MarkupKind.Markdown,na.MarkupKind.PlainText]},r.signatureInformation.parameterInformation={labelOffsetSupport:!0},r.signatureInformation.activeParameterSupport=!0,r.contextSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.signatureHelpProvider);n&&this.register({id:dO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r={provideSignatureHelp:(n,i,o,a)=>{let u=this._client,c=(f,y,g,m)=>u.sendRequest(na.SignatureHelpRequest.type,u.code2ProtocolConverter.asSignatureHelpParams(f,y,g),m).then(h=>m.isCancellationRequested?null:u.protocol2CodeConverter.asSignatureHelp(h,m),h=>u.handleFailedRequest(na.SignatureHelpRequest.type,m,h,null)),d=u.middleware;return d.provideSignatureHelp?d.provideSignatureHelp(n,i,a,o,c):c(n,i,a,o)}};return[this.registerProvider(e,r),r]}registerProvider(e,r){let n=this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector);if(e.retriggerCharacters===void 0){let i=e.triggerCharacters||[];return QS.languages.registerSignatureHelpProvider(n,r,...i)}else{let i={triggerCharacters:e.triggerCharacters||[],retriggerCharacters:e.retriggerCharacters||[]};return QS.languages.registerSignatureHelpProvider(n,r,i)}}};Ac.SignatureHelpFeature=kp});var YS=q(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.DocumentHighlightFeature=void 0;var fO=require("vscode"),qp=We(),xp=ot(),hO=xt(),Fp=class extends xp.TextDocumentLanguageFeature{constructor(e){super(e,qp.DocumentHighlightRequest.type)}fillClientCapabilities(e){(0,xp.ensure)((0,xp.ensure)(e,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentHighlightProvider);n&&this.register({id:hO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentHighlights:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(qp.DocumentHighlightRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asDocumentHighlights(m,g),m=>u.handleFailedRequest(qp.DocumentHighlightRequest.type,g,m,null)),d=u.middleware;return d.provideDocumentHighlights?d.provideDocumentHighlights(i,o,a,c):c(i,o,a)}};return[fO.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};Lc.DocumentHighlightFeature=Fp});var Ap=q(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.DocumentSymbolFeature=An.SupportedSymbolTags=An.SupportedSymbolKinds=void 0;var pO=require("vscode"),dt=We(),Op=ot(),gO=xt();An.SupportedSymbolKinds=[dt.SymbolKind.File,dt.SymbolKind.Module,dt.SymbolKind.Namespace,dt.SymbolKind.Package,dt.SymbolKind.Class,dt.SymbolKind.Method,dt.SymbolKind.Property,dt.SymbolKind.Field,dt.SymbolKind.Constructor,dt.SymbolKind.Enum,dt.SymbolKind.Interface,dt.SymbolKind.Function,dt.SymbolKind.Variable,dt.SymbolKind.Constant,dt.SymbolKind.String,dt.SymbolKind.Number,dt.SymbolKind.Boolean,dt.SymbolKind.Array,dt.SymbolKind.Object,dt.SymbolKind.Key,dt.SymbolKind.Null,dt.SymbolKind.EnumMember,dt.SymbolKind.Struct,dt.SymbolKind.Event,dt.SymbolKind.Operator,dt.SymbolKind.TypeParameter];An.SupportedSymbolTags=[dt.SymbolTag.Deprecated];var Ip=class extends Op.TextDocumentLanguageFeature{constructor(e){super(e,dt.DocumentSymbolRequest.type)}fillClientCapabilities(e){let r=(0,Op.ensure)((0,Op.ensure)(e,"textDocument"),"documentSymbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:An.SupportedSymbolKinds},r.hierarchicalDocumentSymbolSupport=!0,r.tagSupport={valueSet:An.SupportedSymbolTags},r.labelSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentSymbolProvider);n&&this.register({id:gO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentSymbols:(o,a)=>{let u=this._client,c=async(f,y)=>{try{let g=await u.sendRequest(dt.DocumentSymbolRequest.type,u.code2ProtocolConverter.asDocumentSymbolParams(f),y);if(y.isCancellationRequested||g===void 0||g===null)return null;if(g.length===0)return[];{let m=g[0];return dt.DocumentSymbol.is(m)?await u.protocol2CodeConverter.asDocumentSymbols(g,y):await u.protocol2CodeConverter.asSymbolInformations(g,y)}}catch(g){return u.handleFailedRequest(dt.DocumentSymbolRequest.type,y,g,null)}},d=u.middleware;return d.provideDocumentSymbols?d.provideDocumentSymbols(o,a,c):c(o,a)}},i=e.label!==void 0?{label:e.label}:void 0;return[pO.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n,i),n]}};An.DocumentSymbolFeature=Ip});var ZS=q(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.WorkspaceSymbolFeature=void 0;var mO=require("vscode"),ia=We(),Lp=ot(),JS=Ap(),yO=xt(),Np=class extends Lp.WorkspaceFeature{constructor(e){super(e,ia.WorkspaceSymbolRequest.type)}fillClientCapabilities(e){let r=(0,Lp.ensure)((0,Lp.ensure)(e,"workspace"),"symbol");r.dynamicRegistration=!0,r.symbolKind={valueSet:JS.SupportedSymbolKinds},r.tagSupport={valueSet:JS.SupportedSymbolTags},r.resolveSupport={properties:["location.range"]}}initialize(e){e.workspaceSymbolProvider&&this.register({id:yO.generateUuid(),registerOptions:e.workspaceSymbolProvider===!0?{workDoneProgress:!1}:e.workspaceSymbolProvider})}registerLanguageProvider(e){let r={provideWorkspaceSymbols:(n,i)=>{let o=this._client,a=(c,d)=>o.sendRequest(ia.WorkspaceSymbolRequest.type,{query:c},d).then(f=>d.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(f,d),f=>o.handleFailedRequest(ia.WorkspaceSymbolRequest.type,d,f,null)),u=o.middleware;return u.provideWorkspaceSymbols?u.provideWorkspaceSymbols(n,i,a):a(n,i)},resolveWorkspaceSymbol:e.resolveProvider===!0?(n,i)=>{let o=this._client,a=(c,d)=>o.sendRequest(ia.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),d).then(f=>d.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(f),f=>o.handleFailedRequest(ia.WorkspaceSymbolResolveRequest.type,d,f,null)),u=o.middleware;return u.resolveWorkspaceSymbol?u.resolveWorkspaceSymbol(n,i,a):a(n,i)}:void 0};return[mO.languages.registerWorkspaceSymbolProvider(r),r]}};Nc.WorkspaceSymbolFeature=Np});var eC=q(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.ReferencesFeature=void 0;var vO=require("vscode"),Mp=We(),jp=ot(),_O=xt(),$p=class extends jp.TextDocumentLanguageFeature{constructor(e){super(e,Mp.ReferencesRequest.type)}fillClientCapabilities(e){(0,jp.ensure)((0,jp.ensure)(e,"textDocument"),"references").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.referencesProvider);n&&this.register({id:_O.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideReferences:(i,o,a,u)=>{let c=this._client,d=(y,g,m,h)=>c.sendRequest(Mp.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(y,g,m),h).then(S=>h.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(S,h),S=>c.handleFailedRequest(Mp.ReferencesRequest.type,h,S,null)),f=c.middleware;return f.provideReferences?f.provideReferences(i,o,a,u,d):d(i,o,a,u)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return vO.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Mc.ReferencesFeature=$p});var tC=q(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.CodeActionFeature=void 0;var bO=require("vscode"),Zr=We(),wO=xt(),Wp=ot(),Hp=class extends Wp.TextDocumentLanguageFeature{constructor(e){super(e,Zr.CodeActionRequest.type)}fillClientCapabilities(e){let r=(0,Wp.ensure)((0,Wp.ensure)(e,"textDocument"),"codeAction");r.dynamicRegistration=!0,r.isPreferredSupport=!0,r.disabledSupport=!0,r.dataSupport=!0,r.resolveSupport={properties:["edit"]},r.codeActionLiteralSupport={codeActionKind:{valueSet:[Zr.CodeActionKind.Empty,Zr.CodeActionKind.QuickFix,Zr.CodeActionKind.Refactor,Zr.CodeActionKind.RefactorExtract,Zr.CodeActionKind.RefactorInline,Zr.CodeActionKind.RefactorRewrite,Zr.CodeActionKind.Source,Zr.CodeActionKind.SourceOrganizeImports]}},r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.codeActionProvider);n&&this.register({id:wO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideCodeActions:(i,o,a,u)=>{let c=this._client,d=async(y,g,m,h)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),range:c.code2ProtocolConverter.asRange(g),context:c.code2ProtocolConverter.asCodeActionContextSync(m)};return c.sendRequest(Zr.CodeActionRequest.type,S,h).then(R=>h.isCancellationRequested||R===null||R===void 0?null:c.protocol2CodeConverter.asCodeActionResult(R,h),R=>c.handleFailedRequest(Zr.CodeActionRequest.type,h,R,null))},f=c.middleware;return f.provideCodeActions?f.provideCodeActions(i,o,a,u,d):d(i,o,a,u)},resolveCodeAction:e.resolveProvider?(i,o)=>{let a=this._client,u=this._client.middleware,c=async(d,f)=>a.sendRequest(Zr.CodeActionResolveRequest.type,a.code2ProtocolConverter.asCodeActionSync(d),f).then(y=>f.isCancellationRequested?d:a.protocol2CodeConverter.asCodeAction(y,f),y=>a.handleFailedRequest(Zr.CodeActionResolveRequest.type,f,y,d));return u.resolveCodeAction?u.resolveCodeAction(i,o,c):c(i,o)}:void 0};return[bO.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n,e.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(e.codeActionKinds)}:void 0),n]}};jc.CodeActionFeature=Hp});var nC=q($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.CodeLensFeature=void 0;var rC=require("vscode"),ns=We(),SO=xt(),oa=ot(),Up=class extends oa.TextDocumentLanguageFeature{constructor(e){super(e,ns.CodeLensRequest.type)}fillClientCapabilities(e){(0,oa.ensure)((0,oa.ensure)(e,"textDocument"),"codeLens").dynamicRegistration=!0,(0,oa.ensure)((0,oa.ensure)(e,"workspace"),"codeLens").refreshSupport=!0}initialize(e,r){this._client.onRequest(ns.CodeLensRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});let i=this.getRegistrationOptions(r,e.codeLensProvider);i&&this.register({id:SO.generateUuid(),registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new rC.EventEmitter,i={onDidChangeCodeLenses:n.event,provideCodeLenses:(o,a)=>{let u=this._client,c=(f,y)=>u.sendRequest(ns.CodeLensRequest.type,u.code2ProtocolConverter.asCodeLensParams(f),y).then(g=>y.isCancellationRequested?null:u.protocol2CodeConverter.asCodeLenses(g,y),g=>u.handleFailedRequest(ns.CodeLensRequest.type,y,g,null)),d=u.middleware;return d.provideCodeLenses?d.provideCodeLenses(o,a,c):c(o,a)},resolveCodeLens:e.resolveProvider?(o,a)=>{let u=this._client,c=(f,y)=>u.sendRequest(ns.CodeLensResolveRequest.type,u.code2ProtocolConverter.asCodeLens(f),y).then(g=>y.isCancellationRequested?f:u.protocol2CodeConverter.asCodeLens(g),g=>u.handleFailedRequest(ns.CodeLensResolveRequest.type,y,g,f)),d=u.middleware;return d.resolveCodeLens?d.resolveCodeLens(o,a,c):c(o,a)}:void 0};return[rC.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),i),{provider:i,onDidChangeCodeLensEmitter:n}]}};$c.CodeLensFeature=Up});var iC=q(Ei=>{"use strict";Object.defineProperty(Ei,"__esModule",{value:!0});Ei.DocumentOnTypeFormattingFeature=Ei.DocumentRangeFormattingFeature=Ei.DocumentFormattingFeature=void 0;var Wc=require("vscode"),Tn=We(),Vp=xt(),Xn=ot(),is;(function(t){function e(r){let n=Wc.workspace.getConfiguration("files",r);return{trimTrailingWhitespace:n.get("trimTrailingWhitespace"),trimFinalNewlines:n.get("trimFinalNewlines"),insertFinalNewline:n.get("insertFinalNewline")}}t.fromConfiguration=e})(is||(is={}));var Bp=class extends Xn.TextDocumentLanguageFeature{constructor(e){super(e,Tn.DocumentFormattingRequest.type)}fillClientCapabilities(e){(0,Xn.ensure)((0,Xn.ensure)(e,"textDocument"),"formatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentFormattingProvider);n&&this.register({id:Vp.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentFormattingEdits:(i,o,a)=>{let u=this._client,c=(f,y,g)=>{let m={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),options:u.code2ProtocolConverter.asFormattingOptions(y,is.fromConfiguration(f))};return u.sendRequest(Tn.DocumentFormattingRequest.type,m,g).then(h=>g.isCancellationRequested?null:u.protocol2CodeConverter.asTextEdits(h,g),h=>u.handleFailedRequest(Tn.DocumentFormattingRequest.type,g,h,null))},d=u.middleware;return d.provideDocumentFormattingEdits?d.provideDocumentFormattingEdits(i,o,a,c):c(i,o,a)}};return[Wc.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};Ei.DocumentFormattingFeature=Bp;var zp=class extends Xn.TextDocumentLanguageFeature{constructor(e){super(e,Tn.DocumentRangeFormattingRequest.type)}fillClientCapabilities(e){let r=(0,Xn.ensure)((0,Xn.ensure)(e,"textDocument"),"rangeFormatting");r.dynamicRegistration=!0,r.rangesSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentRangeFormattingProvider);n&&this.register({id:Vp.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentRangeFormattingEdits:(i,o,a,u)=>{let c=this._client,d=(y,g,m,h)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),range:c.code2ProtocolConverter.asRange(g),options:c.code2ProtocolConverter.asFormattingOptions(m,is.fromConfiguration(y))};return c.sendRequest(Tn.DocumentRangeFormattingRequest.type,S,h).then(R=>h.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(R,h),R=>c.handleFailedRequest(Tn.DocumentRangeFormattingRequest.type,h,R,null))},f=c.middleware;return f.provideDocumentRangeFormattingEdits?f.provideDocumentRangeFormattingEdits(i,o,a,u,d):d(i,o,a,u)}};return e.rangesSupport&&(n.provideDocumentRangesFormattingEdits=(i,o,a,u)=>{let c=this._client,d=(y,g,m,h)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),ranges:c.code2ProtocolConverter.asRanges(g),options:c.code2ProtocolConverter.asFormattingOptions(m,is.fromConfiguration(y))};return c.sendRequest(Tn.DocumentRangesFormattingRequest.type,S,h).then(R=>h.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(R,h),R=>c.handleFailedRequest(Tn.DocumentRangesFormattingRequest.type,h,R,null))},f=c.middleware;return f.provideDocumentRangesFormattingEdits?f.provideDocumentRangesFormattingEdits(i,o,a,u,d):d(i,o,a,u)}),[Wc.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};Ei.DocumentRangeFormattingFeature=zp;var Kp=class extends Xn.TextDocumentLanguageFeature{constructor(e){super(e,Tn.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(e){(0,Xn.ensure)((0,Xn.ensure)(e,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentOnTypeFormattingProvider);n&&this.register({id:Vp.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideOnTypeFormattingEdits:(o,a,u,c,d)=>{let f=this._client,y=(m,h,S,R,D)=>{let I={textDocument:f.code2ProtocolConverter.asTextDocumentIdentifier(m),position:f.code2ProtocolConverter.asPosition(h),ch:S,options:f.code2ProtocolConverter.asFormattingOptions(R,is.fromConfiguration(m))};return f.sendRequest(Tn.DocumentOnTypeFormattingRequest.type,I,D).then(A=>D.isCancellationRequested?null:f.protocol2CodeConverter.asTextEdits(A,D),A=>f.handleFailedRequest(Tn.DocumentOnTypeFormattingRequest.type,D,A,null))},g=f.middleware;return g.provideOnTypeFormattingEdits?g.provideOnTypeFormattingEdits(o,a,u,c,d,y):y(o,a,u,c,d)}},i=e.moreTriggerCharacter||[];return[Wc.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n,e.firstTriggerCharacter,...i),n]}};Ei.DocumentOnTypeFormattingFeature=Kp});var sC=q(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.RenameFeature=void 0;var CO=require("vscode"),Zi=We(),RO=xt(),oC=un(),Gp=ot(),Qp=class extends Gp.TextDocumentLanguageFeature{constructor(e){super(e,Zi.RenameRequest.type)}fillClientCapabilities(e){let r=(0,Gp.ensure)((0,Gp.ensure)(e,"textDocument"),"rename");r.dynamicRegistration=!0,r.prepareSupport=!0,r.prepareSupportDefaultBehavior=Zi.PrepareSupportDefaultBehavior.Identifier,r.honorsChangeAnnotations=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.renameProvider);n&&(oC.boolean(e.renameProvider)&&(n.prepareProvider=!1),this.register({id:RO.generateUuid(),registerOptions:n}))}registerLanguageProvider(e){let r=e.documentSelector,n={provideRenameEdits:(i,o,a,u)=>{let c=this._client,d=(y,g,m,h)=>{let S={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),position:c.code2ProtocolConverter.asPosition(g),newName:m};return c.sendRequest(Zi.RenameRequest.type,S,h).then(R=>h.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(R,h),R=>c.handleFailedRequest(Zi.RenameRequest.type,h,R,null,!1))},f=c.middleware;return f.provideRenameEdits?f.provideRenameEdits(i,o,a,u,d):d(i,o,a,u)},prepareRename:e.prepareProvider?(i,o,a)=>{let u=this._client,c=(f,y,g)=>{let m={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),position:u.code2ProtocolConverter.asPosition(y)};return u.sendRequest(Zi.PrepareRenameRequest.type,m,g).then(h=>g.isCancellationRequested?null:Zi.Range.is(h)?u.protocol2CodeConverter.asRange(h):this.isDefaultBehavior(h)?h.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):h&&Zi.Range.is(h.range)?{range:u.protocol2CodeConverter.asRange(h.range),placeholder:h.placeholder}:Promise.reject(new Error("The element can't be renamed.")),h=>{throw typeof h.message=="string"?new Error(h.message):new Error("The element can't be renamed.")})},d=u.middleware;return d.prepareRename?d.prepareRename(i,o,a,c):c(i,o,a)}:void 0};return[this.registerProvider(r,n),n]}registerProvider(e,r){return CO.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}isDefaultBehavior(e){let r=e;return r&&oC.boolean(r.defaultBehavior)}};Hc.RenameFeature=Qp});var aC=q(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.DocumentLinkFeature=void 0;var TO=require("vscode"),sa=We(),Xp=ot(),DO=xt(),Yp=class extends Xp.TextDocumentLanguageFeature{constructor(e){super(e,sa.DocumentLinkRequest.type)}fillClientCapabilities(e){let r=(0,Xp.ensure)((0,Xp.ensure)(e,"textDocument"),"documentLink");r.dynamicRegistration=!0,r.tooltipSupport=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.documentLinkProvider);n&&this.register({id:DO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDocumentLinks:(i,o)=>{let a=this._client,u=(d,f)=>a.sendRequest(sa.DocumentLinkRequest.type,a.code2ProtocolConverter.asDocumentLinkParams(d),f).then(y=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentLinks(y,f),y=>a.handleFailedRequest(sa.DocumentLinkRequest.type,f,y,null)),c=a.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(i,o,u):u(i,o)},resolveDocumentLink:e.resolveProvider?(i,o)=>{let a=this._client,u=(d,f)=>a.sendRequest(sa.DocumentLinkResolveRequest.type,a.code2ProtocolConverter.asDocumentLink(d),f).then(y=>f.isCancellationRequested?d:a.protocol2CodeConverter.asDocumentLink(y),y=>a.handleFailedRequest(sa.DocumentLinkResolveRequest.type,f,y,d)),c=a.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(i,o,u):u(i,o)}:void 0};return[TO.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};Uc.DocumentLinkFeature=Yp});var cC=q(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.ExecuteCommandFeature=void 0;var EO=require("vscode"),Jp=We(),PO=xt(),uC=ot(),Zp=class{constructor(e){this._client=e,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Jp.ExecuteCommandRequest.type}fillClientCapabilities(e){(0,uC.ensure)((0,uC.ensure)(e,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(e){e.executeCommandProvider&&this.register({id:PO.generateUuid(),registerOptions:Object.assign({},e.executeCommandProvider)})}register(e){let r=this._client,n=r.middleware,i=(o,a)=>{let u={command:o,arguments:a};return r.sendRequest(Jp.ExecuteCommandRequest.type,u).then(void 0,c=>r.handleFailedRequest(Jp.ExecuteCommandRequest.type,void 0,c,void 0))};if(e.registerOptions.commands){let o=[];for(let a of e.registerOptions.commands)o.push(EO.commands.registerCommand(a,(...u)=>n.executeCommand?n.executeCommand(a,u,i):i(a,u)));this._commands.set(e.id,o)}}unregister(e){let r=this._commands.get(e);r&&r.forEach(n=>n.dispose())}clear(){this._commands.forEach(e=>{e.forEach(r=>r.dispose())}),this._commands.clear()}};Bc.ExecuteCommandFeature=Zp});var lC=q(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.FileSystemWatcherFeature=void 0;var kO=require("vscode"),eo=We(),zc=ot(),eg=class{constructor(e,r){this._client=e,this._notifyFileEvent=r,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return eo.DidChangeWatchedFilesNotification.type}fillClientCapabilities(e){(0,zc.ensure)((0,zc.ensure)(e,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,zc.ensure)((0,zc.ensure)(e,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(e,r){}register(e){if(!Array.isArray(e.registerOptions.watchers))return;let r=[];for(let n of e.registerOptions.watchers){let i=this._client.protocol2CodeConverter.asGlobPattern(n.globPattern);if(i===void 0)continue;let o=!0,a=!0,u=!0;n.kind!==void 0&&n.kind!==null&&(o=(n.kind&eo.WatchKind.Create)!==0,a=(n.kind&eo.WatchKind.Change)!==0,u=(n.kind&eo.WatchKind.Delete)!==0);let c=kO.workspace.createFileSystemWatcher(i,!o,!a,!u);this.hookListeners(c,o,a,u,r),r.push(c)}this._watchers.set(e.id,r)}registerRaw(e,r){let n=[];for(let i of r)this.hookListeners(i,!0,!0,!0,n);this._watchers.set(e,n)}hookListeners(e,r,n,i,o){r&&e.onDidCreate(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:eo.FileChangeType.Created}),null,o),n&&e.onDidChange(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:eo.FileChangeType.Changed}),null,o),i&&e.onDidDelete(a=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(a),type:eo.FileChangeType.Deleted}),null,o)}unregister(e){let r=this._watchers.get(e);if(r)for(let n of r)n.dispose()}clear(){this._watchers.forEach(e=>{for(let r of e)r.dispose()}),this._watchers.clear()}};Kc.FileSystemWatcherFeature=eg});var dC=q(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.ColorProviderFeature=void 0;var qO=require("vscode"),aa=We(),tg=ot(),rg=class extends tg.TextDocumentLanguageFeature{constructor(e){super(e,aa.DocumentColorRequest.type)}fillClientCapabilities(e){(0,tg.ensure)((0,tg.ensure)(e,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.colorProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideColorPresentations:(i,o,a)=>{let u=this._client,c=(f,y,g)=>{let m={color:f,textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(y.document),range:u.code2ProtocolConverter.asRange(y.range)};return u.sendRequest(aa.ColorPresentationRequest.type,m,g).then(h=>g.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(h,g),h=>u.handleFailedRequest(aa.ColorPresentationRequest.type,g,h,null))},d=u.middleware;return d.provideColorPresentations?d.provideColorPresentations(i,o,a,c):c(i,o,a)},provideDocumentColors:(i,o)=>{let a=this._client,u=(d,f)=>{let y={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(d)};return a.sendRequest(aa.DocumentColorRequest.type,y,f).then(g=>f.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(g,f),g=>a.handleFailedRequest(aa.DocumentColorRequest.type,f,g,null))},c=a.middleware;return c.provideDocumentColors?c.provideDocumentColors(i,o,u):u(i,o)}};return[qO.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};Vc.ColorProviderFeature=rg});var fC=q(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.ImplementationFeature=void 0;var xO=require("vscode"),ng=We(),ig=ot(),og=class extends ig.TextDocumentLanguageFeature{constructor(e){super(e,ng.ImplementationRequest.type)}fillClientCapabilities(e){let r=(0,ig.ensure)((0,ig.ensure)(e,"textDocument"),"implementation");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.implementationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideImplementation:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(ng.ImplementationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asDefinitionResult(m,g),m=>u.handleFailedRequest(ng.ImplementationRequest.type,g,m,null)),d=u.middleware;return d.provideImplementation?d.provideImplementation(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return xO.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Gc.ImplementationFeature=og});var hC=q(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.TypeDefinitionFeature=void 0;var FO=require("vscode"),sg=We(),ua=ot(),ag=class extends ua.TextDocumentLanguageFeature{constructor(e){super(e,sg.TypeDefinitionRequest.type)}fillClientCapabilities(e){(0,ua.ensure)((0,ua.ensure)(e,"textDocument"),"typeDefinition").dynamicRegistration=!0;let r=(0,ua.ensure)((0,ua.ensure)(e,"textDocument"),"typeDefinition");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeDefinitionProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideTypeDefinition:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(sg.TypeDefinitionRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asDefinitionResult(m,g),m=>u.handleFailedRequest(sg.TypeDefinitionRequest.type,g,m,null)),d=u.middleware;return d.provideTypeDefinition?d.provideTypeDefinition(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return FO.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Qc.TypeDefinitionFeature=ag});var pC=q(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.WorkspaceFoldersFeature=os.arrayDiff=void 0;var OO=xt(),Xc=require("vscode"),ca=We();function ug(t,e){if(t!=null)return t[e]}function cg(t,e){return t.filter(r=>e.indexOf(r)<0)}os.arrayDiff=cg;var lg=class{constructor(e){this._client=e,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return ca.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(e){let r=Xc.workspace.workspaceFolders;this.initializeWithFolders(r),r===void 0?e.workspaceFolders=null:e.workspaceFolders=r.map(n=>this.asProtocol(n))}initializeWithFolders(e){this._initialFolders=e}fillClientCapabilities(e){e.workspace=e.workspace||{},e.workspace.workspaceFolders=!0}initialize(e){let r=this._client;r.onRequest(ca.WorkspaceFoldersRequest.type,o=>{let a=()=>{let c=Xc.workspace.workspaceFolders;return c===void 0?null:c.map(f=>this.asProtocol(f))},u=r.middleware.workspace;return u&&u.workspaceFolders?u.workspaceFolders(o,a):a(o)});let n=ug(ug(ug(e,"workspace"),"workspaceFolders"),"changeNotifications"),i;typeof n=="string"?i=n:n===!0&&(i=OO.generateUuid()),i&&this.register({id:i,registerOptions:void 0})}sendInitialEvent(e){let r;if(this._initialFolders&&e){let n=cg(this._initialFolders,e),i=cg(e,this._initialFolders);(i.length>0||n.length>0)&&(r=this.doSendEvent(i,n))}else this._initialFolders?r=this.doSendEvent([],this._initialFolders):e&&(r=this.doSendEvent(e,[]));r!==void 0&&r.catch(n=>{this._client.error(`Sending notification ${ca.DidChangeWorkspaceFoldersNotification.type.method} failed`,n)})}doSendEvent(e,r){let n={event:{added:e.map(i=>this.asProtocol(i)),removed:r.map(i=>this.asProtocol(i))}};return this._client.sendNotification(ca.DidChangeWorkspaceFoldersNotification.type,n)}register(e){let r=e.id,n=this._client,i=Xc.workspace.onDidChangeWorkspaceFolders(o=>{let a=d=>this.doSendEvent(d.added,d.removed),u=n.middleware.workspace;(u&&u.didChangeWorkspaceFolders?u.didChangeWorkspaceFolders(o,a):a(o)).catch(d=>{this._client.error(`Sending notification ${ca.DidChangeWorkspaceFoldersNotification.type.method} failed`,d)})});this._listeners.set(r,i),this.sendInitialEvent(Xc.workspace.workspaceFolders)}unregister(e){let r=this._listeners.get(e);r!==void 0&&(this._listeners.delete(e),r.dispose())}clear(){for(let e of this._listeners.values())e.dispose();this._listeners.clear()}asProtocol(e){return e===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(e.uri),name:e.name}}};os.WorkspaceFoldersFeature=lg});var mC=q(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.FoldingRangeFeature=void 0;var gC=require("vscode"),to=We(),la=ot(),dg=class extends la.TextDocumentLanguageFeature{constructor(e){super(e,to.FoldingRangeRequest.type)}fillClientCapabilities(e){let r=(0,la.ensure)((0,la.ensure)(e,"textDocument"),"foldingRange");r.dynamicRegistration=!0,r.rangeLimit=5e3,r.lineFoldingOnly=!0,r.foldingRangeKind={valueSet:[to.FoldingRangeKind.Comment,to.FoldingRangeKind.Imports,to.FoldingRangeKind.Region]},r.foldingRange={collapsedText:!1},(0,la.ensure)((0,la.ensure)(e,"workspace"),"foldingRange").refreshSupport=!0}initialize(e,r){this._client.onRequest(to.FoldingRangeRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeFoldingRange.fire()});let[n,i]=this.getRegistration(r,e.foldingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new gC.EventEmitter,i={onDidChangeFoldingRanges:n.event,provideFoldingRanges:(o,a,u)=>{let c=this._client,d=(y,g,m)=>{let h={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y)};return c.sendRequest(to.FoldingRangeRequest.type,h,m).then(S=>m.isCancellationRequested?null:c.protocol2CodeConverter.asFoldingRanges(S,m),S=>c.handleFailedRequest(to.FoldingRangeRequest.type,m,S,null))},f=c.middleware;return f.provideFoldingRanges?f.provideFoldingRanges(o,a,u,d):d(o,a,u)}};return[gC.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),i),{provider:i,onDidChangeFoldingRange:n}]}};Yc.FoldingRangeFeature=dg});var yC=q(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.DeclarationFeature=void 0;var IO=require("vscode"),fg=We(),hg=ot(),pg=class extends hg.TextDocumentLanguageFeature{constructor(e){super(e,fg.DeclarationRequest.type)}fillClientCapabilities(e){let r=(0,hg.ensure)((0,hg.ensure)(e,"textDocument"),"declaration");r.dynamicRegistration=!0,r.linkSupport=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.declarationProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideDeclaration:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(fg.DeclarationRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asDeclarationResult(m,g),m=>u.handleFailedRequest(fg.DeclarationRequest.type,g,m,null)),d=u.middleware;return d.provideDeclaration?d.provideDeclaration(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return IO.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Jc.DeclarationFeature=pg});var vC=q(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.SelectionRangeFeature=void 0;var AO=require("vscode"),gg=We(),mg=ot(),yg=class extends mg.TextDocumentLanguageFeature{constructor(e){super(e,gg.SelectionRangeRequest.type)}fillClientCapabilities(e){let r=(0,mg.ensure)((0,mg.ensure)(e,"textDocument"),"selectionRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.selectionRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideSelectionRanges:(i,o,a)=>{let u=this._client,c=async(f,y,g)=>{let m={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),positions:u.code2ProtocolConverter.asPositionsSync(y,g)};return u.sendRequest(gg.SelectionRangeRequest.type,m,g).then(h=>g.isCancellationRequested?null:u.protocol2CodeConverter.asSelectionRanges(h,g),h=>u.handleFailedRequest(gg.SelectionRangeRequest.type,g,h,null))},d=u.middleware;return d.provideSelectionRanges?d.provideSelectionRanges(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return AO.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};Zc.SelectionRangeFeature=yg});var bC=q(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.ProgressFeature=void 0;var _C=We(),LO=Bh();function NO(t,e){return t[e]===void 0&&(t[e]=Object.create(null)),t[e]}var vg=class{constructor(e){this._client=e,this.activeParts=new Set}getState(){return{kind:"window",id:_C.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(e){NO(e,"window").workDoneProgress=!0}initialize(){let e=this._client,r=i=>{this.activeParts.delete(i)},n=i=>{this.activeParts.add(new LO.ProgressPart(this._client,i.token,r))};e.onRequest(_C.WorkDoneProgressCreateRequest.type,n)}clear(){for(let e of this.activeParts)e.done();this.activeParts.clear()}};el.ProgressFeature=vg});var wC=q(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});tl.CallHierarchyFeature=void 0;var MO=require("vscode"),ro=We(),_g=ot(),bg=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareCallHierarchy(e,r,n){let i=this.client,o=this.middleware,a=(u,c,d)=>{let f=i.code2ProtocolConverter.asTextDocumentPositionParams(u,c);return i.sendRequest(ro.CallHierarchyPrepareRequest.type,f,d).then(y=>d.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyItems(y,d),y=>i.handleFailedRequest(ro.CallHierarchyPrepareRequest.type,d,y,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(e,r,n,a):a(e,r,n)}provideCallHierarchyIncomingCalls(e,r){let n=this.client,i=this.middleware,o=(a,u)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(a)};return n.sendRequest(ro.CallHierarchyIncomingCallsRequest.type,c,u).then(d=>u.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyIncomingCalls(d,u),d=>n.handleFailedRequest(ro.CallHierarchyIncomingCallsRequest.type,u,d,null))};return i.provideCallHierarchyIncomingCalls?i.provideCallHierarchyIncomingCalls(e,r,o):o(e,r)}provideCallHierarchyOutgoingCalls(e,r){let n=this.client,i=this.middleware,o=(a,u)=>{let c={item:n.code2ProtocolConverter.asCallHierarchyItem(a)};return n.sendRequest(ro.CallHierarchyOutgoingCallsRequest.type,c,u).then(d=>u.isCancellationRequested?null:n.protocol2CodeConverter.asCallHierarchyOutgoingCalls(d,u),d=>n.handleFailedRequest(ro.CallHierarchyOutgoingCallsRequest.type,u,d,null))};return i.provideCallHierarchyOutgoingCalls?i.provideCallHierarchyOutgoingCalls(e,r,o):o(e,r)}},wg=class extends _g.TextDocumentLanguageFeature{constructor(e){super(e,ro.CallHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=e,n=(0,_g.ensure)((0,_g.ensure)(r,"textDocument"),"callHierarchy");n.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.callHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new bg(r);return[MO.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};tl.CallHierarchyFeature=wg});var SC=q(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl.SemanticTokensFeature=void 0;var rl=require("vscode"),Ke=We(),da=ot(),jO=un(),Sg=class extends da.TextDocumentLanguageFeature{constructor(e){super(e,Ke.SemanticTokensRegistrationType.type)}fillClientCapabilities(e){let r=(0,da.ensure)((0,da.ensure)(e,"textDocument"),"semanticTokens");r.dynamicRegistration=!0,r.tokenTypes=[Ke.SemanticTokenTypes.namespace,Ke.SemanticTokenTypes.type,Ke.SemanticTokenTypes.class,Ke.SemanticTokenTypes.enum,Ke.SemanticTokenTypes.interface,Ke.SemanticTokenTypes.struct,Ke.SemanticTokenTypes.typeParameter,Ke.SemanticTokenTypes.parameter,Ke.SemanticTokenTypes.variable,Ke.SemanticTokenTypes.property,Ke.SemanticTokenTypes.enumMember,Ke.SemanticTokenTypes.event,Ke.SemanticTokenTypes.function,Ke.SemanticTokenTypes.method,Ke.SemanticTokenTypes.macro,Ke.SemanticTokenTypes.keyword,Ke.SemanticTokenTypes.modifier,Ke.SemanticTokenTypes.comment,Ke.SemanticTokenTypes.string,Ke.SemanticTokenTypes.number,Ke.SemanticTokenTypes.regexp,Ke.SemanticTokenTypes.operator,Ke.SemanticTokenTypes.decorator],r.tokenModifiers=[Ke.SemanticTokenModifiers.declaration,Ke.SemanticTokenModifiers.definition,Ke.SemanticTokenModifiers.readonly,Ke.SemanticTokenModifiers.static,Ke.SemanticTokenModifiers.deprecated,Ke.SemanticTokenModifiers.abstract,Ke.SemanticTokenModifiers.async,Ke.SemanticTokenModifiers.modification,Ke.SemanticTokenModifiers.documentation,Ke.SemanticTokenModifiers.defaultLibrary],r.formats=[Ke.TokenFormat.Relative],r.requests={range:!0,full:{delta:!0}},r.multilineTokenSupport=!1,r.overlappingTokenSupport=!1,r.serverCancelSupport=!0,r.augmentsSyntaxTokens=!0,(0,da.ensure)((0,da.ensure)(e,"workspace"),"semanticTokens").refreshSupport=!0}initialize(e,r){this._client.onRequest(Ke.SemanticTokensRefreshRequest.type,async()=>{for(let a of this.getAllProviders())a.onDidChangeSemanticTokensEmitter.fire()});let[i,o]=this.getRegistration(r,e.semanticTokensProvider);!i||!o||this.register({id:i,registerOptions:o})}registerLanguageProvider(e){let r=e.documentSelector,n=jO.boolean(e.full)?e.full:e.full!==void 0,i=e.full!==void 0&&typeof e.full!="boolean"&&e.full.delta===!0,o=new rl.EventEmitter,a=n?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(m,h)=>{let S=this._client,R=S.middleware,D=(I,A)=>{let N={textDocument:S.code2ProtocolConverter.asTextDocumentIdentifier(I)};return S.sendRequest(Ke.SemanticTokensRequest.type,N,A).then(ee=>A.isCancellationRequested?null:S.protocol2CodeConverter.asSemanticTokens(ee,A),ee=>S.handleFailedRequest(Ke.SemanticTokensRequest.type,A,ee,null))};return R.provideDocumentSemanticTokens?R.provideDocumentSemanticTokens(m,h,D):D(m,h)},provideDocumentSemanticTokensEdits:i?(m,h,S)=>{let R=this._client,D=R.middleware,I=(A,N,ee)=>{let fe={textDocument:R.code2ProtocolConverter.asTextDocumentIdentifier(A),previousResultId:N};return R.sendRequest(Ke.SemanticTokensDeltaRequest.type,fe,ee).then(async re=>ee.isCancellationRequested?null:Ke.SemanticTokens.is(re)?await R.protocol2CodeConverter.asSemanticTokens(re,ee):await R.protocol2CodeConverter.asSemanticTokensEdits(re,ee),re=>R.handleFailedRequest(Ke.SemanticTokensDeltaRequest.type,ee,re,null))};return D.provideDocumentSemanticTokensEdits?D.provideDocumentSemanticTokensEdits(m,h,S,I):I(m,h,S)}:void 0}:void 0,c=e.range===!0?{provideDocumentRangeSemanticTokens:(m,h,S)=>{let R=this._client,D=R.middleware,I=(A,N,ee)=>{let fe={textDocument:R.code2ProtocolConverter.asTextDocumentIdentifier(A),range:R.code2ProtocolConverter.asRange(N)};return R.sendRequest(Ke.SemanticTokensRangeRequest.type,fe,ee).then(re=>ee.isCancellationRequested?null:R.protocol2CodeConverter.asSemanticTokens(re,ee),re=>R.handleFailedRequest(Ke.SemanticTokensRangeRequest.type,ee,re,null))};return D.provideDocumentRangeSemanticTokens?D.provideDocumentRangeSemanticTokens(m,h,S,I):I(m,h,S)}}:void 0,d=[],f=this._client,y=f.protocol2CodeConverter.asSemanticTokensLegend(e.legend),g=f.protocol2CodeConverter.asDocumentSelector(r);return a!==void 0&&d.push(rl.languages.registerDocumentSemanticTokensProvider(g,a,y)),c!==void 0&&d.push(rl.languages.registerDocumentRangeSemanticTokensProvider(g,c,y)),[new rl.Disposable(()=>d.forEach(m=>m.dispose())),{range:c,full:a,onDidChangeSemanticTokensEmitter:o}]}};nl.SemanticTokensFeature=Sg});var TC=q(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.WillDeleteFilesFeature=Ur.WillRenameFilesFeature=Ur.WillCreateFilesFeature=Ur.DidDeleteFilesFeature=Ur.DidRenameFilesFeature=Ur.DidCreateFilesFeature=void 0;var pn=require("vscode"),$O=Tc(),Yn=We(),WO=xt();function CC(t,e){return t[e]===void 0&&(t[e]={}),t[e]}function HO(t,e){return t[e]}function RC(t,e,r){t[e]=r}var fa=class t{constructor(e,r,n,i,o){this._client=e,this._event=r,this._registrationType=n,this._clientCapability=i,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(e){let r=CC(CC(e,"workspace"),"fileOperations");RC(r,"dynamicRegistration",!0),RC(r,this._clientCapability,!0)}initialize(e){let r=e.workspace?.fileOperations,n=r!==void 0?HO(r,this._serverCapability):void 0;if(n?.filters!==void 0)try{this.register({id:WO.generateUuid(),registerOptions:{filters:n.filters}})}catch(i){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${i}`)}}register(e){this._listener||(this._listener=this._event(this.send,this));let r=e.registerOptions.filters.map(n=>{let i=new $O.Minimatch(n.pattern.glob,t.asMinimatchOptions(n.pattern.options));if(!i.makeRe())throw new Error(`Invalid pattern ${n.pattern.glob}!`);return{scheme:n.scheme,matcher:i,kind:n.pattern.matches}});this._filters.set(e.id,r)}unregister(e){this._filters.delete(e),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}clear(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(e){return t.getFileType(e)}async filter(e,r){let n=await Promise.all(e.files.map(async o=>{let a=r(o),u=a.fsPath.replace(/\\/g,"/");for(let c of this._filters.values())for(let d of c)if(!(d.scheme!==void 0&&d.scheme!==a.scheme)){if(d.matcher.match(u)){if(d.kind===void 0)return!0;let f=await this.getFileType(a);if(f===void 0)return this._client.error(`Failed to determine file type for ${a.toString()}.`),!0;if(f===pn.FileType.File&&d.kind===Yn.FileOperationPatternKind.file||f===pn.FileType.Directory&&d.kind===Yn.FileOperationPatternKind.folder)return!0}else if(d.kind===Yn.FileOperationPatternKind.folder&&await t.getFileType(a)===pn.FileType.Directory&&d.matcher.match(`${u}/`))return!0}return!1})),i=e.files.filter((o,a)=>n[a]);return{...e,files:i}}static async getFileType(e){try{return(await pn.workspace.fs.stat(e)).type}catch{return}}static asMinimatchOptions(e){let r={dot:!0};return e?.ignoreCase===!0&&(r.nocase=!0),r}},il=class extends fa{constructor(e,r,n,i,o,a,u){super(e,r,n,i,o),this._notificationType=n,this._accessUri=a,this._createParams=u}async send(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=async i=>this._client.sendNotification(this._notificationType,this._createParams(i));return this.doSend(r,n)}}},ol=class extends il{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(e){let r=e.fsPath;if(this._fsPathFileTypes.has(r))return this._fsPathFileTypes.get(r);let n=await fa.getFileType(e);return n&&this._fsPathFileTypes.set(r,n),n}async cacheFileTypes(e,r){await this.filter(e,r)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(e){super.unregister(e),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}clear(){super.clear(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}},Cg=class extends il{constructor(e){super(e,pn.workspace.onDidCreateFiles,Yn.DidCreateFilesNotification.type,"didCreate","didCreate",r=>r,e.code2ProtocolConverter.asDidCreateFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.didCreateFiles?n.didCreateFiles(e,r):r(e)}};Ur.DidCreateFilesFeature=Cg;var Rg=class extends ol{constructor(e){super(e,pn.workspace.onDidRenameFiles,Yn.DidRenameFilesNotification.type,"didRename","didRename",r=>r.oldUri,e.code2ProtocolConverter.asDidRenameFilesParams)}register(e){this._willListener||(this._willListener=pn.workspace.onWillRenameFiles(this.willRename,this)),super.register(e)}willRename(e){e.waitUntil(this.cacheFileTypes(e,r=>r.oldUri))}doSend(e,r){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n?.didRenameFiles?n.didRenameFiles(e,r):r(e)}};Ur.DidRenameFilesFeature=Rg;var Tg=class extends ol{constructor(e){super(e,pn.workspace.onDidDeleteFiles,Yn.DidDeleteFilesNotification.type,"didDelete","didDelete",r=>r,e.code2ProtocolConverter.asDidDeleteFilesParams)}register(e){this._willListener||(this._willListener=pn.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(e)}willDelete(e){e.waitUntil(this.cacheFileTypes(e,r=>r))}doSend(e,r){this.clearFileTypeCache();let n=this._client.middleware.workspace;return n?.didDeleteFiles?n.didDeleteFiles(e,r):r(e)}};Ur.DidDeleteFilesFeature=Tg;var ha=class extends fa{constructor(e,r,n,i,o,a,u){super(e,r,n,i,o),this._requestType=n,this._accessUri=a,this._createParams=u}async send(e){let r=this.waitUntil(e);e.waitUntil(r)}async waitUntil(e){let r=await this.filter(e,this._accessUri);if(r.files.length){let n=i=>this._client.sendRequest(this._requestType,this._createParams(i),i.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(r,n)}else return}},Dg=class extends ha{constructor(e){super(e,pn.workspace.onWillCreateFiles,Yn.WillCreateFilesRequest.type,"willCreate","willCreate",r=>r,e.code2ProtocolConverter.asWillCreateFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.willCreateFiles?n.willCreateFiles(e,r):r(e)}};Ur.WillCreateFilesFeature=Dg;var Eg=class extends ha{constructor(e){super(e,pn.workspace.onWillRenameFiles,Yn.WillRenameFilesRequest.type,"willRename","willRename",r=>r.oldUri,e.code2ProtocolConverter.asWillRenameFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.willRenameFiles?n.willRenameFiles(e,r):r(e)}};Ur.WillRenameFilesFeature=Eg;var Pg=class extends ha{constructor(e){super(e,pn.workspace.onWillDeleteFiles,Yn.WillDeleteFilesRequest.type,"willDelete","willDelete",r=>r,e.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(e,r){let n=this._client.middleware.workspace;return n?.willDeleteFiles?n.willDeleteFiles(e,r):r(e)}};Ur.WillDeleteFilesFeature=Pg});var DC=q(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.LinkedEditingFeature=void 0;var UO=require("vscode"),kg=We(),qg=ot(),xg=class extends qg.TextDocumentLanguageFeature{constructor(e){super(e,kg.LinkedEditingRangeRequest.type)}fillClientCapabilities(e){let r=(0,qg.ensure)((0,qg.ensure)(e,"textDocument"),"linkedEditingRange");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.linkedEditingRangeProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n={provideLinkedEditingRanges:(i,o,a)=>{let u=this._client,c=(f,y,g)=>u.sendRequest(kg.LinkedEditingRangeRequest.type,u.code2ProtocolConverter.asTextDocumentPositionParams(f,y),g).then(m=>g.isCancellationRequested?null:u.protocol2CodeConverter.asLinkedEditingRanges(m,g),m=>u.handleFailedRequest(kg.LinkedEditingRangeRequest.type,g,m,null)),d=u.middleware;return d.provideLinkedEditingRange?d.provideLinkedEditingRange(i,o,a,c):c(i,o,a)}};return[this.registerProvider(r,n),n]}registerProvider(e,r){return UO.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};sl.LinkedEditingFeature=xg});var EC=q(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.TypeHierarchyFeature=void 0;var BO=require("vscode"),no=We(),Fg=ot(),Og=class{constructor(e){this.client=e,this.middleware=e.middleware}prepareTypeHierarchy(e,r,n){let i=this.client,o=this.middleware,a=(u,c,d)=>{let f=i.code2ProtocolConverter.asTextDocumentPositionParams(u,c);return i.sendRequest(no.TypeHierarchyPrepareRequest.type,f,d).then(y=>d.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(y,d),y=>i.handleFailedRequest(no.TypeHierarchyPrepareRequest.type,d,y,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(e,r,n,a):a(e,r,n)}provideTypeHierarchySupertypes(e,r){let n=this.client,i=this.middleware,o=(a,u)=>{let c={item:n.code2ProtocolConverter.asTypeHierarchyItem(a)};return n.sendRequest(no.TypeHierarchySupertypesRequest.type,c,u).then(d=>u.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(d,u),d=>n.handleFailedRequest(no.TypeHierarchySupertypesRequest.type,u,d,null))};return i.provideTypeHierarchySupertypes?i.provideTypeHierarchySupertypes(e,r,o):o(e,r)}provideTypeHierarchySubtypes(e,r){let n=this.client,i=this.middleware,o=(a,u)=>{let c={item:n.code2ProtocolConverter.asTypeHierarchyItem(a)};return n.sendRequest(no.TypeHierarchySubtypesRequest.type,c,u).then(d=>u.isCancellationRequested?null:n.protocol2CodeConverter.asTypeHierarchyItems(d,u),d=>n.handleFailedRequest(no.TypeHierarchySubtypesRequest.type,u,d,null))};return i.provideTypeHierarchySubtypes?i.provideTypeHierarchySubtypes(e,r,o):o(e,r)}},Ig=class extends Fg.TextDocumentLanguageFeature{constructor(e){super(e,no.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(e){let r=(0,Fg.ensure)((0,Fg.ensure)(e,"textDocument"),"typeHierarchy");r.dynamicRegistration=!0}initialize(e,r){let[n,i]=this.getRegistration(r,e.typeHierarchyProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=this._client,n=new Og(r);return[BO.languages.registerTypeHierarchyProvider(r.protocol2CodeConverter.asDocumentSelector(e.documentSelector),n),n]}};al.TypeHierarchyFeature=Ig});var kC=q(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.InlineValueFeature=void 0;var PC=require("vscode"),ul=We(),pa=ot(),Ag=class extends pa.TextDocumentLanguageFeature{constructor(e){super(e,ul.InlineValueRequest.type)}fillClientCapabilities(e){(0,pa.ensure)((0,pa.ensure)(e,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,pa.ensure)((0,pa.ensure)(e,"workspace"),"inlineValue").refreshSupport=!0}initialize(e,r){this._client.onRequest(ul.InlineValueRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlineValues.fire()});let[n,i]=this.getRegistration(r,e.inlineValueProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new PC.EventEmitter,i={onDidChangeInlineValues:n.event,provideInlineValues:(o,a,u,c)=>{let d=this._client,f=(g,m,h,S)=>{let R={textDocument:d.code2ProtocolConverter.asTextDocumentIdentifier(g),range:d.code2ProtocolConverter.asRange(m),context:d.code2ProtocolConverter.asInlineValueContext(h)};return d.sendRequest(ul.InlineValueRequest.type,R,S).then(D=>S.isCancellationRequested?null:d.protocol2CodeConverter.asInlineValues(D,S),D=>d.handleFailedRequest(ul.InlineValueRequest.type,S,D,null))},y=d.middleware;return y.provideInlineValues?y.provideInlineValues(o,a,u,c,f):f(o,a,u,c)}};return[this.registerProvider(r,i),{provider:i,onDidChangeInlineValues:n}]}registerProvider(e,r){return PC.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};cl.InlineValueFeature=Ag});var xC=q(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.InlayHintsFeature=void 0;var qC=require("vscode"),ss=We(),ga=ot(),Lg=class extends ga.TextDocumentLanguageFeature{constructor(e){super(e,ss.InlayHintRequest.type)}fillClientCapabilities(e){let r=(0,ga.ensure)((0,ga.ensure)(e,"textDocument"),"inlayHint");r.dynamicRegistration=!0,r.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,ga.ensure)((0,ga.ensure)(e,"workspace"),"inlayHint").refreshSupport=!0}initialize(e,r){this._client.onRequest(ss.InlayHintRefreshRequest.type,async()=>{for(let o of this.getAllProviders())o.onDidChangeInlayHints.fire()});let[n,i]=this.getRegistration(r,e.inlayHintProvider);!n||!i||this.register({id:n,registerOptions:i})}registerLanguageProvider(e){let r=e.documentSelector,n=new qC.EventEmitter,i={onDidChangeInlayHints:n.event,provideInlayHints:(o,a,u)=>{let c=this._client,d=async(y,g,m)=>{let h={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),range:c.code2ProtocolConverter.asRange(g)};try{let S=await c.sendRequest(ss.InlayHintRequest.type,h,m);return m.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(S,m)}catch(S){return c.handleFailedRequest(ss.InlayHintRequest.type,m,S,null)}},f=c.middleware;return f.provideInlayHints?f.provideInlayHints(o,a,u,d):d(o,a,u)}};return i.resolveInlayHint=e.resolveProvider===!0?(o,a)=>{let u=this._client,c=async(f,y)=>{try{let g=await u.sendRequest(ss.InlayHintResolveRequest.type,u.code2ProtocolConverter.asInlayHint(f),y);if(y.isCancellationRequested)return null;let m=u.protocol2CodeConverter.asInlayHint(g,y);return y.isCancellationRequested?null:m}catch(g){return u.handleFailedRequest(ss.InlayHintResolveRequest.type,y,g,null)}},d=u.middleware;return d.resolveInlayHint?d.resolveInlayHint(o,a,c):c(o,a)}:void 0,[this.registerProvider(r,i),{provider:i,onDidChangeInlayHints:n}]}registerProvider(e,r){return qC.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(e),r)}};ll.InlayHintsFeature=Lg});var FC=q(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.InlineCompletionItemFeature=void 0;var zO=require("vscode"),Ng=We(),Mg=ot(),KO=xt(),jg=class extends Mg.TextDocumentLanguageFeature{constructor(e){super(e,Ng.InlineCompletionRequest.type)}fillClientCapabilities(e){let r=(0,Mg.ensure)((0,Mg.ensure)(e,"textDocument"),"inlineCompletion");r.dynamicRegistration=!0}initialize(e,r){let n=this.getRegistrationOptions(r,e.inlineCompletionProvider);n&&this.register({id:KO.generateUuid(),registerOptions:n})}registerLanguageProvider(e){let r=e.documentSelector,n={provideInlineCompletionItems:(i,o,a,u)=>{let c=this._client,d=this._client.middleware,f=(y,g,m,h)=>c.sendRequest(Ng.InlineCompletionRequest.type,c.code2ProtocolConverter.asInlineCompletionParams(y,g,m),h).then(S=>h.isCancellationRequested?null:c.protocol2CodeConverter.asInlineCompletionResult(S,h),S=>c.handleFailedRequest(Ng.InlineCompletionRequest.type,h,S,null));return d.provideInlineCompletionItems?d.provideInlineCompletionItems(i,o,a,u,f):f(i,o,a,u)}};return[zO.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(r),n),n]}};dl.InlineCompletionItemFeature=jg});var zg=q(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.ProposedFeatures=sr.BaseLanguageClient=sr.MessageTransports=sr.SuspendMode=sr.State=sr.CloseAction=sr.ErrorAction=sr.RevealOutputChannelOn=void 0;var pt=require("vscode"),he=We(),VO=uS(),GO=dS(),En=un(),fl=vc(),OC=xt(),QO=Bh(),Dn=ot(),XO=lp(),IC=HS(),AC=BS(),as=zS(),YO=KS(),JO=VS(),ZO=GS(),eI=XS(),tI=YS(),rI=Ap(),nI=ZS(),iI=eC(),oI=tC(),sI=nC(),$g=iC(),aI=sC(),uI=aC(),cI=cC(),lI=lC(),dI=dC(),fI=fC(),hI=hC(),pI=pC(),gI=mC(),mI=yC(),yI=vC(),vI=bC(),_I=wC(),bI=SC(),us=TC(),wI=DC(),SI=EC(),CI=kC(),RI=xC(),TI=FC(),io;(function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error",t[t.Never=4]="Never"})(io||(sr.RevealOutputChannelOn=io={}));var ya;(function(t){t[t.Continue=1]="Continue",t[t.Shutdown=2]="Shutdown"})(ya||(sr.ErrorAction=ya={}));var Pi;(function(t){t[t.DoNotRestart=1]="DoNotRestart",t[t.Restart=2]="Restart"})(Pi||(sr.CloseAction=Pi={}));var ma;(function(t){t[t.Stopped=1]="Stopped",t[t.Starting=3]="Starting",t[t.Running=2]="Running"})(ma||(sr.State=ma={}));var LC;(function(t){t.off="off",t.on="on"})(LC||(sr.SuspendMode=LC={}));var Wg;(function(t){function e(r){return r==null?!1:typeof r=="boolean"||typeof r=="object"&&r!==null&&En.stringArray(r.enabledCommands)?r:!1}t.sanitizeIsTrusted=e})(Wg||(Wg={}));var Hg=class{constructor(e,r){this.client=e,this.maxRestartCount=r,this.restarts=[]}error(e,r,n){return n&&n<=3?{action:ya.Continue}:{action:ya.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Pi.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Pi.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Pi.Restart})}},Xe;(function(t){t.Initial="initial",t.Starting="starting",t.StartFailed="startFailed",t.Running="running",t.Stopping="stopping",t.Stopped="stopped"})(Xe||(Xe={}));var NC;(function(t){function e(r){return r&&he.MessageReader.is(r.reader)&&he.MessageWriter.is(r.writer)}t.is=e})(NC||(sr.MessageTransports=NC={}));var va=class t{constructor(e,r,n){this._traceFormat=he.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new fl.Semaphore(1),this._id=e,this._name=r,n=n||{};let i={isTrusted:!1,supportHtml:!1};n.markdown!==void 0&&(i.isTrusted=Wg.sanitizeIsTrusted(n.markdown.isTrusted),i.supportHtml=n.markdown.supportHtml===!0),this._clientOptions={documentSelector:n.documentSelector??[],synchronize:n.synchronize??{},diagnosticCollectionName:n.diagnosticCollectionName,outputChannelName:n.outputChannelName??this._name,revealOutputChannelOn:n.revealOutputChannelOn??io.Error,stdioEncoding:n.stdioEncoding??"utf8",initializationOptions:n.initializationOptions,initializationFailedHandler:n.initializationFailedHandler,progressOnInitialization:!!n.progressOnInitialization,errorHandler:n.errorHandler??this.createDefaultErrorHandler(n.connectionOptions?.maxRestartCount),middleware:n.middleware??{},uriConverters:n.uriConverters,workspaceFolder:n.workspaceFolder,connectionOptions:n.connectionOptions,markdown:i,diagnosticPullOptions:n.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:n.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=Xe.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,n.outputChannel?(this._outputChannel=n.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=n.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new fl.Semaphore(1),this._pendingChangeDelayer=new fl.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new fl.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new he.Emitter,this._stateChangeEmitter=new he.Emitter,this._trace=he.Trace.Off,this._tracer={log:(o,a)=>{En.string(o)?this.logTrace(o,a):this.logObjectTrace(o)}},this._c2p=VO.createConverter(n.uriConverters?n.uriConverters.code2Protocol:void 0),this._p2c=GO.createConverter(n.uriConverters?n.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=pt.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(e){let r=this.getPublicState();this._state=e;let n=this.getPublicState();n!==r&&this._stateChangeEmitter.fire({oldState:r,newState:n})}getPublicState(){switch(this.$state){case Xe.Starting:return ma.Starting;case Xe.Running:return ma.Running;default:return ma.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(e,...r){if(this.$state===Xe.StartFailed||this.$state===Xe.Stopping||this.$state===Xe.Stopped)return Promise.reject(new he.ResponseError(he.ErrorCodes.ConnectionInactive,"Client is not running"));let n=await this.$start();this._didChangeTextDocumentFeature.syncKind===he.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(n);let i=this._clientOptions.middleware?.sendRequest;if(i!==void 0){let o,a;return r.length===1?he.CancellationToken.is(r[0])?a=r[0]:o=r[0]:r.length===2&&(o=r[0],a=r[1]),i(e,o,a,(u,c,d)=>{let f=[];return c!==void 0&&f.push(c),d!==void 0&&f.push(d),n.sendRequest(u,...f)})}else return n.sendRequest(e,...r)}onRequest(e,r){let n=typeof e=="string"?e:e.method;this._requestHandlers.set(n,r);let i=this.activeConnection(),o;return i!==void 0?(this._requestDisposables.set(n,i.onRequest(e,r)),o={dispose:()=>{let a=this._requestDisposables.get(n);a!==void 0&&(a.dispose(),this._requestDisposables.delete(n))}}):(this._pendingRequestHandlers.set(n,r),o={dispose:()=>{this._pendingRequestHandlers.delete(n);let a=this._requestDisposables.get(n);a!==void 0&&(a.dispose(),this._requestDisposables.delete(n))}}),{dispose:()=>{this._requestHandlers.delete(n),o.dispose()}}}async sendNotification(e,r){if(this.$state===Xe.StartFailed||this.$state===Xe.Stopping||this.$state===Xe.Stopped)return Promise.reject(new he.ResponseError(he.ErrorCodes.ConnectionInactive,"Client is not running"));let n=this._didChangeTextDocumentFeature.syncKind===he.TextDocumentSyncKind.Full,i;n&&typeof e!="string"&&e.method===he.DidOpenTextDocumentNotification.method&&(i=r?.textDocument.uri,this._pendingOpenNotifications.add(i));let o=await this.$start();n&&await this.sendPendingFullTextDocumentChanges(o),i!==void 0&&this._pendingOpenNotifications.delete(i);let a=this._clientOptions.middleware?.sendNotification;return a?a(e,o.sendNotification.bind(o),r):o.sendNotification(e,r)}onNotification(e,r){let n=typeof e=="string"?e:e.method;this._notificationHandlers.set(n,r);let i=this.activeConnection(),o;return i!==void 0?(this._notificationDisposables.set(n,i.onNotification(e,r)),o={dispose:()=>{let a=this._notificationDisposables.get(n);a!==void 0&&(a.dispose(),this._notificationDisposables.delete(n))}}):(this._pendingNotificationHandlers.set(n,r),o={dispose:()=>{this._pendingNotificationHandlers.delete(n);let a=this._notificationDisposables.get(n);a!==void 0&&(a.dispose(),this._notificationDisposables.delete(n))}}),{dispose:()=>{this._notificationHandlers.delete(n),o.dispose()}}}async sendProgress(e,r,n){if(this.$state===Xe.StartFailed||this.$state===Xe.Stopping||this.$state===Xe.Stopped)return Promise.reject(new he.ResponseError(he.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(e,r,n)}catch(i){throw this.error(`Sending progress for token ${r} failed.`,i),i}}onProgress(e,r,n){this._progressHandlers.set(r,{type:e,handler:n});let i=this.activeConnection(),o,a=this._clientOptions.middleware?.handleWorkDoneProgress,u=he.WorkDoneProgress.is(e)&&a!==void 0?c=>{a(r,c,()=>n(c))}:n;return i!==void 0?(this._progressDisposables.set(r,i.onProgress(e,r,u)),o={dispose:()=>{let c=this._progressDisposables.get(r);c!==void 0&&(c.dispose(),this._progressDisposables.delete(r))}}):(this._pendingProgressHandlers.set(r,{type:e,handler:n}),o={dispose:()=>{this._pendingProgressHandlers.delete(r);let c=this._progressDisposables.get(r);c!==void 0&&(c.dispose(),this._progressDisposables.delete(r))}}),{dispose:()=>{this._progressHandlers.delete(r),o.dispose()}}}createDefaultErrorHandler(e){if(e!==void 0&&e<0)throw new Error(`Invalid maxRestartCount: ${e}`);return new Hg(this,e??4)}async setTrace(e){this._trace=e;let r=this.activeConnection();r!==void 0&&await r.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(e){if(e instanceof he.ResponseError){let r=e;return`  Message: ${r.message}
  Code: ${r.code} ${r.data?`
`+r.data.toString():""}`}return e instanceof Error?En.string(e.stack)?e.stack:e.message:En.string(e)?e:e.toString()}debug(e,r,n=!0){this.logOutputMessage(he.MessageType.Debug,io.Debug,"Debug",e,r,n)}info(e,r,n=!0){this.logOutputMessage(he.MessageType.Info,io.Info,"Info",e,r,n)}warn(e,r,n=!0){this.logOutputMessage(he.MessageType.Warning,io.Warn,"Warn",e,r,n)}error(e,r,n=!0){this.logOutputMessage(he.MessageType.Error,io.Error,"Error",e,r,n)}logOutputMessage(e,r,n,i,o,a){this.outputChannel.appendLine(`[${n.padEnd(5)} - ${new Date().toLocaleTimeString()}] ${i}`),o!=null&&this.outputChannel.appendLine(this.data2String(o)),(a==="force"||a&&this._clientOptions.revealOutputChannelOn<=r)&&this.showNotificationMessage(e,i)}showNotificationMessage(e,r){r=r??"A request has failed. See the output for more information.",(e===he.MessageType.Error?pt.window.showErrorMessage:e===he.MessageType.Warning?pt.window.showWarningMessage:pt.window.showInformationMessage)(r,"Go to output").then(i=>{i!==void 0&&this.outputChannel.show(!0)})}logTrace(e,r){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${e}`),r&&this.traceOutputChannel.appendLine(this.data2String(r))}logObjectTrace(e){e.isLSPMessage&&e.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),e&&this.traceOutputChannel.appendLine(`${JSON.stringify(e)}`)}needsStart(){return this.$state===Xe.Initial||this.$state===Xe.Stopping||this.$state===Xe.Stopped}needsStop(){return this.$state===Xe.Starting||this.$state===Xe.Running}activeConnection(){return this.$state===Xe.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===Xe.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===Xe.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;let[e,r,n]=this.createOnStartPromise();this._onStart=e,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?pt.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):pt.languages.createDiagnosticCollection());for(let[i,o]of this._notificationHandlers)this._pendingNotificationHandlers.has(i)||this._pendingNotificationHandlers.set(i,o);for(let[i,o]of this._requestHandlers)this._pendingRequestHandlers.has(i)||this._pendingRequestHandlers.set(i,o);for(let[i,o]of this._progressHandlers)this._pendingProgressHandlers.has(i)||this._pendingProgressHandlers.set(i,o);this.$state=Xe.Starting;try{let i=await this.createConnection();i.onNotification(he.LogMessageNotification.type,o=>{switch(o.type){case he.MessageType.Error:this.error(o.message,void 0,!1);break;case he.MessageType.Warning:this.warn(o.message,void 0,!1);break;case he.MessageType.Info:this.info(o.message,void 0,!1);break;case he.MessageType.Debug:this.debug(o.message,void 0,!1);break;default:this.outputChannel.appendLine(o.message)}}),i.onNotification(he.ShowMessageNotification.type,o=>{switch(o.type){case he.MessageType.Error:pt.window.showErrorMessage(o.message);break;case he.MessageType.Warning:pt.window.showWarningMessage(o.message);break;case he.MessageType.Info:pt.window.showInformationMessage(o.message);break;default:pt.window.showInformationMessage(o.message)}}),i.onRequest(he.ShowMessageRequest.type,o=>{let a;switch(o.type){case he.MessageType.Error:a=pt.window.showErrorMessage;break;case he.MessageType.Warning:a=pt.window.showWarningMessage;break;case he.MessageType.Info:a=pt.window.showInformationMessage;break;default:a=pt.window.showInformationMessage}let u=o.actions||[];return a(o.message,...u)}),i.onNotification(he.TelemetryEventNotification.type,o=>{this._telemetryEmitter.fire(o)}),i.onRequest(he.ShowDocumentRequest.type,async o=>{let a=async c=>{let d=this.protocol2CodeConverter.asUri(c.uri);try{if(c.external===!0)return{success:await pt.env.openExternal(d)};{let f={};return c.selection!==void 0&&(f.selection=this.protocol2CodeConverter.asRange(c.selection)),c.takeFocus===void 0||c.takeFocus===!1?f.preserveFocus=!0:c.takeFocus===!0&&(f.preserveFocus=!1),await pt.window.showTextDocument(d,f),{success:!0}}}catch{return{success:!1}}},u=this._clientOptions.middleware.window?.showDocument;return u!==void 0?u(o,a):a(o)}),i.listen(),await this.initialize(i),r()}catch(i){this.$state=Xe.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,i,"force"),n(i)}return this._onStart}createOnStartPromise(){let e,r;return[new Promise((i,o)=>{e=i,r=o}),e,r]}async initialize(e){this.refreshTrace(e,!1);let r=this._clientOptions.initializationOptions,[n,i]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],o={processId:null,clientInfo:{name:pt.env.appName,version:pt.version},locale:this.getLocale(),rootPath:n||null,rootUri:n?this._c2p.asUri(pt.Uri.file(n)):null,capabilities:this.computeClientCapabilities(),initializationOptions:En.func(r)?r():r,trace:he.Trace.toString(this._trace),workspaceFolders:i};if(this.fillInitializeParams(o),this._clientOptions.progressOnInitialization){let a=OC.generateUuid(),u=new QO.ProgressPart(e,a);o.workDoneToken=a;try{let c=await this.doInitialize(e,o);return u.done(),c}catch(c){throw u.cancel(),c}}else return this.doInitialize(e,o)}async doInitialize(e,r){try{let n=await e.initialize(r);if(n.capabilities.positionEncoding!==void 0&&n.capabilities.positionEncoding!==he.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${n.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=n,this.$state=Xe.Running;let i;En.number(n.capabilities.textDocumentSync)?n.capabilities.textDocumentSync===he.TextDocumentSyncKind.None?i={openClose:!1,change:he.TextDocumentSyncKind.None,save:void 0}:i={openClose:!0,change:n.capabilities.textDocumentSync,save:{includeText:!1}}:n.capabilities.textDocumentSync!==void 0&&n.capabilities.textDocumentSync!==null&&(i=n.capabilities.textDocumentSync),this._capabilities=Object.assign({},n.capabilities,{resolvedTextDocumentSync:i}),e.onNotification(he.PublishDiagnosticsNotification.type,o=>this.handleDiagnostics(o)),e.onRequest(he.RegistrationRequest.type,o=>this.handleRegistrationRequest(o)),e.onRequest("client/registerFeature",o=>this.handleRegistrationRequest(o)),e.onRequest(he.UnregistrationRequest.type,o=>this.handleUnregistrationRequest(o)),e.onRequest("client/unregisterFeature",o=>this.handleUnregistrationRequest(o)),e.onRequest(he.ApplyWorkspaceEditRequest.type,o=>this.handleApplyWorkspaceEdit(o));for(let[o,a]of this._pendingNotificationHandlers)this._notificationDisposables.set(o,e.onNotification(o,a));this._pendingNotificationHandlers.clear();for(let[o,a]of this._pendingRequestHandlers)this._requestDisposables.set(o,e.onRequest(o,a));this._pendingRequestHandlers.clear();for(let[o,a]of this._pendingProgressHandlers)this._progressDisposables.set(o,e.onProgress(a.type,o,a.handler));return this._pendingProgressHandlers.clear(),await e.sendNotification(he.InitializedNotification.type,{}),this.hookFileEvents(e),this.hookConfigurationChanged(e),this.initializeFeatures(e),n}catch(n){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(n)?this.initialize(e):this.stop():n instanceof he.ResponseError&&n.data&&n.data.retry?pt.window.showErrorMessage(n.message,{title:"Retry",id:"retry"}).then(i=>{i&&i.id==="retry"?this.initialize(e):this.stop()}):(n&&n.message&&pt.window.showErrorMessage(n.message),this.error("Server initialization failed.",n),this.stop()),n}}_clientGetRootPath(){let e=pt.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}stop(e=2e3){return this.shutdown("stop",e)}dispose(e=2e3){try{return this._disposed="disposing",this.stop(e)}finally{this._disposed="disposed"}}async shutdown(e,r){if(this.$state===Xe.Stopped||this.$state===Xe.Initial)return;if(this.$state===Xe.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}let n=this.activeConnection();if(n===void 0||this.$state!==Xe.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=Xe.Stopping,this.cleanUp(e);let i=new Promise(a=>{(0,he.RAL)().timer.setTimeout(a,r)}),o=(async a=>(await a.shutdown(),await a.exit(),a))(n);return this._onStop=Promise.race([i,o]).then(a=>{if(a!==void 0)a.end(),a.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},a=>{throw this.error("Stopping server failed",a,!1),a}).finally(()=>{this.$state=Xe.Stopped,e==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(e){this._fileEvents=[],this._fileEventDelayer.cancel();let r=this._listeners.splice(0,this._listeners.length);for(let n of r)n.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(let n of Array.from(this._features.entries()).map(i=>i[1]).reverse())n.clear();e==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(e){let r=this;async function n(o){return r._fileEvents.push(o),r._fileEventDelayer.trigger(async()=>{await r.sendNotification(he.DidChangeWatchedFilesNotification.type,{changes:r._fileEvents}),r._fileEvents=[]})}let i=this.clientOptions.middleware?.workspace;(i?.didChangeWatchedFile?i.didChangeWatchedFile(e,n):n(e)).catch(o=>{r.error("Notify file events failed.",o)})}async sendPendingFullTextDocumentChanges(e){return this._pendingChangeSemaphore.lock(async()=>{try{let r=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(r.length===0)return;for(let n of r){let i=this.code2ProtocolConverter.asChangeTextDocumentParams(n);await e.sendNotification(he.DidChangeTextDocumentNotification.type,i),this._didChangeTextDocumentFeature.notificationSent(n,he.DidChangeTextDocumentNotification.type,i)}}catch(r){throw this.error("Sending pending changes failed",r,!1),r}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{let e=this.activeConnection();if(e===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(e)}).catch(e=>this.error("Delivering pending changes failed",e,!1))}handleDiagnostics(e){if(!this._diagnostics)return;let r=e.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===r&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(e.uri,e.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,he.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;let e=this._diagnosticQueue.entries().next();if(e.done===!0)return;let[r,n]=e.value;this._diagnosticQueue.delete(r);let i=new pt.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:r,tokenSource:i},this._p2c.asDiagnostics(n,i.token).then(o=>{if(!i.token.isCancellationRequested){let a=this._p2c.asUri(r),u=this.clientOptions.middleware;u.handleDiagnostics?u.handleDiagnostics(a,o,(c,d)=>this.setDiagnostics(c,d)):this.setDiagnostics(a,o)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(e,r){this._diagnostics&&this._diagnostics.set(e,r)}getLocale(){return pt.env.language}async $start(){if(this.$state===Xe.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();let e=this.activeConnection();if(e===void 0)throw new Error("Starting server failed");return e}async createConnection(){let e=(i,o,a)=>{this.handleConnectionError(i,o,a).catch(u=>this.error("Handling connection error failed",u))},r=()=>{this.handleConnectionClosed().catch(i=>this.error("Handling connection close failed",i))},n=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=DI(n.reader,n.writer,e,r,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===Xe.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let e={action:Pi.DoNotRestart};if(this.$state!==Xe.Stopping)try{e=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,e.action===Pi.DoNotRestart?(this.error(e.message??"Connection to server got closed. Server will not be restarted.",void 0,e.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===Xe.Starting?this.$state=Xe.StartFailed:this.$state=Xe.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):e.action===Pi.Restart&&(this.info(e.message??"Connection to server got closed. Server will restart.",!e.handled),this.cleanUp("restart"),this.$state=Xe.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(r=>this.error("Restarting server failed",r,"force")))}async handleConnectionError(e,r,n){let i=await this._clientOptions.errorHandler.error(e,r,n);i.action===ya.Shutdown?(this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}
Shutting down server.`,void 0,i.handled===!0?!1:"force"),this.stop().catch(o=>{this.error("Stopping server failed",o,!1)})):this.error(i.message??`Client ${this._name}: connection to server is erroring.
${e.message}`,void 0,i.handled===!0?!1:"force")}hookConfigurationChanged(e){this._listeners.push(pt.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(e,!0)}))}refreshTrace(e,r=!1){let n=pt.workspace.getConfiguration(this._id),i=he.Trace.Off,o=he.TraceFormat.Text;if(n){let a=n.get("trace.server","off");typeof a=="string"?i=he.Trace.fromString(a):(i=he.Trace.fromString(n.get("trace.server.verbosity","off")),o=he.TraceFormat.fromString(n.get("trace.server.format","text")))}this._trace=i,this._traceFormat=o,e.trace(this._trace,this._tracer,{sendNotification:r,traceFormat:this._traceFormat}).catch(a=>{this.error("Updating trace failed with error",a,!1)})}hookFileEvents(e){let r=this._clientOptions.synchronize.fileEvents;if(!r)return;let n;En.array(r)?n=r:n=[r],n&&this._dynamicFeatures.get(he.DidChangeWatchedFilesNotification.type.method).registerRaw(OC.generateUuid(),n)}registerFeatures(e){for(let r of e)this.registerFeature(r)}registerFeature(e){if(this._features.push(e),Dn.DynamicFeature.is(e)){let r=e.registrationType;this._dynamicFeatures.set(r.method,e)}}getFeature(e){return this._dynamicFeatures.get(e)}hasDedicatedTextSynchronizationFeature(e){let r=this.getFeature(he.NotebookDocumentSyncRegistrationType.method);return r===void 0||!(r instanceof IC.NotebookDocumentSyncFeature)?!1:r.handles(e)}registerBuiltinFeatures(){let e=new Map;this.registerFeature(new AC.ConfigurationFeature(this)),this.registerFeature(new as.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new as.DidChangeTextDocumentFeature(this,e),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new as.WillSaveFeature(this)),this.registerFeature(new as.WillSaveWaitUntilFeature(this)),this.registerFeature(new as.DidSaveTextDocumentFeature(this)),this.registerFeature(new as.DidCloseTextDocumentFeature(this,this._syncedDocuments,e)),this.registerFeature(new lI.FileSystemWatcherFeature(this,r=>this.notifyFileEvent(r))),this.registerFeature(new YO.CompletionItemFeature(this)),this.registerFeature(new JO.HoverFeature(this)),this.registerFeature(new eI.SignatureHelpFeature(this)),this.registerFeature(new ZO.DefinitionFeature(this)),this.registerFeature(new iI.ReferencesFeature(this)),this.registerFeature(new tI.DocumentHighlightFeature(this)),this.registerFeature(new rI.DocumentSymbolFeature(this)),this.registerFeature(new nI.WorkspaceSymbolFeature(this)),this.registerFeature(new oI.CodeActionFeature(this)),this.registerFeature(new sI.CodeLensFeature(this)),this.registerFeature(new $g.DocumentFormattingFeature(this)),this.registerFeature(new $g.DocumentRangeFormattingFeature(this)),this.registerFeature(new $g.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new aI.RenameFeature(this)),this.registerFeature(new uI.DocumentLinkFeature(this)),this.registerFeature(new cI.ExecuteCommandFeature(this)),this.registerFeature(new AC.SyncConfigurationFeature(this)),this.registerFeature(new hI.TypeDefinitionFeature(this)),this.registerFeature(new fI.ImplementationFeature(this)),this.registerFeature(new dI.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new pI.WorkspaceFoldersFeature(this)),this.registerFeature(new gI.FoldingRangeFeature(this)),this.registerFeature(new mI.DeclarationFeature(this)),this.registerFeature(new yI.SelectionRangeFeature(this)),this.registerFeature(new vI.ProgressFeature(this)),this.registerFeature(new _I.CallHierarchyFeature(this)),this.registerFeature(new bI.SemanticTokensFeature(this)),this.registerFeature(new wI.LinkedEditingFeature(this)),this.registerFeature(new us.DidCreateFilesFeature(this)),this.registerFeature(new us.DidRenameFilesFeature(this)),this.registerFeature(new us.DidDeleteFilesFeature(this)),this.registerFeature(new us.WillCreateFilesFeature(this)),this.registerFeature(new us.WillRenameFilesFeature(this)),this.registerFeature(new us.WillDeleteFilesFeature(this)),this.registerFeature(new SI.TypeHierarchyFeature(this)),this.registerFeature(new CI.InlineValueFeature(this)),this.registerFeature(new RI.InlayHintsFeature(this)),this.registerFeature(new XO.DiagnosticFeature(this)),this.registerFeature(new IC.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(Bg.createAll(this))}fillInitializeParams(e){for(let r of this._features)En.func(r.fillInitializeParams)&&r.fillInitializeParams(e)}computeClientCapabilities(){let e={};(0,Dn.ensure)(e,"workspace").applyEdit=!0;let r=(0,Dn.ensure)((0,Dn.ensure)(e,"workspace"),"workspaceEdit");r.documentChanges=!0,r.resourceOperations=[he.ResourceOperationKind.Create,he.ResourceOperationKind.Rename,he.ResourceOperationKind.Delete],r.failureHandling=he.FailureHandlingKind.TextOnlyTransactional,r.normalizesLineEndings=!0,r.changeAnnotationSupport={groupsOnLabel:!0};let n=(0,Dn.ensure)((0,Dn.ensure)(e,"textDocument"),"publishDiagnostics");n.relatedInformation=!0,n.versionSupport=!1,n.tagSupport={valueSet:[he.DiagnosticTag.Unnecessary,he.DiagnosticTag.Deprecated]},n.codeDescriptionSupport=!0,n.dataSupport=!0;let i=(0,Dn.ensure)(e,"window"),o=(0,Dn.ensure)(i,"showMessage");o.messageActionItem={additionalPropertiesSupport:!0};let a=(0,Dn.ensure)(i,"showDocument");a.support=!0;let u=(0,Dn.ensure)(e,"general");u.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(t.RequestsToCancelOnContentModified)},u.regularExpressions={engine:"ECMAScript",version:"ES2020"},u.markdown={parser:"marked",version:"1.1.0"},u.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(u.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let c of this._features)c.fillClientCapabilities(e);return e}initializeFeatures(e){let r=this._clientOptions.documentSelector;for(let n of this._features)En.func(n.preInitialize)&&n.preInitialize(this._capabilities,r);for(let n of this._features)n.initialize(this._capabilities,r)}async handleRegistrationRequest(e){let r=this.clientOptions.middleware?.handleRegisterCapability;return r?r(e,n=>this.doRegisterCapability(n)):this.doRegisterCapability(e)}async doRegisterCapability(e){if(!this.isRunning()){for(let r of e.registrations)this._ignoredRegistrations.add(r.id);return}for(let r of e.registrations){let n=this._dynamicFeatures.get(r.method);if(n===void 0)return Promise.reject(new Error(`No feature implementation for ${r.method} found. Registration failed.`));let i=r.registerOptions??{};i.documentSelector=i.documentSelector??this._clientOptions.documentSelector;let o={id:r.id,registerOptions:i};try{n.register(o)}catch(a){return Promise.reject(a)}}}async handleUnregistrationRequest(e){let r=this.clientOptions.middleware?.handleUnregisterCapability;return r?r(e,n=>this.doUnregisterCapability(n)):this.doUnregisterCapability(e)}async doUnregisterCapability(e){for(let r of e.unregisterations){if(this._ignoredRegistrations.has(r.id))continue;let n=this._dynamicFeatures.get(r.method);if(!n)return Promise.reject(new Error(`No feature implementation for ${r.method} found. Unregistration failed.`));n.unregister(r.id)}}async handleApplyWorkspaceEdit(e){let r=e.edit,n=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(r)),i=new Map;pt.workspace.textDocuments.forEach(a=>i.set(a.uri.toString(),a));let o=!1;if(r.documentChanges){for(let a of r.documentChanges)if(he.TextDocumentEdit.is(a)&&a.textDocument.version&&a.textDocument.version>=0){let u=this._p2c.asUri(a.textDocument.uri).toString(),c=i.get(u);if(c&&c.version!==a.textDocument.version){o=!0;break}}}return o?Promise.resolve({applied:!1}):En.asPromise(pt.workspace.applyEdit(n).then(a=>({applied:a})))}handleFailedRequest(e,r,n,i,o=!0){if(n instanceof he.ResponseError){if(n.code===he.ErrorCodes.PendingResponseRejected||n.code===he.ErrorCodes.ConnectionInactive)return i;if(n.code===he.LSPErrorCodes.RequestCancelled||n.code===he.LSPErrorCodes.ServerCancelled){if(r!==void 0&&r.isCancellationRequested)return i;throw n.data!==void 0?new Dn.LSPCancellationError(n.data):new pt.CancellationError}else if(n.code===he.LSPErrorCodes.ContentModified){if(t.RequestsToCancelOnContentModified.has(e.method)||t.CancellableResolveCalls.has(e.method))throw new pt.CancellationError;return i}}throw this.error(`Request ${e.method} failed.`,n,o),n}};sr.BaseLanguageClient=va;va.RequestsToCancelOnContentModified=new Set([he.SemanticTokensRequest.method,he.SemanticTokensRangeRequest.method,he.SemanticTokensDeltaRequest.method]);va.CancellableResolveCalls=new Set([he.CompletionResolveRequest.method,he.CodeLensResolveRequest.method,he.CodeActionResolveRequest.method,he.InlayHintResolveRequest.method,he.DocumentLinkResolveRequest.method,he.WorkspaceSymbolResolveRequest.method]);var Ug=class{error(e){(0,he.RAL)().console.error(e)}warn(e){(0,he.RAL)().console.warn(e)}info(e){(0,he.RAL)().console.info(e)}log(e){(0,he.RAL)().console.log(e)}};function DI(t,e,r,n,i){let o=new Ug,a=(0,he.createProtocolConnection)(t,e,o,i);return a.onError(c=>{r(c[0],c[1],c[2])}),a.onClose(n),{listen:()=>a.listen(),sendRequest:a.sendRequest,onRequest:a.onRequest,hasPendingResponse:a.hasPendingResponse,sendNotification:a.sendNotification,onNotification:a.onNotification,onProgress:a.onProgress,sendProgress:a.sendProgress,trace:(c,d,f)=>{let y={sendNotification:!1,traceFormat:he.TraceFormat.Text};return f===void 0?a.trace(c,d,y):(En.boolean(f),a.trace(c,d,f))},initialize:c=>a.sendRequest(he.InitializeRequest.type,c),shutdown:()=>a.sendRequest(he.ShutdownRequest.type,void 0),exit:()=>a.sendNotification(he.ExitNotification.type),end:()=>a.end(),dispose:()=>a.dispose()}}var Bg;(function(t){function e(r){return[new TI.InlineCompletionItemFeature(r)]}t.createAll=e})(Bg||(sr.ProposedFeatures=Bg={}))});var jC=q(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.terminate=void 0;var MC=require("child_process"),EI=require("path"),PI=process.platform==="win32",kI=process.platform==="darwin",qI=process.platform==="linux";function xI(t,e){if(PI)try{let i={stdio:["pipe","pipe","ignore"]};return e&&(i.cwd=e),MC.execFileSync("taskkill",["/T","/F","/PID",t.pid.toString()],i),!0}catch{return!1}else if(qI||kI)try{var r=(0,EI.join)(__dirname,"terminateProcess.sh"),n=MC.spawnSync(r,[t.pid.toString()]);return!n.error}catch{return!1}else return t.kill("SIGKILL"),!0}hl.terminate=xI});var Kg=q((M$,$C)=>{"use strict";$C.exports=We()});var _a=q((j$,WC)=>{"use strict";var FI=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};WC.exports=FI});var pl=q(($$,HC)=>{"use strict";var OI="2.0.0",II=Number.MAX_SAFE_INTEGER||9007199254740991,AI=16,LI=250,NI=["major","premajor","minor","preminor","patch","prepatch","prerelease"];HC.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:AI,MAX_SAFE_BUILD_LENGTH:LI,MAX_SAFE_INTEGER:II,RELEASE_TYPES:NI,SEMVER_SPEC_VERSION:OI,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var gl=q((Ln,UC)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Vg,MAX_SAFE_BUILD_LENGTH:MI,MAX_LENGTH:jI}=pl(),$I=_a();Ln=UC.exports={};var WI=Ln.re=[],HI=Ln.safeRe=[],De=Ln.src=[],UI=Ln.safeSrc=[],Ee=Ln.t={},BI=0,Gg="[a-zA-Z0-9-]",zI=[["\\s",1],["\\d",jI],[Gg,MI]],KI=t=>{for(let[e,r]of zI)t=t.split(`${e}*`).join(`${e}{0,${r}}`).split(`${e}+`).join(`${e}{1,${r}}`);return t},Ve=(t,e,r)=>{let n=KI(e),i=BI++;$I(t,i,e),Ee[t]=i,De[i]=e,UI[i]=n,WI[i]=new RegExp(e,r?"g":void 0),HI[i]=new RegExp(n,r?"g":void 0)};Ve("NUMERICIDENTIFIER","0|[1-9]\\d*");Ve("NUMERICIDENTIFIERLOOSE","\\d+");Ve("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${Gg}*`);Ve("MAINVERSION",`(${De[Ee.NUMERICIDENTIFIER]})\\.(${De[Ee.NUMERICIDENTIFIER]})\\.(${De[Ee.NUMERICIDENTIFIER]})`);Ve("MAINVERSIONLOOSE",`(${De[Ee.NUMERICIDENTIFIERLOOSE]})\\.(${De[Ee.NUMERICIDENTIFIERLOOSE]})\\.(${De[Ee.NUMERICIDENTIFIERLOOSE]})`);Ve("PRERELEASEIDENTIFIER",`(?:${De[Ee.NONNUMERICIDENTIFIER]}|${De[Ee.NUMERICIDENTIFIER]})`);Ve("PRERELEASEIDENTIFIERLOOSE",`(?:${De[Ee.NONNUMERICIDENTIFIER]}|${De[Ee.NUMERICIDENTIFIERLOOSE]})`);Ve("PRERELEASE",`(?:-(${De[Ee.PRERELEASEIDENTIFIER]}(?:\\.${De[Ee.PRERELEASEIDENTIFIER]})*))`);Ve("PRERELEASELOOSE",`(?:-?(${De[Ee.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${De[Ee.PRERELEASEIDENTIFIERLOOSE]})*))`);Ve("BUILDIDENTIFIER",`${Gg}+`);Ve("BUILD",`(?:\\+(${De[Ee.BUILDIDENTIFIER]}(?:\\.${De[Ee.BUILDIDENTIFIER]})*))`);Ve("FULLPLAIN",`v?${De[Ee.MAINVERSION]}${De[Ee.PRERELEASE]}?${De[Ee.BUILD]}?`);Ve("FULL",`^${De[Ee.FULLPLAIN]}$`);Ve("LOOSEPLAIN",`[v=\\s]*${De[Ee.MAINVERSIONLOOSE]}${De[Ee.PRERELEASELOOSE]}?${De[Ee.BUILD]}?`);Ve("LOOSE",`^${De[Ee.LOOSEPLAIN]}$`);Ve("GTLT","((?:<|>)?=?)");Ve("XRANGEIDENTIFIERLOOSE",`${De[Ee.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Ve("XRANGEIDENTIFIER",`${De[Ee.NUMERICIDENTIFIER]}|x|X|\\*`);Ve("XRANGEPLAIN",`[v=\\s]*(${De[Ee.XRANGEIDENTIFIER]})(?:\\.(${De[Ee.XRANGEIDENTIFIER]})(?:\\.(${De[Ee.XRANGEIDENTIFIER]})(?:${De[Ee.PRERELEASE]})?${De[Ee.BUILD]}?)?)?`);Ve("XRANGEPLAINLOOSE",`[v=\\s]*(${De[Ee.XRANGEIDENTIFIERLOOSE]})(?:\\.(${De[Ee.XRANGEIDENTIFIERLOOSE]})(?:\\.(${De[Ee.XRANGEIDENTIFIERLOOSE]})(?:${De[Ee.PRERELEASELOOSE]})?${De[Ee.BUILD]}?)?)?`);Ve("XRANGE",`^${De[Ee.GTLT]}\\s*${De[Ee.XRANGEPLAIN]}$`);Ve("XRANGELOOSE",`^${De[Ee.GTLT]}\\s*${De[Ee.XRANGEPLAINLOOSE]}$`);Ve("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Vg}})(?:\\.(\\d{1,${Vg}}))?(?:\\.(\\d{1,${Vg}}))?`);Ve("COERCE",`${De[Ee.COERCEPLAIN]}(?:$|[^\\d])`);Ve("COERCEFULL",De[Ee.COERCEPLAIN]+`(?:${De[Ee.PRERELEASE]})?(?:${De[Ee.BUILD]})?(?:$|[^\\d])`);Ve("COERCERTL",De[Ee.COERCE],!0);Ve("COERCERTLFULL",De[Ee.COERCEFULL],!0);Ve("LONETILDE","(?:~>?)");Ve("TILDETRIM",`(\\s*)${De[Ee.LONETILDE]}\\s+`,!0);Ln.tildeTrimReplace="$1~";Ve("TILDE",`^${De[Ee.LONETILDE]}${De[Ee.XRANGEPLAIN]}$`);Ve("TILDELOOSE",`^${De[Ee.LONETILDE]}${De[Ee.XRANGEPLAINLOOSE]}$`);Ve("LONECARET","(?:\\^)");Ve("CARETTRIM",`(\\s*)${De[Ee.LONECARET]}\\s+`,!0);Ln.caretTrimReplace="$1^";Ve("CARET",`^${De[Ee.LONECARET]}${De[Ee.XRANGEPLAIN]}$`);Ve("CARETLOOSE",`^${De[Ee.LONECARET]}${De[Ee.XRANGEPLAINLOOSE]}$`);Ve("COMPARATORLOOSE",`^${De[Ee.GTLT]}\\s*(${De[Ee.LOOSEPLAIN]})$|^$`);Ve("COMPARATOR",`^${De[Ee.GTLT]}\\s*(${De[Ee.FULLPLAIN]})$|^$`);Ve("COMPARATORTRIM",`(\\s*)${De[Ee.GTLT]}\\s*(${De[Ee.LOOSEPLAIN]}|${De[Ee.XRANGEPLAIN]})`,!0);Ln.comparatorTrimReplace="$1$2$3";Ve("HYPHENRANGE",`^\\s*(${De[Ee.XRANGEPLAIN]})\\s+-\\s+(${De[Ee.XRANGEPLAIN]})\\s*$`);Ve("HYPHENRANGELOOSE",`^\\s*(${De[Ee.XRANGEPLAINLOOSE]})\\s+-\\s+(${De[Ee.XRANGEPLAINLOOSE]})\\s*$`);Ve("STAR","(<|>)?=?\\s*\\*");Ve("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Ve("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var ml=q((W$,BC)=>{"use strict";var VI=Object.freeze({loose:!0}),GI=Object.freeze({}),QI=t=>t?typeof t!="object"?VI:t:GI;BC.exports=QI});var GC=q((H$,VC)=>{"use strict";var zC=/^[0-9]+$/,KC=(t,e)=>{if(typeof t=="number"&&typeof e=="number")return t===e?0:t<e?-1:1;let r=zC.test(t),n=zC.test(e);return r&&n&&(t=+t,e=+e),t===e?0:r&&!n?-1:n&&!r?1:t<e?-1:1},XI=(t,e)=>KC(e,t);VC.exports={compareIdentifiers:KC,rcompareIdentifiers:XI}});var ba=q((U$,XC)=>{"use strict";var yl=_a(),{MAX_LENGTH:QC,MAX_SAFE_INTEGER:vl}=pl(),{safeRe:_l,t:bl}=gl(),YI=ml(),{compareIdentifiers:Qg}=GC(),Xg=class t{constructor(e,r){if(r=YI(r),e instanceof t){if(e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>QC)throw new TypeError(`version is longer than ${QC} characters`);yl("SemVer",e,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=e.trim().match(r.loose?_l[bl.LOOSE]:_l[bl.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>vl||this.major<0)throw new TypeError("Invalid major version");if(this.minor>vl||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>vl||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<vl)return o}return i}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(yl("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),this.major<e.major?-1:this.major>e.major?1:this.minor<e.minor?-1:this.minor>e.minor?1:this.patch<e.patch?-1:this.patch>e.patch?1:0}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],i=e.prerelease[r];if(yl("prerelease compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Qg(n,i)}while(++r)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let r=0;do{let n=this.build[r],i=e.build[r];if(yl("build compare",r,n,i),n===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(n===void 0)return-1;if(n===i)continue;return Qg(n,i)}while(++r)}inc(e,r,n){if(e.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let i=`-${r}`.match(this.options.loose?_l[bl.PRERELEASELOOSE]:_l[bl.PRERELEASE]);if(!i||i[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(r){let o=[r,i];n===!1&&(o=[r]),Qg(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};XC.exports=Xg});var ZC=q((B$,JC)=>{"use strict";var YC=ba(),JI=(t,e,r=!1)=>{if(t instanceof YC)return t;try{return new YC(t,e)}catch(n){if(!r)return null;throw n}};JC.exports=JI});var tR=q((z$,eR)=>{"use strict";var Yg=class{constructor(){this.max=1e3,this.map=new Map}get(e){let r=this.map.get(e);if(r!==void 0)return this.map.delete(e),this.map.set(e,r),r}delete(e){return this.map.delete(e)}set(e,r){if(!this.delete(e)&&r!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,r)}return this}};eR.exports=Yg});var oo=q((K$,nR)=>{"use strict";var rR=ba(),ZI=(t,e,r)=>new rR(t,r).compare(new rR(e,r));nR.exports=ZI});var oR=q((V$,iR)=>{"use strict";var eA=oo(),tA=(t,e,r)=>eA(t,e,r)===0;iR.exports=tA});var aR=q((G$,sR)=>{"use strict";var rA=oo(),nA=(t,e,r)=>rA(t,e,r)!==0;sR.exports=nA});var cR=q((Q$,uR)=>{"use strict";var iA=oo(),oA=(t,e,r)=>iA(t,e,r)>0;uR.exports=oA});var dR=q((X$,lR)=>{"use strict";var sA=oo(),aA=(t,e,r)=>sA(t,e,r)>=0;lR.exports=aA});var hR=q((Y$,fR)=>{"use strict";var uA=oo(),cA=(t,e,r)=>uA(t,e,r)<0;fR.exports=cA});var gR=q((J$,pR)=>{"use strict";var lA=oo(),dA=(t,e,r)=>lA(t,e,r)<=0;pR.exports=dA});var yR=q((Z$,mR)=>{"use strict";var fA=oR(),hA=aR(),pA=cR(),gA=dR(),mA=hR(),yA=gR(),vA=(t,e,r,n)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t===r;case"!==":return typeof t=="object"&&(t=t.version),typeof r=="object"&&(r=r.version),t!==r;case"":case"=":case"==":return fA(t,r,n);case"!=":return hA(t,r,n);case">":return pA(t,r,n);case">=":return gA(t,r,n);case"<":return mA(t,r,n);case"<=":return yA(t,r,n);default:throw new TypeError(`Invalid operator: ${e}`)}};mR.exports=vA});var RR=q((eW,CR)=>{"use strict";var wa=Symbol("SemVer ANY"),em=class t{static get ANY(){return wa}constructor(e,r){if(r=vR(r),e instanceof t){if(e.loose===!!r.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),Zg("comparator",e,r),this.options=r,this.loose=!!r.loose,this.parse(e),this.semver===wa?this.value="":this.value=this.operator+this.semver.version,Zg("comp",this)}parse(e){let r=this.options.loose?_R[bR.COMPARATORLOOSE]:_R[bR.COMPARATOR],n=e.match(r);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new wR(n[2],this.options.loose):this.semver=wa}toString(){return this.value}test(e){if(Zg("Comparator.test",e,this.options.loose),this.semver===wa||e===wa)return!0;if(typeof e=="string")try{e=new wR(e,this.options)}catch{return!1}return Jg(e,this.operator,this.semver,this.options)}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new SR(e.value,r).test(this.value):e.operator===""?e.value===""?!0:new SR(this.value,r).test(e.semver):(r=vR(r),r.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||Jg(this.semver,"<",e.semver,r)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||Jg(this.semver,">",e.semver,r)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};CR.exports=em;var vR=ml(),{safeRe:_R,t:bR}=gl(),Jg=yR(),Zg=_a(),wR=ba(),SR=tm()});var tm=q((tW,PR)=>{"use strict";var _A=/\s+/g,rm=class t{constructor(e,r){if(r=wA(r),e instanceof t)return e.loose===!!r.loose&&e.includePrerelease===!!r.includePrerelease?e:new t(e.raw,r);if(e instanceof nm)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=e.trim().replace(_A," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(i=>!DR(i[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&PA(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let r=this.set[e];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let n=((this.options.includePrerelease&&DA)|(this.options.loose&&EA))+":"+e,i=TR.get(n);if(i)return i;let o=this.options.loose,a=o?Pr[Sr.HYPHENRANGELOOSE]:Pr[Sr.HYPHENRANGE];e=e.replace(a,MA(this.options.includePrerelease)),Pt("hyphen replace",e),e=e.replace(Pr[Sr.COMPARATORTRIM],CA),Pt("comparator trim",e),e=e.replace(Pr[Sr.TILDETRIM],RA),Pt("tilde trim",e),e=e.replace(Pr[Sr.CARETTRIM],TA),Pt("caret trim",e);let u=e.split(" ").map(y=>kA(y,this.options)).join(" ").split(/\s+/).map(y=>NA(y,this.options));o&&(u=u.filter(y=>(Pt("loose invalid filter",y,this.options),!!y.match(Pr[Sr.COMPARATORLOOSE])))),Pt("range list",u);let c=new Map,d=u.map(y=>new nm(y,this.options));for(let y of d){if(DR(y))return[y];c.set(y.value,y)}c.size>1&&c.has("")&&c.delete("");let f=[...c.values()];return TR.set(n,f),f}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(n=>ER(n,r)&&e.set.some(i=>ER(i,r)&&n.every(o=>i.every(a=>o.intersects(a,r)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new SA(e,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(jA(this.set[r],e,this.options))return!0;return!1}};PR.exports=rm;var bA=tR(),TR=new bA,wA=ml(),nm=RR(),Pt=_a(),SA=ba(),{safeRe:Pr,t:Sr,comparatorTrimReplace:CA,tildeTrimReplace:RA,caretTrimReplace:TA}=gl(),{FLAG_INCLUDE_PRERELEASE:DA,FLAG_LOOSE:EA}=pl(),DR=t=>t.value==="<0.0.0-0",PA=t=>t.value==="",ER=(t,e)=>{let r=!0,n=t.slice(),i=n.pop();for(;r&&n.length;)r=n.every(o=>i.intersects(o,e)),i=n.pop();return r},kA=(t,e)=>(t=t.replace(Pr[Sr.BUILD],""),Pt("comp",t,e),t=FA(t,e),Pt("caret",t),t=qA(t,e),Pt("tildes",t),t=IA(t,e),Pt("xrange",t),t=LA(t,e),Pt("stars",t),t),kr=t=>!t||t.toLowerCase()==="x"||t==="*",qA=(t,e)=>t.trim().split(/\s+/).map(r=>xA(r,e)).join(" "),xA=(t,e)=>{let r=e.loose?Pr[Sr.TILDELOOSE]:Pr[Sr.TILDE];return t.replace(r,(n,i,o,a,u)=>{Pt("tilde",t,n,i,o,a,u);let c;return kr(i)?c="":kr(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:kr(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:u?(Pt("replaceTilde pr",u),c=`>=${i}.${o}.${a}-${u} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Pt("tilde return",c),c})},FA=(t,e)=>t.trim().split(/\s+/).map(r=>OA(r,e)).join(" "),OA=(t,e)=>{Pt("caret",t,e);let r=e.loose?Pr[Sr.CARETLOOSE]:Pr[Sr.CARET],n=e.includePrerelease?"-0":"";return t.replace(r,(i,o,a,u,c)=>{Pt("caret",t,i,o,a,u,c);let d;return kr(o)?d="":kr(a)?d=`>=${o}.0.0${n} <${+o+1}.0.0-0`:kr(u)?o==="0"?d=`>=${o}.${a}.0${n} <${o}.${+a+1}.0-0`:d=`>=${o}.${a}.0${n} <${+o+1}.0.0-0`:c?(Pt("replaceCaret pr",c),o==="0"?a==="0"?d=`>=${o}.${a}.${u}-${c} <${o}.${a}.${+u+1}-0`:d=`>=${o}.${a}.${u}-${c} <${o}.${+a+1}.0-0`:d=`>=${o}.${a}.${u}-${c} <${+o+1}.0.0-0`):(Pt("no pr"),o==="0"?a==="0"?d=`>=${o}.${a}.${u}${n} <${o}.${a}.${+u+1}-0`:d=`>=${o}.${a}.${u}${n} <${o}.${+a+1}.0-0`:d=`>=${o}.${a}.${u} <${+o+1}.0.0-0`),Pt("caret return",d),d})},IA=(t,e)=>(Pt("replaceXRanges",t,e),t.split(/\s+/).map(r=>AA(r,e)).join(" ")),AA=(t,e)=>{t=t.trim();let r=e.loose?Pr[Sr.XRANGELOOSE]:Pr[Sr.XRANGE];return t.replace(r,(n,i,o,a,u,c)=>{Pt("xRange",t,n,i,o,a,u,c);let d=kr(o),f=d||kr(a),y=f||kr(u),g=y;return i==="="&&g&&(i=""),c=e.includePrerelease?"-0":"",d?i===">"||i==="<"?n="<0.0.0-0":n="*":i&&g?(f&&(a=0),u=0,i===">"?(i=">=",f?(o=+o+1,a=0,u=0):(a=+a+1,u=0)):i==="<="&&(i="<",f?o=+o+1:a=+a+1),i==="<"&&(c="-0"),n=`${i+o}.${a}.${u}${c}`):f?n=`>=${o}.0.0${c} <${+o+1}.0.0-0`:y&&(n=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Pt("xRange return",n),n})},LA=(t,e)=>(Pt("replaceStars",t,e),t.trim().replace(Pr[Sr.STAR],"")),NA=(t,e)=>(Pt("replaceGTE0",t,e),t.trim().replace(Pr[e.includePrerelease?Sr.GTE0PRE:Sr.GTE0],"")),MA=t=>(e,r,n,i,o,a,u,c,d,f,y,g)=>(kr(n)?r="":kr(i)?r=`>=${n}.0.0${t?"-0":""}`:kr(o)?r=`>=${n}.${i}.0${t?"-0":""}`:a?r=`>=${r}`:r=`>=${r}${t?"-0":""}`,kr(d)?c="":kr(f)?c=`<${+d+1}.0.0-0`:kr(y)?c=`<${d}.${+f+1}.0-0`:g?c=`<=${d}.${f}.${y}-${g}`:t?c=`<${d}.${f}.${+y+1}-0`:c=`<=${c}`,`${r} ${c}`.trim()),jA=(t,e,r)=>{for(let n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!r.includePrerelease){for(let n=0;n<t.length;n++)if(Pt(t[n].semver),t[n].semver!==nm.ANY&&t[n].semver.prerelease.length>0){let i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}});var qR=q((rW,kR)=>{"use strict";var $A=tm(),WA=(t,e,r)=>{try{e=new $A(e,r)}catch{return!1}return e.test(t)};kR.exports=WA});var FR=q(en=>{"use strict";var HA=en&&en.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),im=en&&en.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&HA(e,t,r)};Object.defineProperty(en,"__esModule",{value:!0});en.DiagnosticPullMode=en.vsdiag=void 0;im(We(),en);im(ot(),en);var xR=lp();Object.defineProperty(en,"vsdiag",{enumerable:!0,get:function(){return xR.vsdiag}});Object.defineProperty(en,"DiagnosticPullMode",{enumerable:!0,get:function(){return xR.DiagnosticPullMode}});im(zg(),en)});var LR=q(Br=>{"use strict";var UA=Br&&Br.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),AR=Br&&Br.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&UA(e,t,r)};Object.defineProperty(Br,"__esModule",{value:!0});Br.SettingMonitor=Br.LanguageClient=Br.TransportKind=void 0;var Jn=require("child_process"),om=require("fs"),sm=require("path"),qi=require("vscode"),Ft=un(),OR=zg(),BA=jC(),Lt=Kg(),zA=ZC(),KA=qR();AR(Kg(),Br);AR(FR(),Br);var IR="^1.82.0",Nt;(function(t){t[t.stdio=0]="stdio",t[t.ipc=1]="ipc",t[t.pipe=2]="pipe",t[t.socket=3]="socket"})(Nt||(Br.TransportKind=Nt={}));var ki;(function(t){function e(r){let n=r;return n&&n.kind===Nt.socket&&Ft.number(n.port)}t.isSocket=e})(ki||(ki={}));var am;(function(t){function e(r){return Ft.string(r.command)}t.is=e})(am||(am={}));var um;(function(t){function e(r){return Ft.string(r.module)}t.is=e})(um||(um={}));var cm;(function(t){function e(r){let n=r;return n&&n.writer!==void 0&&n.reader!==void 0}t.is=e})(cm||(cm={}));var lm;(function(t){function e(r){let n=r;return n&&n.process!==void 0&&typeof n.detached=="boolean"}t.is=e})(lm||(lm={}));var dm=class extends OR.BaseLanguageClient{constructor(e,r,n,i,o){let a,u,c,d,f;Ft.string(r)?(a=e,u=r,c=n,d=i,f=!!o):(a=e.toLowerCase(),u=e,c=r,d=n,f=i),f===void 0&&(f=!1),super(a,u,d),this._serverOptions=c,this._forceDebug=f,this._isInDebugMode=f;try{this.checkVersion()}catch(y){throw Ft.string(y.message)&&this.outputChannel.appendLine(y.message),y}}checkVersion(){let e=zA(qi.version);if(!e)throw new Error(`No valid VS Code version detected. Version string is: ${qi.version}`);if(e.prerelease&&e.prerelease.length>0&&(e.prerelease=[]),!KA(e,IR))throw new Error(`The language client requires VS Code version ${IR} but received version ${qi.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(e=>setTimeout(e,1e3)),await this.start()):await this.start()}stop(e=2e3){return super.stop(e).finally(()=>{if(this._serverProcess){let r=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(r),this._isDetached=void 0}})}checkProcessDied(e){!e||e.pid===void 0||setTimeout(()=>{try{e.pid!==void 0&&(process.kill(e.pid,0),(0,BA.terminate)(e))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(e){super.fillInitializeParams(e),e.processId===null&&(e.processId=process.pid)}createMessageTransports(e){function r(f,y){if(!f&&!y)return;let g=Object.create(null);return Object.keys(process.env).forEach(m=>g[m]=process.env[m]),y&&(g.ELECTRON_RUN_AS_NODE="1",g.ELECTRON_NO_ASAR="1"),f&&Object.keys(f).forEach(m=>g[m]=f[m]),g}let n=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],i=["--debug","--debug-brk","--inspect","--inspect-brk"];function o(){let f=process.execArgv;return f?f.some(y=>n.some(g=>y.startsWith(g))||i.some(g=>y===g)):!1}function a(f){if(f.stdin===null||f.stdout===null||f.stderr===null)throw new Error("Process created without stdio streams")}let u=this._serverOptions;if(Ft.func(u))return u().then(f=>{if(OR.MessageTransports.is(f))return this._isDetached=!!f.detached,f;if(cm.is(f))return this._isDetached=!!f.detached,{reader:new Lt.StreamMessageReader(f.reader),writer:new Lt.StreamMessageWriter(f.writer)};{let y;return lm.is(f)?(y=f.process,this._isDetached=f.detached):(y=f,this._isDetached=!1),y.stderr.on("data",g=>this.outputChannel.append(Ft.string(g)?g:g.toString(e))),{reader:new Lt.StreamMessageReader(y.stdout),writer:new Lt.StreamMessageWriter(y.stdin)}}});let c,d=u;return d.run||d.debug?this._forceDebug||o()?(c=d.debug,this._isInDebugMode=!0):(c=d.run,this._isInDebugMode=!1):c=u,this._getServerWorkingDir(c.options).then(f=>{if(um.is(c)&&c.module){let y=c,g=y.transport||Nt.stdio;if(y.runtime){let m=[],h=y.options??Object.create(null);h.execArgv&&h.execArgv.forEach(I=>m.push(I)),m.push(y.module),y.args&&y.args.forEach(I=>m.push(I));let S=Object.create(null);S.cwd=f,S.env=r(h.env,!1);let R=this._getRuntimePath(y.runtime,f),D;if(g===Nt.ipc?(S.stdio=[null,null,null,"ipc"],m.push("--node-ipc")):g===Nt.stdio?m.push("--stdio"):g===Nt.pipe?(D=(0,Lt.generateRandomPipeName)(),m.push(`--pipe=${D}`)):ki.isSocket(g)&&m.push(`--socket=${g.port}`),m.push(`--clientProcessId=${process.pid.toString()}`),g===Nt.ipc||g===Nt.stdio){let I=Jn.spawn(R,m,S);return!I||!I.pid?cs(I,`Launching server using runtime ${R} failed.`):(this._serverProcess=I,I.stderr.on("data",A=>this.outputChannel.append(Ft.string(A)?A:A.toString(e))),g===Nt.ipc?(I.stdout.on("data",A=>this.outputChannel.append(Ft.string(A)?A:A.toString(e))),Promise.resolve({reader:new Lt.IPCMessageReader(I),writer:new Lt.IPCMessageWriter(I)})):Promise.resolve({reader:new Lt.StreamMessageReader(I.stdout),writer:new Lt.StreamMessageWriter(I.stdin)}))}else{if(g===Nt.pipe)return(0,Lt.createClientPipeTransport)(D).then(I=>{let A=Jn.spawn(R,m,S);return!A||!A.pid?cs(A,`Launching server using runtime ${R} failed.`):(this._serverProcess=A,A.stderr.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),A.stdout.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),I.onConnected().then(N=>({reader:N[0],writer:N[1]})))});if(ki.isSocket(g))return(0,Lt.createClientSocketTransport)(g.port).then(I=>{let A=Jn.spawn(R,m,S);return!A||!A.pid?cs(A,`Launching server using runtime ${R} failed.`):(this._serverProcess=A,A.stderr.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),A.stdout.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),I.onConnected().then(N=>({reader:N[0],writer:N[1]})))})}}else{let m;return new Promise((h,S)=>{let R=(y.args&&y.args.slice())??[];g===Nt.ipc?R.push("--node-ipc"):g===Nt.stdio?R.push("--stdio"):g===Nt.pipe?(m=(0,Lt.generateRandomPipeName)(),R.push(`--pipe=${m}`)):ki.isSocket(g)&&R.push(`--socket=${g.port}`),R.push(`--clientProcessId=${process.pid.toString()}`);let D=y.options??Object.create(null);if(D.env=r(D.env,!0),D.execArgv=D.execArgv||[],D.cwd=f,D.silent=!0,g===Nt.ipc||g===Nt.stdio){let I=Jn.fork(y.module,R||[],D);a(I),this._serverProcess=I,I.stderr.on("data",A=>this.outputChannel.append(Ft.string(A)?A:A.toString(e))),g===Nt.ipc?(I.stdout.on("data",A=>this.outputChannel.append(Ft.string(A)?A:A.toString(e))),h({reader:new Lt.IPCMessageReader(this._serverProcess),writer:new Lt.IPCMessageWriter(this._serverProcess)})):h({reader:new Lt.StreamMessageReader(I.stdout),writer:new Lt.StreamMessageWriter(I.stdin)})}else g===Nt.pipe?(0,Lt.createClientPipeTransport)(m).then(I=>{let A=Jn.fork(y.module,R||[],D);a(A),this._serverProcess=A,A.stderr.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),A.stdout.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),I.onConnected().then(N=>{h({reader:N[0],writer:N[1]})},S)},S):ki.isSocket(g)&&(0,Lt.createClientSocketTransport)(g.port).then(I=>{let A=Jn.fork(y.module,R||[],D);a(A),this._serverProcess=A,A.stderr.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),A.stdout.on("data",N=>this.outputChannel.append(Ft.string(N)?N:N.toString(e))),I.onConnected().then(N=>{h({reader:N[0],writer:N[1]})},S)},S)})}}else if(am.is(c)&&c.command){let y=c,g=c.args!==void 0?c.args.slice(0):[],m,h=c.transport;if(h===Nt.stdio)g.push("--stdio");else if(h===Nt.pipe)m=(0,Lt.generateRandomPipeName)(),g.push(`--pipe=${m}`);else if(ki.isSocket(h))g.push(`--socket=${h.port}`);else if(h===Nt.ipc)throw new Error("Transport kind ipc is not support for command executable");let S=Object.assign({},y.options);if(S.cwd=S.cwd||f,h===void 0||h===Nt.stdio){let R=Jn.spawn(y.command,g,S);return!R||!R.pid?cs(R,`Launching server using command ${y.command} failed.`):(R.stderr.on("data",D=>this.outputChannel.append(Ft.string(D)?D:D.toString(e))),this._serverProcess=R,this._isDetached=!!S.detached,Promise.resolve({reader:new Lt.StreamMessageReader(R.stdout),writer:new Lt.StreamMessageWriter(R.stdin)}))}else{if(h===Nt.pipe)return(0,Lt.createClientPipeTransport)(m).then(R=>{let D=Jn.spawn(y.command,g,S);return!D||!D.pid?cs(D,`Launching server using command ${y.command} failed.`):(this._serverProcess=D,this._isDetached=!!S.detached,D.stderr.on("data",I=>this.outputChannel.append(Ft.string(I)?I:I.toString(e))),D.stdout.on("data",I=>this.outputChannel.append(Ft.string(I)?I:I.toString(e))),R.onConnected().then(I=>({reader:I[0],writer:I[1]})))});if(ki.isSocket(h))return(0,Lt.createClientSocketTransport)(h.port).then(R=>{let D=Jn.spawn(y.command,g,S);return!D||!D.pid?cs(D,`Launching server using command ${y.command} failed.`):(this._serverProcess=D,this._isDetached=!!S.detached,D.stderr.on("data",I=>this.outputChannel.append(Ft.string(I)?I:I.toString(e))),D.stdout.on("data",I=>this.outputChannel.append(Ft.string(I)?I:I.toString(e))),R.onConnected().then(I=>({reader:I[0],writer:I[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(u,null,4)))}).finally(()=>{this._serverProcess!==void 0&&this._serverProcess.on("exit",(f,y)=>{f!==null&&this.error(`Server process exited with code ${f}.`,void 0,!1),y!==null&&this.error(`Server process exited with signal ${y}.`,void 0,!1)})})}_getRuntimePath(e,r){if(sm.isAbsolute(e))return e;let n=this._mainGetRootPath();if(n!==void 0){let i=sm.join(n,e);if(om.existsSync(i))return i}if(r!==void 0){let i=sm.join(r,e);if(om.existsSync(i))return i}return e}_mainGetRootPath(){let e=qi.workspace.workspaceFolders;if(!e||e.length===0)return;let r=e[0];if(r.uri.scheme==="file")return r.uri.fsPath}_getServerWorkingDir(e){let r=e&&e.cwd;return r||(r=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),r?new Promise(n=>{om.lstat(r,(i,o)=>{n(!i&&o.isDirectory()?r:void 0)})}):Promise.resolve(void 0)}};Br.LanguageClient=dm;var fm=class{constructor(e,r){this._client=e,this._setting=r,this._listeners=[]}start(){return qi.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new qi.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let e=this._setting.indexOf("."),r=e>=0?this._setting.substr(0,e):this._setting,n=e>=0?this._setting.substr(e+1):void 0,i=n?qi.workspace.getConfiguration(r).get(n,!1):qi.workspace.getConfiguration(r);i&&this._client.needsStart()?this._client.start().catch(o=>this._client.error("Start failed after configuration change",o,"force")):!i&&this._client.needsStop()&&this._client.stop().catch(o=>this._client.error("Stop failed after configuration change",o,"force"))}};Br.SettingMonitor=fm;function cs(t,e){return t===null?Promise.reject(e):new Promise((r,n)=>{t.on("error",i=>{n(`${e} ${i}`)}),setImmediate(()=>n(e))})}});var MR=q((oW,NR)=>{"use strict";NR.exports=LR()});var HR=q((wl,WR)=>{(function(t,e){typeof wl=="object"&&typeof WR<"u"?e(wl):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.WebStreamsPolyfill={}))})(wl,function(t){"use strict";function e(){}function r(s){return typeof s=="object"&&s!==null||typeof s=="function"}let n=e;function i(s,l){try{Object.defineProperty(s,"name",{value:l,configurable:!0})}catch{}}let o=Promise,a=Promise.prototype.then,u=Promise.reject.bind(o);function c(s){return new o(s)}function d(s){return c(l=>l(s))}function f(s){return u(s)}function y(s,l,v){return a.call(s,l,v)}function g(s,l,v){y(y(s,l,v),void 0,n)}function m(s,l){g(s,l)}function h(s,l){g(s,void 0,l)}function S(s,l,v){return y(s,l,v)}function R(s){y(s,void 0,n)}let D=s=>{if(typeof queueMicrotask=="function")D=queueMicrotask;else{let l=d(void 0);D=v=>y(l,v)}return D(s)};function I(s,l,v){if(typeof s!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(s,l,v)}function A(s,l,v){try{return d(I(s,l,v))}catch(E){return f(E)}}let N=16384;class ee{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(l){let v=this._back,E=v;v._elements.length===N-1&&(E={_elements:[],_next:void 0}),v._elements.push(l),E!==v&&(this._back=E,v._next=E),++this._size}shift(){let l=this._front,v=l,E=this._cursor,W=E+1,J=l._elements,ie=J[E];return W===N&&(v=l._next,W=0),--this._size,this._cursor=W,l!==v&&(this._front=v),J[E]=void 0,ie}forEach(l){let v=this._cursor,E=this._front,W=E._elements;for(;(v!==W.length||E._next!==void 0)&&!(v===W.length&&(E=E._next,W=E._elements,v=0,W.length===0));)l(W[v]),++v}peek(){let l=this._front,v=this._cursor;return l._elements[v]}}let fe=Symbol("[[AbortSteps]]"),re=Symbol("[[ErrorSteps]]"),de=Symbol("[[CancelSteps]]"),se=Symbol("[[PullSteps]]"),_e=Symbol("[[ReleaseSteps]]");function G(s,l){s._ownerReadableStream=l,l._reader=s,l._state==="readable"?$(s):l._state==="closed"?V(s):H(s,l._storedError)}function K(s,l){let v=s._ownerReadableStream;return bn(v,l)}function j(s){let l=s._ownerReadableStream;l._state==="readable"?ne(s,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):P(s,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),l._readableStreamController[_e](),l._reader=void 0,s._ownerReadableStream=void 0}function X(s){return new TypeError("Cannot "+s+" a stream using a released reader")}function $(s){s._closedPromise=c((l,v)=>{s._closedPromise_resolve=l,s._closedPromise_reject=v})}function H(s,l){$(s),ne(s,l)}function V(s){$(s),ue(s)}function ne(s,l){s._closedPromise_reject!==void 0&&(R(s._closedPromise),s._closedPromise_reject(l),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0)}function P(s,l){H(s,l)}function ue(s){s._closedPromise_resolve!==void 0&&(s._closedPromise_resolve(void 0),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0)}let ye=Number.isFinite||function(s){return typeof s=="number"&&isFinite(s)},me=Math.trunc||function(s){return s<0?Math.ceil(s):Math.floor(s)};function L(s){return typeof s=="object"||typeof s=="function"}function Y(s,l){if(s!==void 0&&!L(s))throw new TypeError(`${l} is not an object.`)}function ae(s,l){if(typeof s!="function")throw new TypeError(`${l} is not a function.`)}function pe(s){return typeof s=="object"&&s!==null||typeof s=="function"}function Te(s,l){if(!pe(s))throw new TypeError(`${l} is not an object.`)}function Ce(s,l,v){if(s===void 0)throw new TypeError(`Parameter ${l} is required in '${v}'.`)}function He(s,l,v){if(s===void 0)throw new TypeError(`${l} is required in '${v}'.`)}function ct(s){return Number(s)}function Vt(s){return s===0?0:s}function vt(s){return Vt(me(s))}function jt(s,l){let E=Number.MAX_SAFE_INTEGER,W=Number(s);if(W=Vt(W),!ye(W))throw new TypeError(`${l} is not a finite number`);if(W=vt(W),W<0||W>E)throw new TypeError(`${l} is outside the accepted range of 0 to ${E}, inclusive`);return!ye(W)||W===0?0:W}function Ot(s,l){if(!di(s))throw new TypeError(`${l} is not a ReadableStream.`)}function wt(s){return new gt(s)}function Ir(s,l){s._reader._readRequests.push(l)}function er(s,l,v){let W=s._reader._readRequests.shift();v?W._closeSteps():W._chunkSteps(l)}function rr(s){return s._reader._readRequests.length}function St(s){let l=s._reader;return!(l===void 0||!ht(l))}class gt{constructor(l){if(Ce(l,1,"ReadableStreamDefaultReader"),Ot(l,"First parameter"),fi(l))throw new TypeError("This stream has already been locked for exclusive reading by another reader");G(this,l),this._readRequests=new ee}get closed(){return ht(this)?this._closedPromise:f($t("closed"))}cancel(l=void 0){return ht(this)?this._ownerReadableStream===void 0?f(X("cancel")):K(this,l):f($t("cancel"))}read(){if(!ht(this))return f($t("read"));if(this._ownerReadableStream===void 0)return f(X("read from"));let l,v,E=c((J,ie)=>{l=J,v=ie});return Bt(this,{_chunkSteps:J=>l({value:J,done:!1}),_closeSteps:()=>l({value:void 0,done:!0}),_errorSteps:J=>v(J)}),E}releaseLock(){if(!ht(this))throw $t("releaseLock");this._ownerReadableStream!==void 0&&Gt(this)}}Object.defineProperties(gt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(gt.prototype.cancel,"cancel"),i(gt.prototype.read,"read"),i(gt.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(gt.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function ht(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_readRequests")?!1:s instanceof gt}function Bt(s,l){let v=s._ownerReadableStream;v._disturbed=!0,v._state==="closed"?l._closeSteps():v._state==="errored"?l._errorSteps(v._storedError):v._readableStreamController[se](l)}function Gt(s){j(s);let l=new TypeError("Reader was released");Tr(s,l)}function Tr(s,l){let v=s._readRequests;s._readRequests=new ee,v.forEach(E=>{E._errorSteps(l)})}function $t(s){return new TypeError(`ReadableStreamDefaultReader.prototype.${s} can only be used on a ReadableStreamDefaultReader`)}let hr=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Ye{constructor(l,v){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=l,this._preventCancel=v}next(){let l=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?S(this._ongoingPromise,l,l):l(),this._ongoingPromise}return(l){let v=()=>this._returnSteps(l);return this._ongoingPromise?S(this._ongoingPromise,v,v):v()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let l=this._reader,v,E,W=c((ie,Se)=>{v=ie,E=Se});return Bt(l,{_chunkSteps:ie=>{this._ongoingPromise=void 0,D(()=>v({value:ie,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,j(l),v({value:void 0,done:!0})},_errorSteps:ie=>{this._ongoingPromise=void 0,this._isFinished=!0,j(l),E(ie)}}),W}_returnSteps(l){if(this._isFinished)return Promise.resolve({value:l,done:!0});this._isFinished=!0;let v=this._reader;if(!this._preventCancel){let E=K(v,l);return j(v),S(E,()=>({value:l,done:!0}))}return j(v),d({value:l,done:!0})}}let z={next(){return F(this)?this._asyncIteratorImpl.next():f(U("next"))},return(s){return F(this)?this._asyncIteratorImpl.return(s):f(U("return"))}};Object.setPrototypeOf(z,hr);function C(s,l){let v=wt(s),E=new Ye(v,l),W=Object.create(z);return W._asyncIteratorImpl=E,W}function F(s){if(!r(s)||!Object.prototype.hasOwnProperty.call(s,"_asyncIteratorImpl"))return!1;try{return s._asyncIteratorImpl instanceof Ye}catch{return!1}}function U(s){return new TypeError(`ReadableStreamAsyncIterator.${s} can only be used on a ReadableSteamAsyncIterator`)}let te=Number.isNaN||function(s){return s!==s};var we,ke,ve;function xe(s){return s.slice()}function Pe(s,l,v,E,W){new Uint8Array(s).set(new Uint8Array(v,E,W),l)}let Le=s=>(typeof s.transfer=="function"?Le=l=>l.transfer():typeof structuredClone=="function"?Le=l=>structuredClone(l,{transfer:[l]}):Le=l=>l,Le(s)),Oe=s=>(typeof s.detached=="boolean"?Oe=l=>l.detached:Oe=l=>l.byteLength===0,Oe(s));function st(s,l,v){if(s.slice)return s.slice(l,v);let E=v-l,W=new ArrayBuffer(E);return Pe(W,0,s,l,E),W}function mt(s,l){let v=s[l];if(v!=null){if(typeof v!="function")throw new TypeError(`${String(l)} is not a function`);return v}}function Qt(s){let l={[Symbol.iterator]:()=>s.iterator},v=async function*(){return yield*l}(),E=v.next;return{iterator:v,nextMethod:E,done:!1}}let on=(ve=(we=Symbol.asyncIterator)!==null&&we!==void 0?we:(ke=Symbol.for)===null||ke===void 0?void 0:ke.call(Symbol,"Symbol.asyncIterator"))!==null&&ve!==void 0?ve:"@@asyncIterator";function vn(s,l="sync",v){if(v===void 0)if(l==="async"){if(v=mt(s,on),v===void 0){let J=mt(s,Symbol.iterator),ie=vn(s,"sync",J);return Qt(ie)}}else v=mt(s,Symbol.iterator);if(v===void 0)throw new TypeError("The object is not iterable");let E=I(v,s,[]);if(!r(E))throw new TypeError("The iterator method must return an object");let W=E.next;return{iterator:E,nextMethod:W,done:!1}}function b(s){let l=I(s.nextMethod,s.iterator,[]);if(!r(l))throw new TypeError("The iterator.next() method must return an object");return l}function Z(s){return!!s.done}function Re(s){return s.value}function nt(s){return!(typeof s!="number"||te(s)||s<0)}function B(s){let l=st(s.buffer,s.byteOffset,s.byteOffset+s.byteLength);return new Uint8Array(l)}function w(s){let l=s._queue.shift();return s._queueTotalSize-=l.size,s._queueTotalSize<0&&(s._queueTotalSize=0),l.value}function x(s,l,v){if(!nt(v)||v===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");s._queue.push({value:l,size:v}),s._queueTotalSize+=v}function O(s){return s._queue.peek().value}function T(s){s._queue=new ee,s._queueTotalSize=0}function _(s){return s===DataView}function Q(s){return _(s.constructor)}function ce(s){return _(s)?1:s.BYTES_PER_ELEMENT}class Ae{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!nr(this))throw _d("view");return this._view}respond(l){if(!nr(this))throw _d("respond");if(Ce(l,1,"respond"),l=jt(l,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Oe(this._view.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be used as a response");au(this._associatedReadableByteStreamController,l)}respondWithNewView(l){if(!nr(this))throw _d("respondWithNewView");if(Ce(l,1,"respondWithNewView"),!ArrayBuffer.isView(l))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");if(Oe(l.buffer))throw new TypeError("The given view's buffer has been detached and so cannot be used as a response");uu(this._associatedReadableByteStreamController,l)}}Object.defineProperties(Ae.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),i(Ae.prototype.respond,"respond"),i(Ae.prototype.respondWithNewView,"respondWithNewView"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ae.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class it{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Je(this))throw Fs("byobRequest");return vd(this)}get desiredSize(){if(!Je(this))throw Fs("desiredSize");return Iy(this)}close(){if(!Je(this))throw Fs("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let l=this._controlledReadableByteStream._state;if(l!=="readable")throw new TypeError(`The stream (in ${l} state) is not in the readable state and cannot be closed`);xs(this)}enqueue(l){if(!Je(this))throw Fs("enqueue");if(Ce(l,1,"enqueue"),!ArrayBuffer.isView(l))throw new TypeError("chunk must be an array buffer view");if(l.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(l.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let v=this._controlledReadableByteStream._state;if(v!=="readable")throw new TypeError(`The stream (in ${v} state) is not in the readable state and cannot be enqueued to`);su(this,l)}error(l=void 0){if(!Je(this))throw Fs("error");sn(this,l)}[de](l){Ar(this),T(this);let v=this._cancelAlgorithm(l);return ou(this),v}[se](l){let v=this._controlledReadableByteStream;if(this._queueTotalSize>0){Oy(this,l);return}let E=this._autoAllocateChunkSize;if(E!==void 0){let W;try{W=new ArrayBuffer(E)}catch(ie){l._errorSteps(ie);return}let J={buffer:W,bufferByteLength:E,byteOffset:0,byteLength:E,bytesFilled:0,minimumFill:1,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(J)}Ir(v,l),zt(this)}[_e](){if(this._pendingPullIntos.length>0){let l=this._pendingPullIntos.peek();l.readerType="none",this._pendingPullIntos=new ee,this._pendingPullIntos.push(l)}}}Object.defineProperties(it.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),i(it.prototype.close,"close"),i(it.prototype.enqueue,"enqueue"),i(it.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(it.prototype,Symbol.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Je(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledReadableByteStream")?!1:s instanceof it}function nr(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_associatedReadableByteStreamController")?!1:s instanceof Ae}function zt(s){if(!iu(s))return;if(s._pulling){s._pullAgain=!0;return}s._pulling=!0;let v=s._pullAlgorithm();g(v,()=>(s._pulling=!1,s._pullAgain&&(s._pullAgain=!1,zt(s)),null),E=>(sn(s,E),null))}function Ar(s){at(s),s._pendingPullIntos=new ee}function Ge(s,l){let v=!1;s._state==="closed"&&(v=!0);let E=Vr(l);l.readerType==="default"?er(s,E,v):Ck(s,E,v)}function Vr(s){let l=s.bytesFilled,v=s.elementSize;return new s.viewConstructor(s.buffer,s.byteOffset,l/v)}function p(s,l,v,E){s._queue.push({buffer:l,byteOffset:v,byteLength:E}),s._queueTotalSize+=E}function M(s,l,v,E){let W;try{W=st(l,v,v+E)}catch(J){throw sn(s,J),J}p(s,W,0,E)}function le(s,l){l.bytesFilled>0&&M(s,l.buffer,l.byteOffset,l.bytesFilled),ui(s)}function qe(s,l){let v=Math.min(s._queueTotalSize,l.byteLength-l.bytesFilled),E=l.bytesFilled+v,W=v,J=!1,ie=E%l.elementSize,Se=E-ie;Se>=l.minimumFill&&(W=Se-l.bytesFilled,J=!0);let $e=s._queue;for(;W>0;){let Ie=$e.peek(),Be=Math.min(W,Ie.byteLength),Qe=l.byteOffset+l.bytesFilled;Pe(l.buffer,Qe,Ie.buffer,Ie.byteOffset,Be),Ie.byteLength===Be?$e.shift():(Ie.byteOffset+=Be,Ie.byteLength-=Be),s._queueTotalSize-=Be,Kt(s,Be,l),W-=Be}return J}function Kt(s,l,v){v.bytesFilled+=l}function Xt(s){s._queueTotalSize===0&&s._closeRequested?(ou(s),Ms(s._controlledReadableByteStream)):zt(s)}function at(s){s._byobRequest!==null&&(s._byobRequest._associatedReadableByteStreamController=void 0,s._byobRequest._view=null,s._byobRequest=null)}function Lr(s){for(;s._pendingPullIntos.length>0;){if(s._queueTotalSize===0)return;let l=s._pendingPullIntos.peek();qe(s,l)&&(ui(s),Ge(s._controlledReadableByteStream,l))}}function yt(s){let l=s._controlledReadableByteStream._reader;for(;l._readRequests.length>0;){if(s._queueTotalSize===0)return;let v=l._readRequests.shift();Oy(s,v)}}function bo(s,l,v,E){let W=s._controlledReadableByteStream,J=l.constructor,ie=ce(J),{byteOffset:Se,byteLength:$e}=l,Ie=v*ie,Be;try{Be=Le(l.buffer)}catch(_t){E._errorSteps(_t);return}let Qe={buffer:Be,bufferByteLength:Be.byteLength,byteOffset:Se,byteLength:$e,bytesFilled:0,minimumFill:Ie,elementSize:ie,viewConstructor:J,readerType:"byob"};if(s._pendingPullIntos.length>0){s._pendingPullIntos.push(Qe),Ny(W,E);return}if(W._state==="closed"){let _t=new J(Qe.buffer,Qe.byteOffset,0);E._closeSteps(_t);return}if(s._queueTotalSize>0){if(qe(s,Qe)){let _t=Vr(Qe);Xt(s),E._chunkSteps(_t);return}if(s._closeRequested){let _t=new TypeError("Insufficient bytes to fill elements in the given buffer");sn(s,_t),E._errorSteps(_t);return}}s._pendingPullIntos.push(Qe),Ny(W,E),zt(s)}function ru(s,l){l.readerType==="none"&&ui(s);let v=s._controlledReadableByteStream;if(bd(v))for(;My(v)>0;){let E=ui(s);Ge(v,E)}}function nu(s,l,v){if(Kt(s,l,v),v.readerType==="none"){le(s,v),Lr(s);return}if(v.bytesFilled<v.minimumFill)return;ui(s);let E=v.bytesFilled%v.elementSize;if(E>0){let W=v.byteOffset+v.bytesFilled;M(s,v.buffer,W-E,E)}v.bytesFilled-=E,Ge(s._controlledReadableByteStream,v),Lr(s)}function wo(s,l){let v=s._pendingPullIntos.peek();at(s),s._controlledReadableByteStream._state==="closed"?ru(s,v):nu(s,l,v),zt(s)}function ui(s){return s._pendingPullIntos.shift()}function iu(s){let l=s._controlledReadableByteStream;return l._state!=="readable"||s._closeRequested||!s._started?!1:!!(St(l)&&rr(l)>0||bd(l)&&My(l)>0||Iy(s)>0)}function ou(s){s._pullAlgorithm=void 0,s._cancelAlgorithm=void 0}function xs(s){let l=s._controlledReadableByteStream;if(!(s._closeRequested||l._state!=="readable")){if(s._queueTotalSize>0){s._closeRequested=!0;return}if(s._pendingPullIntos.length>0){let v=s._pendingPullIntos.peek();if(v.bytesFilled%v.elementSize!==0){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");throw sn(s,E),E}}ou(s),Ms(l)}}function su(s,l){let v=s._controlledReadableByteStream;if(s._closeRequested||v._state!=="readable")return;let{buffer:E,byteOffset:W,byteLength:J}=l;if(Oe(E))throw new TypeError("chunk's buffer is detached and so cannot be enqueued");let ie=Le(E);if(s._pendingPullIntos.length>0){let Se=s._pendingPullIntos.peek();if(Oe(Se.buffer))throw new TypeError("The BYOB request's buffer has been detached and so cannot be filled with an enqueued chunk");at(s),Se.buffer=Le(Se.buffer),Se.readerType==="none"&&le(s,Se)}if(St(v))if(yt(s),rr(v)===0)p(s,ie,W,J);else{s._pendingPullIntos.length>0&&ui(s);let Se=new Uint8Array(ie,W,J);er(v,Se,!1)}else bd(v)?(p(s,ie,W,J),Lr(s)):p(s,ie,W,J);zt(s)}function sn(s,l){let v=s._controlledReadableByteStream;v._state==="readable"&&(Ar(s),T(s),ou(s),uv(v,l))}function Oy(s,l){let v=s._queue.shift();s._queueTotalSize-=v.byteLength,Xt(s);let E=new Uint8Array(v.buffer,v.byteOffset,v.byteLength);l._chunkSteps(E)}function vd(s){if(s._byobRequest===null&&s._pendingPullIntos.length>0){let l=s._pendingPullIntos.peek(),v=new Uint8Array(l.buffer,l.byteOffset+l.bytesFilled,l.byteLength-l.bytesFilled),E=Object.create(Ae.prototype);_k(E,s,v),s._byobRequest=E}return s._byobRequest}function Iy(s){let l=s._controlledReadableByteStream._state;return l==="errored"?null:l==="closed"?0:s._strategyHWM-s._queueTotalSize}function au(s,l){let v=s._pendingPullIntos.peek();if(s._controlledReadableByteStream._state==="closed"){if(l!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(l===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(v.bytesFilled+l>v.byteLength)throw new RangeError("bytesWritten out of range")}v.buffer=Le(v.buffer),wo(s,l)}function uu(s,l){let v=s._pendingPullIntos.peek();if(s._controlledReadableByteStream._state==="closed"){if(l.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(l.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(v.byteOffset+v.bytesFilled!==l.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(v.bufferByteLength!==l.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(v.bytesFilled+l.byteLength>v.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let W=l.byteLength;v.buffer=Le(l.buffer),wo(s,W)}function Ay(s,l,v,E,W,J,ie){l._controlledReadableByteStream=s,l._pullAgain=!1,l._pulling=!1,l._byobRequest=null,l._queue=l._queueTotalSize=void 0,T(l),l._closeRequested=!1,l._started=!1,l._strategyHWM=J,l._pullAlgorithm=E,l._cancelAlgorithm=W,l._autoAllocateChunkSize=ie,l._pendingPullIntos=new ee,s._readableStreamController=l;let Se=v();g(d(Se),()=>(l._started=!0,zt(l),null),$e=>(sn(l,$e),null))}function vk(s,l,v){let E=Object.create(it.prototype),W,J,ie;l.start!==void 0?W=()=>l.start(E):W=()=>{},l.pull!==void 0?J=()=>l.pull(E):J=()=>d(void 0),l.cancel!==void 0?ie=$e=>l.cancel($e):ie=()=>d(void 0);let Se=l.autoAllocateChunkSize;if(Se===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Ay(s,E,W,J,ie,v,Se)}function _k(s,l,v){s._associatedReadableByteStreamController=l,s._view=v}function _d(s){return new TypeError(`ReadableStreamBYOBRequest.prototype.${s} can only be used on a ReadableStreamBYOBRequest`)}function Fs(s){return new TypeError(`ReadableByteStreamController.prototype.${s} can only be used on a ReadableByteStreamController`)}function bk(s,l){Y(s,l);let v=s?.mode;return{mode:v===void 0?void 0:wk(v,`${l} has member 'mode' that`)}}function wk(s,l){if(s=`${s}`,s!=="byob")throw new TypeError(`${l} '${s}' is not a valid enumeration value for ReadableStreamReaderMode`);return s}function Sk(s,l){var v;Y(s,l);let E=(v=s?.min)!==null&&v!==void 0?v:1;return{min:jt(E,`${l} has member 'min' that`)}}function Ly(s){return new ci(s)}function Ny(s,l){s._reader._readIntoRequests.push(l)}function Ck(s,l,v){let W=s._reader._readIntoRequests.shift();v?W._closeSteps(l):W._chunkSteps(l)}function My(s){return s._reader._readIntoRequests.length}function bd(s){let l=s._reader;return!(l===void 0||!$i(l))}class ci{constructor(l){if(Ce(l,1,"ReadableStreamBYOBReader"),Ot(l,"First parameter"),fi(l))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Je(l._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");G(this,l),this._readIntoRequests=new ee}get closed(){return $i(this)?this._closedPromise:f(cu("closed"))}cancel(l=void 0){return $i(this)?this._ownerReadableStream===void 0?f(X("cancel")):K(this,l):f(cu("cancel"))}read(l,v={}){if(!$i(this))return f(cu("read"));if(!ArrayBuffer.isView(l))return f(new TypeError("view must be an array buffer view"));if(l.byteLength===0)return f(new TypeError("view must have non-zero byteLength"));if(l.buffer.byteLength===0)return f(new TypeError("view's buffer must have non-zero byteLength"));if(Oe(l.buffer))return f(new TypeError("view's buffer has been detached"));let E;try{E=Sk(v,"options")}catch(Ie){return f(Ie)}let W=E.min;if(W===0)return f(new TypeError("options.min must be greater than 0"));if(Q(l)){if(W>l.byteLength)return f(new RangeError("options.min must be less than or equal to view's byteLength"))}else if(W>l.length)return f(new RangeError("options.min must be less than or equal to view's length"));if(this._ownerReadableStream===void 0)return f(X("read from"));let J,ie,Se=c((Ie,Be)=>{J=Ie,ie=Be});return jy(this,l,W,{_chunkSteps:Ie=>J({value:Ie,done:!1}),_closeSteps:Ie=>J({value:Ie,done:!0}),_errorSteps:Ie=>ie(Ie)}),Se}releaseLock(){if(!$i(this))throw cu("releaseLock");this._ownerReadableStream!==void 0&&Rk(this)}}Object.defineProperties(ci.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),i(ci.prototype.cancel,"cancel"),i(ci.prototype.read,"read"),i(ci.prototype.releaseLock,"releaseLock"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(ci.prototype,Symbol.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function $i(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_readIntoRequests")?!1:s instanceof ci}function jy(s,l,v,E){let W=s._ownerReadableStream;W._disturbed=!0,W._state==="errored"?E._errorSteps(W._storedError):bo(W._readableStreamController,l,v,E)}function Rk(s){j(s);let l=new TypeError("Reader was released");$y(s,l)}function $y(s,l){let v=s._readIntoRequests;s._readIntoRequests=new ee,v.forEach(E=>{E._errorSteps(l)})}function cu(s){return new TypeError(`ReadableStreamBYOBReader.prototype.${s} can only be used on a ReadableStreamBYOBReader`)}function Os(s,l){let{highWaterMark:v}=s;if(v===void 0)return l;if(te(v)||v<0)throw new RangeError("Invalid highWaterMark");return v}function lu(s){let{size:l}=s;return l||(()=>1)}function du(s,l){Y(s,l);let v=s?.highWaterMark,E=s?.size;return{highWaterMark:v===void 0?void 0:ct(v),size:E===void 0?void 0:Tk(E,`${l} has member 'size' that`)}}function Tk(s,l){return ae(s,l),v=>ct(s(v))}function Dk(s,l){Y(s,l);let v=s?.abort,E=s?.close,W=s?.start,J=s?.type,ie=s?.write;return{abort:v===void 0?void 0:Ek(v,s,`${l} has member 'abort' that`),close:E===void 0?void 0:Pk(E,s,`${l} has member 'close' that`),start:W===void 0?void 0:kk(W,s,`${l} has member 'start' that`),write:ie===void 0?void 0:qk(ie,s,`${l} has member 'write' that`),type:J}}function Ek(s,l,v){return ae(s,v),E=>A(s,l,[E])}function Pk(s,l,v){return ae(s,v),()=>A(s,l,[])}function kk(s,l,v){return ae(s,v),E=>I(s,l,[E])}function qk(s,l,v){return ae(s,v),(E,W)=>A(s,l,[E,W])}function Wy(s,l){if(!So(s))throw new TypeError(`${l} is not a WritableStream.`)}function xk(s){if(typeof s!="object"||s===null)return!1;try{return typeof s.aborted=="boolean"}catch{return!1}}let Fk=typeof AbortController=="function";function Ok(){if(Fk)return new AbortController}class li{constructor(l={},v={}){l===void 0?l=null:Te(l,"First parameter");let E=du(v,"Second parameter"),W=Dk(l,"First parameter");if(Uy(this),W.type!==void 0)throw new RangeError("Invalid type is specified");let ie=lu(E),Se=Os(E,1);Vk(this,W,Se,ie)}get locked(){if(!So(this))throw mu("locked");return Co(this)}abort(l=void 0){return So(this)?Co(this)?f(new TypeError("Cannot abort a stream that already has a writer")):fu(this,l):f(mu("abort"))}close(){return So(this)?Co(this)?f(new TypeError("Cannot close a stream that already has a writer")):xn(this)?f(new TypeError("Cannot close an already-closing stream")):By(this):f(mu("close"))}getWriter(){if(!So(this))throw mu("getWriter");return Hy(this)}}Object.defineProperties(li.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),i(li.prototype.abort,"abort"),i(li.prototype.close,"close"),i(li.prototype.getWriter,"getWriter"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(li.prototype,Symbol.toStringTag,{value:"WritableStream",configurable:!0});function Hy(s){return new Hn(s)}function Ik(s,l,v,E,W=1,J=()=>1){let ie=Object.create(li.prototype);Uy(ie);let Se=Object.create(Ro.prototype);return Xy(ie,Se,s,l,v,E,W,J),ie}function Uy(s){s._state="writable",s._storedError=void 0,s._writer=void 0,s._writableStreamController=void 0,s._writeRequests=new ee,s._inFlightWriteRequest=void 0,s._closeRequest=void 0,s._inFlightCloseRequest=void 0,s._pendingAbortRequest=void 0,s._backpressure=!1}function So(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_writableStreamController")?!1:s instanceof li}function Co(s){return s._writer!==void 0}function fu(s,l){var v;if(s._state==="closed"||s._state==="errored")return d(void 0);s._writableStreamController._abortReason=l,(v=s._writableStreamController._abortController)===null||v===void 0||v.abort(l);let E=s._state;if(E==="closed"||E==="errored")return d(void 0);if(s._pendingAbortRequest!==void 0)return s._pendingAbortRequest._promise;let W=!1;E==="erroring"&&(W=!0,l=void 0);let J=c((ie,Se)=>{s._pendingAbortRequest={_promise:void 0,_resolve:ie,_reject:Se,_reason:l,_wasAlreadyErroring:W}});return s._pendingAbortRequest._promise=J,W||Sd(s,l),J}function By(s){let l=s._state;if(l==="closed"||l==="errored")return f(new TypeError(`The stream (in ${l} state) is not in the writable state and cannot be closed`));let v=c((W,J)=>{let ie={_resolve:W,_reject:J};s._closeRequest=ie}),E=s._writer;return E!==void 0&&s._backpressure&&l==="writable"&&qd(E),Gk(s._writableStreamController),v}function Ak(s){return c((v,E)=>{let W={_resolve:v,_reject:E};s._writeRequests.push(W)})}function wd(s,l){if(s._state==="writable"){Sd(s,l);return}Cd(s)}function Sd(s,l){let v=s._writableStreamController;s._state="erroring",s._storedError=l;let E=s._writer;E!==void 0&&Ky(E,l),!$k(s)&&v._started&&Cd(s)}function Cd(s){s._state="errored",s._writableStreamController[re]();let l=s._storedError;if(s._writeRequests.forEach(W=>{W._reject(l)}),s._writeRequests=new ee,s._pendingAbortRequest===void 0){hu(s);return}let v=s._pendingAbortRequest;if(s._pendingAbortRequest=void 0,v._wasAlreadyErroring){v._reject(l),hu(s);return}let E=s._writableStreamController[fe](v._reason);g(E,()=>(v._resolve(),hu(s),null),W=>(v._reject(W),hu(s),null))}function Lk(s){s._inFlightWriteRequest._resolve(void 0),s._inFlightWriteRequest=void 0}function Nk(s,l){s._inFlightWriteRequest._reject(l),s._inFlightWriteRequest=void 0,wd(s,l)}function Mk(s){s._inFlightCloseRequest._resolve(void 0),s._inFlightCloseRequest=void 0,s._state==="erroring"&&(s._storedError=void 0,s._pendingAbortRequest!==void 0&&(s._pendingAbortRequest._resolve(),s._pendingAbortRequest=void 0)),s._state="closed";let v=s._writer;v!==void 0&&ev(v)}function jk(s,l){s._inFlightCloseRequest._reject(l),s._inFlightCloseRequest=void 0,s._pendingAbortRequest!==void 0&&(s._pendingAbortRequest._reject(l),s._pendingAbortRequest=void 0),wd(s,l)}function xn(s){return!(s._closeRequest===void 0&&s._inFlightCloseRequest===void 0)}function $k(s){return!(s._inFlightWriteRequest===void 0&&s._inFlightCloseRequest===void 0)}function Wk(s){s._inFlightCloseRequest=s._closeRequest,s._closeRequest=void 0}function Hk(s){s._inFlightWriteRequest=s._writeRequests.shift()}function hu(s){s._closeRequest!==void 0&&(s._closeRequest._reject(s._storedError),s._closeRequest=void 0);let l=s._writer;l!==void 0&&Pd(l,s._storedError)}function Rd(s,l){let v=s._writer;v!==void 0&&l!==s._backpressure&&(l?tq(v):qd(v)),s._backpressure=l}class Hn{constructor(l){if(Ce(l,1,"WritableStreamDefaultWriter"),Wy(l,"First parameter"),Co(l))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=l,l._writer=this;let v=l._state;if(v==="writable")!xn(l)&&l._backpressure?vu(this):tv(this),yu(this);else if(v==="erroring")kd(this,l._storedError),yu(this);else if(v==="closed")tv(this),Zk(this);else{let E=l._storedError;kd(this,E),Zy(this,E)}}get closed(){return Wi(this)?this._closedPromise:f(Hi("closed"))}get desiredSize(){if(!Wi(this))throw Hi("desiredSize");if(this._ownerWritableStream===void 0)throw As("desiredSize");return Kk(this)}get ready(){return Wi(this)?this._readyPromise:f(Hi("ready"))}abort(l=void 0){return Wi(this)?this._ownerWritableStream===void 0?f(As("abort")):Uk(this,l):f(Hi("abort"))}close(){if(!Wi(this))return f(Hi("close"));let l=this._ownerWritableStream;return l===void 0?f(As("close")):xn(l)?f(new TypeError("Cannot close an already-closing stream")):zy(this)}releaseLock(){if(!Wi(this))throw Hi("releaseLock");this._ownerWritableStream!==void 0&&Vy(this)}write(l=void 0){return Wi(this)?this._ownerWritableStream===void 0?f(As("write to")):Gy(this,l):f(Hi("write"))}}Object.defineProperties(Hn.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),i(Hn.prototype.abort,"abort"),i(Hn.prototype.close,"close"),i(Hn.prototype.releaseLock,"releaseLock"),i(Hn.prototype.write,"write"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Hn.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Wi(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_ownerWritableStream")?!1:s instanceof Hn}function Uk(s,l){let v=s._ownerWritableStream;return fu(v,l)}function zy(s){let l=s._ownerWritableStream;return By(l)}function Bk(s){let l=s._ownerWritableStream,v=l._state;return xn(l)||v==="closed"?d(void 0):v==="errored"?f(l._storedError):zy(s)}function zk(s,l){s._closedPromiseState==="pending"?Pd(s,l):eq(s,l)}function Ky(s,l){s._readyPromiseState==="pending"?rv(s,l):rq(s,l)}function Kk(s){let l=s._ownerWritableStream,v=l._state;return v==="errored"||v==="erroring"?null:v==="closed"?0:Yy(l._writableStreamController)}function Vy(s){let l=s._ownerWritableStream,v=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Ky(s,v),zk(s,v),l._writer=void 0,s._ownerWritableStream=void 0}function Gy(s,l){let v=s._ownerWritableStream,E=v._writableStreamController,W=Qk(E,l);if(v!==s._ownerWritableStream)return f(As("write to"));let J=v._state;if(J==="errored")return f(v._storedError);if(xn(v)||J==="closed")return f(new TypeError("The stream is closing or closed and cannot be written to"));if(J==="erroring")return f(v._storedError);let ie=Ak(v);return Xk(E,l,W),ie}let Qy={};class Ro{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Td(this))throw Ed("abortReason");return this._abortReason}get signal(){if(!Td(this))throw Ed("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(l=void 0){if(!Td(this))throw Ed("error");this._controlledWritableStream._state==="writable"&&Jy(this,l)}[fe](l){let v=this._abortAlgorithm(l);return pu(this),v}[re](){T(this)}}Object.defineProperties(Ro.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ro.prototype,Symbol.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Td(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledWritableStream")?!1:s instanceof Ro}function Xy(s,l,v,E,W,J,ie,Se){l._controlledWritableStream=s,s._writableStreamController=l,l._queue=void 0,l._queueTotalSize=void 0,T(l),l._abortReason=void 0,l._abortController=Ok(),l._started=!1,l._strategySizeAlgorithm=Se,l._strategyHWM=ie,l._writeAlgorithm=E,l._closeAlgorithm=W,l._abortAlgorithm=J;let $e=Dd(l);Rd(s,$e);let Ie=v(),Be=d(Ie);g(Be,()=>(l._started=!0,gu(l),null),Qe=>(l._started=!0,wd(s,Qe),null))}function Vk(s,l,v,E){let W=Object.create(Ro.prototype),J,ie,Se,$e;l.start!==void 0?J=()=>l.start(W):J=()=>{},l.write!==void 0?ie=Ie=>l.write(Ie,W):ie=()=>d(void 0),l.close!==void 0?Se=()=>l.close():Se=()=>d(void 0),l.abort!==void 0?$e=Ie=>l.abort(Ie):$e=()=>d(void 0),Xy(s,W,J,ie,Se,$e,v,E)}function pu(s){s._writeAlgorithm=void 0,s._closeAlgorithm=void 0,s._abortAlgorithm=void 0,s._strategySizeAlgorithm=void 0}function Gk(s){x(s,Qy,0),gu(s)}function Qk(s,l){try{return s._strategySizeAlgorithm(l)}catch(v){return Is(s,v),1}}function Yy(s){return s._strategyHWM-s._queueTotalSize}function Xk(s,l,v){try{x(s,l,v)}catch(W){Is(s,W);return}let E=s._controlledWritableStream;if(!xn(E)&&E._state==="writable"){let W=Dd(s);Rd(E,W)}gu(s)}function gu(s){let l=s._controlledWritableStream;if(!s._started||l._inFlightWriteRequest!==void 0)return;if(l._state==="erroring"){Cd(l);return}if(s._queue.length===0)return;let E=O(s);E===Qy?Yk(s):Jk(s,E)}function Is(s,l){s._controlledWritableStream._state==="writable"&&Jy(s,l)}function Yk(s){let l=s._controlledWritableStream;Wk(l),w(s);let v=s._closeAlgorithm();pu(s),g(v,()=>(Mk(l),null),E=>(jk(l,E),null))}function Jk(s,l){let v=s._controlledWritableStream;Hk(v);let E=s._writeAlgorithm(l);g(E,()=>{Lk(v);let W=v._state;if(w(s),!xn(v)&&W==="writable"){let J=Dd(s);Rd(v,J)}return gu(s),null},W=>(v._state==="writable"&&pu(s),Nk(v,W),null))}function Dd(s){return Yy(s)<=0}function Jy(s,l){let v=s._controlledWritableStream;pu(s),Sd(v,l)}function mu(s){return new TypeError(`WritableStream.prototype.${s} can only be used on a WritableStream`)}function Ed(s){return new TypeError(`WritableStreamDefaultController.prototype.${s} can only be used on a WritableStreamDefaultController`)}function Hi(s){return new TypeError(`WritableStreamDefaultWriter.prototype.${s} can only be used on a WritableStreamDefaultWriter`)}function As(s){return new TypeError("Cannot "+s+" a stream using a released writer")}function yu(s){s._closedPromise=c((l,v)=>{s._closedPromise_resolve=l,s._closedPromise_reject=v,s._closedPromiseState="pending"})}function Zy(s,l){yu(s),Pd(s,l)}function Zk(s){yu(s),ev(s)}function Pd(s,l){s._closedPromise_reject!==void 0&&(R(s._closedPromise),s._closedPromise_reject(l),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0,s._closedPromiseState="rejected")}function eq(s,l){Zy(s,l)}function ev(s){s._closedPromise_resolve!==void 0&&(s._closedPromise_resolve(void 0),s._closedPromise_resolve=void 0,s._closedPromise_reject=void 0,s._closedPromiseState="resolved")}function vu(s){s._readyPromise=c((l,v)=>{s._readyPromise_resolve=l,s._readyPromise_reject=v}),s._readyPromiseState="pending"}function kd(s,l){vu(s),rv(s,l)}function tv(s){vu(s),qd(s)}function rv(s,l){s._readyPromise_reject!==void 0&&(R(s._readyPromise),s._readyPromise_reject(l),s._readyPromise_resolve=void 0,s._readyPromise_reject=void 0,s._readyPromiseState="rejected")}function tq(s){vu(s)}function rq(s,l){kd(s,l)}function qd(s){s._readyPromise_resolve!==void 0&&(s._readyPromise_resolve(void 0),s._readyPromise_resolve=void 0,s._readyPromise_reject=void 0,s._readyPromiseState="fulfilled")}function nq(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof global<"u")return global}let xd=nq();function iq(s){if(!(typeof s=="function"||typeof s=="object")||s.name!=="DOMException")return!1;try{return new s,!0}catch{return!1}}function oq(){let s=xd?.DOMException;return iq(s)?s:void 0}function sq(){let s=function(v,E){this.message=v||"",this.name=E||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return i(s,"DOMException"),s.prototype=Object.create(Error.prototype),Object.defineProperty(s.prototype,"constructor",{value:s,writable:!0,configurable:!0}),s}let aq=oq()||sq();function nv(s,l,v,E,W,J){let ie=wt(s),Se=Hy(l);s._disturbed=!0;let $e=!1,Ie=d(void 0);return c((Be,Qe)=>{let _t;if(J!==void 0){if(_t=()=>{let Ne=J.reason!==void 0?J.reason:new aq("Aborted","AbortError"),Ze=[];E||Ze.push(()=>l._state==="writable"?fu(l,Ne):d(void 0)),W||Ze.push(()=>s._state==="readable"?bn(s,Ne):d(void 0)),Nr(()=>Promise.all(Ze.map(Ct=>Ct())),!0,Ne)},J.aborted){_t();return}J.addEventListener("abort",_t)}function wn(){return c((Ne,Ze)=>{function Ct(Gr){Gr?Ne():y(Po(),Ct,Ze)}Ct(!1)})}function Po(){return $e?d(!0):y(Se._readyPromise,()=>c((Ne,Ze)=>{Bt(ie,{_chunkSteps:Ct=>{Ie=y(Gy(Se,Ct),void 0,e),Ne(!1)},_closeSteps:()=>Ne(!0),_errorSteps:Ze})}))}if(Bn(s,ie._closedPromise,Ne=>(E?an(!0,Ne):Nr(()=>fu(l,Ne),!0,Ne),null)),Bn(l,Se._closedPromise,Ne=>(W?an(!0,Ne):Nr(()=>bn(s,Ne),!0,Ne),null)),Dr(s,ie._closedPromise,()=>(v?an():Nr(()=>Bk(Se)),null)),xn(l)||l._state==="closed"){let Ne=new TypeError("the destination writable stream closed before all data could be piped to it");W?an(!0,Ne):Nr(()=>bn(s,Ne),!0,Ne)}R(wn());function pi(){let Ne=Ie;return y(Ie,()=>Ne!==Ie?pi():void 0)}function Bn(Ne,Ze,Ct){Ne._state==="errored"?Ct(Ne._storedError):h(Ze,Ct)}function Dr(Ne,Ze,Ct){Ne._state==="closed"?Ct():m(Ze,Ct)}function Nr(Ne,Ze,Ct){if($e)return;$e=!0,l._state==="writable"&&!xn(l)?m(pi(),Gr):Gr();function Gr(){return g(Ne(),()=>zn(Ze,Ct),ko=>zn(!0,ko)),null}}function an(Ne,Ze){$e||($e=!0,l._state==="writable"&&!xn(l)?m(pi(),()=>zn(Ne,Ze)):zn(Ne,Ze))}function zn(Ne,Ze){return Vy(Se),j(ie),J!==void 0&&J.removeEventListener("abort",_t),Ne?Qe(Ze):Be(void 0),null}})}class Un{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!_u(this))throw wu("desiredSize");return Fd(this)}close(){if(!_u(this))throw wu("close");if(!Do(this))throw new TypeError("The stream is not in a state that permits close");Ui(this)}enqueue(l=void 0){if(!_u(this))throw wu("enqueue");if(!Do(this))throw new TypeError("The stream is not in a state that permits enqueue");return To(this,l)}error(l=void 0){if(!_u(this))throw wu("error");_n(this,l)}[de](l){T(this);let v=this._cancelAlgorithm(l);return bu(this),v}[se](l){let v=this._controlledReadableStream;if(this._queue.length>0){let E=w(this);this._closeRequested&&this._queue.length===0?(bu(this),Ms(v)):Ls(this),l._chunkSteps(E)}else Ir(v,l),Ls(this)}[_e](){}}Object.defineProperties(Un.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),i(Un.prototype.close,"close"),i(Un.prototype.enqueue,"enqueue"),i(Un.prototype.error,"error"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Un.prototype,Symbol.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function _u(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledReadableStream")?!1:s instanceof Un}function Ls(s){if(!iv(s))return;if(s._pulling){s._pullAgain=!0;return}s._pulling=!0;let v=s._pullAlgorithm();g(v,()=>(s._pulling=!1,s._pullAgain&&(s._pullAgain=!1,Ls(s)),null),E=>(_n(s,E),null))}function iv(s){let l=s._controlledReadableStream;return!Do(s)||!s._started?!1:!!(fi(l)&&rr(l)>0||Fd(s)>0)}function bu(s){s._pullAlgorithm=void 0,s._cancelAlgorithm=void 0,s._strategySizeAlgorithm=void 0}function Ui(s){if(!Do(s))return;let l=s._controlledReadableStream;s._closeRequested=!0,s._queue.length===0&&(bu(s),Ms(l))}function To(s,l){if(!Do(s))return;let v=s._controlledReadableStream;if(fi(v)&&rr(v)>0)er(v,l,!1);else{let E;try{E=s._strategySizeAlgorithm(l)}catch(W){throw _n(s,W),W}try{x(s,l,E)}catch(W){throw _n(s,W),W}}Ls(s)}function _n(s,l){let v=s._controlledReadableStream;v._state==="readable"&&(T(s),bu(s),uv(v,l))}function Fd(s){let l=s._controlledReadableStream._state;return l==="errored"?null:l==="closed"?0:s._strategyHWM-s._queueTotalSize}function uq(s){return!iv(s)}function Do(s){let l=s._controlledReadableStream._state;return!s._closeRequested&&l==="readable"}function ov(s,l,v,E,W,J,ie){l._controlledReadableStream=s,l._queue=void 0,l._queueTotalSize=void 0,T(l),l._started=!1,l._closeRequested=!1,l._pullAgain=!1,l._pulling=!1,l._strategySizeAlgorithm=ie,l._strategyHWM=J,l._pullAlgorithm=E,l._cancelAlgorithm=W,s._readableStreamController=l;let Se=v();g(d(Se),()=>(l._started=!0,Ls(l),null),$e=>(_n(l,$e),null))}function cq(s,l,v,E){let W=Object.create(Un.prototype),J,ie,Se;l.start!==void 0?J=()=>l.start(W):J=()=>{},l.pull!==void 0?ie=()=>l.pull(W):ie=()=>d(void 0),l.cancel!==void 0?Se=$e=>l.cancel($e):Se=()=>d(void 0),ov(s,W,J,ie,Se,v,E)}function wu(s){return new TypeError(`ReadableStreamDefaultController.prototype.${s} can only be used on a ReadableStreamDefaultController`)}function lq(s,l){return Je(s._readableStreamController)?fq(s):dq(s)}function dq(s,l){let v=wt(s),E=!1,W=!1,J=!1,ie=!1,Se,$e,Ie,Be,Qe,_t=c(Dr=>{Qe=Dr});function wn(){return E?(W=!0,d(void 0)):(E=!0,Bt(v,{_chunkSteps:Nr=>{D(()=>{W=!1;let an=Nr,zn=Nr;J||To(Ie._readableStreamController,an),ie||To(Be._readableStreamController,zn),E=!1,W&&wn()})},_closeSteps:()=>{E=!1,J||Ui(Ie._readableStreamController),ie||Ui(Be._readableStreamController),(!J||!ie)&&Qe(void 0)},_errorSteps:()=>{E=!1}}),d(void 0))}function Po(Dr){if(J=!0,Se=Dr,ie){let Nr=xe([Se,$e]),an=bn(s,Nr);Qe(an)}return _t}function pi(Dr){if(ie=!0,$e=Dr,J){let Nr=xe([Se,$e]),an=bn(s,Nr);Qe(an)}return _t}function Bn(){}return Ie=Ns(Bn,wn,Po),Be=Ns(Bn,wn,pi),h(v._closedPromise,Dr=>(_n(Ie._readableStreamController,Dr),_n(Be._readableStreamController,Dr),(!J||!ie)&&Qe(void 0),null)),[Ie,Be]}function fq(s){let l=wt(s),v=!1,E=!1,W=!1,J=!1,ie=!1,Se,$e,Ie,Be,Qe,_t=c(Ne=>{Qe=Ne});function wn(Ne){h(Ne._closedPromise,Ze=>(Ne!==l||(sn(Ie._readableStreamController,Ze),sn(Be._readableStreamController,Ze),(!J||!ie)&&Qe(void 0)),null))}function Po(){$i(l)&&(j(l),l=wt(s),wn(l)),Bt(l,{_chunkSteps:Ze=>{D(()=>{E=!1,W=!1;let Ct=Ze,Gr=Ze;if(!J&&!ie)try{Gr=B(Ze)}catch(ko){sn(Ie._readableStreamController,ko),sn(Be._readableStreamController,ko),Qe(bn(s,ko));return}J||su(Ie._readableStreamController,Ct),ie||su(Be._readableStreamController,Gr),v=!1,E?Bn():W&&Dr()})},_closeSteps:()=>{v=!1,J||xs(Ie._readableStreamController),ie||xs(Be._readableStreamController),Ie._readableStreamController._pendingPullIntos.length>0&&au(Ie._readableStreamController,0),Be._readableStreamController._pendingPullIntos.length>0&&au(Be._readableStreamController,0),(!J||!ie)&&Qe(void 0)},_errorSteps:()=>{v=!1}})}function pi(Ne,Ze){ht(l)&&(j(l),l=Ly(s),wn(l));let Ct=Ze?Be:Ie,Gr=Ze?Ie:Be;jy(l,Ne,1,{_chunkSteps:qo=>{D(()=>{E=!1,W=!1;let xo=Ze?ie:J;if(Ze?J:ie)xo||uu(Ct._readableStreamController,qo);else{let wv;try{wv=B(qo)}catch(Nd){sn(Ct._readableStreamController,Nd),sn(Gr._readableStreamController,Nd),Qe(bn(s,Nd));return}xo||uu(Ct._readableStreamController,qo),su(Gr._readableStreamController,wv)}v=!1,E?Bn():W&&Dr()})},_closeSteps:qo=>{v=!1;let xo=Ze?ie:J,ku=Ze?J:ie;xo||xs(Ct._readableStreamController),ku||xs(Gr._readableStreamController),qo!==void 0&&(xo||uu(Ct._readableStreamController,qo),!ku&&Gr._readableStreamController._pendingPullIntos.length>0&&au(Gr._readableStreamController,0)),(!xo||!ku)&&Qe(void 0)},_errorSteps:()=>{v=!1}})}function Bn(){if(v)return E=!0,d(void 0);v=!0;let Ne=vd(Ie._readableStreamController);return Ne===null?Po():pi(Ne._view,!1),d(void 0)}function Dr(){if(v)return W=!0,d(void 0);v=!0;let Ne=vd(Be._readableStreamController);return Ne===null?Po():pi(Ne._view,!0),d(void 0)}function Nr(Ne){if(J=!0,Se=Ne,ie){let Ze=xe([Se,$e]),Ct=bn(s,Ze);Qe(Ct)}return _t}function an(Ne){if(ie=!0,$e=Ne,J){let Ze=xe([Se,$e]),Ct=bn(s,Ze);Qe(Ct)}return _t}function zn(){}return Ie=av(zn,Bn,Nr),Be=av(zn,Dr,an),wn(l),[Ie,Be]}function hq(s){return r(s)&&typeof s.getReader<"u"}function pq(s){return hq(s)?mq(s.getReader()):gq(s)}function gq(s){let l,v=vn(s,"async"),E=e;function W(){let ie;try{ie=b(v)}catch($e){return f($e)}let Se=d(ie);return S(Se,$e=>{if(!r($e))throw new TypeError("The promise returned by the iterator.next() method must fulfill with an object");if(Z($e))Ui(l._readableStreamController);else{let Be=Re($e);To(l._readableStreamController,Be)}})}function J(ie){let Se=v.iterator,$e;try{$e=mt(Se,"return")}catch(Qe){return f(Qe)}if($e===void 0)return d(void 0);let Ie;try{Ie=I($e,Se,[ie])}catch(Qe){return f(Qe)}let Be=d(Ie);return S(Be,Qe=>{if(!r(Qe))throw new TypeError("The promise returned by the iterator.return() method must fulfill with an object")})}return l=Ns(E,W,J,0),l}function mq(s){let l,v=e;function E(){let J;try{J=s.read()}catch(ie){return f(ie)}return S(J,ie=>{if(!r(ie))throw new TypeError("The promise returned by the reader.read() method must fulfill with an object");if(ie.done)Ui(l._readableStreamController);else{let Se=ie.value;To(l._readableStreamController,Se)}})}function W(J){try{return d(s.cancel(J))}catch(ie){return f(ie)}}return l=Ns(v,E,W,0),l}function yq(s,l){Y(s,l);let v=s,E=v?.autoAllocateChunkSize,W=v?.cancel,J=v?.pull,ie=v?.start,Se=v?.type;return{autoAllocateChunkSize:E===void 0?void 0:jt(E,`${l} has member 'autoAllocateChunkSize' that`),cancel:W===void 0?void 0:vq(W,v,`${l} has member 'cancel' that`),pull:J===void 0?void 0:_q(J,v,`${l} has member 'pull' that`),start:ie===void 0?void 0:bq(ie,v,`${l} has member 'start' that`),type:Se===void 0?void 0:wq(Se,`${l} has member 'type' that`)}}function vq(s,l,v){return ae(s,v),E=>A(s,l,[E])}function _q(s,l,v){return ae(s,v),E=>A(s,l,[E])}function bq(s,l,v){return ae(s,v),E=>I(s,l,[E])}function wq(s,l){if(s=`${s}`,s!=="bytes")throw new TypeError(`${l} '${s}' is not a valid enumeration value for ReadableStreamType`);return s}function Sq(s,l){return Y(s,l),{preventCancel:!!s?.preventCancel}}function sv(s,l){Y(s,l);let v=s?.preventAbort,E=s?.preventCancel,W=s?.preventClose,J=s?.signal;return J!==void 0&&Cq(J,`${l} has member 'signal' that`),{preventAbort:!!v,preventCancel:!!E,preventClose:!!W,signal:J}}function Cq(s,l){if(!xk(s))throw new TypeError(`${l} is not an AbortSignal.`)}function Rq(s,l){Y(s,l);let v=s?.readable;He(v,"readable","ReadableWritablePair"),Ot(v,`${l} has member 'readable' that`);let E=s?.writable;return He(E,"writable","ReadableWritablePair"),Wy(E,`${l} has member 'writable' that`),{readable:v,writable:E}}class pr{constructor(l={},v={}){l===void 0?l=null:Te(l,"First parameter");let E=du(v,"Second parameter"),W=yq(l,"First parameter");if(Od(this),W.type==="bytes"){if(E.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let J=Os(E,0);vk(this,W,J)}else{let J=lu(E),ie=Os(E,1);cq(this,W,ie,J)}}get locked(){if(!di(this))throw Bi("locked");return fi(this)}cancel(l=void 0){return di(this)?fi(this)?f(new TypeError("Cannot cancel a stream that already has a reader")):bn(this,l):f(Bi("cancel"))}getReader(l=void 0){if(!di(this))throw Bi("getReader");return bk(l,"First parameter").mode===void 0?wt(this):Ly(this)}pipeThrough(l,v={}){if(!di(this))throw Bi("pipeThrough");Ce(l,1,"pipeThrough");let E=Rq(l,"First parameter"),W=sv(v,"Second parameter");if(fi(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Co(E.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let J=nv(this,E.writable,W.preventClose,W.preventAbort,W.preventCancel,W.signal);return R(J),E.readable}pipeTo(l,v={}){if(!di(this))return f(Bi("pipeTo"));if(l===void 0)return f("Parameter 1 is required in 'pipeTo'.");if(!So(l))return f(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let E;try{E=sv(v,"Second parameter")}catch(W){return f(W)}return fi(this)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Co(l)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):nv(this,l,E.preventClose,E.preventAbort,E.preventCancel,E.signal)}tee(){if(!di(this))throw Bi("tee");let l=lq(this);return xe(l)}values(l=void 0){if(!di(this))throw Bi("values");let v=Sq(l,"First parameter");return C(this,v.preventCancel)}[on](l){return this.values(l)}static from(l){return pq(l)}}Object.defineProperties(pr,{from:{enumerable:!0}}),Object.defineProperties(pr.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),i(pr.from,"from"),i(pr.prototype.cancel,"cancel"),i(pr.prototype.getReader,"getReader"),i(pr.prototype.pipeThrough,"pipeThrough"),i(pr.prototype.pipeTo,"pipeTo"),i(pr.prototype.tee,"tee"),i(pr.prototype.values,"values"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(pr.prototype,Symbol.toStringTag,{value:"ReadableStream",configurable:!0}),Object.defineProperty(pr.prototype,on,{value:pr.prototype.values,writable:!0,configurable:!0});function Ns(s,l,v,E=1,W=()=>1){let J=Object.create(pr.prototype);Od(J);let ie=Object.create(Un.prototype);return ov(J,ie,s,l,v,E,W),J}function av(s,l,v){let E=Object.create(pr.prototype);Od(E);let W=Object.create(it.prototype);return Ay(E,W,s,l,v,0,void 0),E}function Od(s){s._state="readable",s._reader=void 0,s._storedError=void 0,s._disturbed=!1}function di(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_readableStreamController")?!1:s instanceof pr}function fi(s){return s._reader!==void 0}function bn(s,l){if(s._disturbed=!0,s._state==="closed")return d(void 0);if(s._state==="errored")return f(s._storedError);Ms(s);let v=s._reader;if(v!==void 0&&$i(v)){let W=v._readIntoRequests;v._readIntoRequests=new ee,W.forEach(J=>{J._closeSteps(void 0)})}let E=s._readableStreamController[de](l);return S(E,e)}function Ms(s){s._state="closed";let l=s._reader;if(l!==void 0&&(ue(l),ht(l))){let v=l._readRequests;l._readRequests=new ee,v.forEach(E=>{E._closeSteps()})}}function uv(s,l){s._state="errored",s._storedError=l;let v=s._reader;v!==void 0&&(ne(v,l),ht(v)?Tr(v,l):$y(v,l))}function Bi(s){return new TypeError(`ReadableStream.prototype.${s} can only be used on a ReadableStream`)}function cv(s,l){Y(s,l);let v=s?.highWaterMark;return He(v,"highWaterMark","QueuingStrategyInit"),{highWaterMark:ct(v)}}let lv=s=>s.byteLength;i(lv,"size");class Su{constructor(l){Ce(l,1,"ByteLengthQueuingStrategy"),l=cv(l,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=l.highWaterMark}get highWaterMark(){if(!fv(this))throw dv("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!fv(this))throw dv("size");return lv}}Object.defineProperties(Su.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Su.prototype,Symbol.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function dv(s){return new TypeError(`ByteLengthQueuingStrategy.prototype.${s} can only be used on a ByteLengthQueuingStrategy`)}function fv(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_byteLengthQueuingStrategyHighWaterMark")?!1:s instanceof Su}let hv=()=>1;i(hv,"size");class Cu{constructor(l){Ce(l,1,"CountQueuingStrategy"),l=cv(l,"First parameter"),this._countQueuingStrategyHighWaterMark=l.highWaterMark}get highWaterMark(){if(!gv(this))throw pv("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!gv(this))throw pv("size");return hv}}Object.defineProperties(Cu.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Cu.prototype,Symbol.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function pv(s){return new TypeError(`CountQueuingStrategy.prototype.${s} can only be used on a CountQueuingStrategy`)}function gv(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_countQueuingStrategyHighWaterMark")?!1:s instanceof Cu}function Tq(s,l){Y(s,l);let v=s?.cancel,E=s?.flush,W=s?.readableType,J=s?.start,ie=s?.transform,Se=s?.writableType;return{cancel:v===void 0?void 0:kq(v,s,`${l} has member 'cancel' that`),flush:E===void 0?void 0:Dq(E,s,`${l} has member 'flush' that`),readableType:W,start:J===void 0?void 0:Eq(J,s,`${l} has member 'start' that`),transform:ie===void 0?void 0:Pq(ie,s,`${l} has member 'transform' that`),writableType:Se}}function Dq(s,l,v){return ae(s,v),E=>A(s,l,[E])}function Eq(s,l,v){return ae(s,v),E=>I(s,l,[E])}function Pq(s,l,v){return ae(s,v),(E,W)=>A(s,l,[E,W])}function kq(s,l,v){return ae(s,v),E=>A(s,l,[E])}class Ru{constructor(l={},v={},E={}){l===void 0&&(l=null);let W=du(v,"Second parameter"),J=du(E,"Third parameter"),ie=Tq(l,"First parameter");if(ie.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(ie.writableType!==void 0)throw new RangeError("Invalid writableType specified");let Se=Os(J,0),$e=lu(J),Ie=Os(W,1),Be=lu(W),Qe,_t=c(wn=>{Qe=wn});qq(this,_t,Ie,Be,Se,$e),Fq(this,ie),ie.start!==void 0?Qe(ie.start(this._transformStreamController)):Qe(void 0)}get readable(){if(!mv(this))throw bv("readable");return this._readable}get writable(){if(!mv(this))throw bv("writable");return this._writable}}Object.defineProperties(Ru.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(Ru.prototype,Symbol.toStringTag,{value:"TransformStream",configurable:!0});function qq(s,l,v,E,W,J){function ie(){return l}function Se(_t){return Aq(s,_t)}function $e(_t){return Lq(s,_t)}function Ie(){return Nq(s)}s._writable=Ik(ie,Se,Ie,$e,v,E);function Be(){return Mq(s)}function Qe(_t){return jq(s,_t)}s._readable=Ns(ie,Be,Qe,W,J),s._backpressure=void 0,s._backpressureChangePromise=void 0,s._backpressureChangePromise_resolve=void 0,Tu(s,!0),s._transformStreamController=void 0}function mv(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_transformStreamController")?!1:s instanceof Ru}function yv(s,l){_n(s._readable._readableStreamController,l),Id(s,l)}function Id(s,l){Eu(s._transformStreamController),Is(s._writable._writableStreamController,l),Ad(s)}function Ad(s){s._backpressure&&Tu(s,!1)}function Tu(s,l){s._backpressureChangePromise!==void 0&&s._backpressureChangePromise_resolve(),s._backpressureChangePromise=c(v=>{s._backpressureChangePromise_resolve=v}),s._backpressure=l}class hi{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Du(this))throw Pu("desiredSize");let l=this._controlledTransformStream._readable._readableStreamController;return Fd(l)}enqueue(l=void 0){if(!Du(this))throw Pu("enqueue");vv(this,l)}error(l=void 0){if(!Du(this))throw Pu("error");Oq(this,l)}terminate(){if(!Du(this))throw Pu("terminate");Iq(this)}}Object.defineProperties(hi.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),i(hi.prototype.enqueue,"enqueue"),i(hi.prototype.error,"error"),i(hi.prototype.terminate,"terminate"),typeof Symbol.toStringTag=="symbol"&&Object.defineProperty(hi.prototype,Symbol.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Du(s){return!r(s)||!Object.prototype.hasOwnProperty.call(s,"_controlledTransformStream")?!1:s instanceof hi}function xq(s,l,v,E,W){l._controlledTransformStream=s,s._transformStreamController=l,l._transformAlgorithm=v,l._flushAlgorithm=E,l._cancelAlgorithm=W,l._finishPromise=void 0,l._finishPromise_resolve=void 0,l._finishPromise_reject=void 0}function Fq(s,l){let v=Object.create(hi.prototype),E,W,J;l.transform!==void 0?E=ie=>l.transform(ie,v):E=ie=>{try{return vv(v,ie),d(void 0)}catch(Se){return f(Se)}},l.flush!==void 0?W=()=>l.flush(v):W=()=>d(void 0),l.cancel!==void 0?J=ie=>l.cancel(ie):J=()=>d(void 0),xq(s,v,E,W,J)}function Eu(s){s._transformAlgorithm=void 0,s._flushAlgorithm=void 0,s._cancelAlgorithm=void 0}function vv(s,l){let v=s._controlledTransformStream,E=v._readable._readableStreamController;if(!Do(E))throw new TypeError("Readable side is not in a state that permits enqueue");try{To(E,l)}catch(J){throw Id(v,J),v._readable._storedError}uq(E)!==v._backpressure&&Tu(v,!0)}function Oq(s,l){yv(s._controlledTransformStream,l)}function _v(s,l){let v=s._transformAlgorithm(l);return S(v,void 0,E=>{throw yv(s._controlledTransformStream,E),E})}function Iq(s){let l=s._controlledTransformStream,v=l._readable._readableStreamController;Ui(v);let E=new TypeError("TransformStream terminated");Id(l,E)}function Aq(s,l){let v=s._transformStreamController;if(s._backpressure){let E=s._backpressureChangePromise;return S(E,()=>{let W=s._writable;if(W._state==="erroring")throw W._storedError;return _v(v,l)})}return _v(v,l)}function Lq(s,l){let v=s._transformStreamController;if(v._finishPromise!==void 0)return v._finishPromise;let E=s._readable;v._finishPromise=c((J,ie)=>{v._finishPromise_resolve=J,v._finishPromise_reject=ie});let W=v._cancelAlgorithm(l);return Eu(v),g(W,()=>(E._state==="errored"?Eo(v,E._storedError):(_n(E._readableStreamController,l),Ld(v)),null),J=>(_n(E._readableStreamController,J),Eo(v,J),null)),v._finishPromise}function Nq(s){let l=s._transformStreamController;if(l._finishPromise!==void 0)return l._finishPromise;let v=s._readable;l._finishPromise=c((W,J)=>{l._finishPromise_resolve=W,l._finishPromise_reject=J});let E=l._flushAlgorithm();return Eu(l),g(E,()=>(v._state==="errored"?Eo(l,v._storedError):(Ui(v._readableStreamController),Ld(l)),null),W=>(_n(v._readableStreamController,W),Eo(l,W),null)),l._finishPromise}function Mq(s){return Tu(s,!1),s._backpressureChangePromise}function jq(s,l){let v=s._transformStreamController;if(v._finishPromise!==void 0)return v._finishPromise;let E=s._writable;v._finishPromise=c((J,ie)=>{v._finishPromise_resolve=J,v._finishPromise_reject=ie});let W=v._cancelAlgorithm(l);return Eu(v),g(W,()=>(E._state==="errored"?Eo(v,E._storedError):(Is(E._writableStreamController,l),Ad(s),Ld(v)),null),J=>(Is(E._writableStreamController,J),Ad(s),Eo(v,J),null)),v._finishPromise}function Pu(s){return new TypeError(`TransformStreamDefaultController.prototype.${s} can only be used on a TransformStreamDefaultController`)}function Ld(s){s._finishPromise_resolve!==void 0&&(s._finishPromise_resolve(),s._finishPromise_resolve=void 0,s._finishPromise_reject=void 0)}function Eo(s,l){s._finishPromise_reject!==void 0&&(R(s._finishPromise),s._finishPromise_reject(l),s._finishPromise_resolve=void 0,s._finishPromise_reject=void 0)}function bv(s){return new TypeError(`TransformStream.prototype.${s} can only be used on a TransformStream`)}t.ByteLengthQueuingStrategy=Su,t.CountQueuingStrategy=Cu,t.ReadableByteStreamController=it,t.ReadableStream=pr,t.ReadableStreamBYOBReader=ci,t.ReadableStreamBYOBRequest=Ae,t.ReadableStreamDefaultController=Un,t.ReadableStreamDefaultReader=gt,t.TransformStream=Ru,t.TransformStreamDefaultController=hi,t.WritableStream=li,t.WritableStreamDefaultController=Ro,t.WritableStreamDefaultWriter=Hn})});var UR=q(()=>{if(!globalThis.ReadableStream)try{let t=require("node:process"),{emitWarning:e}=t;try{t.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),t.emitWarning=e}catch(r){throw t.emitWarning=e,r}}catch{Object.assign(globalThis,HR())}try{let{Blob:t}=require("buffer");t&&!t.prototype.stream&&(t.prototype.stream=function(r){let n=0,i=this;return new ReadableStream({type:"bytes",async pull(o){let u=await i.slice(n,Math.min(i.size,n+65536)).arrayBuffer();n+=u.byteLength,o.enqueue(new Uint8Array(u)),n===i.size&&o.close()}})})}catch{}});async function*pm(t,e=!0){for(let r of t)if("stream"in r)yield*r.stream();else if(ArrayBuffer.isView(r))if(e){let n=r.byteOffset,i=r.byteOffset+r.byteLength;for(;n!==i;){let o=Math.min(i-n,BR),a=r.buffer.slice(n,n+o);n+=a.byteLength,yield new Uint8Array(a)}}else yield r;else{let n=0,i=r;for(;n!==i.size;){let a=await i.slice(n,Math.min(i.size,n+BR)).arrayBuffer();n+=a.byteLength,yield new Uint8Array(a)}}}var dW,BR,zR,GA,Zn,Sa=js(()=>{dW=gr(UR(),1);BR=65536;zR=class gm{#e=[];#t="";#r=0;#n="transparent";constructor(e=[],r={}){if(typeof e!="object"||e===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof e[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof r!="object"&&typeof r!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");r===null&&(r={});let n=new TextEncoder;for(let o of e){let a;ArrayBuffer.isView(o)?a=new Uint8Array(o.buffer.slice(o.byteOffset,o.byteOffset+o.byteLength)):o instanceof ArrayBuffer?a=new Uint8Array(o.slice(0)):o instanceof gm?a=o:a=n.encode(`${o}`),this.#r+=ArrayBuffer.isView(a)?a.byteLength:a.size,this.#e.push(a)}this.#n=`${r.endings===void 0?"transparent":r.endings}`;let i=r.type===void 0?"":String(r.type);this.#t=/^[\x20-\x7E]*$/.test(i)?i:""}get size(){return this.#r}get type(){return this.#t}async text(){let e=new TextDecoder,r="";for await(let n of pm(this.#e,!1))r+=e.decode(n,{stream:!0});return r+=e.decode(),r}async arrayBuffer(){let e=new Uint8Array(this.size),r=0;for await(let n of pm(this.#e,!1))e.set(n,r),r+=n.length;return e.buffer}stream(){let e=pm(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(r){let n=await e.next();n.done?r.close():r.enqueue(n.value)},async cancel(){await e.return()}})}slice(e=0,r=this.size,n=""){let{size:i}=this,o=e<0?Math.max(i+e,0):Math.min(e,i),a=r<0?Math.max(i+r,0):Math.min(r,i),u=Math.max(a-o,0),c=this.#e,d=[],f=0;for(let g of c){if(f>=u)break;let m=ArrayBuffer.isView(g)?g.byteLength:g.size;if(o&&m<=o)o-=m,a-=m;else{let h;ArrayBuffer.isView(g)?(h=g.subarray(o,Math.min(m,a)),f+=h.byteLength):(h=g.slice(o,Math.min(m,a)),f+=h.size),a-=m,d.push(h),o=0}}let y=new gm([],{type:String(n).toLowerCase()});return y.#r=u,y.#e=d,y}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](e){return e&&typeof e=="object"&&typeof e.constructor=="function"&&(typeof e.stream=="function"||typeof e.arrayBuffer=="function")&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}};Object.defineProperties(zR.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});GA=zR,Zn=GA});var QA,XA,ls,mm=js(()=>{Sa();QA=class extends Zn{#e=0;#t="";constructor(e,r,n={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(e,n),n===null&&(n={});let i=n.lastModified===void 0?Date.now():Number(n.lastModified);Number.isNaN(i)||(this.#e=i),this.#t=String(r)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](e){return!!e&&e instanceof Zn&&/^(File)$/.test(e[Symbol.toStringTag])}},XA=QA,ls=XA});function GR(t,e=Zn){var r=`${KR()}${KR()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),n=[],i=`--${r}\r
Content-Disposition: form-data; name="`;return t.forEach((o,a)=>typeof o=="string"?n.push(i+ym(a)+`"\r
\r
${o.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):n.push(i+ym(a)+`"; filename="${ym(o.name,1)}"\r
Content-Type: ${o.type||"application/octet-stream"}\r
\r
`,o,`\r
`)),n.push(`--${r}--`),new e(n,{type:"multipart/form-data; boundary="+r})}var Ca,YA,JA,KR,ZA,VR,ym,so,ao,Sl=js(()=>{Sa();mm();({toStringTag:Ca,iterator:YA,hasInstance:JA}=Symbol),KR=Math.random,ZA="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),VR=(t,e,r)=>(t+="",/^(Blob|File)$/.test(e&&e[Ca])?[(r=r!==void 0?r+"":e[Ca]=="File"?e.name:"blob",t),e.name!==r||e[Ca]=="blob"?new ls([e],r,e):e]:[t,e+""]),ym=(t,e)=>(e?t:t.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),so=(t,e,r)=>{if(e.length<r)throw new TypeError(`Failed to execute '${t}' on 'FormData': ${r} arguments required, but only ${e.length} present.`)},ao=class{#e=[];constructor(...e){if(e.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Ca](){return"FormData"}[YA](){return this.entries()}static[JA](e){return e&&typeof e=="object"&&e[Ca]==="FormData"&&!ZA.some(r=>typeof e[r]!="function")}append(...e){so("append",arguments,2),this.#e.push(VR(...e))}delete(e){so("delete",arguments,1),e+="",this.#e=this.#e.filter(([r])=>r!==e)}get(e){so("get",arguments,1),e+="";for(var r=this.#e,n=r.length,i=0;i<n;i++)if(r[i][0]===e)return r[i][1];return null}getAll(e,r){return so("getAll",arguments,1),r=[],e+="",this.#e.forEach(n=>n[0]===e&&r.push(n[1])),r}has(e){return so("has",arguments,1),e+="",this.#e.some(r=>r[0]===e)}forEach(e,r){so("forEach",arguments,1);for(var[n,i]of this)e.call(r,i,n,this)}set(...e){so("set",arguments,2);var r=[],n=!0;e=VR(...e),this.#e.forEach(i=>{i[0]===e[0]?n&&(n=!r.push(e)):r.push(i)}),n&&r.push(e),this.#e=r}*entries(){yield*this.#e}*keys(){for(var[e]of this)yield e}*values(){for(var[,e]of this)yield e}}});var ZR=q((RW,JR)=>{if(!globalThis.DOMException)try{let{MessageChannel:t}=require("worker_threads"),e=new t().port1,r=new ArrayBuffer;e.postMessage(r,[r,r])}catch(t){t.constructor.name==="DOMException"&&(globalThis.DOMException=t.constructor)}JR.exports=globalThis.DOMException});var Rl,e1,EW,_m=js(()=>{Rl=require("node:fs"),e1=gr(ZR(),1);mm();Sa();({stat:EW}=Rl.promises)});var tT={};Sv(tT,{toFormData:()=>a1});function s1(t){let e=t.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!e)return;let r=e[2]||e[3]||"",n=r.slice(r.lastIndexOf("\\")+1);return n=n.replace(/%22/g,'"'),n=n.replace(/&#(\d{4});/g,(i,o)=>String.fromCharCode(o)),n}async function a1(t,e){if(!/multipart/i.test(e))throw new TypeError("Failed to fetch");let r=e.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!r)throw new TypeError("no or bad content-type header, no multipart boundary");let n=new bm(r[1]||r[2]),i,o,a,u,c,d,f=[],y=new ao,g=D=>{a+=R.decode(D,{stream:!0})},m=D=>{f.push(D)},h=()=>{let D=new ls(f,d,{type:c});y.append(u,D)},S=()=>{y.append(u,a)},R=new TextDecoder("utf-8");R.decode(),n.onPartBegin=function(){n.onPartData=g,n.onPartEnd=S,i="",o="",a="",u="",c="",d=null,f.length=0},n.onHeaderField=function(D){i+=R.decode(D,{stream:!0})},n.onHeaderValue=function(D){o+=R.decode(D,{stream:!0})},n.onHeaderEnd=function(){if(o+=R.decode(),i=i.toLowerCase(),i==="content-disposition"){let D=o.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);D&&(u=D[2]||D[3]||""),d=s1(o),d&&(n.onPartData=m,n.onPartEnd=h)}else i==="content-type"&&(c=o);o="",i=""};for await(let D of t)n.write(D);return n.end(),y}var Nn,Tt,eT,xi,Tl,Dl,t1,Ta,r1,n1,i1,o1,uo,bm,rT=js(()=>{_m();Sl();Nn=0,Tt={START_BOUNDARY:Nn++,HEADER_FIELD_START:Nn++,HEADER_FIELD:Nn++,HEADER_VALUE_START:Nn++,HEADER_VALUE:Nn++,HEADER_VALUE_ALMOST_DONE:Nn++,HEADERS_ALMOST_DONE:Nn++,PART_DATA_START:Nn++,PART_DATA:Nn++,END:Nn++},eT=1,xi={PART_BOUNDARY:eT,LAST_BOUNDARY:eT*=2},Tl=10,Dl=13,t1=32,Ta=45,r1=58,n1=97,i1=122,o1=t=>t|32,uo=()=>{},bm=class{constructor(e){this.index=0,this.flags=0,this.onHeaderEnd=uo,this.onHeaderField=uo,this.onHeadersEnd=uo,this.onHeaderValue=uo,this.onPartBegin=uo,this.onPartData=uo,this.onPartEnd=uo,this.boundaryChars={},e=`\r
--`+e;let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n),this.boundaryChars[r[n]]=!0;this.boundary=r,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=Tt.START_BOUNDARY}write(e){let r=0,n=e.length,i=this.index,{lookbehind:o,boundary:a,boundaryChars:u,index:c,state:d,flags:f}=this,y=this.boundary.length,g=y-1,m=e.length,h,S,R=N=>{this[N+"Mark"]=r},D=N=>{delete this[N+"Mark"]},I=(N,ee,fe,re)=>{(ee===void 0||ee!==fe)&&this[N](re&&re.subarray(ee,fe))},A=(N,ee)=>{let fe=N+"Mark";fe in this&&(ee?(I(N,this[fe],r,e),delete this[fe]):(I(N,this[fe],e.length,e),this[fe]=0))};for(r=0;r<n;r++)switch(h=e[r],d){case Tt.START_BOUNDARY:if(c===a.length-2){if(h===Ta)f|=xi.LAST_BOUNDARY;else if(h!==Dl)return;c++;break}else if(c-1===a.length-2){if(f&xi.LAST_BOUNDARY&&h===Ta)d=Tt.END,f=0;else if(!(f&xi.LAST_BOUNDARY)&&h===Tl)c=0,I("onPartBegin"),d=Tt.HEADER_FIELD_START;else return;break}h!==a[c+2]&&(c=-2),h===a[c+2]&&c++;break;case Tt.HEADER_FIELD_START:d=Tt.HEADER_FIELD,R("onHeaderField"),c=0;case Tt.HEADER_FIELD:if(h===Dl){D("onHeaderField"),d=Tt.HEADERS_ALMOST_DONE;break}if(c++,h===Ta)break;if(h===r1){if(c===1)return;A("onHeaderField",!0),d=Tt.HEADER_VALUE_START;break}if(S=o1(h),S<n1||S>i1)return;break;case Tt.HEADER_VALUE_START:if(h===t1)break;R("onHeaderValue"),d=Tt.HEADER_VALUE;case Tt.HEADER_VALUE:h===Dl&&(A("onHeaderValue",!0),I("onHeaderEnd"),d=Tt.HEADER_VALUE_ALMOST_DONE);break;case Tt.HEADER_VALUE_ALMOST_DONE:if(h!==Tl)return;d=Tt.HEADER_FIELD_START;break;case Tt.HEADERS_ALMOST_DONE:if(h!==Tl)return;I("onHeadersEnd"),d=Tt.PART_DATA_START;break;case Tt.PART_DATA_START:d=Tt.PART_DATA,R("onPartData");case Tt.PART_DATA:if(i=c,c===0){for(r+=g;r<m&&!(e[r]in u);)r+=y;r-=g,h=e[r]}if(c<a.length)a[c]===h?(c===0&&A("onPartData",!0),c++):c=0;else if(c===a.length)c++,h===Dl?f|=xi.PART_BOUNDARY:h===Ta?f|=xi.LAST_BOUNDARY:c=0;else if(c-1===a.length)if(f&xi.PART_BOUNDARY){if(c=0,h===Tl){f&=~xi.PART_BOUNDARY,I("onPartEnd"),I("onPartBegin"),d=Tt.HEADER_FIELD_START;break}}else f&xi.LAST_BOUNDARY&&h===Ta?(I("onPartEnd"),d=Tt.END,f=0):c=0;if(c>0)o[c-1]=h;else if(i>0){let N=new Uint8Array(o.buffer,o.byteOffset,o.byteLength);I("onPartData",0,i,N),i=0,R("onPartData"),r--}break;case Tt.END:break;default:throw new Error(`Unexpected state entered: ${d}`)}A("onHeaderField"),A("onHeaderValue"),A("onPartData"),this.index=c,this.state=d,this.flags=f}end(){if(this.state===Tt.HEADER_FIELD_START&&this.index===0||this.state===Tt.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==Tt.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Ol=q((mH,_T)=>{var Fl=require("stream"),g1=require("util"),m1="function";function Fi(){if(!(this instanceof Fi))return new Fi;Fl.Duplex.call(this,{decodeStrings:!1,objectMode:!0}),this.buffer=Buffer.from("");let t=this;t.on("finish",function(){t.finished=!0,t.emit("chunk",!1)})}g1.inherits(Fi,Fl.Duplex);Fi.prototype._write=function(t,e,r){this.buffer=Buffer.concat([this.buffer,t]),this.cb=r,this.emit("chunk")};Fi.prototype.stream=function(t,e){let r=Fl.PassThrough(),n,i=this;function o(){if(typeof i.cb===m1){let u=i.cb;return i.cb=void 0,u()}}function a(){let u;if(i.buffer&&i.buffer.length){if(typeof t=="number")u=i.buffer.slice(0,t),i.buffer=i.buffer.slice(t),t-=u.length,n=n||!t;else{let c=i.buffer.indexOf(t);if(c!==-1)i.match=c,e&&(c=c+t.length),u=i.buffer.slice(0,c),i.buffer=i.buffer.slice(c),n=!0;else{let d=i.buffer.length-t.length;d<=0?o():(u=i.buffer.slice(0,d),i.buffer=i.buffer.slice(d))}}u&&r.write(u,function(){(i.buffer.length===0||t.length&&i.buffer.length<=t.length)&&o()})}if(n)i.removeListener("chunk",a),r.end();else if(i.finished){i.removeListener("chunk",a),i.emit("error",new Error("FILE_ENDED"));return}}return i.on("chunk",a),a(),r};Fi.prototype.pull=function(t,e){if(t===0)return Promise.resolve("");if(!isNaN(t)&&this.buffer.length>t){let u=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),Promise.resolve(u)}let r=Buffer.from(""),n=this,i=new Fl.Transform;i._transform=function(u,c,d){r=Buffer.concat([r,u]),d()};let o,a;return new Promise(function(u,c){if(o=c,a=function(d){n.__emittedError=d,c(d)},n.finished)return c(new Error("FILE_ENDED"));n.once("error",a),n.stream(t,e).on("error",c).pipe(i).on("finish",function(){u(r)}).on("error",c)}).finally(function(){n.removeListener("error",o),n.removeListener("error",a)})};Fi.prototype._read=function(){};_T.exports=Fi});var ST=q((yH,wT)=>{var bT=require("stream"),y1=require("util");function ka(){if(!(this instanceof ka))return new ka;bT.Transform.call(this)}y1.inherits(ka,bT.Transform);ka.prototype._transform=function(t,e,r){r()};wT.exports=ka});var Il=q((vH,CT)=>{var v1=require("stream");CT.exports=function(t){return new Promise(function(e,r){let n=[],i=v1.Transform().on("finish",function(){e(Buffer.concat(n))}).on("error",r);i._transform=function(o,a,u){n.push(o),u()},t.on("error",r).pipe(i)})}});var qa=q((_H,RT)=>{var _1=function(t,e,r){let n;switch(r){case 1:n=t.readUInt8(e);break;case 2:n=t.readUInt16LE(e);break;case 4:n=t.readUInt32LE(e);break;case 8:n=Number(t.readBigUInt64LE(e));break;default:throw new Error("Unsupported UInt LE size!")}return n},b1=function(t,e){let r={},n=0;for(let[i,o]of e)t.length>=n+o?r[i]=_1(t,n,o):r[i]=null,n+=o;return r};RT.exports={parse:b1}});var Al=q((bH,DT)=>{var TT=qa();DT.exports=function(t,e){let r;for(;!r&&t&&t.length;){let n=TT.parse(t,[["signature",2],["partSize",2]]);if(n.signature===1){let i=[];e.uncompressedSize===4294967295&&i.push(["uncompressedSize",8]),e.compressedSize===4294967295&&i.push(["compressedSize",8]),e.offsetToLocalFileHeader===4294967295&&i.push(["offsetToLocalFileHeader",8]),r=TT.parse(t.slice(4),i)}else t=t.slice(n.partSize+4)}return r=r||{},e.compressedSize===4294967295&&(e.compressedSize=r.compressedSize),e.uncompressedSize===4294967295&&(e.uncompressedSize=r.uncompressedSize),e.offsetToLocalFileHeader===4294967295&&(e.offsetToLocalFileHeader=r.offsetToLocalFileHeader),r}});var Ll=q((wH,ET)=>{ET.exports=function(e,r){let n=e&31,i=e>>5&15,o=(e>>9&127)+1980,a=r?(r&31)*2:0,u=r?r>>5&63:0,c=r?r>>11:0;return new Date(Date.UTC(o,i-1,n,c,u,a))}});var Nl=q((SH,qT)=>{var w1=require("util"),S1=require("zlib"),Rm=require("stream"),PT=Ol(),C1=ST(),R1=Il(),T1=Al(),D1=Ll(),E1=Rm.pipeline,xa=qa(),kT=Buffer.alloc(4);kT.writeUInt32LE(101010256,0);function kn(t){if(!(this instanceof kn))return new kn(t);let e=this;e._opts=t||{verbose:!1},PT.call(e,e._opts),e.on("finish",function(){e.emit("end"),e.emit("close")}),e._readRecord().catch(function(r){(!e.__emittedError||e.__emittedError!==r)&&e.emit("error",r)})}w1.inherits(kn,PT);kn.prototype._readRecord=function(){let t=this;return t.pull(4).then(function(e){if(e.length===0)return;let r=e.readUInt32LE(0);if(r===875721283)return t._readCrxHeader();if(r===67324752)return t._readFile();if(r===33639248)return t.reachedCD=!0,t._readCentralDirectoryFileHeader();if(r===101010256)return t._readEndOfCentralDirectoryRecord();if(t.reachedCD)return t.pull(kT,!0).then(function(){return t._readEndOfCentralDirectoryRecord()});t.emit("error",new Error("invalid signature: 0x"+r.toString(16)))}).then(function(e){if(e)return t._readRecord()})};kn.prototype._readCrxHeader=function(){let t=this;return t.pull(12).then(function(e){return t.crxHeader=xa.parse(e,[["version",4],["pubKeyLength",4],["signatureLength",4]]),t.pull(t.crxHeader.pubKeyLength+t.crxHeader.signatureLength)}).then(function(e){return t.crxHeader.publicKey=e.slice(0,t.crxHeader.pubKeyLength),t.crxHeader.signature=e.slice(t.crxHeader.pubKeyLength),t.emit("crx-header",t.crxHeader),!0})};kn.prototype._readFile=function(){let t=this;return t.pull(26).then(function(e){let r=xa.parse(e,[["versionsNeededToExtract",2],["flags",2],["compressionMethod",2],["lastModifiedTime",2],["lastModifiedDate",2],["crc32",4],["compressedSize",4],["uncompressedSize",4],["fileNameLength",2],["extraFieldLength",2]]);return r.lastModifiedDateTime=D1(r.lastModifiedDate,r.lastModifiedTime),t.crxHeader&&(r.crxHeader=t.crxHeader),t.pull(r.fileNameLength).then(function(n){let i=n.toString("utf8"),o=Rm.PassThrough(),a=!1;return o.autodrain=function(){a=!0;let u=o.pipe(C1());return u.promise=function(){return new Promise(function(c,d){u.on("finish",c),u.on("error",d)})},u},o.buffer=function(){return R1(o)},o.path=i,o.props={},o.props.path=i,o.props.pathBuffer=n,o.props.flags={isUnicode:(r.flags&2048)!=0},o.type=r.uncompressedSize===0&&/[/\\]$/.test(i)?"Directory":"File",t._opts.verbose&&(o.type==="Directory"?console.log("   creating:",i):o.type==="File"&&(r.compressionMethod===0?console.log(" extracting:",i):console.log("  inflating:",i))),t.pull(r.extraFieldLength).then(function(u){let c=T1(u,r);o.vars=r,o.extra=c,t._opts.forceStream?t.push(o):(t.emit("entry",o),(t._readableState.pipesCount||t._readableState.pipes&&t._readableState.pipes.length)&&t.push(o)),t._opts.verbose&&console.log({filename:i,vars:r,extra:c});let d=!(r.flags&8)||r.compressedSize>0,f;o.__autodraining=a;let y=r.compressionMethod&&!a?S1.createInflateRaw():Rm.PassThrough();return d?(o.size=r.uncompressedSize,f=r.compressedSize):(f=Buffer.alloc(4),f.writeUInt32LE(134695760,0)),new Promise(function(g,m){E1(t.stream(f),y,o,function(h){return h?m(h):d?g(d):t._processDataDescriptor(o).then(g).catch(m)})})})})})};kn.prototype._processDataDescriptor=function(t){return this.pull(16).then(function(r){let n=xa.parse(r,[["dataDescriptorSignature",4],["crc32",4],["compressedSize",4],["uncompressedSize",4]]);return t.size=n.uncompressedSize,!0})};kn.prototype._readCentralDirectoryFileHeader=function(){let t=this;return t.pull(42).then(function(e){let r=xa.parse(e,[["versionMadeBy",2],["versionsNeededToExtract",2],["flags",2],["compressionMethod",2],["lastModifiedTime",2],["lastModifiedDate",2],["crc32",4],["compressedSize",4],["uncompressedSize",4],["fileNameLength",2],["extraFieldLength",2],["fileCommentLength",2],["diskNumber",2],["internalFileAttributes",2],["externalFileAttributes",4],["offsetToLocalFileHeader",4]]);return t.pull(r.fileNameLength).then(function(n){return r.fileName=n.toString("utf8"),t.pull(r.extraFieldLength)}).then(function(){return t.pull(r.fileCommentLength)}).then(function(){return!0})})};kn.prototype._readEndOfCentralDirectoryRecord=function(){let t=this;return t.pull(18).then(function(e){let r=xa.parse(e,[["diskNumber",2],["diskStart",2],["numberOfRecordsOnDisk",2],["numberOfRecords",2],["sizeOfCentralDirectory",4],["offsetToStartOfCentralDirectory",4],["commentLength",2]]);return t.pull(r.commentLength).then(function(){t.end(),t.push(null)})})};kn.prototype.promise=function(){let t=this;return new Promise(function(e,r){t.on("finish",e),t.on("error",r)})};qT.exports=kn});var Fa=q((CH,Tm)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Tm.exports={nextTick:P1}:Tm.exports=process;function P1(t,e,r,n){if(typeof t!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,a;switch(i){case 0:case 1:return process.nextTick(t);case 2:return process.nextTick(function(){t.call(null,e)});case 3:return process.nextTick(function(){t.call(null,e,r)});case 4:return process.nextTick(function(){t.call(null,e,r,n)});default:for(o=new Array(i-1),a=0;a<o.length;)o[a++]=arguments[a];return process.nextTick(function(){t.apply(null,o)})}}});var FT=q((RH,xT)=>{var k1={}.toString;xT.exports=Array.isArray||function(t){return k1.call(t)=="[object Array]"}});var Dm=q((TH,OT)=>{OT.exports=require("stream")});var Oa=q((Em,AT)=>{var Ml=require("buffer"),ri=Ml.Buffer;function IT(t,e){for(var r in t)e[r]=t[r]}ri.from&&ri.alloc&&ri.allocUnsafe&&ri.allocUnsafeSlow?AT.exports=Ml:(IT(Ml,Em),Em.Buffer=hs);function hs(t,e,r){return ri(t,e,r)}IT(ri,hs);hs.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ri(t,e,r)};hs.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ri(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};hs.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ri(t)};hs.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ml.SlowBuffer(t)}});var ps=q(Cr=>{function q1(t){return Array.isArray?Array.isArray(t):jl(t)==="[object Array]"}Cr.isArray=q1;function x1(t){return typeof t=="boolean"}Cr.isBoolean=x1;function F1(t){return t===null}Cr.isNull=F1;function O1(t){return t==null}Cr.isNullOrUndefined=O1;function I1(t){return typeof t=="number"}Cr.isNumber=I1;function A1(t){return typeof t=="string"}Cr.isString=A1;function L1(t){return typeof t=="symbol"}Cr.isSymbol=L1;function N1(t){return t===void 0}Cr.isUndefined=N1;function M1(t){return jl(t)==="[object RegExp]"}Cr.isRegExp=M1;function j1(t){return typeof t=="object"&&t!==null}Cr.isObject=j1;function $1(t){return jl(t)==="[object Date]"}Cr.isDate=$1;function W1(t){return jl(t)==="[object Error]"||t instanceof Error}Cr.isError=W1;function H1(t){return typeof t=="function"}Cr.isFunction=H1;function U1(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Cr.isPrimitive=U1;Cr.isBuffer=require("buffer").Buffer.isBuffer;function jl(t){return Object.prototype.toString.call(t)}});var LT=q((EH,Pm)=>{typeof Object.create=="function"?Pm.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Pm.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var gs=q((PH,qm)=>{try{if(km=require("util"),typeof km.inherits!="function")throw"";qm.exports=km.inherits}catch{qm.exports=LT()}var km});var MT=q((kH,xm)=>{"use strict";function B1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var NT=Oa().Buffer,Ia=require("util");function z1(t,e,r){t.copy(e,r)}xm.exports=function(){function t(){B1(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},t.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},t.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},t.prototype.concat=function(r){if(this.length===0)return NT.alloc(0);for(var n=NT.allocUnsafe(r>>>0),i=this.head,o=0;i;)z1(i.data,n,o),o+=i.data.length,i=i.next;return n},t}();Ia&&Ia.inspect&&Ia.inspect.custom&&(xm.exports.prototype[Ia.inspect.custom]=function(){var t=Ia.inspect({length:this.length});return this.constructor.name+" "+t})});var Fm=q((qH,jT)=>{"use strict";var $l=Fa();function K1(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,$l.nextTick(Wl,this,t)):$l.nextTick(Wl,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(o){!e&&o?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,$l.nextTick(Wl,r,o)):$l.nextTick(Wl,r,o):e&&e(o)}),this)}function V1(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Wl(t,e){t.emit("error",e)}jT.exports={destroy:K1,undestroy:V1}});var WT=q((xH,$T)=>{$T.exports=require("util").deprecate});var Im=q((FH,QT)=>{"use strict";var fo=Fa();QT.exports=Zt;function UT(t){var e=this;this.next=null,this.entry=null,this.finish=function(){dL(e,t)}}var G1=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:fo.nextTick,ms;Zt.WritableState=La;var BT=Object.create(ps());BT.inherits=gs();var Q1={deprecate:WT()},zT=Dm(),Ul=Oa().Buffer,X1=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Y1(t){return Ul.from(t)}function J1(t){return Ul.isBuffer(t)||t instanceof X1}var KT=Fm();BT.inherits(Zt,zT);function Z1(){}function La(t,e){ms=ms||ho(),t=t||{};var r=e instanceof ms;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=t.decodeStrings===!1;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){sL(e,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new UT(this)}La.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(La.prototype,"buffer",{get:Q1.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Hl;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Hl=Function.prototype[Symbol.hasInstance],Object.defineProperty(Zt,Symbol.hasInstance,{value:function(t){return Hl.call(this,t)?!0:this!==Zt?!1:t&&t._writableState instanceof La}})):Hl=function(t){return t instanceof this};function Zt(t){if(ms=ms||ho(),!Hl.call(Zt,this)&&!(this instanceof ms))return new Zt(t);this._writableState=new La(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),zT.call(this)}Zt.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function eL(t,e){var r=new Error("write after end");t.emit("error",r),fo.nextTick(e,r)}function tL(t,e,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!e.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),fo.nextTick(n,o),i=!1),i}Zt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,o=!n.objectMode&&J1(t);return o&&!Ul.isBuffer(t)&&(t=Y1(t)),typeof e=="function"&&(r=e,e=null),o?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Z1),n.ended?eL(this,r):(o||tL(this,n,t,r))&&(n.pendingcb++,i=nL(this,n,o,t,e,r)),i};Zt.prototype.cork=function(){var t=this._writableState;t.corked++};Zt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&VT(this,t))};Zt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function rL(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Ul.from(e,r)),e}Object.defineProperty(Zt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function nL(t,e,r,n,i,o){if(!r){var a=rL(e,n,i);n!==a&&(r=!0,i="buffer",n=a)}var u=e.objectMode?1:n.length;e.length+=u;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Om(t,e,!1,u,n,i,o);return c}function Om(t,e,r,n,i,o,a){e.writelen=n,e.writecb=a,e.writing=!0,e.sync=!0,r?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function iL(t,e,r,n,i){--e.pendingcb,r?(fo.nextTick(i,n),fo.nextTick(Aa,t,e),t._writableState.errorEmitted=!0,t.emit("error",n)):(i(n),t._writableState.errorEmitted=!0,t.emit("error",n),Aa(t,e))}function oL(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function sL(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(oL(r),e)iL(t,r,n,e,i);else{var o=GT(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&VT(t,r),n?G1(HT,t,r,o,i):HT(t,r,o,i)}}function HT(t,e,r,n){r||aL(t,e),e.pendingcb--,n(),Aa(t,e)}function aL(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function VT(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),o=e.corkedRequestsFree;o.entry=r;for(var a=0,u=!0;r;)i[a]=r,r.isBuf||(u=!1),r=r.next,a+=1;i.allBuffers=u,Om(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new UT(e),e.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,d=r.encoding,f=r.callback,y=e.objectMode?1:c.length;if(Om(t,e,!1,y,c,d,f),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Zt.prototype._write=function(t,e,r){r(new Error("_write() is not implemented"))};Zt.prototype._writev=null;Zt.prototype.end=function(t,e,r){var n=this._writableState;typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||lL(this,n,r)};function GT(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function uL(t,e){t._final(function(r){e.pendingcb--,r&&t.emit("error",r),e.prefinished=!0,t.emit("prefinish"),Aa(t,e)})}function cL(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"?(e.pendingcb++,e.finalCalled=!0,fo.nextTick(uL,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function Aa(t,e){var r=GT(e);return r&&(cL(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"))),r}function lL(t,e,r){e.ending=!0,Aa(t,e),r&&(e.finished?fo.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function dL(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Zt.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}});Zt.prototype.destroy=KT.destroy;Zt.prototype._undestroy=KT.undestroy;Zt.prototype._destroy=function(t,e){this.end(),e(t)}});var ho=q((OH,ZT)=>{"use strict";var XT=Fa(),fL=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};ZT.exports=ni;var YT=Object.create(ps());YT.inherits=gs();var JT=Nm(),Lm=Im();YT.inherits(ni,JT);for(Am=fL(Lm.prototype),Bl=0;Bl<Am.length;Bl++)zl=Am[Bl],ni.prototype[zl]||(ni.prototype[zl]=Lm.prototype[zl]);var Am,zl,Bl;function ni(t){if(!(this instanceof ni))return new ni(t);JT.call(this,t),Lm.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",hL)}Object.defineProperty(ni.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function hL(){this.allowHalfOpen||this._writableState.ended||XT.nextTick(pL,this)}function pL(t){t.end()}Object.defineProperty(ni.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(t){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=t,this._writableState.destroyed=t)}});ni.prototype._destroy=function(t,e){this.push(null),this.end(),XT.nextTick(e,t)}});var $m=q(t0=>{"use strict";var jm=Oa().Buffer,e0=jm.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function gL(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function mL(t){var e=gL(t);if(typeof e!="string"&&(jm.isEncoding===e0||!e0(t)))throw new Error("Unknown encoding: "+t);return e||t}t0.StringDecoder=Na;function Na(t){this.encoding=mL(t);var e;switch(this.encoding){case"utf16le":this.text=SL,this.end=CL,e=4;break;case"utf8":this.fillLast=_L,e=4;break;case"base64":this.text=RL,this.end=TL,e=3;break;default:this.write=DL,this.end=EL;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=jm.allocUnsafe(e)}Na.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};Na.prototype.end=wL;Na.prototype.text=bL;Na.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Mm(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function yL(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Mm(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Mm(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Mm(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function vL(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function _L(t){var e=this.lastTotal-this.lastNeed,r=vL(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function bL(t,e){var r=yL(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function wL(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function SL(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function CL(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function RL(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function TL(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function DL(t){return t.toString(this.encoding)}function EL(t){return t&&t.length?this.write(t):""}});var Nm=q((LH,h0)=>{"use strict";var vs=Fa();h0.exports=kt;var PL=FT(),Ma;kt.ReadableState=u0;var AH=require("events").EventEmitter,o0=function(t,e){return t.listeners(e).length},zm=Dm(),ja=Oa().Buffer,kL=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function qL(t){return ja.from(t)}function xL(t){return ja.isBuffer(t)||t instanceof kL}var s0=Object.create(ps());s0.inherits=gs();var Wm=require("util"),ft=void 0;Wm&&Wm.debuglog?ft=Wm.debuglog("stream"):ft=function(){};var FL=MT(),a0=Fm(),ys;s0.inherits(kt,zm);var Hm=["error","close","destroy","pause","resume"];function OL(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):PL(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function u0(t,e){Ma=Ma||ho(),t=t||{};var r=e instanceof Ma;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new FL,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(ys||(ys=$m().StringDecoder),this.decoder=new ys(t.encoding),this.encoding=t.encoding)}function kt(t){if(Ma=Ma||ho(),!(this instanceof kt))return new kt(t);this._readableState=new u0(t,this),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),zm.call(this)}Object.defineProperty(kt.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}});kt.prototype.destroy=a0.destroy;kt.prototype._undestroy=a0.undestroy;kt.prototype._destroy=function(t,e){this.push(null),e(t)};kt.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=ja.from(t,e),e=""),n=!0),c0(this,t,e,!1,n)};kt.prototype.unshift=function(t){return c0(this,t,null,!0,!1)};function c0(t,e,r,n,i){var o=t._readableState;if(e===null)o.reading=!1,NL(t,o);else{var a;i||(a=IL(o,e)),a?t.emit("error",a):o.objectMode||e&&e.length>0?(typeof e!="string"&&!o.objectMode&&Object.getPrototypeOf(e)!==ja.prototype&&(e=qL(e)),n?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):Um(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(e=o.decoder.write(e),o.objectMode||e.length!==0?Um(t,o,e,!1):l0(t,o)):Um(t,o,e,!1))):n||(o.reading=!1)}return AL(o)}function Um(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(t.emit("data",r),t.read(0)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Kl(t)),l0(t,e)}function IL(t,e){var r;return!xL(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function AL(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}kt.prototype.isPaused=function(){return this._readableState.flowing===!1};kt.prototype.setEncoding=function(t){return ys||(ys=$m().StringDecoder),this._readableState.decoder=new ys(t),this._readableState.encoding=t,this};var r0=8388608;function LL(t){return t>=r0?t=r0:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function n0(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=LL(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}kt.prototype.read=function(t){ft("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return ft("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Bm(this):Kl(this),null;if(t=n0(t,e),t===0&&e.ended)return e.length===0&&Bm(this),null;var n=e.needReadable;ft("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,ft("length less than watermark",n)),e.ended||e.reading?(n=!1,ft("reading or ended",n)):n&&(ft("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=n0(r,e)));var i;return t>0?i=d0(t,e):i=null,i===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Bm(this)),i!==null&&this.emit("data",i),i};function NL(t,e){if(!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,Kl(t)}}function Kl(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(ft("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?vs.nextTick(i0,t):i0(t))}function i0(t){ft("emit readable"),t.emit("readable"),Km(t)}function l0(t,e){e.readingMore||(e.readingMore=!0,vs.nextTick(ML,t,e))}function ML(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(ft("maybeReadMore read 0"),t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}kt.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))};kt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,ft("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,o=i?u:R;n.endEmitted?vs.nextTick(o):r.once("end",o),t.on("unpipe",a);function a(D,I){ft("onunpipe"),D===r&&I&&I.hasUnpiped===!1&&(I.hasUnpiped=!0,f())}function u(){ft("onend"),t.end()}var c=jL(r);t.on("drain",c);var d=!1;function f(){ft("cleanup"),t.removeListener("close",h),t.removeListener("finish",S),t.removeListener("drain",c),t.removeListener("error",m),t.removeListener("unpipe",a),r.removeListener("end",u),r.removeListener("end",R),r.removeListener("data",g),d=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&c()}var y=!1;r.on("data",g);function g(D){ft("ondata"),y=!1;var I=t.write(D);I===!1&&!y&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&f0(n.pipes,t)!==-1)&&!d&&(ft("false write response, pause",n.awaitDrain),n.awaitDrain++,y=!0),r.pause())}function m(D){ft("onerror",D),R(),t.removeListener("error",m),o0(t,"error")===0&&t.emit("error",D)}OL(t,"error",m);function h(){t.removeListener("finish",S),R()}t.once("close",h);function S(){ft("onfinish"),t.removeListener("close",h),R()}t.once("finish",S);function R(){ft("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(ft("pipe resume"),r.resume()),t};function jL(t){return function(){var e=t._readableState;ft("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&o0(t,"data")&&(e.flowing=!0,Km(t))}}kt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=f0(e.pipes,t);return a===-1?this:(e.pipes.splice(a,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};kt.prototype.on=function(t,e){var r=zm.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Kl(this):vs.nextTick($L,this))}return r};kt.prototype.addListener=kt.prototype.on;function $L(t){ft("readable nexttick read 0"),t.read(0)}kt.prototype.resume=function(){var t=this._readableState;return t.flowing||(ft("resume"),t.flowing=!0,WL(this,t)),this};function WL(t,e){e.resumeScheduled||(e.resumeScheduled=!0,vs.nextTick(HL,t,e))}function HL(t,e){e.reading||(ft("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Km(t),e.flowing&&!e.reading&&t.read(0)}kt.prototype.pause=function(){return ft("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(ft("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Km(t){var e=t._readableState;for(ft("flow",e.flowing);e.flowing&&t.read()!==null;);}kt.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(ft("wrapped end"),r.decoder&&!r.ended){var a=r.decoder.end();a&&a.length&&e.push(a)}e.push(null)}),t.on("data",function(a){if(ft("wrapped data"),r.decoder&&(a=r.decoder.write(a)),!(r.objectMode&&a==null)&&!(!r.objectMode&&(!a||!a.length))){var u=e.push(a);u||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var o=0;o<Hm.length;o++)t.on(Hm[o],this.emit.bind(this,Hm[o]));return this._read=function(a){ft("wrapped _read",a),n&&(n=!1,t.resume())},this};Object.defineProperty(kt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});kt._fromList=d0;function d0(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.head.data:r=e.buffer.concat(e.length),e.buffer.clear()):r=UL(t,e.buffer,e.decoder),r}function UL(t,e,r){var n;return t<e.head.data.length?(n=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?n=e.shift():n=r?BL(t,e):zL(t,e),n}function BL(t,e){var r=e.head,n=1,i=r.data;for(t-=i.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),t-=a,t===0){a===o.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++n}return e.length-=n,i}function zL(t,e){var r=ja.allocUnsafe(t),n=e.head,i=1;for(n.data.copy(r),t-=n.data.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(o.copy(r,r.length-t,0,a),t-=a,t===0){a===o.length?(++i,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++i}return e.length-=i,r}function Bm(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,vs.nextTick(KL,e,t))}function KL(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function f0(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var Vm=q((NH,m0)=>{"use strict";m0.exports=ii;var Vl=ho(),g0=Object.create(ps());g0.inherits=gs();g0.inherits(ii,Vl);function VL(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ii(t){if(!(this instanceof ii))return new ii(t);Vl.call(this,t),this._transformState={afterTransform:VL.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",GL)}function GL(){var t=this;typeof this._flush=="function"?this._flush(function(e,r){p0(t,e,r)}):p0(this,null,null)}ii.prototype.push=function(t,e){return this._transformState.needTransform=!1,Vl.prototype.push.call(this,t,e)};ii.prototype._transform=function(t,e,r){throw new Error("_transform() is not implemented")};ii.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ii.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};ii.prototype._destroy=function(t,e){var r=this;Vl.prototype._destroy.call(this,t,function(n){e(n),r.emit("close")})};function p0(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}});var b0=q((MH,_0)=>{"use strict";_0.exports=$a;var y0=Vm(),v0=Object.create(ps());v0.inherits=gs();v0.inherits($a,y0);function $a(t){if(!(this instanceof $a))return new $a(t);y0.call(this,t)}$a.prototype._transform=function(t,e,r){r(null,t)}});var Gm=q((dr,Gl)=>{var jn=require("stream");process.env.READABLE_STREAM==="disable"&&jn?(Gl.exports=jn,dr=Gl.exports=jn.Readable,dr.Readable=jn.Readable,dr.Writable=jn.Writable,dr.Duplex=jn.Duplex,dr.Transform=jn.Transform,dr.PassThrough=jn.PassThrough,dr.Stream=jn):(dr=Gl.exports=Nm(),dr.Stream=jn||dr,dr.Readable=dr,dr.Writable=Im(),dr.Duplex=ho(),dr.Transform=Vm(),dr.PassThrough=b0())});var Ym=q((jH,Xm)=>{"use strict";var Qm=Gm();function _s(t,e,r){typeof r>"u"&&(r=e,e=t,t=null),Qm.Duplex.call(this,t),typeof r.read!="function"&&(r=new Qm.Readable(t).wrap(r)),this._writable=e,this._readable=r,this._waiting=!1;var n=this;e.once("finish",function(){n.end()}),this.once("finish",function(){e.end()}),r.on("readable",function(){n._waiting&&(n._waiting=!1,n._read())}),r.once("end",function(){n.push(null)}),(!t||typeof t.bubbleErrors>"u"||t.bubbleErrors)&&(e.on("error",function(i){n.emit("error",i)}),r.on("error",function(i){n.emit("error",i)}))}_s.prototype=Object.create(Qm.Duplex.prototype,{constructor:{value:_s}});_s.prototype._write=function(e,r,n){this._writable.write(e,r,n)};_s.prototype._read=function(){for(var e,r=0;(e=this._readable.read())!==null;)this.push(e),r++;r===0&&(this._waiting=!0)};Xm.exports=function(e,r,n){return new _s(e,r,n)};Xm.exports.DuplexWrapper=_s});var S0=q(($H,w0)=>{var Jm=require("stream"),QL=Nl(),XL=Ym(),YL=Il();function JL(t,e){let r=Jm.PassThrough({objectMode:!0}),n=Jm.PassThrough(),i=Jm.Transform({objectMode:!0}),o=t instanceof RegExp?t:t&&new RegExp(t),a;i._transform=function(c,d,f){if(a||o&&!o.exec(c.path))return c.autodrain(),f();a=!0,u.emit("entry",c),c.on("error",function(y){n.emit("error",y)}),c.pipe(n).on("error",function(y){f(y)}).on("finish",function(y){f(null,y)})},r.pipe(QL(e)).on("error",function(c){n.emit("error",c)}).pipe(i).on("error",Object).on("finish",function(){a?n.end():n.emit("error",new Error("PATTERN_NOT_FOUND"))});let u=XL(r,n);return u.buffer=function(){return YL(n)},u}w0.exports=JL});var ur=q(Zm=>{"use strict";Zm.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,n)=>{e.push((i,o)=>i!=null?n(i):r(o)),t.apply(this,e)})},"name",{value:t.name})};Zm.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);e.pop(),t.apply(this,e).then(n=>r(null,n),r)},"name",{value:t.name})}});var R0=q((HH,C0)=>{var Oi=require("constants"),ZL=process.cwd,Ql=null,eN=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Ql||(Ql=ZL.call(process)),Ql};try{process.cwd()}catch{}typeof process.chdir=="function"&&(ey=process.chdir,process.chdir=function(t){Ql=null,ey.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,ey));var ey;C0.exports=tN;function tN(t){Oi.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=a(t.chownSync),t.fchownSync=a(t.fchownSync),t.lchownSync=a(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=u(t.stat),t.fstat=u(t.fstat),t.lstat=u(t.lstat),t.statSync=c(t.statSync),t.fstatSync=c(t.fstatSync),t.lstatSync=c(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(f,y,g){g&&process.nextTick(g)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(f,y,g,m){m&&process.nextTick(m)},t.lchownSync=function(){}),eN==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(f){function y(g,m,h){var S=Date.now(),R=0;f(g,m,function D(I){if(I&&(I.code==="EACCES"||I.code==="EPERM"||I.code==="EBUSY")&&Date.now()-S<6e4){setTimeout(function(){t.stat(m,function(A,N){A&&A.code==="ENOENT"?f(g,m,D):h(I)})},R),R<100&&(R+=10);return}h&&h(I)})}return Object.setPrototypeOf&&Object.setPrototypeOf(y,f),y}(t.rename)),t.read=typeof t.read!="function"?t.read:function(f){function y(g,m,h,S,R,D){var I;if(D&&typeof D=="function"){var A=0;I=function(N,ee,fe){if(N&&N.code==="EAGAIN"&&A<10)return A++,f.call(t,g,m,h,S,R,I);D.apply(this,arguments)}}return f.call(t,g,m,h,S,R,I)}return Object.setPrototypeOf&&Object.setPrototypeOf(y,f),y}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(f){return function(y,g,m,h,S){for(var R=0;;)try{return f.call(t,y,g,m,h,S)}catch(D){if(D.code==="EAGAIN"&&R<10){R++;continue}throw D}}}(t.readSync);function e(f){f.lchmod=function(y,g,m){f.open(y,Oi.O_WRONLY|Oi.O_SYMLINK,g,function(h,S){if(h){m&&m(h);return}f.fchmod(S,g,function(R){f.close(S,function(D){m&&m(R||D)})})})},f.lchmodSync=function(y,g){var m=f.openSync(y,Oi.O_WRONLY|Oi.O_SYMLINK,g),h=!0,S;try{S=f.fchmodSync(m,g),h=!1}finally{if(h)try{f.closeSync(m)}catch{}else f.closeSync(m)}return S}}function r(f){Oi.hasOwnProperty("O_SYMLINK")&&f.futimes?(f.lutimes=function(y,g,m,h){f.open(y,Oi.O_SYMLINK,function(S,R){if(S){h&&h(S);return}f.futimes(R,g,m,function(D){f.close(R,function(I){h&&h(D||I)})})})},f.lutimesSync=function(y,g,m){var h=f.openSync(y,Oi.O_SYMLINK),S,R=!0;try{S=f.futimesSync(h,g,m),R=!1}finally{if(R)try{f.closeSync(h)}catch{}else f.closeSync(h)}return S}):f.futimes&&(f.lutimes=function(y,g,m,h){h&&process.nextTick(h)},f.lutimesSync=function(){})}function n(f){return f&&function(y,g,m){return f.call(t,y,g,function(h){d(h)&&(h=null),m&&m.apply(this,arguments)})}}function i(f){return f&&function(y,g){try{return f.call(t,y,g)}catch(m){if(!d(m))throw m}}}function o(f){return f&&function(y,g,m,h){return f.call(t,y,g,m,function(S){d(S)&&(S=null),h&&h.apply(this,arguments)})}}function a(f){return f&&function(y,g,m){try{return f.call(t,y,g,m)}catch(h){if(!d(h))throw h}}}function u(f){return f&&function(y,g,m){typeof g=="function"&&(m=g,g=null);function h(S,R){R&&(R.uid<0&&(R.uid+=4294967296),R.gid<0&&(R.gid+=4294967296)),m&&m.apply(this,arguments)}return g?f.call(t,y,g,h):f.call(t,y,h)}}function c(f){return f&&function(y,g){var m=g?f.call(t,y,g):f.call(t,y);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}function d(f){if(!f||f.code==="ENOSYS")return!0;var y=!process.getuid||process.getuid()!==0;return!!(y&&(f.code==="EINVAL"||f.code==="EPERM"))}}});var E0=q((UH,D0)=>{var T0=require("stream").Stream;D0.exports=rN;function rN(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);T0.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),u=0,c=a.length;u<c;u++){var d=a[u];this[d]=i[d]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}t.open(this.path,this.flags,this.mode,function(f,y){if(f){o.emit("error",f),o.readable=!1;return}o.fd=y,o.emit("open",y),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);T0.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),a=0,u=o.length;a<u;a++){var c=o[a];this[c]=i[c]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var k0=q((BH,P0)=>{"use strict";P0.exports=iN;var nN=Object.getPrototypeOf||function(t){return t.__proto__};function iN(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:nN(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var go=q((zH,ny)=>{var Mt=require("fs"),oN=R0(),sN=E0(),aN=k0(),Xl=require("util"),fr,Jl;typeof Symbol=="function"&&typeof Symbol.for=="function"?(fr=Symbol.for("graceful-fs.queue"),Jl=Symbol.for("graceful-fs.previous")):(fr="___graceful-fs.queue",Jl="___graceful-fs.previous");function uN(){}function F0(t,e){Object.defineProperty(t,fr,{get:function(){return e}})}var po=uN;Xl.debuglog?po=Xl.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(po=function(){var t=Xl.format.apply(Xl,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});Mt[fr]||(q0=global[fr]||[],F0(Mt,q0),Mt.close=function(t){function e(r,n){return t.call(Mt,r,function(i){i||x0(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,Jl,{value:t}),e}(Mt.close),Mt.closeSync=function(t){function e(r){t.apply(Mt,arguments),x0()}return Object.defineProperty(e,Jl,{value:t}),e}(Mt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){po(Mt[fr]),require("assert").equal(Mt[fr].length,0)}));var q0;global[fr]||F0(global,Mt[fr]);ny.exports=ty(aN(Mt));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Mt.__patched&&(ny.exports=ty(Mt),Mt.__patched=!0);function ty(t){oN(t),t.gracefulify=ty,t.createReadStream=ee,t.createWriteStream=fe;var e=t.readFile;t.readFile=r;function r(se,_e,G){return typeof _e=="function"&&(G=_e,_e=null),K(se,_e,G);function K(j,X,$,H){return e(j,X,function(V){V&&(V.code==="EMFILE"||V.code==="ENFILE")?bs([K,[j,X,$],V,H||Date.now(),Date.now()]):typeof $=="function"&&$.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(se,_e,G,K){return typeof G=="function"&&(K=G,G=null),j(se,_e,G,K);function j(X,$,H,V,ne){return n(X,$,H,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?bs([j,[X,$,H,V],P,ne||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var o=t.appendFile;o&&(t.appendFile=a);function a(se,_e,G,K){return typeof G=="function"&&(K=G,G=null),j(se,_e,G,K);function j(X,$,H,V,ne){return o(X,$,H,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?bs([j,[X,$,H,V],P,ne||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var u=t.copyFile;u&&(t.copyFile=c);function c(se,_e,G,K){return typeof G=="function"&&(K=G,G=0),j(se,_e,G,K);function j(X,$,H,V,ne){return u(X,$,H,function(P){P&&(P.code==="EMFILE"||P.code==="ENFILE")?bs([j,[X,$,H,V],P,ne||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}var d=t.readdir;t.readdir=y;var f=/^v[0-5]\./;function y(se,_e,G){typeof _e=="function"&&(G=_e,_e=null);var K=f.test(process.version)?function($,H,V,ne){return d($,j($,H,V,ne))}:function($,H,V,ne){return d($,H,j($,H,V,ne))};return K(se,_e,G);function j(X,$,H,V){return function(ne,P){ne&&(ne.code==="EMFILE"||ne.code==="ENFILE")?bs([K,[X,$,H],ne,V||Date.now(),Date.now()]):(P&&P.sort&&P.sort(),typeof H=="function"&&H.call(this,ne,P))}}}if(process.version.substr(0,4)==="v0.8"){var g=sN(t);D=g.ReadStream,A=g.WriteStream}var m=t.ReadStream;m&&(D.prototype=Object.create(m.prototype),D.prototype.open=I);var h=t.WriteStream;h&&(A.prototype=Object.create(h.prototype),A.prototype.open=N),Object.defineProperty(t,"ReadStream",{get:function(){return D},set:function(se){D=se},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return A},set:function(se){A=se},enumerable:!0,configurable:!0});var S=D;Object.defineProperty(t,"FileReadStream",{get:function(){return S},set:function(se){S=se},enumerable:!0,configurable:!0});var R=A;Object.defineProperty(t,"FileWriteStream",{get:function(){return R},set:function(se){R=se},enumerable:!0,configurable:!0});function D(se,_e){return this instanceof D?(m.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function I(){var se=this;de(se.path,se.flags,se.mode,function(_e,G){_e?(se.autoClose&&se.destroy(),se.emit("error",_e)):(se.fd=G,se.emit("open",G),se.read())})}function A(se,_e){return this instanceof A?(h.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}function N(){var se=this;de(se.path,se.flags,se.mode,function(_e,G){_e?(se.destroy(),se.emit("error",_e)):(se.fd=G,se.emit("open",G))})}function ee(se,_e){return new t.ReadStream(se,_e)}function fe(se,_e){return new t.WriteStream(se,_e)}var re=t.open;t.open=de;function de(se,_e,G,K){return typeof G=="function"&&(K=G,G=null),j(se,_e,G,K);function j(X,$,H,V,ne){return re(X,$,H,function(P,ue){P&&(P.code==="EMFILE"||P.code==="ENFILE")?bs([j,[X,$,H,V],P,ne||Date.now(),Date.now()]):typeof V=="function"&&V.apply(this,arguments)})}}return t}function bs(t){po("ENQUEUE",t[0].name,t[1]),Mt[fr].push(t),ry()}var Yl;function x0(){for(var t=Date.now(),e=0;e<Mt[fr].length;++e)Mt[fr][e].length>2&&(Mt[fr][e][3]=t,Mt[fr][e][4]=t);ry()}function ry(){if(clearTimeout(Yl),Yl=void 0,Mt[fr].length!==0){var t=Mt[fr].shift(),e=t[0],r=t[1],n=t[2],i=t[3],o=t[4];if(i===void 0)po("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){po("TIMEOUT",e.name,r);var a=r.pop();typeof a=="function"&&a.call(null,n)}else{var u=Date.now()-o,c=Math.max(o-i,1),d=Math.min(c*1.2,100);u>=d?(po("RETRY",e.name,r),e.apply(null,r.concat([i]))):Mt[fr].push(t)}Yl===void 0&&(Yl=setTimeout(ry,0))}}});var xr=q(oi=>{"use strict";var O0=ur().fromCallback,qr=go(),cN=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof qr[t]=="function");Object.assign(oi,qr);cN.forEach(t=>{oi[t]=O0(qr[t])});oi.exists=function(t,e){return typeof e=="function"?qr.exists(t,e):new Promise(r=>qr.exists(t,r))};oi.read=function(t,e,r,n,i,o){return typeof o=="function"?qr.read(t,e,r,n,i,o):new Promise((a,u)=>{qr.read(t,e,r,n,i,(c,d,f)=>{if(c)return u(c);a({bytesRead:d,buffer:f})})})};oi.write=function(t,e,...r){return typeof r[r.length-1]=="function"?qr.write(t,e,...r):new Promise((n,i)=>{qr.write(t,e,...r,(o,a,u)=>{if(o)return i(o);n({bytesWritten:a,buffer:u})})})};oi.readv=function(t,e,...r){return typeof r[r.length-1]=="function"?qr.readv(t,e,...r):new Promise((n,i)=>{qr.readv(t,e,...r,(o,a,u)=>{if(o)return i(o);n({bytesRead:a,buffers:u})})})};oi.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?qr.writev(t,e,...r):new Promise((n,i)=>{qr.writev(t,e,...r,(o,a,u)=>{if(o)return i(o);n({bytesWritten:a,buffers:u})})})};typeof qr.realpath.native=="function"?oi.realpath.native=O0(qr.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var A0=q((VH,I0)=>{"use strict";var lN=require("path");I0.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(lN.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}}});var j0=q((GH,iy)=>{"use strict";var L0=xr(),{checkPath:N0}=A0(),M0=t=>{let e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};iy.exports.makeDir=async(t,e)=>(N0(t),L0.mkdir(t,{mode:M0(e),recursive:!0}));iy.exports.makeDirSync=(t,e)=>(N0(t),L0.mkdirSync(t,{mode:M0(e),recursive:!0}))});var qn=q((QH,$0)=>{"use strict";var dN=ur().fromPromise,{makeDir:fN,makeDirSync:oy}=j0(),sy=dN(fN);$0.exports={mkdirs:sy,mkdirsSync:oy,mkdirp:sy,mkdirpSync:oy,ensureDir:sy,ensureDirSync:oy}});var Ii=q((XH,H0)=>{"use strict";var hN=ur().fromPromise,W0=xr();function pN(t){return W0.access(t).then(()=>!0).catch(()=>!1)}H0.exports={pathExists:hN(pN),pathExistsSync:W0.existsSync}});var ay=q((YH,U0)=>{"use strict";var ws=xr(),gN=ur().fromPromise;async function mN(t,e,r){let n=await ws.open(t,"r+"),i=null;try{await ws.futimes(n,e,r)}finally{try{await ws.close(n)}catch(o){i=o}}if(i)throw i}function yN(t,e,r){let n=ws.openSync(t,"r+");return ws.futimesSync(n,e,r),ws.closeSync(n)}U0.exports={utimesMillis:gN(mN),utimesMillisSync:yN}});var mo=q((JH,V0)=>{"use strict";var Ss=xr(),cr=require("path"),B0=ur().fromPromise;function vN(t,e,r){let n=r.dereference?i=>Ss.stat(i,{bigint:!0}):i=>Ss.lstat(i,{bigint:!0});return Promise.all([n(t),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function _N(t,e,r){let n,i=r.dereference?a=>Ss.statSync(a,{bigint:!0}):a=>Ss.lstatSync(a,{bigint:!0}),o=i(t);try{n=i(e)}catch(a){if(a.code==="ENOENT")return{srcStat:o,destStat:null};throw a}return{srcStat:o,destStat:n}}async function bN(t,e,r,n){let{srcStat:i,destStat:o}=await vN(t,e,n);if(o){if(Wa(i,o)){let a=cr.basename(t),u=cr.basename(e);if(r==="move"&&a!==u&&a.toLowerCase()===u.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&uy(t,e))throw new Error(Zl(t,e,r));return{srcStat:i,destStat:o}}function wN(t,e,r,n){let{srcStat:i,destStat:o}=_N(t,e,n);if(o){if(Wa(i,o)){let a=cr.basename(t),u=cr.basename(e);if(r==="move"&&a!==u&&a.toLowerCase()===u.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&uy(t,e))throw new Error(Zl(t,e,r));return{srcStat:i,destStat:o}}async function z0(t,e,r,n){let i=cr.resolve(cr.dirname(t)),o=cr.resolve(cr.dirname(r));if(o===i||o===cr.parse(o).root)return;let a;try{a=await Ss.stat(o,{bigint:!0})}catch(u){if(u.code==="ENOENT")return;throw u}if(Wa(e,a))throw new Error(Zl(t,r,n));return z0(t,e,o,n)}function K0(t,e,r,n){let i=cr.resolve(cr.dirname(t)),o=cr.resolve(cr.dirname(r));if(o===i||o===cr.parse(o).root)return;let a;try{a=Ss.statSync(o,{bigint:!0})}catch(u){if(u.code==="ENOENT")return;throw u}if(Wa(e,a))throw new Error(Zl(t,r,n));return K0(t,e,o,n)}function Wa(t,e){return e.ino!==void 0&&e.dev!==void 0&&e.ino===t.ino&&e.dev===t.dev}function uy(t,e){let r=cr.resolve(t).split(cr.sep).filter(i=>i),n=cr.resolve(e).split(cr.sep).filter(i=>i);return r.every((i,o)=>n[o]===i)}function Zl(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}V0.exports={checkPaths:B0(bN),checkPathsSync:wN,checkParentPaths:B0(z0),checkParentPathsSync:K0,isSrcSubdir:uy,areIdentical:Wa}});var Q0=q((ZH,G0)=>{"use strict";async function SN(t,e){let r=[];for await(let n of t)r.push(e(n).then(()=>null,i=>i??new Error("unknown error")));await Promise.all(r.map(n=>n.then(i=>{if(i!==null)throw i})))}G0.exports={asyncIteratorConcurrentProcess:SN}});var eD=q((eU,Z0)=>{"use strict";var Rr=xr(),Ha=require("path"),{mkdirs:CN}=qn(),{pathExists:RN}=Ii(),{utimesMillis:TN}=ay(),Ua=mo(),{asyncIteratorConcurrentProcess:DN}=Q0();async function EN(t,e,r={}){typeof r=="function"&&(r={filter:r}),r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await Ua.checkPaths(t,e,"copy",r);if(await Ua.checkParentPaths(t,n,e,"copy"),!await Y0(t,e,r))return;let a=Ha.dirname(e);await RN(a)||await CN(a),await J0(i,t,e,r)}async function Y0(t,e,r){return r.filter?r.filter(t,e):!0}async function J0(t,e,r,n){let o=await(n.dereference?Rr.stat:Rr.lstat)(e);if(o.isDirectory())return xN(o,t,e,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return PN(o,t,e,r,n);if(o.isSymbolicLink())return FN(t,e,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}async function PN(t,e,r,n,i){if(!e)return X0(t,r,n,i);if(i.overwrite)return await Rr.unlink(n),X0(t,r,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}async function X0(t,e,r,n){if(await Rr.copyFile(e,r),n.preserveTimestamps){kN(t.mode)&&await qN(r,t.mode);let i=await Rr.stat(e);await TN(r,i.atime,i.mtime)}return Rr.chmod(r,t.mode)}function kN(t){return(t&128)===0}function qN(t,e){return Rr.chmod(t,e|128)}async function xN(t,e,r,n,i){e||await Rr.mkdir(n),await DN(await Rr.opendir(r),async o=>{let a=Ha.join(r,o.name),u=Ha.join(n,o.name);if(await Y0(a,u,i)){let{destStat:d}=await Ua.checkPaths(a,u,"copy",i);await J0(d,a,u,i)}}),e||await Rr.chmod(n,t.mode)}async function FN(t,e,r,n){let i=await Rr.readlink(e);if(n.dereference&&(i=Ha.resolve(process.cwd(),i)),!t)return Rr.symlink(i,r);let o=null;try{o=await Rr.readlink(r)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Rr.symlink(i,r);throw a}if(n.dereference&&(o=Ha.resolve(process.cwd(),o)),i!==o){if(Ua.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(Ua.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`)}return await Rr.unlink(r),Rr.symlink(i,r)}Z0.exports=EN});var oD=q((tU,iD)=>{"use strict";var Fr=go(),Ba=require("path"),ON=qn().mkdirsSync,IN=ay().utimesMillisSync,za=mo();function AN(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=za.checkPathsSync(t,e,"copy",r);if(za.checkParentPathsSync(t,n,e,"copy"),r.filter&&!r.filter(t,e))return;let o=Ba.dirname(e);return Fr.existsSync(o)||ON(o),tD(i,t,e,r)}function tD(t,e,r,n){let o=(n.dereference?Fr.statSync:Fr.lstatSync)(e);if(o.isDirectory())return HN(o,t,e,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return LN(o,t,e,r,n);if(o.isSymbolicLink())return zN(t,e,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function LN(t,e,r,n,i){return e?NN(t,r,n,i):rD(t,r,n,i)}function NN(t,e,r,n){if(n.overwrite)return Fr.unlinkSync(r),rD(t,e,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function rD(t,e,r,n){return Fr.copyFileSync(e,r),n.preserveTimestamps&&MN(t.mode,e,r),cy(r,t.mode)}function MN(t,e,r){return jN(t)&&$N(r,t),WN(e,r)}function jN(t){return(t&128)===0}function $N(t,e){return cy(t,e|128)}function cy(t,e){return Fr.chmodSync(t,e)}function WN(t,e){let r=Fr.statSync(t);return IN(e,r.atime,r.mtime)}function HN(t,e,r,n,i){return e?nD(r,n,i):UN(t.mode,r,n,i)}function UN(t,e,r,n){return Fr.mkdirSync(r),nD(e,r,n),cy(r,t)}function nD(t,e,r){let n=Fr.opendirSync(t);try{let i;for(;(i=n.readSync())!==null;)BN(i.name,t,e,r)}finally{n.closeSync()}}function BN(t,e,r,n){let i=Ba.join(e,t),o=Ba.join(r,t);if(n.filter&&!n.filter(i,o))return;let{destStat:a}=za.checkPathsSync(i,o,"copy",n);return tD(a,i,o,n)}function zN(t,e,r,n){let i=Fr.readlinkSync(e);if(n.dereference&&(i=Ba.resolve(process.cwd(),i)),t){let o;try{o=Fr.readlinkSync(r)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Fr.symlinkSync(i,r);throw a}if(n.dereference&&(o=Ba.resolve(process.cwd(),o)),i!==o){if(za.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(za.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`)}return KN(i,r)}else return Fr.symlinkSync(i,r)}function KN(t,e){return Fr.unlinkSync(e),Fr.symlinkSync(t,e)}iD.exports=AN});var ed=q((rU,sD)=>{"use strict";var VN=ur().fromPromise;sD.exports={copy:VN(eD()),copySync:oD()}});var Ka=q((nU,uD)=>{"use strict";var aD=go(),GN=ur().fromCallback;function QN(t,e){aD.rm(t,{recursive:!0,force:!0},e)}function XN(t){aD.rmSync(t,{recursive:!0,force:!0})}uD.exports={remove:GN(QN),removeSync:XN}});var mD=q((iU,gD)=>{"use strict";var YN=ur().fromPromise,dD=xr(),fD=require("path"),hD=qn(),pD=Ka(),cD=YN(async function(e){let r;try{r=await dD.readdir(e)}catch{return hD.mkdirs(e)}return Promise.all(r.map(n=>pD.remove(fD.join(e,n))))});function lD(t){let e;try{e=dD.readdirSync(t)}catch{return hD.mkdirsSync(t)}e.forEach(r=>{r=fD.join(t,r),pD.removeSync(r)})}gD.exports={emptyDirSync:lD,emptydirSync:lD,emptyDir:cD,emptydir:cD}});var bD=q((oU,_D)=>{"use strict";var JN=ur().fromPromise,yD=require("path"),si=xr(),vD=qn();async function ZN(t){let e;try{e=await si.stat(t)}catch{}if(e&&e.isFile())return;let r=yD.dirname(t),n=null;try{n=await si.stat(r)}catch(i){if(i.code==="ENOENT"){await vD.mkdirs(r),await si.writeFile(t,"");return}else throw i}n.isDirectory()?await si.writeFile(t,""):await si.readdir(r)}function eM(t){let e;try{e=si.statSync(t)}catch{}if(e&&e.isFile())return;let r=yD.dirname(t);try{si.statSync(r).isDirectory()||si.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")vD.mkdirsSync(r);else throw n}si.writeFileSync(t,"")}_D.exports={createFile:JN(ZN),createFileSync:eM}});var TD=q((sU,RD)=>{"use strict";var tM=ur().fromPromise,wD=require("path"),Ai=xr(),SD=qn(),{pathExists:rM}=Ii(),{areIdentical:CD}=mo();async function nM(t,e){let r;try{r=await Ai.lstat(e)}catch{}let n;try{n=await Ai.lstat(t)}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(r&&CD(n,r))return;let i=wD.dirname(e);await rM(i)||await SD.mkdirs(i),await Ai.link(t,e)}function iM(t,e){let r;try{r=Ai.lstatSync(e)}catch{}try{let o=Ai.lstatSync(t);if(r&&CD(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=wD.dirname(e);return Ai.existsSync(n)||SD.mkdirsSync(n),Ai.linkSync(t,e)}RD.exports={createLink:tM(nM),createLinkSync:iM}});var ED=q((aU,DD)=>{"use strict";var Li=require("path"),Va=xr(),{pathExists:oM}=Ii(),sM=ur().fromPromise;async function aM(t,e){if(Li.isAbsolute(t)){try{await Va.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:t,toDst:t}}let r=Li.dirname(e),n=Li.join(r,t);if(await oM(n))return{toCwd:n,toDst:t};try{await Va.lstat(t)}catch(o){throw o.message=o.message.replace("lstat","ensureSymlink"),o}return{toCwd:t,toDst:Li.relative(r,t)}}function uM(t,e){if(Li.isAbsolute(t)){if(!Va.existsSync(t))throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}let r=Li.dirname(e),n=Li.join(r,t);if(Va.existsSync(n))return{toCwd:n,toDst:t};if(!Va.existsSync(t))throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Li.relative(r,t)}}DD.exports={symlinkPaths:sM(aM),symlinkPathsSync:uM}});var qD=q((uU,kD)=>{"use strict";var PD=xr(),cM=ur().fromPromise;async function lM(t,e){if(e)return e;let r;try{r=await PD.lstat(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}function dM(t,e){if(e)return e;let r;try{r=PD.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}kD.exports={symlinkType:cM(lM),symlinkTypeSync:dM}});var ID=q((cU,OD)=>{"use strict";var fM=ur().fromPromise,xD=require("path"),$n=xr(),{mkdirs:hM,mkdirsSync:pM}=qn(),{symlinkPaths:gM,symlinkPathsSync:mM}=ED(),{symlinkType:yM,symlinkTypeSync:vM}=qD(),{pathExists:_M}=Ii(),{areIdentical:FD}=mo();async function bM(t,e,r){let n;try{n=await $n.lstat(e)}catch{}if(n&&n.isSymbolicLink()){let[u,c]=await Promise.all([$n.stat(t),$n.stat(e)]);if(FD(u,c))return}let i=await gM(t,e);t=i.toDst;let o=await yM(i.toCwd,r),a=xD.dirname(e);return await _M(a)||await hM(a),$n.symlink(t,e,o)}function wM(t,e,r){let n;try{n=$n.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let u=$n.statSync(t),c=$n.statSync(e);if(FD(u,c))return}let i=mM(t,e);t=i.toDst,r=vM(i.toCwd,r);let o=xD.dirname(e);return $n.existsSync(o)||pM(o),$n.symlinkSync(t,e,r)}OD.exports={createSymlink:fM(bM),createSymlinkSync:wM}});var HD=q((lU,WD)=>{"use strict";var{createFile:AD,createFileSync:LD}=bD(),{createLink:ND,createLinkSync:MD}=TD(),{createSymlink:jD,createSymlinkSync:$D}=ID();WD.exports={createFile:AD,createFileSync:LD,ensureFile:AD,ensureFileSync:LD,createLink:ND,createLinkSync:MD,ensureLink:ND,ensureLinkSync:MD,createSymlink:jD,createSymlinkSync:$D,ensureSymlink:jD,ensureSymlinkSync:$D}});var td=q((dU,UD)=>{function SM(t,{EOL:e=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+o}function CM(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}UD.exports={stringify:SM,stripBom:CM}});var VD=q((fU,KD)=>{var Cs;try{Cs=go()}catch{Cs=require("fs")}var rd=ur(),{stringify:BD,stripBom:zD}=td();async function RM(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||Cs,n="throws"in e?e.throws:!0,i=await rd.fromCallback(r.readFile)(t,e);i=zD(i);let o;try{o=JSON.parse(i,e?e.reviver:null)}catch(a){if(n)throw a.message=`${t}: ${a.message}`,a;return null}return o}var TM=rd.fromPromise(RM);function DM(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||Cs,n="throws"in e?e.throws:!0;try{let i=r.readFileSync(t,e);return i=zD(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${t}: ${i.message}`,i;return null}}async function EM(t,e,r={}){let n=r.fs||Cs,i=BD(e,r);await rd.fromCallback(n.writeFile)(t,i,r)}var PM=rd.fromPromise(EM);function kM(t,e,r={}){let n=r.fs||Cs,i=BD(e,r);return n.writeFileSync(t,i,r)}KD.exports={readFile:TM,readFileSync:DM,writeFile:PM,writeFileSync:kM}});var QD=q((hU,GD)=>{"use strict";var nd=VD();GD.exports={readJson:nd.readFile,readJsonSync:nd.readFileSync,writeJson:nd.writeFile,writeJsonSync:nd.writeFileSync}});var id=q((pU,JD)=>{"use strict";var qM=ur().fromPromise,ly=xr(),XD=require("path"),YD=qn(),xM=Ii().pathExists;async function FM(t,e,r="utf-8"){let n=XD.dirname(t);return await xM(n)||await YD.mkdirs(n),ly.writeFile(t,e,r)}function OM(t,...e){let r=XD.dirname(t);ly.existsSync(r)||YD.mkdirsSync(r),ly.writeFileSync(t,...e)}JD.exports={outputFile:qM(FM),outputFileSync:OM}});var eE=q((gU,ZD)=>{"use strict";var{stringify:IM}=td(),{outputFile:AM}=id();async function LM(t,e,r={}){let n=IM(e,r);await AM(t,n,r)}ZD.exports=LM});var rE=q((mU,tE)=>{"use strict";var{stringify:NM}=td(),{outputFileSync:MM}=id();function jM(t,e,r){let n=NM(e,r);MM(t,n,r)}tE.exports=jM});var iE=q((yU,nE)=>{"use strict";var $M=ur().fromPromise,Or=QD();Or.outputJson=$M(eE());Or.outputJsonSync=rE();Or.outputJSON=Or.outputJson;Or.outputJSONSync=Or.outputJsonSync;Or.writeJSON=Or.writeJson;Or.writeJSONSync=Or.writeJsonSync;Or.readJSON=Or.readJson;Or.readJSONSync=Or.readJsonSync;nE.exports=Or});var cE=q((vU,uE)=>{"use strict";var WM=xr(),oE=require("path"),{copy:HM}=ed(),{remove:aE}=Ka(),{mkdirp:UM}=qn(),{pathExists:BM}=Ii(),sE=mo();async function zM(t,e,r={}){let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=await sE.checkPaths(t,e,"move",r);await sE.checkParentPaths(t,i,e,"move");let a=oE.dirname(e);return oE.parse(a).root!==a&&await UM(a),KM(t,e,n,o)}async function KM(t,e,r,n){if(!n){if(r)await aE(e);else if(await BM(e))throw new Error("dest already exists.")}try{await WM.rename(t,e)}catch(i){if(i.code!=="EXDEV")throw i;await VM(t,e,r)}}async function VM(t,e,r){return await HM(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),aE(t)}uE.exports=zM});var pE=q((_U,hE)=>{"use strict";var dE=go(),fy=require("path"),GM=ed().copySync,fE=Ka().removeSync,QM=qn().mkdirpSync,lE=mo();function XM(t,e,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=lE.checkPathsSync(t,e,"move",r);return lE.checkParentPathsSync(t,i,e,"move"),YM(e)||QM(fy.dirname(e)),JM(t,e,n,o)}function YM(t){let e=fy.dirname(t);return fy.parse(e).root===e}function JM(t,e,r,n){if(n)return dy(t,e,r);if(r)return fE(e),dy(t,e,r);if(dE.existsSync(e))throw new Error("dest already exists.");return dy(t,e,r)}function dy(t,e,r){try{dE.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return ZM(t,e,r)}}function ZM(t,e,r){return GM(t,e,{overwrite:r,errorOnExist:!0,preserveTimestamps:!0}),fE(t)}hE.exports=XM});var mE=q((bU,gE)=>{"use strict";var ej=ur().fromPromise;gE.exports={move:ej(cE()),moveSync:pE()}});var hy=q((wU,yE)=>{"use strict";yE.exports={...xr(),...ed(),...mD(),...HD(),...iE(),...qn(),...mE(),...id(),...Ii(),...Ka()}});var _E=q((SU,vE)=>{vE.exports=ij;var tj=Nl(),py=hy(),od=require("path"),rj=require("stream"),nj=Ym();function ij(t){t.path=od.resolve(od.normalize(t.path));let e=new tj(t),r=new rj.Writable({objectMode:!0});r._write=async function(i,o,a){let u=od.join(t.path,i.path.replace(/\\/g,"/"));if(u.indexOf(t.path)!=0)return a();if(i.type=="Directory")return await py.ensureDir(u),a();await py.ensureDir(od.dirname(u));let c=t.getWriter?t.getWriter({path:u}):py.createWriteStream(u);i.pipe(c).on("error",a).on("close",a)};let n=nj(e,r);return e.once("crx-header",function(i){n.crxHeader=i}),e.pipe(r).on("finish",function(){n.emit("close")}),n.promise=function(){return new Promise(function(i,o){n.on("close",i),n.on("error",o)})},n}});var SE=q((CU,wE)=>{var gy=4294967296,bE=[];for(Rs=0;Rs<256;Rs++)bE[Rs]=(Rs>15?"":"0")+Rs.toString(16);var Rs,Ga=wE.exports=function(t,e){t instanceof Buffer?(this.buffer=t,this.offset=e||0):Object.prototype.toString.call(t)=="[object Uint8Array]"?(this.buffer=new Buffer(t),this.offset=e||0):(this.buffer=this.buffer||new Buffer(8),this.offset=0,this.setValue.apply(this,arguments))};Ga.MAX_INT=Math.pow(2,53);Ga.MIN_INT=-Math.pow(2,53);Ga.prototype={constructor:Ga,_2scomp:function(){for(var t=this.buffer,e=this.offset,r=1,n=e+7;n>=e;n--){var i=(t[n]^255)+r;t[n]=i&255,r=i>>8}},setValue:function(t,e){var r=!1;if(arguments.length==1)if(typeof t=="number"){if(r=t<0,t=Math.abs(t),e=t%gy,t=t/gy,t>gy)throw new RangeError(t+" is outside Int64 range");t=t|0}else if(typeof t=="string")t=(t+"").replace(/^0x/,""),e=t.substr(-8),t=t.length>8?t.substr(0,t.length-8):"",t=parseInt(t,16),e=parseInt(e,16);else throw new Error(t+" must be a Number or String");for(var n=this.buffer,i=this.offset,o=7;o>=0;o--)n[i+o]=e&255,e=o==4?t:e>>>8;r&&this._2scomp()},toNumber:function(t){for(var e=this.buffer,r=this.offset,n=e[r]&128,i=0,o=1,a=7,u=1;a>=0;a--,u*=256){var c=e[r+a];n&&(c=(c^255)+o,o=c>>8,c=c&255),i+=c*u}return!t&&i>=Ga.MAX_INT?n?-1/0:1/0:n?-i:i},valueOf:function(){return this.toNumber(!1)},toString:function(t){return this.valueOf().toString(t||10)},toOctetString:function(t){for(var e=new Array(8),r=this.buffer,n=this.offset,i=0;i<8;i++)e[i]=bE[r[n+i]];return e.join(t||"")},toBuffer:function(t){if(t&&this.offset===0)return this.buffer;var e=new Buffer(8);return this.buffer.copy(e,0,this.offset,this.offset+8),e},copy:function(t,e){this.buffer.copy(t,e||0,this.offset,this.offset+8)},compare:function(t){if((this.buffer[this.offset]&128)!=(t.buffer[t.offset]&128))return t.buffer[t.offset]-this.buffer[this.offset];for(var e=0;e<8;e++)if(this.buffer[this.offset+e]!==t.buffer[t.offset+e])return this.buffer[this.offset+e]-t.buffer[t.offset+e];return 0},equals:function(t){return this.compare(t)===0},inspect:function(){return"[Int64 value:"+this+" octets:"+this.toOctetString(" ")+"]"}}});var DE=q((RU,TE)=>{var oj=SE(),sd=require("stream");(!sd.Writable||!sd.Writable.prototype.destroy)&&(sd=Gm());var ad;function sj(){let e,r,n;for(ad=[],r=0;r<256;r++){for(e=r,n=0;n<8;n++)e=e&1?3988292384^e>>>1:e=e>>>1;ad[r]=e>>>0}}function CE(t,e){ad||sj(),t.charCodeAt&&(t=t.charCodeAt(0));let r=e.readUInt32BE()>>8&16777215,n=ad[(e.readUInt32BE()^t>>>0)&255];return(r^n)>>>0}function RE(t,e){let r=t>>16&65535,n=t&65535,i=e>>16&65535,o=e&65535;return((r*o+n*i&65535)<<16>>>0)+n*o}function Ts(){if(!(this instanceof Ts))return new Ts;this.key0=Buffer.allocUnsafe(4),this.key1=Buffer.allocUnsafe(4),this.key2=Buffer.allocUnsafe(4),this.key0.writeUInt32BE(305419896,0),this.key1.writeUInt32BE(591751049,0),this.key2.writeUInt32BE(878082192,0)}Ts.prototype.update=function(t){this.key0.writeUInt32BE(CE(t,this.key0)),this.key1.writeUInt32BE((this.key0.readUInt32BE()&255&4294967295)+this.key1.readUInt32BE()>>>0);let e=new oj(RE(this.key1.readUInt32BE(),134775813)+1&4294967295),r=Buffer.alloc(8);e.copy(r,0),r.copy(this.key1,0,4,8),this.key2.writeUInt32BE(CE((this.key1.readUInt32BE()>>24&255)>>>0,this.key2))};Ts.prototype.decryptByte=function(t){let e=(this.key2.readUInt32BE()|2)>>>0;return t=t^RE(e,e^1)>>8&255,this.update(t),t};Ts.prototype.stream=function(){let t=sd.Transform(),e=this;return t._transform=function(r,n,i){for(let o=0;o<r.length;o++)r[o]=e.decryptByte(r[o]);this.push(r),i()},t};TE.exports=Ts});var kE=q((TU,PE)=>{var aj=DE(),uj=Ol(),EE=require("stream"),cj=require("zlib"),lj=Al(),dj=Ll(),fj=qa();PE.exports=function(e,r,n,i,o){let a=uj(),u=EE.PassThrough(),c=e.stream(r,o);return c.pipe(a).on("error",function(d){u.emit("error",d)}),u.vars=a.pull(30).then(function(d){let f=fj.parse(d,[["signature",4],["versionsNeededToExtract",2],["flags",2],["compressionMethod",2],["lastModifiedTime",2],["lastModifiedDate",2],["crc32",4],["compressedSize",4],["uncompressedSize",4],["fileNameLength",2],["extraFieldLength",2]]);return f.lastModifiedDateTime=dj(f.lastModifiedDate,f.lastModifiedTime),a.pull(f.fileNameLength).then(function(y){return f.fileName=y.toString("utf8"),a.pull(f.extraFieldLength)}).then(function(y){let g;return f.extra=lj(y,f),i&&i.compressedSize&&(f=i),f.flags&1&&(g=a.pull(12).then(function(m){if(!n)throw new Error("MISSING_PASSWORD");let h=aj();String(n).split("").forEach(function(R){h.update(R)});for(let R=0;R<m.length;R++)m[R]=h.decryptByte(m[R]);f.decrypt=h,f.compressedSize-=12;let S=f.flags&8?f.lastModifiedTime>>8&255:f.crc32>>24&255;if(m[11]!==S)throw new Error("BAD_PASSWORD");return f})),Promise.resolve(g).then(function(){return u.emit("vars",f),f})})}),u.vars.then(function(d){let f=!(d.flags&8)||d.compressedSize>0,y,g=d.compressionMethod?cj.createInflateRaw():EE.PassThrough();f?(u.size=d.uncompressedSize,y=d.compressedSize):(y=Buffer.alloc(4),y.writeUInt32LE(134695760,0));let m=a.stream(y);d.decrypt&&(m=m.pipe(d.decrypt.stream())),m.pipe(g).on("error",function(h){u.emit("error",h)}).pipe(u).on("finish",function(){c.destroy?c.destroy():c.abort?c.abort():c.close?c.close():c.push?c.push():console.log("warning - unable to close stream")})}).catch(function(d){u.emit("error",d)}),u}});var Ni=q((DU,vy)=>{var my=function(){"use strict";return this===void 0}();my?vy.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:my,propertyIsWritable:function(t,e){var r=Object.getOwnPropertyDescriptor(t,e);return!!(!r||r.writable||r.set)}}:(qE={}.hasOwnProperty,xE={}.toString,FE={}.constructor.prototype,yy=function(t){var e=[];for(var r in t)qE.call(t,r)&&e.push(r);return e},OE=function(t,e){return{value:t[e]}},IE=function(t,e,r){return t[e]=r.value,t},AE=function(t){return t},LE=function(t){try{return Object(t).constructor.prototype}catch{return FE}},NE=function(t){try{return xE.call(t)==="[object Array]"}catch{return!1}},vy.exports={isArray:NE,keys:yy,names:yy,defineProperty:IE,getDescriptor:OE,freeze:AE,getPrototypeOf:LE,isES5:my,propertyIsWritable:function(){return!0}});var qE,xE,FE,yy,OE,IE,AE,LE,NE});var Dt=q((exports,module)=>{"use strict";var es5=Ni(),canEvaluate=typeof navigator>"u",errorObj={e:{}},tryCatchTarget,globalObject=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:exports!==void 0?exports:null;function tryCatcher(){try{var t=tryCatchTarget;return tryCatchTarget=null,t.apply(this,arguments)}catch(e){return errorObj.e=e,errorObj}}function tryCatch(t){return tryCatchTarget=t,tryCatcher}var inherits=function(t,e){var r={}.hasOwnProperty;function n(){this.constructor=t,this.constructor$=e;for(var i in e.prototype)r.call(e.prototype,i)&&i.charAt(i.length-1)!=="$"&&(this[i+"$"]=e.prototype[i])}return n.prototype=e.prototype,t.prototype=new n,t.prototype};function isPrimitive(t){return t==null||t===!0||t===!1||typeof t=="string"||typeof t=="number"}function isObject(t){return typeof t=="function"||typeof t=="object"&&t!==null}function maybeWrapAsError(t){return isPrimitive(t)?new Error(safeToString(t)):t}function withAppended(t,e){var r=t.length,n=new Array(r+1),i;for(i=0;i<r;++i)n[i]=t[i];return n[i]=e,n}function getDataPropertyOrDefault(t,e,r){if(es5.isES5){var n=Object.getOwnPropertyDescriptor(t,e);if(n!=null)return n.get==null&&n.set==null?n.value:r}else return{}.hasOwnProperty.call(t,e)?t[e]:void 0}function notEnumerableProp(t,e,r){if(isPrimitive(t))return t;var n={value:r,configurable:!0,enumerable:!1,writable:!0};return es5.defineProperty(t,e,n),t}function thrower(t){throw t}var inheritedDataKeys=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(i){for(var o=0;o<t.length;++o)if(t[o]===i)return!0;return!1};if(es5.isES5){var r=Object.getOwnPropertyNames;return function(i){for(var o=[],a=Object.create(null);i!=null&&!e(i);){var u;try{u=r(i)}catch{return o}for(var c=0;c<u.length;++c){var d=u[c];if(!a[d]){a[d]=!0;var f=Object.getOwnPropertyDescriptor(i,d);f!=null&&f.get==null&&f.set==null&&o.push(d)}}i=es5.getPrototypeOf(i)}return o}}else{var n={}.hasOwnProperty;return function(i){if(e(i))return[];var o=[];e:for(var a in i)if(n.call(i,a))o.push(a);else{for(var u=0;u<t.length;++u)if(n.call(t[u],a))continue e;o.push(a)}return o}}}(),thisAssignmentPattern=/this\s*\.\s*\S+\s*=/;function isClass(t){try{if(typeof t=="function"){var e=es5.names(t.prototype),r=es5.isES5&&e.length>1,n=e.length>0&&!(e.length===1&&e[0]==="constructor"),i=thisAssignmentPattern.test(t+"")&&es5.names(t).length>0;if(r||n||i)return!0}return!1}catch{return!1}}function toFastProperties(obj){function FakeConstructor(){}FakeConstructor.prototype=obj;var receiver=new FakeConstructor;function ic(){return typeof receiver.foo}return ic(),ic(),obj;eval(obj)}var rident=/^[a-z$_][a-z$_0-9]*$/i;function isIdentifier(t){return rident.test(t)}function filledRange(t,e,r){for(var n=new Array(t),i=0;i<t;++i)n[i]=e+i+r;return n}function safeToString(t){try{return t+""}catch{return"[no string representation]"}}function isError(t){return t instanceof Error||t!==null&&typeof t=="object"&&typeof t.message=="string"&&typeof t.name=="string"}function markAsOriginatingFromRejection(t){try{notEnumerableProp(t,"isOperational",!0)}catch{}}function originatesFromRejection(t){return t==null?!1:t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0}function canAttachTrace(t){return isError(t)&&es5.propertyIsWritable(t,"stack")}var ensureErrorObject=function(){return"stack"in new Error?function(t){return canAttachTrace(t)?t:new Error(safeToString(t))}:function(t){if(canAttachTrace(t))return t;try{throw new Error(safeToString(t))}catch(e){return e}}}();function classString(t){return{}.toString.call(t)}function copyDescriptors(t,e,r){for(var n=es5.names(t),i=0;i<n.length;++i){var o=n[i];if(r(o))try{es5.defineProperty(e,o,es5.getDescriptor(t,o))}catch{}}}var asArray=function(t){return es5.isArray(t)?t:null};typeof Symbol<"u"&&Symbol.iterator&&(ArrayFrom=typeof Array.from=="function"?function(t){return Array.from(t)}:function(t){for(var e=[],r=t[Symbol.iterator](),n;!(n=r.next()).done;)e.push(n.value);return e},asArray=function(t){return es5.isArray(t)?t:t!=null&&typeof t[Symbol.iterator]=="function"?ArrayFrom(t):null});var ArrayFrom,isNode=typeof process<"u"&&classString(process).toLowerCase()==="[object process]",hasEnvVariables=typeof process<"u"&&typeof process.env<"u";function env(t){return hasEnvVariables?process.env[t]:void 0}function getNativePromise(){if(typeof Promise=="function")try{var t=new Promise(function(){});if(classString(t)==="[object Promise]")return Promise}catch{}}var reflectHandler;function contextBind(t,e){if(t===null||typeof e!="function"||e===reflectHandler)return e;t.domain!==null&&(e=t.domain.bind(e));var r=t.async;if(r!==null){var n=e;e=function(){for(var i=arguments.length+2,o=new Array(i),a=2;a<i;++a)o[a]=arguments[a-2];return o[0]=n,o[1]=this,r.runInAsyncScope.apply(r,o)}}return e}var ret={setReflectHandler:function(t){reflectHandler=t},isClass,isIdentifier,inheritedDataKeys,getDataPropertyOrDefault,thrower,isArray:es5.isArray,asArray,notEnumerableProp,isPrimitive,isObject,isError,canEvaluate,errorObj,tryCatch,inherits,withAppended,maybeWrapAsError,toFastProperties,filledRange,toString:safeToString,canAttachTrace,ensureErrorObject,originatesFromRejection,markAsOriginatingFromRejection,classString,copyDescriptors,isNode,hasEnvVariables,env,global:globalObject,getNativePromise,contextBind};ret.isRecentNode=ret.isNode&&function(){var t;return process.versions&&process.versions.node?t=process.versions.node.split(".").map(Number):process.version&&(t=process.version.split(".").map(Number)),t[0]===0&&t[1]>10||t[0]>0}();ret.nodeSupportsAsyncResource=ret.isNode&&function(){var t=!1;try{var e=require("async_hooks").AsyncResource;t=typeof e.prototype.runInAsyncScope=="function"}catch{t=!1}return t}();ret.isNode&&ret.toFastProperties(process);try{throw new Error}catch(t){ret.lastLineError=t}module.exports=ret});var HE=q((EU,WE)=>{"use strict";var by=Dt(),yo,hj=function(){throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)},_y=by.getNativePromise();by.isNode&&typeof MutationObserver>"u"?(ME=global.setImmediate,jE=process.nextTick,yo=by.isRecentNode?function(t){ME.call(global,t)}:function(t){jE.call(process,t)}):typeof _y=="function"&&typeof _y.resolve=="function"?($E=_y.resolve(),yo=function(t){$E.then(t)}):typeof MutationObserver<"u"&&!(typeof window<"u"&&window.navigator&&(window.navigator.standalone||window.cordova))&&"classList"in document.documentElement?yo=function(){var t=document.createElement("div"),e={attributes:!0},r=!1,n=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),r=!1});i.observe(n,e);var o=function(){r||(r=!0,n.classList.toggle("foo"))};return function(u){var c=new MutationObserver(function(){c.disconnect(),u()});c.observe(t,e),o()}}():typeof setImmediate<"u"?yo=function(t){setImmediate(t)}:typeof setTimeout<"u"?yo=function(t){setTimeout(t,0)}:yo=hj;var ME,jE,$E;WE.exports=yo});var BE=q((PU,UE)=>{"use strict";function pj(t,e,r,n,i){for(var o=0;o<i;++o)r[o+n]=t[o+e],t[o+e]=void 0}function Mi(t){this._capacity=t,this._length=0,this._front=0}Mi.prototype._willBeOverCapacity=function(t){return this._capacity<t};Mi.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var r=this._front+e&this._capacity-1;this[r]=t,this._length=e+1};Mi.prototype.push=function(t,e,r){var n=this.length()+3;if(this._willBeOverCapacity(n)){this._pushOne(t),this._pushOne(e),this._pushOne(r);return}var i=this._front+n-3;this._checkCapacity(n);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=r,this._length=n};Mi.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e};Mi.prototype.length=function(){return this._length};Mi.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)};Mi.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,n=this._length,i=r+n&e-1;pj(this,0,this,e,i)};UE.exports=Mi});var GE=q((kU,wy)=>{"use strict";var VE;try{throw new Error}catch(t){VE=t}var gj=HE(),zE=BE();function yn(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new zE(16),this._normalQueue=new zE(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=gj}yn.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e};yn.prototype.hasCustomScheduler=function(){return this._customScheduler};yn.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues};yn.prototype.fatalError=function(t,e){e?(process.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+`
`),process.exit(2)):this.throwLater(t)};yn.prototype.throwLater=function(t,e){if(arguments.length===1&&(e=t,t=function(){throw e}),typeof setTimeout<"u")setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch{throw new Error(`No async scheduler available

    See http://goo.gl/MqrFmX
`)}};function mj(t,e,r){this._lateQueue.push(t,e,r),this._queueTick()}function yj(t,e,r){this._normalQueue.push(t,e,r),this._queueTick()}function vj(t){this._normalQueue._pushOne(t),this._queueTick()}yn.prototype.invokeLater=mj;yn.prototype.invoke=yj;yn.prototype.settlePromises=vj;function KE(t){for(;t.length()>0;)_j(t)}function _j(t){var e=t.shift();if(typeof e!="function")e._settlePromises();else{var r=t.shift(),n=t.shift();e.call(r,n)}}yn.prototype._drainQueues=function(){KE(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,KE(this._lateQueue)};yn.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))};yn.prototype._reset=function(){this._isTickUsed=!1};wy.exports=yn;wy.exports.firstLineError=VE});var ai=q((qU,YE)=>{"use strict";var Ry=Ni(),bj=Ry.freeze,QE=Dt(),XE=QE.inherits,Es=QE.notEnumerableProp;function Ps(t,e){function r(n){if(!(this instanceof r))return new r(n);Es(this,"message",typeof n=="string"?n:e),Es(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return XE(r,Error),r}var Sy,Cy,wj=Ps("Warning","warning"),Sj=Ps("CancellationError","cancellation error"),Cj=Ps("TimeoutError","timeout error"),Xa=Ps("AggregateError","aggregate error");try{Sy=TypeError,Cy=RangeError}catch{Sy=Ps("TypeError","type error"),Cy=Ps("RangeError","range error")}var ud="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" ");for(Ds=0;Ds<ud.length;++Ds)typeof Array.prototype[ud[Ds]]=="function"&&(Xa.prototype[ud[Ds]]=Array.prototype[ud[Ds]]);var Ds;Ry.defineProperty(Xa.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0});Xa.prototype.isOperational=!0;var cd=0;Xa.prototype.toString=function(){var t=Array(cd*4+1).join(" "),e=`
`+t+`AggregateError of:
`;cd++,t=Array(cd*4+1).join(" ");for(var r=0;r<this.length;++r){for(var n=this[r]===this?"[Circular AggregateError]":this[r]+"",i=n.split(`
`),o=0;o<i.length;++o)i[o]=t+i[o];n=i.join(`
`),e+=n+`
`}return cd--,e};function Qa(t){if(!(this instanceof Qa))return new Qa(t);Es(this,"name","OperationalError"),Es(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(Es(this,"message",t.message),Es(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}XE(Qa,Error);var vo=Error.__BluebirdErrorTypes__;vo||(vo=bj({CancellationError:Sj,TimeoutError:Cj,OperationalError:Qa,RejectionError:Qa,AggregateError:Xa}),Ry.defineProperty(Error,"__BluebirdErrorTypes__",{value:vo,writable:!1,enumerable:!1,configurable:!1}));YE.exports={Error,TypeError:Sy,RangeError:Cy,CancellationError:vo.CancellationError,OperationalError:vo.OperationalError,TimeoutError:vo.TimeoutError,AggregateError:vo.AggregateError,Warning:wj}});var ZE=q((xU,JE)=>{"use strict";JE.exports=function(t,e){var r=Dt(),n=r.errorObj,i=r.isObject;function o(y,g){if(i(y)){if(y instanceof t)return y;var m=u(y);if(m===n){g&&g._pushContext();var h=t.reject(m.e);return g&&g._popContext(),h}else if(typeof m=="function"){if(d(y)){var h=new t(e);return y._then(h._fulfill,h._reject,void 0,h,null),h}return f(y,m,g)}}return y}function a(y){return y.then}function u(y){try{return a(y)}catch(g){return n.e=g,n}}var c={}.hasOwnProperty;function d(y){try{return c.call(y,"_promise0")}catch{return!1}}function f(y,g,m){var h=new t(e),S=h;m&&m._pushContext(),h._captureStackTrace(),m&&m._popContext();var R=!0,D=r.tryCatch(g).call(y,I,A);R=!1,h&&D===n&&(h._rejectCallback(D.e,!0,!0),h=null);function I(N){h&&(h._resolveCallback(N),h=null)}function A(N){h&&(h._rejectCallback(N,R,!0),h=null)}return S}return o}});var tP=q((FU,eP)=>{"use strict";eP.exports=function(t,e,r,n,i){var o=Dt(),a=o.isArray;function u(d){switch(d){case-2:return[];case-3:return{};case-6:return new Map}}function c(d){var f=this._promise=new t(e);d instanceof t&&(f._propagateFrom(d,3),d.suppressUnhandledRejections()),f._setOnCancel(this),this._values=d,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return o.inherits(c,i),c.prototype.length=function(){return this._length},c.prototype.promise=function(){return this._promise},c.prototype._init=function d(f,y){var g=r(this._values,this._promise);if(g instanceof t){g=g._target();var m=g._bitField;if(this._values=g,m&50397184)if(m&33554432)g=g._value();else return m&16777216?this._reject(g._reason()):this._cancel();else return this._promise._setAsyncGuaranteed(),g._then(d,this._reject,void 0,this,y)}if(g=o.asArray(g),g===null){var h=n("expecting an array or an iterable object but got "+o.classString(g)).reason();this._promise._rejectCallback(h,!1);return}if(g.length===0){y===-5?this._resolveEmptyArray():this._resolve(u(y));return}this._iterate(g)},c.prototype._iterate=function(d){var f=this.getActualLength(d.length);this._length=f,this._values=this.shouldCopyValues()?new Array(f):this._values;for(var y=this._promise,g=!1,m=null,h=0;h<f;++h){var S=r(d[h],y);S instanceof t?(S=S._target(),m=S._bitField):m=null,g?m!==null&&S.suppressUnhandledRejections():m!==null?m&50397184?m&33554432?g=this._promiseFulfilled(S._value(),h):m&16777216?g=this._promiseRejected(S._reason(),h):g=this._promiseCancelled(h):(S._proxy(this,h),this._values[h]=S):g=this._promiseFulfilled(S,h)}g||y._setAsyncGuaranteed()},c.prototype._isResolved=function(){return this._values===null},c.prototype._resolve=function(d){this._values=null,this._promise._fulfill(d)},c.prototype._cancel=function(){this._isResolved()||!this._promise._isCancellable()||(this._values=null,this._promise._cancel())},c.prototype._reject=function(d){this._values=null,this._promise._rejectCallback(d,!1)},c.prototype._promiseFulfilled=function(d,f){this._values[f]=d;var y=++this._totalResolved;return y>=this._length?(this._resolve(this._values),!0):!1},c.prototype._promiseCancelled=function(){return this._cancel(),!0},c.prototype._promiseRejected=function(d){return this._totalResolved++,this._reject(d),!0},c.prototype._resultCancelled=function(){if(!this._isResolved()){var d=this._values;if(this._cancel(),d instanceof t)d.cancel();else for(var f=0;f<d.length;++f)d[f]instanceof t&&d[f].cancel()}},c.prototype.shouldCopyValues=function(){return!0},c.prototype.getActualLength=function(d){return d},c}});var nP=q((OU,rP)=>{"use strict";rP.exports=function(t){var e=!1,r=[];t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){};function n(){this._trace=new n.CapturedTrace(o())}n.prototype._pushContext=function(){this._trace!==void 0&&(this._trace._promiseCreated=null,r.push(this._trace))},n.prototype._popContext=function(){if(this._trace!==void 0){var a=r.pop(),u=a._promiseCreated;return a._promiseCreated=null,u}return null};function i(){if(e)return new n}function o(){var a=r.length-1;if(a>=0)return r[a]}return n.CapturedTrace=null,n.create=i,n.deactivateLongStackTraces=function(){},n.activateLongStackTraces=function(){var a=t.prototype._pushContext,u=t.prototype._popContext,c=t._peekContext,d=t.prototype._peekContext,f=t.prototype._promiseCreated;n.deactivateLongStackTraces=function(){t.prototype._pushContext=a,t.prototype._popContext=u,t._peekContext=c,t.prototype._peekContext=d,t.prototype._promiseCreated=f,e=!1},e=!0,t.prototype._pushContext=n.prototype._pushContext,t.prototype._popContext=n.prototype._popContext,t._peekContext=t.prototype._peekContext=o,t.prototype._promiseCreated=function(){var y=this._peekContext();y&&y._promiseCreated==null&&(y._promiseCreated=this)}},n}});var oP=q((IU,iP)=>{"use strict";iP.exports=function(t,e,r,n){var i=t._async,o=ai().Warning,a=Dt(),u=Ni(),c=a.canAttachTrace,d,f,y=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,m=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,h=null,S=null,R=!1,D,I=!!(a.env("BLUEBIRD_DEBUG")!=0&&(a.env("BLUEBIRD_DEBUG")||a.env("NODE_ENV")==="development")),A=!!(a.env("BLUEBIRD_WARNINGS")!=0&&(I||a.env("BLUEBIRD_WARNINGS"))),N=!!(a.env("BLUEBIRD_LONG_STACK_TRACES")!=0&&(I||a.env("BLUEBIRD_LONG_STACK_TRACES"))),ee=a.env("BLUEBIRD_W_FORGOTTEN_RETURN")!=0&&(A||!!a.env("BLUEBIRD_W_FORGOTTEN_RETURN")),fe;(function(){var z=[];function C(){for(var U=0;U<z.length;++U)z[U]._notifyUnhandledRejection();F()}function F(){z.length=0}fe=function(U){z.push(U),setTimeout(C,1)},u.defineProperty(t,"_unhandledRejectionCheck",{value:C}),u.defineProperty(t,"_unhandledRejectionClear",{value:F})})(),t.prototype.suppressUnhandledRejections=function(){var z=this._target();z._bitField=z._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){this._bitField&524288||(this._setRejectionIsUnhandled(),fe(this))},t.prototype._notifyUnhandledRejectionIsHandled=function(){er("rejectionHandled",d,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=this._bitField|268435456},t.prototype._returnedNonUndefined=function(){return(this._bitField&268435456)!==0},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var z=this._settledValue();this._setUnhandledRejectionIsNotified(),er("unhandledRejection",f,z,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=this._bitField|262144},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},t.prototype._isUnhandledRejectionNotified=function(){return(this._bitField&262144)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=this._bitField|1048576},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(this._bitField&1048576)>0},t.prototype._warn=function(z,C,F){return He(z,C,F||this)},t.onPossiblyUnhandledRejection=function(z){var C=t._getContext();f=a.contextBind(C,z)},t.onUnhandledRejectionHandled=function(z){var C=t._getContext();d=a.contextBind(C,z)};var re=function(){};t.longStackTraces=function(){if(i.haveItemsQueued()&&!Ye.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);if(!Ye.longStackTraces&&gt()){var z=t.prototype._captureStackTrace,C=t.prototype._attachExtraTrace,F=t.prototype._dereferenceTrace;Ye.longStackTraces=!0,re=function(){if(i.haveItemsQueued()&&!Ye.longStackTraces)throw new Error(`cannot enable long stack traces after promises have been created

    See http://goo.gl/MqrFmX
`);t.prototype._captureStackTrace=z,t.prototype._attachExtraTrace=C,t.prototype._dereferenceTrace=F,e.deactivateLongStackTraces(),Ye.longStackTraces=!1},t.prototype._captureStackTrace=Y,t.prototype._attachExtraTrace=ae,t.prototype._dereferenceTrace=pe,e.activateLongStackTraces()}},t.hasLongStackTraces=function(){return Ye.longStackTraces&&gt()};var de={unhandledrejection:{before:function(){var z=a.global.onunhandledrejection;return a.global.onunhandledrejection=null,z},after:function(z){a.global.onunhandledrejection=z}},rejectionhandled:{before:function(){var z=a.global.onrejectionhandled;return a.global.onrejectionhandled=null,z},after:function(z){a.global.onrejectionhandled=z}}},se=function(){var z=function(F,U){if(F){var te;try{return te=F.before(),!a.global.dispatchEvent(U)}finally{F.after(te)}}else return!a.global.dispatchEvent(U)};try{if(typeof CustomEvent=="function"){var C=new CustomEvent("CustomEvent");return a.global.dispatchEvent(C),function(F,U){F=F.toLowerCase();var te={detail:U,cancelable:!0},we=new CustomEvent(F,te);return u.defineProperty(we,"promise",{value:U.promise}),u.defineProperty(we,"reason",{value:U.reason}),z(de[F],we)}}else if(typeof Event=="function"){var C=new Event("CustomEvent");return a.global.dispatchEvent(C),function(U,te){U=U.toLowerCase();var we=new Event(U,{cancelable:!0});return we.detail=te,u.defineProperty(we,"promise",{value:te.promise}),u.defineProperty(we,"reason",{value:te.reason}),z(de[U],we)}}else{var C=document.createEvent("CustomEvent");return C.initCustomEvent("testingtheevent",!1,!0,{}),a.global.dispatchEvent(C),function(U,te){U=U.toLowerCase();var we=document.createEvent("CustomEvent");return we.initCustomEvent(U,!1,!0,te),z(de[U],we)}}}catch{}return function(){return!1}}(),_e=function(){return a.isNode?function(){return process.emit.apply(process,arguments)}:a.global?function(z){var C="on"+z.toLowerCase(),F=a.global[C];return F?(F.apply(a.global,[].slice.call(arguments,1)),!0):!1}:function(){return!1}}();function G(z,C){return{promise:C}}var K={promiseCreated:G,promiseFulfilled:G,promiseRejected:G,promiseResolved:G,promiseCancelled:G,promiseChained:function(z,C,F){return{promise:C,child:F}},warning:function(z,C){return{warning:C}},unhandledRejection:function(z,C,F){return{reason:C,promise:F}},rejectionHandled:G},j=function(z){var C=!1;try{C=_e.apply(null,arguments)}catch(U){i.throwLater(U),C=!0}var F=!1;try{F=se(z,K[z].apply(null,arguments))}catch(U){i.throwLater(U),F=!0}return F||C};t.config=function(z){if(z=Object(z),"longStackTraces"in z&&(z.longStackTraces?t.longStackTraces():!z.longStackTraces&&t.hasLongStackTraces()&&re()),"warnings"in z){var C=z.warnings;Ye.warnings=!!C,ee=Ye.warnings,a.isObject(C)&&"wForgottenReturn"in C&&(ee=!!C.wForgottenReturn)}if("cancellation"in z&&z.cancellation&&!Ye.cancellation){if(i.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=P,t.prototype._propagateFrom=ue,t.prototype._onCancel=V,t.prototype._setOnCancel=ne,t.prototype._attachCancellationCallback=H,t.prototype._execute=$,me=ue,Ye.cancellation=!0}if("monitoring"in z&&(z.monitoring&&!Ye.monitoring?(Ye.monitoring=!0,t.prototype._fireEvent=j):!z.monitoring&&Ye.monitoring&&(Ye.monitoring=!1,t.prototype._fireEvent=X)),"asyncHooks"in z&&a.nodeSupportsAsyncResource){var F=Ye.asyncHooks,U=!!z.asyncHooks;F!==U&&(Ye.asyncHooks=U,U?r():n())}return t};function X(){return!1}t.prototype._fireEvent=X,t.prototype._execute=function(z,C,F){try{z(C,F)}catch(U){return U}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(z){},t.prototype._attachCancellationCallback=function(z){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._dereferenceTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(z,C){};function $(z,C,F){var U=this;try{z(C,F,function(te){if(typeof te!="function")throw new TypeError("onCancel must be a function, got: "+a.toString(te));U._attachCancellationCallback(te)})}catch(te){return te}}function H(z){if(!this._isCancellable())return this;var C=this._onCancel();C!==void 0?a.isArray(C)?C.push(z):this._setOnCancel([C,z]):this._setOnCancel(z)}function V(){return this._onCancelField}function ne(z){this._onCancelField=z}function P(){this._cancellationParent=void 0,this._onCancelField=void 0}function ue(z,C){if(C&1){this._cancellationParent=z;var F=z._branchesRemainingToCancel;F===void 0&&(F=0),z._branchesRemainingToCancel=F+1}C&2&&z._isBound()&&this._setBoundTo(z._boundTo)}function ye(z,C){C&2&&z._isBound()&&this._setBoundTo(z._boundTo)}var me=ye;function L(){var z=this._boundTo;return z!==void 0&&z instanceof t?z.isFulfilled()?z.value():void 0:z}function Y(){this._trace=new $t(this._peekContext())}function ae(z,C){if(c(z)){var F=this._trace;if(F!==void 0&&C&&(F=F._parent),F!==void 0)F.attachExtraTrace(z);else if(!z.__stackCleaned__){var U=wt(z);a.notEnumerableProp(z,"stack",U.message+`
`+U.stack.join(`
`)),a.notEnumerableProp(z,"__stackCleaned__",!0)}}}function pe(){this._trace=void 0}function Te(z,C,F,U,te){if(z===void 0&&C!==null&&ee){if(te!==void 0&&te._returnedNonUndefined()||!(U._bitField&65535))return;F&&(F=F+" ");var we="",ke="";if(C._trace){for(var ve=C._trace.stack.split(`
`),xe=jt(ve),Pe=xe.length-1;Pe>=0;--Pe){var Le=xe[Pe];if(!g.test(Le)){var Oe=Le.match(m);Oe&&(we="at "+Oe[1]+":"+Oe[2]+":"+Oe[3]+" ");break}}if(xe.length>0){for(var st=xe[0],Pe=0;Pe<ve.length;++Pe)if(ve[Pe]===st){Pe>0&&(ke=`
`+ve[Pe-1]);break}}}var mt="a promise was created in a "+F+"handler "+we+"but was not returned from it, see http://goo.gl/rRqMUw"+ke;U._warn(mt,!0,C)}}function Ce(z,C){var F=z+" is deprecated and will be removed in a future version.";return C&&(F+=" Use "+C+" instead."),He(F)}function He(z,C,F){if(Ye.warnings){var U=new o(z),te;if(C)F._attachExtraTrace(U);else if(Ye.longStackTraces&&(te=t._peekContext()))te.attachExtraTrace(U);else{var we=wt(U);U.stack=we.message+`
`+we.stack.join(`
`)}j("warning",U)||Ir(U,"",!0)}}function ct(z,C){for(var F=0;F<C.length-1;++F)C[F].push("From previous event:"),C[F]=C[F].join(`
`);return F<C.length&&(C[F]=C[F].join(`
`)),z+`
`+C.join(`
`)}function Vt(z){for(var C=0;C<z.length;++C)(z[C].length===0||C+1<z.length&&z[C][0]===z[C+1][0])&&(z.splice(C,1),C--)}function vt(z){for(var C=z[0],F=1;F<z.length;++F){for(var U=z[F],te=C.length-1,we=C[te],ke=-1,ve=U.length-1;ve>=0;--ve)if(U[ve]===we){ke=ve;break}for(var ve=ke;ve>=0;--ve){var xe=U[ve];if(C[te]===xe)C.pop(),te--;else break}C=U}}function jt(z){for(var C=[],F=0;F<z.length;++F){var U=z[F],te=U==="    (No stack trace)"||h.test(U),we=te&&ht(U);te&&!we&&(R&&U.charAt(0)!==" "&&(U="    "+U),C.push(U))}return C}function Ot(z){for(var C=z.stack.replace(/\s+$/g,"").split(`
`),F=0;F<C.length;++F){var U=C[F];if(U==="    (No stack trace)"||h.test(U))break}return F>0&&z.name!="SyntaxError"&&(C=C.slice(F)),C}function wt(z){var C=z.stack,F=z.toString();return C=typeof C=="string"&&C.length>0?Ot(z):["    (No stack trace)"],{message:F,stack:z.name=="SyntaxError"?C:jt(C)}}function Ir(z,C,F){if(typeof console<"u"){var U;if(a.isObject(z)){var te=z.stack;U=C+S(te,z)}else U=C+String(z);typeof D=="function"?D(U,F):(typeof console.log=="function"||typeof console.log=="object")&&console.log(U)}}function er(z,C,F,U){var te=!1;try{typeof C=="function"&&(te=!0,z==="rejectionHandled"?C(U):C(F,U))}catch(we){i.throwLater(we)}z==="unhandledRejection"?!j(z,F,U)&&!te&&Ir(F,"Unhandled rejection "):j(z,U)}function rr(z){var C;if(typeof z=="function")C="[function "+(z.name||"anonymous")+"]";else{C=z&&typeof z.toString=="function"?z.toString():a.toString(z);var F=/\[object [a-zA-Z0-9$_]+\]/;if(F.test(C))try{var U=JSON.stringify(z);C=U}catch{}C.length===0&&(C="(empty array)")}return"(<"+St(C)+">, no stack trace)"}function St(z){var C=41;return z.length<C?z:z.substr(0,C-3)+"..."}function gt(){return typeof hr=="function"}var ht=function(){return!1},Bt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Gt(z){var C=z.match(Bt);if(C)return{fileName:C[1],line:parseInt(C[2],10)}}function Tr(z,C){if(gt()){for(var F=(z.stack||"").split(`
`),U=(C.stack||"").split(`
`),te=-1,we=-1,ke,ve,xe=0;xe<F.length;++xe){var Pe=Gt(F[xe]);if(Pe){ke=Pe.fileName,te=Pe.line;break}}for(var xe=0;xe<U.length;++xe){var Pe=Gt(U[xe]);if(Pe){ve=Pe.fileName,we=Pe.line;break}}te<0||we<0||!ke||!ve||ke!==ve||te>=we||(ht=function(Le){if(y.test(Le))return!0;var Oe=Gt(Le);return!!(Oe&&Oe.fileName===ke&&te<=Oe.line&&Oe.line<=we)})}}function $t(z){this._parent=z,this._promisesCreated=0;var C=this._length=1+(z===void 0?0:z._length);hr(this,$t),C>32&&this.uncycle()}a.inherits($t,Error),e.CapturedTrace=$t,$t.prototype.uncycle=function(){var z=this._length;if(!(z<2)){for(var C=[],F={},U=0,te=this;te!==void 0;++U)C.push(te),te=te._parent;z=this._length=U;for(var U=z-1;U>=0;--U){var we=C[U].stack;F[we]===void 0&&(F[we]=U)}for(var U=0;U<z;++U){var ke=C[U].stack,ve=F[ke];if(ve!==void 0&&ve!==U){ve>0&&(C[ve-1]._parent=void 0,C[ve-1]._length=1),C[U]._parent=void 0,C[U]._length=1;var xe=U>0?C[U-1]:this;ve<z-1?(xe._parent=C[ve+1],xe._parent.uncycle(),xe._length=xe._parent._length+1):(xe._parent=void 0,xe._length=1);for(var Pe=xe._length+1,Le=U-2;Le>=0;--Le)C[Le]._length=Pe,Pe++;return}}}},$t.prototype.attachExtraTrace=function(z){if(!z.__stackCleaned__){this.uncycle();for(var C=wt(z),F=C.message,U=[C.stack],te=this;te!==void 0;)U.push(jt(te.stack.split(`
`))),te=te._parent;vt(U),Vt(U),a.notEnumerableProp(z,"stack",ct(F,U)),a.notEnumerableProp(z,"__stackCleaned__",!0)}};var hr=function(){var C=/^\s*at\s*/,F=function(ke,ve){return typeof ke=="string"?ke:ve.name!==void 0&&ve.message!==void 0?ve.toString():rr(ve)};if(typeof Error.stackTraceLimit=="number"&&typeof Error.captureStackTrace=="function"){Error.stackTraceLimit+=6,h=C,S=F;var U=Error.captureStackTrace;return ht=function(ke){return y.test(ke)},function(ke,ve){Error.stackTraceLimit+=6,U(ke,ve),Error.stackTraceLimit-=6}}var te=new Error;if(typeof te.stack=="string"&&te.stack.split(`
`)[0].indexOf("stackDetection@")>=0)return h=/@/,S=F,R=!0,function(ve){ve.stack=new Error().stack};var we;try{throw new Error}catch(ke){we="stack"in ke}return!("stack"in te)&&we&&typeof Error.stackTraceLimit=="number"?(h=C,S=F,function(ve){Error.stackTraceLimit+=6;try{throw new Error}catch(xe){ve.stack=xe.stack}Error.stackTraceLimit-=6}):(S=function(ke,ve){return typeof ke=="string"?ke:(typeof ve=="object"||typeof ve=="function")&&ve.name!==void 0&&ve.message!==void 0?ve.toString():rr(ve)},null)}([]);typeof console<"u"&&typeof console.warn<"u"&&(D=function(z){console.warn(z)},a.isNode&&process.stderr.isTTY?D=function(z,C){var F=C?"\x1B[33m":"\x1B[31m";console.warn(F+z+`\x1B[0m
`)}:!a.isNode&&typeof new Error().stack=="string"&&(D=function(z,C){console.warn("%c"+z,C?"color: darkorange":"color: red")}));var Ye={warnings:A,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return N&&t.longStackTraces(),{asyncHooks:function(){return Ye.asyncHooks},longStackTraces:function(){return Ye.longStackTraces},warnings:function(){return Ye.warnings},cancellation:function(){return Ye.cancellation},monitoring:function(){return Ye.monitoring},propagateFromFunction:function(){return me},boundValueFunction:function(){return L},checkForgottenReturns:Te,setBounds:Tr,warn:He,deprecated:Ce,CapturedTrace:$t,fireDomEvent:se,fireGlobalEvent:_e}}});var Ty=q((AU,sP)=>{"use strict";sP.exports=function(t){var e=Dt(),r=Ni().keys,n=e.tryCatch,i=e.errorObj;function o(a,u,c){return function(d){var f=c._boundValue();e:for(var y=0;y<a.length;++y){var g=a[y];if(g===Error||g!=null&&g.prototype instanceof Error){if(d instanceof g)return n(u).call(f,d)}else if(typeof g=="function"){var m=n(g).call(f,d);if(m===i)return m;if(m)return n(u).call(f,d)}else if(e.isObject(d)){for(var h=r(g),S=0;S<h.length;++S){var R=h[S];if(g[R]!=d[R])continue e}return n(u).call(f,d)}}return t}}return o}});var uP=q((LU,aP)=>{"use strict";aP.exports=function(t,e,r){var n=Dt(),i=t.CancellationError,o=n.errorObj,a=Ty()(r);function u(m,h,S){this.promise=m,this.type=h,this.handler=S,this.called=!1,this.cancelPromise=null}u.prototype.isFinallyHandler=function(){return this.type===0};function c(m){this.finallyHandler=m}c.prototype._resultCancelled=function(){d(this.finallyHandler)};function d(m,h){return m.cancelPromise!=null?(arguments.length>1?m.cancelPromise._reject(h):m.cancelPromise._cancel(),m.cancelPromise=null,!0):!1}function f(){return g.call(this,this.promise._target()._settledValue())}function y(m){if(!d(this,m))return o.e=m,o}function g(m){var h=this.promise,S=this.handler;if(!this.called){this.called=!0;var R=this.isFinallyHandler()?S.call(h._boundValue()):S.call(h._boundValue(),m);if(R===r)return R;if(R!==void 0){h._setReturnedNonUndefined();var D=e(R,h);if(D instanceof t){if(this.cancelPromise!=null)if(D._isCancelled()){var I=new i("late cancellation observer");return h._attachExtraTrace(I),o.e=I,o}else D.isPending()&&D._attachCancellationCallback(new c(this));return D._then(f,y,void 0,this,void 0)}}}return h.isRejected()?(d(this),o.e=m,o):(d(this),m)}return t.prototype._passThrough=function(m,h,S,R){return typeof m!="function"?this.then():this._then(S,R,void 0,new u(this,h,m),void 0)},t.prototype.lastly=t.prototype.finally=function(m){return this._passThrough(m,0,g,g)},t.prototype.tap=function(m){return this._passThrough(m,1,g)},t.prototype.tapCatch=function(m){var h=arguments.length;if(h===1)return this._passThrough(m,1,void 0,g);var S=new Array(h-1),R=0,D;for(D=0;D<h-1;++D){var I=arguments[D];if(n.isObject(I))S[R++]=I;else return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+n.classString(I)))}S.length=R;var A=arguments[D];return this._passThrough(a(S,A,this),1,void 0,g)},u}});var Dy=q((NU,dP)=>{"use strict";var cP=Dt(),Rj=cP.maybeWrapAsError,Tj=ai(),Dj=Tj.OperationalError,lP=Ni();function Ej(t){return t instanceof Error&&lP.getPrototypeOf(t)===Error.prototype}var Pj=/^(?:name|message|stack|cause)$/;function kj(t){var e;if(Ej(t)){e=new Dj(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var r=lP.keys(t),n=0;n<r.length;++n){var i=r[n];Pj.test(i)||(e[i]=t[i])}return e}return cP.markAsOriginatingFromRejection(t),t}function qj(t,e){return function(r,n){if(t!==null){if(r){var i=kj(Rj(r));t._attachExtraTrace(i),t._reject(i)}else if(!e)t._fulfill(n);else{for(var o=arguments.length,a=new Array(Math.max(o-1,0)),u=1;u<o;++u)a[u-1]=arguments[u];t._fulfill(a)}t=null}}}dP.exports=qj});var hP=q((MU,fP)=>{"use strict";fP.exports=function(t,e,r,n,i){var o=Dt(),a=o.tryCatch;t.method=function(u){if(typeof u!="function")throw new t.TypeError("expecting a function but got "+o.classString(u));return function(){var c=new t(e);c._captureStackTrace(),c._pushContext();var d=a(u).apply(this,arguments),f=c._popContext();return i.checkForgottenReturns(d,f,"Promise.method",c),c._resolveFromSyncValue(d),c}},t.attempt=t.try=function(u){if(typeof u!="function")return n("expecting a function but got "+o.classString(u));var c=new t(e);c._captureStackTrace(),c._pushContext();var d;if(arguments.length>1){i.deprecated("calling Promise.try with more than 1 argument");var f=arguments[1],y=arguments[2];d=o.isArray(f)?a(u).apply(y,f):a(u).call(y,f)}else d=a(u)();var g=c._popContext();return i.checkForgottenReturns(d,g,"Promise.try",c),c._resolveFromSyncValue(d),c},t.prototype._resolveFromSyncValue=function(u){u===o.errorObj?this._rejectCallback(u.e,!1):this._resolveCallback(u,!0)}}});var gP=q((jU,pP)=>{"use strict";pP.exports=function(t,e,r,n){var i=!1,o=function(d,f){this._reject(f)},a=function(d,f){f.promiseRejectionQueued=!0,f.bindingPromise._then(o,o,null,this,d)},u=function(d,f){this._bitField&50397184||this._resolveCallback(f.target)},c=function(d,f){f.promiseRejectionQueued||this._reject(d)};t.prototype.bind=function(d){i||(i=!0,t.prototype._propagateFrom=n.propagateFromFunction(),t.prototype._boundValue=n.boundValueFunction());var f=r(d),y=new t(e);y._propagateFrom(this,1);var g=this._target();if(y._setBoundTo(f),f instanceof t){var m={promiseRejectionQueued:!1,promise:y,target:g,bindingPromise:f};g._then(e,a,void 0,y,m),f._then(u,c,void 0,y,m),y._setOnCancel(f)}else y._resolveCallback(g);return y},t.prototype._setBoundTo=function(d){d!==void 0?(this._bitField=this._bitField|2097152,this._boundTo=d):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return(this._bitField&2097152)===2097152},t.bind=function(d,f){return t.resolve(f).bind(d)}}});var yP=q(($U,mP)=>{"use strict";mP.exports=function(t,e,r,n){var i=Dt(),o=i.tryCatch,a=i.errorObj,u=t._async;t.prototype.break=t.prototype.cancel=function(){if(!n.cancellation())return this._warn("cancellation is disabled");for(var c=this,d=c;c._isCancellable();){if(!c._cancelBy(d)){d._isFollowing()?d._followee().cancel():d._cancelBranched();break}var f=c._cancellationParent;if(f==null||!f._isCancellable()){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}else c._isFollowing()&&c._followee().cancel(),c._setWillBeCancelled(),d=c,c=f}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return this._branchesRemainingToCancel===void 0||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(c){return c===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),this._enoughBranchesHaveCancelled()?(this._invokeOnCancel(),!0):!1)},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),u.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(c,d){if(i.isArray(c))for(var f=0;f<c.length;++f)this._doInvokeOnCancel(c[f],d);else if(c!==void 0)if(typeof c=="function"){if(!d){var y=o(c).call(this._boundValue());y===a&&(this._attachExtraTrace(y.e),u.throwLater(y.e))}}else c._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var c=this._onCancel();this._unsetOnCancel(),u.invoke(this._doInvokeOnCancel,this,c)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}});var _P=q((WU,vP)=>{"use strict";vP.exports=function(t){function e(){return this.value}function r(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(n){return this._then(r,void 0,void 0,{reason:n},void 0)},t.prototype.catchThrow=function(n){if(arguments.length<=1)return this._then(void 0,r,void 0,{reason:n},void 0);var i=arguments[1],o=function(){throw i};return this.caught(n,o)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var i=arguments[1];i instanceof t&&i.suppressUnhandledRejections();var o=function(){return i};return this.caught(n,o)}}});var wP=q((HU,bP)=>{"use strict";bP.exports=function(t){function e(c){c!==void 0?(c=c._target(),this._bitField=c._bitField,this._settledValueField=c._isFateSealed()?c._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var r=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError(`cannot get fulfillment value of a non-fulfilled promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},n=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError(`cannot get rejection reason of a non-rejected promise

    See http://goo.gl/MqrFmX
`);return this._settledValue()},i=e.prototype.isFulfilled=function(){return(this._bitField&33554432)!==0},o=e.prototype.isRejected=function(){return(this._bitField&16777216)!==0},a=e.prototype.isPending=function(){return(this._bitField&50397184)===0},u=e.prototype.isResolved=function(){return(this._bitField&50331648)!==0};e.prototype.isCancelled=function(){return(this._bitField&8454144)!==0},t.prototype.__isCancelled=function(){return(this._bitField&65536)===65536},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return(this._target()._bitField&8454144)!==0},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return u.call(this._target())},t.prototype.value=function(){return r.call(this._target())},t.prototype.reason=function(){var c=this._target();return c._unsetRejectionIsUnhandled(),n.call(c)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}});var CP=q((UU,SP)=>{"use strict";SP.exports=function(t,e,r,n,i){var o=Dt(),a=o.canEvaluate,u=o.tryCatch,c=o.errorObj,d;if(a){for(var f=function(D){return new Function("value","holder",`                             
            'use strict';                                                    
            holder.pIndex = value;                                           
            holder.checkFulfillment(this);                                   
            `.replace(/Index/g,D))},y=function(D){return new Function("promise","holder",`                           
            'use strict';                                                    
            holder.pIndex = promise;                                         
            `.replace(/Index/g,D))},g=function(D){for(var I=new Array(D),A=0;A<I.length;++A)I[A]="this.p"+(A+1);var N=I.join(" = ")+" = null;",ee=`var promise;
`+I.map(function(se){return`                                                         
                promise = `+se+`;                                      
                if (promise instanceof Promise) {                            
                    promise.cancel();                                        
                }                                                            
            `}).join(`
`),fe=I.join(", "),re="Holder$"+D,de=`return function(tryCatch, errorObj, Promise, async) {    
            'use strict';                                                    
            function [TheName](fn) {                                         
                [TheProperties]                                              
                this.fn = fn;                                                
                this.asyncNeeded = true;                                     
                this.now = 0;                                                
            }                                                                
                                                                             
            [TheName].prototype._callFunction = function(promise) {          
                promise._pushContext();                                      
                var ret = tryCatch(this.fn)([ThePassedArguments]);           
                promise._popContext();                                       
                if (ret === errorObj) {                                      
                    promise._rejectCallback(ret.e, false);                   
                } else {                                                     
                    promise._resolveCallback(ret);                           
                }                                                            
            };                                                               
                                                                             
            [TheName].prototype.checkFulfillment = function(promise) {       
                var now = ++this.now;                                        
                if (now === [TheTotal]) {                                    
                    if (this.asyncNeeded) {                                  
                        async.invoke(this._callFunction, this, promise);     
                    } else {                                                 
                        this._callFunction(promise);                         
                    }                                                        
                                                                             
                }                                                            
            };                                                               
                                                                             
            [TheName].prototype._resultCancelled = function() {              
                [CancellationCode]                                           
            };                                                               
                                                                             
            return [TheName];                                                
        }(tryCatch, errorObj, Promise, async);                               
        `;return de=de.replace(/\[TheName\]/g,re).replace(/\[TheTotal\]/g,D).replace(/\[ThePassedArguments\]/g,fe).replace(/\[TheProperties\]/g,N).replace(/\[CancellationCode\]/g,ee),new Function("tryCatch","errorObj","Promise","async",de)(u,c,t,i)},m=[],h=[],S=[],R=0;R<8;++R)m.push(g(R+1)),h.push(f(R+1)),S.push(y(R+1));d=function(D){this._reject(D)}}t.join=function(){var D=arguments.length-1,I;if(D>0&&typeof arguments[D]=="function"&&(I=arguments[D],D<=8&&a)){var j=new t(n);j._captureStackTrace();for(var A=m[D-1],N=new A(I),ee=h,fe=0;fe<D;++fe){var re=r(arguments[fe],j);if(re instanceof t){re=re._target();var de=re._bitField;de&50397184?de&33554432?ee[fe].call(j,re._value(),N):de&16777216?j._reject(re._reason()):j._cancel():(re._then(ee[fe],d,void 0,j,N),S[fe](re,N),N.asyncNeeded=!1)}else ee[fe].call(j,re,N)}if(!j._isFateSealed()){if(N.asyncNeeded){var se=t._getContext();N.fn=o.contextBind(se,N.fn)}j._setAsyncGuaranteed(),j._setOnCancel(N)}return j}for(var _e=arguments.length,G=new Array(_e),K=0;K<_e;++K)G[K]=arguments[K];I&&G.pop();var j=new e(G).promise();return I!==void 0?j.spread(I):j}}});var TP=q((BU,RP)=>{"use strict";var Ey=Object.create;Ey&&(Py=Ey(null),ky=Ey(null),Py[" size"]=ky[" size"]=0);var Py,ky;RP.exports=function(t){var e=Dt(),r=e.canEvaluate,n=e.isIdentifier,i,o,a=function(m){return new Function("ensureMethod",`                                    
        return function(obj) {                                               
            'use strict'                                                     
            var len = this.length;                                           
            ensureMethod(obj, 'methodName');                                 
            switch(len) {                                                    
                case 1: return obj.methodName(this[0]);                      
                case 2: return obj.methodName(this[0], this[1]);             
                case 3: return obj.methodName(this[0], this[1], this[2]);    
                case 0: return obj.methodName();                             
                default:                                                     
                    return obj.methodName.apply(obj, this);                  
            }                                                                
        };                                                                   
        `.replace(/methodName/g,m))(d)},u=function(m){return new Function("obj",`                                             
        'use strict';                                                        
        return obj.propertyName;                                             
        `.replace("propertyName",m))},c=function(m,h,S){var R=S[m];if(typeof R!="function"){if(!n(m))return null;if(R=h(m),S[m]=R,S[" size"]++,S[" size"]>512){for(var D=Object.keys(S),I=0;I<256;++I)delete S[D[I]];S[" size"]=D.length-256}}return R};i=function(m){return c(m,a,Py)},o=function(m){return c(m,u,ky)};function d(m,h){var S;if(m!=null&&(S=m[h]),typeof S!="function"){var R="Object "+e.classString(m)+" has no method '"+e.toString(h)+"'";throw new t.TypeError(R)}return S}function f(m){var h=this.pop(),S=d(m,h);return S.apply(m,this)}t.prototype.call=function(m){for(var h=arguments.length,S=new Array(Math.max(h-1,0)),R=1;R<h;++R)S[R-1]=arguments[R];if(r){var D=i(m);if(D!==null)return this._then(D,void 0,void 0,S,void 0)}return S.push(m),this._then(f,void 0,void 0,S,void 0)};function y(m){return m[this]}function g(m){var h=+this;return h<0&&(h=Math.max(0,h+m.length)),m[h]}t.prototype.get=function(m){var h=typeof m=="number",S;if(h)S=g;else if(r){var R=o(m);S=R!==null?R:y}else S=y;return this._then(S,void 0,void 0,m,void 0)}}});var EP=q((zU,DP)=>{"use strict";DP.exports=function(t,e,r,n,i,o){var a=ai(),u=a.TypeError,c=Dt(),d=c.errorObj,f=c.tryCatch,y=[];function g(h,S,R){for(var D=0;D<S.length;++D){R._pushContext();var I=f(S[D])(h);if(R._popContext(),I===d){R._pushContext();var A=t.reject(d.e);return R._popContext(),A}var N=n(I,R);if(N instanceof t)return N}return null}function m(h,S,R,D){if(o.cancellation()){var I=new t(r),A=this._finallyPromise=new t(r);this._promise=I.lastly(function(){return A}),I._captureStackTrace(),I._setOnCancel(this)}else{var N=this._promise=new t(r);N._captureStackTrace()}this._stack=D,this._generatorFunction=h,this._receiver=S,this._generator=void 0,this._yieldHandlers=typeof R=="function"?[R].concat(y):y,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(m,i),m.prototype._isResolved=function(){return this._promise===null},m.prototype._cleanup=function(){this._promise=this._generator=null,o.cancellation()&&this._finallyPromise!==null&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},m.prototype._promiseCancelled=function(){if(!this._isResolved()){var h=typeof this._generator.return<"u",S;if(h)this._promise._pushContext(),S=f(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var R=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=R,this._promise._attachExtraTrace(R),this._promise._pushContext(),S=f(this._generator.throw).call(this._generator,R),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(S)}},m.prototype._promiseFulfilled=function(h){this._yieldedPromise=null,this._promise._pushContext();var S=f(this._generator.next).call(this._generator,h);this._promise._popContext(),this._continue(S)},m.prototype._promiseRejected=function(h){this._yieldedPromise=null,this._promise._attachExtraTrace(h),this._promise._pushContext();var S=f(this._generator.throw).call(this._generator,h);this._promise._popContext(),this._continue(S)},m.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var h=this._yieldedPromise;this._yieldedPromise=null,h.cancel()}},m.prototype.promise=function(){return this._promise},m.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},m.prototype._continue=function(h){var S=this._promise;if(h===d)return this._cleanup(),this._cancellationPhase?S.cancel():S._rejectCallback(h.e,!1);var R=h.value;if(h.done===!0)return this._cleanup(),this._cancellationPhase?S.cancel():S._resolveCallback(R);var D=n(R,this._promise);if(!(D instanceof t)&&(D=g(D,this._yieldHandlers,this._promise),D===null)){this._promiseRejected(new u(`A value %s was yielded that could not be treated as a promise

    See http://goo.gl/MqrFmX

`.replace("%s",String(R))+`From coroutine:
`+this._stack.split(`
`).slice(1,-7).join(`
`)));return}D=D._target();var I=D._bitField;I&50397184?I&33554432?t._async.invoke(this._promiseFulfilled,this,D._value()):I&16777216?t._async.invoke(this._promiseRejected,this,D._reason()):this._promiseCancelled():(this._yieldedPromise=D,D._proxy(this,null))},t.coroutine=function(h,S){if(typeof h!="function")throw new u(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var R=Object(S).yieldHandler,D=m,I=new Error().stack;return function(){var A=h.apply(this,arguments),N=new D(void 0,void 0,R,I),ee=N.promise();return N._generator=A,N._promiseFulfilled(void 0),ee}},t.coroutine.addYieldHandler=function(h){if(typeof h!="function")throw new u("expecting a function but got "+c.classString(h));y.push(h)},t.spawn=function(h){if(o.deprecated("Promise.spawn()","Promise.coroutine()"),typeof h!="function")return e(`generatorFunction must be a function

    See http://goo.gl/MqrFmX
`);var S=new m(h,this),R=S.promise();return S._run(t.spawn),R}}});var kP=q((KU,PP)=>{"use strict";PP.exports=function(t,e,r,n,i,o){var a=Dt(),u=a.tryCatch,c=a.errorObj,d=t._async;function f(g,m,h,S){this.constructor$(g),this._promise._captureStackTrace();var R=t._getContext();if(this._callback=a.contextBind(R,m),this._preservedValues=S===i?new Array(this.length()):null,this._limit=h,this._inFlight=0,this._queue=[],d.invoke(this._asyncInit,this,void 0),a.isArray(g))for(var D=0;D<g.length;++D){var I=g[D];I instanceof t&&I.suppressUnhandledRejections()}}a.inherits(f,e),f.prototype._asyncInit=function(){this._init$(void 0,-2)},f.prototype._init=function(){},f.prototype._promiseFulfilled=function(g,m){var h=this._values,S=this.length(),R=this._preservedValues,D=this._limit;if(m<0){if(m=m*-1-1,h[m]=g,D>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(D>=1&&this._inFlight>=D)return h[m]=g,this._queue.push(m),!1;R!==null&&(R[m]=g);var I=this._promise,A=this._callback,N=I._boundValue();I._pushContext();var ee=u(A).call(N,g,m,S),fe=I._popContext();if(o.checkForgottenReturns(ee,fe,R!==null?"Promise.filter":"Promise.map",I),ee===c)return this._reject(ee.e),!0;var re=n(ee,this._promise);if(re instanceof t){re=re._target();var de=re._bitField;if(de&50397184)if(de&33554432)ee=re._value();else return de&16777216?(this._reject(re._reason()),!0):(this._cancel(),!0);else return D>=1&&this._inFlight++,h[m]=re,re._proxy(this,(m+1)*-1),!1}h[m]=ee}var se=++this._totalResolved;return se>=S?(R!==null?this._filter(h,R):this._resolve(h),!0):!1},f.prototype._drainQueue=function(){for(var g=this._queue,m=this._limit,h=this._values;g.length>0&&this._inFlight<m;){if(this._isResolved())return;var S=g.pop();this._promiseFulfilled(h[S],S)}},f.prototype._filter=function(g,m){for(var h=m.length,S=new Array(h),R=0,D=0;D<h;++D)g[D]&&(S[R++]=m[D]);S.length=R,this._resolve(S)},f.prototype.preservedValues=function(){return this._preservedValues};function y(g,m,h,S){if(typeof m!="function")return r("expecting a function but got "+a.classString(m));var R=0;if(h!==void 0)if(typeof h=="object"&&h!==null){if(typeof h.concurrency!="number")return t.reject(new TypeError("'concurrency' must be a number but it is "+a.classString(h.concurrency)));R=h.concurrency}else return t.reject(new TypeError("options argument must be an object but it is "+a.classString(h)));return R=typeof R=="number"&&isFinite(R)&&R>=1?R:0,new f(g,m,R,S).promise()}t.prototype.map=function(g,m){return y(this,g,m,null)},t.map=function(g,m,h,S){return y(g,m,h,S)}}});var xP=q((VU,qP)=>{"use strict";qP.exports=function(t){var e=Dt(),r=t._async,n=e.tryCatch,i=e.errorObj;function o(c,d){var f=this;if(!e.isArray(c))return a.call(f,c,d);var y=n(d).apply(f._boundValue(),[null].concat(c));y===i&&r.throwLater(y.e)}function a(c,d){var f=this,y=f._boundValue(),g=c===void 0?n(d).call(y,null):n(d).call(y,null,c);g===i&&r.throwLater(g.e)}function u(c,d){var f=this;if(!c){var y=new Error(c+"");y.cause=c,c=y}var g=n(d).call(f._boundValue(),c);g===i&&r.throwLater(g.e)}t.prototype.asCallback=t.prototype.nodeify=function(c,d){if(typeof c=="function"){var f=a;d!==void 0&&Object(d).spread&&(f=o),this._then(f,u,void 0,this,c)}return this}}});var OP=q((GU,FP)=>{"use strict";FP.exports=function(t,e){var r={},n=Dt(),i=Dy(),o=n.withAppended,a=n.maybeWrapAsError,u=n.canEvaluate,c=ai().TypeError,d="Async",f={__isPromisified__:!0},y=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],g=new RegExp("^(?:"+y.join("|")+")$"),m=function(j){return n.isIdentifier(j)&&j.charAt(0)!=="_"&&j!=="constructor"};function h(j){return!g.test(j)}function S(j){try{return j.__isPromisified__===!0}catch{return!1}}function R(j,X,$){var H=n.getDataPropertyOrDefault(j,X+$,f);return H?S(H):!1}function D(j,X,$){for(var H=0;H<j.length;H+=2){var V=j[H];if($.test(V)){for(var ne=V.replace($,""),P=0;P<j.length;P+=2)if(j[P]===ne)throw new c(`Cannot promisify an API that has normal methods with '%s'-suffix

    See http://goo.gl/MqrFmX
`.replace("%s",X))}}}function I(j,X,$,H){for(var V=n.inheritedDataKeys(j),ne=[],P=0;P<V.length;++P){var ue=V[P],ye=j[ue],me=H===m?!0:m(ue,ye,j);typeof ye=="function"&&!S(ye)&&!R(j,ue,X)&&H(ue,ye,j,me)&&ne.push(ue,ye)}return D(ne,X,$),ne}var A=function(j){return j.replace(/([$])/,"\\$")},N,ee=function(j){for(var X=[j],$=Math.max(0,j-1-3),H=j-1;H>=$;--H)X.push(H);for(var H=j+1;H<=3;++H)X.push(H);return X},fe=function(j){return n.filledRange(j,"_arg","")},re=function(j){return n.filledRange(Math.max(j,3),"_arg","")},de=function(j){return typeof j.length=="number"?Math.max(Math.min(j.length,1024),0):0};N=function(j,X,$,H,V,ne){var P=Math.max(0,de(H)-1),ue=ee(P),ye=typeof j=="string"||X===r;function me(pe){var Te=fe(pe).join(", "),Ce=pe>0?", ":"",He;return ye?He=`ret = callback.call(this, {{args}}, nodeback); break;
`:He=X===void 0?`ret = callback({{args}}, nodeback); break;
`:`ret = callback.call(receiver, {{args}}, nodeback); break;
`,He.replace("{{args}}",Te).replace(", ",Ce)}function L(){for(var pe="",Te=0;Te<ue.length;++Te)pe+="case "+ue[Te]+":"+me(ue[Te]);return pe+=`                                                             
        default:                                                             
            var args = new Array(len + 1);                                   
            var i = 0;                                                       
            for (var i = 0; i < len; ++i) {                                  
               args[i] = arguments[i];                                       
            }                                                                
            args[i] = nodeback;                                              
            [CodeForCall]                                                    
            break;                                                           
        `.replace("[CodeForCall]",ye?`ret = callback.apply(this, args);
`:`ret = callback.apply(receiver, args);
`),pe}var Y=typeof j=="string"?"this != null ? this['"+j+"'] : fn":"fn",ae=`'use strict';                                                
        var ret = function (Parameters) {                                    
            'use strict';                                                    
            var len = arguments.length;                                      
            var promise = new Promise(INTERNAL);                             
            promise._captureStackTrace();                                    
            var nodeback = nodebackForPromise(promise, `+ne+`);   
            var ret;                                                         
            var callback = tryCatch([GetFunctionCode]);                      
            switch(len) {                                                    
                [CodeForSwitchCase]                                          
            }                                                                
            if (ret === errorObj) {                                          
                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);
            }                                                                
            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     
            return promise;                                                  
        };                                                                   
        notEnumerableProp(ret, '__isPromisified__', true);                   
        return ret;                                                          
    `.replace("[CodeForSwitchCase]",L()).replace("[GetFunctionCode]",Y);return ae=ae.replace("Parameters",re(P)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",ae)(t,H,X,o,a,i,n.tryCatch,n.errorObj,n.notEnumerableProp,e)};function se(j,X,$,H,V,ne){var P=function(){return this}(),ue=j;typeof ue=="string"&&(j=H);function ye(){var me=X;X===r&&(me=this);var L=new t(e);L._captureStackTrace();var Y=typeof ue=="string"&&this!==P?this[ue]:j,ae=i(L,ne);try{Y.apply(me,o(arguments,ae))}catch(pe){L._rejectCallback(a(pe),!0,!0)}return L._isFateSealed()||L._setAsyncGuaranteed(),L}return n.notEnumerableProp(ye,"__isPromisified__",!0),ye}var _e=u?N:se;function G(j,X,$,H,V){for(var ne=new RegExp(A(X)+"$"),P=I(j,X,ne,$),ue=0,ye=P.length;ue<ye;ue+=2){var me=P[ue],L=P[ue+1],Y=me+X;if(H===_e)j[Y]=_e(me,r,me,L,X,V);else{var ae=H(L,function(){return _e(me,r,me,L,X,V)});n.notEnumerableProp(ae,"__isPromisified__",!0),j[Y]=ae}}return n.toFastProperties(j),j}function K(j,X,$){return _e(j,X,void 0,j,null,$)}t.promisify=function(j,X){if(typeof j!="function")throw new c("expecting a function but got "+n.classString(j));if(S(j))return j;X=Object(X);var $=X.context===void 0?r:X.context,H=!!X.multiArgs,V=K(j,$,H);return n.copyDescriptors(j,V,h),V},t.promisifyAll=function(j,X){if(typeof j!="function"&&typeof j!="object")throw new c(`the target of promisifyAll must be an object or a function

    See http://goo.gl/MqrFmX
`);X=Object(X);var $=!!X.multiArgs,H=X.suffix;typeof H!="string"&&(H=d);var V=X.filter;typeof V!="function"&&(V=m);var ne=X.promisifier;if(typeof ne!="function"&&(ne=_e),!n.isIdentifier(H))throw new RangeError(`suffix must be a valid identifier

    See http://goo.gl/MqrFmX
`);for(var P=n.inheritedDataKeys(j),ue=0;ue<P.length;++ue){var ye=j[P[ue]];P[ue]!=="constructor"&&n.isClass(ye)&&(G(ye.prototype,H,V,ne,$),G(ye,H,V,ne,$))}return G(j,H,V,ne,$)}}});var AP=q((QU,IP)=>{"use strict";IP.exports=function(t,e,r,n){var i=Dt(),o=i.isObject,a=Ni(),u;typeof Map=="function"&&(u=Map);var c=function(){var g=0,m=0;function h(S,R){this[g]=S,this[g+m]=R,g++}return function(R){m=R.size,g=0;var D=new Array(R.size*2);return R.forEach(h,D),D}}(),d=function(g){for(var m=new u,h=g.length/2|0,S=0;S<h;++S){var R=g[h+S],D=g[S];m.set(R,D)}return m};function f(g){var m=!1,h;if(u!==void 0&&g instanceof u)h=c(g),m=!0;else{var S=a.keys(g),R=S.length;h=new Array(R*2);for(var D=0;D<R;++D){var I=S[D];h[D]=g[I],h[D+R]=I}}this.constructor$(h),this._isMap=m,this._init$(void 0,m?-6:-3)}i.inherits(f,e),f.prototype._init=function(){},f.prototype._promiseFulfilled=function(g,m){this._values[m]=g;var h=++this._totalResolved;if(h>=this._length){var S;if(this._isMap)S=d(this._values);else{S={};for(var R=this.length(),D=0,I=this.length();D<I;++D)S[this._values[D+R]]=this._values[D]}return this._resolve(S),!0}return!1},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(g){return g>>1};function y(g){var m,h=r(g);if(o(h))h instanceof t?m=h._then(t.props,void 0,void 0,void 0,void 0):m=new f(h).promise();else return n(`cannot await properties of a non-object

    See http://goo.gl/MqrFmX
`);return h instanceof t&&m._propagateFrom(h,2),m}t.prototype.props=function(){return y(this)},t.props=function(g){return y(g)}}});var NP=q((XU,LP)=>{"use strict";LP.exports=function(t,e,r,n){var i=Dt(),o=function(u){return u.then(function(c){return a(c,u)})};function a(u,c){var d=r(u);if(d instanceof t)return o(d);if(u=i.asArray(u),u===null)return n("expecting an array or an iterable object but got "+i.classString(u));var f=new t(e);c!==void 0&&f._propagateFrom(c,3);for(var y=f._fulfill,g=f._reject,m=0,h=u.length;m<h;++m){var S=u[m];S===void 0&&!(m in u)||t.cast(S)._then(y,g,void 0,f,null)}return f}t.race=function(u){return a(u,void 0)},t.prototype.race=function(){return a(this,void 0)}}});var jP=q((YU,MP)=>{"use strict";MP.exports=function(t,e,r,n,i,o){var a=Dt(),u=a.tryCatch;function c(m,h,S,R){this.constructor$(m);var D=t._getContext();this._fn=a.contextBind(D,h),S!==void 0&&(S=t.resolve(S),S._attachCancellationCallback(this)),this._initialValue=S,this._currentCancellable=null,R===i?this._eachValues=Array(this._length):R===0?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}a.inherits(c,e),c.prototype._gotAccum=function(m){this._eachValues!==void 0&&this._eachValues!==null&&m!==i&&this._eachValues.push(m)},c.prototype._eachComplete=function(m){return this._eachValues!==null&&this._eachValues.push(m),this._eachValues},c.prototype._init=function(){},c.prototype._resolveEmptyArray=function(){this._resolve(this._eachValues!==void 0?this._eachValues:this._initialValue)},c.prototype.shouldCopyValues=function(){return!1},c.prototype._resolve=function(m){this._promise._resolveCallback(m),this._values=null},c.prototype._resultCancelled=function(m){if(m===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel())},c.prototype._iterate=function(m){this._values=m;var h,S,R=m.length;this._initialValue!==void 0?(h=this._initialValue,S=0):(h=t.resolve(m[0]),S=1),this._currentCancellable=h;for(var D=S;D<R;++D){var I=m[D];I instanceof t&&I.suppressUnhandledRejections()}if(!h.isRejected())for(;S<R;++S){var A={accum:null,value:m[S],index:S,length:R,array:this};h=h._then(y,void 0,void 0,A,void 0),S&127||h._setNoAsyncGuarantee()}this._eachValues!==void 0&&(h=h._then(this._eachComplete,void 0,void 0,this,void 0)),h._then(d,d,void 0,h,this)},t.prototype.reduce=function(m,h){return f(this,m,h,null)},t.reduce=function(m,h,S,R){return f(m,h,S,R)};function d(m,h){this.isFulfilled()?h._resolve(m):h._reject(m)}function f(m,h,S,R){if(typeof h!="function")return r("expecting a function but got "+a.classString(h));var D=new c(m,h,S,R);return D.promise()}function y(m){this.accum=m,this.array._gotAccum(m);var h=n(this.value,this.array._promise);return h instanceof t?(this.array._currentCancellable=h,h._then(g,void 0,void 0,this,void 0)):g.call(this,h)}function g(m){var h=this.array,S=h._promise,R=u(h._fn);S._pushContext();var D;h._eachValues!==void 0?D=R.call(S._boundValue(),m,this.index,this.length):D=R.call(S._boundValue(),this.accum,m,this.index,this.length),D instanceof t&&(h._currentCancellable=D);var I=S._popContext();return o.checkForgottenReturns(D,I,h._eachValues!==void 0?"Promise.each":"Promise.reduce",S),D}}});var WP=q((JU,$P)=>{"use strict";$P.exports=function(t,e,r){var n=t.PromiseInspection,i=Dt();function o(a){this.constructor$(a)}i.inherits(o,e),o.prototype._promiseResolved=function(a,u){this._values[a]=u;var c=++this._totalResolved;return c>=this._length?(this._resolve(this._values),!0):!1},o.prototype._promiseFulfilled=function(a,u){var c=new n;return c._bitField=33554432,c._settledValueField=a,this._promiseResolved(u,c)},o.prototype._promiseRejected=function(a,u){var c=new n;return c._bitField=16777216,c._settledValueField=a,this._promiseResolved(u,c)},t.settle=function(a){return r.deprecated(".settle()",".reflect()"),new o(a).promise()},t.allSettled=function(a){return new o(a).promise()},t.prototype.settle=function(){return t.settle(this)}}});var UP=q((ZU,HP)=>{"use strict";HP.exports=function(t,e,r){var n=Dt(),i=ai().RangeError,o=ai().AggregateError,a=n.isArray,u={};function c(f){this.constructor$(f),this._howMany=0,this._unwrap=!1,this._initialized=!1}n.inherits(c,e),c.prototype._init=function(){if(this._initialized){if(this._howMany===0){this._resolve([]);return}this._init$(void 0,-5);var f=a(this._values);!this._isResolved()&&f&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},c.prototype.init=function(){this._initialized=!0,this._init()},c.prototype.setUnwrap=function(){this._unwrap=!0},c.prototype.howMany=function(){return this._howMany},c.prototype.setHowMany=function(f){this._howMany=f},c.prototype._promiseFulfilled=function(f){return this._addFulfilled(f),this._fulfilled()===this.howMany()?(this._values.length=this.howMany(),this.howMany()===1&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0):!1},c.prototype._promiseRejected=function(f){return this._addRejected(f),this._checkOutcome()},c.prototype._promiseCancelled=function(){return this._values instanceof t||this._values==null?this._cancel():(this._addRejected(u),this._checkOutcome())},c.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var f=new o,y=this.length();y<this._values.length;++y)this._values[y]!==u&&f.push(this._values[y]);return f.length>0?this._reject(f):this._cancel(),!0}return!1},c.prototype._fulfilled=function(){return this._totalResolved},c.prototype._rejected=function(){return this._values.length-this.length()},c.prototype._addRejected=function(f){this._values.push(f)},c.prototype._addFulfilled=function(f){this._values[this._totalResolved++]=f},c.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},c.prototype._getRangeError=function(f){var y="Input array must contain at least "+this._howMany+" items but contains only "+f+" items";return new i(y)},c.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};function d(f,y){if((y|0)!==y||y<0)return r(`expecting a positive integer

    See http://goo.gl/MqrFmX
`);var g=new c(f),m=g.promise();return g.setHowMany(y),g.init(),m}t.some=function(f,y){return d(f,y)},t.prototype.some=function(f){return d(this,f)},t._SomePromiseArray=c}});var zP=q((eB,BP)=>{"use strict";BP.exports=function(t,e,r){var n=Dt(),i=t.TimeoutError;function o(y){this.handle=y}o.prototype._resultCancelled=function(){clearTimeout(this.handle)};var a=function(y){return u(+this).thenReturn(y)},u=t.delay=function(y,g){var m,h;return g!==void 0?(m=t.resolve(g)._then(a,null,null,y,void 0),r.cancellation()&&g instanceof t&&m._setOnCancel(g)):(m=new t(e),h=setTimeout(function(){m._fulfill()},+y),r.cancellation()&&m._setOnCancel(new o(h)),m._captureStackTrace()),m._setAsyncGuaranteed(),m};t.prototype.delay=function(y){return u(y,this)};var c=function(y,g,m){var h;typeof g!="string"?g instanceof Error?h=g:h=new i("operation timed out"):h=new i(g),n.markAsOriginatingFromRejection(h),y._attachExtraTrace(h),y._reject(h),m?.cancel()};function d(y){return clearTimeout(this.handle),y}function f(y){throw clearTimeout(this.handle),y}t.prototype.timeout=function(y,g){y=+y;var m,h,S=new o(setTimeout(function(){m.isPending()&&c(m,g,h)},y));return r.cancellation()?(h=this.then(),m=h._then(d,f,void 0,S,void 0),m._setOnCancel(S)):m=this._then(d,f,void 0,S,void 0),m}}});var VP=q((tB,KP)=>{"use strict";KP.exports=function(t,e,r,n,i,o){var a=Dt(),u=ai().TypeError,c=Dt().inherits,d=a.errorObj,f=a.tryCatch,y={};function g(A){setTimeout(function(){throw A},0)}function m(A){var N=r(A);return N!==A&&typeof A._isDisposable=="function"&&typeof A._getDisposer=="function"&&A._isDisposable()&&N._setDisposable(A._getDisposer()),N}function h(A,N){var ee=0,fe=A.length,re=new t(i);function de(){if(ee>=fe)return re._fulfill();var se=m(A[ee++]);if(se instanceof t&&se._isDisposable()){try{se=r(se._getDisposer().tryDispose(N),A.promise)}catch(_e){return g(_e)}if(se instanceof t)return se._then(de,g,null,null,null)}de()}return de(),re}function S(A,N,ee){this._data=A,this._promise=N,this._context=ee}S.prototype.data=function(){return this._data},S.prototype.promise=function(){return this._promise},S.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():y},S.prototype.tryDispose=function(A){var N=this.resource(),ee=this._context;ee!==void 0&&ee._pushContext();var fe=N!==y?this.doDispose(N,A):null;return ee!==void 0&&ee._popContext(),this._promise._unsetDisposable(),this._data=null,fe},S.isDisposer=function(A){return A!=null&&typeof A.resource=="function"&&typeof A.tryDispose=="function"};function R(A,N,ee){this.constructor$(A,N,ee)}c(R,S),R.prototype.doDispose=function(A,N){var ee=this.data();return ee.call(A,A,N)};function D(A){return S.isDisposer(A)?(this.resources[this.index]._setDisposable(A),A.promise()):A}function I(A){this.length=A,this.promise=null,this[A-1]=null}I.prototype._resultCancelled=function(){for(var A=this.length,N=0;N<A;++N){var ee=this[N];ee instanceof t&&ee.cancel()}},t.using=function(){var A=arguments.length;if(A<2)return e("you must pass at least 2 arguments to Promise.using");var N=arguments[A-1];if(typeof N!="function")return e("expecting a function but got "+a.classString(N));var ee,fe=!0;A===2&&Array.isArray(arguments[0])?(ee=arguments[0],A=ee.length,fe=!1):(ee=arguments,A--);for(var re=new I(A),de=0;de<A;++de){var se=ee[de];if(S.isDisposer(se)){var _e=se;se=se.promise(),se._setDisposable(_e)}else{var G=r(se);G instanceof t&&(se=G._then(D,null,null,{resources:re,index:de},void 0))}re[de]=se}for(var K=new Array(re.length),de=0;de<K.length;++de)K[de]=t.resolve(re[de]).reflect();var j=t.all(K).then(function($){for(var H=0;H<$.length;++H){var V=$[H];if(V.isRejected())return d.e=V.error(),d;if(!V.isFulfilled()){j.cancel();return}$[H]=V.value()}X._pushContext(),N=f(N);var ne=fe?N.apply(void 0,$):N($),P=X._popContext();return o.checkForgottenReturns(ne,P,"Promise.using",X),ne}),X=j.lastly(function(){var $=new t.PromiseInspection(j);return h(re,$)});return re.promise=X,X._setOnCancel(re),X},t.prototype._setDisposable=function(A){this._bitField=this._bitField|131072,this._disposer=A},t.prototype._isDisposable=function(){return(this._bitField&131072)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(A){if(typeof A=="function")return new R(A,this,n());throw new u}}});var QP=q((rB,GP)=>{"use strict";GP.exports=function(t){var e=t._SomePromiseArray;function r(n){var i=new e(n),o=i.promise();return i.setHowMany(1),i.setUnwrap(),i.init(),o}t.any=function(n){return r(n)},t.prototype.any=function(){return r(this)}}});var YP=q((nB,XP)=>{"use strict";XP.exports=function(t,e){var r=t.reduce,n=t.all;function i(){return n(this)}function o(a,u){return r(a,u,e,e)}t.prototype.each=function(a){return r(this,a,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(a){return r(this,a,e,e)},t.each=function(a,u){return r(a,u,e,0)._then(i,void 0,void 0,a,void 0)},t.mapSeries=o}});var ZP=q((iB,JP)=>{"use strict";JP.exports=function(t,e){var r=t.map;t.prototype.filter=function(n,i){return r(this,n,i,e)},t.filter=function(n,i,o){return r(n,i,o,e)}}});var ek=q((oB,qy)=>{"use strict";qy.exports=function(){var t=function(){return new I(`circular promise resolution chain

    See http://goo.gl/MqrFmX
`)},e=function(){return new P.PromiseInspection(this._target())},r=function(L){return P.reject(new I(L))};function n(){}var i={},o=Dt();o.setReflectHandler(e);var a=function(){var L=process.domain;return L===void 0?null:L},u=function(){return null},c=function(){return{domain:a(),async:null}},d=o.isNode&&o.nodeSupportsAsyncResource?require("async_hooks").AsyncResource:null,f=function(){return{domain:a(),async:new d("Bluebird::Promise")}},y=o.isNode?c:u;o.notEnumerableProp(P,"_getContext",y);var g=function(){y=f,o.notEnumerableProp(P,"_getContext",f)},m=function(){y=c,o.notEnumerableProp(P,"_getContext",c)},h=Ni(),S=GE(),R=new S;h.defineProperty(P,"_async",{value:R});var D=ai(),I=P.TypeError=D.TypeError;P.RangeError=D.RangeError;var A=P.CancellationError=D.CancellationError;P.TimeoutError=D.TimeoutError,P.OperationalError=D.OperationalError,P.RejectionError=D.OperationalError,P.AggregateError=D.AggregateError;var N=function(){},ee={},fe={},re=ZE()(P,N),de=tP()(P,N,re,r,n),se=nP()(P),_e=se.create,G=oP()(P,se,g,m),K=G.CapturedTrace,j=uP()(P,re,fe),X=Ty()(fe),$=Dy(),H=o.errorObj,V=o.tryCatch;function ne(L,Y){if(L==null||L.constructor!==P)throw new I(`the promise constructor cannot be invoked directly

    See http://goo.gl/MqrFmX
`);if(typeof Y!="function")throw new I("expecting a function but got "+o.classString(Y))}function P(L){L!==N&&ne(this,L),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(L),this._promiseCreated(),this._fireEvent("promiseCreated",this)}P.prototype.toString=function(){return"[object Promise]"},P.prototype.caught=P.prototype.catch=function(L){var Y=arguments.length;if(Y>1){var ae=new Array(Y-1),pe=0,Te;for(Te=0;Te<Y-1;++Te){var Ce=arguments[Te];if(o.isObject(Ce))ae[pe++]=Ce;else return r("Catch statement predicate: expecting an object but got "+o.classString(Ce))}if(ae.length=pe,L=arguments[Te],typeof L!="function")throw new I("The last argument to .catch() must be a function, got "+o.toString(L));return this.then(void 0,X(ae,L,this))}return this.then(void 0,L)},P.prototype.reflect=function(){return this._then(e,e,void 0,this,void 0)},P.prototype.then=function(L,Y){if(G.warnings()&&arguments.length>0&&typeof L!="function"&&typeof Y!="function"){var ae=".then() only accepts functions but was passed: "+o.classString(L);arguments.length>1&&(ae+=", "+o.classString(Y)),this._warn(ae)}return this._then(L,Y,void 0,void 0,void 0)},P.prototype.done=function(L,Y){var ae=this._then(L,Y,void 0,void 0,void 0);ae._setIsFinal()},P.prototype.spread=function(L){return typeof L!="function"?r("expecting a function but got "+o.classString(L)):this.all()._then(L,void 0,void 0,ee,void 0)},P.prototype.toJSON=function(){var L={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(L.fulfillmentValue=this.value(),L.isFulfilled=!0):this.isRejected()&&(L.rejectionReason=this.reason(),L.isRejected=!0),L},P.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new de(this).promise()},P.prototype.error=function(L){return this.caught(o.originatesFromRejection,L)},P.getNewLibraryCopy=qy.exports,P.is=function(L){return L instanceof P},P.fromNode=P.fromCallback=function(L){var Y=new P(N);Y._captureStackTrace();var ae=arguments.length>1?!!Object(arguments[1]).multiArgs:!1,pe=V(L)($(Y,ae));return pe===H&&Y._rejectCallback(pe.e,!0),Y._isFateSealed()||Y._setAsyncGuaranteed(),Y},P.all=function(L){return new de(L).promise()},P.cast=function(L){var Y=re(L);return Y instanceof P||(Y=new P(N),Y._captureStackTrace(),Y._setFulfilled(),Y._rejectionHandler0=L),Y},P.resolve=P.fulfilled=P.cast,P.reject=P.rejected=function(L){var Y=new P(N);return Y._captureStackTrace(),Y._rejectCallback(L,!0),Y},P.setScheduler=function(L){if(typeof L!="function")throw new I("expecting a function but got "+o.classString(L));return R.setScheduler(L)},P.prototype._then=function(L,Y,ae,pe,Te){var Ce=Te!==void 0,He=Ce?Te:new P(N),ct=this._target(),Vt=ct._bitField;Ce||(He._propagateFrom(this,3),He._captureStackTrace(),pe===void 0&&this._bitField&2097152&&(Vt&50397184?pe=this._boundValue():pe=ct===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,He));var vt=y();if(Vt&50397184){var jt,Ot,wt=ct._settlePromiseCtx;Vt&33554432?(Ot=ct._rejectionHandler0,jt=L):Vt&16777216?(Ot=ct._fulfillmentHandler0,jt=Y,ct._unsetRejectionIsUnhandled()):(wt=ct._settlePromiseLateCancellationObserver,Ot=new A("late cancellation observer"),ct._attachExtraTrace(Ot),jt=Y),R.invoke(wt,ct,{handler:o.contextBind(vt,jt),promise:He,receiver:pe,value:Ot})}else ct._addCallbacks(L,Y,He,pe,vt);return He},P.prototype._length=function(){return this._bitField&65535},P.prototype._isFateSealed=function(){return(this._bitField&117506048)!==0},P.prototype._isFollowing=function(){return(this._bitField&67108864)===67108864},P.prototype._setLength=function(L){this._bitField=this._bitField&-65536|L&65535},P.prototype._setFulfilled=function(){this._bitField=this._bitField|33554432,this._fireEvent("promiseFulfilled",this)},P.prototype._setRejected=function(){this._bitField=this._bitField|16777216,this._fireEvent("promiseRejected",this)},P.prototype._setFollowing=function(){this._bitField=this._bitField|67108864,this._fireEvent("promiseResolved",this)},P.prototype._setIsFinal=function(){this._bitField=this._bitField|4194304},P.prototype._isFinal=function(){return(this._bitField&4194304)>0},P.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},P.prototype._setCancelled=function(){this._bitField=this._bitField|65536,this._fireEvent("promiseCancelled",this)},P.prototype._setWillBeCancelled=function(){this._bitField=this._bitField|8388608},P.prototype._setAsyncGuaranteed=function(){if(!R.hasCustomScheduler()){var L=this._bitField;this._bitField=L|(L&536870912)>>2^134217728}},P.prototype._setNoAsyncGuarantee=function(){this._bitField=(this._bitField|536870912)&-134217729},P.prototype._receiverAt=function(L){var Y=L===0?this._receiver0:this[L*4-4+3];if(Y!==i)return Y===void 0&&this._isBound()?this._boundValue():Y},P.prototype._promiseAt=function(L){return this[L*4-4+2]},P.prototype._fulfillmentHandlerAt=function(L){return this[L*4-4+0]},P.prototype._rejectionHandlerAt=function(L){return this[L*4-4+1]},P.prototype._boundValue=function(){},P.prototype._migrateCallback0=function(L){var Y=L._bitField,ae=L._fulfillmentHandler0,pe=L._rejectionHandler0,Te=L._promise0,Ce=L._receiverAt(0);Ce===void 0&&(Ce=i),this._addCallbacks(ae,pe,Te,Ce,null)},P.prototype._migrateCallbackAt=function(L,Y){var ae=L._fulfillmentHandlerAt(Y),pe=L._rejectionHandlerAt(Y),Te=L._promiseAt(Y),Ce=L._receiverAt(Y);Ce===void 0&&(Ce=i),this._addCallbacks(ae,pe,Te,Ce,null)},P.prototype._addCallbacks=function(L,Y,ae,pe,Te){var Ce=this._length();if(Ce>=65531&&(Ce=0,this._setLength(0)),Ce===0)this._promise0=ae,this._receiver0=pe,typeof L=="function"&&(this._fulfillmentHandler0=o.contextBind(Te,L)),typeof Y=="function"&&(this._rejectionHandler0=o.contextBind(Te,Y));else{var He=Ce*4-4;this[He+2]=ae,this[He+3]=pe,typeof L=="function"&&(this[He+0]=o.contextBind(Te,L)),typeof Y=="function"&&(this[He+1]=o.contextBind(Te,Y))}return this._setLength(Ce+1),Ce},P.prototype._proxy=function(L,Y){this._addCallbacks(void 0,void 0,Y,L,null)},P.prototype._resolveCallback=function(L,Y){if(!(this._bitField&117506048)){if(L===this)return this._rejectCallback(t(),!1);var ae=re(L,this);if(!(ae instanceof P))return this._fulfill(L);Y&&this._propagateFrom(ae,2);var pe=ae._target();if(pe===this){this._reject(t());return}var Te=pe._bitField;if(Te&50397184)if(Te&33554432)this._fulfill(pe._value());else if(Te&16777216)this._reject(pe._reason());else{var ct=new A("late cancellation observer");pe._attachExtraTrace(ct),this._reject(ct)}else{var Ce=this._length();Ce>0&&pe._migrateCallback0(this);for(var He=1;He<Ce;++He)pe._migrateCallbackAt(this,He);this._setFollowing(),this._setLength(0),this._setFollowee(ae)}}},P.prototype._rejectCallback=function(L,Y,ae){var pe=o.ensureErrorObject(L),Te=pe===L;if(!Te&&!ae&&G.warnings()){var Ce="a promise was rejected with a non-error: "+o.classString(L);this._warn(Ce,!0)}this._attachExtraTrace(pe,Y?Te:!1),this._reject(L)},P.prototype._resolveFromExecutor=function(L){if(L!==N){var Y=this;this._captureStackTrace(),this._pushContext();var ae=!0,pe=this._execute(L,function(Te){Y._resolveCallback(Te)},function(Te){Y._rejectCallback(Te,ae)});ae=!1,this._popContext(),pe!==void 0&&Y._rejectCallback(pe,!0)}},P.prototype._settlePromiseFromHandler=function(L,Y,ae,pe){var Te=pe._bitField;if(!(Te&65536)){pe._pushContext();var Ce;Y===ee?!ae||typeof ae.length!="number"?(Ce=H,Ce.e=new I("cannot .spread() a non-array: "+o.classString(ae))):Ce=V(L).apply(this._boundValue(),ae):Ce=V(L).call(Y,ae);var He=pe._popContext();Te=pe._bitField,!(Te&65536)&&(Ce===fe?pe._reject(ae):Ce===H?pe._rejectCallback(Ce.e,!1):(G.checkForgottenReturns(Ce,He,"",pe,this),pe._resolveCallback(Ce)))}},P.prototype._target=function(){for(var L=this;L._isFollowing();)L=L._followee();return L},P.prototype._followee=function(){return this._rejectionHandler0},P.prototype._setFollowee=function(L){this._rejectionHandler0=L},P.prototype._settlePromise=function(L,Y,ae,pe){var Te=L instanceof P,Ce=this._bitField,He=(Ce&134217728)!==0;Ce&65536?(Te&&L._invokeInternalOnCancel(),ae instanceof j&&ae.isFinallyHandler()?(ae.cancelPromise=L,V(Y).call(ae,pe)===H&&L._reject(H.e)):Y===e?L._fulfill(e.call(ae)):ae instanceof n?ae._promiseCancelled(L):Te||L instanceof de?L._cancel():ae.cancel()):typeof Y=="function"?Te?(He&&L._setAsyncGuaranteed(),this._settlePromiseFromHandler(Y,ae,pe,L)):Y.call(ae,pe,L):ae instanceof n?ae._isResolved()||(Ce&33554432?ae._promiseFulfilled(pe,L):ae._promiseRejected(pe,L)):Te&&(He&&L._setAsyncGuaranteed(),Ce&33554432?L._fulfill(pe):L._reject(pe))},P.prototype._settlePromiseLateCancellationObserver=function(L){var Y=L.handler,ae=L.promise,pe=L.receiver,Te=L.value;typeof Y=="function"?ae instanceof P?this._settlePromiseFromHandler(Y,pe,Te,ae):Y.call(pe,Te,ae):ae instanceof P&&ae._reject(Te)},P.prototype._settlePromiseCtx=function(L){this._settlePromise(L.promise,L.handler,L.receiver,L.value)},P.prototype._settlePromise0=function(L,Y,ae){var pe=this._promise0,Te=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(pe,L,Te,Y)},P.prototype._clearCallbackDataAtIndex=function(L){var Y=L*4-4;this[Y+2]=this[Y+3]=this[Y+0]=this[Y+1]=void 0},P.prototype._fulfill=function(L){var Y=this._bitField;if(!((Y&117506048)>>>16)){if(L===this){var ae=t();return this._attachExtraTrace(ae),this._reject(ae)}this._setFulfilled(),this._rejectionHandler0=L,(Y&65535)>0&&(Y&134217728?this._settlePromises():R.settlePromises(this),this._dereferenceTrace())}},P.prototype._reject=function(L){var Y=this._bitField;if(!((Y&117506048)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=L,this._isFinal())return R.fatalError(L,o.isNode);(Y&65535)>0?R.settlePromises(this):this._ensurePossibleRejectionHandled()}},P.prototype._fulfillPromises=function(L,Y){for(var ae=1;ae<L;ae++){var pe=this._fulfillmentHandlerAt(ae),Te=this._promiseAt(ae),Ce=this._receiverAt(ae);this._clearCallbackDataAtIndex(ae),this._settlePromise(Te,pe,Ce,Y)}},P.prototype._rejectPromises=function(L,Y){for(var ae=1;ae<L;ae++){var pe=this._rejectionHandlerAt(ae),Te=this._promiseAt(ae),Ce=this._receiverAt(ae);this._clearCallbackDataAtIndex(ae),this._settlePromise(Te,pe,Ce,Y)}},P.prototype._settlePromises=function(){var L=this._bitField,Y=L&65535;if(Y>0){if(L&16842752){var ae=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,ae,L),this._rejectPromises(Y,ae)}else{var pe=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,pe,L),this._fulfillPromises(Y,pe)}this._setLength(0)}this._clearCancellationData()},P.prototype._settledValue=function(){var L=this._bitField;if(L&33554432)return this._rejectionHandler0;if(L&16777216)return this._fulfillmentHandler0},typeof Symbol<"u"&&Symbol.toStringTag&&h.defineProperty(P.prototype,Symbol.toStringTag,{get:function(){return"Object"}});function ue(L){this.promise._resolveCallback(L)}function ye(L){this.promise._rejectCallback(L,!1)}P.defer=P.pending=function(){G.deprecated("Promise.defer","new Promise");var L=new P(N);return{promise:L,resolve:ue,reject:ye}},o.notEnumerableProp(P,"_makeSelfResolutionError",t),hP()(P,N,re,r,G),gP()(P,N,re,G),yP()(P,de,r,G),_P()(P),wP()(P),CP()(P,de,re,N,R),P.Promise=P,P.version="3.7.2",TP()(P),EP()(P,r,N,re,n,G),kP()(P,de,r,re,N,G),xP()(P),OP()(P,N),AP()(P,de,re,r),NP()(P,N,re,r),jP()(P,de,r,re,N,G),WP()(P,de,G),UP()(P,de,r),zP()(P,N,G),VP()(P,r,re,_e,N,G),QP()(P),YP()(P,N),ZP()(P,N),o.toFastProperties(P),o.toFastProperties(P.prototype);function me(L){var Y=new P(N);Y._fulfillmentHandler0=L,Y._rejectionHandler0=L,Y._promise0=L,Y._receiver0=L}return me({a:1}),me({b:2}),me({c:3}),me(1),me(function(){}),me(void 0),me(!1),me(new P(N)),G.setBounds(S.firstLineError,o.lastLineError),P}});var nk=q((sB,rk)=>{"use strict";var tk;typeof Promise<"u"&&(tk=Promise);function xj(){try{Promise===ld&&(Promise=tk)}catch{}return ld}var ld=ek()();ld.noConflict=xj;rk.exports=ld});var sk=q((aB,ok)=>{var Ya=Ol(),Fj=kE(),Oj=Il(),Ij=Al(),dd=require("path"),xy=hy(),Aj=Ll(),Ja=qa(),fd=nk(),ik=Buffer.alloc(4);ik.writeUInt32LE(101010256,0);function Lj(t){let e=t.stream(0).pipe(Ya());return e.pull(4).then(function(r){if(r.readUInt32LE(0)===875721283){let i;return e.pull(12).then(function(o){i=Ja.parse(o,[["version",4],["pubKeyLength",4],["signatureLength",4]])}).then(function(){return e.pull(i.pubKeyLength+i.signatureLength)}).then(function(o){return i.publicKey=o.slice(0,i.pubKeyLength),i.signature=o.slice(i.pubKeyLength),i.size=16+i.pubKeyLength+i.signatureLength,i})}})}function Nj(t,e){let r=Ja.parse(e,[["signature",4],["diskNumber",4],["offsetToStartOfCentralDirectory",8],["numberOfDisks",4]]);if(r.signature!=117853008)throw new Error("invalid zip64 end of central dir locator signature (0x07064b50): 0x"+r.signature.toString(16));let n=Ya();return t.stream(r.offsetToStartOfCentralDirectory).pipe(n),n.pull(56)}function Mj(t){let e=Ja.parse(t,[["signature",4],["sizeOfCentralDirectory",8],["version",2],["versionsNeededToExtract",2],["diskNumber",4],["diskStart",4],["numberOfRecordsOnDisk",8],["numberOfRecords",8],["sizeOfCentralDirectory",8],["offsetToStartOfCentralDirectory",8]]);if(e.signature!=101075792)throw new Error("invalid zip64 end of central dir locator signature (0x06064b50): 0x0"+e.signature.toString(16));return e}ok.exports=function(e,r){let n=Ya(),i=Ya(),o=r&&r.tailSize||80,a,u,c,d;return r&&r.crx&&(u=Lj(e)),e.size().then(function(f){return a=f,e.stream(Math.max(0,f-o)).on("error",function(y){n.emit("error",y)}).pipe(n),n.pull(ik)}).then(function(){return fd.props({directory:n.pull(22),crxHeader:u})}).then(function(f){let y=f.directory;if(c=f.crxHeader&&f.crxHeader.size||0,d=Ja.parse(y,[["signature",4],["diskNumber",2],["diskStart",2],["numberOfRecordsOnDisk",2],["numberOfRecords",2],["sizeOfCentralDirectory",4],["offsetToStartOfCentralDirectory",4],["commentLength",2]]),d.diskNumber==65535||d.numberOfRecords==65535||d.offsetToStartOfCentralDirectory==4294967295){let m=a-(o-n.match+20),h=Ya();return e.stream(m).pipe(h),h.pull(20).then(function(S){return Nj(e,S)}).then(function(S){d=Mj(S)})}else d.offsetToStartOfCentralDirectory+=c}).then(function(){if(d.commentLength)return n.pull(d.commentLength).then(function(f){d.comment=f.toString("utf8")})}).then(function(){return e.stream(d.offsetToStartOfCentralDirectory).pipe(i),d.extract=function(f){if(!f||!f.path)throw new Error("PATH_MISSING");return f.path=dd.resolve(dd.normalize(f.path)),d.files.then(function(y){return fd.map(y,async function(g){let m=dd.join(f.path,g.path);if(m.indexOf(f.path)!=0)return;if(g.type=="Directory"){await xy.ensureDir(m);return}await xy.ensureDir(dd.dirname(m));let h=f.getWriter?f.getWriter({path:m}):xy.createWriteStream(m);return new Promise(function(S,R){g.stream(f.password).on("error",R).pipe(h).on("close",S).on("error",R)})},{concurrency:f.concurrency>1?f.concurrency:1})})},d.files=fd.mapSeries(Array(d.numberOfRecords),function(){return i.pull(46).then(function(f){let y=Ja.parse(f,[["signature",4],["versionMadeBy",2],["versionsNeededToExtract",2],["flags",2],["compressionMethod",2],["lastModifiedTime",2],["lastModifiedDate",2],["crc32",4],["compressedSize",4],["uncompressedSize",4],["fileNameLength",2],["extraFieldLength",2],["fileCommentLength",2],["diskNumber",2],["internalFileAttributes",2],["externalFileAttributes",4],["offsetToLocalFileHeader",4]]);return y.offsetToLocalFileHeader+=c,y.lastModifiedDateTime=Aj(y.lastModifiedDate,y.lastModifiedTime),i.pull(y.fileNameLength).then(function(g){return y.pathBuffer=g,y.path=g.toString("utf8"),y.isUnicode=(y.flags&2048)!=0,i.pull(y.extraFieldLength)}).then(function(g){return y.extra=Ij(g,y),i.pull(y.fileCommentLength)}).then(function(g){y.comment=g,y.type=y.uncompressedSize===0&&/[/\\]$/.test(y.path)?"Directory":"File";let m=r&&r.padding||1e3;return y.stream=function(h){let S=30+m+(y.extraFieldLength||0)+(y.fileNameLength||0)+y.compressedSize;return Fj(e,y.offsetToLocalFileHeader,h,y,S)},y.buffer=function(h){return Oj(y.stream(h))},y})})}),fd.props(d)})}});var lk=q((uB,ck)=>{var ak=go(),ks=sk(),uk=require("stream");ck.exports={buffer:function(t,e){return ks({stream:function(n,i){let o=uk.PassThrough(),a=i?n+i:void 0;return o.end(t.slice(n,a)),o},size:function(){return Promise.resolve(t.length)}},e)},file:function(t,e){return ks({stream:function(n,i){let o=i?n+i:void 0;return ak.createReadStream(t,{start:n,end:o})},size:function(){return new Promise(function(n,i){ak.stat(t,function(o,a){o?i(o):n(a.size)})})}},e)},url:function(t,e,r){if(typeof e=="string"&&(e={url:e}),!e.url)throw"URL missing";return e.headers=e.headers||{},ks({stream:function(i,o){let a=Object.create(e),u=o?i+o:"";return a.headers=Object.create(e.headers),a.headers.range="bytes="+i+"-"+u,t(a)},size:function(){return new Promise(function(i,o){let a=t(e);a.on("response",function(u){a.abort(),u.headers["content-length"]?i(u.headers["content-length"]):o(new Error("Missing content length header"))}).on("error",o)})}},r)},s3:function(t,e,r){return ks({size:function(){return new Promise(function(i,o){t.headObject(e,function(a,u){a?o(a):i(u.ContentLength)})})},stream:function(i,o){let a={};for(let c in e)a[c]=e[c];let u=o?i+o:"";return a.Range="bytes="+i+"-"+u,t.getObject(a).createReadStream()}},r)},s3_v3:function(t,e,r){let{GetObjectCommand:n,HeadObjectCommand:i}=require("@aws-sdk/client-s3");return ks({size:async()=>{let a=await t.send(new i({Bucket:e.Bucket,Key:e.Key}));return a.ContentLength?a.ContentLength:0},stream:(a,u)=>{let c=uk.PassThrough(),d=u?a+u:"";return t.send(new n({Bucket:e.Bucket,Key:e.Key,Range:`bytes=${a}-${d}`})).then(f=>{f.Body.pipe(c)}).catch(f=>{c.emit("error",f)}),c}},r)},custom:function(t,e){return ks(t,e)}}});var dk=q(Za=>{"use strict";Za.Parse=Nl();Za.ParseOne=S0();Za.Extract=_E();Za.Open=lk()});var Hj={};Sv(Hj,{activate:()=>$j,deactivate:()=>Wj});module.exports=zq(Hj);var yd=gr(require("vscode"),1);var tu=gr(require("vscode"),1),md=gr(MR(),1),Fy=require("stream");var jR;(()=>{"use strict";var t={975:G=>{function K($){if(typeof $!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify($))}function j($,H){for(var V,ne="",P=0,ue=-1,ye=0,me=0;me<=$.length;++me){if(me<$.length)V=$.charCodeAt(me);else{if(V===47)break;V=47}if(V===47){if(!(ue===me-1||ye===1))if(ue!==me-1&&ye===2){if(ne.length<2||P!==2||ne.charCodeAt(ne.length-1)!==46||ne.charCodeAt(ne.length-2)!==46){if(ne.length>2){var L=ne.lastIndexOf("/");if(L!==ne.length-1){L===-1?(ne="",P=0):P=(ne=ne.slice(0,L)).length-1-ne.lastIndexOf("/"),ue=me,ye=0;continue}}else if(ne.length===2||ne.length===1){ne="",P=0,ue=me,ye=0;continue}}H&&(ne.length>0?ne+="/..":ne="..",P=2)}else ne.length>0?ne+="/"+$.slice(ue+1,me):ne=$.slice(ue+1,me),P=me-ue-1;ue=me,ye=0}else V===46&&ye!==-1?++ye:ye=-1}return ne}var X={resolve:function(){for(var $,H="",V=!1,ne=arguments.length-1;ne>=-1&&!V;ne--){var P;ne>=0?P=arguments[ne]:($===void 0&&($=process.cwd()),P=$),K(P),P.length!==0&&(H=P+"/"+H,V=P.charCodeAt(0)===47)}return H=j(H,!V),V?H.length>0?"/"+H:"/":H.length>0?H:"."},normalize:function($){if(K($),$.length===0)return".";var H=$.charCodeAt(0)===47,V=$.charCodeAt($.length-1)===47;return($=j($,!H)).length!==0||H||($="."),$.length>0&&V&&($+="/"),H?"/"+$:$},isAbsolute:function($){return K($),$.length>0&&$.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var $,H=0;H<arguments.length;++H){var V=arguments[H];K(V),V.length>0&&($===void 0?$=V:$+="/"+V)}return $===void 0?".":X.normalize($)},relative:function($,H){if(K($),K(H),$===H||($=X.resolve($))===(H=X.resolve(H)))return"";for(var V=1;V<$.length&&$.charCodeAt(V)===47;++V);for(var ne=$.length,P=ne-V,ue=1;ue<H.length&&H.charCodeAt(ue)===47;++ue);for(var ye=H.length-ue,me=P<ye?P:ye,L=-1,Y=0;Y<=me;++Y){if(Y===me){if(ye>me){if(H.charCodeAt(ue+Y)===47)return H.slice(ue+Y+1);if(Y===0)return H.slice(ue+Y)}else P>me&&($.charCodeAt(V+Y)===47?L=Y:Y===0&&(L=0));break}var ae=$.charCodeAt(V+Y);if(ae!==H.charCodeAt(ue+Y))break;ae===47&&(L=Y)}var pe="";for(Y=V+L+1;Y<=ne;++Y)Y!==ne&&$.charCodeAt(Y)!==47||(pe.length===0?pe+="..":pe+="/..");return pe.length>0?pe+H.slice(ue+L):(ue+=L,H.charCodeAt(ue)===47&&++ue,H.slice(ue))},_makeLong:function($){return $},dirname:function($){if(K($),$.length===0)return".";for(var H=$.charCodeAt(0),V=H===47,ne=-1,P=!0,ue=$.length-1;ue>=1;--ue)if((H=$.charCodeAt(ue))===47){if(!P){ne=ue;break}}else P=!1;return ne===-1?V?"/":".":V&&ne===1?"//":$.slice(0,ne)},basename:function($,H){if(H!==void 0&&typeof H!="string")throw new TypeError('"ext" argument must be a string');K($);var V,ne=0,P=-1,ue=!0;if(H!==void 0&&H.length>0&&H.length<=$.length){if(H.length===$.length&&H===$)return"";var ye=H.length-1,me=-1;for(V=$.length-1;V>=0;--V){var L=$.charCodeAt(V);if(L===47){if(!ue){ne=V+1;break}}else me===-1&&(ue=!1,me=V+1),ye>=0&&(L===H.charCodeAt(ye)?--ye==-1&&(P=V):(ye=-1,P=me))}return ne===P?P=me:P===-1&&(P=$.length),$.slice(ne,P)}for(V=$.length-1;V>=0;--V)if($.charCodeAt(V)===47){if(!ue){ne=V+1;break}}else P===-1&&(ue=!1,P=V+1);return P===-1?"":$.slice(ne,P)},extname:function($){K($);for(var H=-1,V=0,ne=-1,P=!0,ue=0,ye=$.length-1;ye>=0;--ye){var me=$.charCodeAt(ye);if(me!==47)ne===-1&&(P=!1,ne=ye+1),me===46?H===-1?H=ye:ue!==1&&(ue=1):H!==-1&&(ue=-1);else if(!P){V=ye+1;break}}return H===-1||ne===-1||ue===0||ue===1&&H===ne-1&&H===V+1?"":$.slice(H,ne)},format:function($){if($===null||typeof $!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof $);return function(H,V){var ne=V.dir||V.root,P=V.base||(V.name||"")+(V.ext||"");return ne?ne===V.root?ne+P:ne+"/"+P:P}(0,$)},parse:function($){K($);var H={root:"",dir:"",base:"",ext:"",name:""};if($.length===0)return H;var V,ne=$.charCodeAt(0),P=ne===47;P?(H.root="/",V=1):V=0;for(var ue=-1,ye=0,me=-1,L=!0,Y=$.length-1,ae=0;Y>=V;--Y)if((ne=$.charCodeAt(Y))!==47)me===-1&&(L=!1,me=Y+1),ne===46?ue===-1?ue=Y:ae!==1&&(ae=1):ue!==-1&&(ae=-1);else if(!L){ye=Y+1;break}return ue===-1||me===-1||ae===0||ae===1&&ue===me-1&&ue===ye+1?me!==-1&&(H.base=H.name=ye===0&&P?$.slice(1,me):$.slice(ye,me)):(ye===0&&P?(H.name=$.slice(1,ue),H.base=$.slice(1,me)):(H.name=$.slice(ye,ue),H.base=$.slice(ye,me)),H.ext=$.slice(ue,me)),ye>0?H.dir=$.slice(0,ye-1):P&&(H.dir="/"),H},sep:"/",delimiter:":",win32:null,posix:null};X.posix=X,G.exports=X}},e={};function r(G){var K=e[G];if(K!==void 0)return K.exports;var j=e[G]={exports:{}};return t[G](j,j.exports,r),j.exports}r.d=(G,K)=>{for(var j in K)r.o(K,j)&&!r.o(G,j)&&Object.defineProperty(G,j,{enumerable:!0,get:K[j]})},r.o=(G,K)=>Object.prototype.hasOwnProperty.call(G,K),r.r=G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var n={};let i;r.r(n),r.d(n,{URI:()=>g,Utils:()=>_e}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,u=/^\/\//;function c(G,K){if(!G.scheme&&K)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${G.authority}", path: "${G.path}", query: "${G.query}", fragment: "${G.fragment}"}`);if(G.scheme&&!o.test(G.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(G.path){if(G.authority){if(!a.test(G.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(u.test(G.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}let d="",f="/",y=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class g{static isUri(K){return K instanceof g||!!K&&typeof K.authority=="string"&&typeof K.fragment=="string"&&typeof K.path=="string"&&typeof K.query=="string"&&typeof K.scheme=="string"&&typeof K.fsPath=="string"&&typeof K.with=="function"&&typeof K.toString=="function"}scheme;authority;path;query;fragment;constructor(K,j,X,$,H,V=!1){typeof K=="object"?(this.scheme=K.scheme||d,this.authority=K.authority||d,this.path=K.path||d,this.query=K.query||d,this.fragment=K.fragment||d):(this.scheme=function(ne,P){return ne||P?ne:"file"}(K,V),this.authority=j||d,this.path=function(ne,P){switch(ne){case"https":case"http":case"file":P?P[0]!==f&&(P=f+P):P=f}return P}(this.scheme,X||d),this.query=$||d,this.fragment=H||d,c(this,V))}get fsPath(){return I(this,!1)}with(K){if(!K)return this;let{scheme:j,authority:X,path:$,query:H,fragment:V}=K;return j===void 0?j=this.scheme:j===null&&(j=d),X===void 0?X=this.authority:X===null&&(X=d),$===void 0?$=this.path:$===null&&($=d),H===void 0?H=this.query:H===null&&(H=d),V===void 0?V=this.fragment:V===null&&(V=d),j===this.scheme&&X===this.authority&&$===this.path&&H===this.query&&V===this.fragment?this:new h(j,X,$,H,V)}static parse(K,j=!1){let X=y.exec(K);return X?new h(X[2]||d,fe(X[4]||d),fe(X[5]||d),fe(X[7]||d),fe(X[9]||d),j):new h(d,d,d,d,d)}static file(K){let j=d;if(i&&(K=K.replace(/\\/g,f)),K[0]===f&&K[1]===f){let X=K.indexOf(f,2);X===-1?(j=K.substring(2),K=f):(j=K.substring(2,X),K=K.substring(X)||f)}return new h("file",j,K,d,d)}static from(K){let j=new h(K.scheme,K.authority,K.path,K.query,K.fragment);return c(j,!0),j}toString(K=!1){return A(this,K)}toJSON(){return this}static revive(K){if(K){if(K instanceof g)return K;{let j=new h(K);return j._formatted=K.external,j._fsPath=K._sep===m?K.fsPath:null,j}}return K}}let m=i?1:void 0;class h extends g{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=I(this,!1)),this._fsPath}toString(K=!1){return K?A(this,!0):(this._formatted||(this._formatted=A(this,!1)),this._formatted)}toJSON(){let K={$mid:1};return this._fsPath&&(K.fsPath=this._fsPath,K._sep=m),this._formatted&&(K.external=this._formatted),this.path&&(K.path=this.path),this.scheme&&(K.scheme=this.scheme),this.authority&&(K.authority=this.authority),this.query&&(K.query=this.query),this.fragment&&(K.fragment=this.fragment),K}}let S={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function R(G,K,j){let X,$=-1;for(let H=0;H<G.length;H++){let V=G.charCodeAt(H);if(V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===45||V===46||V===95||V===126||K&&V===47||j&&V===91||j&&V===93||j&&V===58)$!==-1&&(X+=encodeURIComponent(G.substring($,H)),$=-1),X!==void 0&&(X+=G.charAt(H));else{X===void 0&&(X=G.substr(0,H));let ne=S[V];ne!==void 0?($!==-1&&(X+=encodeURIComponent(G.substring($,H)),$=-1),X+=ne):$===-1&&($=H)}}return $!==-1&&(X+=encodeURIComponent(G.substring($))),X!==void 0?X:G}function D(G){let K;for(let j=0;j<G.length;j++){let X=G.charCodeAt(j);X===35||X===63?(K===void 0&&(K=G.substr(0,j)),K+=S[X]):K!==void 0&&(K+=G[j])}return K!==void 0?K:G}function I(G,K){let j;return j=G.authority&&G.path.length>1&&G.scheme==="file"?`//${G.authority}${G.path}`:G.path.charCodeAt(0)===47&&(G.path.charCodeAt(1)>=65&&G.path.charCodeAt(1)<=90||G.path.charCodeAt(1)>=97&&G.path.charCodeAt(1)<=122)&&G.path.charCodeAt(2)===58?K?G.path.substr(1):G.path[1].toLowerCase()+G.path.substr(2):G.path,i&&(j=j.replace(/\//g,"\\")),j}function A(G,K){let j=K?D:R,X="",{scheme:$,authority:H,path:V,query:ne,fragment:P}=G;if($&&(X+=$,X+=":"),(H||$==="file")&&(X+=f,X+=f),H){let ue=H.indexOf("@");if(ue!==-1){let ye=H.substr(0,ue);H=H.substr(ue+1),ue=ye.lastIndexOf(":"),ue===-1?X+=j(ye,!1,!1):(X+=j(ye.substr(0,ue),!1,!1),X+=":",X+=j(ye.substr(ue+1),!1,!0)),X+="@"}H=H.toLowerCase(),ue=H.lastIndexOf(":"),ue===-1?X+=j(H,!1,!0):(X+=j(H.substr(0,ue),!1,!0),X+=H.substr(ue))}if(V){if(V.length>=3&&V.charCodeAt(0)===47&&V.charCodeAt(2)===58){let ue=V.charCodeAt(1);ue>=65&&ue<=90&&(V=`/${String.fromCharCode(ue+32)}:${V.substr(3)}`)}else if(V.length>=2&&V.charCodeAt(1)===58){let ue=V.charCodeAt(0);ue>=65&&ue<=90&&(V=`${String.fromCharCode(ue+32)}:${V.substr(2)}`)}X+=j(V,!0,!1)}return ne&&(X+="?",X+=j(ne,!1,!1)),P&&(X+="#",X+=K?P:R(P,!1,!1)),X}function N(G){try{return decodeURIComponent(G)}catch{return G.length>3?G.substr(0,3)+N(G.substr(3)):G}}let ee=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function fe(G){return G.match(ee)?G.replace(ee,K=>N(K)):G}var re=r(975);let de=re.posix||re,se="/";var _e;(function(G){G.joinPath=function(K,...j){return K.with({path:de.join(K.path,...j)})},G.resolvePath=function(K,...j){let X=K.path,$=!1;X[0]!==se&&(X=se+X,$=!0);let H=de.resolve(X,...j);return $&&H[0]===se&&!K.authority&&(H=H.substring(1)),K.with({path:H})},G.dirname=function(K){if(K.path.length===0||K.path===se)return K;let j=de.dirname(K.path);return j.length===1&&j.charCodeAt(0)===46&&(j=""),K.with({path:j})},G.basename=function(K){return de.basename(K.path)},G.extname=function(K){return de.extname(K.path)}})(_e||(_e={})),jR=n})();var{URI:hm,Utils:sW}=jR;var mk=require("path");var Wn=gr(require("fs"),1),qs=gr(require("path"),1),hd=gr(require("os"),1);var yT=gr(require("node:http"),1),vT=gr(require("node:https"),1),lo=gr(require("node:zlib"),1),nn=gr(require("node:stream"),1),Pa=require("node:buffer");function VA(t){if(!/^data:/i.test(t))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');t=t.replace(/\r?\n/g,"");let e=t.indexOf(",");if(e===-1||e<=4)throw new TypeError("malformed data: URI");let r=t.substring(5,e).split(";"),n="",i=!1,o=r[0]||"text/plain",a=o;for(let f=1;f<r.length;f++)r[f]==="base64"?i=!0:r[f]&&(a+=`;${r[f]}`,r[f].indexOf("charset=")===0&&(n=r[f].substring(8)));!r[0]&&!n.length&&(a+=";charset=US-ASCII",n="US-ASCII");let u=i?"base64":"ascii",c=unescape(t.substring(e+1)),d=Buffer.from(c,u);return d.type=o,d.typeFull=a,d.charset=n,d}var $R=VA;var gn=gr(require("node:stream"),1),ti=require("node:util"),tn=require("node:buffer");Sa();Sl();var ei=class extends Error{constructor(e,r){super(e),Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var zr=class extends ei{constructor(e,r,n){super(e,r),n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}};var Cl=Symbol.toStringTag,vm=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Cl]==="URLSearchParams",Ra=t=>t&&typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Cl]),QR=t=>typeof t=="object"&&(t[Cl]==="AbortSignal"||t[Cl]==="EventTarget"),XR=(t,e)=>{let r=new URL(e).hostname,n=new URL(t).hostname;return r===n||r.endsWith(`.${n}`)},YR=(t,e)=>{let r=new URL(e).protocol,n=new URL(t).protocol;return r===n};var u1=(0,ti.promisify)(gn.default.pipeline),Kr=Symbol("Body internals"),Mn=class{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:vm(e)?e=tn.Buffer.from(e.toString()):Ra(e)||tn.Buffer.isBuffer(e)||(ti.types.isAnyArrayBuffer(e)?e=tn.Buffer.from(e):ArrayBuffer.isView(e)?e=tn.Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof gn.default||(e instanceof ao?(e=GR(e),n=e.type.split("=")[1]):e=tn.Buffer.from(String(e))));let i=e;tn.Buffer.isBuffer(e)?i=gn.default.Readable.from(e):Ra(e)&&(i=gn.default.Readable.from(e.stream())),this[Kr]={body:e,stream:i,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof gn.default&&e.on("error",o=>{let a=o instanceof ei?o:new zr(`Invalid response body while trying to fetch ${this.url}: ${o.message}`,"system",o);this[Kr].error=a})}get body(){return this[Kr].stream}get bodyUsed(){return this[Kr].disturbed}async arrayBuffer(){let{buffer:e,byteOffset:r,byteLength:n}=await wm(this);return e.slice(r,r+n)}async formData(){let e=this.headers.get("content-type");if(e.startsWith("application/x-www-form-urlencoded")){let n=new ao,i=new URLSearchParams(await this.text());for(let[o,a]of i)n.append(o,a);return n}let{toFormData:r}=await Promise.resolve().then(()=>(rT(),tT));return r(this.body,e)}async blob(){let e=this.headers&&this.headers.get("content-type")||this[Kr].body&&this[Kr].body.type||"",r=await this.arrayBuffer();return new Zn([r],{type:e})}async json(){let e=await this.text();return JSON.parse(e)}async text(){let e=await wm(this);return new TextDecoder().decode(e)}buffer(){return wm(this)}};Mn.prototype.buffer=(0,ti.deprecate)(Mn.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(Mn.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,ti.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function wm(t){if(t[Kr].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[Kr].disturbed=!0,t[Kr].error)throw t[Kr].error;let{body:e}=t;if(e===null)return tn.Buffer.alloc(0);if(!(e instanceof gn.default))return tn.Buffer.alloc(0);let r=[],n=0;try{for await(let i of e){if(t.size>0&&n+i.length>t.size){let o=new zr(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(o),o}n+=i.length,r.push(i)}}catch(i){throw i instanceof ei?i:new zr(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?tn.Buffer.from(r.join("")):tn.Buffer.concat(r,n)}catch(i){throw new zr(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new zr(`Premature close of server response while trying to fetch ${t.url}`)}var ds=(t,e)=>{let r,n,{body:i}=t[Kr];if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof gn.default&&typeof i.getBoundary!="function"&&(r=new gn.PassThrough({highWaterMark:e}),n=new gn.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[Kr].stream=r,i=n),i},c1=(0,ti.deprecate)(t=>t.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),El=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":vm(t)?"application/x-www-form-urlencoded;charset=UTF-8":Ra(t)?t.type||null:tn.Buffer.isBuffer(t)||ti.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t instanceof ao?`multipart/form-data; boundary=${e[Kr].boundary}`:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${c1(t)}`:t instanceof gn.default?null:"text/plain;charset=UTF-8",nT=t=>{let{body:e}=t[Kr];return e===null?0:Ra(e)?e.size:tn.Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null},iT=async(t,{body:e})=>{e===null?t.end():await u1(e,t)};var Sm=require("node:util"),Da=gr(require("node:http"),1),Pl=typeof Da.default.validateHeaderName=="function"?Da.default.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){let e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},Cm=typeof Da.default.validateHeaderValue=="function"?Da.default.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){let r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}},rn=class t extends URLSearchParams{constructor(e){let r=[];if(e instanceof t){let n=e.raw();for(let[i,o]of Object.entries(n))r.push(...o.map(a=>[i,a]))}else if(e!=null)if(typeof e=="object"&&!Sm.types.isBoxedPrimitive(e)){let n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||Sm.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(Pl(n),Cm(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,o){switch(i){case"append":case"set":return(a,u)=>(Pl(a),Cm(a,String(u)),URLSearchParams.prototype[i].call(n,String(a).toLowerCase(),String(u)));case"delete":case"has":case"getAll":return a=>(Pl(a),URLSearchParams.prototype[i].call(n,String(a).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,o)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){let r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e,r=void 0){for(let n of this.keys())Reflect.apply(e,r,[this.get(n),n,this])}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{let n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}};Object.defineProperties(rn.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function oT(t=[]){return new rn(t.reduce((e,r,n,i)=>(n%2===0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return Pl(e),Cm(e,String(r)),!0}catch{return!1}}))}var l1=new Set([301,302,303,307,308]),kl=t=>l1.has(t);var Pn=Symbol("Response internals"),mn=class t extends Mn{constructor(e=null,r={}){super(e,r);let n=r.status!=null?r.status:200,i=new rn(r.headers);if(e!==null&&!i.has("Content-Type")){let o=El(e,this);o&&i.append("Content-Type",o)}this[Pn]={type:"default",url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get type(){return this[Pn].type}get url(){return this[Pn].url||""}get status(){return this[Pn].status}get ok(){return this[Pn].status>=200&&this[Pn].status<300}get redirected(){return this[Pn].counter>0}get statusText(){return this[Pn].statusText}get headers(){return this[Pn].headers}get highWaterMark(){return this[Pn].highWaterMark}clone(){return new t(ds(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(e,r=302){if(!kl(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new t(null,{headers:{location:new URL(e).toString()},status:r})}static error(){let e=new t(null,{status:0,statusText:""});return e[Pn].type="error",e}static json(e=void 0,r={}){let n=JSON.stringify(e);if(n===void 0)throw new TypeError("data is not JSON serializable");let i=new rn(r&&r.headers);return i.has("content-type")||i.set("content-type","application/json"),new t(n,{...r,headers:i})}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(mn.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var pT=require("node:url"),gT=require("node:util");var sT=t=>{if(t.search)return t.search;let e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""};var uT=require("node:net");function aT(t,e=!1){return t==null||(t=new URL(t),/^(about|blob|data):$/.test(t.protocol))?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}var cT=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),lT="strict-origin-when-cross-origin";function dT(t){if(!cT.has(t))throw new TypeError(`Invalid referrerPolicy: ${t}`);return t}function d1(t){if(/^(http|ws)s:$/.test(t.protocol))return!0;let e=t.host.replace(/(^\[)|(]$)/g,""),r=(0,uT.isIP)(e);return r===4&&/^127\./.test(e)||r===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(e)?!0:t.host==="localhost"||t.host.endsWith(".localhost")?!1:t.protocol==="file:"}function fs(t){return/^about:(blank|srcdoc)$/.test(t)||t.protocol==="data:"||/^(blob|filesystem):$/.test(t.protocol)?!0:d1(t)}function fT(t,{referrerURLCallback:e,referrerOriginCallback:r}={}){if(t.referrer==="no-referrer"||t.referrerPolicy==="")return null;let n=t.referrerPolicy;if(t.referrer==="about:client")return"no-referrer";let i=t.referrer,o=aT(i),a=aT(i,!0);o.toString().length>4096&&(o=a),e&&(o=e(o)),r&&(a=r(a));let u=new URL(t.url);switch(n){case"no-referrer":return"no-referrer";case"origin":return a;case"unsafe-url":return o;case"strict-origin":return fs(o)&&!fs(u)?"no-referrer":a.toString();case"strict-origin-when-cross-origin":return o.origin===u.origin?o:fs(o)&&!fs(u)?"no-referrer":a;case"same-origin":return o.origin===u.origin?o:"no-referrer";case"origin-when-cross-origin":return o.origin===u.origin?o:a;case"no-referrer-when-downgrade":return fs(o)&&!fs(u)?"no-referrer":o;default:throw new TypeError(`Invalid referrerPolicy: ${n}`)}}function hT(t){let e=(t.get("referrer-policy")||"").split(/[,\s]+/),r="";for(let n of e)n&&cT.has(n)&&(r=n);return r}var ar=Symbol("Request internals"),Ea=t=>typeof t=="object"&&typeof t[ar]=="object",f1=(0,gT.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),co=class t extends Mn{constructor(e,r={}){let n;if(Ea(e)?n=new URL(e.url):(n=new URL(e),e={}),n.username!==""||n.password!=="")throw new TypeError(`${n} is an url with embedded credentials.`);let i=r.method||e.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(i)&&(i=i.toUpperCase()),!Ea(r)&&"data"in r&&f1(),(r.body!=null||Ea(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let o=r.body?r.body:Ea(e)&&e.body!==null?ds(e):null;super(o,{size:r.size||e.size||0});let a=new rn(r.headers||e.headers||{});if(o!==null&&!a.has("Content-Type")){let d=El(o,this);d&&a.set("Content-Type",d)}let u=Ea(e)?e.signal:null;if("signal"in r&&(u=r.signal),u!=null&&!QR(u))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let c=r.referrer==null?e.referrer:r.referrer;if(c==="")c="no-referrer";else if(c){let d=new URL(c);c=/^about:(\/\/)?client$/.test(d)?"client":d}else c=void 0;this[ar]={method:i,redirect:r.redirect||e.redirect||"follow",headers:a,parsedURL:n,signal:u,referrer:c},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1,this.referrerPolicy=r.referrerPolicy||e.referrerPolicy||""}get method(){return this[ar].method}get url(){return(0,pT.format)(this[ar].parsedURL)}get headers(){return this[ar].headers}get redirect(){return this[ar].redirect}get signal(){return this[ar].signal}get referrer(){if(this[ar].referrer==="no-referrer")return"";if(this[ar].referrer==="client")return"about:client";if(this[ar].referrer)return this[ar].referrer.toString()}get referrerPolicy(){return this[ar].referrerPolicy}set referrerPolicy(e){this[ar].referrerPolicy=dT(e)}clone(){return new t(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(co.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var mT=t=>{let{parsedURL:e}=t[ar],r=new rn(t[ar].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){let u=nT(t);typeof u=="number"&&!Number.isNaN(u)&&(n=String(u))}n&&r.set("Content-Length",n),t.referrerPolicy===""&&(t.referrerPolicy=lT),t.referrer&&t.referrer!=="no-referrer"?t[ar].referrer=fT(t):t[ar].referrer="no-referrer",t[ar].referrer instanceof URL&&r.set("Referer",t.referrer),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip, deflate, br");let{agent:i}=t;typeof i=="function"&&(i=i(e));let o=sT(e),a={path:e.pathname+o,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i};return{parsedURL:e,options:a}};var ql=class extends ei{constructor(e,r="aborted"){super(e,r)}};Sl();_m();var h1=new Set(["data:","http:","https:"]);async function xl(t,e){return new Promise((r,n)=>{let i=new co(t,e),{parsedURL:o,options:a}=mT(i);if(!h1.has(o.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${o.protocol.replace(/:$/,"")}" is not supported.`);if(o.protocol==="data:"){let h=$R(i.url),S=new mn(h,{headers:{"Content-Type":h.typeFull}});r(S);return}let u=(o.protocol==="https:"?vT.default:yT.default).request,{signal:c}=i,d=null,f=()=>{let h=new ql("The operation was aborted.");n(h),i.body&&i.body instanceof nn.default.Readable&&i.body.destroy(h),!(!d||!d.body)&&d.body.emit("error",h)};if(c&&c.aborted){f();return}let y=()=>{f(),m()},g=u(o.toString(),a);c&&c.addEventListener("abort",y);let m=()=>{g.abort(),c&&c.removeEventListener("abort",y)};g.on("error",h=>{n(new zr(`request to ${i.url} failed, reason: ${h.message}`,"system",h)),m()}),p1(g,h=>{d&&d.body&&d.body.destroy(h)}),process.version<"v14"&&g.on("socket",h=>{let S;h.prependListener("end",()=>{S=h._eventsCount}),h.prependListener("close",R=>{if(d&&S<h._eventsCount&&!R){let D=new Error("Premature close");D.code="ERR_STREAM_PREMATURE_CLOSE",d.body.emit("error",D)}})}),g.on("response",h=>{g.setTimeout(0);let S=oT(h.rawHeaders);if(kl(h.statusCode)){let N=S.get("Location"),ee=null;try{ee=N===null?null:new URL(N,i.url)}catch{if(i.redirect!=="manual"){n(new zr(`uri requested responds with an invalid redirect URL: ${N}`,"invalid-redirect")),m();return}}switch(i.redirect){case"error":n(new zr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),m();return;case"manual":break;case"follow":{if(ee===null)break;if(i.counter>=i.follow){n(new zr(`maximum redirect reached at: ${i.url}`,"max-redirect")),m();return}let fe={headers:new rn(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:ds(i),signal:i.signal,size:i.size,referrer:i.referrer,referrerPolicy:i.referrerPolicy};if(!XR(i.url,ee)||!YR(i.url,ee))for(let de of["authorization","www-authenticate","cookie","cookie2"])fe.headers.delete(de);if(h.statusCode!==303&&i.body&&e.body instanceof nn.default.Readable){n(new zr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),m();return}(h.statusCode===303||(h.statusCode===301||h.statusCode===302)&&i.method==="POST")&&(fe.method="GET",fe.body=void 0,fe.headers.delete("content-length"));let re=hT(S);re&&(fe.referrerPolicy=re),r(xl(new co(ee,fe))),m();return}default:return n(new TypeError(`Redirect option '${i.redirect}' is not a valid value of RequestRedirect`))}}c&&h.once("end",()=>{c.removeEventListener("abort",y)});let R=(0,nn.pipeline)(h,new nn.PassThrough,N=>{N&&n(N)});process.version<"v12.10"&&h.on("aborted",y);let D={url:i.url,status:h.statusCode,statusText:h.statusMessage,headers:S,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},I=S.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||I===null||h.statusCode===204||h.statusCode===304){d=new mn(R,D),r(d);return}let A={flush:lo.default.Z_SYNC_FLUSH,finishFlush:lo.default.Z_SYNC_FLUSH};if(I==="gzip"||I==="x-gzip"){R=(0,nn.pipeline)(R,lo.default.createGunzip(A),N=>{N&&n(N)}),d=new mn(R,D),r(d);return}if(I==="deflate"||I==="x-deflate"){let N=(0,nn.pipeline)(h,new nn.PassThrough,ee=>{ee&&n(ee)});N.once("data",ee=>{(ee[0]&15)===8?R=(0,nn.pipeline)(R,lo.default.createInflate(),fe=>{fe&&n(fe)}):R=(0,nn.pipeline)(R,lo.default.createInflateRaw(),fe=>{fe&&n(fe)}),d=new mn(R,D),r(d)}),N.once("end",()=>{d||(d=new mn(R,D),r(d))});return}if(I==="br"){R=(0,nn.pipeline)(R,lo.default.createBrotliDecompress(),N=>{N&&n(N)}),d=new mn(R,D),r(d);return}d=new mn(R,D),r(d)}),iT(g,i).catch(n)})}function p1(t,e){let r=Pa.Buffer.from(`0\r
\r
`),n=!1,i=!1,o;t.on("response",a=>{let{headers:u}=a;n=u["transfer-encoding"]==="chunked"&&!u["content-length"]}),t.on("socket",a=>{let u=()=>{if(n&&!i){let d=new Error("Premature close");d.code="ERR_STREAM_PREMATURE_CLOSE",e(d)}},c=d=>{i=Pa.Buffer.compare(d.slice(-5),r)===0,!i&&o&&(i=Pa.Buffer.compare(o.slice(-3),r.slice(0,3))===0&&Pa.Buffer.compare(d.slice(-2),r.slice(3))===0),o=d};a.prependListener("close",u),a.on("data",c),t.on("close",()=>{a.removeListener("close",u),a.removeListener("data",c)})})}var fk=gr(dk(),1);console.log("[installer.js] Loading...");var jj={macos:{zip:"https://github.com/InlineXML/binary/releases/download/v1.0.17/InlineXML-osx-x64.zip"},windows:{zip:"https://github.com/InlineXML/binary/releases/download/v1.0.17/InlineXML-win-x64.zip"},ubuntu:{zip:"https://github.com/InlineXML/binary/releases/download/v1.0.17/InlineXML-linux-x64.zip"}},ji=qs.join(hd.homedir(),".inlinexml-bin"),hk=()=>{let t=hd.platform();if(t==="darwin")return"macos";if(t==="win32")return"windows";if(t==="linux")return"ubuntu";throw new Error(`Unsupported platform: ${t}`)},pd=()=>{let e=hk()==="windows"?"InlineXML.exe":"InlineXML";return qs.join(ji,e)},pk=()=>{let t=pd(),e=Wn.existsSync(t);return console.log(`[INSTALLER] Binary path: ${t}`),console.log(`[INSTALLER] Binary exists: ${e}`),!e},gk=async()=>{let t=hk(),{zip:e}=jj[t];console.log(`[INSTALLER] Platform detected: ${t}`),console.log(`[INSTALLER] Install directory: ${ji}`),Wn.existsSync(ji)&&(console.log(`[INSTALLER] Removing existing directory: ${ji}`),Wn.rmSync(ji,{recursive:!0,force:!0})),Wn.mkdirSync(ji,{recursive:!0}),console.log(`[INSTALLER] Downloading from ${e}...`);let r=await xl(e);if(!r.ok)throw new Error(`Download failed: ${r.statusText}`);console.log("[INSTALLER] Download successful, extracting...");let n=Buffer.from(await r.arrayBuffer()),i=await fk.Open.buffer(n),o=0;for(let u of i.files){if(u.type==="Directory")continue;let c=qs.basename(u.path),d=qs.join(ji,c),f=await u.buffer();Wn.writeFileSync(d,f,{mode:493}),o++,console.log(`[INSTALLER] Extracted: ${c}`)}let a=pd();if(!Wn.existsSync(a))throw new Error(`Installation failed: Executable not found in the extracted files. Extracted ${o} files total.`);return console.log(`[INSTALLER] Installed ${o} files to ${ji}`),console.log(`[INSTALLER] Final binary: ${a}`),a};console.log("[executor.ts] Loading...");var eu=class t{static IS_DEBUG=!1;static LOCAL_REPO_PATH="C:/Users/John/Desktop/Projects/LanguageServer/InlineXML/InlineXML";static PROJECT_FILE="InlineXML.csproj";getExecutionDetails(e){let r=e.replace(/\\/g,"/");if(t.IS_DEBUG){let o=t.LOCAL_REPO_PATH.replace(/\\/g,"/");return{command:"dotnet",args:["run","--project",`${o}/${t.PROJECT_FILE}`,"--","--lsp","--workspace",r],cwd:o}}let n=pd(),i=(0,mk.dirname)(n);return{command:n,args:["--lsp","--workspace",r],cwd:i}}};var yk=gr(require("child_process"),1),gd=class t{executor;client=null;outputChannel;childProcess;responseStream;isReady=!1;static DEBUG_MODE=!1;constructor(){this.executor=new eu,this.outputChannel=tu.window.createOutputChannel("InlineXML LSP")}normalizeUri(e){try{let r=hm.parse(e),n=r.fsPath.toLowerCase(),i=tu.workspace.textDocuments.find(o=>o.uri.fsPath.toLowerCase()===n);return i?i.uri.toString():hm.file(r.fsPath).toString()}catch{return e}}async listen(){if(this.client)return;t.DEBUG_MODE&&(this.outputChannel.show(!0),this.outputChannel.appendLine("[SYSTEM] --- STARTING LSP ORCHESTRA ---"));let e=tu.workspace.workspaceFolders?.[0]?.uri.fsPath;if(!e)return;let r=this.executor.getExecutionDetails(e),n=async()=>{this.childProcess=yk.spawn(r.command,r.args,{cwd:r.cwd,shell:!0,stdio:["pipe","pipe","pipe"]}),this.childProcess.stderr?.on("data",u=>{t.DEBUG_MODE&&this.outputChannel.appendLine(`[C# STDERR]: ${u.toString().trim()}`)});let o=new Fy.PassThrough;this.responseStream=new Fy.PassThrough,o.pipe(this.childProcess.stdin);let a=Buffer.alloc(0);return this.childProcess.stdout.on("data",u=>{for(a=Buffer.concat([a,u]);;){let c=a.toString("utf8"),f=c.indexOf("Content-Length:");if(f===-1)break;if(f>0){a=a.slice(f);continue}let y=c.match(/Content-Length: (\d+)\r\n\r\n/);if(!y)break;let g=parseInt(y[1]),m=y[0].length;if(a.length<m+g)break;let h=a.slice(m,m+g).toString("utf8");try{let S=JSON.parse(h);S.method==="textDocument/publishDiagnostics"&&S.params?.uri&&(S.params.uri=this.normalizeUri(S.params.uri));let R=JSON.stringify(S),D=`Content-Length: ${Buffer.byteLength(R,"utf8")}\r
\r
`;this.responseStream?.write(D+R)}catch(S){t.DEBUG_MODE&&this.outputChannel.appendLine(`[JS ERROR] JSON Parse failure: ${S.message}`)}a=a.slice(m+g)}}),{writer:o,reader:this.responseStream}},i={documentSelector:[{scheme:"file",language:"inlinexml"},{scheme:"file",language:"csharp"},{scheme:"file",pattern:"**/*.xcs"}],diagnosticCollectionName:"inlinexml",revealOutputChannelOn:md.RevealOutputChannelOn.Never,outputChannel:this.outputChannel};this.client=new md.LanguageClient("inlinexmlLSP","InlineXML",n,i),await this.client.start(),this.isReady=!0}async disconnect(){this.isReady=!1,this.client&&(await this.client.stop(),this.client=null),this.childProcess&&this.childProcess.kill()}};var _o=null;async function $j(t){console.log("!!! InlineXML: Activate function triggered !!!");let e=yd.window.createOutputChannel("InlineXML Boot");e.show(!0),e.appendLine("\u{1F680} [System] Activation sequence initiated...");try{pk()&&await gk(),_o=new gd,await _o.listen();let r=yd.commands.registerCommand("inlinexml.restartLSP",async()=>{_o&&(await _o.disconnect(),await _o.listen())});t.subscriptions.push(r)}catch(r){console.error("Critical Startup Error:",r),e.appendLine(`\u274C Error: ${r.message}`)}}async function Wj(){_o&&await _o.disconnect()}0&&(module.exports={activate,deactivate});
/*! Bundled license information:

web-streams-polyfill/dist/ponyfill.es2018.js:
  (**
   * @license
   * web-streams-polyfill v3.3.3
   * Copyright 2024 Mattias Buelens, Diwank Singh Tomer and other contributors.
   * This code is released under the MIT license.
   * SPDX-License-Identifier: MIT
   *)

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
//# sourceMappingURL=extension.cjs.map
