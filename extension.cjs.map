{
  "version": 3,
  "sources": ["node_modules/vscode-languageclient/lib/common/utils/is.js", "node_modules/vscode-jsonrpc/lib/common/is.js", "node_modules/vscode-jsonrpc/lib/common/messages.js", "node_modules/vscode-jsonrpc/lib/common/linkedMap.js", "node_modules/vscode-jsonrpc/lib/common/disposable.js", "node_modules/vscode-jsonrpc/lib/common/ral.js", "node_modules/vscode-jsonrpc/lib/common/events.js", "node_modules/vscode-jsonrpc/lib/common/cancellation.js", "node_modules/vscode-jsonrpc/lib/common/sharedArrayCancellation.js", "node_modules/vscode-jsonrpc/lib/common/semaphore.js", "node_modules/vscode-jsonrpc/lib/common/messageReader.js", "node_modules/vscode-jsonrpc/lib/common/messageWriter.js", "node_modules/vscode-jsonrpc/lib/common/messageBuffer.js", "node_modules/vscode-jsonrpc/lib/common/connection.js", "node_modules/vscode-jsonrpc/lib/common/api.js", "node_modules/vscode-jsonrpc/lib/node/ril.js", "node_modules/vscode-jsonrpc/lib/node/main.js", "node_modules/vscode-jsonrpc/node.js", "node_modules/vscode-languageserver-types/lib/umd/main.js", "node_modules/vscode-languageserver-protocol/lib/common/messages.js", "node_modules/vscode-languageserver-protocol/lib/common/utils/is.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.implementation.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.typeDefinition.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.workspaceFolder.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.configuration.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.colorProvider.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.foldingRange.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.declaration.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.selectionRange.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.progress.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.callHierarchy.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.semanticTokens.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.showDocument.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.linkedEditingRange.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.fileOperations.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.moniker.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.typeHierarchy.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineValue.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.inlayHint.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.diagnostic.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.notebook.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.inlineCompletion.js", "node_modules/vscode-languageserver-protocol/lib/common/protocol.js", "node_modules/vscode-languageserver-protocol/lib/common/connection.js", "node_modules/vscode-languageserver-protocol/lib/common/api.js", "node_modules/vscode-languageserver-protocol/lib/node/main.js", "node_modules/vscode-languageclient/lib/common/utils/async.js", "node_modules/vscode-languageclient/lib/common/protocolCompletionItem.js", "node_modules/vscode-languageclient/lib/common/protocolCodeLens.js", "node_modules/vscode-languageclient/lib/common/protocolDocumentLink.js", "node_modules/vscode-languageclient/lib/common/protocolCodeAction.js", "node_modules/vscode-languageclient/lib/common/protocolDiagnostic.js", "node_modules/vscode-languageclient/lib/common/protocolCallHierarchyItem.js", "node_modules/vscode-languageclient/lib/common/protocolTypeHierarchyItem.js", "node_modules/vscode-languageclient/lib/common/protocolWorkspaceSymbol.js", "node_modules/vscode-languageclient/lib/common/protocolInlayHint.js", "node_modules/vscode-languageclient/lib/common/codeConverter.js", "node_modules/vscode-languageclient/lib/common/protocolConverter.js", "node_modules/vscode-languageclient/lib/common/utils/uuid.js", "node_modules/vscode-languageclient/lib/common/progressPart.js", "node_modules/vscode-languageclient/lib/common/features.js", "node_modules/minimatch/lib/path.js", "node_modules/balanced-match/index.js", "node_modules/brace-expansion/index.js", "node_modules/minimatch/minimatch.js", "node_modules/vscode-languageclient/lib/common/diagnostic.js", "node_modules/vscode-languageclient/lib/common/notebook.js", "node_modules/vscode-languageclient/lib/common/configuration.js", "node_modules/vscode-languageclient/lib/common/textSynchronization.js", "node_modules/vscode-languageclient/lib/common/completion.js", "node_modules/vscode-languageclient/lib/common/hover.js", "node_modules/vscode-languageclient/lib/common/definition.js", "node_modules/vscode-languageclient/lib/common/signatureHelp.js", "node_modules/vscode-languageclient/lib/common/documentHighlight.js", "node_modules/vscode-languageclient/lib/common/documentSymbol.js", "node_modules/vscode-languageclient/lib/common/workspaceSymbol.js", "node_modules/vscode-languageclient/lib/common/reference.js", "node_modules/vscode-languageclient/lib/common/codeAction.js", "node_modules/vscode-languageclient/lib/common/codeLens.js", "node_modules/vscode-languageclient/lib/common/formatting.js", "node_modules/vscode-languageclient/lib/common/rename.js", "node_modules/vscode-languageclient/lib/common/documentLink.js", "node_modules/vscode-languageclient/lib/common/executeCommand.js", "node_modules/vscode-languageclient/lib/common/fileSystemWatcher.js", "node_modules/vscode-languageclient/lib/common/colorProvider.js", "node_modules/vscode-languageclient/lib/common/implementation.js", "node_modules/vscode-languageclient/lib/common/typeDefinition.js", "node_modules/vscode-languageclient/lib/common/workspaceFolder.js", "node_modules/vscode-languageclient/lib/common/foldingRange.js", "node_modules/vscode-languageclient/lib/common/declaration.js", "node_modules/vscode-languageclient/lib/common/selectionRange.js", "node_modules/vscode-languageclient/lib/common/progress.js", "node_modules/vscode-languageclient/lib/common/callHierarchy.js", "node_modules/vscode-languageclient/lib/common/semanticTokens.js", "node_modules/vscode-languageclient/lib/common/fileOperations.js", "node_modules/vscode-languageclient/lib/common/linkedEditingRange.js", "node_modules/vscode-languageclient/lib/common/typeHierarchy.js", "node_modules/vscode-languageclient/lib/common/inlineValue.js", "node_modules/vscode-languageclient/lib/common/inlayHint.js", "node_modules/vscode-languageclient/lib/common/inlineCompletion.js", "node_modules/vscode-languageclient/lib/common/client.js", "node_modules/vscode-languageclient/lib/node/processes.js", "node_modules/vscode-languageserver-protocol/node.js", "node_modules/semver/internal/debug.js", "node_modules/semver/internal/constants.js", "node_modules/semver/internal/re.js", "node_modules/semver/internal/parse-options.js", "node_modules/semver/internal/identifiers.js", "node_modules/semver/classes/semver.js", "node_modules/semver/functions/parse.js", "node_modules/semver/internal/lrucache.js", "node_modules/semver/functions/compare.js", "node_modules/semver/functions/eq.js", "node_modules/semver/functions/neq.js", "node_modules/semver/functions/gt.js", "node_modules/semver/functions/gte.js", "node_modules/semver/functions/lt.js", "node_modules/semver/functions/lte.js", "node_modules/semver/functions/cmp.js", "node_modules/semver/classes/comparator.js", "node_modules/semver/classes/range.js", "node_modules/semver/functions/satisfies.js", "node_modules/vscode-languageclient/lib/common/api.js", "node_modules/vscode-languageclient/lib/node/main.js", "node_modules/vscode-languageclient/node.js", "node_modules/web-streams-polyfill/src/utils.ts", "node_modules/web-streams-polyfill/src/lib/helpers/miscellaneous.ts", "node_modules/web-streams-polyfill/src/lib/helpers/webidl.ts", "node_modules/web-streams-polyfill/src/lib/simple-queue.ts", "node_modules/web-streams-polyfill/src/lib/abstract-ops/internal-methods.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/generic-reader.ts", "node_modules/web-streams-polyfill/src/stub/number-isfinite.ts", "node_modules/web-streams-polyfill/src/stub/math-trunc.ts", "node_modules/web-streams-polyfill/src/lib/validators/basic.ts", "node_modules/web-streams-polyfill/src/lib/validators/readable-stream.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/default-reader.ts", "node_modules/web-streams-polyfill/src/target/es2018/stub/async-iterator-prototype.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/async-iterator.ts", "node_modules/web-streams-polyfill/src/stub/number-isnan.ts", "node_modules/web-streams-polyfill/src/lib/abstract-ops/ecmascript.ts", "node_modules/web-streams-polyfill/src/lib/abstract-ops/miscellaneous.ts", "node_modules/web-streams-polyfill/src/lib/abstract-ops/queue-with-sizes.ts", "node_modules/web-streams-polyfill/src/lib/helpers/array-buffer-view.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/byte-stream-controller.ts", "node_modules/web-streams-polyfill/src/lib/validators/reader-options.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/byob-reader.ts", "node_modules/web-streams-polyfill/src/lib/abstract-ops/queuing-strategy.ts", "node_modules/web-streams-polyfill/src/lib/validators/queuing-strategy.ts", "node_modules/web-streams-polyfill/src/lib/validators/underlying-sink.ts", "node_modules/web-streams-polyfill/src/lib/validators/writable-stream.ts", "node_modules/web-streams-polyfill/src/lib/abort-signal.ts", "node_modules/web-streams-polyfill/src/lib/writable-stream.ts", "node_modules/web-streams-polyfill/src/globals.ts", "node_modules/web-streams-polyfill/src/stub/dom-exception.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/pipe.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/default-controller.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/tee.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/readable-stream-like.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream/from.ts", "node_modules/web-streams-polyfill/src/lib/validators/underlying-source.ts", "node_modules/web-streams-polyfill/src/lib/validators/iterator-options.ts", "node_modules/web-streams-polyfill/src/lib/validators/pipe-options.ts", "node_modules/web-streams-polyfill/src/lib/validators/readable-writable-pair.ts", "node_modules/web-streams-polyfill/src/lib/readable-stream.ts", "node_modules/web-streams-polyfill/src/lib/validators/queuing-strategy-init.ts", "node_modules/web-streams-polyfill/src/lib/byte-length-queuing-strategy.ts", "node_modules/web-streams-polyfill/src/lib/count-queuing-strategy.ts", "node_modules/web-streams-polyfill/src/lib/validators/transformer.ts", "node_modules/web-streams-polyfill/src/lib/transform-stream.ts", "node_modules/fetch-blob/streams.cjs", "node_modules/fetch-blob/index.js", "node_modules/fetch-blob/file.js", "node_modules/formdata-polyfill/esm.min.js", "node_modules/node-domexception/index.js", "node_modules/fetch-blob/from.js", "node_modules/node-fetch/src/utils/multipart-parser.js", "node_modules/unzipper/lib/PullStream.js", "node_modules/unzipper/lib/NoopStream.js", "node_modules/unzipper/lib/BufferStream.js", "node_modules/unzipper/lib/parseBuffer.js", "node_modules/unzipper/lib/parseExtraField.js", "node_modules/unzipper/lib/parseDateTime.js", "node_modules/unzipper/lib/parse.js", "node_modules/process-nextick-args/index.js", "node_modules/isarray/index.js", "node_modules/readable-stream/lib/internal/streams/stream.js", "node_modules/safe-buffer/index.js", "node_modules/core-util-is/lib/util.js", "node_modules/inherits/inherits_browser.js", "node_modules/inherits/inherits.js", "node_modules/readable-stream/lib/internal/streams/BufferList.js", "node_modules/readable-stream/lib/internal/streams/destroy.js", "node_modules/util-deprecate/node.js", "node_modules/readable-stream/lib/_stream_writable.js", "node_modules/readable-stream/lib/_stream_duplex.js", "node_modules/string_decoder/lib/string_decoder.js", "node_modules/readable-stream/lib/_stream_readable.js", "node_modules/readable-stream/lib/_stream_transform.js", "node_modules/readable-stream/lib/_stream_passthrough.js", "node_modules/readable-stream/readable.js", "node_modules/duplexer2/index.js", "node_modules/unzipper/lib/parseOne.js", "node_modules/universalify/index.js", "node_modules/graceful-fs/polyfills.js", "node_modules/graceful-fs/legacy-streams.js", "node_modules/graceful-fs/clone.js", "node_modules/graceful-fs/graceful-fs.js", "node_modules/fs-extra/lib/fs/index.js", "node_modules/fs-extra/lib/mkdirs/utils.js", "node_modules/fs-extra/lib/mkdirs/make-dir.js", "node_modules/fs-extra/lib/mkdirs/index.js", "node_modules/fs-extra/lib/path-exists/index.js", "node_modules/fs-extra/lib/util/utimes.js", "node_modules/fs-extra/lib/util/stat.js", "node_modules/fs-extra/lib/util/async.js", "node_modules/fs-extra/lib/copy/copy.js", "node_modules/fs-extra/lib/copy/copy-sync.js", "node_modules/fs-extra/lib/copy/index.js", "node_modules/fs-extra/lib/remove/index.js", "node_modules/fs-extra/lib/empty/index.js", "node_modules/fs-extra/lib/ensure/file.js", "node_modules/fs-extra/lib/ensure/link.js", "node_modules/fs-extra/lib/ensure/symlink-paths.js", "node_modules/fs-extra/lib/ensure/symlink-type.js", "node_modules/fs-extra/lib/ensure/symlink.js", "node_modules/fs-extra/lib/ensure/index.js", "node_modules/jsonfile/utils.js", "node_modules/jsonfile/index.js", "node_modules/fs-extra/lib/json/jsonfile.js", "node_modules/fs-extra/lib/output-file/index.js", "node_modules/fs-extra/lib/json/output-json.js", "node_modules/fs-extra/lib/json/output-json-sync.js", "node_modules/fs-extra/lib/json/index.js", "node_modules/fs-extra/lib/move/move.js", "node_modules/fs-extra/lib/move/move-sync.js", "node_modules/fs-extra/lib/move/index.js", "node_modules/fs-extra/lib/index.js", "node_modules/unzipper/lib/extract.js", "node_modules/node-int64/Int64.js", "node_modules/unzipper/lib/Decrypt.js", "node_modules/unzipper/lib/Open/unzip.js", "node_modules/bluebird/js/release/es5.js", "node_modules/bluebird/js/release/util.js", "node_modules/bluebird/js/release/schedule.js", "node_modules/bluebird/js/release/queue.js", "node_modules/bluebird/js/release/async.js", "node_modules/bluebird/js/release/errors.js", "node_modules/bluebird/js/release/thenables.js", "node_modules/bluebird/js/release/promise_array.js", "node_modules/bluebird/js/release/context.js", "node_modules/bluebird/js/release/debuggability.js", "node_modules/bluebird/js/release/catch_filter.js", "node_modules/bluebird/js/release/finally.js", "node_modules/bluebird/js/release/nodeback.js", "node_modules/bluebird/js/release/method.js", "node_modules/bluebird/js/release/bind.js", "node_modules/bluebird/js/release/cancel.js", "node_modules/bluebird/js/release/direct_resolve.js", "node_modules/bluebird/js/release/synchronous_inspection.js", "node_modules/bluebird/js/release/join.js", "node_modules/bluebird/js/release/call_get.js", "node_modules/bluebird/js/release/generators.js", "node_modules/bluebird/js/release/map.js", "node_modules/bluebird/js/release/nodeify.js", "node_modules/bluebird/js/release/promisify.js", "node_modules/bluebird/js/release/props.js", "node_modules/bluebird/js/release/race.js", "node_modules/bluebird/js/release/reduce.js", "node_modules/bluebird/js/release/settle.js", "node_modules/bluebird/js/release/some.js", "node_modules/bluebird/js/release/timers.js", "node_modules/bluebird/js/release/using.js", "node_modules/bluebird/js/release/any.js", "node_modules/bluebird/js/release/each.js", "node_modules/bluebird/js/release/filter.js", "node_modules/bluebird/js/release/promise.js", "node_modules/bluebird/js/release/bluebird.js", "node_modules/unzipper/lib/Open/directory.js", "node_modules/unzipper/lib/Open/index.js", "node_modules/unzipper/unzip.js", "app/index.ts", "app/server.ts", "node_modules/vscode-uri/lib/esm/webpack:/LIB/node_modules/path-browserify/index.js", "node_modules/vscode-uri/lib/esm/webpack:/LIB/webpack/bootstrap", "node_modules/vscode-uri/lib/esm/webpack:/LIB/webpack/runtime/define property getters", "node_modules/vscode-uri/lib/esm/webpack:/LIB/webpack/runtime/hasOwnProperty shorthand", "node_modules/vscode-uri/lib/esm/webpack:/LIB/webpack/runtime/make namespace object", "node_modules/vscode-uri/lib/esm/webpack:/LIB/src/platform.ts", "node_modules/vscode-uri/lib/esm/webpack:/LIB/src/uri.ts", "node_modules/vscode-uri/lib/esm/webpack:/LIB/src/utils.ts", "app/executor.ts", "app/installation/installer.ts", "node_modules/node-fetch/src/index.js", "node_modules/data-uri-to-buffer/src/index.ts", "node_modules/node-fetch/src/body.js", "node_modules/node-fetch/src/errors/base.js", "node_modules/node-fetch/src/errors/fetch-error.js", "node_modules/node-fetch/src/utils/is.js", "node_modules/node-fetch/src/headers.js", "node_modules/node-fetch/src/utils/is-redirect.js", "node_modules/node-fetch/src/response.js", "node_modules/node-fetch/src/request.js", "node_modules/node-fetch/src/utils/get-search.js", "node_modules/node-fetch/src/utils/referrer.js", "node_modules/node-fetch/src/errors/abort-error.js"],
  "sourcesContent": ["\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.asPromise = exports.thenable = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction thenable(value) {\n    return value && func(value.then);\n}\nexports.thenable = thenable;\nfunction asPromise(value) {\n    if (value instanceof Promise) {\n        return value;\n    }\n    else if (thenable(value)) {\n        return new Promise((resolve, reject) => {\n            value.then((resolved) => resolve(resolved), (error) => reject(error));\n        });\n    }\n    else {\n        return Promise.resolve(value);\n    }\n}\nexports.asPromise = asPromise;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Message = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType = exports.RequestType0 = exports.AbstractMessageSignature = exports.ParameterStructures = exports.ResponseError = exports.ErrorCodes = void 0;\nconst is = require(\"./is\");\n/**\n * Predefined error codes.\n */\nvar ErrorCodes;\n(function (ErrorCodes) {\n    // Defined by JSON RPC\n    ErrorCodes.ParseError = -32700;\n    ErrorCodes.InvalidRequest = -32600;\n    ErrorCodes.MethodNotFound = -32601;\n    ErrorCodes.InvalidParams = -32602;\n    ErrorCodes.InternalError = -32603;\n    /**\n     * This is the start range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code. No application error codes should\n     * be defined between the start and end range. For backwards\n     * compatibility the `ServerNotInitialized` and the `UnknownErrorCode`\n     * are left in the range.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeStart = -32099;\n    /** @deprecated use  jsonrpcReservedErrorRangeStart */\n    ErrorCodes.serverErrorStart = -32099;\n    /**\n     * An error occurred when write a message to the transport layer.\n     */\n    ErrorCodes.MessageWriteError = -32099;\n    /**\n     * An error occurred when reading a message from the transport layer.\n     */\n    ErrorCodes.MessageReadError = -32098;\n    /**\n     * The connection got disposed or lost and all pending responses got\n     * rejected.\n     */\n    ErrorCodes.PendingResponseRejected = -32097;\n    /**\n     * The connection is inactive and a use of it failed.\n     */\n    ErrorCodes.ConnectionInactive = -32096;\n    /**\n     * Error code indicating that a server received a notification or\n     * request before the server has received the `initialize` request.\n     */\n    ErrorCodes.ServerNotInitialized = -32002;\n    ErrorCodes.UnknownErrorCode = -32001;\n    /**\n     * This is the end range of JSON RPC reserved error codes.\n     * It doesn't denote a real error code.\n     *\n     * @since 3.16.0\n    */\n    ErrorCodes.jsonrpcReservedErrorRangeEnd = -32000;\n    /** @deprecated use  jsonrpcReservedErrorRangeEnd */\n    ErrorCodes.serverErrorEnd = -32000;\n})(ErrorCodes || (exports.ErrorCodes = ErrorCodes = {}));\n/**\n * An error object return in a response in case a request\n * has failed.\n */\nclass ResponseError extends Error {\n    constructor(code, message, data) {\n        super(message);\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\n        this.data = data;\n        Object.setPrototypeOf(this, ResponseError.prototype);\n    }\n    toJson() {\n        const result = {\n            code: this.code,\n            message: this.message\n        };\n        if (this.data !== undefined) {\n            result.data = this.data;\n        }\n        return result;\n    }\n}\nexports.ResponseError = ResponseError;\nclass ParameterStructures {\n    constructor(kind) {\n        this.kind = kind;\n    }\n    static is(value) {\n        return value === ParameterStructures.auto || value === ParameterStructures.byName || value === ParameterStructures.byPosition;\n    }\n    toString() {\n        return this.kind;\n    }\n}\nexports.ParameterStructures = ParameterStructures;\n/**\n * The parameter structure is automatically inferred on the number of parameters\n * and the parameter type in case of a single param.\n */\nParameterStructures.auto = new ParameterStructures('auto');\n/**\n * Forces `byPosition` parameter structure. This is useful if you have a single\n * parameter which has a literal type.\n */\nParameterStructures.byPosition = new ParameterStructures('byPosition');\n/**\n * Forces `byName` parameter structure. This is only useful when having a single\n * parameter. The library will report errors if used with a different number of\n * parameters.\n */\nParameterStructures.byName = new ParameterStructures('byName');\n/**\n * An abstract implementation of a MessageType.\n */\nclass AbstractMessageSignature {\n    constructor(method, numberOfParams) {\n        this.method = method;\n        this.numberOfParams = numberOfParams;\n    }\n    get parameterStructures() {\n        return ParameterStructures.auto;\n    }\n}\nexports.AbstractMessageSignature = AbstractMessageSignature;\n/**\n * Classes to type request response pairs\n */\nclass RequestType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.RequestType0 = RequestType0;\nclass RequestType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType = RequestType;\nclass RequestType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.RequestType1 = RequestType1;\nclass RequestType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.RequestType2 = RequestType2;\nclass RequestType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.RequestType3 = RequestType3;\nclass RequestType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.RequestType4 = RequestType4;\nclass RequestType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.RequestType5 = RequestType5;\nclass RequestType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.RequestType6 = RequestType6;\nclass RequestType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.RequestType7 = RequestType7;\nclass RequestType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.RequestType8 = RequestType8;\nclass RequestType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.RequestType9 = RequestType9;\nclass NotificationType extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType = NotificationType;\nclass NotificationType0 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 0);\n    }\n}\nexports.NotificationType0 = NotificationType0;\nclass NotificationType1 extends AbstractMessageSignature {\n    constructor(method, _parameterStructures = ParameterStructures.auto) {\n        super(method, 1);\n        this._parameterStructures = _parameterStructures;\n    }\n    get parameterStructures() {\n        return this._parameterStructures;\n    }\n}\nexports.NotificationType1 = NotificationType1;\nclass NotificationType2 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 2);\n    }\n}\nexports.NotificationType2 = NotificationType2;\nclass NotificationType3 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 3);\n    }\n}\nexports.NotificationType3 = NotificationType3;\nclass NotificationType4 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 4);\n    }\n}\nexports.NotificationType4 = NotificationType4;\nclass NotificationType5 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 5);\n    }\n}\nexports.NotificationType5 = NotificationType5;\nclass NotificationType6 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 6);\n    }\n}\nexports.NotificationType6 = NotificationType6;\nclass NotificationType7 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 7);\n    }\n}\nexports.NotificationType7 = NotificationType7;\nclass NotificationType8 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 8);\n    }\n}\nexports.NotificationType8 = NotificationType8;\nclass NotificationType9 extends AbstractMessageSignature {\n    constructor(method) {\n        super(method, 9);\n    }\n}\nexports.NotificationType9 = NotificationType9;\nvar Message;\n(function (Message) {\n    /**\n     * Tests if the given message is a request message\n     */\n    function isRequest(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\n    }\n    Message.isRequest = isRequest;\n    /**\n     * Tests if the given message is a notification message\n     */\n    function isNotification(message) {\n        const candidate = message;\n        return candidate && is.string(candidate.method) && message.id === void 0;\n    }\n    Message.isNotification = isNotification;\n    /**\n     * Tests if the given message is a response message\n     */\n    function isResponse(message) {\n        const candidate = message;\n        return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\n    }\n    Message.isResponse = isResponse;\n})(Message || (exports.Message = Message = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = exports.LinkedMap = exports.Touch = void 0;\nvar Touch;\n(function (Touch) {\n    Touch.None = 0;\n    Touch.First = 1;\n    Touch.AsOld = Touch.First;\n    Touch.Last = 2;\n    Touch.AsNew = Touch.Last;\n})(Touch || (exports.Touch = Touch = {}));\nclass LinkedMap {\n    constructor() {\n        this[_a] = 'LinkedMap';\n        this._map = new Map();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state = 0;\n    }\n    clear() {\n        this._map.clear();\n        this._head = undefined;\n        this._tail = undefined;\n        this._size = 0;\n        this._state++;\n    }\n    isEmpty() {\n        return !this._head && !this._tail;\n    }\n    get size() {\n        return this._size;\n    }\n    get first() {\n        return this._head?.value;\n    }\n    get last() {\n        return this._tail?.value;\n    }\n    has(key) {\n        return this._map.has(key);\n    }\n    get(key, touch = Touch.None) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        if (touch !== Touch.None) {\n            this.touch(item, touch);\n        }\n        return item.value;\n    }\n    set(key, value, touch = Touch.None) {\n        let item = this._map.get(key);\n        if (item) {\n            item.value = value;\n            if (touch !== Touch.None) {\n                this.touch(item, touch);\n            }\n        }\n        else {\n            item = { key, value, next: undefined, previous: undefined };\n            switch (touch) {\n                case Touch.None:\n                    this.addItemLast(item);\n                    break;\n                case Touch.First:\n                    this.addItemFirst(item);\n                    break;\n                case Touch.Last:\n                    this.addItemLast(item);\n                    break;\n                default:\n                    this.addItemLast(item);\n                    break;\n            }\n            this._map.set(key, item);\n            this._size++;\n        }\n        return this;\n    }\n    delete(key) {\n        return !!this.remove(key);\n    }\n    remove(key) {\n        const item = this._map.get(key);\n        if (!item) {\n            return undefined;\n        }\n        this._map.delete(key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    shift() {\n        if (!this._head && !this._tail) {\n            return undefined;\n        }\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        const item = this._head;\n        this._map.delete(item.key);\n        this.removeItem(item);\n        this._size--;\n        return item.value;\n    }\n    forEach(callbackfn, thisArg) {\n        const state = this._state;\n        let current = this._head;\n        while (current) {\n            if (thisArg) {\n                callbackfn.bind(thisArg)(current.value, current.key, this);\n            }\n            else {\n                callbackfn(current.value, current.key, this);\n            }\n            if (this._state !== state) {\n                throw new Error(`LinkedMap got modified during iteration.`);\n            }\n            current = current.next;\n        }\n    }\n    keys() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.key, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    values() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: current.value, done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    entries() {\n        const state = this._state;\n        let current = this._head;\n        const iterator = {\n            [Symbol.iterator]: () => {\n                return iterator;\n            },\n            next: () => {\n                if (this._state !== state) {\n                    throw new Error(`LinkedMap got modified during iteration.`);\n                }\n                if (current) {\n                    const result = { value: [current.key, current.value], done: false };\n                    current = current.next;\n                    return result;\n                }\n                else {\n                    return { value: undefined, done: true };\n                }\n            }\n        };\n        return iterator;\n    }\n    [(_a = Symbol.toStringTag, Symbol.iterator)]() {\n        return this.entries();\n    }\n    trimOld(newSize) {\n        if (newSize >= this.size) {\n            return;\n        }\n        if (newSize === 0) {\n            this.clear();\n            return;\n        }\n        let current = this._head;\n        let currentSize = this.size;\n        while (current && currentSize > newSize) {\n            this._map.delete(current.key);\n            current = current.next;\n            currentSize--;\n        }\n        this._head = current;\n        this._size = currentSize;\n        if (current) {\n            current.previous = undefined;\n        }\n        this._state++;\n    }\n    addItemFirst(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._tail = item;\n        }\n        else if (!this._head) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.next = this._head;\n            this._head.previous = item;\n        }\n        this._head = item;\n        this._state++;\n    }\n    addItemLast(item) {\n        // First time Insert\n        if (!this._head && !this._tail) {\n            this._head = item;\n        }\n        else if (!this._tail) {\n            throw new Error('Invalid list');\n        }\n        else {\n            item.previous = this._tail;\n            this._tail.next = item;\n        }\n        this._tail = item;\n        this._state++;\n    }\n    removeItem(item) {\n        if (item === this._head && item === this._tail) {\n            this._head = undefined;\n            this._tail = undefined;\n        }\n        else if (item === this._head) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.next) {\n                throw new Error('Invalid list');\n            }\n            item.next.previous = undefined;\n            this._head = item.next;\n        }\n        else if (item === this._tail) {\n            // This can only happened if size === 1 which is handle\n            // by the case above.\n            if (!item.previous) {\n                throw new Error('Invalid list');\n            }\n            item.previous.next = undefined;\n            this._tail = item.previous;\n        }\n        else {\n            const next = item.next;\n            const previous = item.previous;\n            if (!next || !previous) {\n                throw new Error('Invalid list');\n            }\n            next.previous = previous;\n            previous.next = next;\n        }\n        item.next = undefined;\n        item.previous = undefined;\n        this._state++;\n    }\n    touch(item, touch) {\n        if (!this._head || !this._tail) {\n            throw new Error('Invalid list');\n        }\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\n            return;\n        }\n        if (touch === Touch.First) {\n            if (item === this._head) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item\n            if (item === this._tail) {\n                // previous must be defined since item was not head but is tail\n                // So there are more than on item in the map\n                previous.next = undefined;\n                this._tail = previous;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            // Insert the node at head\n            item.previous = undefined;\n            item.next = this._head;\n            this._head.previous = item;\n            this._head = item;\n            this._state++;\n        }\n        else if (touch === Touch.Last) {\n            if (item === this._tail) {\n                return;\n            }\n            const next = item.next;\n            const previous = item.previous;\n            // Unlink the item.\n            if (item === this._head) {\n                // next must be defined since item was not tail but is head\n                // So there are more than on item in the map\n                next.previous = undefined;\n                this._head = next;\n            }\n            else {\n                // Both next and previous are not undefined since item was neither head nor tail.\n                next.previous = previous;\n                previous.next = next;\n            }\n            item.next = undefined;\n            item.previous = this._tail;\n            this._tail.next = item;\n            this._tail = item;\n            this._state++;\n        }\n    }\n    toJSON() {\n        const data = [];\n        this.forEach((value, key) => {\n            data.push([key, value]);\n        });\n        return data;\n    }\n    fromJSON(data) {\n        this.clear();\n        for (const [key, value] of data) {\n            this.set(key, value);\n        }\n    }\n}\nexports.LinkedMap = LinkedMap;\nclass LRUCache extends LinkedMap {\n    constructor(limit, ratio = 1) {\n        super();\n        this._limit = limit;\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n    }\n    get limit() {\n        return this._limit;\n    }\n    set limit(limit) {\n        this._limit = limit;\n        this.checkTrim();\n    }\n    get ratio() {\n        return this._ratio;\n    }\n    set ratio(ratio) {\n        this._ratio = Math.min(Math.max(0, ratio), 1);\n        this.checkTrim();\n    }\n    get(key, touch = Touch.AsNew) {\n        return super.get(key, touch);\n    }\n    peek(key) {\n        return super.get(key, Touch.None);\n    }\n    set(key, value) {\n        super.set(key, value, Touch.Last);\n        this.checkTrim();\n        return this;\n    }\n    checkTrim() {\n        if (this.size > this._limit) {\n            this.trimOld(Math.round(this._limit * this._ratio));\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Disposable = void 0;\nvar Disposable;\n(function (Disposable) {\n    function create(func) {\n        return {\n            dispose: func\n        };\n    }\n    Disposable.create = create;\n})(Disposable || (exports.Disposable = Disposable = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nlet _ral;\nfunction RAL() {\n    if (_ral === undefined) {\n        throw new Error(`No runtime abstraction layer installed`);\n    }\n    return _ral;\n}\n(function (RAL) {\n    function install(ral) {\n        if (ral === undefined) {\n            throw new Error(`No runtime abstraction layer provided`);\n        }\n        _ral = ral;\n    }\n    RAL.install = install;\n})(RAL || (RAL = {}));\nexports.default = RAL;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Emitter = exports.Event = void 0;\nconst ral_1 = require(\"./ral\");\nvar Event;\n(function (Event) {\n    const _disposable = { dispose() { } };\n    Event.None = function () { return _disposable; };\n})(Event || (exports.Event = Event = {}));\nclass CallbackList {\n    add(callback, context = null, bucket) {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts.push(context);\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n    remove(callback, context = null) {\n        if (!this._callbacks) {\n            return;\n        }\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0, len = this._callbacks.length; i < len; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts[i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts.splice(i, 1);\n                    return;\n                }\n                else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n    invoke(...args) {\n        if (!this._callbacks) {\n            return [];\n        }\n        const ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\n        for (let i = 0, len = callbacks.length; i < len; i++) {\n            try {\n                ret.push(callbacks[i].apply(contexts[i], args));\n            }\n            catch (e) {\n                // eslint-disable-next-line no-console\n                (0, ral_1.default)().console.error(e);\n            }\n        }\n        return ret;\n    }\n    isEmpty() {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n    dispose() {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\nclass Emitter {\n    constructor(_options) {\n        this._options = _options;\n    }\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event() {\n        if (!this._event) {\n            this._event = (listener, thisArgs, disposables) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const result = {\n                    dispose: () => {\n                        if (!this._callbacks) {\n                            // disposable is disposed after emitter is disposed.\n                            return;\n                        }\n                        this._callbacks.remove(listener, thisArgs);\n                        result.dispose = Emitter._noop;\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\n                            this._options.onLastListenerRemove(this);\n                        }\n                    }\n                };\n                if (Array.isArray(disposables)) {\n                    disposables.push(result);\n                }\n                return result;\n            };\n        }\n        return this._event;\n    }\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event) {\n        if (this._callbacks) {\n            this._callbacks.invoke.call(this._callbacks, event);\n        }\n    }\n    dispose() {\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n    }\n}\nexports.Emitter = Emitter;\nEmitter._noop = function () { };\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CancellationTokenSource = exports.CancellationToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nvar CancellationToken;\n(function (CancellationToken) {\n    CancellationToken.None = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: events_1.Event.None\n    });\n    CancellationToken.Cancelled = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: events_1.Event.None\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\n    }\n    CancellationToken.is = is;\n})(CancellationToken || (exports.CancellationToken = CancellationToken = {}));\nconst shortcutEvent = Object.freeze(function (callback, context) {\n    const handle = (0, ral_1.default)().timer.setTimeout(callback.bind(context), 0);\n    return { dispose() { handle.dispose(); } };\n});\nclass MutableToken {\n    constructor() {\n        this._isCancelled = false;\n    }\n    cancel() {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this.dispose();\n            }\n        }\n    }\n    get isCancellationRequested() {\n        return this._isCancelled;\n    }\n    get onCancellationRequested() {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new events_1.Emitter();\n        }\n        return this._emitter.event;\n    }\n    dispose() {\n        if (this._emitter) {\n            this._emitter.dispose();\n            this._emitter = undefined;\n        }\n    }\n}\nclass CancellationTokenSource {\n    get token() {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n    cancel() {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        }\n        else {\n            this._token.cancel();\n        }\n    }\n    dispose() {\n        if (!this._token) {\n            // ensure to initialize with an empty token if we had none\n            this._token = CancellationToken.None;\n        }\n        else if (this._token instanceof MutableToken) {\n            // actually dispose\n            this._token.dispose();\n        }\n    }\n}\nexports.CancellationTokenSource = CancellationTokenSource;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = void 0;\nconst cancellation_1 = require(\"./cancellation\");\nvar CancellationState;\n(function (CancellationState) {\n    CancellationState.Continue = 0;\n    CancellationState.Cancelled = 1;\n})(CancellationState || (CancellationState = {}));\nclass SharedArraySenderStrategy {\n    constructor() {\n        this.buffers = new Map();\n    }\n    enableCancellation(request) {\n        if (request.id === null) {\n            return;\n        }\n        const buffer = new SharedArrayBuffer(4);\n        const data = new Int32Array(buffer, 0, 1);\n        data[0] = CancellationState.Continue;\n        this.buffers.set(request.id, buffer);\n        request.$cancellationData = buffer;\n    }\n    async sendCancellation(_conn, id) {\n        const buffer = this.buffers.get(id);\n        if (buffer === undefined) {\n            return;\n        }\n        const data = new Int32Array(buffer, 0, 1);\n        Atomics.store(data, 0, CancellationState.Cancelled);\n    }\n    cleanup(id) {\n        this.buffers.delete(id);\n    }\n    dispose() {\n        this.buffers.clear();\n    }\n}\nexports.SharedArraySenderStrategy = SharedArraySenderStrategy;\nclass SharedArrayBufferCancellationToken {\n    constructor(buffer) {\n        this.data = new Int32Array(buffer, 0, 1);\n    }\n    get isCancellationRequested() {\n        return Atomics.load(this.data, 0) === CancellationState.Cancelled;\n    }\n    get onCancellationRequested() {\n        throw new Error(`Cancellation over SharedArrayBuffer doesn't support cancellation events`);\n    }\n}\nclass SharedArrayBufferCancellationTokenSource {\n    constructor(buffer) {\n        this.token = new SharedArrayBufferCancellationToken(buffer);\n    }\n    cancel() {\n    }\n    dispose() {\n    }\n}\nclass SharedArrayReceiverStrategy {\n    constructor() {\n        this.kind = 'request';\n    }\n    createCancellationTokenSource(request) {\n        const buffer = request.$cancellationData;\n        if (buffer === undefined) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n        return new SharedArrayBufferCancellationTokenSource(buffer);\n    }\n}\nexports.SharedArrayReceiverStrategy = SharedArrayReceiverStrategy;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Semaphore = void 0;\nconst ral_1 = require(\"./ral\");\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, ral_1.default)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst events_1 = require(\"./events\");\nconst semaphore_1 = require(\"./semaphore\");\nvar MessageReader;\n(function (MessageReader) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\n    }\n    MessageReader.is = is;\n})(MessageReader || (exports.MessageReader = MessageReader = {}));\nclass AbstractMessageReader {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n        this.partialMessageEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error) {\n        this.errorEmitter.fire(this.asError(error));\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    get onPartialMessage() {\n        return this.partialMessageEmitter.event;\n    }\n    firePartialMessage(info) {\n        this.partialMessageEmitter.fire(info);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageReader = AbstractMessageReader;\nvar ResolvedMessageReaderOptions;\n(function (ResolvedMessageReaderOptions) {\n    function fromOptions(options) {\n        let charset;\n        let result;\n        let contentDecoder;\n        const contentDecoders = new Map();\n        let contentTypeDecoder;\n        const contentTypeDecoders = new Map();\n        if (options === undefined || typeof options === 'string') {\n            charset = options ?? 'utf-8';\n        }\n        else {\n            charset = options.charset ?? 'utf-8';\n            if (options.contentDecoder !== undefined) {\n                contentDecoder = options.contentDecoder;\n                contentDecoders.set(contentDecoder.name, contentDecoder);\n            }\n            if (options.contentDecoders !== undefined) {\n                for (const decoder of options.contentDecoders) {\n                    contentDecoders.set(decoder.name, decoder);\n                }\n            }\n            if (options.contentTypeDecoder !== undefined) {\n                contentTypeDecoder = options.contentTypeDecoder;\n                contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n            }\n            if (options.contentTypeDecoders !== undefined) {\n                for (const decoder of options.contentTypeDecoders) {\n                    contentTypeDecoders.set(decoder.name, decoder);\n                }\n            }\n        }\n        if (contentTypeDecoder === undefined) {\n            contentTypeDecoder = (0, ral_1.default)().applicationJson.decoder;\n            contentTypeDecoders.set(contentTypeDecoder.name, contentTypeDecoder);\n        }\n        return { charset, contentDecoder, contentDecoders, contentTypeDecoder, contentTypeDecoders };\n    }\n    ResolvedMessageReaderOptions.fromOptions = fromOptions;\n})(ResolvedMessageReaderOptions || (ResolvedMessageReaderOptions = {}));\nclass ReadableStreamMessageReader extends AbstractMessageReader {\n    constructor(readable, options) {\n        super();\n        this.readable = readable;\n        this.options = ResolvedMessageReaderOptions.fromOptions(options);\n        this.buffer = (0, ral_1.default)().messageBuffer.create(this.options.charset);\n        this._partialMessageTimeout = 10000;\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.readSemaphore = new semaphore_1.Semaphore(1);\n    }\n    set partialMessageTimeout(timeout) {\n        this._partialMessageTimeout = timeout;\n    }\n    get partialMessageTimeout() {\n        return this._partialMessageTimeout;\n    }\n    listen(callback) {\n        this.nextMessageLength = -1;\n        this.messageToken = 0;\n        this.partialMessageTimer = undefined;\n        this.callback = callback;\n        const result = this.readable.onData((data) => {\n            this.onData(data);\n        });\n        this.readable.onError((error) => this.fireError(error));\n        this.readable.onClose(() => this.fireClose());\n        return result;\n    }\n    onData(data) {\n        try {\n            this.buffer.append(data);\n            while (true) {\n                if (this.nextMessageLength === -1) {\n                    const headers = this.buffer.tryReadHeaders(true);\n                    if (!headers) {\n                        return;\n                    }\n                    const contentLength = headers.get('content-length');\n                    if (!contentLength) {\n                        this.fireError(new Error(`Header must provide a Content-Length property.\\n${JSON.stringify(Object.fromEntries(headers))}`));\n                        return;\n                    }\n                    const length = parseInt(contentLength);\n                    if (isNaN(length)) {\n                        this.fireError(new Error(`Content-Length value must be a number. Got ${contentLength}`));\n                        return;\n                    }\n                    this.nextMessageLength = length;\n                }\n                const body = this.buffer.tryReadBody(this.nextMessageLength);\n                if (body === undefined) {\n                    /** We haven't received the full message yet. */\n                    this.setPartialMessageTimer();\n                    return;\n                }\n                this.clearPartialMessageTimer();\n                this.nextMessageLength = -1;\n                // Make sure that we convert one received message after the\n                // other. Otherwise it could happen that a decoding of a second\n                // smaller message finished before the decoding of a first larger\n                // message and then we would deliver the second message first.\n                this.readSemaphore.lock(async () => {\n                    const bytes = this.options.contentDecoder !== undefined\n                        ? await this.options.contentDecoder.decode(body)\n                        : body;\n                    const message = await this.options.contentTypeDecoder.decode(bytes, this.options);\n                    this.callback(message);\n                }).catch((error) => {\n                    this.fireError(error);\n                });\n            }\n        }\n        catch (error) {\n            this.fireError(error);\n        }\n    }\n    clearPartialMessageTimer() {\n        if (this.partialMessageTimer) {\n            this.partialMessageTimer.dispose();\n            this.partialMessageTimer = undefined;\n        }\n    }\n    setPartialMessageTimer() {\n        this.clearPartialMessageTimer();\n        if (this._partialMessageTimeout <= 0) {\n            return;\n        }\n        this.partialMessageTimer = (0, ral_1.default)().timer.setTimeout((token, timeout) => {\n            this.partialMessageTimer = undefined;\n            if (token === this.messageToken) {\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\n                this.setPartialMessageTimer();\n            }\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\n    }\n}\nexports.ReadableStreamMessageReader = ReadableStreamMessageReader;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst semaphore_1 = require(\"./semaphore\");\nconst events_1 = require(\"./events\");\nconst ContentLength = 'Content-Length: ';\nconst CRLF = '\\r\\n';\nvar MessageWriter;\n(function (MessageWriter) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\n            Is.func(candidate.onError) && Is.func(candidate.write);\n    }\n    MessageWriter.is = is;\n})(MessageWriter || (exports.MessageWriter = MessageWriter = {}));\nclass AbstractMessageWriter {\n    constructor() {\n        this.errorEmitter = new events_1.Emitter();\n        this.closeEmitter = new events_1.Emitter();\n    }\n    dispose() {\n        this.errorEmitter.dispose();\n        this.closeEmitter.dispose();\n    }\n    get onError() {\n        return this.errorEmitter.event;\n    }\n    fireError(error, message, count) {\n        this.errorEmitter.fire([this.asError(error), message, count]);\n    }\n    get onClose() {\n        return this.closeEmitter.event;\n    }\n    fireClose() {\n        this.closeEmitter.fire(undefined);\n    }\n    asError(error) {\n        if (error instanceof Error) {\n            return error;\n        }\n        else {\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\n        }\n    }\n}\nexports.AbstractMessageWriter = AbstractMessageWriter;\nvar ResolvedMessageWriterOptions;\n(function (ResolvedMessageWriterOptions) {\n    function fromOptions(options) {\n        if (options === undefined || typeof options === 'string') {\n            return { charset: options ?? 'utf-8', contentTypeEncoder: (0, ral_1.default)().applicationJson.encoder };\n        }\n        else {\n            return { charset: options.charset ?? 'utf-8', contentEncoder: options.contentEncoder, contentTypeEncoder: options.contentTypeEncoder ?? (0, ral_1.default)().applicationJson.encoder };\n        }\n    }\n    ResolvedMessageWriterOptions.fromOptions = fromOptions;\n})(ResolvedMessageWriterOptions || (ResolvedMessageWriterOptions = {}));\nclass WriteableStreamMessageWriter extends AbstractMessageWriter {\n    constructor(writable, options) {\n        super();\n        this.writable = writable;\n        this.options = ResolvedMessageWriterOptions.fromOptions(options);\n        this.errorCount = 0;\n        this.writeSemaphore = new semaphore_1.Semaphore(1);\n        this.writable.onError((error) => this.fireError(error));\n        this.writable.onClose(() => this.fireClose());\n    }\n    async write(msg) {\n        return this.writeSemaphore.lock(async () => {\n            const payload = this.options.contentTypeEncoder.encode(msg, this.options).then((buffer) => {\n                if (this.options.contentEncoder !== undefined) {\n                    return this.options.contentEncoder.encode(buffer);\n                }\n                else {\n                    return buffer;\n                }\n            });\n            return payload.then((buffer) => {\n                const headers = [];\n                headers.push(ContentLength, buffer.byteLength.toString(), CRLF);\n                headers.push(CRLF);\n                return this.doWrite(msg, headers, buffer);\n            }, (error) => {\n                this.fireError(error);\n                throw error;\n            });\n        });\n    }\n    async doWrite(msg, headers, data) {\n        try {\n            await this.writable.write(headers.join(''), 'ascii');\n            return this.writable.write(data);\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n        this.writable.end();\n    }\n}\nexports.WriteableStreamMessageWriter = WriteableStreamMessageWriter;\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractMessageBuffer = void 0;\nconst CR = 13;\nconst LF = 10;\nconst CRLF = '\\r\\n';\nclass AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        this._encoding = encoding;\n        this._chunks = [];\n        this._totalLength = 0;\n    }\n    get encoding() {\n        return this._encoding;\n    }\n    append(chunk) {\n        const toAppend = typeof chunk === 'string' ? this.fromString(chunk, this._encoding) : chunk;\n        this._chunks.push(toAppend);\n        this._totalLength += toAppend.byteLength;\n    }\n    tryReadHeaders(lowerCaseKeys = false) {\n        if (this._chunks.length === 0) {\n            return undefined;\n        }\n        let state = 0;\n        let chunkIndex = 0;\n        let offset = 0;\n        let chunkBytesRead = 0;\n        row: while (chunkIndex < this._chunks.length) {\n            const chunk = this._chunks[chunkIndex];\n            offset = 0;\n            column: while (offset < chunk.length) {\n                const value = chunk[offset];\n                switch (value) {\n                    case CR:\n                        switch (state) {\n                            case 0:\n                                state = 1;\n                                break;\n                            case 2:\n                                state = 3;\n                                break;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    case LF:\n                        switch (state) {\n                            case 1:\n                                state = 2;\n                                break;\n                            case 3:\n                                state = 4;\n                                offset++;\n                                break row;\n                            default:\n                                state = 0;\n                        }\n                        break;\n                    default:\n                        state = 0;\n                }\n                offset++;\n            }\n            chunkBytesRead += chunk.byteLength;\n            chunkIndex++;\n        }\n        if (state !== 4) {\n            return undefined;\n        }\n        // The buffer contains the two CRLF at the end. So we will\n        // have two empty lines after the split at the end as well.\n        const buffer = this._read(chunkBytesRead + offset);\n        const result = new Map();\n        const headers = this.toString(buffer, 'ascii').split(CRLF);\n        if (headers.length < 2) {\n            return result;\n        }\n        for (let i = 0; i < headers.length - 2; i++) {\n            const header = headers[i];\n            const index = header.indexOf(':');\n            if (index === -1) {\n                throw new Error(`Message header must separate key and value using ':'\\n${header}`);\n            }\n            const key = header.substr(0, index);\n            const value = header.substr(index + 1).trim();\n            result.set(lowerCaseKeys ? key.toLowerCase() : key, value);\n        }\n        return result;\n    }\n    tryReadBody(length) {\n        if (this._totalLength < length) {\n            return undefined;\n        }\n        return this._read(length);\n    }\n    get numberOfBytes() {\n        return this._totalLength;\n    }\n    _read(byteCount) {\n        if (byteCount === 0) {\n            return this.emptyBuffer();\n        }\n        if (byteCount > this._totalLength) {\n            throw new Error(`Cannot read so many bytes!`);\n        }\n        if (this._chunks[0].byteLength === byteCount) {\n            // super fast path, precisely first chunk must be returned\n            const chunk = this._chunks[0];\n            this._chunks.shift();\n            this._totalLength -= byteCount;\n            return this.asNative(chunk);\n        }\n        if (this._chunks[0].byteLength > byteCount) {\n            // fast path, the reading is entirely within the first chunk\n            const chunk = this._chunks[0];\n            const result = this.asNative(chunk, byteCount);\n            this._chunks[0] = chunk.slice(byteCount);\n            this._totalLength -= byteCount;\n            return result;\n        }\n        const result = this.allocNative(byteCount);\n        let resultOffset = 0;\n        let chunkIndex = 0;\n        while (byteCount > 0) {\n            const chunk = this._chunks[chunkIndex];\n            if (chunk.byteLength > byteCount) {\n                // this chunk will survive\n                const chunkPart = chunk.slice(0, byteCount);\n                result.set(chunkPart, resultOffset);\n                resultOffset += byteCount;\n                this._chunks[chunkIndex] = chunk.slice(byteCount);\n                this._totalLength -= byteCount;\n                byteCount -= byteCount;\n            }\n            else {\n                // this chunk will be entirely read\n                result.set(chunk, resultOffset);\n                resultOffset += chunk.byteLength;\n                this._chunks.shift();\n                this._totalLength -= chunk.byteLength;\n                byteCount -= chunk.byteLength;\n            }\n        }\n        return result;\n    }\n}\nexports.AbstractMessageBuffer = AbstractMessageBuffer;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.ConnectionOptions = exports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.RequestCancellationReceiverStrategy = exports.IdCancellationReceiverStrategy = exports.ConnectionStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = exports.NullLogger = exports.ProgressType = exports.ProgressToken = void 0;\nconst ral_1 = require(\"./ral\");\nconst Is = require(\"./is\");\nconst messages_1 = require(\"./messages\");\nconst linkedMap_1 = require(\"./linkedMap\");\nconst events_1 = require(\"./events\");\nconst cancellation_1 = require(\"./cancellation\");\nvar CancelNotification;\n(function (CancelNotification) {\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\n})(CancelNotification || (CancelNotification = {}));\nvar ProgressToken;\n(function (ProgressToken) {\n    function is(value) {\n        return typeof value === 'string' || typeof value === 'number';\n    }\n    ProgressToken.is = is;\n})(ProgressToken || (exports.ProgressToken = ProgressToken = {}));\nvar ProgressNotification;\n(function (ProgressNotification) {\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\n})(ProgressNotification || (ProgressNotification = {}));\nclass ProgressType {\n    constructor() {\n    }\n}\nexports.ProgressType = ProgressType;\nvar StarRequestHandler;\n(function (StarRequestHandler) {\n    function is(value) {\n        return Is.func(value);\n    }\n    StarRequestHandler.is = is;\n})(StarRequestHandler || (StarRequestHandler = {}));\nexports.NullLogger = Object.freeze({\n    error: () => { },\n    warn: () => { },\n    info: () => { },\n    log: () => { }\n});\nvar Trace;\n(function (Trace) {\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\n    Trace[Trace[\"Compact\"] = 2] = \"Compact\";\n    Trace[Trace[\"Verbose\"] = 3] = \"Verbose\";\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceValues;\n(function (TraceValues) {\n    /**\n     * Turn tracing off.\n     */\n    TraceValues.Off = 'off';\n    /**\n     * Trace messages only.\n     */\n    TraceValues.Messages = 'messages';\n    /**\n     * Compact message tracing.\n     */\n    TraceValues.Compact = 'compact';\n    /**\n     * Verbose message tracing.\n     */\n    TraceValues.Verbose = 'verbose';\n})(TraceValues || (exports.TraceValues = TraceValues = {}));\n(function (Trace) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return Trace.Off;\n        }\n        value = value.toLowerCase();\n        switch (value) {\n            case 'off':\n                return Trace.Off;\n            case 'messages':\n                return Trace.Messages;\n            case 'compact':\n                return Trace.Compact;\n            case 'verbose':\n                return Trace.Verbose;\n            default:\n                return Trace.Off;\n        }\n    }\n    Trace.fromString = fromString;\n    function toString(value) {\n        switch (value) {\n            case Trace.Off:\n                return 'off';\n            case Trace.Messages:\n                return 'messages';\n            case Trace.Compact:\n                return 'compact';\n            case Trace.Verbose:\n                return 'verbose';\n            default:\n                return 'off';\n        }\n    }\n    Trace.toString = toString;\n})(Trace || (exports.Trace = Trace = {}));\nvar TraceFormat;\n(function (TraceFormat) {\n    TraceFormat[\"Text\"] = \"text\";\n    TraceFormat[\"JSON\"] = \"json\";\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\n(function (TraceFormat) {\n    function fromString(value) {\n        if (!Is.string(value)) {\n            return TraceFormat.Text;\n        }\n        value = value.toLowerCase();\n        if (value === 'json') {\n            return TraceFormat.JSON;\n        }\n        else {\n            return TraceFormat.Text;\n        }\n    }\n    TraceFormat.fromString = fromString;\n})(TraceFormat || (exports.TraceFormat = TraceFormat = {}));\nvar SetTraceNotification;\n(function (SetTraceNotification) {\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTrace');\n})(SetTraceNotification || (exports.SetTraceNotification = SetTraceNotification = {}));\nvar LogTraceNotification;\n(function (LogTraceNotification) {\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTrace');\n})(LogTraceNotification || (exports.LogTraceNotification = LogTraceNotification = {}));\nvar ConnectionErrors;\n(function (ConnectionErrors) {\n    /**\n     * The connection is closed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\n    /**\n     * The connection got disposed.\n     */\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\n    /**\n     * The connection is already in listening mode.\n     */\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\n})(ConnectionErrors || (exports.ConnectionErrors = ConnectionErrors = {}));\nclass ConnectionError extends Error {\n    constructor(code, message) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ConnectionError.prototype);\n    }\n}\nexports.ConnectionError = ConnectionError;\nvar ConnectionStrategy;\n(function (ConnectionStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.cancelUndispatched);\n    }\n    ConnectionStrategy.is = is;\n})(ConnectionStrategy || (exports.ConnectionStrategy = ConnectionStrategy = {}));\nvar IdCancellationReceiverStrategy;\n(function (IdCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.kind === undefined || candidate.kind === 'id') && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    IdCancellationReceiverStrategy.is = is;\n})(IdCancellationReceiverStrategy || (exports.IdCancellationReceiverStrategy = IdCancellationReceiverStrategy = {}));\nvar RequestCancellationReceiverStrategy;\n(function (RequestCancellationReceiverStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && candidate.kind === 'request' && Is.func(candidate.createCancellationTokenSource) && (candidate.dispose === undefined || Is.func(candidate.dispose));\n    }\n    RequestCancellationReceiverStrategy.is = is;\n})(RequestCancellationReceiverStrategy || (exports.RequestCancellationReceiverStrategy = RequestCancellationReceiverStrategy = {}));\nvar CancellationReceiverStrategy;\n(function (CancellationReceiverStrategy) {\n    CancellationReceiverStrategy.Message = Object.freeze({\n        createCancellationTokenSource(_) {\n            return new cancellation_1.CancellationTokenSource();\n        }\n    });\n    function is(value) {\n        return IdCancellationReceiverStrategy.is(value) || RequestCancellationReceiverStrategy.is(value);\n    }\n    CancellationReceiverStrategy.is = is;\n})(CancellationReceiverStrategy || (exports.CancellationReceiverStrategy = CancellationReceiverStrategy = {}));\nvar CancellationSenderStrategy;\n(function (CancellationSenderStrategy) {\n    CancellationSenderStrategy.Message = Object.freeze({\n        sendCancellation(conn, id) {\n            return conn.sendNotification(CancelNotification.type, { id });\n        },\n        cleanup(_) { }\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.sendCancellation) && Is.func(candidate.cleanup);\n    }\n    CancellationSenderStrategy.is = is;\n})(CancellationSenderStrategy || (exports.CancellationSenderStrategy = CancellationSenderStrategy = {}));\nvar CancellationStrategy;\n(function (CancellationStrategy) {\n    CancellationStrategy.Message = Object.freeze({\n        receiver: CancellationReceiverStrategy.Message,\n        sender: CancellationSenderStrategy.Message\n    });\n    function is(value) {\n        const candidate = value;\n        return candidate && CancellationReceiverStrategy.is(candidate.receiver) && CancellationSenderStrategy.is(candidate.sender);\n    }\n    CancellationStrategy.is = is;\n})(CancellationStrategy || (exports.CancellationStrategy = CancellationStrategy = {}));\nvar MessageStrategy;\n(function (MessageStrategy) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.func(candidate.handleMessage);\n    }\n    MessageStrategy.is = is;\n})(MessageStrategy || (exports.MessageStrategy = MessageStrategy = {}));\nvar ConnectionOptions;\n(function (ConnectionOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (CancellationStrategy.is(candidate.cancellationStrategy) || ConnectionStrategy.is(candidate.connectionStrategy) || MessageStrategy.is(candidate.messageStrategy));\n    }\n    ConnectionOptions.is = is;\n})(ConnectionOptions || (exports.ConnectionOptions = ConnectionOptions = {}));\nvar ConnectionState;\n(function (ConnectionState) {\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\n})(ConnectionState || (ConnectionState = {}));\nfunction createMessageConnection(messageReader, messageWriter, _logger, options) {\n    const logger = _logger !== undefined ? _logger : exports.NullLogger;\n    let sequenceNumber = 0;\n    let notificationSequenceNumber = 0;\n    let unknownResponseSequenceNumber = 0;\n    const version = '2.0';\n    let starRequestHandler = undefined;\n    const requestHandlers = new Map();\n    let starNotificationHandler = undefined;\n    const notificationHandlers = new Map();\n    const progressHandlers = new Map();\n    let timer;\n    let messageQueue = new linkedMap_1.LinkedMap();\n    let responsePromises = new Map();\n    let knownCanceledRequests = new Set();\n    let requestTokens = new Map();\n    let trace = Trace.Off;\n    let traceFormat = TraceFormat.Text;\n    let tracer;\n    let state = ConnectionState.New;\n    const errorEmitter = new events_1.Emitter();\n    const closeEmitter = new events_1.Emitter();\n    const unhandledNotificationEmitter = new events_1.Emitter();\n    const unhandledProgressEmitter = new events_1.Emitter();\n    const disposeEmitter = new events_1.Emitter();\n    const cancellationStrategy = (options && options.cancellationStrategy) ? options.cancellationStrategy : CancellationStrategy.Message;\n    function createRequestQueueKey(id) {\n        if (id === null) {\n            throw new Error(`Can't send requests with id null since the response can't be correlated.`);\n        }\n        return 'req-' + id.toString();\n    }\n    function createResponseQueueKey(id) {\n        if (id === null) {\n            return 'res-unknown-' + (++unknownResponseSequenceNumber).toString();\n        }\n        else {\n            return 'res-' + id.toString();\n        }\n    }\n    function createNotificationQueueKey() {\n        return 'not-' + (++notificationSequenceNumber).toString();\n    }\n    function addMessageToQueue(queue, message) {\n        if (messages_1.Message.isRequest(message)) {\n            queue.set(createRequestQueueKey(message.id), message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            queue.set(createResponseQueueKey(message.id), message);\n        }\n        else {\n            queue.set(createNotificationQueueKey(), message);\n        }\n    }\n    function cancelUndispatched(_message) {\n        return undefined;\n    }\n    function isListening() {\n        return state === ConnectionState.Listening;\n    }\n    function isClosed() {\n        return state === ConnectionState.Closed;\n    }\n    function isDisposed() {\n        return state === ConnectionState.Disposed;\n    }\n    function closeHandler() {\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\n            state = ConnectionState.Closed;\n            closeEmitter.fire(undefined);\n        }\n        // If the connection is disposed don't sent close events.\n    }\n    function readErrorHandler(error) {\n        errorEmitter.fire([error, undefined, undefined]);\n    }\n    function writeErrorHandler(data) {\n        errorEmitter.fire(data);\n    }\n    messageReader.onClose(closeHandler);\n    messageReader.onError(readErrorHandler);\n    messageWriter.onClose(closeHandler);\n    messageWriter.onError(writeErrorHandler);\n    function triggerMessageQueue() {\n        if (timer || messageQueue.size === 0) {\n            return;\n        }\n        timer = (0, ral_1.default)().timer.setImmediate(() => {\n            timer = undefined;\n            processMessageQueue();\n        });\n    }\n    function handleMessage(message) {\n        if (messages_1.Message.isRequest(message)) {\n            handleRequest(message);\n        }\n        else if (messages_1.Message.isNotification(message)) {\n            handleNotification(message);\n        }\n        else if (messages_1.Message.isResponse(message)) {\n            handleResponse(message);\n        }\n        else {\n            handleInvalidMessage(message);\n        }\n    }\n    function processMessageQueue() {\n        if (messageQueue.size === 0) {\n            return;\n        }\n        const message = messageQueue.shift();\n        try {\n            const messageStrategy = options?.messageStrategy;\n            if (MessageStrategy.is(messageStrategy)) {\n                messageStrategy.handleMessage(message, handleMessage);\n            }\n            else {\n                handleMessage(message);\n            }\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    }\n    const callback = (message) => {\n        try {\n            // We have received a cancellation message. Check if the message is still in the queue\n            // and cancel it if allowed to do so.\n            if (messages_1.Message.isNotification(message) && message.method === CancelNotification.type.method) {\n                const cancelId = message.params.id;\n                const key = createRequestQueueKey(cancelId);\n                const toCancel = messageQueue.get(key);\n                if (messages_1.Message.isRequest(toCancel)) {\n                    const strategy = options?.connectionStrategy;\n                    const response = (strategy && strategy.cancelUndispatched) ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\n                    if (response && (response.error !== undefined || response.result !== undefined)) {\n                        messageQueue.delete(key);\n                        requestTokens.delete(cancelId);\n                        response.id = toCancel.id;\n                        traceSendingResponse(response, message.method, Date.now());\n                        messageWriter.write(response).catch(() => logger.error(`Sending response for canceled message failed.`));\n                        return;\n                    }\n                }\n                const cancellationToken = requestTokens.get(cancelId);\n                // The request is already running. Cancel the token\n                if (cancellationToken !== undefined) {\n                    cancellationToken.cancel();\n                    traceReceivedNotification(message);\n                    return;\n                }\n                else {\n                    // Remember the cancel but still queue the message to\n                    // clean up state in process message.\n                    knownCanceledRequests.add(cancelId);\n                }\n            }\n            addMessageToQueue(messageQueue, message);\n        }\n        finally {\n            triggerMessageQueue();\n        }\n    };\n    function handleRequest(requestMessage) {\n        if (isDisposed()) {\n            // we return here silently since we fired an event when the\n            // connection got disposed.\n            return;\n        }\n        function reply(resultOrError, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id\n            };\n            if (resultOrError instanceof messages_1.ResponseError) {\n                message.error = resultOrError.toJson();\n            }\n            else {\n                message.result = resultOrError === undefined ? null : resultOrError;\n            }\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replyError(error, method, startTime) {\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                error: error.toJson()\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        function replySuccess(result, method, startTime) {\n            // The JSON RPC defines that a response must either have a result or an error\n            // So we can't treat undefined as a valid response result.\n            if (result === undefined) {\n                result = null;\n            }\n            const message = {\n                jsonrpc: version,\n                id: requestMessage.id,\n                result: result\n            };\n            traceSendingResponse(message, method, startTime);\n            messageWriter.write(message).catch(() => logger.error(`Sending response failed.`));\n        }\n        traceReceivedRequest(requestMessage);\n        const element = requestHandlers.get(requestMessage.method);\n        let type;\n        let requestHandler;\n        if (element) {\n            type = element.type;\n            requestHandler = element.handler;\n        }\n        const startTime = Date.now();\n        if (requestHandler || starRequestHandler) {\n            const tokenKey = requestMessage.id ?? String(Date.now()); //\n            const cancellationSource = IdCancellationReceiverStrategy.is(cancellationStrategy.receiver)\n                ? cancellationStrategy.receiver.createCancellationTokenSource(tokenKey)\n                : cancellationStrategy.receiver.createCancellationTokenSource(requestMessage);\n            if (requestMessage.id !== null && knownCanceledRequests.has(requestMessage.id)) {\n                cancellationSource.cancel();\n            }\n            if (requestMessage.id !== null) {\n                requestTokens.set(tokenKey, cancellationSource);\n            }\n            try {\n                let handlerResult;\n                if (requestHandler) {\n                    if (requestMessage.params === undefined) {\n                        if (type !== undefined && type.numberOfParams !== 0) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines ${type.numberOfParams} params but received none.`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(cancellationSource.token);\n                    }\n                    else if (Array.isArray(requestMessage.params)) {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byName) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by name but received parameters by position`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(...requestMessage.params, cancellationSource.token);\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InvalidParams, `Request ${requestMessage.method} defines parameters by position but received parameters by name`), requestMessage.method, startTime);\n                            return;\n                        }\n                        handlerResult = requestHandler(requestMessage.params, cancellationSource.token);\n                    }\n                }\n                else if (starRequestHandler) {\n                    handlerResult = starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\n                }\n                const promise = handlerResult;\n                if (!handlerResult) {\n                    requestTokens.delete(tokenKey);\n                    replySuccess(handlerResult, requestMessage.method, startTime);\n                }\n                else if (promise.then) {\n                    promise.then((resultOrError) => {\n                        requestTokens.delete(tokenKey);\n                        reply(resultOrError, requestMessage.method, startTime);\n                    }, error => {\n                        requestTokens.delete(tokenKey);\n                        if (error instanceof messages_1.ResponseError) {\n                            replyError(error, requestMessage.method, startTime);\n                        }\n                        else if (error && Is.string(error.message)) {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                        }\n                        else {\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                        }\n                    });\n                }\n                else {\n                    requestTokens.delete(tokenKey);\n                    reply(handlerResult, requestMessage.method, startTime);\n                }\n            }\n            catch (error) {\n                requestTokens.delete(tokenKey);\n                if (error instanceof messages_1.ResponseError) {\n                    reply(error, requestMessage.method, startTime);\n                }\n                else if (error && Is.string(error.message)) {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\n                }\n                else {\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\n                }\n            }\n        }\n        else {\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\n        }\n    }\n    function handleResponse(responseMessage) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        if (responseMessage.id === null) {\n            if (responseMessage.error) {\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\n            }\n            else {\n                logger.error(`Received response message without id. No further error information provided.`);\n            }\n        }\n        else {\n            const key = responseMessage.id;\n            const responsePromise = responsePromises.get(key);\n            traceReceivedResponse(responseMessage, responsePromise);\n            if (responsePromise !== undefined) {\n                responsePromises.delete(key);\n                try {\n                    if (responseMessage.error) {\n                        const error = responseMessage.error;\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\n                    }\n                    else if (responseMessage.result !== undefined) {\n                        responsePromise.resolve(responseMessage.result);\n                    }\n                    else {\n                        throw new Error('Should never happen.');\n                    }\n                }\n                catch (error) {\n                    if (error.message) {\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\n                    }\n                    else {\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\n                    }\n                }\n            }\n        }\n    }\n    function handleNotification(message) {\n        if (isDisposed()) {\n            // See handle request.\n            return;\n        }\n        let type = undefined;\n        let notificationHandler;\n        if (message.method === CancelNotification.type.method) {\n            const cancelId = message.params.id;\n            knownCanceledRequests.delete(cancelId);\n            traceReceivedNotification(message);\n            return;\n        }\n        else {\n            const element = notificationHandlers.get(message.method);\n            if (element) {\n                notificationHandler = element.handler;\n                type = element.type;\n            }\n        }\n        if (notificationHandler || starNotificationHandler) {\n            try {\n                traceReceivedNotification(message);\n                if (notificationHandler) {\n                    if (message.params === undefined) {\n                        if (type !== undefined) {\n                            if (type.numberOfParams !== 0 && type.parameterStructures !== messages_1.ParameterStructures.byName) {\n                                logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received none.`);\n                            }\n                        }\n                        notificationHandler();\n                    }\n                    else if (Array.isArray(message.params)) {\n                        // There are JSON-RPC libraries that send progress message as positional params although\n                        // specified as named. So convert them if this is the case.\n                        const params = message.params;\n                        if (message.method === ProgressNotification.type.method && params.length === 2 && ProgressToken.is(params[0])) {\n                            notificationHandler({ token: params[0], value: params[1] });\n                        }\n                        else {\n                            if (type !== undefined) {\n                                if (type.parameterStructures === messages_1.ParameterStructures.byName) {\n                                    logger.error(`Notification ${message.method} defines parameters by name but received parameters by position`);\n                                }\n                                if (type.numberOfParams !== message.params.length) {\n                                    logger.error(`Notification ${message.method} defines ${type.numberOfParams} params but received ${params.length} arguments`);\n                                }\n                            }\n                            notificationHandler(...params);\n                        }\n                    }\n                    else {\n                        if (type !== undefined && type.parameterStructures === messages_1.ParameterStructures.byPosition) {\n                            logger.error(`Notification ${message.method} defines parameters by position but received parameters by name`);\n                        }\n                        notificationHandler(message.params);\n                    }\n                }\n                else if (starNotificationHandler) {\n                    starNotificationHandler(message.method, message.params);\n                }\n            }\n            catch (error) {\n                if (error.message) {\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\n                }\n                else {\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\n                }\n            }\n        }\n        else {\n            unhandledNotificationEmitter.fire(message);\n        }\n    }\n    function handleInvalidMessage(message) {\n        if (!message) {\n            logger.error('Received empty message.');\n            return;\n        }\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\n        // Test whether we find an id to reject the promise\n        const responseMessage = message;\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\n            const key = responseMessage.id;\n            const responseHandler = responsePromises.get(key);\n            if (responseHandler) {\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\n            }\n        }\n    }\n    function stringifyTrace(params) {\n        if (params === undefined || params === null) {\n            return undefined;\n        }\n        switch (trace) {\n            case Trace.Verbose:\n                return JSON.stringify(params, null, 4);\n            case Trace.Compact:\n                return JSON.stringify(params);\n            default:\n                return undefined;\n        }\n    }\n    function traceSendingRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('send-request', message);\n        }\n    }\n    function traceSendingNotification(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Sending notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('send-notification', message);\n        }\n    }\n    function traceSendingResponse(message, method, startTime) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\n        }\n        else {\n            logLSPMessage('send-response', message);\n        }\n    }\n    function traceReceivedRequest(message) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if ((trace === Trace.Verbose || trace === Trace.Compact) && message.params) {\n                data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n            }\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\n        }\n        else {\n            logLSPMessage('receive-request', message);\n        }\n    }\n    function traceReceivedNotification(message) {\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.params) {\n                    data = `Params: ${stringifyTrace(message.params)}\\n\\n`;\n                }\n                else {\n                    data = 'No parameters provided.\\n\\n';\n                }\n            }\n            tracer.log(`Received notification '${message.method}'.`, data);\n        }\n        else {\n            logLSPMessage('receive-notification', message);\n        }\n    }\n    function traceReceivedResponse(message, responsePromise) {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        if (traceFormat === TraceFormat.Text) {\n            let data = undefined;\n            if (trace === Trace.Verbose || trace === Trace.Compact) {\n                if (message.error && message.error.data) {\n                    data = `Error data: ${stringifyTrace(message.error.data)}\\n\\n`;\n                }\n                else {\n                    if (message.result) {\n                        data = `Result: ${stringifyTrace(message.result)}\\n\\n`;\n                    }\n                    else if (message.error === undefined) {\n                        data = 'No result returned.\\n\\n';\n                    }\n                }\n            }\n            if (responsePromise) {\n                const error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\n            }\n            else {\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\n            }\n        }\n        else {\n            logLSPMessage('receive-response', message);\n        }\n    }\n    function logLSPMessage(type, message) {\n        if (!tracer || trace === Trace.Off) {\n            return;\n        }\n        const lspMessage = {\n            isLSPMessage: true,\n            type,\n            message,\n            timestamp: Date.now()\n        };\n        tracer.log(lspMessage);\n    }\n    function throwIfClosedOrDisposed() {\n        if (isClosed()) {\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\n        }\n        if (isDisposed()) {\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\n        }\n    }\n    function throwIfListening() {\n        if (isListening()) {\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\n        }\n    }\n    function throwIfNotListening() {\n        if (!isListening()) {\n            throw new Error('Call listen() first.');\n        }\n    }\n    function undefinedToNull(param) {\n        if (param === undefined) {\n            return null;\n        }\n        else {\n            return param;\n        }\n    }\n    function nullToUndefined(param) {\n        if (param === null) {\n            return undefined;\n        }\n        else {\n            return param;\n        }\n    }\n    function isNamedParam(param) {\n        return param !== undefined && param !== null && !Array.isArray(param) && typeof param === 'object';\n    }\n    function computeSingleParam(parameterStructures, param) {\n        switch (parameterStructures) {\n            case messages_1.ParameterStructures.auto:\n                if (isNamedParam(param)) {\n                    return nullToUndefined(param);\n                }\n                else {\n                    return [undefinedToNull(param)];\n                }\n            case messages_1.ParameterStructures.byName:\n                if (!isNamedParam(param)) {\n                    throw new Error(`Received parameters by name but param is not an object literal.`);\n                }\n                return nullToUndefined(param);\n            case messages_1.ParameterStructures.byPosition:\n                return [undefinedToNull(param)];\n            default:\n                throw new Error(`Unknown parameter structure ${parameterStructures.toString()}`);\n        }\n    }\n    function computeMessageParams(type, params) {\n        let result;\n        const numberOfParams = type.numberOfParams;\n        switch (numberOfParams) {\n            case 0:\n                result = undefined;\n                break;\n            case 1:\n                result = computeSingleParam(type.parameterStructures, params[0]);\n                break;\n            default:\n                result = [];\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\n                    result.push(undefinedToNull(params[i]));\n                }\n                if (params.length < numberOfParams) {\n                    for (let i = params.length; i < numberOfParams; i++) {\n                        result.push(null);\n                    }\n                }\n                break;\n        }\n        return result;\n    }\n    const connection = {\n        sendNotification: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            let method;\n            let messageParams;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' notification parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n            }\n            const notificationMessage = {\n                jsonrpc: version,\n                method: method,\n                params: messageParams\n            };\n            traceSendingNotification(notificationMessage);\n            return messageWriter.write(notificationMessage).catch((error) => {\n                logger.error(`Sending notification failed.`);\n                throw error;\n            });\n        },\n        onNotification: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method;\n            if (Is.func(type)) {\n                starNotificationHandler = type;\n            }\n            else if (handler) {\n                if (Is.string(type)) {\n                    method = type;\n                    notificationHandlers.set(type, { type: undefined, handler });\n                }\n                else {\n                    method = type.method;\n                    notificationHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method !== undefined) {\n                        notificationHandlers.delete(method);\n                    }\n                    else {\n                        starNotificationHandler = undefined;\n                    }\n                }\n            };\n        },\n        onProgress: (_type, token, handler) => {\n            if (progressHandlers.has(token)) {\n                throw new Error(`Progress handler for token ${token} already registered`);\n            }\n            progressHandlers.set(token, handler);\n            return {\n                dispose: () => {\n                    progressHandlers.delete(token);\n                }\n            };\n        },\n        sendProgress: (_type, token, value) => {\n            // This should not await but simple return to ensure that we don't have another\n            // async scheduling. Otherwise one send could overtake another send.\n            return connection.sendNotification(ProgressNotification.type, { token, value });\n        },\n        onUnhandledProgress: unhandledProgressEmitter.event,\n        sendRequest: (type, ...args) => {\n            throwIfClosedOrDisposed();\n            throwIfNotListening();\n            let method;\n            let messageParams;\n            let token = undefined;\n            if (Is.string(type)) {\n                method = type;\n                const first = args[0];\n                const last = args[args.length - 1];\n                let paramStart = 0;\n                let parameterStructures = messages_1.ParameterStructures.auto;\n                if (messages_1.ParameterStructures.is(first)) {\n                    paramStart = 1;\n                    parameterStructures = first;\n                }\n                let paramEnd = args.length;\n                if (cancellation_1.CancellationToken.is(last)) {\n                    paramEnd = paramEnd - 1;\n                    token = last;\n                }\n                const numberOfParams = paramEnd - paramStart;\n                switch (numberOfParams) {\n                    case 0:\n                        messageParams = undefined;\n                        break;\n                    case 1:\n                        messageParams = computeSingleParam(parameterStructures, args[paramStart]);\n                        break;\n                    default:\n                        if (parameterStructures === messages_1.ParameterStructures.byName) {\n                            throw new Error(`Received ${numberOfParams} parameters for 'by Name' request parameter structure.`);\n                        }\n                        messageParams = args.slice(paramStart, paramEnd).map(value => undefinedToNull(value));\n                        break;\n                }\n            }\n            else {\n                const params = args;\n                method = type.method;\n                messageParams = computeMessageParams(type, params);\n                const numberOfParams = type.numberOfParams;\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\n            }\n            const id = sequenceNumber++;\n            let disposable;\n            if (token) {\n                disposable = token.onCancellationRequested(() => {\n                    const p = cancellationStrategy.sender.sendCancellation(connection, id);\n                    if (p === undefined) {\n                        logger.log(`Received no promise from cancellation strategy when cancelling id ${id}`);\n                        return Promise.resolve();\n                    }\n                    else {\n                        return p.catch(() => {\n                            logger.log(`Sending cancellation messages for id ${id} failed`);\n                        });\n                    }\n                });\n            }\n            const requestMessage = {\n                jsonrpc: version,\n                id: id,\n                method: method,\n                params: messageParams\n            };\n            traceSendingRequest(requestMessage);\n            if (typeof cancellationStrategy.sender.enableCancellation === 'function') {\n                cancellationStrategy.sender.enableCancellation(requestMessage);\n            }\n            return new Promise(async (resolve, reject) => {\n                const resolveWithCleanup = (r) => {\n                    resolve(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const rejectWithCleanup = (r) => {\n                    reject(r);\n                    cancellationStrategy.sender.cleanup(id);\n                    disposable?.dispose();\n                };\n                const responsePromise = { method: method, timerStart: Date.now(), resolve: resolveWithCleanup, reject: rejectWithCleanup };\n                try {\n                    await messageWriter.write(requestMessage);\n                    responsePromises.set(id, responsePromise);\n                }\n                catch (error) {\n                    logger.error(`Sending request failed.`);\n                    // Writing the message failed. So we need to reject the promise.\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, error.message ? error.message : 'Unknown reason'));\n                    throw error;\n                }\n            });\n        },\n        onRequest: (type, handler) => {\n            throwIfClosedOrDisposed();\n            let method = null;\n            if (StarRequestHandler.is(type)) {\n                method = undefined;\n                starRequestHandler = type;\n            }\n            else if (Is.string(type)) {\n                method = null;\n                if (handler !== undefined) {\n                    method = type;\n                    requestHandlers.set(type, { handler: handler, type: undefined });\n                }\n            }\n            else {\n                if (handler !== undefined) {\n                    method = type.method;\n                    requestHandlers.set(type.method, { type, handler });\n                }\n            }\n            return {\n                dispose: () => {\n                    if (method === null) {\n                        return;\n                    }\n                    if (method !== undefined) {\n                        requestHandlers.delete(method);\n                    }\n                    else {\n                        starRequestHandler = undefined;\n                    }\n                }\n            };\n        },\n        hasPendingResponse: () => {\n            return responsePromises.size > 0;\n        },\n        trace: async (_value, _tracer, sendNotificationOrTraceOptions) => {\n            let _sendNotification = false;\n            let _traceFormat = TraceFormat.Text;\n            if (sendNotificationOrTraceOptions !== undefined) {\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\n                    _sendNotification = sendNotificationOrTraceOptions;\n                }\n                else {\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\n                }\n            }\n            trace = _value;\n            traceFormat = _traceFormat;\n            if (trace === Trace.Off) {\n                tracer = undefined;\n            }\n            else {\n                tracer = _tracer;\n            }\n            if (_sendNotification && !isClosed() && !isDisposed()) {\n                await connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\n            }\n        },\n        onError: errorEmitter.event,\n        onClose: closeEmitter.event,\n        onUnhandledNotification: unhandledNotificationEmitter.event,\n        onDispose: disposeEmitter.event,\n        end: () => {\n            messageWriter.end();\n        },\n        dispose: () => {\n            if (isDisposed()) {\n                return;\n            }\n            state = ConnectionState.Disposed;\n            disposeEmitter.fire(undefined);\n            const error = new messages_1.ResponseError(messages_1.ErrorCodes.PendingResponseRejected, 'Pending response rejected since connection got disposed');\n            for (const promise of responsePromises.values()) {\n                promise.reject(error);\n            }\n            responsePromises = new Map();\n            requestTokens = new Map();\n            knownCanceledRequests = new Set();\n            messageQueue = new linkedMap_1.LinkedMap();\n            // Test for backwards compatibility\n            if (Is.func(messageWriter.dispose)) {\n                messageWriter.dispose();\n            }\n            if (Is.func(messageReader.dispose)) {\n                messageReader.dispose();\n            }\n        },\n        listen: () => {\n            throwIfClosedOrDisposed();\n            throwIfListening();\n            state = ConnectionState.Listening;\n            messageReader.listen(callback);\n        },\n        inspect: () => {\n            // eslint-disable-next-line no-console\n            (0, ral_1.default)().console.log('inspect');\n        }\n    };\n    connection.onNotification(LogTraceNotification.type, (params) => {\n        if (trace === Trace.Off || !tracer) {\n            return;\n        }\n        const verbose = trace === Trace.Verbose || trace === Trace.Compact;\n        tracer.log(params.message, verbose ? params.verbose : undefined);\n    });\n    connection.onNotification(ProgressNotification.type, (params) => {\n        const handler = progressHandlers.get(params.token);\n        if (handler) {\n            handler(params.value);\n        }\n        else {\n            unhandledProgressEmitter.fire(params);\n        }\n    });\n    return connection;\n}\nexports.createMessageConnection = createMessageConnection;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n/// <reference path=\"../../typings/thenable.d.ts\" />\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressType = exports.ProgressToken = exports.createMessageConnection = exports.NullLogger = exports.ConnectionOptions = exports.ConnectionStrategy = exports.AbstractMessageBuffer = exports.WriteableStreamMessageWriter = exports.AbstractMessageWriter = exports.MessageWriter = exports.ReadableStreamMessageReader = exports.AbstractMessageReader = exports.MessageReader = exports.SharedArrayReceiverStrategy = exports.SharedArraySenderStrategy = exports.CancellationToken = exports.CancellationTokenSource = exports.Emitter = exports.Event = exports.Disposable = exports.LRUCache = exports.Touch = exports.LinkedMap = exports.ParameterStructures = exports.NotificationType9 = exports.NotificationType8 = exports.NotificationType7 = exports.NotificationType6 = exports.NotificationType5 = exports.NotificationType4 = exports.NotificationType3 = exports.NotificationType2 = exports.NotificationType1 = exports.NotificationType0 = exports.NotificationType = exports.ErrorCodes = exports.ResponseError = exports.RequestType9 = exports.RequestType8 = exports.RequestType7 = exports.RequestType6 = exports.RequestType5 = exports.RequestType4 = exports.RequestType3 = exports.RequestType2 = exports.RequestType1 = exports.RequestType0 = exports.RequestType = exports.Message = exports.RAL = void 0;\nexports.MessageStrategy = exports.CancellationStrategy = exports.CancellationSenderStrategy = exports.CancellationReceiverStrategy = exports.ConnectionError = exports.ConnectionErrors = exports.LogTraceNotification = exports.SetTraceNotification = exports.TraceFormat = exports.TraceValues = exports.Trace = void 0;\nconst messages_1 = require(\"./messages\");\nObject.defineProperty(exports, \"Message\", { enumerable: true, get: function () { return messages_1.Message; } });\nObject.defineProperty(exports, \"RequestType\", { enumerable: true, get: function () { return messages_1.RequestType; } });\nObject.defineProperty(exports, \"RequestType0\", { enumerable: true, get: function () { return messages_1.RequestType0; } });\nObject.defineProperty(exports, \"RequestType1\", { enumerable: true, get: function () { return messages_1.RequestType1; } });\nObject.defineProperty(exports, \"RequestType2\", { enumerable: true, get: function () { return messages_1.RequestType2; } });\nObject.defineProperty(exports, \"RequestType3\", { enumerable: true, get: function () { return messages_1.RequestType3; } });\nObject.defineProperty(exports, \"RequestType4\", { enumerable: true, get: function () { return messages_1.RequestType4; } });\nObject.defineProperty(exports, \"RequestType5\", { enumerable: true, get: function () { return messages_1.RequestType5; } });\nObject.defineProperty(exports, \"RequestType6\", { enumerable: true, get: function () { return messages_1.RequestType6; } });\nObject.defineProperty(exports, \"RequestType7\", { enumerable: true, get: function () { return messages_1.RequestType7; } });\nObject.defineProperty(exports, \"RequestType8\", { enumerable: true, get: function () { return messages_1.RequestType8; } });\nObject.defineProperty(exports, \"RequestType9\", { enumerable: true, get: function () { return messages_1.RequestType9; } });\nObject.defineProperty(exports, \"ResponseError\", { enumerable: true, get: function () { return messages_1.ResponseError; } });\nObject.defineProperty(exports, \"ErrorCodes\", { enumerable: true, get: function () { return messages_1.ErrorCodes; } });\nObject.defineProperty(exports, \"NotificationType\", { enumerable: true, get: function () { return messages_1.NotificationType; } });\nObject.defineProperty(exports, \"NotificationType0\", { enumerable: true, get: function () { return messages_1.NotificationType0; } });\nObject.defineProperty(exports, \"NotificationType1\", { enumerable: true, get: function () { return messages_1.NotificationType1; } });\nObject.defineProperty(exports, \"NotificationType2\", { enumerable: true, get: function () { return messages_1.NotificationType2; } });\nObject.defineProperty(exports, \"NotificationType3\", { enumerable: true, get: function () { return messages_1.NotificationType3; } });\nObject.defineProperty(exports, \"NotificationType4\", { enumerable: true, get: function () { return messages_1.NotificationType4; } });\nObject.defineProperty(exports, \"NotificationType5\", { enumerable: true, get: function () { return messages_1.NotificationType5; } });\nObject.defineProperty(exports, \"NotificationType6\", { enumerable: true, get: function () { return messages_1.NotificationType6; } });\nObject.defineProperty(exports, \"NotificationType7\", { enumerable: true, get: function () { return messages_1.NotificationType7; } });\nObject.defineProperty(exports, \"NotificationType8\", { enumerable: true, get: function () { return messages_1.NotificationType8; } });\nObject.defineProperty(exports, \"NotificationType9\", { enumerable: true, get: function () { return messages_1.NotificationType9; } });\nObject.defineProperty(exports, \"ParameterStructures\", { enumerable: true, get: function () { return messages_1.ParameterStructures; } });\nconst linkedMap_1 = require(\"./linkedMap\");\nObject.defineProperty(exports, \"LinkedMap\", { enumerable: true, get: function () { return linkedMap_1.LinkedMap; } });\nObject.defineProperty(exports, \"LRUCache\", { enumerable: true, get: function () { return linkedMap_1.LRUCache; } });\nObject.defineProperty(exports, \"Touch\", { enumerable: true, get: function () { return linkedMap_1.Touch; } });\nconst disposable_1 = require(\"./disposable\");\nObject.defineProperty(exports, \"Disposable\", { enumerable: true, get: function () { return disposable_1.Disposable; } });\nconst events_1 = require(\"./events\");\nObject.defineProperty(exports, \"Event\", { enumerable: true, get: function () { return events_1.Event; } });\nObject.defineProperty(exports, \"Emitter\", { enumerable: true, get: function () { return events_1.Emitter; } });\nconst cancellation_1 = require(\"./cancellation\");\nObject.defineProperty(exports, \"CancellationTokenSource\", { enumerable: true, get: function () { return cancellation_1.CancellationTokenSource; } });\nObject.defineProperty(exports, \"CancellationToken\", { enumerable: true, get: function () { return cancellation_1.CancellationToken; } });\nconst sharedArrayCancellation_1 = require(\"./sharedArrayCancellation\");\nObject.defineProperty(exports, \"SharedArraySenderStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArraySenderStrategy; } });\nObject.defineProperty(exports, \"SharedArrayReceiverStrategy\", { enumerable: true, get: function () { return sharedArrayCancellation_1.SharedArrayReceiverStrategy; } });\nconst messageReader_1 = require(\"./messageReader\");\nObject.defineProperty(exports, \"MessageReader\", { enumerable: true, get: function () { return messageReader_1.MessageReader; } });\nObject.defineProperty(exports, \"AbstractMessageReader\", { enumerable: true, get: function () { return messageReader_1.AbstractMessageReader; } });\nObject.defineProperty(exports, \"ReadableStreamMessageReader\", { enumerable: true, get: function () { return messageReader_1.ReadableStreamMessageReader; } });\nconst messageWriter_1 = require(\"./messageWriter\");\nObject.defineProperty(exports, \"MessageWriter\", { enumerable: true, get: function () { return messageWriter_1.MessageWriter; } });\nObject.defineProperty(exports, \"AbstractMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.AbstractMessageWriter; } });\nObject.defineProperty(exports, \"WriteableStreamMessageWriter\", { enumerable: true, get: function () { return messageWriter_1.WriteableStreamMessageWriter; } });\nconst messageBuffer_1 = require(\"./messageBuffer\");\nObject.defineProperty(exports, \"AbstractMessageBuffer\", { enumerable: true, get: function () { return messageBuffer_1.AbstractMessageBuffer; } });\nconst connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"ConnectionStrategy\", { enumerable: true, get: function () { return connection_1.ConnectionStrategy; } });\nObject.defineProperty(exports, \"ConnectionOptions\", { enumerable: true, get: function () { return connection_1.ConnectionOptions; } });\nObject.defineProperty(exports, \"NullLogger\", { enumerable: true, get: function () { return connection_1.NullLogger; } });\nObject.defineProperty(exports, \"createMessageConnection\", { enumerable: true, get: function () { return connection_1.createMessageConnection; } });\nObject.defineProperty(exports, \"ProgressToken\", { enumerable: true, get: function () { return connection_1.ProgressToken; } });\nObject.defineProperty(exports, \"ProgressType\", { enumerable: true, get: function () { return connection_1.ProgressType; } });\nObject.defineProperty(exports, \"Trace\", { enumerable: true, get: function () { return connection_1.Trace; } });\nObject.defineProperty(exports, \"TraceValues\", { enumerable: true, get: function () { return connection_1.TraceValues; } });\nObject.defineProperty(exports, \"TraceFormat\", { enumerable: true, get: function () { return connection_1.TraceFormat; } });\nObject.defineProperty(exports, \"SetTraceNotification\", { enumerable: true, get: function () { return connection_1.SetTraceNotification; } });\nObject.defineProperty(exports, \"LogTraceNotification\", { enumerable: true, get: function () { return connection_1.LogTraceNotification; } });\nObject.defineProperty(exports, \"ConnectionErrors\", { enumerable: true, get: function () { return connection_1.ConnectionErrors; } });\nObject.defineProperty(exports, \"ConnectionError\", { enumerable: true, get: function () { return connection_1.ConnectionError; } });\nObject.defineProperty(exports, \"CancellationReceiverStrategy\", { enumerable: true, get: function () { return connection_1.CancellationReceiverStrategy; } });\nObject.defineProperty(exports, \"CancellationSenderStrategy\", { enumerable: true, get: function () { return connection_1.CancellationSenderStrategy; } });\nObject.defineProperty(exports, \"CancellationStrategy\", { enumerable: true, get: function () { return connection_1.CancellationStrategy; } });\nObject.defineProperty(exports, \"MessageStrategy\", { enumerable: true, get: function () { return connection_1.MessageStrategy; } });\nconst ral_1 = require(\"./ral\");\nexports.RAL = ral_1.default;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst util_1 = require(\"util\");\nconst api_1 = require(\"../common/api\");\nclass MessageBuffer extends api_1.AbstractMessageBuffer {\n    constructor(encoding = 'utf-8') {\n        super(encoding);\n    }\n    emptyBuffer() {\n        return MessageBuffer.emptyBuffer;\n    }\n    fromString(value, encoding) {\n        return Buffer.from(value, encoding);\n    }\n    toString(value, encoding) {\n        if (value instanceof Buffer) {\n            return value.toString(encoding);\n        }\n        else {\n            return new util_1.TextDecoder(encoding).decode(value);\n        }\n    }\n    asNative(buffer, length) {\n        if (length === undefined) {\n            return buffer instanceof Buffer ? buffer : Buffer.from(buffer);\n        }\n        else {\n            return buffer instanceof Buffer ? buffer.slice(0, length) : Buffer.from(buffer, 0, length);\n        }\n    }\n    allocNative(length) {\n        return Buffer.allocUnsafe(length);\n    }\n}\nMessageBuffer.emptyBuffer = Buffer.allocUnsafe(0);\nclass ReadableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    onData(listener) {\n        this.stream.on('data', listener);\n        return api_1.Disposable.create(() => this.stream.off('data', listener));\n    }\n}\nclass WritableStreamWrapper {\n    constructor(stream) {\n        this.stream = stream;\n    }\n    onClose(listener) {\n        this.stream.on('close', listener);\n        return api_1.Disposable.create(() => this.stream.off('close', listener));\n    }\n    onError(listener) {\n        this.stream.on('error', listener);\n        return api_1.Disposable.create(() => this.stream.off('error', listener));\n    }\n    onEnd(listener) {\n        this.stream.on('end', listener);\n        return api_1.Disposable.create(() => this.stream.off('end', listener));\n    }\n    write(data, encoding) {\n        return new Promise((resolve, reject) => {\n            const callback = (error) => {\n                if (error === undefined || error === null) {\n                    resolve();\n                }\n                else {\n                    reject(error);\n                }\n            };\n            if (typeof data === 'string') {\n                this.stream.write(data, encoding, callback);\n            }\n            else {\n                this.stream.write(data, callback);\n            }\n        });\n    }\n    end() {\n        this.stream.end();\n    }\n}\nconst _ril = Object.freeze({\n    messageBuffer: Object.freeze({\n        create: (encoding) => new MessageBuffer(encoding)\n    }),\n    applicationJson: Object.freeze({\n        encoder: Object.freeze({\n            name: 'application/json',\n            encode: (msg, options) => {\n                try {\n                    return Promise.resolve(Buffer.from(JSON.stringify(msg, undefined, 0), options.charset));\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        }),\n        decoder: Object.freeze({\n            name: 'application/json',\n            decode: (buffer, options) => {\n                try {\n                    if (buffer instanceof Buffer) {\n                        return Promise.resolve(JSON.parse(buffer.toString(options.charset)));\n                    }\n                    else {\n                        return Promise.resolve(JSON.parse(new util_1.TextDecoder(options.charset).decode(buffer)));\n                    }\n                }\n                catch (err) {\n                    return Promise.reject(err);\n                }\n            }\n        })\n    }),\n    stream: Object.freeze({\n        asReadableStream: (stream) => new ReadableStreamWrapper(stream),\n        asWritableStream: (stream) => new WritableStreamWrapper(stream)\n    }),\n    console: console,\n    timer: Object.freeze({\n        setTimeout(callback, ms, ...args) {\n            const handle = setTimeout(callback, ms, ...args);\n            return { dispose: () => clearTimeout(handle) };\n        },\n        setImmediate(callback, ...args) {\n            const handle = setImmediate(callback, ...args);\n            return { dispose: () => clearImmediate(handle) };\n        },\n        setInterval(callback, ms, ...args) {\n            const handle = setInterval(callback, ms, ...args);\n            return { dispose: () => clearInterval(handle) };\n        }\n    })\n});\nfunction RIL() {\n    return _ril;\n}\n(function (RIL) {\n    function install() {\n        api_1.RAL.install(_ril);\n    }\n    RIL.install = install;\n})(RIL || (RIL = {}));\nexports.default = RIL;\n", "\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createMessageConnection = exports.createServerSocketTransport = exports.createClientSocketTransport = exports.createServerPipeTransport = exports.createClientPipeTransport = exports.generateRandomPipeName = exports.StreamMessageWriter = exports.StreamMessageReader = exports.SocketMessageWriter = exports.SocketMessageReader = exports.PortMessageWriter = exports.PortMessageReader = exports.IPCMessageWriter = exports.IPCMessageReader = void 0;\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\nconst ril_1 = require(\"./ril\");\n// Install the node runtime abstract.\nril_1.default.install();\nconst path = require(\"path\");\nconst os = require(\"os\");\nconst crypto_1 = require(\"crypto\");\nconst net_1 = require(\"net\");\nconst api_1 = require(\"../common/api\");\n__exportStar(require(\"../common/api\"), exports);\nclass IPCMessageReader extends api_1.AbstractMessageReader {\n    constructor(process) {\n        super();\n        this.process = process;\n        let eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose());\n    }\n    listen(callback) {\n        this.process.on('message', callback);\n        return api_1.Disposable.create(() => this.process.off('message', callback));\n    }\n}\nexports.IPCMessageReader = IPCMessageReader;\nclass IPCMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(process) {\n        super();\n        this.process = process;\n        this.errorCount = 0;\n        const eventEmitter = this.process;\n        eventEmitter.on('error', (error) => this.fireError(error));\n        eventEmitter.on('close', () => this.fireClose);\n    }\n    write(msg) {\n        try {\n            if (typeof this.process.send === 'function') {\n                this.process.send(msg, undefined, undefined, (error) => {\n                    if (error) {\n                        this.errorCount++;\n                        this.handleError(error, msg);\n                    }\n                    else {\n                        this.errorCount = 0;\n                    }\n                });\n            }\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.IPCMessageWriter = IPCMessageWriter;\nclass PortMessageReader extends api_1.AbstractMessageReader {\n    constructor(port) {\n        super();\n        this.onData = new api_1.Emitter;\n        port.on('close', () => this.fireClose);\n        port.on('error', (error) => this.fireError(error));\n        port.on('message', (message) => {\n            this.onData.fire(message);\n        });\n    }\n    listen(callback) {\n        return this.onData.event(callback);\n    }\n}\nexports.PortMessageReader = PortMessageReader;\nclass PortMessageWriter extends api_1.AbstractMessageWriter {\n    constructor(port) {\n        super();\n        this.port = port;\n        this.errorCount = 0;\n        port.on('close', () => this.fireClose());\n        port.on('error', (error) => this.fireError(error));\n    }\n    write(msg) {\n        try {\n            this.port.postMessage(msg);\n            return Promise.resolve();\n        }\n        catch (error) {\n            this.handleError(error, msg);\n            return Promise.reject(error);\n        }\n    }\n    handleError(error, msg) {\n        this.errorCount++;\n        this.fireError(error, msg, this.errorCount);\n    }\n    end() {\n    }\n}\nexports.PortMessageWriter = PortMessageWriter;\nclass SocketMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(socket, encoding = 'utf-8') {\n        super((0, ril_1.default)().stream.asReadableStream(socket), encoding);\n    }\n}\nexports.SocketMessageReader = SocketMessageReader;\nclass SocketMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(socket, options) {\n        super((0, ril_1.default)().stream.asWritableStream(socket), options);\n        this.socket = socket;\n    }\n    dispose() {\n        super.dispose();\n        this.socket.destroy();\n    }\n}\nexports.SocketMessageWriter = SocketMessageWriter;\nclass StreamMessageReader extends api_1.ReadableStreamMessageReader {\n    constructor(readable, encoding) {\n        super((0, ril_1.default)().stream.asReadableStream(readable), encoding);\n    }\n}\nexports.StreamMessageReader = StreamMessageReader;\nclass StreamMessageWriter extends api_1.WriteableStreamMessageWriter {\n    constructor(writable, options) {\n        super((0, ril_1.default)().stream.asWritableStream(writable), options);\n    }\n}\nexports.StreamMessageWriter = StreamMessageWriter;\nconst XDG_RUNTIME_DIR = process.env['XDG_RUNTIME_DIR'];\nconst safeIpcPathLengths = new Map([\n    ['linux', 107],\n    ['darwin', 103]\n]);\nfunction generateRandomPipeName() {\n    const randomSuffix = (0, crypto_1.randomBytes)(21).toString('hex');\n    if (process.platform === 'win32') {\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\n    }\n    let result;\n    if (XDG_RUNTIME_DIR) {\n        result = path.join(XDG_RUNTIME_DIR, `vscode-ipc-${randomSuffix}.sock`);\n    }\n    else {\n        result = path.join(os.tmpdir(), `vscode-${randomSuffix}.sock`);\n    }\n    const limit = safeIpcPathLengths.get(process.platform);\n    if (limit !== undefined && result.length > limit) {\n        (0, ril_1.default)().console.warn(`WARNING: IPC handle \"${result}\" is longer than ${limit} characters.`);\n    }\n    return result;\n}\nexports.generateRandomPipeName = generateRandomPipeName;\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        let server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(pipeName, () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientPipeTransport = createClientPipeTransport;\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(pipeName);\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerPipeTransport = createServerPipeTransport;\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\n    let connectResolve;\n    const connected = new Promise((resolve, _reject) => {\n        connectResolve = resolve;\n    });\n    return new Promise((resolve, reject) => {\n        const server = (0, net_1.createServer)((socket) => {\n            server.close();\n            connectResolve([\n                new SocketMessageReader(socket, encoding),\n                new SocketMessageWriter(socket, encoding)\n            ]);\n        });\n        server.on('error', reject);\n        server.listen(port, '127.0.0.1', () => {\n            server.removeListener('error', reject);\n            resolve({\n                onConnected: () => { return connected; }\n            });\n        });\n    });\n}\nexports.createClientSocketTransport = createClientSocketTransport;\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\n    const socket = (0, net_1.createConnection)(port, '127.0.0.1');\n    return [\n        new SocketMessageReader(socket, encoding),\n        new SocketMessageWriter(socket, encoding)\n    ];\n}\nexports.createServerSocketTransport = createServerSocketTransport;\nfunction isReadableStream(value) {\n    const candidate = value;\n    return candidate.read !== undefined && candidate.addListener !== undefined;\n}\nfunction isWritableStream(value) {\n    const candidate = value;\n    return candidate.write !== undefined && candidate.addListener !== undefined;\n}\nfunction createMessageConnection(input, output, logger, options) {\n    if (!logger) {\n        logger = api_1.NullLogger;\n    }\n    const reader = isReadableStream(input) ? new StreamMessageReader(input) : input;\n    const writer = isWritableStream(output) ? new StreamMessageWriter(output) : output;\n    if (api_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, api_1.createMessageConnection)(reader, writer, logger, options);\n}\nexports.createMessageConnection = createMessageConnection;\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');", "(function (factory) {\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n        var v = factory(require, exports);\n        if (v !== undefined) module.exports = v;\n    }\n    else if (typeof define === \"function\" && define.amd) {\n        define([\"require\", \"exports\"], factory);\n    }\n})(function (require, exports) {\n    /* --------------------------------------------------------------------------------------------\n     * Copyright (c) Microsoft Corporation. All rights reserved.\n     * Licensed under the MIT License. See License.txt in the project root for license information.\n     * ------------------------------------------------------------------------------------------ */\n    'use strict';\n    Object.defineProperty(exports, \"__esModule\", { value: true });\n    exports.TextDocument = exports.EOL = exports.WorkspaceFolder = exports.InlineCompletionContext = exports.SelectedCompletionInfo = exports.InlineCompletionTriggerKind = exports.InlineCompletionList = exports.InlineCompletionItem = exports.StringValue = exports.InlayHint = exports.InlayHintLabelPart = exports.InlayHintKind = exports.InlineValueContext = exports.InlineValueEvaluatableExpression = exports.InlineValueVariableLookup = exports.InlineValueText = exports.SemanticTokens = exports.SemanticTokenModifiers = exports.SemanticTokenTypes = exports.SelectionRange = exports.DocumentLink = exports.FormattingOptions = exports.CodeLens = exports.CodeAction = exports.CodeActionContext = exports.CodeActionTriggerKind = exports.CodeActionKind = exports.DocumentSymbol = exports.WorkspaceSymbol = exports.SymbolInformation = exports.SymbolTag = exports.SymbolKind = exports.DocumentHighlight = exports.DocumentHighlightKind = exports.SignatureInformation = exports.ParameterInformation = exports.Hover = exports.MarkedString = exports.CompletionList = exports.CompletionItem = exports.CompletionItemLabelDetails = exports.InsertTextMode = exports.InsertReplaceEdit = exports.CompletionItemTag = exports.InsertTextFormat = exports.CompletionItemKind = exports.MarkupContent = exports.MarkupKind = exports.TextDocumentItem = exports.OptionalVersionedTextDocumentIdentifier = exports.VersionedTextDocumentIdentifier = exports.TextDocumentIdentifier = exports.WorkspaceChange = exports.WorkspaceEdit = exports.DeleteFile = exports.RenameFile = exports.CreateFile = exports.TextDocumentEdit = exports.AnnotatedTextEdit = exports.ChangeAnnotationIdentifier = exports.ChangeAnnotation = exports.TextEdit = exports.Command = exports.Diagnostic = exports.CodeDescription = exports.DiagnosticTag = exports.DiagnosticSeverity = exports.DiagnosticRelatedInformation = exports.FoldingRange = exports.FoldingRangeKind = exports.ColorPresentation = exports.ColorInformation = exports.Color = exports.LocationLink = exports.Location = exports.Range = exports.Position = exports.uinteger = exports.integer = exports.URI = exports.DocumentUri = void 0;\n    var DocumentUri;\n    (function (DocumentUri) {\n        function is(value) {\n            return typeof value === 'string';\n        }\n        DocumentUri.is = is;\n    })(DocumentUri || (exports.DocumentUri = DocumentUri = {}));\n    var URI;\n    (function (URI) {\n        function is(value) {\n            return typeof value === 'string';\n        }\n        URI.is = is;\n    })(URI || (exports.URI = URI = {}));\n    var integer;\n    (function (integer) {\n        integer.MIN_VALUE = -2147483648;\n        integer.MAX_VALUE = 2147483647;\n        function is(value) {\n            return typeof value === 'number' && integer.MIN_VALUE <= value && value <= integer.MAX_VALUE;\n        }\n        integer.is = is;\n    })(integer || (exports.integer = integer = {}));\n    var uinteger;\n    (function (uinteger) {\n        uinteger.MIN_VALUE = 0;\n        uinteger.MAX_VALUE = 2147483647;\n        function is(value) {\n            return typeof value === 'number' && uinteger.MIN_VALUE <= value && value <= uinteger.MAX_VALUE;\n        }\n        uinteger.is = is;\n    })(uinteger || (exports.uinteger = uinteger = {}));\n    /**\n     * The Position namespace provides helper functions to work with\n     * {@link Position} literals.\n     */\n    var Position;\n    (function (Position) {\n        /**\n         * Creates a new Position literal from the given line and character.\n         * @param line The position's line.\n         * @param character The position's character.\n         */\n        function create(line, character) {\n            if (line === Number.MAX_VALUE) {\n                line = uinteger.MAX_VALUE;\n            }\n            if (character === Number.MAX_VALUE) {\n                character = uinteger.MAX_VALUE;\n            }\n            return { line: line, character: character };\n        }\n        Position.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Position} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.uinteger(candidate.line) && Is.uinteger(candidate.character);\n        }\n        Position.is = is;\n    })(Position || (exports.Position = Position = {}));\n    /**\n     * The Range namespace provides helper functions to work with\n     * {@link Range} literals.\n     */\n    var Range;\n    (function (Range) {\n        function create(one, two, three, four) {\n            if (Is.uinteger(one) && Is.uinteger(two) && Is.uinteger(three) && Is.uinteger(four)) {\n                return { start: Position.create(one, two), end: Position.create(three, four) };\n            }\n            else if (Position.is(one) && Position.is(two)) {\n                return { start: one, end: two };\n            }\n            else {\n                throw new Error(\"Range#create called with invalid arguments[\".concat(one, \", \").concat(two, \", \").concat(three, \", \").concat(four, \"]\"));\n            }\n        }\n        Range.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Range} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\n        }\n        Range.is = is;\n    })(Range || (exports.Range = Range = {}));\n    /**\n     * The Location namespace provides helper functions to work with\n     * {@link Location} literals.\n     */\n    var Location;\n    (function (Location) {\n        /**\n         * Creates a Location literal.\n         * @param uri The location's uri.\n         * @param range The location's range.\n         */\n        function create(uri, range) {\n            return { uri: uri, range: range };\n        }\n        Location.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Location} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\n        }\n        Location.is = is;\n    })(Location || (exports.Location = Location = {}));\n    /**\n     * The LocationLink namespace provides helper functions to work with\n     * {@link LocationLink} literals.\n     */\n    var LocationLink;\n    (function (LocationLink) {\n        /**\n         * Creates a LocationLink literal.\n         * @param targetUri The definition's uri.\n         * @param targetRange The full range of the definition.\n         * @param targetSelectionRange The span of the symbol definition at the target.\n         * @param originSelectionRange The span of the symbol being defined in the originating source file.\n         */\n        function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\n            return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\n        }\n        LocationLink.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link LocationLink} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\n                && Range.is(candidate.targetSelectionRange)\n                && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\n        }\n        LocationLink.is = is;\n    })(LocationLink || (exports.LocationLink = LocationLink = {}));\n    /**\n     * The Color namespace provides helper functions to work with\n     * {@link Color} literals.\n     */\n    var Color;\n    (function (Color) {\n        /**\n         * Creates a new Color literal.\n         */\n        function create(red, green, blue, alpha) {\n            return {\n                red: red,\n                green: green,\n                blue: blue,\n                alpha: alpha,\n            };\n        }\n        Color.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Color} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.numberRange(candidate.red, 0, 1)\n                && Is.numberRange(candidate.green, 0, 1)\n                && Is.numberRange(candidate.blue, 0, 1)\n                && Is.numberRange(candidate.alpha, 0, 1);\n        }\n        Color.is = is;\n    })(Color || (exports.Color = Color = {}));\n    /**\n     * The ColorInformation namespace provides helper functions to work with\n     * {@link ColorInformation} literals.\n     */\n    var ColorInformation;\n    (function (ColorInformation) {\n        /**\n         * Creates a new ColorInformation literal.\n         */\n        function create(range, color) {\n            return {\n                range: range,\n                color: color,\n            };\n        }\n        ColorInformation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && Color.is(candidate.color);\n        }\n        ColorInformation.is = is;\n    })(ColorInformation || (exports.ColorInformation = ColorInformation = {}));\n    /**\n     * The Color namespace provides helper functions to work with\n     * {@link ColorPresentation} literals.\n     */\n    var ColorPresentation;\n    (function (ColorPresentation) {\n        /**\n         * Creates a new ColorInformation literal.\n         */\n        function create(label, textEdit, additionalTextEdits) {\n            return {\n                label: label,\n                textEdit: textEdit,\n                additionalTextEdits: additionalTextEdits,\n            };\n        }\n        ColorPresentation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ColorInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.label)\n                && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\n                && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\n        }\n        ColorPresentation.is = is;\n    })(ColorPresentation || (exports.ColorPresentation = ColorPresentation = {}));\n    /**\n     * A set of predefined range kinds.\n     */\n    var FoldingRangeKind;\n    (function (FoldingRangeKind) {\n        /**\n         * Folding range for a comment\n         */\n        FoldingRangeKind.Comment = 'comment';\n        /**\n         * Folding range for an import or include\n         */\n        FoldingRangeKind.Imports = 'imports';\n        /**\n         * Folding range for a region (e.g. `#region`)\n         */\n        FoldingRangeKind.Region = 'region';\n    })(FoldingRangeKind || (exports.FoldingRangeKind = FoldingRangeKind = {}));\n    /**\n     * The folding range namespace provides helper functions to work with\n     * {@link FoldingRange} literals.\n     */\n    var FoldingRange;\n    (function (FoldingRange) {\n        /**\n         * Creates a new FoldingRange literal.\n         */\n        function create(startLine, endLine, startCharacter, endCharacter, kind, collapsedText) {\n            var result = {\n                startLine: startLine,\n                endLine: endLine\n            };\n            if (Is.defined(startCharacter)) {\n                result.startCharacter = startCharacter;\n            }\n            if (Is.defined(endCharacter)) {\n                result.endCharacter = endCharacter;\n            }\n            if (Is.defined(kind)) {\n                result.kind = kind;\n            }\n            if (Is.defined(collapsedText)) {\n                result.collapsedText = collapsedText;\n            }\n            return result;\n        }\n        FoldingRange.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link FoldingRange} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.uinteger(candidate.startLine) && Is.uinteger(candidate.startLine)\n                && (Is.undefined(candidate.startCharacter) || Is.uinteger(candidate.startCharacter))\n                && (Is.undefined(candidate.endCharacter) || Is.uinteger(candidate.endCharacter))\n                && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\n        }\n        FoldingRange.is = is;\n    })(FoldingRange || (exports.FoldingRange = FoldingRange = {}));\n    /**\n     * The DiagnosticRelatedInformation namespace provides helper functions to work with\n     * {@link DiagnosticRelatedInformation} literals.\n     */\n    var DiagnosticRelatedInformation;\n    (function (DiagnosticRelatedInformation) {\n        /**\n         * Creates a new DiagnosticRelatedInformation literal.\n         */\n        function create(location, message) {\n            return {\n                location: location,\n                message: message\n            };\n        }\n        DiagnosticRelatedInformation.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DiagnosticRelatedInformation} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\n        }\n        DiagnosticRelatedInformation.is = is;\n    })(DiagnosticRelatedInformation || (exports.DiagnosticRelatedInformation = DiagnosticRelatedInformation = {}));\n    /**\n     * The diagnostic's severity.\n     */\n    var DiagnosticSeverity;\n    (function (DiagnosticSeverity) {\n        /**\n         * Reports an error.\n         */\n        DiagnosticSeverity.Error = 1;\n        /**\n         * Reports a warning.\n         */\n        DiagnosticSeverity.Warning = 2;\n        /**\n         * Reports an information.\n         */\n        DiagnosticSeverity.Information = 3;\n        /**\n         * Reports a hint.\n         */\n        DiagnosticSeverity.Hint = 4;\n    })(DiagnosticSeverity || (exports.DiagnosticSeverity = DiagnosticSeverity = {}));\n    /**\n     * The diagnostic tags.\n     *\n     * @since 3.15.0\n     */\n    var DiagnosticTag;\n    (function (DiagnosticTag) {\n        /**\n         * Unused or unnecessary code.\n         *\n         * Clients are allowed to render diagnostics with this tag faded out instead of having\n         * an error squiggle.\n         */\n        DiagnosticTag.Unnecessary = 1;\n        /**\n         * Deprecated or obsolete code.\n         *\n         * Clients are allowed to rendered diagnostics with this tag strike through.\n         */\n        DiagnosticTag.Deprecated = 2;\n    })(DiagnosticTag || (exports.DiagnosticTag = DiagnosticTag = {}));\n    /**\n     * The CodeDescription namespace provides functions to deal with descriptions for diagnostic codes.\n     *\n     * @since 3.16.0\n     */\n    var CodeDescription;\n    (function (CodeDescription) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.href);\n        }\n        CodeDescription.is = is;\n    })(CodeDescription || (exports.CodeDescription = CodeDescription = {}));\n    /**\n     * The Diagnostic namespace provides helper functions to work with\n     * {@link Diagnostic} literals.\n     */\n    var Diagnostic;\n    (function (Diagnostic) {\n        /**\n         * Creates a new Diagnostic literal.\n         */\n        function create(range, message, severity, code, source, relatedInformation) {\n            var result = { range: range, message: message };\n            if (Is.defined(severity)) {\n                result.severity = severity;\n            }\n            if (Is.defined(code)) {\n                result.code = code;\n            }\n            if (Is.defined(source)) {\n                result.source = source;\n            }\n            if (Is.defined(relatedInformation)) {\n                result.relatedInformation = relatedInformation;\n            }\n            return result;\n        }\n        Diagnostic.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Diagnostic} interface.\n         */\n        function is(value) {\n            var _a;\n            var candidate = value;\n            return Is.defined(candidate)\n                && Range.is(candidate.range)\n                && Is.string(candidate.message)\n                && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\n                && (Is.integer(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\n                && (Is.undefined(candidate.codeDescription) || (Is.string((_a = candidate.codeDescription) === null || _a === void 0 ? void 0 : _a.href)))\n                && (Is.string(candidate.source) || Is.undefined(candidate.source))\n                && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\n        }\n        Diagnostic.is = is;\n    })(Diagnostic || (exports.Diagnostic = Diagnostic = {}));\n    /**\n     * The Command namespace provides helper functions to work with\n     * {@link Command} literals.\n     */\n    var Command;\n    (function (Command) {\n        /**\n         * Creates a new Command literal.\n         */\n        function create(title, command) {\n            var args = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                args[_i - 2] = arguments[_i];\n            }\n            var result = { title: title, command: command };\n            if (Is.defined(args) && args.length > 0) {\n                result.arguments = args;\n            }\n            return result;\n        }\n        Command.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link Command} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\n        }\n        Command.is = is;\n    })(Command || (exports.Command = Command = {}));\n    /**\n     * The TextEdit namespace provides helper function to create replace,\n     * insert and delete edits more easily.\n     */\n    var TextEdit;\n    (function (TextEdit) {\n        /**\n         * Creates a replace text edit.\n         * @param range The range of text to be replaced.\n         * @param newText The new text.\n         */\n        function replace(range, newText) {\n            return { range: range, newText: newText };\n        }\n        TextEdit.replace = replace;\n        /**\n         * Creates an insert text edit.\n         * @param position The position to insert the text at.\n         * @param newText The text to be inserted.\n         */\n        function insert(position, newText) {\n            return { range: { start: position, end: position }, newText: newText };\n        }\n        TextEdit.insert = insert;\n        /**\n         * Creates a delete text edit.\n         * @param range The range of text to be deleted.\n         */\n        function del(range) {\n            return { range: range, newText: '' };\n        }\n        TextEdit.del = del;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate)\n                && Is.string(candidate.newText)\n                && Range.is(candidate.range);\n        }\n        TextEdit.is = is;\n    })(TextEdit || (exports.TextEdit = TextEdit = {}));\n    var ChangeAnnotation;\n    (function (ChangeAnnotation) {\n        function create(label, needsConfirmation, description) {\n            var result = { label: label };\n            if (needsConfirmation !== undefined) {\n                result.needsConfirmation = needsConfirmation;\n            }\n            if (description !== undefined) {\n                result.description = description;\n            }\n            return result;\n        }\n        ChangeAnnotation.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Is.string(candidate.label) &&\n                (Is.boolean(candidate.needsConfirmation) || candidate.needsConfirmation === undefined) &&\n                (Is.string(candidate.description) || candidate.description === undefined);\n        }\n        ChangeAnnotation.is = is;\n    })(ChangeAnnotation || (exports.ChangeAnnotation = ChangeAnnotation = {}));\n    var ChangeAnnotationIdentifier;\n    (function (ChangeAnnotationIdentifier) {\n        function is(value) {\n            var candidate = value;\n            return Is.string(candidate);\n        }\n        ChangeAnnotationIdentifier.is = is;\n    })(ChangeAnnotationIdentifier || (exports.ChangeAnnotationIdentifier = ChangeAnnotationIdentifier = {}));\n    var AnnotatedTextEdit;\n    (function (AnnotatedTextEdit) {\n        /**\n         * Creates an annotated replace text edit.\n         *\n         * @param range The range of text to be replaced.\n         * @param newText The new text.\n         * @param annotation The annotation.\n         */\n        function replace(range, newText, annotation) {\n            return { range: range, newText: newText, annotationId: annotation };\n        }\n        AnnotatedTextEdit.replace = replace;\n        /**\n         * Creates an annotated insert text edit.\n         *\n         * @param position The position to insert the text at.\n         * @param newText The text to be inserted.\n         * @param annotation The annotation.\n         */\n        function insert(position, newText, annotation) {\n            return { range: { start: position, end: position }, newText: newText, annotationId: annotation };\n        }\n        AnnotatedTextEdit.insert = insert;\n        /**\n         * Creates an annotated delete text edit.\n         *\n         * @param range The range of text to be deleted.\n         * @param annotation The annotation.\n         */\n        function del(range, annotation) {\n            return { range: range, newText: '', annotationId: annotation };\n        }\n        AnnotatedTextEdit.del = del;\n        function is(value) {\n            var candidate = value;\n            return TextEdit.is(candidate) && (ChangeAnnotation.is(candidate.annotationId) || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        AnnotatedTextEdit.is = is;\n    })(AnnotatedTextEdit || (exports.AnnotatedTextEdit = AnnotatedTextEdit = {}));\n    /**\n     * The TextDocumentEdit namespace provides helper function to create\n     * an edit that manipulates a text document.\n     */\n    var TextDocumentEdit;\n    (function (TextDocumentEdit) {\n        /**\n         * Creates a new `TextDocumentEdit`\n         */\n        function create(textDocument, edits) {\n            return { textDocument: textDocument, edits: edits };\n        }\n        TextDocumentEdit.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate)\n                && OptionalVersionedTextDocumentIdentifier.is(candidate.textDocument)\n                && Array.isArray(candidate.edits);\n        }\n        TextDocumentEdit.is = is;\n    })(TextDocumentEdit || (exports.TextDocumentEdit = TextDocumentEdit = {}));\n    var CreateFile;\n    (function (CreateFile) {\n        function create(uri, options, annotation) {\n            var result = {\n                kind: 'create',\n                uri: uri\n            };\n            if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        CreateFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'create' && Is.string(candidate.uri) && (candidate.options === undefined ||\n                ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        CreateFile.is = is;\n    })(CreateFile || (exports.CreateFile = CreateFile = {}));\n    var RenameFile;\n    (function (RenameFile) {\n        function create(oldUri, newUri, options, annotation) {\n            var result = {\n                kind: 'rename',\n                oldUri: oldUri,\n                newUri: newUri\n            };\n            if (options !== undefined && (options.overwrite !== undefined || options.ignoreIfExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        RenameFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) && (candidate.options === undefined ||\n                ((candidate.options.overwrite === undefined || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === undefined || Is.boolean(candidate.options.ignoreIfExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        RenameFile.is = is;\n    })(RenameFile || (exports.RenameFile = RenameFile = {}));\n    var DeleteFile;\n    (function (DeleteFile) {\n        function create(uri, options, annotation) {\n            var result = {\n                kind: 'delete',\n                uri: uri\n            };\n            if (options !== undefined && (options.recursive !== undefined || options.ignoreIfNotExists !== undefined)) {\n                result.options = options;\n            }\n            if (annotation !== undefined) {\n                result.annotationId = annotation;\n            }\n            return result;\n        }\n        DeleteFile.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) && (candidate.options === undefined ||\n                ((candidate.options.recursive === undefined || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === undefined || Is.boolean(candidate.options.ignoreIfNotExists)))) && (candidate.annotationId === undefined || ChangeAnnotationIdentifier.is(candidate.annotationId));\n        }\n        DeleteFile.is = is;\n    })(DeleteFile || (exports.DeleteFile = DeleteFile = {}));\n    var WorkspaceEdit;\n    (function (WorkspaceEdit) {\n        function is(value) {\n            var candidate = value;\n            return candidate &&\n                (candidate.changes !== undefined || candidate.documentChanges !== undefined) &&\n                (candidate.documentChanges === undefined || candidate.documentChanges.every(function (change) {\n                    if (Is.string(change.kind)) {\n                        return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\n                    }\n                    else {\n                        return TextDocumentEdit.is(change);\n                    }\n                }));\n        }\n        WorkspaceEdit.is = is;\n    })(WorkspaceEdit || (exports.WorkspaceEdit = WorkspaceEdit = {}));\n    var TextEditChangeImpl = /** @class */ (function () {\n        function TextEditChangeImpl(edits, changeAnnotations) {\n            this.edits = edits;\n            this.changeAnnotations = changeAnnotations;\n        }\n        TextEditChangeImpl.prototype.insert = function (position, newText, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.insert(position, newText);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.insert(position, newText, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.insert(position, newText, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.replace = function (range, newText, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.replace(range, newText);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.replace(range, newText, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.replace(range, newText, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.delete = function (range, annotation) {\n            var edit;\n            var id;\n            if (annotation === undefined) {\n                edit = TextEdit.del(range);\n            }\n            else if (ChangeAnnotationIdentifier.is(annotation)) {\n                id = annotation;\n                edit = AnnotatedTextEdit.del(range, annotation);\n            }\n            else {\n                this.assertChangeAnnotations(this.changeAnnotations);\n                id = this.changeAnnotations.manage(annotation);\n                edit = AnnotatedTextEdit.del(range, id);\n            }\n            this.edits.push(edit);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        TextEditChangeImpl.prototype.add = function (edit) {\n            this.edits.push(edit);\n        };\n        TextEditChangeImpl.prototype.all = function () {\n            return this.edits;\n        };\n        TextEditChangeImpl.prototype.clear = function () {\n            this.edits.splice(0, this.edits.length);\n        };\n        TextEditChangeImpl.prototype.assertChangeAnnotations = function (value) {\n            if (value === undefined) {\n                throw new Error(\"Text edit change is not configured to manage change annotations.\");\n            }\n        };\n        return TextEditChangeImpl;\n    }());\n    /**\n     * A helper class\n     */\n    var ChangeAnnotations = /** @class */ (function () {\n        function ChangeAnnotations(annotations) {\n            this._annotations = annotations === undefined ? Object.create(null) : annotations;\n            this._counter = 0;\n            this._size = 0;\n        }\n        ChangeAnnotations.prototype.all = function () {\n            return this._annotations;\n        };\n        Object.defineProperty(ChangeAnnotations.prototype, \"size\", {\n            get: function () {\n                return this._size;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ChangeAnnotations.prototype.manage = function (idOrAnnotation, annotation) {\n            var id;\n            if (ChangeAnnotationIdentifier.is(idOrAnnotation)) {\n                id = idOrAnnotation;\n            }\n            else {\n                id = this.nextId();\n                annotation = idOrAnnotation;\n            }\n            if (this._annotations[id] !== undefined) {\n                throw new Error(\"Id \".concat(id, \" is already in use.\"));\n            }\n            if (annotation === undefined) {\n                throw new Error(\"No annotation provided for id \".concat(id));\n            }\n            this._annotations[id] = annotation;\n            this._size++;\n            return id;\n        };\n        ChangeAnnotations.prototype.nextId = function () {\n            this._counter++;\n            return this._counter.toString();\n        };\n        return ChangeAnnotations;\n    }());\n    /**\n     * A workspace change helps constructing changes to a workspace.\n     */\n    var WorkspaceChange = /** @class */ (function () {\n        function WorkspaceChange(workspaceEdit) {\n            var _this = this;\n            this._textEditChanges = Object.create(null);\n            if (workspaceEdit !== undefined) {\n                this._workspaceEdit = workspaceEdit;\n                if (workspaceEdit.documentChanges) {\n                    this._changeAnnotations = new ChangeAnnotations(workspaceEdit.changeAnnotations);\n                    workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                    workspaceEdit.documentChanges.forEach(function (change) {\n                        if (TextDocumentEdit.is(change)) {\n                            var textEditChange = new TextEditChangeImpl(change.edits, _this._changeAnnotations);\n                            _this._textEditChanges[change.textDocument.uri] = textEditChange;\n                        }\n                    });\n                }\n                else if (workspaceEdit.changes) {\n                    Object.keys(workspaceEdit.changes).forEach(function (key) {\n                        var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\n                        _this._textEditChanges[key] = textEditChange;\n                    });\n                }\n            }\n            else {\n                this._workspaceEdit = {};\n            }\n        }\n        Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\n            /**\n             * Returns the underlying {@link WorkspaceEdit} literal\n             * use to be returned from a workspace edit operation like rename.\n             */\n            get: function () {\n                this.initDocumentChanges();\n                if (this._changeAnnotations !== undefined) {\n                    if (this._changeAnnotations.size === 0) {\n                        this._workspaceEdit.changeAnnotations = undefined;\n                    }\n                    else {\n                        this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n                    }\n                }\n                return this._workspaceEdit;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        WorkspaceChange.prototype.getTextEditChange = function (key) {\n            if (OptionalVersionedTextDocumentIdentifier.is(key)) {\n                this.initDocumentChanges();\n                if (this._workspaceEdit.documentChanges === undefined) {\n                    throw new Error('Workspace edit is not configured for document changes.');\n                }\n                var textDocument = { uri: key.uri, version: key.version };\n                var result = this._textEditChanges[textDocument.uri];\n                if (!result) {\n                    var edits = [];\n                    var textDocumentEdit = {\n                        textDocument: textDocument,\n                        edits: edits\n                    };\n                    this._workspaceEdit.documentChanges.push(textDocumentEdit);\n                    result = new TextEditChangeImpl(edits, this._changeAnnotations);\n                    this._textEditChanges[textDocument.uri] = result;\n                }\n                return result;\n            }\n            else {\n                this.initChanges();\n                if (this._workspaceEdit.changes === undefined) {\n                    throw new Error('Workspace edit is not configured for normal text edit changes.');\n                }\n                var result = this._textEditChanges[key];\n                if (!result) {\n                    var edits = [];\n                    this._workspaceEdit.changes[key] = edits;\n                    result = new TextEditChangeImpl(edits);\n                    this._textEditChanges[key] = result;\n                }\n                return result;\n            }\n        };\n        WorkspaceChange.prototype.initDocumentChanges = function () {\n            if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n                this._changeAnnotations = new ChangeAnnotations();\n                this._workspaceEdit.documentChanges = [];\n                this._workspaceEdit.changeAnnotations = this._changeAnnotations.all();\n            }\n        };\n        WorkspaceChange.prototype.initChanges = function () {\n            if (this._workspaceEdit.documentChanges === undefined && this._workspaceEdit.changes === undefined) {\n                this._workspaceEdit.changes = Object.create(null);\n            }\n        };\n        WorkspaceChange.prototype.createFile = function (uri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = CreateFile.create(uri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = CreateFile.create(uri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        WorkspaceChange.prototype.renameFile = function (oldUri, newUri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = RenameFile.create(oldUri, newUri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = RenameFile.create(oldUri, newUri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        WorkspaceChange.prototype.deleteFile = function (uri, optionsOrAnnotation, options) {\n            this.initDocumentChanges();\n            if (this._workspaceEdit.documentChanges === undefined) {\n                throw new Error('Workspace edit is not configured for document changes.');\n            }\n            var annotation;\n            if (ChangeAnnotation.is(optionsOrAnnotation) || ChangeAnnotationIdentifier.is(optionsOrAnnotation)) {\n                annotation = optionsOrAnnotation;\n            }\n            else {\n                options = optionsOrAnnotation;\n            }\n            var operation;\n            var id;\n            if (annotation === undefined) {\n                operation = DeleteFile.create(uri, options);\n            }\n            else {\n                id = ChangeAnnotationIdentifier.is(annotation) ? annotation : this._changeAnnotations.manage(annotation);\n                operation = DeleteFile.create(uri, options, id);\n            }\n            this._workspaceEdit.documentChanges.push(operation);\n            if (id !== undefined) {\n                return id;\n            }\n        };\n        return WorkspaceChange;\n    }());\n    exports.WorkspaceChange = WorkspaceChange;\n    /**\n     * The TextDocumentIdentifier namespace provides helper functions to work with\n     * {@link TextDocumentIdentifier} literals.\n     */\n    var TextDocumentIdentifier;\n    (function (TextDocumentIdentifier) {\n        /**\n         * Creates a new TextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         */\n        function create(uri) {\n            return { uri: uri };\n        }\n        TextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link TextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri);\n        }\n        TextDocumentIdentifier.is = is;\n    })(TextDocumentIdentifier || (exports.TextDocumentIdentifier = TextDocumentIdentifier = {}));\n    /**\n     * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\n     * {@link VersionedTextDocumentIdentifier} literals.\n     */\n    var VersionedTextDocumentIdentifier;\n    (function (VersionedTextDocumentIdentifier) {\n        /**\n         * Creates a new VersionedTextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         * @param version The document's version.\n         */\n        function create(uri, version) {\n            return { uri: uri, version: version };\n        }\n        VersionedTextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link VersionedTextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.integer(candidate.version);\n        }\n        VersionedTextDocumentIdentifier.is = is;\n    })(VersionedTextDocumentIdentifier || (exports.VersionedTextDocumentIdentifier = VersionedTextDocumentIdentifier = {}));\n    /**\n     * The OptionalVersionedTextDocumentIdentifier namespace provides helper functions to work with\n     * {@link OptionalVersionedTextDocumentIdentifier} literals.\n     */\n    var OptionalVersionedTextDocumentIdentifier;\n    (function (OptionalVersionedTextDocumentIdentifier) {\n        /**\n         * Creates a new OptionalVersionedTextDocumentIdentifier literal.\n         * @param uri The document's uri.\n         * @param version The document's version.\n         */\n        function create(uri, version) {\n            return { uri: uri, version: version };\n        }\n        OptionalVersionedTextDocumentIdentifier.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link OptionalVersionedTextDocumentIdentifier} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.integer(candidate.version));\n        }\n        OptionalVersionedTextDocumentIdentifier.is = is;\n    })(OptionalVersionedTextDocumentIdentifier || (exports.OptionalVersionedTextDocumentIdentifier = OptionalVersionedTextDocumentIdentifier = {}));\n    /**\n     * The TextDocumentItem namespace provides helper functions to work with\n     * {@link TextDocumentItem} literals.\n     */\n    var TextDocumentItem;\n    (function (TextDocumentItem) {\n        /**\n         * Creates a new TextDocumentItem literal.\n         * @param uri The document's uri.\n         * @param languageId The document's language identifier.\n         * @param version The document's version number.\n         * @param text The document's text.\n         */\n        function create(uri, languageId, version, text) {\n            return { uri: uri, languageId: languageId, version: version, text: text };\n        }\n        TextDocumentItem.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link TextDocumentItem} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.integer(candidate.version) && Is.string(candidate.text);\n        }\n        TextDocumentItem.is = is;\n    })(TextDocumentItem || (exports.TextDocumentItem = TextDocumentItem = {}));\n    /**\n     * Describes the content type that a client supports in various\n     * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\n     *\n     * Please note that `MarkupKinds` must not start with a `$`. This kinds\n     * are reserved for internal usage.\n     */\n    var MarkupKind;\n    (function (MarkupKind) {\n        /**\n         * Plain text is supported as a content format\n         */\n        MarkupKind.PlainText = 'plaintext';\n        /**\n         * Markdown is supported as a content format\n         */\n        MarkupKind.Markdown = 'markdown';\n        /**\n         * Checks whether the given value is a value of the {@link MarkupKind} type.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\n        }\n        MarkupKind.is = is;\n    })(MarkupKind || (exports.MarkupKind = MarkupKind = {}));\n    var MarkupContent;\n    (function (MarkupContent) {\n        /**\n         * Checks whether the given value conforms to the {@link MarkupContent} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\n        }\n        MarkupContent.is = is;\n    })(MarkupContent || (exports.MarkupContent = MarkupContent = {}));\n    /**\n     * The kind of a completion entry.\n     */\n    var CompletionItemKind;\n    (function (CompletionItemKind) {\n        CompletionItemKind.Text = 1;\n        CompletionItemKind.Method = 2;\n        CompletionItemKind.Function = 3;\n        CompletionItemKind.Constructor = 4;\n        CompletionItemKind.Field = 5;\n        CompletionItemKind.Variable = 6;\n        CompletionItemKind.Class = 7;\n        CompletionItemKind.Interface = 8;\n        CompletionItemKind.Module = 9;\n        CompletionItemKind.Property = 10;\n        CompletionItemKind.Unit = 11;\n        CompletionItemKind.Value = 12;\n        CompletionItemKind.Enum = 13;\n        CompletionItemKind.Keyword = 14;\n        CompletionItemKind.Snippet = 15;\n        CompletionItemKind.Color = 16;\n        CompletionItemKind.File = 17;\n        CompletionItemKind.Reference = 18;\n        CompletionItemKind.Folder = 19;\n        CompletionItemKind.EnumMember = 20;\n        CompletionItemKind.Constant = 21;\n        CompletionItemKind.Struct = 22;\n        CompletionItemKind.Event = 23;\n        CompletionItemKind.Operator = 24;\n        CompletionItemKind.TypeParameter = 25;\n    })(CompletionItemKind || (exports.CompletionItemKind = CompletionItemKind = {}));\n    /**\n     * Defines whether the insert text in a completion item should be interpreted as\n     * plain text or a snippet.\n     */\n    var InsertTextFormat;\n    (function (InsertTextFormat) {\n        /**\n         * The primary text to be inserted is treated as a plain string.\n         */\n        InsertTextFormat.PlainText = 1;\n        /**\n         * The primary text to be inserted is treated as a snippet.\n         *\n         * A snippet can define tab stops and placeholders with `$1`, `$2`\n         * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\n         * the end of the snippet. Placeholders with equal identifiers are linked,\n         * that is typing in one will update others too.\n         *\n         * See also: https://microsoft.github.io/language-server-protocol/specifications/specification-current/#snippet_syntax\n         */\n        InsertTextFormat.Snippet = 2;\n    })(InsertTextFormat || (exports.InsertTextFormat = InsertTextFormat = {}));\n    /**\n     * Completion item tags are extra annotations that tweak the rendering of a completion\n     * item.\n     *\n     * @since 3.15.0\n     */\n    var CompletionItemTag;\n    (function (CompletionItemTag) {\n        /**\n         * Render a completion as obsolete, usually using a strike-out.\n         */\n        CompletionItemTag.Deprecated = 1;\n    })(CompletionItemTag || (exports.CompletionItemTag = CompletionItemTag = {}));\n    /**\n     * The InsertReplaceEdit namespace provides functions to deal with insert / replace edits.\n     *\n     * @since 3.16.0\n     */\n    var InsertReplaceEdit;\n    (function (InsertReplaceEdit) {\n        /**\n         * Creates a new insert / replace edit\n         */\n        function create(newText, insert, replace) {\n            return { newText: newText, insert: insert, replace: replace };\n        }\n        InsertReplaceEdit.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link InsertReplaceEdit} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate && Is.string(candidate.newText) && Range.is(candidate.insert) && Range.is(candidate.replace);\n        }\n        InsertReplaceEdit.is = is;\n    })(InsertReplaceEdit || (exports.InsertReplaceEdit = InsertReplaceEdit = {}));\n    /**\n     * How whitespace and indentation is handled during completion\n     * item insertion.\n     *\n     * @since 3.16.0\n     */\n    var InsertTextMode;\n    (function (InsertTextMode) {\n        /**\n         * The insertion or replace strings is taken as it is. If the\n         * value is multi line the lines below the cursor will be\n         * inserted using the indentation defined in the string value.\n         * The client will not apply any kind of adjustments to the\n         * string.\n         */\n        InsertTextMode.asIs = 1;\n        /**\n         * The editor adjusts leading whitespace of new lines so that\n         * they match the indentation up to the cursor of the line for\n         * which the item is accepted.\n         *\n         * Consider a line like this: <2tabs><cursor><3tabs>foo. Accepting a\n         * multi line completion item is indented using 2 tabs and all\n         * following lines inserted will be indented using 2 tabs as well.\n         */\n        InsertTextMode.adjustIndentation = 2;\n    })(InsertTextMode || (exports.InsertTextMode = InsertTextMode = {}));\n    var CompletionItemLabelDetails;\n    (function (CompletionItemLabelDetails) {\n        function is(value) {\n            var candidate = value;\n            return candidate && (Is.string(candidate.detail) || candidate.detail === undefined) &&\n                (Is.string(candidate.description) || candidate.description === undefined);\n        }\n        CompletionItemLabelDetails.is = is;\n    })(CompletionItemLabelDetails || (exports.CompletionItemLabelDetails = CompletionItemLabelDetails = {}));\n    /**\n     * The CompletionItem namespace provides functions to deal with\n     * completion items.\n     */\n    var CompletionItem;\n    (function (CompletionItem) {\n        /**\n         * Create a completion item and seed it with a label.\n         * @param label The completion item's label\n         */\n        function create(label) {\n            return { label: label };\n        }\n        CompletionItem.create = create;\n    })(CompletionItem || (exports.CompletionItem = CompletionItem = {}));\n    /**\n     * The CompletionList namespace provides functions to deal with\n     * completion lists.\n     */\n    var CompletionList;\n    (function (CompletionList) {\n        /**\n         * Creates a new completion list.\n         *\n         * @param items The completion items.\n         * @param isIncomplete The list is not complete.\n         */\n        function create(items, isIncomplete) {\n            return { items: items ? items : [], isIncomplete: !!isIncomplete };\n        }\n        CompletionList.create = create;\n    })(CompletionList || (exports.CompletionList = CompletionList = {}));\n    var MarkedString;\n    (function (MarkedString) {\n        /**\n         * Creates a marked string from plain text.\n         *\n         * @param plainText The plain text.\n         */\n        function fromPlainText(plainText) {\n            return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n        }\n        MarkedString.fromPlainText = fromPlainText;\n        /**\n         * Checks whether the given value conforms to the {@link MarkedString} type.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\n        }\n        MarkedString.is = is;\n    })(MarkedString || (exports.MarkedString = MarkedString = {}));\n    var Hover;\n    (function (Hover) {\n        /**\n         * Checks whether the given value conforms to the {@link Hover} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\n                MarkedString.is(candidate.contents) ||\n                Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === undefined || Range.is(value.range));\n        }\n        Hover.is = is;\n    })(Hover || (exports.Hover = Hover = {}));\n    /**\n     * The ParameterInformation namespace provides helper functions to work with\n     * {@link ParameterInformation} literals.\n     */\n    var ParameterInformation;\n    (function (ParameterInformation) {\n        /**\n         * Creates a new parameter information literal.\n         *\n         * @param label A label string.\n         * @param documentation A doc string.\n         */\n        function create(label, documentation) {\n            return documentation ? { label: label, documentation: documentation } : { label: label };\n        }\n        ParameterInformation.create = create;\n    })(ParameterInformation || (exports.ParameterInformation = ParameterInformation = {}));\n    /**\n     * The SignatureInformation namespace provides helper functions to work with\n     * {@link SignatureInformation} literals.\n     */\n    var SignatureInformation;\n    (function (SignatureInformation) {\n        function create(label, documentation) {\n            var parameters = [];\n            for (var _i = 2; _i < arguments.length; _i++) {\n                parameters[_i - 2] = arguments[_i];\n            }\n            var result = { label: label };\n            if (Is.defined(documentation)) {\n                result.documentation = documentation;\n            }\n            if (Is.defined(parameters)) {\n                result.parameters = parameters;\n            }\n            else {\n                result.parameters = [];\n            }\n            return result;\n        }\n        SignatureInformation.create = create;\n    })(SignatureInformation || (exports.SignatureInformation = SignatureInformation = {}));\n    /**\n     * A document highlight kind.\n     */\n    var DocumentHighlightKind;\n    (function (DocumentHighlightKind) {\n        /**\n         * A textual occurrence.\n         */\n        DocumentHighlightKind.Text = 1;\n        /**\n         * Read-access of a symbol, like reading a variable.\n         */\n        DocumentHighlightKind.Read = 2;\n        /**\n         * Write-access of a symbol, like writing to a variable.\n         */\n        DocumentHighlightKind.Write = 3;\n    })(DocumentHighlightKind || (exports.DocumentHighlightKind = DocumentHighlightKind = {}));\n    /**\n     * DocumentHighlight namespace to provide helper functions to work with\n     * {@link DocumentHighlight} literals.\n     */\n    var DocumentHighlight;\n    (function (DocumentHighlight) {\n        /**\n         * Create a DocumentHighlight object.\n         * @param range The range the highlight applies to.\n         * @param kind The highlight kind\n         */\n        function create(range, kind) {\n            var result = { range: range };\n            if (Is.number(kind)) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        DocumentHighlight.create = create;\n    })(DocumentHighlight || (exports.DocumentHighlight = DocumentHighlight = {}));\n    /**\n     * A symbol kind.\n     */\n    var SymbolKind;\n    (function (SymbolKind) {\n        SymbolKind.File = 1;\n        SymbolKind.Module = 2;\n        SymbolKind.Namespace = 3;\n        SymbolKind.Package = 4;\n        SymbolKind.Class = 5;\n        SymbolKind.Method = 6;\n        SymbolKind.Property = 7;\n        SymbolKind.Field = 8;\n        SymbolKind.Constructor = 9;\n        SymbolKind.Enum = 10;\n        SymbolKind.Interface = 11;\n        SymbolKind.Function = 12;\n        SymbolKind.Variable = 13;\n        SymbolKind.Constant = 14;\n        SymbolKind.String = 15;\n        SymbolKind.Number = 16;\n        SymbolKind.Boolean = 17;\n        SymbolKind.Array = 18;\n        SymbolKind.Object = 19;\n        SymbolKind.Key = 20;\n        SymbolKind.Null = 21;\n        SymbolKind.EnumMember = 22;\n        SymbolKind.Struct = 23;\n        SymbolKind.Event = 24;\n        SymbolKind.Operator = 25;\n        SymbolKind.TypeParameter = 26;\n    })(SymbolKind || (exports.SymbolKind = SymbolKind = {}));\n    /**\n     * Symbol tags are extra annotations that tweak the rendering of a symbol.\n     *\n     * @since 3.16\n     */\n    var SymbolTag;\n    (function (SymbolTag) {\n        /**\n         * Render a symbol as obsolete, usually using a strike-out.\n         */\n        SymbolTag.Deprecated = 1;\n    })(SymbolTag || (exports.SymbolTag = SymbolTag = {}));\n    var SymbolInformation;\n    (function (SymbolInformation) {\n        /**\n         * Creates a new symbol information literal.\n         *\n         * @param name The name of the symbol.\n         * @param kind The kind of the symbol.\n         * @param range The range of the location of the symbol.\n         * @param uri The resource of the location of symbol.\n         * @param containerName The name of the symbol containing the symbol.\n         */\n        function create(name, kind, range, uri, containerName) {\n            var result = {\n                name: name,\n                kind: kind,\n                location: { uri: uri, range: range }\n            };\n            if (containerName) {\n                result.containerName = containerName;\n            }\n            return result;\n        }\n        SymbolInformation.create = create;\n    })(SymbolInformation || (exports.SymbolInformation = SymbolInformation = {}));\n    var WorkspaceSymbol;\n    (function (WorkspaceSymbol) {\n        /**\n         * Create a new workspace symbol.\n         *\n         * @param name The name of the symbol.\n         * @param kind The kind of the symbol.\n         * @param uri The resource of the location of the symbol.\n         * @param range An options range of the location.\n         * @returns A WorkspaceSymbol.\n         */\n        function create(name, kind, uri, range) {\n            return range !== undefined\n                ? { name: name, kind: kind, location: { uri: uri, range: range } }\n                : { name: name, kind: kind, location: { uri: uri } };\n        }\n        WorkspaceSymbol.create = create;\n    })(WorkspaceSymbol || (exports.WorkspaceSymbol = WorkspaceSymbol = {}));\n    var DocumentSymbol;\n    (function (DocumentSymbol) {\n        /**\n         * Creates a new symbol information literal.\n         *\n         * @param name The name of the symbol.\n         * @param detail The detail of the symbol.\n         * @param kind The kind of the symbol.\n         * @param range The range of the symbol.\n         * @param selectionRange The selectionRange of the symbol.\n         * @param children Children of the symbol.\n         */\n        function create(name, detail, kind, range, selectionRange, children) {\n            var result = {\n                name: name,\n                detail: detail,\n                kind: kind,\n                range: range,\n                selectionRange: selectionRange\n            };\n            if (children !== undefined) {\n                result.children = children;\n            }\n            return result;\n        }\n        DocumentSymbol.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DocumentSymbol} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return candidate &&\n                Is.string(candidate.name) && Is.number(candidate.kind) &&\n                Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\n                (candidate.detail === undefined || Is.string(candidate.detail)) &&\n                (candidate.deprecated === undefined || Is.boolean(candidate.deprecated)) &&\n                (candidate.children === undefined || Array.isArray(candidate.children)) &&\n                (candidate.tags === undefined || Array.isArray(candidate.tags));\n        }\n        DocumentSymbol.is = is;\n    })(DocumentSymbol || (exports.DocumentSymbol = DocumentSymbol = {}));\n    /**\n     * A set of predefined code action kinds\n     */\n    var CodeActionKind;\n    (function (CodeActionKind) {\n        /**\n         * Empty kind.\n         */\n        CodeActionKind.Empty = '';\n        /**\n         * Base kind for quickfix actions: 'quickfix'\n         */\n        CodeActionKind.QuickFix = 'quickfix';\n        /**\n         * Base kind for refactoring actions: 'refactor'\n         */\n        CodeActionKind.Refactor = 'refactor';\n        /**\n         * Base kind for refactoring extraction actions: 'refactor.extract'\n         *\n         * Example extract actions:\n         *\n         * - Extract method\n         * - Extract function\n         * - Extract variable\n         * - Extract interface from class\n         * - ...\n         */\n        CodeActionKind.RefactorExtract = 'refactor.extract';\n        /**\n         * Base kind for refactoring inline actions: 'refactor.inline'\n         *\n         * Example inline actions:\n         *\n         * - Inline function\n         * - Inline variable\n         * - Inline constant\n         * - ...\n         */\n        CodeActionKind.RefactorInline = 'refactor.inline';\n        /**\n         * Base kind for refactoring rewrite actions: 'refactor.rewrite'\n         *\n         * Example rewrite actions:\n         *\n         * - Convert JavaScript function to class\n         * - Add or remove parameter\n         * - Encapsulate field\n         * - Make method static\n         * - Move method to base class\n         * - ...\n         */\n        CodeActionKind.RefactorRewrite = 'refactor.rewrite';\n        /**\n         * Base kind for source actions: `source`\n         *\n         * Source code actions apply to the entire file.\n         */\n        CodeActionKind.Source = 'source';\n        /**\n         * Base kind for an organize imports source action: `source.organizeImports`\n         */\n        CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\n        /**\n         * Base kind for auto-fix source actions: `source.fixAll`.\n         *\n         * Fix all actions automatically fix errors that have a clear fix that do not require user input.\n         * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\n         *\n         * @since 3.15.0\n         */\n        CodeActionKind.SourceFixAll = 'source.fixAll';\n    })(CodeActionKind || (exports.CodeActionKind = CodeActionKind = {}));\n    /**\n     * The reason why code actions were requested.\n     *\n     * @since 3.17.0\n     */\n    var CodeActionTriggerKind;\n    (function (CodeActionTriggerKind) {\n        /**\n         * Code actions were explicitly requested by the user or by an extension.\n         */\n        CodeActionTriggerKind.Invoked = 1;\n        /**\n         * Code actions were requested automatically.\n         *\n         * This typically happens when current selection in a file changes, but can\n         * also be triggered when file content changes.\n         */\n        CodeActionTriggerKind.Automatic = 2;\n    })(CodeActionTriggerKind || (exports.CodeActionTriggerKind = CodeActionTriggerKind = {}));\n    /**\n     * The CodeActionContext namespace provides helper functions to work with\n     * {@link CodeActionContext} literals.\n     */\n    var CodeActionContext;\n    (function (CodeActionContext) {\n        /**\n         * Creates a new CodeActionContext literal.\n         */\n        function create(diagnostics, only, triggerKind) {\n            var result = { diagnostics: diagnostics };\n            if (only !== undefined && only !== null) {\n                result.only = only;\n            }\n            if (triggerKind !== undefined && triggerKind !== null) {\n                result.triggerKind = triggerKind;\n            }\n            return result;\n        }\n        CodeActionContext.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link CodeActionContext} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is)\n                && (candidate.only === undefined || Is.typedArray(candidate.only, Is.string))\n                && (candidate.triggerKind === undefined || candidate.triggerKind === CodeActionTriggerKind.Invoked || candidate.triggerKind === CodeActionTriggerKind.Automatic);\n        }\n        CodeActionContext.is = is;\n    })(CodeActionContext || (exports.CodeActionContext = CodeActionContext = {}));\n    var CodeAction;\n    (function (CodeAction) {\n        function create(title, kindOrCommandOrEdit, kind) {\n            var result = { title: title };\n            var checkKind = true;\n            if (typeof kindOrCommandOrEdit === 'string') {\n                checkKind = false;\n                result.kind = kindOrCommandOrEdit;\n            }\n            else if (Command.is(kindOrCommandOrEdit)) {\n                result.command = kindOrCommandOrEdit;\n            }\n            else {\n                result.edit = kindOrCommandOrEdit;\n            }\n            if (checkKind && kind !== undefined) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        CodeAction.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate && Is.string(candidate.title) &&\n                (candidate.diagnostics === undefined || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\n                (candidate.kind === undefined || Is.string(candidate.kind)) &&\n                (candidate.edit !== undefined || candidate.command !== undefined) &&\n                (candidate.command === undefined || Command.is(candidate.command)) &&\n                (candidate.isPreferred === undefined || Is.boolean(candidate.isPreferred)) &&\n                (candidate.edit === undefined || WorkspaceEdit.is(candidate.edit));\n        }\n        CodeAction.is = is;\n    })(CodeAction || (exports.CodeAction = CodeAction = {}));\n    /**\n     * The CodeLens namespace provides helper functions to work with\n     * {@link CodeLens} literals.\n     */\n    var CodeLens;\n    (function (CodeLens) {\n        /**\n         * Creates a new CodeLens literal.\n         */\n        function create(range, data) {\n            var result = { range: range };\n            if (Is.defined(data)) {\n                result.data = data;\n            }\n            return result;\n        }\n        CodeLens.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link CodeLens} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\n        }\n        CodeLens.is = is;\n    })(CodeLens || (exports.CodeLens = CodeLens = {}));\n    /**\n     * The FormattingOptions namespace provides helper functions to work with\n     * {@link FormattingOptions} literals.\n     */\n    var FormattingOptions;\n    (function (FormattingOptions) {\n        /**\n         * Creates a new FormattingOptions literal.\n         */\n        function create(tabSize, insertSpaces) {\n            return { tabSize: tabSize, insertSpaces: insertSpaces };\n        }\n        FormattingOptions.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link FormattingOptions} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.uinteger(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\n        }\n        FormattingOptions.is = is;\n    })(FormattingOptions || (exports.FormattingOptions = FormattingOptions = {}));\n    /**\n     * The DocumentLink namespace provides helper functions to work with\n     * {@link DocumentLink} literals.\n     */\n    var DocumentLink;\n    (function (DocumentLink) {\n        /**\n         * Creates a new DocumentLink literal.\n         */\n        function create(range, target, data) {\n            return { range: range, target: target, data: data };\n        }\n        DocumentLink.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link DocumentLink} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\n        }\n        DocumentLink.is = is;\n    })(DocumentLink || (exports.DocumentLink = DocumentLink = {}));\n    /**\n     * The SelectionRange namespace provides helper function to work with\n     * SelectionRange literals.\n     */\n    var SelectionRange;\n    (function (SelectionRange) {\n        /**\n         * Creates a new SelectionRange\n         * @param range the range.\n         * @param parent an optional parent.\n         */\n        function create(range, parent) {\n            return { range: range, parent: parent };\n        }\n        SelectionRange.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\n        }\n        SelectionRange.is = is;\n    })(SelectionRange || (exports.SelectionRange = SelectionRange = {}));\n    /**\n     * A set of predefined token types. This set is not fixed\n     * an clients can specify additional token types via the\n     * corresponding client capabilities.\n     *\n     * @since 3.16.0\n     */\n    var SemanticTokenTypes;\n    (function (SemanticTokenTypes) {\n        SemanticTokenTypes[\"namespace\"] = \"namespace\";\n        /**\n         * Represents a generic type. Acts as a fallback for types which can't be mapped to\n         * a specific type like class or enum.\n         */\n        SemanticTokenTypes[\"type\"] = \"type\";\n        SemanticTokenTypes[\"class\"] = \"class\";\n        SemanticTokenTypes[\"enum\"] = \"enum\";\n        SemanticTokenTypes[\"interface\"] = \"interface\";\n        SemanticTokenTypes[\"struct\"] = \"struct\";\n        SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\n        SemanticTokenTypes[\"parameter\"] = \"parameter\";\n        SemanticTokenTypes[\"variable\"] = \"variable\";\n        SemanticTokenTypes[\"property\"] = \"property\";\n        SemanticTokenTypes[\"enumMember\"] = \"enumMember\";\n        SemanticTokenTypes[\"event\"] = \"event\";\n        SemanticTokenTypes[\"function\"] = \"function\";\n        SemanticTokenTypes[\"method\"] = \"method\";\n        SemanticTokenTypes[\"macro\"] = \"macro\";\n        SemanticTokenTypes[\"keyword\"] = \"keyword\";\n        SemanticTokenTypes[\"modifier\"] = \"modifier\";\n        SemanticTokenTypes[\"comment\"] = \"comment\";\n        SemanticTokenTypes[\"string\"] = \"string\";\n        SemanticTokenTypes[\"number\"] = \"number\";\n        SemanticTokenTypes[\"regexp\"] = \"regexp\";\n        SemanticTokenTypes[\"operator\"] = \"operator\";\n        /**\n         * @since 3.17.0\n         */\n        SemanticTokenTypes[\"decorator\"] = \"decorator\";\n    })(SemanticTokenTypes || (exports.SemanticTokenTypes = SemanticTokenTypes = {}));\n    /**\n     * A set of predefined token modifiers. This set is not fixed\n     * an clients can specify additional token types via the\n     * corresponding client capabilities.\n     *\n     * @since 3.16.0\n     */\n    var SemanticTokenModifiers;\n    (function (SemanticTokenModifiers) {\n        SemanticTokenModifiers[\"declaration\"] = \"declaration\";\n        SemanticTokenModifiers[\"definition\"] = \"definition\";\n        SemanticTokenModifiers[\"readonly\"] = \"readonly\";\n        SemanticTokenModifiers[\"static\"] = \"static\";\n        SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\n        SemanticTokenModifiers[\"abstract\"] = \"abstract\";\n        SemanticTokenModifiers[\"async\"] = \"async\";\n        SemanticTokenModifiers[\"modification\"] = \"modification\";\n        SemanticTokenModifiers[\"documentation\"] = \"documentation\";\n        SemanticTokenModifiers[\"defaultLibrary\"] = \"defaultLibrary\";\n    })(SemanticTokenModifiers || (exports.SemanticTokenModifiers = SemanticTokenModifiers = {}));\n    /**\n     * @since 3.16.0\n     */\n    var SemanticTokens;\n    (function (SemanticTokens) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\n                Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\n        }\n        SemanticTokens.is = is;\n    })(SemanticTokens || (exports.SemanticTokens = SemanticTokens = {}));\n    /**\n     * The InlineValueText namespace provides functions to deal with InlineValueTexts.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueText;\n    (function (InlineValueText) {\n        /**\n         * Creates a new InlineValueText literal.\n         */\n        function create(range, text) {\n            return { range: range, text: text };\n        }\n        InlineValueText.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.string(candidate.text);\n        }\n        InlineValueText.is = is;\n    })(InlineValueText || (exports.InlineValueText = InlineValueText = {}));\n    /**\n     * The InlineValueVariableLookup namespace provides functions to deal with InlineValueVariableLookups.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueVariableLookup;\n    (function (InlineValueVariableLookup) {\n        /**\n         * Creates a new InlineValueText literal.\n         */\n        function create(range, variableName, caseSensitiveLookup) {\n            return { range: range, variableName: variableName, caseSensitiveLookup: caseSensitiveLookup };\n        }\n        InlineValueVariableLookup.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range) && Is.boolean(candidate.caseSensitiveLookup)\n                && (Is.string(candidate.variableName) || candidate.variableName === undefined);\n        }\n        InlineValueVariableLookup.is = is;\n    })(InlineValueVariableLookup || (exports.InlineValueVariableLookup = InlineValueVariableLookup = {}));\n    /**\n     * The InlineValueEvaluatableExpression namespace provides functions to deal with InlineValueEvaluatableExpression.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueEvaluatableExpression;\n    (function (InlineValueEvaluatableExpression) {\n        /**\n         * Creates a new InlineValueEvaluatableExpression literal.\n         */\n        function create(range, expression) {\n            return { range: range, expression: expression };\n        }\n        InlineValueEvaluatableExpression.create = create;\n        function is(value) {\n            var candidate = value;\n            return candidate !== undefined && candidate !== null && Range.is(candidate.range)\n                && (Is.string(candidate.expression) || candidate.expression === undefined);\n        }\n        InlineValueEvaluatableExpression.is = is;\n    })(InlineValueEvaluatableExpression || (exports.InlineValueEvaluatableExpression = InlineValueEvaluatableExpression = {}));\n    /**\n     * The InlineValueContext namespace provides helper functions to work with\n     * {@link InlineValueContext} literals.\n     *\n     * @since 3.17.0\n     */\n    var InlineValueContext;\n    (function (InlineValueContext) {\n        /**\n         * Creates a new InlineValueContext literal.\n         */\n        function create(frameId, stoppedLocation) {\n            return { frameId: frameId, stoppedLocation: stoppedLocation };\n        }\n        InlineValueContext.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link InlineValueContext} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Range.is(value.stoppedLocation);\n        }\n        InlineValueContext.is = is;\n    })(InlineValueContext || (exports.InlineValueContext = InlineValueContext = {}));\n    /**\n     * Inlay hint kinds.\n     *\n     * @since 3.17.0\n     */\n    var InlayHintKind;\n    (function (InlayHintKind) {\n        /**\n         * An inlay hint that for a type annotation.\n         */\n        InlayHintKind.Type = 1;\n        /**\n         * An inlay hint that is for a parameter.\n         */\n        InlayHintKind.Parameter = 2;\n        function is(value) {\n            return value === 1 || value === 2;\n        }\n        InlayHintKind.is = is;\n    })(InlayHintKind || (exports.InlayHintKind = InlayHintKind = {}));\n    var InlayHintLabelPart;\n    (function (InlayHintLabelPart) {\n        function create(value) {\n            return { value: value };\n        }\n        InlayHintLabelPart.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate)\n                && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n                && (candidate.location === undefined || Location.is(candidate.location))\n                && (candidate.command === undefined || Command.is(candidate.command));\n        }\n        InlayHintLabelPart.is = is;\n    })(InlayHintLabelPart || (exports.InlayHintLabelPart = InlayHintLabelPart = {}));\n    var InlayHint;\n    (function (InlayHint) {\n        function create(position, label, kind) {\n            var result = { position: position, label: label };\n            if (kind !== undefined) {\n                result.kind = kind;\n            }\n            return result;\n        }\n        InlayHint.create = create;\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && Position.is(candidate.position)\n                && (Is.string(candidate.label) || Is.typedArray(candidate.label, InlayHintLabelPart.is))\n                && (candidate.kind === undefined || InlayHintKind.is(candidate.kind))\n                && (candidate.textEdits === undefined) || Is.typedArray(candidate.textEdits, TextEdit.is)\n                && (candidate.tooltip === undefined || Is.string(candidate.tooltip) || MarkupContent.is(candidate.tooltip))\n                && (candidate.paddingLeft === undefined || Is.boolean(candidate.paddingLeft))\n                && (candidate.paddingRight === undefined || Is.boolean(candidate.paddingRight));\n        }\n        InlayHint.is = is;\n    })(InlayHint || (exports.InlayHint = InlayHint = {}));\n    var StringValue;\n    (function (StringValue) {\n        function createSnippet(value) {\n            return { kind: 'snippet', value: value };\n        }\n        StringValue.createSnippet = createSnippet;\n    })(StringValue || (exports.StringValue = StringValue = {}));\n    var InlineCompletionItem;\n    (function (InlineCompletionItem) {\n        function create(insertText, filterText, range, command) {\n            return { insertText: insertText, filterText: filterText, range: range, command: command };\n        }\n        InlineCompletionItem.create = create;\n    })(InlineCompletionItem || (exports.InlineCompletionItem = InlineCompletionItem = {}));\n    var InlineCompletionList;\n    (function (InlineCompletionList) {\n        function create(items) {\n            return { items: items };\n        }\n        InlineCompletionList.create = create;\n    })(InlineCompletionList || (exports.InlineCompletionList = InlineCompletionList = {}));\n    /**\n     * Describes how an {@link InlineCompletionItemProvider inline completion provider} was triggered.\n     *\n     * @since 3.18.0\n     * @proposed\n     */\n    var InlineCompletionTriggerKind;\n    (function (InlineCompletionTriggerKind) {\n        /**\n         * Completion was triggered explicitly by a user gesture.\n         */\n        InlineCompletionTriggerKind.Invoked = 0;\n        /**\n         * Completion was triggered automatically while editing.\n         */\n        InlineCompletionTriggerKind.Automatic = 1;\n    })(InlineCompletionTriggerKind || (exports.InlineCompletionTriggerKind = InlineCompletionTriggerKind = {}));\n    var SelectedCompletionInfo;\n    (function (SelectedCompletionInfo) {\n        function create(range, text) {\n            return { range: range, text: text };\n        }\n        SelectedCompletionInfo.create = create;\n    })(SelectedCompletionInfo || (exports.SelectedCompletionInfo = SelectedCompletionInfo = {}));\n    var InlineCompletionContext;\n    (function (InlineCompletionContext) {\n        function create(triggerKind, selectedCompletionInfo) {\n            return { triggerKind: triggerKind, selectedCompletionInfo: selectedCompletionInfo };\n        }\n        InlineCompletionContext.create = create;\n    })(InlineCompletionContext || (exports.InlineCompletionContext = InlineCompletionContext = {}));\n    var WorkspaceFolder;\n    (function (WorkspaceFolder) {\n        function is(value) {\n            var candidate = value;\n            return Is.objectLiteral(candidate) && URI.is(candidate.uri) && Is.string(candidate.name);\n        }\n        WorkspaceFolder.is = is;\n    })(WorkspaceFolder || (exports.WorkspaceFolder = WorkspaceFolder = {}));\n    exports.EOL = ['\\n', '\\r\\n', '\\r'];\n    /**\n     * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n     */\n    var TextDocument;\n    (function (TextDocument) {\n        /**\n         * Creates a new ITextDocument literal from the given uri and content.\n         * @param uri The document's uri.\n         * @param languageId The document's language Id.\n         * @param version The document's version.\n         * @param content The document's content.\n         */\n        function create(uri, languageId, version, content) {\n            return new FullTextDocument(uri, languageId, version, content);\n        }\n        TextDocument.create = create;\n        /**\n         * Checks whether the given literal conforms to the {@link ITextDocument} interface.\n         */\n        function is(value) {\n            var candidate = value;\n            return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.uinteger(candidate.lineCount)\n                && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\n        }\n        TextDocument.is = is;\n        function applyEdits(document, edits) {\n            var text = document.getText();\n            var sortedEdits = mergeSort(edits, function (a, b) {\n                var diff = a.range.start.line - b.range.start.line;\n                if (diff === 0) {\n                    return a.range.start.character - b.range.start.character;\n                }\n                return diff;\n            });\n            var lastModifiedOffset = text.length;\n            for (var i = sortedEdits.length - 1; i >= 0; i--) {\n                var e = sortedEdits[i];\n                var startOffset = document.offsetAt(e.range.start);\n                var endOffset = document.offsetAt(e.range.end);\n                if (endOffset <= lastModifiedOffset) {\n                    text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\n                }\n                else {\n                    throw new Error('Overlapping edit');\n                }\n                lastModifiedOffset = startOffset;\n            }\n            return text;\n        }\n        TextDocument.applyEdits = applyEdits;\n        function mergeSort(data, compare) {\n            if (data.length <= 1) {\n                // sorted\n                return data;\n            }\n            var p = (data.length / 2) | 0;\n            var left = data.slice(0, p);\n            var right = data.slice(p);\n            mergeSort(left, compare);\n            mergeSort(right, compare);\n            var leftIdx = 0;\n            var rightIdx = 0;\n            var i = 0;\n            while (leftIdx < left.length && rightIdx < right.length) {\n                var ret = compare(left[leftIdx], right[rightIdx]);\n                if (ret <= 0) {\n                    // smaller_equal -> take left to preserve order\n                    data[i++] = left[leftIdx++];\n                }\n                else {\n                    // greater -> take right\n                    data[i++] = right[rightIdx++];\n                }\n            }\n            while (leftIdx < left.length) {\n                data[i++] = left[leftIdx++];\n            }\n            while (rightIdx < right.length) {\n                data[i++] = right[rightIdx++];\n            }\n            return data;\n        }\n    })(TextDocument || (exports.TextDocument = TextDocument = {}));\n    /**\n     * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\n     */\n    var FullTextDocument = /** @class */ (function () {\n        function FullTextDocument(uri, languageId, version, content) {\n            this._uri = uri;\n            this._languageId = languageId;\n            this._version = version;\n            this._content = content;\n            this._lineOffsets = undefined;\n        }\n        Object.defineProperty(FullTextDocument.prototype, \"uri\", {\n            get: function () {\n                return this._uri;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\n            get: function () {\n                return this._languageId;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        Object.defineProperty(FullTextDocument.prototype, \"version\", {\n            get: function () {\n                return this._version;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        FullTextDocument.prototype.getText = function (range) {\n            if (range) {\n                var start = this.offsetAt(range.start);\n                var end = this.offsetAt(range.end);\n                return this._content.substring(start, end);\n            }\n            return this._content;\n        };\n        FullTextDocument.prototype.update = function (event, version) {\n            this._content = event.text;\n            this._version = version;\n            this._lineOffsets = undefined;\n        };\n        FullTextDocument.prototype.getLineOffsets = function () {\n            if (this._lineOffsets === undefined) {\n                var lineOffsets = [];\n                var text = this._content;\n                var isLineStart = true;\n                for (var i = 0; i < text.length; i++) {\n                    if (isLineStart) {\n                        lineOffsets.push(i);\n                        isLineStart = false;\n                    }\n                    var ch = text.charAt(i);\n                    isLineStart = (ch === '\\r' || ch === '\\n');\n                    if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\n                        i++;\n                    }\n                }\n                if (isLineStart && text.length > 0) {\n                    lineOffsets.push(text.length);\n                }\n                this._lineOffsets = lineOffsets;\n            }\n            return this._lineOffsets;\n        };\n        FullTextDocument.prototype.positionAt = function (offset) {\n            offset = Math.max(Math.min(offset, this._content.length), 0);\n            var lineOffsets = this.getLineOffsets();\n            var low = 0, high = lineOffsets.length;\n            if (high === 0) {\n                return Position.create(0, offset);\n            }\n            while (low < high) {\n                var mid = Math.floor((low + high) / 2);\n                if (lineOffsets[mid] > offset) {\n                    high = mid;\n                }\n                else {\n                    low = mid + 1;\n                }\n            }\n            // low is the least x for which the line offset is larger than the current offset\n            // or array.length if no line offset is larger than the current offset\n            var line = low - 1;\n            return Position.create(line, offset - lineOffsets[line]);\n        };\n        FullTextDocument.prototype.offsetAt = function (position) {\n            var lineOffsets = this.getLineOffsets();\n            if (position.line >= lineOffsets.length) {\n                return this._content.length;\n            }\n            else if (position.line < 0) {\n                return 0;\n            }\n            var lineOffset = lineOffsets[position.line];\n            var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\n            return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\n        };\n        Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\n            get: function () {\n                return this.getLineOffsets().length;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        return FullTextDocument;\n    }());\n    var Is;\n    (function (Is) {\n        var toString = Object.prototype.toString;\n        function defined(value) {\n            return typeof value !== 'undefined';\n        }\n        Is.defined = defined;\n        function undefined(value) {\n            return typeof value === 'undefined';\n        }\n        Is.undefined = undefined;\n        function boolean(value) {\n            return value === true || value === false;\n        }\n        Is.boolean = boolean;\n        function string(value) {\n            return toString.call(value) === '[object String]';\n        }\n        Is.string = string;\n        function number(value) {\n            return toString.call(value) === '[object Number]';\n        }\n        Is.number = number;\n        function numberRange(value, min, max) {\n            return toString.call(value) === '[object Number]' && min <= value && value <= max;\n        }\n        Is.numberRange = numberRange;\n        function integer(value) {\n            return toString.call(value) === '[object Number]' && -2147483648 <= value && value <= 2147483647;\n        }\n        Is.integer = integer;\n        function uinteger(value) {\n            return toString.call(value) === '[object Number]' && 0 <= value && value <= 2147483647;\n        }\n        Is.uinteger = uinteger;\n        function func(value) {\n            return toString.call(value) === '[object Function]';\n        }\n        Is.func = func;\n        function objectLiteral(value) {\n            // Strictly speaking class instances pass this check as well. Since the LSP\n            // doesn't use classes we ignore this for now. If we do we need to add something\n            // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n            return value !== null && typeof value === 'object';\n        }\n        Is.objectLiteral = objectLiteral;\n        function typedArray(value, check) {\n            return Array.isArray(value) && value.every(check);\n        }\n        Is.typedArray = typedArray;\n    })(Is || (Is = {}));\n});\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolNotificationType = exports.ProtocolNotificationType0 = exports.ProtocolRequestType = exports.ProtocolRequestType0 = exports.RegistrationType = exports.MessageDirection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nvar MessageDirection;\n(function (MessageDirection) {\n    MessageDirection[\"clientToServer\"] = \"clientToServer\";\n    MessageDirection[\"serverToClient\"] = \"serverToClient\";\n    MessageDirection[\"both\"] = \"both\";\n})(MessageDirection || (exports.MessageDirection = MessageDirection = {}));\nclass RegistrationType {\n    constructor(method) {\n        this.method = method;\n    }\n}\nexports.RegistrationType = RegistrationType;\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolRequestType0 = ProtocolRequestType0;\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolRequestType = ProtocolRequestType;\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\n    constructor(method) {\n        super(method);\n    }\n}\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\n    constructor(method) {\n        super(method, vscode_jsonrpc_1.ParameterStructures.byName);\n    }\n}\nexports.ProtocolNotificationType = ProtocolNotificationType;\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\n'use strict';\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.objectLiteral = exports.typedArray = exports.stringArray = exports.array = exports.func = exports.error = exports.number = exports.string = exports.boolean = void 0;\nfunction boolean(value) {\n    return value === true || value === false;\n}\nexports.boolean = boolean;\nfunction string(value) {\n    return typeof value === 'string' || value instanceof String;\n}\nexports.string = string;\nfunction number(value) {\n    return typeof value === 'number' || value instanceof Number;\n}\nexports.number = number;\nfunction error(value) {\n    return value instanceof Error;\n}\nexports.error = error;\nfunction func(value) {\n    return typeof value === 'function';\n}\nexports.func = func;\nfunction array(value) {\n    return Array.isArray(value);\n}\nexports.array = array;\nfunction stringArray(value) {\n    return array(value) && value.every(elem => string(elem));\n}\nexports.stringArray = stringArray;\nfunction typedArray(value, check) {\n    return Array.isArray(value) && value.every(check);\n}\nexports.typedArray = typedArray;\nfunction objectLiteral(value) {\n    // Strictly speaking class instances pass this check as well. Since the LSP\n    // doesn't use classes we ignore this for now. If we do we need to add something\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\n    return value !== null && typeof value === 'object';\n}\nexports.objectLiteral = objectLiteral;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the implementation locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar ImplementationRequest;\n(function (ImplementationRequest) {\n    ImplementationRequest.method = 'textDocument/implementation';\n    ImplementationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\n})(ImplementationRequest || (exports.ImplementationRequest = ImplementationRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Definition} or a Thenable that resolves to such.\n */\nvar TypeDefinitionRequest;\n(function (TypeDefinitionRequest) {\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\n    TypeDefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\n})(TypeDefinitionRequest || (exports.TypeDefinitionRequest = TypeDefinitionRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\n */\nvar WorkspaceFoldersRequest;\n(function (WorkspaceFoldersRequest) {\n    WorkspaceFoldersRequest.method = 'workspace/workspaceFolders';\n    WorkspaceFoldersRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0(WorkspaceFoldersRequest.method);\n})(WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = WorkspaceFoldersRequest = {}));\n/**\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\n * folder configuration changes.\n */\nvar DidChangeWorkspaceFoldersNotification;\n(function (DidChangeWorkspaceFoldersNotification) {\n    DidChangeWorkspaceFoldersNotification.method = 'workspace/didChangeWorkspaceFolders';\n    DidChangeWorkspaceFoldersNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType(DidChangeWorkspaceFoldersNotification.method);\n})(DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = DidChangeWorkspaceFoldersNotification = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ConfigurationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n//---- Get Configuration request ----\n/**\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\n * configuration setting.\n *\n * This pull model replaces the old push model were the client signaled configuration change via an\n * event. If the server still needs to react to configuration changes (since the server caches the\n * result of `workspace/configuration` requests) the server should register for an empty configuration\n * change event and empty the cache if such an event is received.\n */\nvar ConfigurationRequest;\n(function (ConfigurationRequest) {\n    ConfigurationRequest.method = 'workspace/configuration';\n    ConfigurationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType(ConfigurationRequest.method);\n})(ConfigurationRequest || (exports.ConfigurationRequest = ConfigurationRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorPresentationRequest = exports.DocumentColorRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to list all color symbols found in a given text document. The request's\n * parameter is of type {@link DocumentColorParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentColorRequest;\n(function (DocumentColorRequest) {\n    DocumentColorRequest.method = 'textDocument/documentColor';\n    DocumentColorRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\n})(DocumentColorRequest || (exports.DocumentColorRequest = DocumentColorRequest = {}));\n/**\n * A request to list all presentation for a color. The request's\n * parameter is of type {@link ColorPresentationParams} the\n * response is of type {@link ColorInformation ColorInformation[]} or a Thenable\n * that resolves to such.\n */\nvar ColorPresentationRequest;\n(function (ColorPresentationRequest) {\n    ColorPresentationRequest.method = 'textDocument/colorPresentation';\n    ColorPresentationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType(ColorPresentationRequest.method);\n})(ColorPresentationRequest || (exports.ColorPresentationRequest = ColorPresentationRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide folding ranges in a document. The request's\n * parameter is of type {@link FoldingRangeParams}, the\n * response is of type {@link FoldingRangeList} or a Thenable\n * that resolves to such.\n */\nvar FoldingRangeRequest;\n(function (FoldingRangeRequest) {\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\n    FoldingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\n})(FoldingRangeRequest || (exports.FoldingRangeRequest = FoldingRangeRequest = {}));\n/**\n * @since 3.18.0\n * @proposed\n */\nvar FoldingRangeRefreshRequest;\n(function (FoldingRangeRefreshRequest) {\n    FoldingRangeRefreshRequest.method = `workspace/foldingRange/refresh`;\n    FoldingRangeRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    FoldingRangeRefreshRequest.type = new messages_1.ProtocolRequestType0(FoldingRangeRefreshRequest.method);\n})(FoldingRangeRefreshRequest || (exports.FoldingRangeRefreshRequest = FoldingRangeRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationRequest = void 0;\nconst messages_1 = require(\"./messages\");\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * A request to resolve the type definition locations of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPositionParams}\n * the response is of type {@link Declaration} or a typed array of {@link DeclarationLink}\n * or a Thenable that resolves to such.\n */\nvar DeclarationRequest;\n(function (DeclarationRequest) {\n    DeclarationRequest.method = 'textDocument/declaration';\n    DeclarationRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\n})(DeclarationRequest || (exports.DeclarationRequest = DeclarationRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide selection ranges in a document. The request's\n * parameter is of type {@link SelectionRangeParams}, the\n * response is of type {@link SelectionRange SelectionRange[]} or a Thenable\n * that resolves to such.\n */\nvar SelectionRangeRequest;\n(function (SelectionRangeRequest) {\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\n    SelectionRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\n})(SelectionRangeRequest || (exports.SelectionRangeRequest = SelectionRangeRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst messages_1 = require(\"./messages\");\nvar WorkDoneProgress;\n(function (WorkDoneProgress) {\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\n    function is(value) {\n        return value === WorkDoneProgress.type;\n    }\n    WorkDoneProgress.is = is;\n})(WorkDoneProgress || (exports.WorkDoneProgress = WorkDoneProgress = {}));\n/**\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\n * reporting from the server.\n */\nvar WorkDoneProgressCreateRequest;\n(function (WorkDoneProgressCreateRequest) {\n    WorkDoneProgressCreateRequest.method = 'window/workDoneProgress/create';\n    WorkDoneProgressCreateRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType(WorkDoneProgressCreateRequest.method);\n})(WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = WorkDoneProgressCreateRequest = {}));\n/**\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\n * initiated on the server side.\n */\nvar WorkDoneProgressCancelNotification;\n(function (WorkDoneProgressCancelNotification) {\n    WorkDoneProgressCancelNotification.method = 'window/workDoneProgress/cancel';\n    WorkDoneProgressCancelNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType(WorkDoneProgressCancelNotification.method);\n})(WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = WorkDoneProgressCancelNotification = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.CallHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `CallHierarchyItem` in a document at a given position.\n * Can be used as an input to an incoming or outgoing call hierarchy.\n *\n * @since 3.16.0\n */\nvar CallHierarchyPrepareRequest;\n(function (CallHierarchyPrepareRequest) {\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\n    CallHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\n})(CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = CallHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyIncomingCallsRequest;\n(function (CallHierarchyIncomingCallsRequest) {\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\n    CallHierarchyIncomingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\n})(CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = CallHierarchyIncomingCallsRequest = {}));\n/**\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\n *\n * @since 3.16.0\n */\nvar CallHierarchyOutgoingCallsRequest;\n(function (CallHierarchyOutgoingCallsRequest) {\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\n    CallHierarchyOutgoingCallsRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\n})(CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = CallHierarchyOutgoingCallsRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.SemanticTokensRegistrationType = exports.TokenFormat = void 0;\nconst messages_1 = require(\"./messages\");\n//------- 'textDocument/semanticTokens' -----\nvar TokenFormat;\n(function (TokenFormat) {\n    TokenFormat.Relative = 'relative';\n})(TokenFormat || (exports.TokenFormat = TokenFormat = {}));\nvar SemanticTokensRegistrationType;\n(function (SemanticTokensRegistrationType) {\n    SemanticTokensRegistrationType.method = 'textDocument/semanticTokens';\n    SemanticTokensRegistrationType.type = new messages_1.RegistrationType(SemanticTokensRegistrationType.method);\n})(SemanticTokensRegistrationType || (exports.SemanticTokensRegistrationType = SemanticTokensRegistrationType = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRequest;\n(function (SemanticTokensRequest) {\n    SemanticTokensRequest.method = 'textDocument/semanticTokens/full';\n    SemanticTokensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\n    SemanticTokensRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRequest || (exports.SemanticTokensRequest = SemanticTokensRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensDeltaRequest;\n(function (SemanticTokensDeltaRequest) {\n    SemanticTokensDeltaRequest.method = 'textDocument/semanticTokens/full/delta';\n    SemanticTokensDeltaRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensDeltaRequest.type = new messages_1.ProtocolRequestType(SemanticTokensDeltaRequest.method);\n    SemanticTokensDeltaRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensDeltaRequest || (exports.SemanticTokensDeltaRequest = SemanticTokensDeltaRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRangeRequest;\n(function (SemanticTokensRangeRequest) {\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\n    SemanticTokensRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\n    SemanticTokensRangeRequest.registrationMethod = SemanticTokensRegistrationType.method;\n})(SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = SemanticTokensRangeRequest = {}));\n/**\n * @since 3.16.0\n */\nvar SemanticTokensRefreshRequest;\n(function (SemanticTokensRefreshRequest) {\n    SemanticTokensRefreshRequest.method = `workspace/semanticTokens/refresh`;\n    SemanticTokensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    SemanticTokensRefreshRequest.type = new messages_1.ProtocolRequestType0(SemanticTokensRefreshRequest.method);\n})(SemanticTokensRefreshRequest || (exports.SemanticTokensRefreshRequest = SemanticTokensRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ShowDocumentRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to show a document. This request might open an\n * external program depending on the value of the URI to open.\n * For example a request to open `https://code.visualstudio.com/`\n * will very likely open the URI in a WEB browser.\n *\n * @since 3.16.0\n*/\nvar ShowDocumentRequest;\n(function (ShowDocumentRequest) {\n    ShowDocumentRequest.method = 'window/showDocument';\n    ShowDocumentRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowDocumentRequest.type = new messages_1.ProtocolRequestType(ShowDocumentRequest.method);\n})(ShowDocumentRequest || (exports.ShowDocumentRequest = ShowDocumentRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingRangeRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide ranges that can be edited together.\n *\n * @since 3.16.0\n */\nvar LinkedEditingRangeRequest;\n(function (LinkedEditingRangeRequest) {\n    LinkedEditingRangeRequest.method = 'textDocument/linkedEditingRange';\n    LinkedEditingRangeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    LinkedEditingRangeRequest.type = new messages_1.ProtocolRequestType(LinkedEditingRangeRequest.method);\n})(LinkedEditingRangeRequest || (exports.LinkedEditingRangeRequest = LinkedEditingRangeRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.DidRenameFilesNotification = exports.WillRenameFilesRequest = exports.DidCreateFilesNotification = exports.WillCreateFilesRequest = exports.FileOperationPatternKind = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A pattern kind describing if a glob pattern matches a file a folder or\n * both.\n *\n * @since 3.16.0\n */\nvar FileOperationPatternKind;\n(function (FileOperationPatternKind) {\n    /**\n     * The pattern matches a file only.\n     */\n    FileOperationPatternKind.file = 'file';\n    /**\n     * The pattern matches a folder only.\n     */\n    FileOperationPatternKind.folder = 'folder';\n})(FileOperationPatternKind || (exports.FileOperationPatternKind = FileOperationPatternKind = {}));\n/**\n * The will create files request is sent from the client to the server before files are actually\n * created as long as the creation is triggered from within the client.\n *\n * The request can return a `WorkspaceEdit` which will be applied to workspace before the\n * files are created. Hence the `WorkspaceEdit` can not manipulate the content of the file\n * to be created.\n *\n * @since 3.16.0\n */\nvar WillCreateFilesRequest;\n(function (WillCreateFilesRequest) {\n    WillCreateFilesRequest.method = 'workspace/willCreateFiles';\n    WillCreateFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillCreateFilesRequest.type = new messages_1.ProtocolRequestType(WillCreateFilesRequest.method);\n})(WillCreateFilesRequest || (exports.WillCreateFilesRequest = WillCreateFilesRequest = {}));\n/**\n * The did create files notification is sent from the client to the server when\n * files were created from within the client.\n *\n * @since 3.16.0\n */\nvar DidCreateFilesNotification;\n(function (DidCreateFilesNotification) {\n    DidCreateFilesNotification.method = 'workspace/didCreateFiles';\n    DidCreateFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCreateFilesNotification.type = new messages_1.ProtocolNotificationType(DidCreateFilesNotification.method);\n})(DidCreateFilesNotification || (exports.DidCreateFilesNotification = DidCreateFilesNotification = {}));\n/**\n * The will rename files request is sent from the client to the server before files are actually\n * renamed as long as the rename is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar WillRenameFilesRequest;\n(function (WillRenameFilesRequest) {\n    WillRenameFilesRequest.method = 'workspace/willRenameFiles';\n    WillRenameFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillRenameFilesRequest.type = new messages_1.ProtocolRequestType(WillRenameFilesRequest.method);\n})(WillRenameFilesRequest || (exports.WillRenameFilesRequest = WillRenameFilesRequest = {}));\n/**\n * The did rename files notification is sent from the client to the server when\n * files were renamed from within the client.\n *\n * @since 3.16.0\n */\nvar DidRenameFilesNotification;\n(function (DidRenameFilesNotification) {\n    DidRenameFilesNotification.method = 'workspace/didRenameFiles';\n    DidRenameFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidRenameFilesNotification.type = new messages_1.ProtocolNotificationType(DidRenameFilesNotification.method);\n})(DidRenameFilesNotification || (exports.DidRenameFilesNotification = DidRenameFilesNotification = {}));\n/**\n * The will delete files request is sent from the client to the server before files are actually\n * deleted as long as the deletion is triggered from within the client.\n *\n * @since 3.16.0\n */\nvar DidDeleteFilesNotification;\n(function (DidDeleteFilesNotification) {\n    DidDeleteFilesNotification.method = 'workspace/didDeleteFiles';\n    DidDeleteFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidDeleteFilesNotification.type = new messages_1.ProtocolNotificationType(DidDeleteFilesNotification.method);\n})(DidDeleteFilesNotification || (exports.DidDeleteFilesNotification = DidDeleteFilesNotification = {}));\n/**\n * The did delete files notification is sent from the client to the server when\n * files were deleted from within the client.\n *\n * @since 3.16.0\n */\nvar WillDeleteFilesRequest;\n(function (WillDeleteFilesRequest) {\n    WillDeleteFilesRequest.method = 'workspace/willDeleteFiles';\n    WillDeleteFilesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillDeleteFilesRequest.type = new messages_1.ProtocolRequestType(WillDeleteFilesRequest.method);\n})(WillDeleteFilesRequest || (exports.WillDeleteFilesRequest = WillDeleteFilesRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * Moniker uniqueness level to define scope of the moniker.\n *\n * @since 3.16.0\n */\nvar UniquenessLevel;\n(function (UniquenessLevel) {\n    /**\n     * The moniker is only unique inside a document\n     */\n    UniquenessLevel.document = 'document';\n    /**\n     * The moniker is unique inside a project for which a dump got created\n     */\n    UniquenessLevel.project = 'project';\n    /**\n     * The moniker is unique inside the group to which a project belongs\n     */\n    UniquenessLevel.group = 'group';\n    /**\n     * The moniker is unique inside the moniker scheme.\n     */\n    UniquenessLevel.scheme = 'scheme';\n    /**\n     * The moniker is globally unique\n     */\n    UniquenessLevel.global = 'global';\n})(UniquenessLevel || (exports.UniquenessLevel = UniquenessLevel = {}));\n/**\n * The moniker kind.\n *\n * @since 3.16.0\n */\nvar MonikerKind;\n(function (MonikerKind) {\n    /**\n     * The moniker represent a symbol that is imported into a project\n     */\n    MonikerKind.$import = 'import';\n    /**\n     * The moniker represents a symbol that is exported from a project\n     */\n    MonikerKind.$export = 'export';\n    /**\n     * The moniker represents a symbol that is local to a project (e.g. a local\n     * variable of a function, a class not visible outside the project, ...)\n     */\n    MonikerKind.local = 'local';\n})(MonikerKind || (exports.MonikerKind = MonikerKind = {}));\n/**\n * A request to get the moniker of a symbol at a given text document position.\n * The request parameter is of type {@link TextDocumentPositionParams}.\n * The response is of type {@link Moniker Moniker[]} or `null`.\n */\nvar MonikerRequest;\n(function (MonikerRequest) {\n    MonikerRequest.method = 'textDocument/moniker';\n    MonikerRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    MonikerRequest.type = new messages_1.ProtocolRequestType(MonikerRequest.method);\n})(MonikerRequest || (exports.MonikerRequest = MonikerRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) TypeFox, Microsoft and others. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchySubtypesRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to result a `TypeHierarchyItem` in a document at a given position.\n * Can be used as an input to a subtypes or supertypes type hierarchy.\n *\n * @since 3.17.0\n */\nvar TypeHierarchyPrepareRequest;\n(function (TypeHierarchyPrepareRequest) {\n    TypeHierarchyPrepareRequest.method = 'textDocument/prepareTypeHierarchy';\n    TypeHierarchyPrepareRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(TypeHierarchyPrepareRequest.method);\n})(TypeHierarchyPrepareRequest || (exports.TypeHierarchyPrepareRequest = TypeHierarchyPrepareRequest = {}));\n/**\n * A request to resolve the supertypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySupertypesRequest;\n(function (TypeHierarchySupertypesRequest) {\n    TypeHierarchySupertypesRequest.method = 'typeHierarchy/supertypes';\n    TypeHierarchySupertypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySupertypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySupertypesRequest.method);\n})(TypeHierarchySupertypesRequest || (exports.TypeHierarchySupertypesRequest = TypeHierarchySupertypesRequest = {}));\n/**\n * A request to resolve the subtypes for a given `TypeHierarchyItem`.\n *\n * @since 3.17.0\n */\nvar TypeHierarchySubtypesRequest;\n(function (TypeHierarchySubtypesRequest) {\n    TypeHierarchySubtypesRequest.method = 'typeHierarchy/subtypes';\n    TypeHierarchySubtypesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    TypeHierarchySubtypesRequest.type = new messages_1.ProtocolRequestType(TypeHierarchySubtypesRequest.method);\n})(TypeHierarchySubtypesRequest || (exports.TypeHierarchySubtypesRequest = TypeHierarchySubtypesRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueRefreshRequest = exports.InlineValueRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline values in a document. The request's parameter is of\n * type {@link InlineValueParams}, the response is of type\n * {@link InlineValue InlineValue[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlineValueRequest;\n(function (InlineValueRequest) {\n    InlineValueRequest.method = 'textDocument/inlineValue';\n    InlineValueRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineValueRequest.type = new messages_1.ProtocolRequestType(InlineValueRequest.method);\n})(InlineValueRequest || (exports.InlineValueRequest = InlineValueRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlineValueRefreshRequest;\n(function (InlineValueRefreshRequest) {\n    InlineValueRefreshRequest.method = `workspace/inlineValue/refresh`;\n    InlineValueRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlineValueRefreshRequest.type = new messages_1.ProtocolRequestType0(InlineValueRefreshRequest.method);\n})(InlineValueRefreshRequest || (exports.InlineValueRefreshRequest = InlineValueRefreshRequest = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inlay hints in a document. The request's parameter is of\n * type {@link InlayHintsParams}, the response is of type\n * {@link InlayHint InlayHint[]} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintRequest;\n(function (InlayHintRequest) {\n    InlayHintRequest.method = 'textDocument/inlayHint';\n    InlayHintRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintRequest.type = new messages_1.ProtocolRequestType(InlayHintRequest.method);\n})(InlayHintRequest || (exports.InlayHintRequest = InlayHintRequest = {}));\n/**\n * A request to resolve additional properties for an inlay hint.\n * The request's parameter is of type {@link InlayHint}, the response is\n * of type {@link InlayHint} or a Thenable that resolves to such.\n *\n * @since 3.17.0\n */\nvar InlayHintResolveRequest;\n(function (InlayHintResolveRequest) {\n    InlayHintResolveRequest.method = 'inlayHint/resolve';\n    InlayHintResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlayHintResolveRequest.type = new messages_1.ProtocolRequestType(InlayHintResolveRequest.method);\n})(InlayHintResolveRequest || (exports.InlayHintResolveRequest = InlayHintResolveRequest = {}));\n/**\n * @since 3.17.0\n */\nvar InlayHintRefreshRequest;\n(function (InlayHintRefreshRequest) {\n    InlayHintRefreshRequest.method = `workspace/inlayHint/refresh`;\n    InlayHintRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    InlayHintRefreshRequest.type = new messages_1.ProtocolRequestType0(InlayHintRefreshRequest.method);\n})(InlayHintRefreshRequest || (exports.InlayHintRefreshRequest = InlayHintRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * @since 3.17.0\n */\nvar DiagnosticServerCancellationData;\n(function (DiagnosticServerCancellationData) {\n    function is(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.retriggerRequest);\n    }\n    DiagnosticServerCancellationData.is = is;\n})(DiagnosticServerCancellationData || (exports.DiagnosticServerCancellationData = DiagnosticServerCancellationData = {}));\n/**\n * The document diagnostic report kinds.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticReportKind;\n(function (DocumentDiagnosticReportKind) {\n    /**\n     * A diagnostic report with a full\n     * set of problems.\n     */\n    DocumentDiagnosticReportKind.Full = 'full';\n    /**\n     * A report indicating that the last\n     * returned report is still accurate.\n     */\n    DocumentDiagnosticReportKind.Unchanged = 'unchanged';\n})(DocumentDiagnosticReportKind || (exports.DocumentDiagnosticReportKind = DocumentDiagnosticReportKind = {}));\n/**\n * The document diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar DocumentDiagnosticRequest;\n(function (DocumentDiagnosticRequest) {\n    DocumentDiagnosticRequest.method = 'textDocument/diagnostic';\n    DocumentDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentDiagnosticRequest.type = new messages_1.ProtocolRequestType(DocumentDiagnosticRequest.method);\n    DocumentDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(DocumentDiagnosticRequest || (exports.DocumentDiagnosticRequest = DocumentDiagnosticRequest = {}));\n/**\n * The workspace diagnostic request definition.\n *\n * @since 3.17.0\n */\nvar WorkspaceDiagnosticRequest;\n(function (WorkspaceDiagnosticRequest) {\n    WorkspaceDiagnosticRequest.method = 'workspace/diagnostic';\n    WorkspaceDiagnosticRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceDiagnosticRequest.type = new messages_1.ProtocolRequestType(WorkspaceDiagnosticRequest.method);\n    WorkspaceDiagnosticRequest.partialResult = new vscode_jsonrpc_1.ProgressType();\n})(WorkspaceDiagnosticRequest || (exports.WorkspaceDiagnosticRequest = WorkspaceDiagnosticRequest = {}));\n/**\n * The diagnostic refresh request definition.\n *\n * @since 3.17.0\n */\nvar DiagnosticRefreshRequest;\n(function (DiagnosticRefreshRequest) {\n    DiagnosticRefreshRequest.method = `workspace/diagnostic/refresh`;\n    DiagnosticRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    DiagnosticRefreshRequest.type = new messages_1.ProtocolRequestType0(DiagnosticRefreshRequest.method);\n})(DiagnosticRefreshRequest || (exports.DiagnosticRefreshRequest = DiagnosticRefreshRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = void 0;\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst messages_1 = require(\"./messages\");\n/**\n * A notebook cell kind.\n *\n * @since 3.17.0\n */\nvar NotebookCellKind;\n(function (NotebookCellKind) {\n    /**\n     * A markup-cell is formatted source that is used for display.\n     */\n    NotebookCellKind.Markup = 1;\n    /**\n     * A code-cell is source code.\n     */\n    NotebookCellKind.Code = 2;\n    function is(value) {\n        return value === 1 || value === 2;\n    }\n    NotebookCellKind.is = is;\n})(NotebookCellKind || (exports.NotebookCellKind = NotebookCellKind = {}));\nvar ExecutionSummary;\n(function (ExecutionSummary) {\n    function create(executionOrder, success) {\n        const result = { executionOrder };\n        if (success === true || success === false) {\n            result.success = success;\n        }\n        return result;\n    }\n    ExecutionSummary.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.executionOrder) && (candidate.success === undefined || Is.boolean(candidate.success));\n    }\n    ExecutionSummary.is = is;\n    function equals(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success;\n    }\n    ExecutionSummary.equals = equals;\n})(ExecutionSummary || (exports.ExecutionSummary = ExecutionSummary = {}));\nvar NotebookCell;\n(function (NotebookCell) {\n    function create(kind, document) {\n        return { kind, document };\n    }\n    NotebookCell.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && NotebookCellKind.is(candidate.kind) && vscode_languageserver_types_1.DocumentUri.is(candidate.document) &&\n            (candidate.metadata === undefined || Is.objectLiteral(candidate.metadata));\n    }\n    NotebookCell.is = is;\n    function diff(one, two) {\n        const result = new Set();\n        if (one.document !== two.document) {\n            result.add('document');\n        }\n        if (one.kind !== two.kind) {\n            result.add('kind');\n        }\n        if (one.executionSummary !== two.executionSummary) {\n            result.add('executionSummary');\n        }\n        if ((one.metadata !== undefined || two.metadata !== undefined) && !equalsMetadata(one.metadata, two.metadata)) {\n            result.add('metadata');\n        }\n        if ((one.executionSummary !== undefined || two.executionSummary !== undefined) && !ExecutionSummary.equals(one.executionSummary, two.executionSummary)) {\n            result.add('executionSummary');\n        }\n        return result;\n    }\n    NotebookCell.diff = diff;\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (Is.objectLiteral(one) && Is.objectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n        }\n        return true;\n    }\n})(NotebookCell || (exports.NotebookCell = NotebookCell = {}));\nvar NotebookDocument;\n(function (NotebookDocument) {\n    function create(uri, notebookType, version, cells) {\n        return { uri, notebookType, version, cells };\n    }\n    NotebookDocument.create = create;\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && Is.string(candidate.uri) && vscode_languageserver_types_1.integer.is(candidate.version) && Is.typedArray(candidate.cells, NotebookCell.is);\n    }\n    NotebookDocument.is = is;\n})(NotebookDocument || (exports.NotebookDocument = NotebookDocument = {}));\nvar NotebookDocumentSyncRegistrationType;\n(function (NotebookDocumentSyncRegistrationType) {\n    NotebookDocumentSyncRegistrationType.method = 'notebookDocument/sync';\n    NotebookDocumentSyncRegistrationType.messageDirection = messages_1.MessageDirection.clientToServer;\n    NotebookDocumentSyncRegistrationType.type = new messages_1.RegistrationType(NotebookDocumentSyncRegistrationType.method);\n})(NotebookDocumentSyncRegistrationType || (exports.NotebookDocumentSyncRegistrationType = NotebookDocumentSyncRegistrationType = {}));\n/**\n * A notification sent when a notebook opens.\n *\n * @since 3.17.0\n */\nvar DidOpenNotebookDocumentNotification;\n(function (DidOpenNotebookDocumentNotification) {\n    DidOpenNotebookDocumentNotification.method = 'notebookDocument/didOpen';\n    DidOpenNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenNotebookDocumentNotification.method);\n    DidOpenNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidOpenNotebookDocumentNotification || (exports.DidOpenNotebookDocumentNotification = DidOpenNotebookDocumentNotification = {}));\nvar NotebookCellArrayChange;\n(function (NotebookCellArrayChange) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && vscode_languageserver_types_1.uinteger.is(candidate.start) && vscode_languageserver_types_1.uinteger.is(candidate.deleteCount) && (candidate.cells === undefined || Is.typedArray(candidate.cells, NotebookCell.is));\n    }\n    NotebookCellArrayChange.is = is;\n    function create(start, deleteCount, cells) {\n        const result = { start, deleteCount };\n        if (cells !== undefined) {\n            result.cells = cells;\n        }\n        return result;\n    }\n    NotebookCellArrayChange.create = create;\n})(NotebookCellArrayChange || (exports.NotebookCellArrayChange = NotebookCellArrayChange = {}));\nvar DidChangeNotebookDocumentNotification;\n(function (DidChangeNotebookDocumentNotification) {\n    DidChangeNotebookDocumentNotification.method = 'notebookDocument/didChange';\n    DidChangeNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeNotebookDocumentNotification.method);\n    DidChangeNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidChangeNotebookDocumentNotification || (exports.DidChangeNotebookDocumentNotification = DidChangeNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook document is saved.\n *\n * @since 3.17.0\n */\nvar DidSaveNotebookDocumentNotification;\n(function (DidSaveNotebookDocumentNotification) {\n    DidSaveNotebookDocumentNotification.method = 'notebookDocument/didSave';\n    DidSaveNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveNotebookDocumentNotification.method);\n    DidSaveNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidSaveNotebookDocumentNotification || (exports.DidSaveNotebookDocumentNotification = DidSaveNotebookDocumentNotification = {}));\n/**\n * A notification sent when a notebook closes.\n *\n * @since 3.17.0\n */\nvar DidCloseNotebookDocumentNotification;\n(function (DidCloseNotebookDocumentNotification) {\n    DidCloseNotebookDocumentNotification.method = 'notebookDocument/didClose';\n    DidCloseNotebookDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseNotebookDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseNotebookDocumentNotification.method);\n    DidCloseNotebookDocumentNotification.registrationMethod = NotebookDocumentSyncRegistrationType.method;\n})(DidCloseNotebookDocumentNotification || (exports.DidCloseNotebookDocumentNotification = DidCloseNotebookDocumentNotification = {}));\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionRequest = void 0;\nconst messages_1 = require(\"./messages\");\n/**\n * A request to provide inline completions in a document. The request's parameter is of\n * type {@link InlineCompletionParams}, the response is of type\n * {@link InlineCompletion InlineCompletion[]} or a Thenable that resolves to such.\n *\n * @since 3.18.0\n * @proposed\n */\nvar InlineCompletionRequest;\n(function (InlineCompletionRequest) {\n    InlineCompletionRequest.method = 'textDocument/inlineCompletion';\n    InlineCompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InlineCompletionRequest.type = new messages_1.ProtocolRequestType(InlineCompletionRequest.method);\n})(InlineCompletionRequest || (exports.InlineCompletionRequest = InlineCompletionRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolRequest = exports.CodeActionResolveRequest = exports.CodeActionRequest = exports.DocumentSymbolRequest = exports.DocumentHighlightRequest = exports.ReferencesRequest = exports.DefinitionRequest = exports.SignatureHelpRequest = exports.SignatureHelpTriggerKind = exports.HoverRequest = exports.CompletionResolveRequest = exports.CompletionRequest = exports.CompletionTriggerKind = exports.PublishDiagnosticsNotification = exports.WatchKind = exports.RelativePattern = exports.FileChangeType = exports.DidChangeWatchedFilesNotification = exports.WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentNotification = exports.TextDocumentSaveReason = exports.DidSaveTextDocumentNotification = exports.DidCloseTextDocumentNotification = exports.DidChangeTextDocumentNotification = exports.TextDocumentContentChangeEvent = exports.DidOpenTextDocumentNotification = exports.TextDocumentSyncKind = exports.TelemetryEventNotification = exports.LogMessageNotification = exports.ShowMessageRequest = exports.ShowMessageNotification = exports.MessageType = exports.DidChangeConfigurationNotification = exports.ExitNotification = exports.ShutdownRequest = exports.InitializedNotification = exports.InitializeErrorCodes = exports.InitializeRequest = exports.WorkDoneProgressOptions = exports.TextDocumentRegistrationOptions = exports.StaticRegistrationOptions = exports.PositionEncodingKind = exports.FailureHandlingKind = exports.ResourceOperationKind = exports.UnregistrationRequest = exports.RegistrationRequest = exports.DocumentSelector = exports.NotebookCellTextDocumentFilter = exports.NotebookDocumentFilter = exports.TextDocumentFilter = void 0;\nexports.MonikerRequest = exports.MonikerKind = exports.UniquenessLevel = exports.WillDeleteFilesRequest = exports.DidDeleteFilesNotification = exports.WillRenameFilesRequest = exports.DidRenameFilesNotification = exports.WillCreateFilesRequest = exports.DidCreateFilesNotification = exports.FileOperationPatternKind = exports.LinkedEditingRangeRequest = exports.ShowDocumentRequest = exports.SemanticTokensRegistrationType = exports.SemanticTokensRefreshRequest = exports.SemanticTokensRangeRequest = exports.SemanticTokensDeltaRequest = exports.SemanticTokensRequest = exports.TokenFormat = exports.CallHierarchyPrepareRequest = exports.CallHierarchyOutgoingCallsRequest = exports.CallHierarchyIncomingCallsRequest = exports.WorkDoneProgressCancelNotification = exports.WorkDoneProgressCreateRequest = exports.WorkDoneProgress = exports.SelectionRangeRequest = exports.DeclarationRequest = exports.FoldingRangeRefreshRequest = exports.FoldingRangeRequest = exports.ColorPresentationRequest = exports.DocumentColorRequest = exports.ConfigurationRequest = exports.DidChangeWorkspaceFoldersNotification = exports.WorkspaceFoldersRequest = exports.TypeDefinitionRequest = exports.ImplementationRequest = exports.ApplyWorkspaceEditRequest = exports.ExecuteCommandRequest = exports.PrepareRenameRequest = exports.RenameRequest = exports.PrepareSupportDefaultBehavior = exports.DocumentOnTypeFormattingRequest = exports.DocumentRangesFormattingRequest = exports.DocumentRangeFormattingRequest = exports.DocumentFormattingRequest = exports.DocumentLinkResolveRequest = exports.DocumentLinkRequest = exports.CodeLensRefreshRequest = exports.CodeLensResolveRequest = exports.CodeLensRequest = exports.WorkspaceSymbolResolveRequest = void 0;\nexports.InlineCompletionRequest = exports.DidCloseNotebookDocumentNotification = exports.DidSaveNotebookDocumentNotification = exports.DidChangeNotebookDocumentNotification = exports.NotebookCellArrayChange = exports.DidOpenNotebookDocumentNotification = exports.NotebookDocumentSyncRegistrationType = exports.NotebookDocument = exports.NotebookCell = exports.ExecutionSummary = exports.NotebookCellKind = exports.DiagnosticRefreshRequest = exports.WorkspaceDiagnosticRequest = exports.DocumentDiagnosticRequest = exports.DocumentDiagnosticReportKind = exports.DiagnosticServerCancellationData = exports.InlayHintRefreshRequest = exports.InlayHintResolveRequest = exports.InlayHintRequest = exports.InlineValueRefreshRequest = exports.InlineValueRequest = exports.TypeHierarchySupertypesRequest = exports.TypeHierarchySubtypesRequest = exports.TypeHierarchyPrepareRequest = void 0;\nconst messages_1 = require(\"./messages\");\nconst vscode_languageserver_types_1 = require(\"vscode-languageserver-types\");\nconst Is = require(\"./utils/is\");\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\nObject.defineProperty(exports, \"ImplementationRequest\", { enumerable: true, get: function () { return protocol_implementation_1.ImplementationRequest; } });\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\nObject.defineProperty(exports, \"TypeDefinitionRequest\", { enumerable: true, get: function () { return protocol_typeDefinition_1.TypeDefinitionRequest; } });\nconst protocol_workspaceFolder_1 = require(\"./protocol.workspaceFolder\");\nObject.defineProperty(exports, \"WorkspaceFoldersRequest\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.WorkspaceFoldersRequest; } });\nObject.defineProperty(exports, \"DidChangeWorkspaceFoldersNotification\", { enumerable: true, get: function () { return protocol_workspaceFolder_1.DidChangeWorkspaceFoldersNotification; } });\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\nObject.defineProperty(exports, \"ConfigurationRequest\", { enumerable: true, get: function () { return protocol_configuration_1.ConfigurationRequest; } });\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\nObject.defineProperty(exports, \"DocumentColorRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.DocumentColorRequest; } });\nObject.defineProperty(exports, \"ColorPresentationRequest\", { enumerable: true, get: function () { return protocol_colorProvider_1.ColorPresentationRequest; } });\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\nObject.defineProperty(exports, \"FoldingRangeRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRequest; } });\nObject.defineProperty(exports, \"FoldingRangeRefreshRequest\", { enumerable: true, get: function () { return protocol_foldingRange_1.FoldingRangeRefreshRequest; } });\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\nObject.defineProperty(exports, \"DeclarationRequest\", { enumerable: true, get: function () { return protocol_declaration_1.DeclarationRequest; } });\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\nObject.defineProperty(exports, \"SelectionRangeRequest\", { enumerable: true, get: function () { return protocol_selectionRange_1.SelectionRangeRequest; } });\nconst protocol_progress_1 = require(\"./protocol.progress\");\nObject.defineProperty(exports, \"WorkDoneProgress\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgress; } });\nObject.defineProperty(exports, \"WorkDoneProgressCreateRequest\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCreateRequest; } });\nObject.defineProperty(exports, \"WorkDoneProgressCancelNotification\", { enumerable: true, get: function () { return protocol_progress_1.WorkDoneProgressCancelNotification; } });\nconst protocol_callHierarchy_1 = require(\"./protocol.callHierarchy\");\nObject.defineProperty(exports, \"CallHierarchyIncomingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyIncomingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyOutgoingCallsRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyOutgoingCallsRequest; } });\nObject.defineProperty(exports, \"CallHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_callHierarchy_1.CallHierarchyPrepareRequest; } });\nconst protocol_semanticTokens_1 = require(\"./protocol.semanticTokens\");\nObject.defineProperty(exports, \"TokenFormat\", { enumerable: true, get: function () { return protocol_semanticTokens_1.TokenFormat; } });\nObject.defineProperty(exports, \"SemanticTokensRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRequest; } });\nObject.defineProperty(exports, \"SemanticTokensDeltaRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensDeltaRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRangeRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRangeRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRefreshRequest\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRefreshRequest; } });\nObject.defineProperty(exports, \"SemanticTokensRegistrationType\", { enumerable: true, get: function () { return protocol_semanticTokens_1.SemanticTokensRegistrationType; } });\nconst protocol_showDocument_1 = require(\"./protocol.showDocument\");\nObject.defineProperty(exports, \"ShowDocumentRequest\", { enumerable: true, get: function () { return protocol_showDocument_1.ShowDocumentRequest; } });\nconst protocol_linkedEditingRange_1 = require(\"./protocol.linkedEditingRange\");\nObject.defineProperty(exports, \"LinkedEditingRangeRequest\", { enumerable: true, get: function () { return protocol_linkedEditingRange_1.LinkedEditingRangeRequest; } });\nconst protocol_fileOperations_1 = require(\"./protocol.fileOperations\");\nObject.defineProperty(exports, \"FileOperationPatternKind\", { enumerable: true, get: function () { return protocol_fileOperations_1.FileOperationPatternKind; } });\nObject.defineProperty(exports, \"DidCreateFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidCreateFilesNotification; } });\nObject.defineProperty(exports, \"WillCreateFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillCreateFilesRequest; } });\nObject.defineProperty(exports, \"DidRenameFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidRenameFilesNotification; } });\nObject.defineProperty(exports, \"WillRenameFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillRenameFilesRequest; } });\nObject.defineProperty(exports, \"DidDeleteFilesNotification\", { enumerable: true, get: function () { return protocol_fileOperations_1.DidDeleteFilesNotification; } });\nObject.defineProperty(exports, \"WillDeleteFilesRequest\", { enumerable: true, get: function () { return protocol_fileOperations_1.WillDeleteFilesRequest; } });\nconst protocol_moniker_1 = require(\"./protocol.moniker\");\nObject.defineProperty(exports, \"UniquenessLevel\", { enumerable: true, get: function () { return protocol_moniker_1.UniquenessLevel; } });\nObject.defineProperty(exports, \"MonikerKind\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerKind; } });\nObject.defineProperty(exports, \"MonikerRequest\", { enumerable: true, get: function () { return protocol_moniker_1.MonikerRequest; } });\nconst protocol_typeHierarchy_1 = require(\"./protocol.typeHierarchy\");\nObject.defineProperty(exports, \"TypeHierarchyPrepareRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchyPrepareRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySubtypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySubtypesRequest; } });\nObject.defineProperty(exports, \"TypeHierarchySupertypesRequest\", { enumerable: true, get: function () { return protocol_typeHierarchy_1.TypeHierarchySupertypesRequest; } });\nconst protocol_inlineValue_1 = require(\"./protocol.inlineValue\");\nObject.defineProperty(exports, \"InlineValueRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRequest; } });\nObject.defineProperty(exports, \"InlineValueRefreshRequest\", { enumerable: true, get: function () { return protocol_inlineValue_1.InlineValueRefreshRequest; } });\nconst protocol_inlayHint_1 = require(\"./protocol.inlayHint\");\nObject.defineProperty(exports, \"InlayHintRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRequest; } });\nObject.defineProperty(exports, \"InlayHintResolveRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintResolveRequest; } });\nObject.defineProperty(exports, \"InlayHintRefreshRequest\", { enumerable: true, get: function () { return protocol_inlayHint_1.InlayHintRefreshRequest; } });\nconst protocol_diagnostic_1 = require(\"./protocol.diagnostic\");\nObject.defineProperty(exports, \"DiagnosticServerCancellationData\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticServerCancellationData; } });\nObject.defineProperty(exports, \"DocumentDiagnosticReportKind\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticReportKind; } });\nObject.defineProperty(exports, \"DocumentDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DocumentDiagnosticRequest; } });\nObject.defineProperty(exports, \"WorkspaceDiagnosticRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.WorkspaceDiagnosticRequest; } });\nObject.defineProperty(exports, \"DiagnosticRefreshRequest\", { enumerable: true, get: function () { return protocol_diagnostic_1.DiagnosticRefreshRequest; } });\nconst protocol_notebook_1 = require(\"./protocol.notebook\");\nObject.defineProperty(exports, \"NotebookCellKind\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellKind; } });\nObject.defineProperty(exports, \"ExecutionSummary\", { enumerable: true, get: function () { return protocol_notebook_1.ExecutionSummary; } });\nObject.defineProperty(exports, \"NotebookCell\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCell; } });\nObject.defineProperty(exports, \"NotebookDocument\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocument; } });\nObject.defineProperty(exports, \"NotebookDocumentSyncRegistrationType\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookDocumentSyncRegistrationType; } });\nObject.defineProperty(exports, \"DidOpenNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidOpenNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"NotebookCellArrayChange\", { enumerable: true, get: function () { return protocol_notebook_1.NotebookCellArrayChange; } });\nObject.defineProperty(exports, \"DidChangeNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidChangeNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidSaveNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidSaveNotebookDocumentNotification; } });\nObject.defineProperty(exports, \"DidCloseNotebookDocumentNotification\", { enumerable: true, get: function () { return protocol_notebook_1.DidCloseNotebookDocumentNotification; } });\nconst protocol_inlineCompletion_1 = require(\"./protocol.inlineCompletion\");\nObject.defineProperty(exports, \"InlineCompletionRequest\", { enumerable: true, get: function () { return protocol_inlineCompletion_1.InlineCompletionRequest; } });\n// @ts-ignore: to avoid inlining LocationLink as dynamic import\nlet __noDynamicImport;\n/**\n * The TextDocumentFilter namespace provides helper functions to work with\n * {@link TextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar TextDocumentFilter;\n(function (TextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.string(candidate) || (Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    TextDocumentFilter.is = is;\n})(TextDocumentFilter || (exports.TextDocumentFilter = TextDocumentFilter = {}));\n/**\n * The NotebookDocumentFilter namespace provides helper functions to work with\n * {@link NotebookDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookDocumentFilter;\n(function (NotebookDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (Is.string(candidate.notebookType) || Is.string(candidate.scheme) || Is.string(candidate.pattern));\n    }\n    NotebookDocumentFilter.is = is;\n})(NotebookDocumentFilter || (exports.NotebookDocumentFilter = NotebookDocumentFilter = {}));\n/**\n * The NotebookCellTextDocumentFilter namespace provides helper functions to work with\n * {@link NotebookCellTextDocumentFilter} literals.\n *\n * @since 3.17.0\n */\nvar NotebookCellTextDocumentFilter;\n(function (NotebookCellTextDocumentFilter) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate)\n            && (Is.string(candidate.notebook) || NotebookDocumentFilter.is(candidate.notebook))\n            && (candidate.language === undefined || Is.string(candidate.language));\n    }\n    NotebookCellTextDocumentFilter.is = is;\n})(NotebookCellTextDocumentFilter || (exports.NotebookCellTextDocumentFilter = NotebookCellTextDocumentFilter = {}));\n/**\n * The DocumentSelector namespace provides helper functions to work with\n * {@link DocumentSelector}s.\n */\nvar DocumentSelector;\n(function (DocumentSelector) {\n    function is(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        for (let elem of value) {\n            if (!Is.string(elem) && !TextDocumentFilter.is(elem) && !NotebookCellTextDocumentFilter.is(elem)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    DocumentSelector.is = is;\n})(DocumentSelector || (exports.DocumentSelector = DocumentSelector = {}));\n/**\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\n * handler on the client side.\n */\nvar RegistrationRequest;\n(function (RegistrationRequest) {\n    RegistrationRequest.method = 'client/registerCapability';\n    RegistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    RegistrationRequest.type = new messages_1.ProtocolRequestType(RegistrationRequest.method);\n})(RegistrationRequest || (exports.RegistrationRequest = RegistrationRequest = {}));\n/**\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\n * handler on the client side.\n */\nvar UnregistrationRequest;\n(function (UnregistrationRequest) {\n    UnregistrationRequest.method = 'client/unregisterCapability';\n    UnregistrationRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType(UnregistrationRequest.method);\n})(UnregistrationRequest || (exports.UnregistrationRequest = UnregistrationRequest = {}));\nvar ResourceOperationKind;\n(function (ResourceOperationKind) {\n    /**\n     * Supports creating new files and folders.\n     */\n    ResourceOperationKind.Create = 'create';\n    /**\n     * Supports renaming existing files and folders.\n     */\n    ResourceOperationKind.Rename = 'rename';\n    /**\n     * Supports deleting existing files and folders.\n     */\n    ResourceOperationKind.Delete = 'delete';\n})(ResourceOperationKind || (exports.ResourceOperationKind = ResourceOperationKind = {}));\nvar FailureHandlingKind;\n(function (FailureHandlingKind) {\n    /**\n     * Applying the workspace change is simply aborted if one of the changes provided\n     * fails. All operations executed before the failing operation stay executed.\n     */\n    FailureHandlingKind.Abort = 'abort';\n    /**\n     * All operations are executed transactional. That means they either all\n     * succeed or no changes at all are applied to the workspace.\n     */\n    FailureHandlingKind.Transactional = 'transactional';\n    /**\n     * If the workspace edit contains only textual file changes they are executed transactional.\n     * If resource changes (create, rename or delete file) are part of the change the failure\n     * handling strategy is abort.\n     */\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\n    /**\n     * The client tries to undo the operations already executed. But there is no\n     * guarantee that this is succeeding.\n     */\n    FailureHandlingKind.Undo = 'undo';\n})(FailureHandlingKind || (exports.FailureHandlingKind = FailureHandlingKind = {}));\n/**\n * A set of predefined position encoding kinds.\n *\n * @since 3.17.0\n */\nvar PositionEncodingKind;\n(function (PositionEncodingKind) {\n    /**\n     * Character offsets count UTF-8 code units (e.g. bytes).\n     */\n    PositionEncodingKind.UTF8 = 'utf-8';\n    /**\n     * Character offsets count UTF-16 code units.\n     *\n     * This is the default and must always be supported\n     * by servers\n     */\n    PositionEncodingKind.UTF16 = 'utf-16';\n    /**\n     * Character offsets count UTF-32 code units.\n     *\n     * Implementation note: these are the same as Unicode codepoints,\n     * so this `PositionEncodingKind` may also be used for an\n     * encoding-agnostic representation of character offsets.\n     */\n    PositionEncodingKind.UTF32 = 'utf-32';\n})(PositionEncodingKind || (exports.PositionEncodingKind = PositionEncodingKind = {}));\n/**\n * The StaticRegistrationOptions namespace provides helper functions to work with\n * {@link StaticRegistrationOptions} literals.\n */\nvar StaticRegistrationOptions;\n(function (StaticRegistrationOptions) {\n    function hasId(value) {\n        const candidate = value;\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\n    }\n    StaticRegistrationOptions.hasId = hasId;\n})(StaticRegistrationOptions || (exports.StaticRegistrationOptions = StaticRegistrationOptions = {}));\n/**\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\n * {@link TextDocumentRegistrationOptions} literals.\n */\nvar TextDocumentRegistrationOptions;\n(function (TextDocumentRegistrationOptions) {\n    function is(value) {\n        const candidate = value;\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\n    }\n    TextDocumentRegistrationOptions.is = is;\n})(TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = TextDocumentRegistrationOptions = {}));\n/**\n * The WorkDoneProgressOptions namespace provides helper functions to work with\n * {@link WorkDoneProgressOptions} literals.\n */\nvar WorkDoneProgressOptions;\n(function (WorkDoneProgressOptions) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\n    }\n    WorkDoneProgressOptions.is = is;\n    function hasWorkDoneProgress(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.workDoneProgress);\n    }\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\n})(WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = WorkDoneProgressOptions = {}));\n/**\n * The initialize request is sent from the client to the server.\n * It is sent once as the request after starting up the server.\n * The requests parameter is of type {@link InitializeParams}\n * the response if of type {@link InitializeResult} of a Thenable that\n * resolves to such.\n */\nvar InitializeRequest;\n(function (InitializeRequest) {\n    InitializeRequest.method = 'initialize';\n    InitializeRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializeRequest.type = new messages_1.ProtocolRequestType(InitializeRequest.method);\n})(InitializeRequest || (exports.InitializeRequest = InitializeRequest = {}));\n/**\n * Known error codes for an `InitializeErrorCodes`;\n */\nvar InitializeErrorCodes;\n(function (InitializeErrorCodes) {\n    /**\n     * If the protocol version provided by the client can't be handled by the server.\n     *\n     * @deprecated This initialize error got replaced by client capabilities. There is\n     * no version handshake in version 3.0x\n     */\n    InitializeErrorCodes.unknownProtocolVersion = 1;\n})(InitializeErrorCodes || (exports.InitializeErrorCodes = InitializeErrorCodes = {}));\n/**\n * The initialized notification is sent from the client to the\n * server after the client is fully initialized and the server\n * is allowed to send requests from the server to the client.\n */\nvar InitializedNotification;\n(function (InitializedNotification) {\n    InitializedNotification.method = 'initialized';\n    InitializedNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    InitializedNotification.type = new messages_1.ProtocolNotificationType(InitializedNotification.method);\n})(InitializedNotification || (exports.InitializedNotification = InitializedNotification = {}));\n//---- Shutdown Method ----\n/**\n * A shutdown request is sent from the client to the server.\n * It is sent once when the client decides to shutdown the\n * server. The only notification that is sent after a shutdown request\n * is the exit event.\n */\nvar ShutdownRequest;\n(function (ShutdownRequest) {\n    ShutdownRequest.method = 'shutdown';\n    ShutdownRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0(ShutdownRequest.method);\n})(ShutdownRequest || (exports.ShutdownRequest = ShutdownRequest = {}));\n//---- Exit Notification ----\n/**\n * The exit event is sent from the client to the server to\n * ask the server to exit its process.\n */\nvar ExitNotification;\n(function (ExitNotification) {\n    ExitNotification.method = 'exit';\n    ExitNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExitNotification.type = new messages_1.ProtocolNotificationType0(ExitNotification.method);\n})(ExitNotification || (exports.ExitNotification = ExitNotification = {}));\n/**\n * The configuration change notification is sent from the client to the server\n * when the client's configuration has changed. The notification contains\n * the changed configuration as defined by the language client.\n */\nvar DidChangeConfigurationNotification;\n(function (DidChangeConfigurationNotification) {\n    DidChangeConfigurationNotification.method = 'workspace/didChangeConfiguration';\n    DidChangeConfigurationNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType(DidChangeConfigurationNotification.method);\n})(DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = DidChangeConfigurationNotification = {}));\n//---- Message show and log notifications ----\n/**\n * The message type\n */\nvar MessageType;\n(function (MessageType) {\n    /**\n     * An error message.\n     */\n    MessageType.Error = 1;\n    /**\n     * A warning message.\n     */\n    MessageType.Warning = 2;\n    /**\n     * An information message.\n     */\n    MessageType.Info = 3;\n    /**\n     * A log message.\n     */\n    MessageType.Log = 4;\n    /**\n     * A debug message.\n     *\n     * @since 3.18.0\n     */\n    MessageType.Debug = 5;\n})(MessageType || (exports.MessageType = MessageType = {}));\n/**\n * The show message notification is sent from a server to a client to ask\n * the client to display a particular message in the user interface.\n */\nvar ShowMessageNotification;\n(function (ShowMessageNotification) {\n    ShowMessageNotification.method = 'window/showMessage';\n    ShowMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType(ShowMessageNotification.method);\n})(ShowMessageNotification || (exports.ShowMessageNotification = ShowMessageNotification = {}));\n/**\n * The show message request is sent from the server to the client to show a message\n * and a set of options actions to the user.\n */\nvar ShowMessageRequest;\n(function (ShowMessageRequest) {\n    ShowMessageRequest.method = 'window/showMessageRequest';\n    ShowMessageRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType(ShowMessageRequest.method);\n})(ShowMessageRequest || (exports.ShowMessageRequest = ShowMessageRequest = {}));\n/**\n * The log message notification is sent from the server to the client to ask\n * the client to log a particular message.\n */\nvar LogMessageNotification;\n(function (LogMessageNotification) {\n    LogMessageNotification.method = 'window/logMessage';\n    LogMessageNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType(LogMessageNotification.method);\n})(LogMessageNotification || (exports.LogMessageNotification = LogMessageNotification = {}));\n//---- Telemetry notification\n/**\n * The telemetry event notification is sent from the server to the client to ask\n * the client to log telemetry data.\n */\nvar TelemetryEventNotification;\n(function (TelemetryEventNotification) {\n    TelemetryEventNotification.method = 'telemetry/event';\n    TelemetryEventNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType(TelemetryEventNotification.method);\n})(TelemetryEventNotification || (exports.TelemetryEventNotification = TelemetryEventNotification = {}));\n/**\n * Defines how the host (editor) should sync\n * document changes to the language server.\n */\nvar TextDocumentSyncKind;\n(function (TextDocumentSyncKind) {\n    /**\n     * Documents should not be synced at all.\n     */\n    TextDocumentSyncKind.None = 0;\n    /**\n     * Documents are synced by always sending the full content\n     * of the document.\n     */\n    TextDocumentSyncKind.Full = 1;\n    /**\n     * Documents are synced by sending the full content on open.\n     * After that only incremental updates to the document are\n     * send.\n     */\n    TextDocumentSyncKind.Incremental = 2;\n})(TextDocumentSyncKind || (exports.TextDocumentSyncKind = TextDocumentSyncKind = {}));\n/**\n * The document open notification is sent from the client to the server to signal\n * newly opened text documents. The document's truth is now managed by the client\n * and the server must not try to read the document's truth using the document's\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\n * mean that its content is presented in an editor. An open notification must not\n * be sent more than once without a corresponding close notification send before.\n * This means open and close notification must be balanced and the max open count\n * is one.\n */\nvar DidOpenTextDocumentNotification;\n(function (DidOpenTextDocumentNotification) {\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\n    DidOpenTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\n})(DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = DidOpenTextDocumentNotification = {}));\nvar TextDocumentContentChangeEvent;\n(function (TextDocumentContentChangeEvent) {\n    /**\n     * Checks whether the information describes a delta event.\n     */\n    function isIncremental(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range !== undefined &&\n            (candidate.rangeLength === undefined || typeof candidate.rangeLength === 'number');\n    }\n    TextDocumentContentChangeEvent.isIncremental = isIncremental;\n    /**\n     * Checks whether the information describes a full replacement event.\n     */\n    function isFull(event) {\n        let candidate = event;\n        return candidate !== undefined && candidate !== null &&\n            typeof candidate.text === 'string' && candidate.range === undefined && candidate.rangeLength === undefined;\n    }\n    TextDocumentContentChangeEvent.isFull = isFull;\n})(TextDocumentContentChangeEvent || (exports.TextDocumentContentChangeEvent = TextDocumentContentChangeEvent = {}));\n/**\n * The document change notification is sent from the client to the server to signal\n * changes to a text document.\n */\nvar DidChangeTextDocumentNotification;\n(function (DidChangeTextDocumentNotification) {\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\n    DidChangeTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\n})(DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = DidChangeTextDocumentNotification = {}));\n/**\n * The document close notification is sent from the client to the server when\n * the document got closed in the client. The document's truth now exists where\n * the document's uri points to (e.g. if the document's uri is a file uri the\n * truth now exists on disk). As with the open notification the close notification\n * is about managing the document's content. Receiving a close notification\n * doesn't mean that the document was open in an editor before. A close\n * notification requires a previous open notification to be sent.\n */\nvar DidCloseTextDocumentNotification;\n(function (DidCloseTextDocumentNotification) {\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\n    DidCloseTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\n})(DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = DidCloseTextDocumentNotification = {}));\n/**\n * The document save notification is sent from the client to the server when\n * the document got saved in the client.\n */\nvar DidSaveTextDocumentNotification;\n(function (DidSaveTextDocumentNotification) {\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\n    DidSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\n})(DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = DidSaveTextDocumentNotification = {}));\n/**\n * Represents reasons why a text document is saved.\n */\nvar TextDocumentSaveReason;\n(function (TextDocumentSaveReason) {\n    /**\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\n     * or by an API call.\n     */\n    TextDocumentSaveReason.Manual = 1;\n    /**\n     * Automatic after a delay.\n     */\n    TextDocumentSaveReason.AfterDelay = 2;\n    /**\n     * When the editor lost focus.\n     */\n    TextDocumentSaveReason.FocusOut = 3;\n})(TextDocumentSaveReason || (exports.TextDocumentSaveReason = TextDocumentSaveReason = {}));\n/**\n * A document will save notification is sent from the client to the server before\n * the document is actually saved.\n */\nvar WillSaveTextDocumentNotification;\n(function (WillSaveTextDocumentNotification) {\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\n    WillSaveTextDocumentNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\n})(WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = WillSaveTextDocumentNotification = {}));\n/**\n * A document will save request is sent from the client to the server before\n * the document is actually saved. The request can return an array of TextEdits\n * which will be applied to the text document before it is saved. Please note that\n * clients might drop results if computing the text edits took too long or if a\n * server constantly fails on this request. This is done to keep the save fast and\n * reliable.\n */\nvar WillSaveTextDocumentWaitUntilRequest;\n(function (WillSaveTextDocumentWaitUntilRequest) {\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\n    WillSaveTextDocumentWaitUntilRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\n})(WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = WillSaveTextDocumentWaitUntilRequest = {}));\n/**\n * The watched files notification is sent from the client to the server when\n * the client detects changes to file watched by the language client.\n */\nvar DidChangeWatchedFilesNotification;\n(function (DidChangeWatchedFilesNotification) {\n    DidChangeWatchedFilesNotification.method = 'workspace/didChangeWatchedFiles';\n    DidChangeWatchedFilesNotification.messageDirection = messages_1.MessageDirection.clientToServer;\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType(DidChangeWatchedFilesNotification.method);\n})(DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = DidChangeWatchedFilesNotification = {}));\n/**\n * The file event type\n */\nvar FileChangeType;\n(function (FileChangeType) {\n    /**\n     * The file got created.\n     */\n    FileChangeType.Created = 1;\n    /**\n     * The file got changed.\n     */\n    FileChangeType.Changed = 2;\n    /**\n     * The file got deleted.\n     */\n    FileChangeType.Deleted = 3;\n})(FileChangeType || (exports.FileChangeType = FileChangeType = {}));\nvar RelativePattern;\n(function (RelativePattern) {\n    function is(value) {\n        const candidate = value;\n        return Is.objectLiteral(candidate) && (vscode_languageserver_types_1.URI.is(candidate.baseUri) || vscode_languageserver_types_1.WorkspaceFolder.is(candidate.baseUri)) && Is.string(candidate.pattern);\n    }\n    RelativePattern.is = is;\n})(RelativePattern || (exports.RelativePattern = RelativePattern = {}));\nvar WatchKind;\n(function (WatchKind) {\n    /**\n     * Interested in create events.\n     */\n    WatchKind.Create = 1;\n    /**\n     * Interested in change events\n     */\n    WatchKind.Change = 2;\n    /**\n     * Interested in delete events\n     */\n    WatchKind.Delete = 4;\n})(WatchKind || (exports.WatchKind = WatchKind = {}));\n/**\n * Diagnostics notification are sent from the server to the client to signal\n * results of validation runs.\n */\nvar PublishDiagnosticsNotification;\n(function (PublishDiagnosticsNotification) {\n    PublishDiagnosticsNotification.method = 'textDocument/publishDiagnostics';\n    PublishDiagnosticsNotification.messageDirection = messages_1.MessageDirection.serverToClient;\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType(PublishDiagnosticsNotification.method);\n})(PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = PublishDiagnosticsNotification = {}));\n/**\n * How a completion was triggered\n */\nvar CompletionTriggerKind;\n(function (CompletionTriggerKind) {\n    /**\n     * Completion was triggered by typing an identifier (24x7 code\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\n     */\n    CompletionTriggerKind.Invoked = 1;\n    /**\n     * Completion was triggered by a trigger character specified by\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\n     */\n    CompletionTriggerKind.TriggerCharacter = 2;\n    /**\n     * Completion was re-triggered as current completion list is incomplete\n     */\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\n})(CompletionTriggerKind || (exports.CompletionTriggerKind = CompletionTriggerKind = {}));\n/**\n * Request to request completion at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response\n * is of type {@link CompletionItem CompletionItem[]} or {@link CompletionList}\n * or a Thenable that resolves to such.\n *\n * The request can delay the computation of the {@link CompletionItem.detail `detail`}\n * and {@link CompletionItem.documentation `documentation`} properties to the `completionItem/resolve`\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\n */\nvar CompletionRequest;\n(function (CompletionRequest) {\n    CompletionRequest.method = 'textDocument/completion';\n    CompletionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\n})(CompletionRequest || (exports.CompletionRequest = CompletionRequest = {}));\n/**\n * Request to resolve additional information for a given completion item.The request's\n * parameter is of type {@link CompletionItem} the response\n * is of type {@link CompletionItem} or a Thenable that resolves to such.\n */\nvar CompletionResolveRequest;\n(function (CompletionResolveRequest) {\n    CompletionResolveRequest.method = 'completionItem/resolve';\n    CompletionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\n})(CompletionResolveRequest || (exports.CompletionResolveRequest = CompletionResolveRequest = {}));\n/**\n * Request to request hover information at a given text document position. The request's\n * parameter is of type {@link TextDocumentPosition} the response is of\n * type {@link Hover} or a Thenable that resolves to such.\n */\nvar HoverRequest;\n(function (HoverRequest) {\n    HoverRequest.method = 'textDocument/hover';\n    HoverRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\n})(HoverRequest || (exports.HoverRequest = HoverRequest = {}));\n/**\n * How a signature help was triggered.\n *\n * @since 3.15.0\n */\nvar SignatureHelpTriggerKind;\n(function (SignatureHelpTriggerKind) {\n    /**\n     * Signature help was invoked manually by the user or by a command.\n     */\n    SignatureHelpTriggerKind.Invoked = 1;\n    /**\n     * Signature help was triggered by a trigger character.\n     */\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\n    /**\n     * Signature help was triggered by the cursor moving or by the document content changing.\n     */\n    SignatureHelpTriggerKind.ContentChange = 3;\n})(SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = SignatureHelpTriggerKind = {}));\nvar SignatureHelpRequest;\n(function (SignatureHelpRequest) {\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\n    SignatureHelpRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\n})(SignatureHelpRequest || (exports.SignatureHelpRequest = SignatureHelpRequest = {}));\n/**\n * A request to resolve the definition location of a symbol at a given text\n * document position. The request's parameter is of type {@link TextDocumentPosition}\n * the response is of either type {@link Definition} or a typed array of\n * {@link DefinitionLink} or a Thenable that resolves to such.\n */\nvar DefinitionRequest;\n(function (DefinitionRequest) {\n    DefinitionRequest.method = 'textDocument/definition';\n    DefinitionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\n})(DefinitionRequest || (exports.DefinitionRequest = DefinitionRequest = {}));\n/**\n * A request to resolve project-wide references for the symbol denoted\n * by the given text document position. The request's parameter is of\n * type {@link ReferenceParams} the response is of type\n * {@link Location Location[]} or a Thenable that resolves to such.\n */\nvar ReferencesRequest;\n(function (ReferencesRequest) {\n    ReferencesRequest.method = 'textDocument/references';\n    ReferencesRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\n})(ReferencesRequest || (exports.ReferencesRequest = ReferencesRequest = {}));\n/**\n * Request to resolve a {@link DocumentHighlight} for a given\n * text document position. The request's parameter is of type {@link TextDocumentPosition}\n * the request response is an array of type {@link DocumentHighlight}\n * or a Thenable that resolves to such.\n */\nvar DocumentHighlightRequest;\n(function (DocumentHighlightRequest) {\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\n    DocumentHighlightRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\n})(DocumentHighlightRequest || (exports.DocumentHighlightRequest = DocumentHighlightRequest = {}));\n/**\n * A request to list all symbols found in a given text document. The request's\n * parameter is of type {@link TextDocumentIdentifier} the\n * response is of type {@link SymbolInformation SymbolInformation[]} or a Thenable\n * that resolves to such.\n */\nvar DocumentSymbolRequest;\n(function (DocumentSymbolRequest) {\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\n    DocumentSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\n})(DocumentSymbolRequest || (exports.DocumentSymbolRequest = DocumentSymbolRequest = {}));\n/**\n * A request to provide commands for the given text document and range.\n */\nvar CodeActionRequest;\n(function (CodeActionRequest) {\n    CodeActionRequest.method = 'textDocument/codeAction';\n    CodeActionRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\n})(CodeActionRequest || (exports.CodeActionRequest = CodeActionRequest = {}));\n/**\n * Request to resolve additional information for a given code action.The request's\n * parameter is of type {@link CodeAction} the response\n * is of type {@link CodeAction} or a Thenable that resolves to such.\n */\nvar CodeActionResolveRequest;\n(function (CodeActionResolveRequest) {\n    CodeActionResolveRequest.method = 'codeAction/resolve';\n    CodeActionResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeActionResolveRequest.type = new messages_1.ProtocolRequestType(CodeActionResolveRequest.method);\n})(CodeActionResolveRequest || (exports.CodeActionResolveRequest = CodeActionResolveRequest = {}));\n/**\n * A request to list project-wide symbols matching the query string given\n * by the {@link WorkspaceSymbolParams}. The response is\n * of type {@link SymbolInformation SymbolInformation[]} or a Thenable that\n * resolves to such.\n *\n * @since 3.17.0 - support for WorkspaceSymbol in the returned data. Clients\n *  need to advertise support for WorkspaceSymbols via the client capability\n *  `workspace.symbol.resolveSupport`.\n *\n */\nvar WorkspaceSymbolRequest;\n(function (WorkspaceSymbolRequest) {\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\n    WorkspaceSymbolRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\n})(WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = WorkspaceSymbolRequest = {}));\n/**\n * A request to resolve the range inside the workspace\n * symbol's location.\n *\n * @since 3.17.0\n */\nvar WorkspaceSymbolResolveRequest;\n(function (WorkspaceSymbolResolveRequest) {\n    WorkspaceSymbolResolveRequest.method = 'workspaceSymbol/resolve';\n    WorkspaceSymbolResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    WorkspaceSymbolResolveRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolResolveRequest.method);\n})(WorkspaceSymbolResolveRequest || (exports.WorkspaceSymbolResolveRequest = WorkspaceSymbolResolveRequest = {}));\n/**\n * A request to provide code lens for the given text document.\n */\nvar CodeLensRequest;\n(function (CodeLensRequest) {\n    CodeLensRequest.method = 'textDocument/codeLens';\n    CodeLensRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensRequest.type = new messages_1.ProtocolRequestType(CodeLensRequest.method);\n})(CodeLensRequest || (exports.CodeLensRequest = CodeLensRequest = {}));\n/**\n * A request to resolve a command for a given code lens.\n */\nvar CodeLensResolveRequest;\n(function (CodeLensResolveRequest) {\n    CodeLensResolveRequest.method = 'codeLens/resolve';\n    CodeLensResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType(CodeLensResolveRequest.method);\n})(CodeLensResolveRequest || (exports.CodeLensResolveRequest = CodeLensResolveRequest = {}));\n/**\n * A request to refresh all code actions\n *\n * @since 3.16.0\n */\nvar CodeLensRefreshRequest;\n(function (CodeLensRefreshRequest) {\n    CodeLensRefreshRequest.method = `workspace/codeLens/refresh`;\n    CodeLensRefreshRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    CodeLensRefreshRequest.type = new messages_1.ProtocolRequestType0(CodeLensRefreshRequest.method);\n})(CodeLensRefreshRequest || (exports.CodeLensRefreshRequest = CodeLensRefreshRequest = {}));\n/**\n * A request to provide document links\n */\nvar DocumentLinkRequest;\n(function (DocumentLinkRequest) {\n    DocumentLinkRequest.method = 'textDocument/documentLink';\n    DocumentLinkRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\n})(DocumentLinkRequest || (exports.DocumentLinkRequest = DocumentLinkRequest = {}));\n/**\n * Request to resolve additional information for a given document link. The request's\n * parameter is of type {@link DocumentLink} the response\n * is of type {@link DocumentLink} or a Thenable that resolves to such.\n */\nvar DocumentLinkResolveRequest;\n(function (DocumentLinkResolveRequest) {\n    DocumentLinkResolveRequest.method = 'documentLink/resolve';\n    DocumentLinkResolveRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType(DocumentLinkResolveRequest.method);\n})(DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = DocumentLinkResolveRequest = {}));\n/**\n * A request to format a whole document.\n */\nvar DocumentFormattingRequest;\n(function (DocumentFormattingRequest) {\n    DocumentFormattingRequest.method = 'textDocument/formatting';\n    DocumentFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\n})(DocumentFormattingRequest || (exports.DocumentFormattingRequest = DocumentFormattingRequest = {}));\n/**\n * A request to format a range in a document.\n */\nvar DocumentRangeFormattingRequest;\n(function (DocumentRangeFormattingRequest) {\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\n    DocumentRangeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\n})(DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = DocumentRangeFormattingRequest = {}));\n/**\n * A request to format ranges in a document.\n *\n * @since 3.18.0\n * @proposed\n */\nvar DocumentRangesFormattingRequest;\n(function (DocumentRangesFormattingRequest) {\n    DocumentRangesFormattingRequest.method = 'textDocument/rangesFormatting';\n    DocumentRangesFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentRangesFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangesFormattingRequest.method);\n})(DocumentRangesFormattingRequest || (exports.DocumentRangesFormattingRequest = DocumentRangesFormattingRequest = {}));\n/**\n * A request to format a document on type.\n */\nvar DocumentOnTypeFormattingRequest;\n(function (DocumentOnTypeFormattingRequest) {\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\n    DocumentOnTypeFormattingRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\n})(DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = DocumentOnTypeFormattingRequest = {}));\n//---- Rename ----------------------------------------------\nvar PrepareSupportDefaultBehavior;\n(function (PrepareSupportDefaultBehavior) {\n    /**\n     * The client's default behavior is to select the identifier\n     * according the to language's syntax rule.\n     */\n    PrepareSupportDefaultBehavior.Identifier = 1;\n})(PrepareSupportDefaultBehavior || (exports.PrepareSupportDefaultBehavior = PrepareSupportDefaultBehavior = {}));\n/**\n * A request to rename a symbol.\n */\nvar RenameRequest;\n(function (RenameRequest) {\n    RenameRequest.method = 'textDocument/rename';\n    RenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\n})(RenameRequest || (exports.RenameRequest = RenameRequest = {}));\n/**\n * A request to test and perform the setup necessary for a rename.\n *\n * @since 3.16 - support for default behavior\n */\nvar PrepareRenameRequest;\n(function (PrepareRenameRequest) {\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\n    PrepareRenameRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\n})(PrepareRenameRequest || (exports.PrepareRenameRequest = PrepareRenameRequest = {}));\n/**\n * A request send from the client to the server to execute a command. The request might return\n * a workspace edit which the client will apply to the workspace.\n */\nvar ExecuteCommandRequest;\n(function (ExecuteCommandRequest) {\n    ExecuteCommandRequest.method = 'workspace/executeCommand';\n    ExecuteCommandRequest.messageDirection = messages_1.MessageDirection.clientToServer;\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType(ExecuteCommandRequest.method);\n})(ExecuteCommandRequest || (exports.ExecuteCommandRequest = ExecuteCommandRequest = {}));\n/**\n * A request sent from the server to the client to modified certain resources.\n */\nvar ApplyWorkspaceEditRequest;\n(function (ApplyWorkspaceEditRequest) {\n    ApplyWorkspaceEditRequest.method = 'workspace/applyEdit';\n    ApplyWorkspaceEditRequest.messageDirection = messages_1.MessageDirection.serverToClient;\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\n})(ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = ApplyWorkspaceEditRequest = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\nfunction createProtocolConnection(input, output, logger, options) {\n    if (vscode_jsonrpc_1.ConnectionStrategy.is(options)) {\n        options = { connectionStrategy: options };\n    }\n    return (0, vscode_jsonrpc_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LSPErrorCodes = exports.createProtocolConnection = void 0;\n__exportStar(require(\"vscode-jsonrpc\"), exports);\n__exportStar(require(\"vscode-languageserver-types\"), exports);\n__exportStar(require(\"./messages\"), exports);\n__exportStar(require(\"./protocol\"), exports);\nvar connection_1 = require(\"./connection\");\nObject.defineProperty(exports, \"createProtocolConnection\", { enumerable: true, get: function () { return connection_1.createProtocolConnection; } });\nvar LSPErrorCodes;\n(function (LSPErrorCodes) {\n    /**\n    * This is the start range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeStart = -32899;\n    /**\n     * A request failed but it was syntactically correct, e.g the\n     * method name was known and the parameters were valid. The error\n     * message should contain human readable information about why\n     * the request failed.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.RequestFailed = -32803;\n    /**\n     * The server cancelled the request. This error code should\n     * only be used for requests that explicitly support being\n     * server cancellable.\n     *\n     * @since 3.17.0\n     */\n    LSPErrorCodes.ServerCancelled = -32802;\n    /**\n     * The server detected that the content of a document got\n     * modified outside normal conditions. A server should\n     * NOT send this error code if it detects a content change\n     * in it unprocessed messages. The result even computed\n     * on an older state might still be useful for the client.\n     *\n     * If a client decides that a result is not of any use anymore\n     * the client should cancel the request.\n     */\n    LSPErrorCodes.ContentModified = -32801;\n    /**\n     * The client has canceled a request and a server as detected\n     * the cancel.\n     */\n    LSPErrorCodes.RequestCancelled = -32800;\n    /**\n    * This is the end range of LSP reserved error codes.\n    * It doesn't denote a real error code.\n    *\n    * @since 3.16.0\n    */\n    LSPErrorCodes.lspReservedErrorRangeEnd = -32800;\n})(LSPErrorCodes || (exports.LSPErrorCodes = LSPErrorCodes = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createProtocolConnection = void 0;\nconst node_1 = require(\"vscode-jsonrpc/node\");\n__exportStar(require(\"vscode-jsonrpc/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nfunction createProtocolConnection(input, output, logger, options) {\n    return (0, node_1.createMessageConnection)(input, output, logger, options);\n}\nexports.createProtocolConnection = createProtocolConnection;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.forEach = exports.mapAsync = exports.map = exports.clearTestMode = exports.setTestMode = exports.Semaphore = exports.Delayer = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nclass Delayer {\n    constructor(defaultDelay) {\n        this.defaultDelay = defaultDelay;\n        this.timeout = undefined;\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n    }\n    trigger(task, delay = this.defaultDelay) {\n        this.task = task;\n        if (delay >= 0) {\n            this.cancelTimeout();\n        }\n        if (!this.completionPromise) {\n            this.completionPromise = new Promise((resolve) => {\n                this.onSuccess = resolve;\n            }).then(() => {\n                this.completionPromise = undefined;\n                this.onSuccess = undefined;\n                var result = this.task();\n                this.task = undefined;\n                return result;\n            });\n        }\n        if (delay >= 0 || this.timeout === void 0) {\n            this.timeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.timeout = undefined;\n                this.onSuccess(undefined);\n            }, delay >= 0 ? delay : this.defaultDelay);\n        }\n        return this.completionPromise;\n    }\n    forceDelivery() {\n        if (!this.completionPromise) {\n            return undefined;\n        }\n        this.cancelTimeout();\n        let result = this.task();\n        this.completionPromise = undefined;\n        this.onSuccess = undefined;\n        this.task = undefined;\n        return result;\n    }\n    isTriggered() {\n        return this.timeout !== undefined;\n    }\n    cancel() {\n        this.cancelTimeout();\n        this.completionPromise = undefined;\n    }\n    cancelTimeout() {\n        if (this.timeout !== undefined) {\n            this.timeout.dispose();\n            this.timeout = undefined;\n        }\n    }\n}\nexports.Delayer = Delayer;\nclass Semaphore {\n    constructor(capacity = 1) {\n        if (capacity <= 0) {\n            throw new Error('Capacity must be greater than 0');\n        }\n        this._capacity = capacity;\n        this._active = 0;\n        this._waiting = [];\n    }\n    lock(thunk) {\n        return new Promise((resolve, reject) => {\n            this._waiting.push({ thunk, resolve, reject });\n            this.runNext();\n        });\n    }\n    get active() {\n        return this._active;\n    }\n    runNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => this.doRunNext());\n    }\n    doRunNext() {\n        if (this._waiting.length === 0 || this._active === this._capacity) {\n            return;\n        }\n        const next = this._waiting.shift();\n        this._active++;\n        if (this._active > this._capacity) {\n            throw new Error(`To many thunks active`);\n        }\n        try {\n            const result = next.thunk();\n            if (result instanceof Promise) {\n                result.then((value) => {\n                    this._active--;\n                    next.resolve(value);\n                    this.runNext();\n                }, (err) => {\n                    this._active--;\n                    next.reject(err);\n                    this.runNext();\n                });\n            }\n            else {\n                this._active--;\n                next.resolve(result);\n                this.runNext();\n            }\n        }\n        catch (err) {\n            this._active--;\n            next.reject(err);\n            this.runNext();\n        }\n    }\n}\nexports.Semaphore = Semaphore;\nlet $test = false;\nfunction setTestMode() {\n    $test = true;\n}\nexports.setTestMode = setTestMode;\nfunction clearTestMode() {\n    $test = false;\n}\nexports.clearTestMode = clearTestMode;\nconst defaultYieldTimeout = 15 /*ms*/;\nclass Timer {\n    constructor(yieldAfter = defaultYieldTimeout) {\n        this.yieldAfter = $test === true ? Math.max(yieldAfter, 2) : Math.max(yieldAfter, defaultYieldTimeout);\n        this.startTime = Date.now();\n        this.counter = 0;\n        this.total = 0;\n        // start with a counter interval of 1.\n        this.counterInterval = 1;\n    }\n    start() {\n        this.counter = 0;\n        this.total = 0;\n        this.counterInterval = 1;\n        this.startTime = Date.now();\n    }\n    shouldYield() {\n        if (++this.counter >= this.counterInterval) {\n            const timeTaken = Date.now() - this.startTime;\n            const timeLeft = Math.max(0, this.yieldAfter - timeTaken);\n            this.total += this.counter;\n            this.counter = 0;\n            if (timeTaken >= this.yieldAfter || timeLeft <= 1) {\n                // Yield also if time left <= 1 since we compute the counter\n                // for max < 2 ms.\n                // Start with interval 1 again. We could do some calculation\n                // with using 80% of the last counter however other things (GC)\n                // affect the timing heavily since we have small timings (1 - 15ms).\n                this.counterInterval = 1;\n                this.total = 0;\n                return true;\n            }\n            else {\n                // Only increase the counter until we have spent <= 2 ms. Increasing\n                // the counter further is very fragile since timing is influenced\n                // by other things and can increase the counter too much. This will result\n                // that we yield in average after [14 - 16]ms.\n                switch (timeTaken) {\n                    case 0:\n                    case 1:\n                        this.counterInterval = this.total * 2;\n                        break;\n                }\n            }\n        }\n        return false;\n    }\n}\nasync function map(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                resolve(convertBatch(index));\n            });\n        });\n    }\n    return result;\n}\nexports.map = map;\nasync function mapAsync(items, func, token, options) {\n    if (items.length === 0) {\n        return [];\n    }\n    const result = new Array(items.length);\n    const timer = new Timer(options?.yieldAfter);\n    async function convertBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            result[i] = await func(items[i], token);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    let index = await convertBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                resolve(convertBatch(index));\n            });\n        });\n    }\n    return result;\n}\nexports.mapAsync = mapAsync;\nasync function forEach(items, func, token, options) {\n    if (items.length === 0) {\n        return;\n    }\n    const timer = new Timer(options?.yieldAfter);\n    function runBatch(start) {\n        timer.start();\n        for (let i = start; i < items.length; i++) {\n            func(items[i]);\n            if (timer.shouldYield()) {\n                options?.yieldCallback && options.yieldCallback();\n                return i + 1;\n            }\n        }\n        return -1;\n    }\n    // Convert the first batch sync on the same frame.\n    let index = runBatch(0);\n    while (index !== -1) {\n        if (token !== undefined && token.isCancellationRequested) {\n            break;\n        }\n        index = await new Promise((resolve) => {\n            (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => {\n                resolve(runBatch(index));\n            });\n        });\n    }\n}\nexports.forEach = forEach;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCompletionItem extends code.CompletionItem {\n    constructor(label) {\n        super(label);\n    }\n}\nexports.default = ProtocolCompletionItem;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCodeLens extends code.CodeLens {\n    constructor(range) {\n        super(range);\n    }\n}\nexports.default = ProtocolCodeLens;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolDocumentLink extends code.DocumentLink {\n    constructor(range, target) {\n        super(range, target);\n    }\n}\nexports.default = ProtocolDocumentLink;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vscode = require(\"vscode\");\nclass ProtocolCodeAction extends vscode.CodeAction {\n    constructor(title, data) {\n        super(title);\n        this.data = data;\n    }\n}\nexports.default = ProtocolCodeAction;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProtocolDiagnostic = exports.DiagnosticCode = void 0;\nconst vscode = require(\"vscode\");\nconst Is = require(\"./utils/is\");\nvar DiagnosticCode;\n(function (DiagnosticCode) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null && (Is.number(candidate.value) || Is.string(candidate.value)) && Is.string(candidate.target);\n    }\n    DiagnosticCode.is = is;\n})(DiagnosticCode || (exports.DiagnosticCode = DiagnosticCode = {}));\nclass ProtocolDiagnostic extends vscode.Diagnostic {\n    constructor(range, message, severity, data) {\n        super(range, message, severity);\n        this.data = data;\n        this.hasDiagnosticCode = false;\n    }\n}\nexports.ProtocolDiagnostic = ProtocolDiagnostic;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolCallHierarchyItem extends code.CallHierarchyItem {\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolCallHierarchyItem;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolTypeHierarchyItem extends code.TypeHierarchyItem {\n    constructor(kind, name, detail, uri, range, selectionRange, data) {\n        super(kind, name, detail, uri, range, selectionRange);\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = ProtocolTypeHierarchyItem;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass WorkspaceSymbol extends code.SymbolInformation {\n    constructor(name, kind, containerName, locationOrUri, data) {\n        const hasRange = !(locationOrUri instanceof code.Uri);\n        super(name, kind, containerName, hasRange ? locationOrUri : new code.Location(locationOrUri, new code.Range(0, 0, 0, 0)));\n        this.hasRange = hasRange;\n        if (data !== undefined) {\n            this.data = data;\n        }\n    }\n}\nexports.default = WorkspaceSymbol;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst code = require(\"vscode\");\nclass ProtocolInlayHint extends code.InlayHint {\n    constructor(position, label, kind) {\n        super(position, label, kind);\n    }\n}\nexports.default = ProtocolInlayHint;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = void 0;\nconst code = require(\"vscode\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst async = require(\"./utils/async\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nconst protocolCodeAction_1 = require(\"./protocolCodeAction\");\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = require(\"./protocolCallHierarchyItem\");\nconst protocolTypeHierarchyItem_1 = require(\"./protocolTypeHierarchyItem\");\nconst protocolWorkspaceSymbol_1 = require(\"./protocolWorkspaceSymbol\");\nconst protocolInlayHint_1 = require(\"./protocolInlayHint\");\nvar InsertReplaceRange;\n(function (InsertReplaceRange) {\n    function is(value) {\n        const candidate = value;\n        return candidate && !!candidate.inserting && !!candidate.replacing;\n    }\n    InsertReplaceRange.is = is;\n})(InsertReplaceRange || (InsertReplaceRange = {}));\nfunction createConverter(uriConverter) {\n    const nullConverter = (value) => value.toString();\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri)\n        };\n    }\n    function asTextDocumentItem(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            languageId: textDocument.languageId,\n            version: textDocument.version,\n            text: textDocument.getText()\n        };\n    }\n    function asVersionedTextDocumentIdentifier(textDocument) {\n        return {\n            uri: _uriConverter(textDocument.uri),\n            version: textDocument.version\n        };\n    }\n    function asOpenTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentItem(textDocument)\n        };\n    }\n    function isTextDocumentChangeEvent(value) {\n        const candidate = value;\n        return !!candidate.document && !!candidate.contentChanges;\n    }\n    function isTextDocument(value) {\n        const candidate = value;\n        return !!candidate.uri && !!candidate.version;\n    }\n    function asChangeTextDocumentParams(arg0, arg1, arg2) {\n        if (isTextDocument(arg0)) {\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(arg0.uri),\n                    version: arg0.version\n                },\n                contentChanges: [{ text: arg0.getText() }]\n            };\n            return result;\n        }\n        else if (isTextDocumentChangeEvent(arg0)) {\n            const uri = arg1;\n            const version = arg2;\n            const result = {\n                textDocument: {\n                    uri: _uriConverter(uri),\n                    version: version\n                },\n                contentChanges: arg0.contentChanges.map((change) => {\n                    const range = change.range;\n                    return {\n                        range: {\n                            start: { line: range.start.line, character: range.start.character },\n                            end: { line: range.end.line, character: range.end.character }\n                        },\n                        rangeLength: change.rangeLength,\n                        text: change.text\n                    };\n                })\n            };\n            return result;\n        }\n        else {\n            throw Error('Unsupported text document change parameter');\n        }\n    }\n    function asCloseTextDocumentParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asSaveTextDocumentParams(textDocument, includeContent = false) {\n        let result = {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n        if (includeContent) {\n            result.text = textDocument.getText();\n        }\n        return result;\n    }\n    function asTextDocumentSaveReason(reason) {\n        switch (reason) {\n            case code.TextDocumentSaveReason.Manual:\n                return proto.TextDocumentSaveReason.Manual;\n            case code.TextDocumentSaveReason.AfterDelay:\n                return proto.TextDocumentSaveReason.AfterDelay;\n            case code.TextDocumentSaveReason.FocusOut:\n                return proto.TextDocumentSaveReason.FocusOut;\n        }\n        return proto.TextDocumentSaveReason.Manual;\n    }\n    function asWillSaveTextDocumentParams(event) {\n        return {\n            textDocument: asTextDocumentIdentifier(event.document),\n            reason: asTextDocumentSaveReason(event.reason)\n        };\n    }\n    function asDidCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asDidRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asDidDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillCreateFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asWillRenameFilesParams(event) {\n        return {\n            files: event.files.map((file) => ({\n                oldUri: _uriConverter(file.oldUri),\n                newUri: _uriConverter(file.newUri),\n            })),\n        };\n    }\n    function asWillDeleteFilesParams(event) {\n        return {\n            files: event.files.map((fileUri) => ({\n                uri: _uriConverter(fileUri),\n            })),\n        };\n    }\n    function asTextDocumentPositionParams(textDocument, position) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position)\n        };\n    }\n    function asCompletionTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.CompletionTriggerKind.TriggerCharacter:\n                return proto.CompletionTriggerKind.TriggerCharacter;\n            case code.CompletionTriggerKind.TriggerForIncompleteCompletions:\n                return proto.CompletionTriggerKind.TriggerForIncompleteCompletions;\n            default:\n                return proto.CompletionTriggerKind.Invoked;\n        }\n    }\n    function asCompletionParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                triggerKind: asCompletionTriggerKind(context.triggerKind),\n                triggerCharacter: context.triggerCharacter\n            }\n        };\n    }\n    function asSignatureHelpTriggerKind(triggerKind) {\n        switch (triggerKind) {\n            case code.SignatureHelpTriggerKind.Invoke:\n                return proto.SignatureHelpTriggerKind.Invoked;\n            case code.SignatureHelpTriggerKind.TriggerCharacter:\n                return proto.SignatureHelpTriggerKind.TriggerCharacter;\n            case code.SignatureHelpTriggerKind.ContentChange:\n                return proto.SignatureHelpTriggerKind.ContentChange;\n        }\n    }\n    function asParameterInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label\n        };\n    }\n    function asParameterInformations(values) {\n        return values.map(asParameterInformation);\n    }\n    function asSignatureInformation(value) {\n        // We leave the documentation out on purpose since it usually adds no\n        // value for the server.\n        return {\n            label: value.label,\n            parameters: asParameterInformations(value.parameters)\n        };\n    }\n    function asSignatureInformations(values) {\n        return values.map(asSignatureInformation);\n    }\n    function asSignatureHelp(value) {\n        if (value === undefined) {\n            return value;\n        }\n        return {\n            signatures: asSignatureInformations(value.signatures),\n            activeSignature: value.activeSignature,\n            activeParameter: value.activeParameter\n        };\n    }\n    function asSignatureHelpParams(textDocument, position, context) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: {\n                isRetrigger: context.isRetrigger,\n                triggerCharacter: context.triggerCharacter,\n                triggerKind: asSignatureHelpTriggerKind(context.triggerKind),\n                activeSignatureHelp: asSignatureHelp(context.activeSignatureHelp)\n            }\n        };\n    }\n    function asWorkerPosition(position) {\n        return { line: position.line, character: position.character };\n    }\n    function asPosition(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { line: value.line > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.line, character: value.character > proto.uinteger.MAX_VALUE ? proto.uinteger.MAX_VALUE : value.character };\n    }\n    function asPositions(values, token) {\n        return async.map(values, asPosition, token);\n    }\n    function asPositionsSync(values) {\n        return values.map(asPosition);\n    }\n    function asRange(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return { start: asPosition(value.start), end: asPosition(value.end) };\n    }\n    function asRanges(values) {\n        return values.map(asRange);\n    }\n    function asLocation(value) {\n        if (value === undefined || value === null) {\n            return value;\n        }\n        return proto.Location.create(asUri(value.uri), asRange(value.range));\n    }\n    function asDiagnosticSeverity(value) {\n        switch (value) {\n            case code.DiagnosticSeverity.Error:\n                return proto.DiagnosticSeverity.Error;\n            case code.DiagnosticSeverity.Warning:\n                return proto.DiagnosticSeverity.Warning;\n            case code.DiagnosticSeverity.Information:\n                return proto.DiagnosticSeverity.Information;\n            case code.DiagnosticSeverity.Hint:\n                return proto.DiagnosticSeverity.Hint;\n        }\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case code.DiagnosticTag.Unnecessary:\n                return proto.DiagnosticTag.Unnecessary;\n            case code.DiagnosticTag.Deprecated:\n                return proto.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asRelatedInformation(item) {\n        return {\n            message: item.message,\n            location: asLocation(item.location)\n        };\n    }\n    function asRelatedInformations(items) {\n        return items.map(asRelatedInformation);\n    }\n    function asDiagnosticCode(value) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        if (Is.number(value) || Is.string(value)) {\n            return value;\n        }\n        return { value: value.value, target: asUri(value.target) };\n    }\n    function asDiagnostic(item) {\n        const result = proto.Diagnostic.create(asRange(item.range), item.message);\n        const protocolDiagnostic = item instanceof protocolDiagnostic_1.ProtocolDiagnostic ? item : undefined;\n        if (protocolDiagnostic !== undefined && protocolDiagnostic.data !== undefined) {\n            result.data = protocolDiagnostic.data;\n        }\n        const code = asDiagnosticCode(item.code);\n        if (protocolDiagnostic_1.DiagnosticCode.is(code)) {\n            if (protocolDiagnostic !== undefined && protocolDiagnostic.hasDiagnosticCode) {\n                result.code = code;\n            }\n            else {\n                result.code = code.value;\n                result.codeDescription = { href: code.target };\n            }\n        }\n        else {\n            result.code = code;\n        }\n        if (Is.number(item.severity)) {\n            result.severity = asDiagnosticSeverity(item.severity);\n        }\n        if (Array.isArray(item.tags)) {\n            result.tags = asDiagnosticTags(item.tags);\n        }\n        if (item.relatedInformation) {\n            result.relatedInformation = asRelatedInformations(item.relatedInformation);\n        }\n        if (item.source) {\n            result.source = item.source;\n        }\n        return result;\n    }\n    function asDiagnostics(items, token) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return async.map(items, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(items) {\n        if (items === undefined || items === null) {\n            return items;\n        }\n        return items.map(asDiagnostic);\n    }\n    function asDocumentation(format, documentation) {\n        switch (format) {\n            case '$string':\n                return documentation;\n            case proto.MarkupKind.PlainText:\n                return { kind: format, value: documentation };\n            case proto.MarkupKind.Markdown:\n                return { kind: format, value: documentation.value };\n            default:\n                return `Unsupported Markup content received. Kind is: ${format}`;\n        }\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case code.CompletionItemTag.Deprecated:\n                return proto.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined) {\n            return tags;\n        }\n        const result = [];\n        for (let tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItemKind(value, original) {\n        if (original !== undefined) {\n            return original;\n        }\n        return value + 1;\n    }\n    function asCompletionItem(item, labelDetailsSupport = false) {\n        let label;\n        let labelDetails;\n        if (Is.string(item.label)) {\n            label = item.label;\n        }\n        else {\n            label = item.label.label;\n            if (labelDetailsSupport && (item.label.detail !== undefined || item.label.description !== undefined)) {\n                labelDetails = { detail: item.label.detail, description: item.label.description };\n            }\n        }\n        let result = { label: label };\n        if (labelDetails !== undefined) {\n            result.labelDetails = labelDetails;\n        }\n        let protocolItem = item instanceof protocolCompletionItem_1.default ? item : undefined;\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        // We only send items back we created. So this can't be something else than\n        // a string right now.\n        if (item.documentation) {\n            if (!protocolItem || protocolItem.documentationFormat === '$string') {\n                result.documentation = item.documentation;\n            }\n            else {\n                result.documentation = asDocumentation(protocolItem.documentationFormat, item.documentation);\n            }\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        fillPrimaryInsertText(result, item);\n        if (Is.number(item.kind)) {\n            result.kind = asCompletionItemKind(item.kind, protocolItem && protocolItem.originalItemKind);\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEdits(item.additionalTextEdits);\n        }\n        if (item.commitCharacters) {\n            result.commitCharacters = item.commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const tags = asCompletionItemTags(item.tags);\n        if (protocolItem) {\n            if (protocolItem.data !== undefined) {\n                result.data = protocolItem.data;\n            }\n            if (protocolItem.deprecated === true || protocolItem.deprecated === false) {\n                if (protocolItem.deprecated === true && tags !== undefined && tags.length > 0) {\n                    const index = tags.indexOf(code.CompletionItemTag.Deprecated);\n                    if (index !== -1) {\n                        tags.splice(index, 1);\n                    }\n                }\n                result.deprecated = protocolItem.deprecated;\n            }\n            if (protocolItem.insertTextMode !== undefined) {\n                result.insertTextMode = protocolItem.insertTextMode;\n            }\n        }\n        if (tags !== undefined && tags.length > 0) {\n            result.tags = tags;\n        }\n        if (result.insertTextMode === undefined && item.keepWhitespace === true) {\n            result.insertTextMode = proto.InsertTextMode.adjustIndentation;\n        }\n        return result;\n    }\n    function fillPrimaryInsertText(target, source) {\n        let format = proto.InsertTextFormat.PlainText;\n        let text = undefined;\n        let range = undefined;\n        if (source.textEdit) {\n            text = source.textEdit.newText;\n            range = source.textEdit.range;\n        }\n        else if (source.insertText instanceof code.SnippetString) {\n            format = proto.InsertTextFormat.Snippet;\n            text = source.insertText.value;\n        }\n        else {\n            text = source.insertText;\n        }\n        if (source.range) {\n            range = source.range;\n        }\n        target.insertTextFormat = format;\n        if (source.fromEdit && text !== undefined && range !== undefined) {\n            target.textEdit = asCompletionTextEdit(text, range);\n        }\n        else {\n            target.insertText = text;\n        }\n    }\n    function asCompletionTextEdit(newText, range) {\n        if (InsertReplaceRange.is(range)) {\n            return proto.InsertReplaceEdit.create(newText, asRange(range.inserting), asRange(range.replacing));\n        }\n        else {\n            return { newText, range: asRange(range) };\n        }\n    }\n    function asTextEdit(edit) {\n        return { range: asRange(edit.range), newText: edit.newText };\n    }\n    function asTextEdits(edits) {\n        if (edits === undefined || edits === null) {\n            return edits;\n        }\n        return edits.map(asTextEdit);\n    }\n    function asSymbolKind(item) {\n        if (item <= code.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return (item + 1);\n        }\n        return proto.SymbolKind.Property;\n    }\n    function asSymbolTag(item) {\n        return item;\n    }\n    function asSymbolTags(items) {\n        return items.map(asSymbolTag);\n    }\n    function asReferenceParams(textDocument, position, options) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument),\n            position: asWorkerPosition(position),\n            context: { includeDeclaration: options.includeDeclaration }\n        };\n    }\n    async function asCodeAction(item, token) {\n        let result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = await asDiagnostics(item.diagnostics, token);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        return result;\n    }\n    function asCodeActionSync(item) {\n        let result = proto.CodeAction.create(item.title);\n        if (item instanceof protocolCodeAction_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            throw new Error(`VS Code code actions can only be converted to a protocol code action without an edit.`);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        return result;\n    }\n    async function asCodeActionContext(context, token) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(await asDiagnostics(context.diagnostics, token), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionContextSync(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        let only;\n        if (context.only && Is.string(context.only.value)) {\n            only = [context.only.value];\n        }\n        return proto.CodeActionContext.create(asDiagnosticsSync(context.diagnostics), only, asCodeActionTriggerKind(context.triggerKind));\n    }\n    function asCodeActionTriggerKind(kind) {\n        switch (kind) {\n            case code.CodeActionTriggerKind.Invoke:\n                return proto.CodeActionTriggerKind.Invoked;\n            case code.CodeActionTriggerKind.Automatic:\n                return proto.CodeActionTriggerKind.Automatic;\n            default:\n                return undefined;\n        }\n    }\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        return item.value;\n    }\n    function asInlineValueContext(context) {\n        if (context === undefined || context === null) {\n            return context;\n        }\n        return proto.InlineValueContext.create(context.frameId, asRange(context.stoppedLocation));\n    }\n    function asInlineCompletionParams(document, position, context) {\n        return { context: proto.InlineCompletionContext.create(context.triggerKind, context.selectedCompletionInfo),\n            textDocument: asTextDocumentIdentifier(document), position: asPosition(position) };\n    }\n    function asCommand(item) {\n        let result = proto.Command.create(item.title, item.command);\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    function asCodeLens(item) {\n        let result = proto.CodeLens.create(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item instanceof protocolCodeLens_1.default) {\n            if (item.data) {\n                result.data = item.data;\n            }\n        }\n        return result;\n    }\n    function asFormattingOptions(options, fileOptions) {\n        const result = { tabSize: options.tabSize, insertSpaces: options.insertSpaces };\n        if (fileOptions.trimTrailingWhitespace) {\n            result.trimTrailingWhitespace = true;\n        }\n        if (fileOptions.trimFinalNewlines) {\n            result.trimFinalNewlines = true;\n        }\n        if (fileOptions.insertFinalNewline) {\n            result.insertFinalNewline = true;\n        }\n        return result;\n    }\n    function asDocumentSymbolParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCodeLensParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asDocumentLink(item) {\n        let result = proto.DocumentLink.create(asRange(item.range));\n        if (item.target) {\n            result.target = asUri(item.target);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = item.tooltip;\n        }\n        let protocolItem = item instanceof protocolDocumentLink_1.default ? item : undefined;\n        if (protocolItem && protocolItem.data) {\n            result.data = protocolItem.data;\n        }\n        return result;\n    }\n    function asDocumentLinkParams(textDocument) {\n        return {\n            textDocument: asTextDocumentIdentifier(textDocument)\n        };\n    }\n    function asCallHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange)\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolCallHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asTypeHierarchyItem(value) {\n        const result = {\n            name: value.name,\n            kind: asSymbolKind(value.kind),\n            uri: asUri(value.uri),\n            range: asRange(value.range),\n            selectionRange: asRange(value.selectionRange),\n        };\n        if (value.detail !== undefined && value.detail.length > 0) {\n            result.detail = value.detail;\n        }\n        if (value.tags !== undefined) {\n            result.tags = asSymbolTags(value.tags);\n        }\n        if (value instanceof protocolTypeHierarchyItem_1.default && value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asWorkspaceSymbol(item) {\n        const result = item instanceof protocolWorkspaceSymbol_1.default\n            ? { name: item.name, kind: asSymbolKind(item.kind), location: item.hasRange ? asLocation(item.location) : { uri: _uriConverter(item.location.uri) }, data: item.data }\n            : { name: item.name, kind: asSymbolKind(item.kind), location: asLocation(item.location) };\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        if (item.containerName !== '') {\n            result.containerName = item.containerName;\n        }\n        return result;\n    }\n    function asInlayHint(item) {\n        const label = typeof item.label === 'string'\n            ? item.label\n            : item.label.map(asInlayHintLabelPart);\n        const result = proto.InlayHint.create(asPosition(item.position), label);\n        if (item.kind !== undefined) {\n            result.kind = item.kind;\n        }\n        if (item.textEdits !== undefined) {\n            result.textEdits = asTextEdits(item.textEdits);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        if (item.paddingLeft !== undefined) {\n            result.paddingLeft = item.paddingLeft;\n        }\n        if (item.paddingRight !== undefined) {\n            result.paddingRight = item.paddingRight;\n        }\n        if (item instanceof protocolInlayHint_1.default && item.data !== undefined) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(item) {\n        const result = proto.InlayHintLabelPart.create(item.value);\n        if (item.location !== undefined) {\n            result.location = asLocation(item.location);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.tooltip !== undefined) {\n            result.tooltip = asTooltip(item.tooltip);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        const result = {\n            kind: proto.MarkupKind.Markdown,\n            value: value.value\n        };\n        return result;\n    }\n    return {\n        asUri,\n        asTextDocumentIdentifier,\n        asTextDocumentItem,\n        asVersionedTextDocumentIdentifier,\n        asOpenTextDocumentParams,\n        asChangeTextDocumentParams,\n        asCloseTextDocumentParams,\n        asSaveTextDocumentParams,\n        asWillSaveTextDocumentParams,\n        asDidCreateFilesParams,\n        asDidRenameFilesParams,\n        asDidDeleteFilesParams,\n        asWillCreateFilesParams,\n        asWillRenameFilesParams,\n        asWillDeleteFilesParams,\n        asTextDocumentPositionParams,\n        asCompletionParams,\n        asSignatureHelpParams,\n        asWorkerPosition,\n        asRange,\n        asRanges,\n        asPosition,\n        asPositions,\n        asPositionsSync,\n        asLocation,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asDiagnostic,\n        asDiagnostics,\n        asDiagnosticsSync,\n        asCompletionItem,\n        asTextEdit,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asReferenceParams,\n        asCodeAction,\n        asCodeActionSync,\n        asCodeActionContext,\n        asCodeActionContextSync,\n        asInlineValueContext,\n        asCommand,\n        asCodeLens,\n        asFormattingOptions,\n        asDocumentSymbolParams,\n        asCodeLensParams,\n        asDocumentLink,\n        asDocumentLinkParams,\n        asCallHierarchyItem,\n        asTypeHierarchyItem,\n        asInlayHint,\n        asWorkspaceSymbol,\n        asInlineCompletionParams\n    };\n}\nexports.createConverter = createConverter;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createConverter = void 0;\nconst code = require(\"vscode\");\nconst ls = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst async = require(\"./utils/async\");\nconst protocolCompletionItem_1 = require(\"./protocolCompletionItem\");\nconst protocolCodeLens_1 = require(\"./protocolCodeLens\");\nconst protocolDocumentLink_1 = require(\"./protocolDocumentLink\");\nconst protocolCodeAction_1 = require(\"./protocolCodeAction\");\nconst protocolDiagnostic_1 = require(\"./protocolDiagnostic\");\nconst protocolCallHierarchyItem_1 = require(\"./protocolCallHierarchyItem\");\nconst protocolTypeHierarchyItem_1 = require(\"./protocolTypeHierarchyItem\");\nconst protocolWorkspaceSymbol_1 = require(\"./protocolWorkspaceSymbol\");\nconst protocolInlayHint_1 = require(\"./protocolInlayHint\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nvar CodeBlock;\n(function (CodeBlock) {\n    function is(value) {\n        let candidate = value;\n        return candidate && Is.string(candidate.language) && Is.string(candidate.value);\n    }\n    CodeBlock.is = is;\n})(CodeBlock || (CodeBlock = {}));\nfunction createConverter(uriConverter, trustMarkdown, supportHtml) {\n    const nullConverter = (value) => code.Uri.parse(value);\n    const _uriConverter = uriConverter || nullConverter;\n    function asUri(value) {\n        return _uriConverter(value);\n    }\n    function asDocumentSelector(selector) {\n        const result = [];\n        for (const filter of selector) {\n            if (typeof filter === 'string') {\n                result.push(filter);\n            }\n            else if (vscode_languageserver_protocol_1.NotebookCellTextDocumentFilter.is(filter)) {\n                // We first need to check for the notebook cell filter since a TextDocumentFilter would\n                // match both (e.g. the notebook is optional).\n                if (typeof filter.notebook === 'string') {\n                    result.push({ notebookType: filter.notebook, language: filter.language });\n                }\n                else {\n                    const notebookType = filter.notebook.notebookType ?? '*';\n                    result.push({ notebookType: notebookType, scheme: filter.notebook.scheme, pattern: filter.notebook.pattern, language: filter.language });\n                }\n            }\n            else if (vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                result.push({ language: filter.language, scheme: filter.scheme, pattern: filter.pattern });\n            }\n        }\n        return result;\n    }\n    async function asDiagnostics(diagnostics, token) {\n        return async.map(diagnostics, asDiagnostic, token);\n    }\n    function asDiagnosticsSync(diagnostics) {\n        const result = new Array(diagnostics.length);\n        for (let i = 0; i < diagnostics.length; i++) {\n            result[i] = asDiagnostic(diagnostics[i]);\n        }\n        return result;\n    }\n    function asDiagnostic(diagnostic) {\n        let result = new protocolDiagnostic_1.ProtocolDiagnostic(asRange(diagnostic.range), diagnostic.message, asDiagnosticSeverity(diagnostic.severity), diagnostic.data);\n        if (diagnostic.code !== undefined) {\n            if (typeof diagnostic.code === 'string' || typeof diagnostic.code === 'number') {\n                if (ls.CodeDescription.is(diagnostic.codeDescription)) {\n                    result.code = {\n                        value: diagnostic.code,\n                        target: asUri(diagnostic.codeDescription.href)\n                    };\n                }\n                else {\n                    result.code = diagnostic.code;\n                }\n            }\n            else if (protocolDiagnostic_1.DiagnosticCode.is(diagnostic.code)) {\n                // This is for backwards compatibility of a proposed API.\n                // We should remove this at some point.\n                result.hasDiagnosticCode = true;\n                const diagnosticCode = diagnostic.code;\n                result.code = {\n                    value: diagnosticCode.value,\n                    target: asUri(diagnosticCode.target)\n                };\n            }\n        }\n        if (diagnostic.source) {\n            result.source = diagnostic.source;\n        }\n        if (diagnostic.relatedInformation) {\n            result.relatedInformation = asRelatedInformation(diagnostic.relatedInformation);\n        }\n        if (Array.isArray(diagnostic.tags)) {\n            result.tags = asDiagnosticTags(diagnostic.tags);\n        }\n        return result;\n    }\n    function asRelatedInformation(relatedInformation) {\n        const result = new Array(relatedInformation.length);\n        for (let i = 0; i < relatedInformation.length; i++) {\n            const info = relatedInformation[i];\n            result[i] = new code.DiagnosticRelatedInformation(asLocation(info.location), info.message);\n        }\n        return result;\n    }\n    function asDiagnosticTags(tags) {\n        if (!tags) {\n            return undefined;\n        }\n        let result = [];\n        for (let tag of tags) {\n            let converted = asDiagnosticTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length > 0 ? result : undefined;\n    }\n    function asDiagnosticTag(tag) {\n        switch (tag) {\n            case ls.DiagnosticTag.Unnecessary:\n                return code.DiagnosticTag.Unnecessary;\n            case ls.DiagnosticTag.Deprecated:\n                return code.DiagnosticTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asPosition(value) {\n        return value ? new code.Position(value.line, value.character) : undefined;\n    }\n    function asRange(value) {\n        return value ? new code.Range(value.start.line, value.start.character, value.end.line, value.end.character) : undefined;\n    }\n    async function asRanges(items, token) {\n        return async.map(items, (range) => {\n            return new code.Range(range.start.line, range.start.character, range.end.line, range.end.character);\n        }, token);\n    }\n    function asDiagnosticSeverity(value) {\n        if (value === undefined || value === null) {\n            return code.DiagnosticSeverity.Error;\n        }\n        switch (value) {\n            case ls.DiagnosticSeverity.Error:\n                return code.DiagnosticSeverity.Error;\n            case ls.DiagnosticSeverity.Warning:\n                return code.DiagnosticSeverity.Warning;\n            case ls.DiagnosticSeverity.Information:\n                return code.DiagnosticSeverity.Information;\n            case ls.DiagnosticSeverity.Hint:\n                return code.DiagnosticSeverity.Hint;\n        }\n        return code.DiagnosticSeverity.Error;\n    }\n    function asHoverContent(value) {\n        if (Is.string(value)) {\n            return asMarkdownString(value);\n        }\n        else if (CodeBlock.is(value)) {\n            let result = asMarkdownString();\n            return result.appendCodeblock(value.value, value.language);\n        }\n        else if (Array.isArray(value)) {\n            let result = [];\n            for (let element of value) {\n                let item = asMarkdownString();\n                if (CodeBlock.is(element)) {\n                    item.appendCodeblock(element.value, element.language);\n                }\n                else {\n                    item.appendMarkdown(element);\n                }\n                result.push(item);\n            }\n            return result;\n        }\n        else {\n            return asMarkdownString(value);\n        }\n    }\n    function asDocumentation(value) {\n        if (Is.string(value)) {\n            return value;\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    return asMarkdownString(value.value);\n                case ls.MarkupKind.PlainText:\n                    return value.value;\n                default:\n                    return `Unsupported Markup content received. Kind is: ${value.kind}`;\n            }\n        }\n    }\n    function asMarkdownString(value) {\n        let result;\n        if (value === undefined || typeof value === 'string') {\n            result = new code.MarkdownString(value);\n        }\n        else {\n            switch (value.kind) {\n                case ls.MarkupKind.Markdown:\n                    result = new code.MarkdownString(value.value);\n                    break;\n                case ls.MarkupKind.PlainText:\n                    result = new code.MarkdownString();\n                    result.appendText(value.value);\n                    break;\n                default:\n                    result = new code.MarkdownString();\n                    result.appendText(`Unsupported Markup content received. Kind is: ${value.kind}`);\n                    break;\n            }\n        }\n        result.isTrusted = trustMarkdown;\n        result.supportHtml = supportHtml;\n        return result;\n    }\n    function asHover(hover) {\n        if (!hover) {\n            return undefined;\n        }\n        return new code.Hover(asHoverContent(hover.contents), asRange(hover.range));\n    }\n    async function asCompletionResult(value, allCommitCharacters, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asCompletionItem(item, allCommitCharacters), token);\n        }\n        const list = value;\n        const { defaultRange, commitCharacters } = getCompletionItemDefaults(list, allCommitCharacters);\n        const converted = await async.map(list.items, (item) => {\n            return asCompletionItem(item, commitCharacters, defaultRange, list.itemDefaults?.insertTextMode, list.itemDefaults?.insertTextFormat, list.itemDefaults?.data);\n        }, token);\n        return new code.CompletionList(converted, list.isIncomplete);\n    }\n    function getCompletionItemDefaults(list, allCommitCharacters) {\n        const rangeDefaults = list.itemDefaults?.editRange;\n        const commitCharacters = list.itemDefaults?.commitCharacters ?? allCommitCharacters;\n        return ls.Range.is(rangeDefaults)\n            ? { defaultRange: asRange(rangeDefaults), commitCharacters }\n            : rangeDefaults !== undefined\n                ? { defaultRange: { inserting: asRange(rangeDefaults.insert), replacing: asRange(rangeDefaults.replace) }, commitCharacters }\n                : { defaultRange: undefined, commitCharacters };\n    }\n    function asCompletionItemKind(value) {\n        // Protocol item kind is 1 based, codes item kind is zero based.\n        if (ls.CompletionItemKind.Text <= value && value <= ls.CompletionItemKind.TypeParameter) {\n            return [value - 1, undefined];\n        }\n        return [code.CompletionItemKind.Text, value];\n    }\n    function asCompletionItemTag(tag) {\n        switch (tag) {\n            case ls.CompletionItemTag.Deprecated:\n                return code.CompletionItemTag.Deprecated;\n        }\n        return undefined;\n    }\n    function asCompletionItemTags(tags) {\n        if (tags === undefined || tags === null) {\n            return [];\n        }\n        const result = [];\n        for (const tag of tags) {\n            const converted = asCompletionItemTag(tag);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result;\n    }\n    function asCompletionItem(item, defaultCommitCharacters, defaultRange, defaultInsertTextMode, defaultInsertTextFormat, defaultData) {\n        const tags = asCompletionItemTags(item.tags);\n        const label = asCompletionItemLabel(item);\n        const result = new protocolCompletionItem_1.default(label);\n        if (item.detail) {\n            result.detail = item.detail;\n        }\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n            result.documentationFormat = Is.string(item.documentation) ? '$string' : item.documentation.kind;\n        }\n        if (item.filterText) {\n            result.filterText = item.filterText;\n        }\n        const insertText = asCompletionInsertText(item, defaultRange, defaultInsertTextFormat);\n        if (insertText) {\n            result.insertText = insertText.text;\n            result.range = insertText.range;\n            result.fromEdit = insertText.fromEdit;\n        }\n        if (Is.number(item.kind)) {\n            let [itemKind, original] = asCompletionItemKind(item.kind);\n            result.kind = itemKind;\n            if (original) {\n                result.originalItemKind = original;\n            }\n        }\n        if (item.sortText) {\n            result.sortText = item.sortText;\n        }\n        if (item.additionalTextEdits) {\n            result.additionalTextEdits = asTextEditsSync(item.additionalTextEdits);\n        }\n        const commitCharacters = item.commitCharacters !== undefined\n            ? Is.stringArray(item.commitCharacters) ? item.commitCharacters : undefined\n            : defaultCommitCharacters;\n        if (commitCharacters) {\n            result.commitCharacters = commitCharacters.slice();\n        }\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.deprecated === true || item.deprecated === false) {\n            result.deprecated = item.deprecated;\n            if (item.deprecated === true) {\n                tags.push(code.CompletionItemTag.Deprecated);\n            }\n        }\n        if (item.preselect === true || item.preselect === false) {\n            result.preselect = item.preselect;\n        }\n        const data = item.data ?? defaultData;\n        if (data !== undefined) {\n            result.data = data;\n        }\n        if (tags.length > 0) {\n            result.tags = tags;\n        }\n        const insertTextMode = item.insertTextMode ?? defaultInsertTextMode;\n        if (insertTextMode !== undefined) {\n            result.insertTextMode = insertTextMode;\n            if (insertTextMode === ls.InsertTextMode.asIs) {\n                result.keepWhitespace = true;\n            }\n        }\n        return result;\n    }\n    function asCompletionItemLabel(item) {\n        if (ls.CompletionItemLabelDetails.is(item.labelDetails)) {\n            return {\n                label: item.label,\n                detail: item.labelDetails.detail,\n                description: item.labelDetails.description\n            };\n        }\n        else {\n            return item.label;\n        }\n    }\n    function asCompletionInsertText(item, defaultRange, defaultInsertTextFormat) {\n        const insertTextFormat = item.insertTextFormat ?? defaultInsertTextFormat;\n        if (item.textEdit !== undefined || defaultRange !== undefined) {\n            const [range, newText] = item.textEdit !== undefined\n                ? getCompletionRangeAndText(item.textEdit)\n                : [defaultRange, item.textEditText ?? item.label];\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(newText), range: range, fromEdit: true };\n            }\n            else {\n                return { text: newText, range: range, fromEdit: true };\n            }\n        }\n        else if (item.insertText) {\n            if (insertTextFormat === ls.InsertTextFormat.Snippet) {\n                return { text: new code.SnippetString(item.insertText), fromEdit: false };\n            }\n            else {\n                return { text: item.insertText, fromEdit: false };\n            }\n        }\n        else {\n            return undefined;\n        }\n    }\n    function getCompletionRangeAndText(value) {\n        if (ls.InsertReplaceEdit.is(value)) {\n            return [{ inserting: asRange(value.insert), replacing: asRange(value.replace) }, value.newText];\n        }\n        else {\n            return [asRange(value.range), value.newText];\n        }\n    }\n    function asTextEdit(edit) {\n        if (!edit) {\n            return undefined;\n        }\n        return new code.TextEdit(asRange(edit.range), edit.newText);\n    }\n    async function asTextEdits(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asTextEdit, token);\n    }\n    function asTextEditsSync(items) {\n        if (!items) {\n            return undefined;\n        }\n        const result = new Array(items.length);\n        for (let i = 0; i < items.length; i++) {\n            result[i] = asTextEdit(items[i]);\n        }\n        return result;\n    }\n    async function asSignatureHelp(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new code.SignatureHelp();\n        if (Is.number(item.activeSignature)) {\n            result.activeSignature = item.activeSignature;\n        }\n        else {\n            // activeSignature was optional in the past\n            result.activeSignature = 0;\n        }\n        if (Is.number(item.activeParameter)) {\n            result.activeParameter = item.activeParameter;\n        }\n        else {\n            // activeParameter was optional in the past\n            result.activeParameter = 0;\n        }\n        if (item.signatures) {\n            result.signatures = await asSignatureInformations(item.signatures, token);\n        }\n        return result;\n    }\n    async function asSignatureInformations(items, token) {\n        return async.mapAsync(items, asSignatureInformation, token);\n    }\n    async function asSignatureInformation(item, token) {\n        let result = new code.SignatureInformation(item.label);\n        if (item.documentation !== undefined) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        if (item.parameters !== undefined) {\n            result.parameters = await asParameterInformations(item.parameters, token);\n        }\n        if (item.activeParameter !== undefined) {\n            result.activeParameter = item.activeParameter;\n        }\n        {\n            return result;\n        }\n    }\n    function asParameterInformations(items, token) {\n        return async.map(items, asParameterInformation, token);\n    }\n    function asParameterInformation(item) {\n        let result = new code.ParameterInformation(item.label);\n        if (item.documentation) {\n            result.documentation = asDocumentation(item.documentation);\n        }\n        return result;\n    }\n    function asLocation(item) {\n        return item ? new code.Location(_uriConverter(item.uri), asRange(item.range)) : undefined;\n    }\n    async function asDeclarationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    async function asDefinitionResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        return asLocationResult(item, token);\n    }\n    function asLocationLink(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = {\n            targetUri: _uriConverter(item.targetUri),\n            targetRange: asRange(item.targetRange),\n            originSelectionRange: asRange(item.originSelectionRange),\n            targetSelectionRange: asRange(item.targetSelectionRange)\n        };\n        if (!result.targetSelectionRange) {\n            throw new Error(`targetSelectionRange must not be undefined or null`);\n        }\n        return result;\n    }\n    async function asLocationResult(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        if (Is.array(item)) {\n            if (item.length === 0) {\n                return [];\n            }\n            else if (ls.LocationLink.is(item[0])) {\n                const links = item;\n                return async.map(links, asLocationLink, token);\n            }\n            else {\n                const locations = item;\n                return async.map(locations, asLocation, token);\n            }\n        }\n        else if (ls.LocationLink.is(item)) {\n            return [asLocationLink(item)];\n        }\n        else {\n            return asLocation(item);\n        }\n    }\n    async function asReferences(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asLocation, token);\n    }\n    async function asDocumentHighlights(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asDocumentHighlight, token);\n    }\n    function asDocumentHighlight(item) {\n        let result = new code.DocumentHighlight(asRange(item.range));\n        if (Is.number(item.kind)) {\n            result.kind = asDocumentHighlightKind(item.kind);\n        }\n        return result;\n    }\n    function asDocumentHighlightKind(item) {\n        switch (item) {\n            case ls.DocumentHighlightKind.Text:\n                return code.DocumentHighlightKind.Text;\n            case ls.DocumentHighlightKind.Read:\n                return code.DocumentHighlightKind.Read;\n            case ls.DocumentHighlightKind.Write:\n                return code.DocumentHighlightKind.Write;\n        }\n        return code.DocumentHighlightKind.Text;\n    }\n    async function asSymbolInformations(values, token) {\n        if (!values) {\n            return undefined;\n        }\n        return async.map(values, asSymbolInformation, token);\n    }\n    function asSymbolKind(item) {\n        if (item <= ls.SymbolKind.TypeParameter) {\n            // Symbol kind is one based in the protocol and zero based in code.\n            return item - 1;\n        }\n        return code.SymbolKind.Property;\n    }\n    function asSymbolTag(value) {\n        switch (value) {\n            case ls.SymbolTag.Deprecated:\n                return code.SymbolTag.Deprecated;\n            default:\n                return undefined;\n        }\n    }\n    function asSymbolTags(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        const result = [];\n        for (const item of items) {\n            const converted = asSymbolTag(item);\n            if (converted !== undefined) {\n                result.push(converted);\n            }\n        }\n        return result.length === 0 ? undefined : result;\n    }\n    function asSymbolInformation(item) {\n        const data = item.data;\n        const location = item.location;\n        const result = location.range === undefined || data !== undefined\n            ? new protocolWorkspaceSymbol_1.default(item.name, asSymbolKind(item.kind), item.containerName ?? '', location.range === undefined ? _uriConverter(location.uri) : new code.Location(_uriConverter(item.location.uri), asRange(location.range)), data)\n            : new code.SymbolInformation(item.name, asSymbolKind(item.kind), item.containerName ?? '', new code.Location(_uriConverter(item.location.uri), asRange(location.range)));\n        fillTags(result, item);\n        return result;\n    }\n    async function asDocumentSymbols(values, token) {\n        if (values === undefined || values === null) {\n            return undefined;\n        }\n        return async.map(values, asDocumentSymbol, token);\n    }\n    function asDocumentSymbol(value) {\n        let result = new code.DocumentSymbol(value.name, value.detail || '', asSymbolKind(value.kind), asRange(value.range), asRange(value.selectionRange));\n        fillTags(result, value);\n        if (value.children !== undefined && value.children.length > 0) {\n            let children = [];\n            for (let child of value.children) {\n                children.push(asDocumentSymbol(child));\n            }\n            result.children = children;\n        }\n        return result;\n    }\n    function fillTags(result, value) {\n        result.tags = asSymbolTags(value.tags);\n        if (value.deprecated) {\n            if (!result.tags) {\n                result.tags = [code.SymbolTag.Deprecated];\n            }\n            else {\n                if (!result.tags.includes(code.SymbolTag.Deprecated)) {\n                    result.tags = result.tags.concat(code.SymbolTag.Deprecated);\n                }\n            }\n        }\n    }\n    function asCommand(item) {\n        let result = { title: item.title, command: item.command };\n        if (item.arguments) {\n            result.arguments = item.arguments;\n        }\n        return result;\n    }\n    async function asCommands(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCommand, token);\n    }\n    const kindMapping = new Map();\n    kindMapping.set(ls.CodeActionKind.Empty, code.CodeActionKind.Empty);\n    kindMapping.set(ls.CodeActionKind.QuickFix, code.CodeActionKind.QuickFix);\n    kindMapping.set(ls.CodeActionKind.Refactor, code.CodeActionKind.Refactor);\n    kindMapping.set(ls.CodeActionKind.RefactorExtract, code.CodeActionKind.RefactorExtract);\n    kindMapping.set(ls.CodeActionKind.RefactorInline, code.CodeActionKind.RefactorInline);\n    kindMapping.set(ls.CodeActionKind.RefactorRewrite, code.CodeActionKind.RefactorRewrite);\n    kindMapping.set(ls.CodeActionKind.Source, code.CodeActionKind.Source);\n    kindMapping.set(ls.CodeActionKind.SourceOrganizeImports, code.CodeActionKind.SourceOrganizeImports);\n    function asCodeActionKind(item) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = kindMapping.get(item);\n        if (result) {\n            return result;\n        }\n        let parts = item.split('.');\n        result = code.CodeActionKind.Empty;\n        for (let part of parts) {\n            result = result.append(part);\n        }\n        return result;\n    }\n    function asCodeActionKinds(items) {\n        if (items === undefined || items === null) {\n            return undefined;\n        }\n        return items.map(kind => asCodeActionKind(kind));\n    }\n    async function asCodeAction(item, token) {\n        if (item === undefined || item === null) {\n            return undefined;\n        }\n        let result = new protocolCodeAction_1.default(item.title, item.data);\n        if (item.kind !== undefined) {\n            result.kind = asCodeActionKind(item.kind);\n        }\n        if (item.diagnostics !== undefined) {\n            result.diagnostics = asDiagnosticsSync(item.diagnostics);\n        }\n        if (item.edit !== undefined) {\n            result.edit = await asWorkspaceEdit(item.edit, token);\n        }\n        if (item.command !== undefined) {\n            result.command = asCommand(item.command);\n        }\n        if (item.isPreferred !== undefined) {\n            result.isPreferred = item.isPreferred;\n        }\n        if (item.disabled !== undefined) {\n            result.disabled = { reason: item.disabled.reason };\n        }\n        return result;\n    }\n    function asCodeActionResult(items, token) {\n        return async.mapAsync(items, async (item) => {\n            if (ls.Command.is(item)) {\n                return asCommand(item);\n            }\n            else {\n                return asCodeAction(item, token);\n            }\n        }, token);\n    }\n    function asCodeLens(item) {\n        if (!item) {\n            return undefined;\n        }\n        let result = new protocolCodeLens_1.default(asRange(item.range));\n        if (item.command) {\n            result.command = asCommand(item.command);\n        }\n        if (item.data !== undefined && item.data !== null) {\n            result.data = item.data;\n        }\n        return result;\n    }\n    async function asCodeLenses(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asCodeLens, token);\n    }\n    async function asWorkspaceEdit(item, token) {\n        if (!item) {\n            return undefined;\n        }\n        const sharedMetadata = new Map();\n        if (item.changeAnnotations !== undefined) {\n            const changeAnnotations = item.changeAnnotations;\n            await async.forEach(Object.keys(changeAnnotations), (key) => {\n                const metaData = asWorkspaceEditEntryMetadata(changeAnnotations[key]);\n                sharedMetadata.set(key, metaData);\n            }, token);\n        }\n        const asMetadata = (annotation) => {\n            if (annotation === undefined) {\n                return undefined;\n            }\n            else {\n                return sharedMetadata.get(annotation);\n            }\n        };\n        const result = new code.WorkspaceEdit();\n        if (item.documentChanges) {\n            const documentChanges = item.documentChanges;\n            await async.forEach(documentChanges, (change) => {\n                if (ls.CreateFile.is(change)) {\n                    result.createFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.RenameFile.is(change)) {\n                    result.renameFile(_uriConverter(change.oldUri), _uriConverter(change.newUri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.DeleteFile.is(change)) {\n                    result.deleteFile(_uriConverter(change.uri), change.options, asMetadata(change.annotationId));\n                }\n                else if (ls.TextDocumentEdit.is(change)) {\n                    const uri = _uriConverter(change.textDocument.uri);\n                    for (const edit of change.edits) {\n                        if (ls.AnnotatedTextEdit.is(edit)) {\n                            result.replace(uri, asRange(edit.range), edit.newText, asMetadata(edit.annotationId));\n                        }\n                        else {\n                            result.replace(uri, asRange(edit.range), edit.newText);\n                        }\n                    }\n                }\n                else {\n                    throw new Error(`Unknown workspace edit change received:\\n${JSON.stringify(change, undefined, 4)}`);\n                }\n            }, token);\n        }\n        else if (item.changes) {\n            const changes = item.changes;\n            await async.forEach(Object.keys(changes), (key) => {\n                result.set(_uriConverter(key), asTextEditsSync(changes[key]));\n            }, token);\n        }\n        return result;\n    }\n    function asWorkspaceEditEntryMetadata(annotation) {\n        if (annotation === undefined) {\n            return undefined;\n        }\n        return { label: annotation.label, needsConfirmation: !!annotation.needsConfirmation, description: annotation.description };\n    }\n    function asDocumentLink(item) {\n        let range = asRange(item.range);\n        let target = item.target ? asUri(item.target) : undefined;\n        // target must be optional in DocumentLink\n        let link = new protocolDocumentLink_1.default(range, target);\n        if (item.tooltip !== undefined) {\n            link.tooltip = item.tooltip;\n        }\n        if (item.data !== undefined && item.data !== null) {\n            link.data = item.data;\n        }\n        return link;\n    }\n    async function asDocumentLinks(items, token) {\n        if (!items) {\n            return undefined;\n        }\n        return async.map(items, asDocumentLink, token);\n    }\n    function asColor(color) {\n        return new code.Color(color.red, color.green, color.blue, color.alpha);\n    }\n    function asColorInformation(ci) {\n        return new code.ColorInformation(asRange(ci.range), asColor(ci.color));\n    }\n    async function asColorInformations(colorInformation, token) {\n        if (!colorInformation) {\n            return undefined;\n        }\n        return async.map(colorInformation, asColorInformation, token);\n    }\n    function asColorPresentation(cp) {\n        let presentation = new code.ColorPresentation(cp.label);\n        presentation.additionalTextEdits = asTextEditsSync(cp.additionalTextEdits);\n        if (cp.textEdit) {\n            presentation.textEdit = asTextEdit(cp.textEdit);\n        }\n        return presentation;\n    }\n    async function asColorPresentations(colorPresentations, token) {\n        if (!colorPresentations) {\n            return undefined;\n        }\n        return async.map(colorPresentations, asColorPresentation, token);\n    }\n    function asFoldingRangeKind(kind) {\n        if (kind) {\n            switch (kind) {\n                case ls.FoldingRangeKind.Comment:\n                    return code.FoldingRangeKind.Comment;\n                case ls.FoldingRangeKind.Imports:\n                    return code.FoldingRangeKind.Imports;\n                case ls.FoldingRangeKind.Region:\n                    return code.FoldingRangeKind.Region;\n            }\n        }\n        return undefined;\n    }\n    function asFoldingRange(r) {\n        return new code.FoldingRange(r.startLine, r.endLine, asFoldingRangeKind(r.kind));\n    }\n    async function asFoldingRanges(foldingRanges, token) {\n        if (!foldingRanges) {\n            return undefined;\n        }\n        return async.map(foldingRanges, asFoldingRange, token);\n    }\n    function asSelectionRange(selectionRange) {\n        return new code.SelectionRange(asRange(selectionRange.range), selectionRange.parent ? asSelectionRange(selectionRange.parent) : undefined);\n    }\n    async function asSelectionRanges(selectionRanges, token) {\n        if (!Array.isArray(selectionRanges)) {\n            return [];\n        }\n        return async.map(selectionRanges, asSelectionRange, token);\n    }\n    function asInlineValue(inlineValue) {\n        if (ls.InlineValueText.is(inlineValue)) {\n            return new code.InlineValueText(asRange(inlineValue.range), inlineValue.text);\n        }\n        else if (ls.InlineValueVariableLookup.is(inlineValue)) {\n            return new code.InlineValueVariableLookup(asRange(inlineValue.range), inlineValue.variableName, inlineValue.caseSensitiveLookup);\n        }\n        else {\n            return new code.InlineValueEvaluatableExpression(asRange(inlineValue.range), inlineValue.expression);\n        }\n    }\n    async function asInlineValues(inlineValues, token) {\n        if (!Array.isArray(inlineValues)) {\n            return [];\n        }\n        return async.map(inlineValues, asInlineValue, token);\n    }\n    async function asInlayHint(value, token) {\n        const label = typeof value.label === 'string'\n            ? value.label\n            : await async.map(value.label, asInlayHintLabelPart, token);\n        const result = new protocolInlayHint_1.default(asPosition(value.position), label);\n        if (value.kind !== undefined) {\n            result.kind = value.kind;\n        }\n        if (value.textEdits !== undefined) {\n            result.textEdits = await asTextEdits(value.textEdits, token);\n        }\n        if (value.tooltip !== undefined) {\n            result.tooltip = asTooltip(value.tooltip);\n        }\n        if (value.paddingLeft !== undefined) {\n            result.paddingLeft = value.paddingLeft;\n        }\n        if (value.paddingRight !== undefined) {\n            result.paddingRight = value.paddingRight;\n        }\n        if (value.data !== undefined) {\n            result.data = value.data;\n        }\n        return result;\n    }\n    function asInlayHintLabelPart(part) {\n        const result = new code.InlayHintLabelPart(part.value);\n        if (part.location !== undefined) {\n            result.location = asLocation(part.location);\n        }\n        if (part.tooltip !== undefined) {\n            result.tooltip = asTooltip(part.tooltip);\n        }\n        if (part.command !== undefined) {\n            result.command = asCommand(part.command);\n        }\n        return result;\n    }\n    function asTooltip(value) {\n        if (typeof value === 'string') {\n            return value;\n        }\n        return asMarkdownString(value);\n    }\n    async function asInlayHints(values, token) {\n        if (!Array.isArray(values)) {\n            return undefined;\n        }\n        return async.mapAsync(values, asInlayHint, token);\n    }\n    function asCallHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        const result = new protocolCallHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asCallHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asCallHierarchyItem, token);\n    }\n    async function asCallHierarchyIncomingCall(item, token) {\n        return new code.CallHierarchyIncomingCall(asCallHierarchyItem(item.from), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyIncomingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyIncomingCall, token);\n    }\n    async function asCallHierarchyOutgoingCall(item, token) {\n        return new code.CallHierarchyOutgoingCall(asCallHierarchyItem(item.to), await asRanges(item.fromRanges, token));\n    }\n    async function asCallHierarchyOutgoingCalls(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.mapAsync(items, asCallHierarchyOutgoingCall, token);\n    }\n    async function asSemanticTokens(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokens(new Uint32Array(value.data), value.resultId);\n    }\n    function asSemanticTokensEdit(value) {\n        return new code.SemanticTokensEdit(value.start, value.deleteCount, value.data !== undefined ? new Uint32Array(value.data) : undefined);\n    }\n    async function asSemanticTokensEdits(value, _token) {\n        if (value === undefined || value === null) {\n            return undefined;\n        }\n        return new code.SemanticTokensEdits(value.edits.map(asSemanticTokensEdit), value.resultId);\n    }\n    function asSemanticTokensLegend(value) {\n        return value;\n    }\n    async function asLinkedEditingRanges(value, token) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new code.LinkedEditingRanges(await asRanges(value.ranges, token), asRegularExpression(value.wordPattern));\n    }\n    function asRegularExpression(value) {\n        if (value === null || value === undefined) {\n            return undefined;\n        }\n        return new RegExp(value);\n    }\n    function asTypeHierarchyItem(item) {\n        if (item === null) {\n            return undefined;\n        }\n        let result = new protocolTypeHierarchyItem_1.default(asSymbolKind(item.kind), item.name, item.detail || '', asUri(item.uri), asRange(item.range), asRange(item.selectionRange), item.data);\n        if (item.tags !== undefined) {\n            result.tags = asSymbolTags(item.tags);\n        }\n        return result;\n    }\n    async function asTypeHierarchyItems(items, token) {\n        if (items === null) {\n            return undefined;\n        }\n        return async.map(items, asTypeHierarchyItem, token);\n    }\n    function asGlobPattern(pattern) {\n        if (Is.string(pattern)) {\n            return pattern;\n        }\n        if (ls.RelativePattern.is(pattern)) {\n            if (ls.URI.is(pattern.baseUri)) {\n                return new code.RelativePattern(asUri(pattern.baseUri), pattern.pattern);\n            }\n            else if (ls.WorkspaceFolder.is(pattern.baseUri)) {\n                const workspaceFolder = code.workspace.getWorkspaceFolder(asUri(pattern.baseUri.uri));\n                return workspaceFolder !== undefined ? new code.RelativePattern(workspaceFolder, pattern.pattern) : undefined;\n            }\n        }\n        return undefined;\n    }\n    async function asInlineCompletionResult(value, token) {\n        if (!value) {\n            return undefined;\n        }\n        if (Array.isArray(value)) {\n            return async.map(value, (item) => asInlineCompletionItem(item), token);\n        }\n        const list = value;\n        const converted = await async.map(list.items, (item) => {\n            return asInlineCompletionItem(item);\n        }, token);\n        return new code.InlineCompletionList(converted);\n    }\n    function asInlineCompletionItem(item) {\n        let insertText;\n        if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        }\n        else {\n            insertText = new code.SnippetString(item.insertText.value);\n        }\n        let command = undefined;\n        if (item.command) {\n            command = asCommand(item.command);\n        }\n        const inlineCompletionItem = new code.InlineCompletionItem(insertText, asRange(item.range), command);\n        if (item.filterText) {\n            inlineCompletionItem.filterText = item.filterText;\n        }\n        return inlineCompletionItem;\n    }\n    return {\n        asUri,\n        asDocumentSelector,\n        asDiagnostics,\n        asDiagnostic,\n        asRange,\n        asRanges,\n        asPosition,\n        asDiagnosticSeverity,\n        asDiagnosticTag,\n        asHover,\n        asCompletionResult,\n        asCompletionItem,\n        asTextEdit,\n        asTextEdits,\n        asSignatureHelp,\n        asSignatureInformations,\n        asSignatureInformation,\n        asParameterInformations,\n        asParameterInformation,\n        asDeclarationResult,\n        asDefinitionResult,\n        asLocation,\n        asReferences,\n        asDocumentHighlights,\n        asDocumentHighlight,\n        asDocumentHighlightKind,\n        asSymbolKind,\n        asSymbolTag,\n        asSymbolTags,\n        asSymbolInformations,\n        asSymbolInformation,\n        asDocumentSymbols,\n        asDocumentSymbol,\n        asCommand,\n        asCommands,\n        asCodeAction,\n        asCodeActionKind,\n        asCodeActionKinds,\n        asCodeActionResult,\n        asCodeLens,\n        asCodeLenses,\n        asWorkspaceEdit,\n        asDocumentLink,\n        asDocumentLinks,\n        asFoldingRangeKind,\n        asFoldingRange,\n        asFoldingRanges,\n        asColor,\n        asColorInformation,\n        asColorInformations,\n        asColorPresentation,\n        asColorPresentations,\n        asSelectionRange,\n        asSelectionRanges,\n        asInlineValue,\n        asInlineValues,\n        asInlayHint,\n        asInlayHints,\n        asSemanticTokensLegend,\n        asSemanticTokens,\n        asSemanticTokensEdit,\n        asSemanticTokensEdits,\n        asCallHierarchyItem,\n        asCallHierarchyItems,\n        asCallHierarchyIncomingCall,\n        asCallHierarchyIncomingCalls,\n        asCallHierarchyOutgoingCall,\n        asCallHierarchyOutgoingCalls,\n        asLinkedEditingRanges: asLinkedEditingRanges,\n        asTypeHierarchyItem,\n        asTypeHierarchyItems,\n        asGlobPattern,\n        asInlineCompletionResult,\n        asInlineCompletionItem\n    };\n}\nexports.createConverter = createConverter;\n", "\"use strict\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.generateUuid = exports.parse = exports.isUUID = exports.v4 = exports.empty = void 0;\nclass ValueUUID {\n    constructor(_value) {\n        this._value = _value;\n        // empty\n    }\n    asHex() {\n        return this._value;\n    }\n    equals(other) {\n        return this.asHex() === other.asHex();\n    }\n}\nclass V4UUID extends ValueUUID {\n    static _oneOf(array) {\n        return array[Math.floor(array.length * Math.random())];\n    }\n    static _randomHex() {\n        return V4UUID._oneOf(V4UUID._chars);\n    }\n    constructor() {\n        super([\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            '4',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._oneOf(V4UUID._timeHighBits),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            '-',\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n            V4UUID._randomHex(),\n        ].join(''));\n    }\n}\nV4UUID._chars = ['0', '1', '2', '3', '4', '5', '6', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\nV4UUID._timeHighBits = ['8', '9', 'a', 'b'];\n/**\n * An empty UUID that contains only zeros.\n */\nexports.empty = new ValueUUID('00000000-0000-0000-0000-000000000000');\nfunction v4() {\n    return new V4UUID();\n}\nexports.v4 = v4;\nconst _UUIDPattern = /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;\nfunction isUUID(value) {\n    return _UUIDPattern.test(value);\n}\nexports.isUUID = isUUID;\n/**\n * Parses a UUID that is of the format xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.\n * @param value A uuid string.\n */\nfunction parse(value) {\n    if (!isUUID(value)) {\n        throw new Error('invalid uuid');\n    }\n    return new ValueUUID(value);\n}\nexports.parse = parse;\nfunction generateUuid() {\n    return v4().asHex();\n}\nexports.generateUuid = generateUuid;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressPart = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nclass ProgressPart {\n    constructor(_client, _token, done) {\n        this._client = _client;\n        this._token = _token;\n        this._reported = 0;\n        this._infinite = false;\n        this._lspProgressDisposable = this._client.onProgress(vscode_languageserver_protocol_1.WorkDoneProgress.type, this._token, (value) => {\n            switch (value.kind) {\n                case 'begin':\n                    this.begin(value);\n                    break;\n                case 'report':\n                    this.report(value);\n                    break;\n                case 'end':\n                    this.done();\n                    done && done(this);\n                    break;\n            }\n        });\n    }\n    begin(params) {\n        this._infinite = params.percentage === undefined;\n        // the progress as already been marked as done / canceled. Ignore begin call\n        if (this._lspProgressDisposable === undefined) {\n            return;\n        }\n        // Since we don't use commands this will be a silent window progress with a hidden notification.\n        void vscode_1.window.withProgress({ location: vscode_1.ProgressLocation.Window, cancellable: params.cancellable, title: params.title }, async (progress, cancellationToken) => {\n            // the progress as already been marked as done / canceled. Ignore begin call\n            if (this._lspProgressDisposable === undefined) {\n                return;\n            }\n            this._progress = progress;\n            this._cancellationToken = cancellationToken;\n            this._tokenDisposable = this._cancellationToken.onCancellationRequested(() => {\n                this._client.sendNotification(vscode_languageserver_protocol_1.WorkDoneProgressCancelNotification.type, { token: this._token });\n            });\n            this.report(params);\n            return new Promise((resolve, reject) => {\n                this._resolve = resolve;\n                this._reject = reject;\n            });\n        });\n    }\n    report(params) {\n        if (this._infinite && Is.string(params.message)) {\n            this._progress !== undefined && this._progress.report({ message: params.message });\n        }\n        else if (Is.number(params.percentage)) {\n            const percentage = Math.max(0, Math.min(params.percentage, 100));\n            const delta = Math.max(0, percentage - this._reported);\n            this._reported += delta;\n            this._progress !== undefined && this._progress.report({ message: params.message, increment: delta });\n        }\n    }\n    cancel() {\n        this.cleanup();\n        if (this._reject !== undefined) {\n            this._reject();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    done() {\n        this.cleanup();\n        if (this._resolve !== undefined) {\n            this._resolve();\n            this._resolve = undefined;\n            this._reject = undefined;\n        }\n    }\n    cleanup() {\n        if (this._lspProgressDisposable !== undefined) {\n            this._lspProgressDisposable.dispose();\n            this._lspProgressDisposable = undefined;\n        }\n        if (this._tokenDisposable !== undefined) {\n            this._tokenDisposable.dispose();\n            this._tokenDisposable = undefined;\n        }\n        this._progress = undefined;\n        this._cancellationToken = undefined;\n    }\n}\nexports.ProgressPart = ProgressPart;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFeature = exports.TextDocumentLanguageFeature = exports.TextDocumentEventFeature = exports.DynamicDocumentFeature = exports.DynamicFeature = exports.StaticFeature = exports.ensure = exports.LSPCancellationError = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nclass LSPCancellationError extends vscode_1.CancellationError {\n    constructor(data) {\n        super();\n        this.data = data;\n    }\n}\nexports.LSPCancellationError = LSPCancellationError;\nfunction ensure(target, key) {\n    if (target[key] === undefined) {\n        target[key] = {};\n    }\n    return target[key];\n}\nexports.ensure = ensure;\nvar StaticFeature;\n(function (StaticFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams));\n    }\n    StaticFeature.is = is;\n})(StaticFeature || (exports.StaticFeature = StaticFeature = {}));\nvar DynamicFeature;\n(function (DynamicFeature) {\n    function is(value) {\n        const candidate = value;\n        return candidate !== undefined && candidate !== null &&\n            Is.func(candidate.fillClientCapabilities) && Is.func(candidate.initialize) && Is.func(candidate.getState) && Is.func(candidate.clear) &&\n            (candidate.fillInitializeParams === undefined || Is.func(candidate.fillInitializeParams)) && Is.func(candidate.register) &&\n            Is.func(candidate.unregister) && candidate.registrationType !== undefined;\n    }\n    DynamicFeature.is = is;\n})(DynamicFeature || (exports.DynamicFeature = DynamicFeature = {}));\n/**\n * An abstract dynamic feature implementation that operates on documents (e.g. text\n * documents or notebooks).\n */\nclass DynamicDocumentFeature {\n    constructor(client) {\n        this._client = client;\n    }\n    /**\n     * Returns the state the feature is in.\n     */\n    getState() {\n        const selectors = this.getDocumentSelectors();\n        let count = 0;\n        for (const selector of selectors) {\n            count++;\n            for (const document of vscode_1.workspace.textDocuments) {\n                if (vscode_1.languages.match(selector, document) > 0) {\n                    return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n                }\n            }\n        }\n        const registrations = count > 0;\n        return { kind: 'document', id: this.registrationType.method, registrations, matches: false };\n    }\n}\nexports.DynamicDocumentFeature = DynamicDocumentFeature;\n/**\n * An abstract base class to implement features that react to events\n * emitted from text documents.\n */\nclass TextDocumentEventFeature extends DynamicDocumentFeature {\n    static textDocumentFilter(selectors, textDocument) {\n        for (const selector of selectors) {\n            if (vscode_1.languages.match(selector, textDocument) > 0) {\n                return true;\n            }\n        }\n        return false;\n    }\n    constructor(client, event, type, middleware, createParams, textDocument, selectorFilter) {\n        super(client);\n        this._event = event;\n        this._type = type;\n        this._middleware = middleware;\n        this._createParams = createParams;\n        this._textDocument = textDocument;\n        this._selectorFilter = selectorFilter;\n        this._selectors = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n    }\n    getStateInfo() {\n        return [this._selectors.values(), false];\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = this._event((data) => {\n                this.callback(data).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed.`, error);\n                });\n            });\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    async callback(data) {\n        const doSend = async (data) => {\n            const params = this._createParams(data);\n            await this._client.sendNotification(this._type, params);\n            this.notificationSent(this.getTextDocument(data), this._type, params);\n        };\n        if (this.matches(data)) {\n            const middleware = this._middleware();\n            return middleware ? middleware(data, (data) => doSend(data)) : doSend(data);\n        }\n    }\n    matches(data) {\n        if (this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(data))) {\n            return false;\n        }\n        return !this._selectorFilter || this._selectorFilter(this._selectors.values(), data);\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        this._onNotificationSent.dispose();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getProvider(document) {\n        for (const selector of this._selectors.values()) {\n            if (vscode_1.languages.match(selector, document) > 0) {\n                return {\n                    send: (data) => {\n                        return this.callback(data);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n}\nexports.TextDocumentEventFeature = TextDocumentEventFeature;\n/**\n * A abstract feature implementation that registers language providers\n * for text documents using a given document selector.\n */\nclass TextDocumentLanguageFeature extends DynamicDocumentFeature {\n    constructor(client, registrationType) {\n        super(client);\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    *getDocumentSelectors() {\n        for (const registration of this._registrations.values()) {\n            const selector = registration.data.registerOptions.documentSelector;\n            if (selector === null) {\n                continue;\n            }\n            yield this._client.protocol2CodeConverter.asDocumentSelector(selector);\n        }\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        let registration = this.registerLanguageProvider(data.registerOptions, data.id);\n        this._registrations.set(data.id, { disposable: registration[0], data, provider: registration[1] });\n    }\n    unregister(id) {\n        let registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((value) => {\n            value.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getRegistration(documentSelector, capability) {\n        if (!capability) {\n            return [undefined, undefined];\n        }\n        else if (vscode_languageserver_protocol_1.TextDocumentRegistrationOptions.is(capability)) {\n            const id = vscode_languageserver_protocol_1.StaticRegistrationOptions.hasId(capability) ? capability.id : UUID.generateUuid();\n            const selector = capability.documentSelector ?? documentSelector;\n            if (selector) {\n                return [id, Object.assign({}, capability, { documentSelector: selector })];\n            }\n        }\n        else if (Is.boolean(capability) && capability === true || vscode_languageserver_protocol_1.WorkDoneProgressOptions.is(capability)) {\n            if (!documentSelector) {\n                return [undefined, undefined];\n            }\n            const options = (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n            return [UUID.generateUuid(), options];\n        }\n        return [undefined, undefined];\n    }\n    getRegistrationOptions(documentSelector, capability) {\n        if (!documentSelector || !capability) {\n            return undefined;\n        }\n        return (Is.boolean(capability) && capability === true ? { documentSelector } : Object.assign({}, capability, { documentSelector }));\n    }\n    getProvider(textDocument) {\n        for (const registration of this._registrations.values()) {\n            let selector = registration.data.registerOptions.documentSelector;\n            if (selector !== null && vscode_1.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(selector), textDocument) > 0) {\n                return registration.provider;\n            }\n        }\n        return undefined;\n    }\n    getAllProviders() {\n        const result = [];\n        for (const item of this._registrations.values()) {\n            result.push(item.provider);\n        }\n        return result;\n    }\n}\nexports.TextDocumentLanguageFeature = TextDocumentLanguageFeature;\nclass WorkspaceFeature {\n    constructor(client, registrationType) {\n        this._client = client;\n        this._registrationType = registrationType;\n        this._registrations = new Map();\n    }\n    getState() {\n        const registrations = this._registrations.size > 0;\n        return { kind: 'workspace', id: this._registrationType.method, registrations };\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    register(data) {\n        const registration = this.registerLanguageProvider(data.registerOptions);\n        this._registrations.set(data.id, { disposable: registration[0], provider: registration[1] });\n    }\n    unregister(id) {\n        let registration = this._registrations.get(id);\n        if (registration !== undefined) {\n            registration.disposable.dispose();\n        }\n    }\n    clear() {\n        this._registrations.forEach((registration) => {\n            registration.disposable.dispose();\n        });\n        this._registrations.clear();\n    }\n    getProviders() {\n        const result = [];\n        for (const registration of this._registrations.values()) {\n            result.push(registration.provider);\n        }\n        return result;\n    }\n}\nexports.WorkspaceFeature = WorkspaceFeature;\n", "const isWindows = typeof process === 'object' &&\n  process &&\n  process.platform === 'win32'\nmodule.exports = isWindows ? { sep: '\\\\' } : { sep: '/' }\n", "'use strict';\nmodule.exports = balanced;\nfunction balanced(a, b, str) {\n  if (a instanceof RegExp) a = maybeMatch(a, str);\n  if (b instanceof RegExp) b = maybeMatch(b, str);\n\n  var r = range(a, b, str);\n\n  return r && {\n    start: r[0],\n    end: r[1],\n    pre: str.slice(0, r[0]),\n    body: str.slice(r[0] + a.length, r[1]),\n    post: str.slice(r[1] + b.length)\n  };\n}\n\nfunction maybeMatch(reg, str) {\n  var m = str.match(reg);\n  return m ? m[0] : null;\n}\n\nbalanced.range = range;\nfunction range(a, b, str) {\n  var begs, beg, left, right, result;\n  var ai = str.indexOf(a);\n  var bi = str.indexOf(b, ai + 1);\n  var i = ai;\n\n  if (ai >= 0 && bi > 0) {\n    if(a===b) {\n      return [ai, bi];\n    }\n    begs = [];\n    left = str.length;\n\n    while (i >= 0 && !result) {\n      if (i == ai) {\n        begs.push(i);\n        ai = str.indexOf(a, i + 1);\n      } else if (begs.length == 1) {\n        result = [ begs.pop(), bi ];\n      } else {\n        beg = begs.pop();\n        if (beg < left) {\n          left = beg;\n          right = bi;\n        }\n\n        bi = str.indexOf(b, i + 1);\n      }\n\n      i = ai < bi && ai >= 0 ? ai : bi;\n    }\n\n    if (begs.length) {\n      result = [ left, right ];\n    }\n  }\n\n  return result;\n}\n", "var balanced = require('balanced-match');\n\nmodule.exports = expandTop;\n\nvar escSlash = '\\0SLASH'+Math.random()+'\\0';\nvar escOpen = '\\0OPEN'+Math.random()+'\\0';\nvar escClose = '\\0CLOSE'+Math.random()+'\\0';\nvar escComma = '\\0COMMA'+Math.random()+'\\0';\nvar escPeriod = '\\0PERIOD'+Math.random()+'\\0';\n\nfunction numeric(str) {\n  return parseInt(str, 10) == str\n    ? parseInt(str, 10)\n    : str.charCodeAt(0);\n}\n\nfunction escapeBraces(str) {\n  return str.split('\\\\\\\\').join(escSlash)\n            .split('\\\\{').join(escOpen)\n            .split('\\\\}').join(escClose)\n            .split('\\\\,').join(escComma)\n            .split('\\\\.').join(escPeriod);\n}\n\nfunction unescapeBraces(str) {\n  return str.split(escSlash).join('\\\\')\n            .split(escOpen).join('{')\n            .split(escClose).join('}')\n            .split(escComma).join(',')\n            .split(escPeriod).join('.');\n}\n\n\n// Basically just str.split(\",\"), but handling cases\n// where we have nested braced sections, which should be\n// treated as individual members, like {a,{b,c},d}\nfunction parseCommaParts(str) {\n  if (!str)\n    return [''];\n\n  var parts = [];\n  var m = balanced('{', '}', str);\n\n  if (!m)\n    return str.split(',');\n\n  var pre = m.pre;\n  var body = m.body;\n  var post = m.post;\n  var p = pre.split(',');\n\n  p[p.length-1] += '{' + body + '}';\n  var postParts = parseCommaParts(post);\n  if (post.length) {\n    p[p.length-1] += postParts.shift();\n    p.push.apply(p, postParts);\n  }\n\n  parts.push.apply(parts, p);\n\n  return parts;\n}\n\nfunction expandTop(str) {\n  if (!str)\n    return [];\n\n  // I don't know why Bash 4.3 does this, but it does.\n  // Anything starting with {} will have the first two bytes preserved\n  // but *only* at the top level, so {},a}b will not expand to anything,\n  // but a{},b}c will be expanded to [a}c,abc].\n  // One could argue that this is a bug in Bash, but since the goal of\n  // this module is to match Bash's rules, we escape a leading {}\n  if (str.substr(0, 2) === '{}') {\n    str = '\\\\{\\\\}' + str.substr(2);\n  }\n\n  return expand(escapeBraces(str), true).map(unescapeBraces);\n}\n\nfunction embrace(str) {\n  return '{' + str + '}';\n}\nfunction isPadded(el) {\n  return /^-?0\\d/.test(el);\n}\n\nfunction lte(i, y) {\n  return i <= y;\n}\nfunction gte(i, y) {\n  return i >= y;\n}\n\nfunction expand(str, isTop) {\n  var expansions = [];\n\n  var m = balanced('{', '}', str);\n  if (!m) return [str];\n\n  // no need to expand pre, since it is guaranteed to be free of brace-sets\n  var pre = m.pre;\n  var post = m.post.length\n    ? expand(m.post, false)\n    : [''];\n\n  if (/\\$$/.test(m.pre)) {    \n    for (var k = 0; k < post.length; k++) {\n      var expansion = pre+ '{' + m.body + '}' + post[k];\n      expansions.push(expansion);\n    }\n  } else {\n    var isNumericSequence = /^-?\\d+\\.\\.-?\\d+(?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isAlphaSequence = /^[a-zA-Z]\\.\\.[a-zA-Z](?:\\.\\.-?\\d+)?$/.test(m.body);\n    var isSequence = isNumericSequence || isAlphaSequence;\n    var isOptions = m.body.indexOf(',') >= 0;\n    if (!isSequence && !isOptions) {\n      // {a},b}\n      if (m.post.match(/,(?!,).*\\}/)) {\n        str = m.pre + '{' + m.body + escClose + m.post;\n        return expand(str);\n      }\n      return [str];\n    }\n\n    var n;\n    if (isSequence) {\n      n = m.body.split(/\\.\\./);\n    } else {\n      n = parseCommaParts(m.body);\n      if (n.length === 1) {\n        // x{{a,b}}y ==> x{a}y x{b}y\n        n = expand(n[0], false).map(embrace);\n        if (n.length === 1) {\n          return post.map(function(p) {\n            return m.pre + n[0] + p;\n          });\n        }\n      }\n    }\n\n    // at this point, n is the parts, and we know it's not a comma set\n    // with a single entry.\n    var N;\n\n    if (isSequence) {\n      var x = numeric(n[0]);\n      var y = numeric(n[1]);\n      var width = Math.max(n[0].length, n[1].length)\n      var incr = n.length == 3\n        ? Math.abs(numeric(n[2]))\n        : 1;\n      var test = lte;\n      var reverse = y < x;\n      if (reverse) {\n        incr *= -1;\n        test = gte;\n      }\n      var pad = n.some(isPadded);\n\n      N = [];\n\n      for (var i = x; test(i, y); i += incr) {\n        var c;\n        if (isAlphaSequence) {\n          c = String.fromCharCode(i);\n          if (c === '\\\\')\n            c = '';\n        } else {\n          c = String(i);\n          if (pad) {\n            var need = width - c.length;\n            if (need > 0) {\n              var z = new Array(need + 1).join('0');\n              if (i < 0)\n                c = '-' + z + c.slice(1);\n              else\n                c = z + c;\n            }\n          }\n        }\n        N.push(c);\n      }\n    } else {\n      N = [];\n\n      for (var j = 0; j < n.length; j++) {\n        N.push.apply(N, expand(n[j], false));\n      }\n    }\n\n    for (var j = 0; j < N.length; j++) {\n      for (var k = 0; k < post.length; k++) {\n        var expansion = pre + N[j] + post[k];\n        if (!isTop || isSequence || expansion)\n          expansions.push(expansion);\n      }\n    }\n  }\n\n  return expansions;\n}\n\n", "const minimatch = module.exports = (p, pattern, options = {}) => {\n  assertValidPattern(pattern)\n\n  // shortcut: comments match nothing.\n  if (!options.nocomment && pattern.charAt(0) === '#') {\n    return false\n  }\n\n  return new Minimatch(pattern, options).match(p)\n}\n\nmodule.exports = minimatch\n\nconst path = require('./lib/path.js')\nminimatch.sep = path.sep\n\nconst GLOBSTAR = Symbol('globstar **')\nminimatch.GLOBSTAR = GLOBSTAR\nconst expand = require('brace-expansion')\n\nconst plTypes = {\n  '!': { open: '(?:(?!(?:', close: '))[^/]*?)'},\n  '?': { open: '(?:', close: ')?' },\n  '+': { open: '(?:', close: ')+' },\n  '*': { open: '(?:', close: ')*' },\n  '@': { open: '(?:', close: ')' }\n}\n\n// any single thing other than /\n// don't need to escape / when using new RegExp()\nconst qmark = '[^/]'\n\n// * => any number of characters\nconst star = qmark + '*?'\n\n// ** when dots are allowed.  Anything goes, except .. and .\n// not (^ or / followed by one or two dots followed by $ or /),\n// followed by anything, any number of times.\nconst twoStarDot = '(?:(?!(?:\\\\\\/|^)(?:\\\\.{1,2})($|\\\\\\/)).)*?'\n\n// not a ^ or / followed by a dot,\n// followed by anything, any number of times.\nconst twoStarNoDot = '(?:(?!(?:\\\\\\/|^)\\\\.).)*?'\n\n// \"abc\" -> { a:true, b:true, c:true }\nconst charSet = s => s.split('').reduce((set, c) => {\n  set[c] = true\n  return set\n}, {})\n\n// characters that need to be escaped in RegExp.\nconst reSpecials = charSet('().*{}+?[]^$\\\\!')\n\n// characters that indicate we have to add the pattern start\nconst addPatternStartSet = charSet('[.(')\n\n// normalizes slashes.\nconst slashSplit = /\\/+/\n\nminimatch.filter = (pattern, options = {}) =>\n  (p, i, list) => minimatch(p, pattern, options)\n\nconst ext = (a, b = {}) => {\n  const t = {}\n  Object.keys(a).forEach(k => t[k] = a[k])\n  Object.keys(b).forEach(k => t[k] = b[k])\n  return t\n}\n\nminimatch.defaults = def => {\n  if (!def || typeof def !== 'object' || !Object.keys(def).length) {\n    return minimatch\n  }\n\n  const orig = minimatch\n\n  const m = (p, pattern, options) => orig(p, pattern, ext(def, options))\n  m.Minimatch = class Minimatch extends orig.Minimatch {\n    constructor (pattern, options) {\n      super(pattern, ext(def, options))\n    }\n  }\n  m.Minimatch.defaults = options => orig.defaults(ext(def, options)).Minimatch\n  m.filter = (pattern, options) => orig.filter(pattern, ext(def, options))\n  m.defaults = options => orig.defaults(ext(def, options))\n  m.makeRe = (pattern, options) => orig.makeRe(pattern, ext(def, options))\n  m.braceExpand = (pattern, options) => orig.braceExpand(pattern, ext(def, options))\n  m.match = (list, pattern, options) => orig.match(list, pattern, ext(def, options))\n\n  return m\n}\n\n\n\n\n\n// Brace expansion:\n// a{b,c}d -> abd acd\n// a{b,}c -> abc ac\n// a{0..3}d -> a0d a1d a2d a3d\n// a{b,c{d,e}f}g -> abg acdfg acefg\n// a{b,c}d{e,f}g -> abdeg acdeg abdeg abdfg\n//\n// Invalid sets are not expanded.\n// a{2..}b -> a{2..}b\n// a{b}c -> a{b}c\nminimatch.braceExpand = (pattern, options) => braceExpand(pattern, options)\n\nconst braceExpand = (pattern, options = {}) => {\n  assertValidPattern(pattern)\n\n  // Thanks to Yeting Li <https://github.com/yetingli> for\n  // improving this regexp to avoid a ReDOS vulnerability.\n  if (options.nobrace || !/\\{(?:(?!\\{).)*\\}/.test(pattern)) {\n    // shortcut. no need to expand.\n    return [pattern]\n  }\n\n  return expand(pattern)\n}\n\nconst MAX_PATTERN_LENGTH = 1024 * 64\nconst assertValidPattern = pattern => {\n  if (typeof pattern !== 'string') {\n    throw new TypeError('invalid pattern')\n  }\n\n  if (pattern.length > MAX_PATTERN_LENGTH) {\n    throw new TypeError('pattern is too long')\n  }\n}\n\n// parse a component of the expanded set.\n// At this point, no pattern may contain \"/\" in it\n// so we're going to return a 2d array, where each entry is the full\n// pattern, split on '/', and then turned into a regular expression.\n// A regexp is made at the end which joins each array with an\n// escaped /, and another full one which joins each regexp with |.\n//\n// Following the lead of Bash 4.1, note that \"**\" only has special meaning\n// when it is the *only* thing in a path portion.  Otherwise, any series\n// of * is equivalent to a single *.  Globstar behavior is enabled by\n// default, and can be disabled by setting options.noglobstar.\nconst SUBPARSE = Symbol('subparse')\n\nminimatch.makeRe = (pattern, options) =>\n  new Minimatch(pattern, options || {}).makeRe()\n\nminimatch.match = (list, pattern, options = {}) => {\n  const mm = new Minimatch(pattern, options)\n  list = list.filter(f => mm.match(f))\n  if (mm.options.nonull && !list.length) {\n    list.push(pattern)\n  }\n  return list\n}\n\n// replace stuff like \\* with *\nconst globUnescape = s => s.replace(/\\\\(.)/g, '$1')\nconst charUnescape = s => s.replace(/\\\\([^-\\]])/g, '$1')\nconst regExpEscape = s => s.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&')\nconst braExpEscape = s => s.replace(/[[\\]\\\\]/g, '\\\\$&')\n\nclass Minimatch {\n  constructor (pattern, options) {\n    assertValidPattern(pattern)\n\n    if (!options) options = {}\n\n    this.options = options\n    this.set = []\n    this.pattern = pattern\n    this.windowsPathsNoEscape = !!options.windowsPathsNoEscape ||\n      options.allowWindowsEscape === false\n    if (this.windowsPathsNoEscape) {\n      this.pattern = this.pattern.replace(/\\\\/g, '/')\n    }\n    this.regexp = null\n    this.negate = false\n    this.comment = false\n    this.empty = false\n    this.partial = !!options.partial\n\n    // make the set of regexps etc.\n    this.make()\n  }\n\n  debug () {}\n\n  make () {\n    const pattern = this.pattern\n    const options = this.options\n\n    // empty patterns and comments match nothing.\n    if (!options.nocomment && pattern.charAt(0) === '#') {\n      this.comment = true\n      return\n    }\n    if (!pattern) {\n      this.empty = true\n      return\n    }\n\n    // step 1: figure out negation, etc.\n    this.parseNegate()\n\n    // step 2: expand braces\n    let set = this.globSet = this.braceExpand()\n\n    if (options.debug) this.debug = (...args) => console.error(...args)\n\n    this.debug(this.pattern, set)\n\n    // step 3: now we have a set, so turn each one into a series of path-portion\n    // matching patterns.\n    // These will be regexps, except in the case of \"**\", which is\n    // set to the GLOBSTAR object for globstar behavior,\n    // and will not contain any / characters\n    set = this.globParts = set.map(s => s.split(slashSplit))\n\n    this.debug(this.pattern, set)\n\n    // glob --> regexps\n    set = set.map((s, si, set) => s.map(this.parse, this))\n\n    this.debug(this.pattern, set)\n\n    // filter out everything that didn't compile properly.\n    set = set.filter(s => s.indexOf(false) === -1)\n\n    this.debug(this.pattern, set)\n\n    this.set = set\n  }\n\n  parseNegate () {\n    if (this.options.nonegate) return\n\n    const pattern = this.pattern\n    let negate = false\n    let negateOffset = 0\n\n    for (let i = 0; i < pattern.length && pattern.charAt(i) === '!'; i++) {\n      negate = !negate\n      negateOffset++\n    }\n\n    if (negateOffset) this.pattern = pattern.slice(negateOffset)\n    this.negate = negate\n  }\n\n  // set partial to true to test if, for example,\n  // \"/a/b\" matches the start of \"/*/b/*/d\"\n  // Partial means, if you run out of file before you run\n  // out of pattern, then that's fine, as long as all\n  // the parts match.\n  matchOne (file, pattern, partial) {\n    var options = this.options\n\n    this.debug('matchOne',\n      { 'this': this, file: file, pattern: pattern })\n\n    this.debug('matchOne', file.length, pattern.length)\n\n    for (var fi = 0,\n        pi = 0,\n        fl = file.length,\n        pl = pattern.length\n        ; (fi < fl) && (pi < pl)\n        ; fi++, pi++) {\n      this.debug('matchOne loop')\n      var p = pattern[pi]\n      var f = file[fi]\n\n      this.debug(pattern, p, f)\n\n      // should be impossible.\n      // some invalid regexp stuff in the set.\n      /* istanbul ignore if */\n      if (p === false) return false\n\n      if (p === GLOBSTAR) {\n        this.debug('GLOBSTAR', [pattern, p, f])\n\n        // \"**\"\n        // a/**/b/**/c would match the following:\n        // a/b/x/y/z/c\n        // a/x/y/z/b/c\n        // a/b/x/b/x/c\n        // a/b/c\n        // To do this, take the rest of the pattern after\n        // the **, and see if it would match the file remainder.\n        // If so, return success.\n        // If not, the ** \"swallows\" a segment, and try again.\n        // This is recursively awful.\n        //\n        // a/**/b/**/c matching a/b/x/y/z/c\n        // - a matches a\n        // - doublestar\n        //   - matchOne(b/x/y/z/c, b/**/c)\n        //     - b matches b\n        //     - doublestar\n        //       - matchOne(x/y/z/c, c) -> no\n        //       - matchOne(y/z/c, c) -> no\n        //       - matchOne(z/c, c) -> no\n        //       - matchOne(c, c) yes, hit\n        var fr = fi\n        var pr = pi + 1\n        if (pr === pl) {\n          this.debug('** at the end')\n          // a ** at the end will just swallow the rest.\n          // We have found a match.\n          // however, it will not swallow /.x, unless\n          // options.dot is set.\n          // . and .. are *never* matched by **, for explosively\n          // exponential reasons.\n          for (; fi < fl; fi++) {\n            if (file[fi] === '.' || file[fi] === '..' ||\n              (!options.dot && file[fi].charAt(0) === '.')) return false\n          }\n          return true\n        }\n\n        // ok, let's see if we can swallow whatever we can.\n        while (fr < fl) {\n          var swallowee = file[fr]\n\n          this.debug('\\nglobstar while', file, fr, pattern, pr, swallowee)\n\n          // XXX remove this slice.  Just pass the start index.\n          if (this.matchOne(file.slice(fr), pattern.slice(pr), partial)) {\n            this.debug('globstar found match!', fr, fl, swallowee)\n            // found a match.\n            return true\n          } else {\n            // can't swallow \".\" or \"..\" ever.\n            // can only swallow \".foo\" when explicitly asked.\n            if (swallowee === '.' || swallowee === '..' ||\n              (!options.dot && swallowee.charAt(0) === '.')) {\n              this.debug('dot detected!', file, fr, pattern, pr)\n              break\n            }\n\n            // ** swallows a segment, and continue.\n            this.debug('globstar swallow a segment, and continue')\n            fr++\n          }\n        }\n\n        // no match was found.\n        // However, in partial mode, we can't say this is necessarily over.\n        // If there's more *pattern* left, then\n        /* istanbul ignore if */\n        if (partial) {\n          // ran out of file\n          this.debug('\\n>>> no match, partial?', file, fr, pattern, pr)\n          if (fr === fl) return true\n        }\n        return false\n      }\n\n      // something other than **\n      // non-magic patterns just have to match exactly\n      // patterns with magic have been turned into regexps.\n      var hit\n      if (typeof p === 'string') {\n        hit = f === p\n        this.debug('string match', p, f, hit)\n      } else {\n        hit = f.match(p)\n        this.debug('pattern match', p, f, hit)\n      }\n\n      if (!hit) return false\n    }\n\n    // Note: ending in / means that we'll get a final \"\"\n    // at the end of the pattern.  This can only match a\n    // corresponding \"\" at the end of the file.\n    // If the file ends in /, then it can only match a\n    // a pattern that ends in /, unless the pattern just\n    // doesn't have any more for it. But, a/b/ should *not*\n    // match \"a/b/*\", even though \"\" matches against the\n    // [^/]*? pattern, except in partial mode, where it might\n    // simply not be reached yet.\n    // However, a/b/ should still satisfy a/*\n\n    // now either we fell off the end of the pattern, or we're done.\n    if (fi === fl && pi === pl) {\n      // ran out of pattern and filename at the same time.\n      // an exact hit!\n      return true\n    } else if (fi === fl) {\n      // ran out of file, but still had pattern left.\n      // this is ok if we're doing the match as part of\n      // a glob fs traversal.\n      return partial\n    } else /* istanbul ignore else */ if (pi === pl) {\n      // ran out of pattern, still have file left.\n      // this is only acceptable if we're on the very last\n      // empty segment of a file with a trailing slash.\n      // a/* should match a/b/\n      return (fi === fl - 1) && (file[fi] === '')\n    }\n\n    // should be unreachable.\n    /* istanbul ignore next */\n    throw new Error('wtf?')\n  }\n\n  braceExpand () {\n    return braceExpand(this.pattern, this.options)\n  }\n\n  parse (pattern, isSub) {\n    assertValidPattern(pattern)\n\n    const options = this.options\n\n    // shortcuts\n    if (pattern === '**') {\n      if (!options.noglobstar)\n        return GLOBSTAR\n      else\n        pattern = '*'\n    }\n    if (pattern === '') return ''\n\n    let re = ''\n    let hasMagic = false\n    let escaping = false\n    // ? => one single character\n    const patternListStack = []\n    const negativeLists = []\n    let stateChar\n    let inClass = false\n    let reClassStart = -1\n    let classStart = -1\n    let cs\n    let pl\n    let sp\n    // . and .. never match anything that doesn't start with .,\n    // even when options.dot is set.  However, if the pattern\n    // starts with ., then traversal patterns can match.\n    let dotTravAllowed = pattern.charAt(0) === '.'\n    let dotFileAllowed = options.dot || dotTravAllowed\n    const patternStart = () =>\n      dotTravAllowed\n        ? ''\n        : dotFileAllowed\n        ? '(?!(?:^|\\\\/)\\\\.{1,2}(?:$|\\\\/))'\n        : '(?!\\\\.)'\n    const subPatternStart = (p) =>\n      p.charAt(0) === '.'\n        ? ''\n        : options.dot\n        ? '(?!(?:^|\\\\/)\\\\.{1,2}(?:$|\\\\/))'\n        : '(?!\\\\.)'\n\n\n    const clearStateChar = () => {\n      if (stateChar) {\n        // we had some state-tracking character\n        // that wasn't consumed by this pass.\n        switch (stateChar) {\n          case '*':\n            re += star\n            hasMagic = true\n          break\n          case '?':\n            re += qmark\n            hasMagic = true\n          break\n          default:\n            re += '\\\\' + stateChar\n          break\n        }\n        this.debug('clearStateChar %j %j', stateChar, re)\n        stateChar = false\n      }\n    }\n\n    for (let i = 0, c; (i < pattern.length) && (c = pattern.charAt(i)); i++) {\n      this.debug('%s\\t%s %s %j', pattern, i, re, c)\n\n      // skip over any that are escaped.\n      if (escaping) {\n        /* istanbul ignore next - completely not allowed, even escaped. */\n        if (c === '/') {\n          return false\n        }\n\n        if (reSpecials[c]) {\n          re += '\\\\'\n        }\n        re += c\n        escaping = false\n        continue\n      }\n\n      switch (c) {\n        /* istanbul ignore next */\n        case '/': {\n          // Should already be path-split by now.\n          return false\n        }\n\n        case '\\\\':\n          if (inClass && pattern.charAt(i + 1) === '-') {\n            re += c\n            continue\n          }\n\n          clearStateChar()\n          escaping = true\n        continue\n\n        // the various stateChar values\n        // for the \"extglob\" stuff.\n        case '?':\n        case '*':\n        case '+':\n        case '@':\n        case '!':\n          this.debug('%s\\t%s %s %j <-- stateChar', pattern, i, re, c)\n\n          // all of those are literals inside a class, except that\n          // the glob [!a] means [^a] in regexp\n          if (inClass) {\n            this.debug('  in class')\n            if (c === '!' && i === classStart + 1) c = '^'\n            re += c\n            continue\n          }\n\n          // if we already have a stateChar, then it means\n          // that there was something like ** or +? in there.\n          // Handle the stateChar, then proceed with this one.\n          this.debug('call clearStateChar %j', stateChar)\n          clearStateChar()\n          stateChar = c\n          // if extglob is disabled, then +(asdf|foo) isn't a thing.\n          // just clear the statechar *now*, rather than even diving into\n          // the patternList stuff.\n          if (options.noext) clearStateChar()\n        continue\n\n        case '(': {\n          if (inClass) {\n            re += '('\n            continue\n          }\n\n          if (!stateChar) {\n            re += '\\\\('\n            continue\n          }\n\n          const plEntry = {\n            type: stateChar,\n            start: i - 1,\n            reStart: re.length,\n            open: plTypes[stateChar].open,\n            close: plTypes[stateChar].close,\n          }\n          this.debug(this.pattern, '\\t', plEntry)\n          patternListStack.push(plEntry)\n          // negation is (?:(?!(?:js)(?:<rest>))[^/]*)\n          re += plEntry.open\n          // next entry starts with a dot maybe?\n          if (plEntry.start === 0 && plEntry.type !== '!') {\n            dotTravAllowed = true\n            re += subPatternStart(pattern.slice(i + 1))\n          }\n          this.debug('plType %j %j', stateChar, re)\n          stateChar = false\n          continue\n        }\n\n        case ')': {\n          const plEntry = patternListStack[patternListStack.length - 1]\n          if (inClass || !plEntry) {\n            re += '\\\\)'\n            continue\n          }\n          patternListStack.pop()\n\n          // closing an extglob\n          clearStateChar()\n          hasMagic = true\n          pl = plEntry\n          // negation is (?:(?!js)[^/]*)\n          // The others are (?:<pattern>)<type>\n          re += pl.close\n          if (pl.type === '!') {\n            negativeLists.push(Object.assign(pl, { reEnd: re.length }))\n          }\n          continue\n        }\n\n        case '|': {\n          const plEntry = patternListStack[patternListStack.length - 1]\n          if (inClass || !plEntry) {\n            re += '\\\\|'\n            continue\n          }\n\n          clearStateChar()\n          re += '|'\n          // next subpattern can start with a dot?\n          if (plEntry.start === 0 && plEntry.type !== '!') {\n            dotTravAllowed = true\n            re += subPatternStart(pattern.slice(i + 1))\n          }\n          continue\n        }\n\n        // these are mostly the same in regexp and glob\n        case '[':\n          // swallow any state-tracking char before the [\n          clearStateChar()\n\n          if (inClass) {\n            re += '\\\\' + c\n            continue\n          }\n\n          inClass = true\n          classStart = i\n          reClassStart = re.length\n          re += c\n        continue\n\n        case ']':\n          //  a right bracket shall lose its special\n          //  meaning and represent itself in\n          //  a bracket expression if it occurs\n          //  first in the list.  -- POSIX.2 2.8.3.2\n          if (i === classStart + 1 || !inClass) {\n            re += '\\\\' + c\n            continue\n          }\n\n          // split where the last [ was, make sure we don't have\n          // an invalid re. if so, re-walk the contents of the\n          // would-be class to re-translate any characters that\n          // were passed through as-is\n          // TODO: It would probably be faster to determine this\n          // without a try/catch and a new RegExp, but it's tricky\n          // to do safely.  For now, this is safe and works.\n          cs = pattern.substring(classStart + 1, i)\n          try {\n            RegExp('[' + braExpEscape(charUnescape(cs)) + ']')\n            // looks good, finish up the class.\n            re += c\n          } catch (er) {\n            // out of order ranges in JS are errors, but in glob syntax,\n            // they're just a range that matches nothing.\n            re = re.substring(0, reClassStart) + '(?:$.)' // match nothing ever\n          }\n          hasMagic = true\n          inClass = false\n        continue\n\n        default:\n          // swallow any state char that wasn't consumed\n          clearStateChar()\n\n          if (reSpecials[c] && !(c === '^' && inClass)) {\n            re += '\\\\'\n          }\n\n          re += c\n          break\n\n      } // switch\n    } // for\n\n    // handle the case where we left a class open.\n    // \"[abc\" is valid, equivalent to \"\\[abc\"\n    if (inClass) {\n      // split where the last [ was, and escape it\n      // this is a huge pita.  We now have to re-walk\n      // the contents of the would-be class to re-translate\n      // any characters that were passed through as-is\n      cs = pattern.slice(classStart + 1)\n      sp = this.parse(cs, SUBPARSE)\n      re = re.substring(0, reClassStart) + '\\\\[' + sp[0]\n      hasMagic = hasMagic || sp[1]\n    }\n\n    // handle the case where we had a +( thing at the *end*\n    // of the pattern.\n    // each pattern list stack adds 3 chars, and we need to go through\n    // and escape any | chars that were passed through as-is for the regexp.\n    // Go through and escape them, taking care not to double-escape any\n    // | chars that were already escaped.\n    for (pl = patternListStack.pop(); pl; pl = patternListStack.pop()) {\n      let tail\n      tail = re.slice(pl.reStart + pl.open.length)\n      this.debug('setting tail', re, pl)\n      // maybe some even number of \\, then maybe 1 \\, followed by a |\n      tail = tail.replace(/((?:\\\\{2}){0,64})(\\\\?)\\|/g, (_, $1, $2) => {\n        /* istanbul ignore else - should already be done */\n        if (!$2) {\n          // the | isn't already escaped, so escape it.\n          $2 = '\\\\'\n        }\n\n        // need to escape all those slashes *again*, without escaping the\n        // one that we need for escaping the | character.  As it works out,\n        // escaping an even number of slashes can be done by simply repeating\n        // it exactly after itself.  That's why this trick works.\n        //\n        // I am sorry that you have to see this.\n        return $1 + $1 + $2 + '|'\n      })\n\n      this.debug('tail=%j\\n   %s', tail, tail, pl, re)\n      const t = pl.type === '*' ? star\n        : pl.type === '?' ? qmark\n        : '\\\\' + pl.type\n\n      hasMagic = true\n      re = re.slice(0, pl.reStart) + t + '\\\\(' + tail\n    }\n\n    // handle trailing things that only matter at the very end.\n    clearStateChar()\n    if (escaping) {\n      // trailing \\\\\n      re += '\\\\\\\\'\n    }\n\n    // only need to apply the nodot start if the re starts with\n    // something that could conceivably capture a dot\n    const addPatternStart = addPatternStartSet[re.charAt(0)]\n\n    // Hack to work around lack of negative lookbehind in JS\n    // A pattern like: *.!(x).!(y|z) needs to ensure that a name\n    // like 'a.xyz.yz' doesn't match.  So, the first negative\n    // lookahead, has to look ALL the way ahead, to the end of\n    // the pattern.\n    for (let n = negativeLists.length - 1; n > -1; n--) {\n      const nl = negativeLists[n]\n\n      const nlBefore = re.slice(0, nl.reStart)\n      const nlFirst = re.slice(nl.reStart, nl.reEnd - 8)\n      let nlAfter = re.slice(nl.reEnd)\n      const nlLast = re.slice(nl.reEnd - 8, nl.reEnd) + nlAfter\n\n      // Handle nested stuff like *(*.js|!(*.json)), where open parens\n      // mean that we should *not* include the ) in the bit that is considered\n      // \"after\" the negated section.\n      const closeParensBefore = nlBefore.split(')').length\n      const openParensBefore = nlBefore.split('(').length - closeParensBefore\n      let cleanAfter = nlAfter\n      for (let i = 0; i < openParensBefore; i++) {\n        cleanAfter = cleanAfter.replace(/\\)[+*?]?/, '')\n      }\n      nlAfter = cleanAfter\n\n      const dollar = nlAfter === '' && isSub !== SUBPARSE ? '(?:$|\\\\/)' : ''\n\n      re = nlBefore + nlFirst + nlAfter + dollar + nlLast\n    }\n\n    // if the re is not \"\" at this point, then we need to make sure\n    // it doesn't match against an empty path part.\n    // Otherwise a/* will match a/, which it should not.\n    if (re !== '' && hasMagic) {\n      re = '(?=.)' + re\n    }\n\n    if (addPatternStart) {\n      re = patternStart() + re\n    }\n\n    // parsing just a piece of a larger pattern.\n    if (isSub === SUBPARSE) {\n      return [re, hasMagic]\n    }\n\n    // if it's nocase, and the lcase/uppercase don't match, it's magic\n    if (options.nocase && !hasMagic) {\n      hasMagic = pattern.toUpperCase() !== pattern.toLowerCase()\n    }\n\n    // skip the regexp for non-magical patterns\n    // unescape anything in it, though, so that it'll be\n    // an exact match against a file etc.\n    if (!hasMagic) {\n      return globUnescape(pattern)\n    }\n\n    const flags = options.nocase ? 'i' : ''\n    try {\n      return Object.assign(new RegExp('^' + re + '$', flags), {\n        _glob: pattern,\n        _src: re,\n      })\n    } catch (er) /* istanbul ignore next - should be impossible */ {\n      // If it was an invalid regular expression, then it can't match\n      // anything.  This trick looks for a character after the end of\n      // the string, which is of course impossible, except in multi-line\n      // mode, but it's not a /m regex.\n      return new RegExp('$.')\n    }\n  }\n\n  makeRe () {\n    if (this.regexp || this.regexp === false) return this.regexp\n\n    // at this point, this.set is a 2d array of partial\n    // pattern strings, or \"**\".\n    //\n    // It's better to use .match().  This function shouldn't\n    // be used, really, but it's pretty convenient sometimes,\n    // when you just want to work with a regex.\n    const set = this.set\n\n    if (!set.length) {\n      this.regexp = false\n      return this.regexp\n    }\n    const options = this.options\n\n    const twoStar = options.noglobstar ? star\n      : options.dot ? twoStarDot\n      : twoStarNoDot\n    const flags = options.nocase ? 'i' : ''\n\n    // coalesce globstars and regexpify non-globstar patterns\n    // if it's the only item, then we just do one twoStar\n    // if it's the first, and there are more, prepend (\\/|twoStar\\/)? to next\n    // if it's the last, append (\\/twoStar|) to previous\n    // if it's in the middle, append (\\/|\\/twoStar\\/) to previous\n    // then filter out GLOBSTAR symbols\n    let re = set.map(pattern => {\n      pattern = pattern.map(p =>\n        typeof p === 'string' ? regExpEscape(p)\n        : p === GLOBSTAR ? GLOBSTAR\n        : p._src\n      ).reduce((set, p) => {\n        if (!(set[set.length - 1] === GLOBSTAR && p === GLOBSTAR)) {\n          set.push(p)\n        }\n        return set\n      }, [])\n      pattern.forEach((p, i) => {\n        if (p !== GLOBSTAR || pattern[i-1] === GLOBSTAR) {\n          return\n        }\n        if (i === 0) {\n          if (pattern.length > 1) {\n            pattern[i+1] = '(?:\\\\\\/|' + twoStar + '\\\\\\/)?' + pattern[i+1]\n          } else {\n            pattern[i] = twoStar\n          }\n        } else if (i === pattern.length - 1) {\n          pattern[i-1] += '(?:\\\\\\/|' + twoStar + ')?'\n        } else {\n          pattern[i-1] += '(?:\\\\\\/|\\\\\\/' + twoStar + '\\\\\\/)' + pattern[i+1]\n          pattern[i+1] = GLOBSTAR\n        }\n      })\n      return pattern.filter(p => p !== GLOBSTAR).join('/')\n    }).join('|')\n\n    // must match entire pattern\n    // ending in a * or ** will make it less strict.\n    re = '^(?:' + re + ')$'\n\n    // can match anything, as long as it's not this.\n    if (this.negate) re = '^(?!' + re + ').*$'\n\n    try {\n      this.regexp = new RegExp(re, flags)\n    } catch (ex) /* istanbul ignore next - should be impossible */ {\n      this.regexp = false\n    }\n    return this.regexp\n  }\n\n  match (f, partial = this.partial) {\n    this.debug('match', f, this.pattern)\n    // short-circuit in the case of busted things.\n    // comments, etc.\n    if (this.comment) return false\n    if (this.empty) return f === ''\n\n    if (f === '/' && partial) return true\n\n    const options = this.options\n\n    // windows: need to use /, not \\\n    if (path.sep !== '/') {\n      f = f.split(path.sep).join('/')\n    }\n\n    // treat the test path as a set of pathparts.\n    f = f.split(slashSplit)\n    this.debug(this.pattern, 'split', f)\n\n    // just ONE of the pattern sets in this.set needs to match\n    // in order for it to be valid.  If negating, then just one\n    // match means that we have failed.\n    // Either way, return on the first hit.\n\n    const set = this.set\n    this.debug(this.pattern, 'set', set)\n\n    // Find the basename of the path by looking for the last non-empty segment\n    let filename\n    for (let i = f.length - 1; i >= 0; i--) {\n      filename = f[i]\n      if (filename) break\n    }\n\n    for (let i = 0; i < set.length; i++) {\n      const pattern = set[i]\n      let file = f\n      if (options.matchBase && pattern.length === 1) {\n        file = [filename]\n      }\n      const hit = this.matchOne(file, pattern, partial)\n      if (hit) {\n        if (options.flipNegate) return true\n        return !this.negate\n      }\n    }\n\n    // didn't get any hits.  this is success if it's a negative\n    // pattern, failure otherwise.\n    if (options.flipNegate) return false\n    return this.negate\n  }\n\n  static defaults (def) {\n    return minimatch.defaults(def).Minimatch\n  }\n}\n\nminimatch.Minimatch = Minimatch\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticFeature = exports.DiagnosticPullMode = exports.vsdiag = void 0;\nconst minimatch = require(\"minimatch\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst uuid_1 = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar vsdiag;\n(function (vsdiag) {\n    let DocumentDiagnosticReportKind;\n    (function (DocumentDiagnosticReportKind) {\n        DocumentDiagnosticReportKind[\"full\"] = \"full\";\n        DocumentDiagnosticReportKind[\"unChanged\"] = \"unChanged\";\n    })(DocumentDiagnosticReportKind = vsdiag.DocumentDiagnosticReportKind || (vsdiag.DocumentDiagnosticReportKind = {}));\n})(vsdiag || (exports.vsdiag = vsdiag = {}));\nvar DiagnosticPullMode;\n(function (DiagnosticPullMode) {\n    DiagnosticPullMode[\"onType\"] = \"onType\";\n    DiagnosticPullMode[\"onSave\"] = \"onSave\";\n})(DiagnosticPullMode || (exports.DiagnosticPullMode = DiagnosticPullMode = {}));\nvar RequestStateKind;\n(function (RequestStateKind) {\n    RequestStateKind[\"active\"] = \"open\";\n    RequestStateKind[\"reschedule\"] = \"reschedule\";\n    RequestStateKind[\"outDated\"] = \"drop\";\n})(RequestStateKind || (RequestStateKind = {}));\n/**\n * Manages the open tabs. We don't directly use the tab API since for\n * diagnostics we need to de-dupe tabs that show the same resources since\n * we pull on the model not the UI.\n */\nclass Tabs {\n    constructor() {\n        this.open = new Set();\n        this._onOpen = new vscode_1.EventEmitter();\n        this._onClose = new vscode_1.EventEmitter();\n        Tabs.fillTabResources(this.open);\n        const openTabsHandler = (event) => {\n            if (event.closed.length === 0 && event.opened.length === 0) {\n                return;\n            }\n            const oldTabs = this.open;\n            const currentTabs = new Set();\n            Tabs.fillTabResources(currentTabs);\n            const closed = new Set();\n            const opened = new Set(currentTabs);\n            for (const tab of oldTabs.values()) {\n                if (currentTabs.has(tab)) {\n                    opened.delete(tab);\n                }\n                else {\n                    closed.add(tab);\n                }\n            }\n            this.open = currentTabs;\n            if (closed.size > 0) {\n                const toFire = new Set();\n                for (const item of closed) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onClose.fire(toFire);\n            }\n            if (opened.size > 0) {\n                const toFire = new Set();\n                for (const item of opened) {\n                    toFire.add(vscode_1.Uri.parse(item));\n                }\n                this._onOpen.fire(toFire);\n            }\n        };\n        if (vscode_1.window.tabGroups.onDidChangeTabs !== undefined) {\n            this.disposable = vscode_1.window.tabGroups.onDidChangeTabs(openTabsHandler);\n        }\n        else {\n            this.disposable = { dispose: () => { } };\n        }\n    }\n    get onClose() {\n        return this._onClose.event;\n    }\n    get onOpen() {\n        return this._onOpen.event;\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n    isActive(document) {\n        return document instanceof vscode_1.Uri\n            ? vscode_1.window.activeTextEditor?.document.uri === document\n            : vscode_1.window.activeTextEditor?.document === document;\n    }\n    isVisible(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        return this.open.has(uri.toString());\n    }\n    getTabResources() {\n        const result = new Set();\n        Tabs.fillTabResources(new Set(), result);\n        return result;\n    }\n    static fillTabResources(strings, uris) {\n        const seen = strings ?? new Set();\n        for (const group of vscode_1.window.tabGroups.all) {\n            for (const tab of group.tabs) {\n                const input = tab.input;\n                let uri;\n                if (input instanceof vscode_1.TabInputText) {\n                    uri = input.uri;\n                }\n                else if (input instanceof vscode_1.TabInputTextDiff) {\n                    uri = input.modified;\n                }\n                else if (input instanceof vscode_1.TabInputCustom) {\n                    uri = input.uri;\n                }\n                if (uri !== undefined && !seen.has(uri.toString())) {\n                    seen.add(uri.toString());\n                    uris !== undefined && uris.add(uri);\n                }\n            }\n        }\n    }\n}\nvar PullState;\n(function (PullState) {\n    PullState[PullState[\"document\"] = 1] = \"document\";\n    PullState[PullState[\"workspace\"] = 2] = \"workspace\";\n})(PullState || (PullState = {}));\nvar DocumentOrUri;\n(function (DocumentOrUri) {\n    function asKey(document) {\n        return document instanceof vscode_1.Uri ? document.toString() : document.uri.toString();\n    }\n    DocumentOrUri.asKey = asKey;\n})(DocumentOrUri || (DocumentOrUri = {}));\nclass DocumentPullStateTracker {\n    constructor() {\n        this.documentPullStates = new Map();\n        this.workspacePullStates = new Map();\n    }\n    track(kind, document, arg1) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1]\n            : [document.uri.toString(), document.uri, document.version];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId: undefined };\n            states.set(key, state);\n        }\n        return state;\n    }\n    update(kind, document, arg1, arg2) {\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        const [key, uri, version, resultId] = document instanceof vscode_1.Uri\n            ? [document.toString(), document, arg1, arg2]\n            : [document.uri.toString(), document.uri, document.version, arg1];\n        let state = states.get(key);\n        if (state === undefined) {\n            state = { document: uri, pulledVersion: version, resultId };\n            states.set(key, state);\n        }\n        else {\n            state.pulledVersion = version;\n            state.resultId = resultId;\n        }\n    }\n    unTrack(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        states.delete(key);\n    }\n    tracks(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.has(key);\n    }\n    getResultId(kind, document) {\n        const key = DocumentOrUri.asKey(document);\n        const states = kind === PullState.document ? this.documentPullStates : this.workspacePullStates;\n        return states.get(key)?.resultId;\n    }\n    getAllResultIds() {\n        const result = [];\n        for (let [uri, value] of this.workspacePullStates) {\n            if (this.documentPullStates.has(uri)) {\n                value = this.documentPullStates.get(uri);\n            }\n            if (value.resultId !== undefined) {\n                result.push({ uri, value: value.resultId });\n            }\n        }\n        return result;\n    }\n}\nclass DiagnosticRequestor {\n    constructor(client, tabs, options) {\n        this.client = client;\n        this.tabs = tabs;\n        this.options = options;\n        this.isDisposed = false;\n        this.onDidChangeDiagnosticsEmitter = new vscode_1.EventEmitter();\n        this.provider = this.createProvider();\n        this.diagnostics = vscode_1.languages.createDiagnosticCollection(options.identifier);\n        this.openRequests = new Map();\n        this.documentStates = new DocumentPullStateTracker();\n        this.workspaceErrorCounter = 0;\n    }\n    knows(kind, document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        return this.documentStates.tracks(kind, document) || this.openRequests.has(uri.toString());\n    }\n    forget(kind, document) {\n        this.documentStates.unTrack(kind, document);\n    }\n    pull(document, cb) {\n        if (this.isDisposed) {\n            return;\n        }\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        this.pullAsync(document).then(() => {\n            if (cb) {\n                cb();\n            }\n        }, (error) => {\n            this.client.error(`Document pull failed for text document ${uri.toString()}`, error, false);\n        });\n    }\n    async pullAsync(document, version) {\n        if (this.isDisposed) {\n            return;\n        }\n        const isUri = document instanceof vscode_1.Uri;\n        const uri = isUri ? document : document.uri;\n        const key = uri.toString();\n        version = isUri ? version : document.version;\n        const currentRequestState = this.openRequests.get(key);\n        const documentState = isUri\n            ? this.documentStates.track(PullState.document, document, version)\n            : this.documentStates.track(PullState.document, document);\n        if (currentRequestState === undefined) {\n            const tokenSource = new vscode_1.CancellationTokenSource();\n            this.openRequests.set(key, { state: RequestStateKind.active, document: document, version: version, tokenSource });\n            let report;\n            let afterState;\n            try {\n                report = await this.provider.provideDiagnostics(document, documentState.resultId, tokenSource.token) ?? { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n            }\n            catch (error) {\n                if (error instanceof features_1.LSPCancellationError && vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data) && error.data.retriggerRequest === false) {\n                    afterState = { state: RequestStateKind.outDated, document };\n                }\n                if (afterState === undefined && error instanceof vscode_1.CancellationError) {\n                    afterState = { state: RequestStateKind.reschedule, document };\n                }\n                else {\n                    throw error;\n                }\n            }\n            afterState = afterState ?? this.openRequests.get(key);\n            if (afterState === undefined) {\n                // This shouldn't happen. Log it\n                this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${key}`);\n                this.diagnostics.delete(uri);\n                return;\n            }\n            this.openRequests.delete(key);\n            if (!this.tabs.isVisible(document)) {\n                this.documentStates.unTrack(PullState.document, document);\n                return;\n            }\n            if (afterState.state === RequestStateKind.outDated) {\n                return;\n            }\n            // report is only undefined if the request has thrown.\n            if (report !== undefined) {\n                if (report.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    this.diagnostics.set(uri, report.items);\n                }\n                documentState.pulledVersion = version;\n                documentState.resultId = report.resultId;\n            }\n            if (afterState.state === RequestStateKind.reschedule) {\n                this.pull(document);\n            }\n        }\n        else {\n            if (currentRequestState.state === RequestStateKind.active) {\n                // Cancel the current request and reschedule a new one when the old one returned.\n                currentRequestState.tokenSource.cancel();\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n            else if (currentRequestState.state === RequestStateKind.outDated) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: currentRequestState.document });\n            }\n        }\n    }\n    forgetDocument(document) {\n        const uri = document instanceof vscode_1.Uri ? document : document.uri;\n        const key = uri.toString();\n        const request = this.openRequests.get(key);\n        if (this.options.workspaceDiagnostics) {\n            // If we run workspace diagnostic pull a last time for the diagnostics\n            // and the rely on getting them from the workspace result.\n            if (request !== undefined) {\n                this.openRequests.set(key, { state: RequestStateKind.reschedule, document: document });\n            }\n            else {\n                this.pull(document, () => {\n                    this.forget(PullState.document, document);\n                });\n            }\n        }\n        else {\n            // We have normal pull or inter file dependencies. In this case we\n            // clear the diagnostics (to have the same start as after startup).\n            // We also cancel outstanding requests.\n            if (request !== undefined) {\n                if (request.state === RequestStateKind.active) {\n                    request.tokenSource.cancel();\n                }\n                this.openRequests.set(key, { state: RequestStateKind.outDated, document: document });\n            }\n            this.diagnostics.delete(uri);\n            this.forget(PullState.document, document);\n        }\n    }\n    pullWorkspace() {\n        if (this.isDisposed) {\n            return;\n        }\n        this.pullWorkspaceAsync().then(() => {\n            this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                this.pullWorkspace();\n            }, 2000);\n        }, (error) => {\n            if (!(error instanceof features_1.LSPCancellationError) && !vscode_languageserver_protocol_1.DiagnosticServerCancellationData.is(error.data)) {\n                this.client.error(`Workspace diagnostic pull failed.`, error, false);\n                this.workspaceErrorCounter++;\n            }\n            if (this.workspaceErrorCounter <= 5) {\n                this.workspaceTimeout = (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(() => {\n                    this.pullWorkspace();\n                }, 2000);\n            }\n        });\n    }\n    async pullWorkspaceAsync() {\n        if (!this.provider.provideWorkspaceDiagnostics || this.isDisposed) {\n            return;\n        }\n        if (this.workspaceCancellation !== undefined) {\n            this.workspaceCancellation.cancel();\n            this.workspaceCancellation = undefined;\n        }\n        this.workspaceCancellation = new vscode_1.CancellationTokenSource();\n        const previousResultIds = this.documentStates.getAllResultIds().map((item) => {\n            return {\n                uri: this.client.protocol2CodeConverter.asUri(item.uri),\n                value: item.value\n            };\n        });\n        await this.provider.provideWorkspaceDiagnostics(previousResultIds, this.workspaceCancellation.token, (chunk) => {\n            if (!chunk || this.isDisposed) {\n                return;\n            }\n            for (const item of chunk.items) {\n                if (item.kind === vsdiag.DocumentDiagnosticReportKind.full) {\n                    // Favour document pull result over workspace results. So skip if it is tracked\n                    // as a document result.\n                    if (!this.documentStates.tracks(PullState.document, item.uri)) {\n                        this.diagnostics.set(item.uri, item.items);\n                    }\n                }\n                this.documentStates.update(PullState.workspace, item.uri, item.version ?? undefined, item.resultId);\n            }\n        });\n    }\n    createProvider() {\n        const result = {\n            onDidChangeDiagnostics: this.onDidChangeDiagnosticsEmitter.event,\n            provideDiagnostics: (document, previousResultId, token) => {\n                const provideDiagnostics = (document, previousResultId, token) => {\n                    const params = {\n                        identifier: this.options.identifier,\n                        textDocument: { uri: this.client.code2ProtocolConverter.asUri(document instanceof vscode_1.Uri ? document : document.uri) },\n                        previousResultId: previousResultId\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (result === undefined || result === null || this.isDisposed || token.isCancellationRequested) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] };\n                        }\n                        if (result.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.full, resultId: result.resultId, items: await this.client.protocol2CodeConverter.asDiagnostics(result.items, token) };\n                        }\n                        else {\n                            return { kind: vsdiag.DocumentDiagnosticReportKind.unChanged, resultId: result.resultId };\n                        }\n                    }, (error) => {\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { kind: vsdiag.DocumentDiagnosticReportKind.full, items: [] });\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideDiagnostics\n                    ? middleware.provideDiagnostics(document, previousResultId, token, provideDiagnostics)\n                    : provideDiagnostics(document, previousResultId, token);\n            }\n        };\n        if (this.options.workspaceDiagnostics) {\n            result.provideWorkspaceDiagnostics = (resultIds, token, resultReporter) => {\n                const convertReport = async (report) => {\n                    if (report.kind === vscode_languageserver_protocol_1.DocumentDiagnosticReportKind.Full) {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.full,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version,\n                            items: await this.client.protocol2CodeConverter.asDiagnostics(report.items, token)\n                        };\n                    }\n                    else {\n                        return {\n                            kind: vsdiag.DocumentDiagnosticReportKind.unChanged,\n                            uri: this.client.protocol2CodeConverter.asUri(report.uri),\n                            resultId: report.resultId,\n                            version: report.version\n                        };\n                    }\n                };\n                const convertPreviousResultIds = (resultIds) => {\n                    const converted = [];\n                    for (const item of resultIds) {\n                        converted.push({ uri: this.client.code2ProtocolConverter.asUri(item.uri), value: item.value });\n                    }\n                    return converted;\n                };\n                const provideDiagnostics = (resultIds, token) => {\n                    const partialResultToken = (0, uuid_1.generateUuid)();\n                    const disposable = this.client.onProgress(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.partialResult, partialResultToken, async (partialResult) => {\n                        if (partialResult === undefined || partialResult === null) {\n                            resultReporter(null);\n                            return;\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of partialResult.items) {\n                            try {\n                                converted.items.push(await convertReport(item));\n                            }\n                            catch (error) {\n                                this.client.error(`Converting workspace diagnostics failed.`, error);\n                            }\n                        }\n                        resultReporter(converted);\n                    });\n                    const params = {\n                        identifier: this.options.identifier,\n                        previousResultIds: convertPreviousResultIds(resultIds),\n                        partialResultToken: partialResultToken\n                    };\n                    if (this.isDisposed === true || !this.client.isRunning()) {\n                        return { items: [] };\n                    }\n                    return this.client.sendRequest(vscode_languageserver_protocol_1.WorkspaceDiagnosticRequest.type, params, token).then(async (result) => {\n                        if (token.isCancellationRequested) {\n                            return { items: [] };\n                        }\n                        const converted = {\n                            items: []\n                        };\n                        for (const item of result.items) {\n                            converted.items.push(await convertReport(item));\n                        }\n                        disposable.dispose();\n                        resultReporter(converted);\n                        return { items: [] };\n                    }, (error) => {\n                        disposable.dispose();\n                        return this.client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type, token, error, { items: [] });\n                    });\n                };\n                const middleware = this.client.middleware;\n                return middleware.provideWorkspaceDiagnostics\n                    ? middleware.provideWorkspaceDiagnostics(resultIds, token, resultReporter, provideDiagnostics)\n                    : provideDiagnostics(resultIds, token, resultReporter);\n            };\n        }\n        return result;\n    }\n    dispose() {\n        this.isDisposed = true;\n        // Cancel and clear workspace pull if present.\n        this.workspaceCancellation?.cancel();\n        this.workspaceTimeout?.dispose();\n        // Cancel all request and mark open requests as outdated.\n        for (const [key, request] of this.openRequests) {\n            if (request.state === RequestStateKind.active) {\n                request.tokenSource.cancel();\n            }\n            this.openRequests.set(key, { state: RequestStateKind.outDated, document: request.document });\n        }\n        // cleanup old diagnostics\n        this.diagnostics.dispose();\n    }\n}\nclass BackgroundScheduler {\n    constructor(diagnosticRequestor) {\n        this.diagnosticRequestor = diagnosticRequestor;\n        this.documents = new vscode_languageserver_protocol_1.LinkedMap();\n        this.isDisposed = false;\n    }\n    add(document) {\n        if (this.isDisposed === true) {\n            return;\n        }\n        const key = DocumentOrUri.asKey(document);\n        if (this.documents.has(key)) {\n            return;\n        }\n        this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n        this.trigger();\n    }\n    remove(document) {\n        const key = DocumentOrUri.asKey(document);\n        this.documents.delete(key);\n        // No more documents. Stop background activity.\n        if (this.documents.size === 0) {\n            this.stop();\n        }\n        else if (key === this.endDocumentKey()) {\n            // Make sure we have a correct last document. It could have\n            this.endDocument = this.documents.last;\n        }\n    }\n    trigger() {\n        if (this.isDisposed === true) {\n            return;\n        }\n        // We have a round running. So simply make sure we run up to the\n        // last document\n        if (this.intervalHandle !== undefined) {\n            this.endDocument = this.documents.last;\n            return;\n        }\n        this.endDocument = this.documents.last;\n        this.intervalHandle = (0, vscode_languageserver_protocol_1.RAL)().timer.setInterval(() => {\n            const document = this.documents.first;\n            if (document !== undefined) {\n                const key = DocumentOrUri.asKey(document);\n                this.diagnosticRequestor.pull(document);\n                this.documents.set(key, document, vscode_languageserver_protocol_1.Touch.Last);\n                if (key === this.endDocumentKey()) {\n                    this.stop();\n                }\n            }\n        }, 200);\n    }\n    dispose() {\n        this.isDisposed = true;\n        this.stop();\n        this.documents.clear();\n    }\n    stop() {\n        this.intervalHandle?.dispose();\n        this.intervalHandle = undefined;\n        this.endDocument = undefined;\n    }\n    endDocumentKey() {\n        return this.endDocument !== undefined ? DocumentOrUri.asKey(this.endDocument) : undefined;\n    }\n}\nclass DiagnosticFeatureProviderImpl {\n    constructor(client, tabs, options) {\n        const diagnosticPullOptions = client.clientOptions.diagnosticPullOptions ?? { onChange: true, onSave: false };\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        const disposables = [];\n        const matchResource = (resource) => {\n            const selector = options.documentSelector;\n            if (diagnosticPullOptions.match !== undefined) {\n                return diagnosticPullOptions.match(selector, resource);\n            }\n            for (const filter of selector) {\n                if (!vscode_languageserver_protocol_1.TextDocumentFilter.is(filter)) {\n                    continue;\n                }\n                // The filter is a language id. We can't determine if it matches\n                // so we return false.\n                if (typeof filter === 'string') {\n                    return false;\n                }\n                if (filter.language !== undefined && filter.language !== '*') {\n                    return false;\n                }\n                if (filter.scheme !== undefined && filter.scheme !== '*' && filter.scheme !== resource.scheme) {\n                    return false;\n                }\n                if (filter.pattern !== undefined) {\n                    const matcher = new minimatch.Minimatch(filter.pattern, { noext: true });\n                    if (!matcher.makeRe()) {\n                        return false;\n                    }\n                    if (!matcher.match(resource.fsPath)) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        };\n        const matches = (document) => {\n            return document instanceof vscode_1.Uri\n                ? matchResource(document)\n                : vscode_1.languages.match(documentSelector, document) > 0 && tabs.isVisible(document);\n        };\n        const isActiveDocument = (document) => {\n            return document instanceof vscode_1.Uri\n                ? this.activeTextDocument?.uri.toString() === document.toString()\n                : this.activeTextDocument === document;\n        };\n        this.diagnosticRequestor = new DiagnosticRequestor(client, tabs, options);\n        this.backgroundScheduler = new BackgroundScheduler(this.diagnosticRequestor);\n        const addToBackgroundIfNeeded = (document) => {\n            if (!matches(document) || !options.interFileDependencies || isActiveDocument(document)) {\n                return;\n            }\n            this.backgroundScheduler.add(document);\n        };\n        this.activeTextDocument = vscode_1.window.activeTextEditor?.document;\n        vscode_1.window.onDidChangeActiveTextEditor((editor) => {\n            const oldActive = this.activeTextDocument;\n            this.activeTextDocument = editor?.document;\n            if (oldActive !== undefined) {\n                addToBackgroundIfNeeded(oldActive);\n            }\n            if (this.activeTextDocument !== undefined) {\n                this.backgroundScheduler.remove(this.activeTextDocument);\n            }\n        });\n        // For pull model diagnostics we pull for documents visible in the UI.\n        // From an eventing point of view we still rely on open document events\n        // and filter the documents that are not visible in the UI instead of\n        // listening to Tab events. Major reason is event timing since we need\n        // to ensure that the pull is send after the document open has reached\n        // the server.\n        // We always pull on open.\n        const openFeature = client.getFeature(vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method);\n        disposables.push(openFeature.onNotificationSent((event) => {\n            const textDocument = event.textDocument;\n            // We already know about this document. This can happen via a tab open.\n            if (this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                return;\n            }\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n            }\n        }));\n        disposables.push(tabs.onOpen((opened) => {\n            for (const resource of opened) {\n                // We already know about this document. This can happen via a document open.\n                if (this.diagnosticRequestor.knows(PullState.document, resource)) {\n                    continue;\n                }\n                const uriStr = resource.toString();\n                let textDocument;\n                for (const item of vscode_1.workspace.textDocuments) {\n                    if (uriStr === item.uri.toString()) {\n                        textDocument = item;\n                        break;\n                    }\n                }\n                // In VS Code the event timing is as follows:\n                // 1. tab events are fired.\n                // 2. open document events are fired and internal data structures like\n                //    workspace.textDocuments and Window.activeTextEditor are updated.\n                //\n                // This means: for newly created tab/editors we don't find the underlying\n                // document yet. So we do nothing an rely on the underlying open document event\n                // to be fired.\n                if (textDocument !== undefined && matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                }\n            }\n        }));\n        // Pull all diagnostics for documents that are already open\n        const pulledTextDocuments = new Set();\n        for (const textDocument of vscode_1.workspace.textDocuments) {\n            if (matches(textDocument)) {\n                this.diagnosticRequestor.pull(textDocument, () => { addToBackgroundIfNeeded(textDocument); });\n                pulledTextDocuments.add(textDocument.uri.toString());\n            }\n        }\n        // Pull all tabs if not already pulled as text document\n        if (diagnosticPullOptions.onTabs === true) {\n            for (const resource of tabs.getTabResources()) {\n                if (!pulledTextDocuments.has(resource.toString()) && matches(resource)) {\n                    this.diagnosticRequestor.pull(resource, () => { addToBackgroundIfNeeded(resource); });\n                }\n            }\n        }\n        // We don't need to pull on tab open since we will receive a document open as well later on\n        // and that event allows us to use a document for a match check which will have a set\n        // language id.\n        if (diagnosticPullOptions.onChange === true) {\n            const changeFeature = client.getFeature(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.method);\n            disposables.push(changeFeature.onNotificationSent(async (event) => {\n                const textDocument = event.textDocument;\n                if ((diagnosticPullOptions.filter === undefined || !diagnosticPullOptions.filter(textDocument, DiagnosticPullMode.onType)) && this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument, () => { this.backgroundScheduler.trigger(); });\n                }\n            }));\n        }\n        if (diagnosticPullOptions.onSave === true) {\n            const saveFeature = client.getFeature(vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.method);\n            disposables.push(saveFeature.onNotificationSent((event) => {\n                const textDocument = event.textDocument;\n                if ((diagnosticPullOptions.filter === undefined || !diagnosticPullOptions.filter(textDocument, DiagnosticPullMode.onSave)) && this.diagnosticRequestor.knows(PullState.document, textDocument)) {\n                    this.diagnosticRequestor.pull(event.textDocument, () => { this.backgroundScheduler.trigger(); });\n                }\n            }));\n        }\n        // When the document closes clear things up\n        const closeFeature = client.getFeature(vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.method);\n        disposables.push(closeFeature.onNotificationSent((event) => {\n            this.cleanUpDocument(event.textDocument);\n        }));\n        // Same when a tabs closes.\n        tabs.onClose((closed) => {\n            for (const document of closed) {\n                this.cleanUpDocument(document);\n            }\n        });\n        // We received a did change from the server.\n        this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(() => {\n            for (const textDocument of vscode_1.workspace.textDocuments) {\n                if (matches(textDocument)) {\n                    this.diagnosticRequestor.pull(textDocument);\n                }\n            }\n        });\n        // da348dc5-c30a-4515-9d98-31ff3be38d14 is the test UUID to test the middle ware. So don't auto trigger pulls.\n        if (options.workspaceDiagnostics === true && options.identifier !== 'da348dc5-c30a-4515-9d98-31ff3be38d14') {\n            this.diagnosticRequestor.pullWorkspace();\n        }\n        this.disposable = vscode_1.Disposable.from(...disposables, this.backgroundScheduler, this.diagnosticRequestor);\n    }\n    get onDidChangeDiagnosticsEmitter() {\n        return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter;\n    }\n    get diagnostics() {\n        return this.diagnosticRequestor.provider;\n    }\n    cleanUpDocument(document) {\n        if (this.diagnosticRequestor.knows(PullState.document, document)) {\n            this.diagnosticRequestor.forgetDocument(document);\n            this.backgroundScheduler.remove(document);\n        }\n    }\n}\nclass DiagnosticFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentDiagnosticRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let capability = ensure(ensure(capabilities, 'textDocument'), 'diagnostic');\n        capability.dynamicRegistration = true;\n        // We first need to decide how a UI will look with related documents.\n        // An easy implementation would be to only show related diagnostics for\n        // the active editor.\n        capability.relatedDocumentSupport = false;\n        ensure(ensure(capabilities, 'workspace'), 'diagnostics').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.DiagnosticRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeDiagnosticsEmitter.fire();\n            }\n        });\n        let [id, options] = this.getRegistration(documentSelector, capabilities.diagnosticProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    clear() {\n        if (this.tabs !== undefined) {\n            this.tabs.dispose();\n            this.tabs = undefined;\n        }\n        super.clear();\n    }\n    registerLanguageProvider(options) {\n        if (this.tabs === undefined) {\n            this.tabs = new Tabs();\n        }\n        const provider = new DiagnosticFeatureProviderImpl(this._client, this.tabs, options);\n        return [provider.disposable, provider];\n    }\n}\nexports.DiagnosticFeature = DiagnosticFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NotebookDocumentSyncFeature = void 0;\nconst vscode = require(\"vscode\");\nconst minimatch = require(\"minimatch\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nvar Converter;\n(function (Converter) {\n    let c2p;\n    (function (c2p) {\n        function asVersionedNotebookDocumentIdentifier(notebookDocument, base) {\n            return {\n                version: notebookDocument.version,\n                uri: base.asUri(notebookDocument.uri)\n            };\n        }\n        c2p.asVersionedNotebookDocumentIdentifier = asVersionedNotebookDocumentIdentifier;\n        function asNotebookDocument(notebookDocument, cells, base) {\n            const result = proto.NotebookDocument.create(base.asUri(notebookDocument.uri), notebookDocument.notebookType, notebookDocument.version, asNotebookCells(cells, base));\n            if (Object.keys(notebookDocument.metadata).length > 0) {\n                result.metadata = asMetadata(notebookDocument.metadata);\n            }\n            return result;\n        }\n        c2p.asNotebookDocument = asNotebookDocument;\n        function asNotebookCells(cells, base) {\n            return cells.map(cell => asNotebookCell(cell, base));\n        }\n        c2p.asNotebookCells = asNotebookCells;\n        function asMetadata(metadata) {\n            const seen = new Set();\n            return deepCopy(seen, metadata);\n        }\n        c2p.asMetadata = asMetadata;\n        function asNotebookCell(cell, base) {\n            const result = proto.NotebookCell.create(asNotebookCellKind(cell.kind), base.asUri(cell.document.uri));\n            if (Object.keys(cell.metadata).length > 0) {\n                result.metadata = asMetadata(cell.metadata);\n            }\n            if (cell.executionSummary !== undefined && (Is.number(cell.executionSummary.executionOrder) && Is.boolean(cell.executionSummary.success))) {\n                result.executionSummary = {\n                    executionOrder: cell.executionSummary.executionOrder,\n                    success: cell.executionSummary.success\n                };\n            }\n            return result;\n        }\n        c2p.asNotebookCell = asNotebookCell;\n        function asNotebookCellKind(kind) {\n            switch (kind) {\n                case vscode.NotebookCellKind.Markup:\n                    return proto.NotebookCellKind.Markup;\n                case vscode.NotebookCellKind.Code:\n                    return proto.NotebookCellKind.Code;\n            }\n        }\n        function deepCopy(seen, value) {\n            if (seen.has(value)) {\n                throw new Error(`Can't deep copy cyclic structures.`);\n            }\n            if (Array.isArray(value)) {\n                const result = [];\n                for (const elem of value) {\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result.push(deepCopy(seen, elem));\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result.push(elem);\n                    }\n                }\n                return result;\n            }\n            else {\n                const props = Object.keys(value);\n                const result = Object.create(null);\n                for (const prop of props) {\n                    const elem = value[prop];\n                    if (elem !== null && typeof elem === 'object' || Array.isArray(elem)) {\n                        result[prop] = deepCopy(seen, elem);\n                    }\n                    else {\n                        if (elem instanceof RegExp) {\n                            throw new Error(`Can't transfer regular expressions to the server`);\n                        }\n                        result[prop] = elem;\n                    }\n                }\n                return result;\n            }\n        }\n        function asTextContentChange(event, base) {\n            const params = base.asChangeTextDocumentParams(event, event.document.uri, event.document.version);\n            return { document: params.textDocument, changes: params.contentChanges };\n        }\n        c2p.asTextContentChange = asTextContentChange;\n        function asNotebookDocumentChangeEvent(event, base) {\n            const result = Object.create(null);\n            if (event.metadata) {\n                result.metadata = Converter.c2p.asMetadata(event.metadata);\n            }\n            if (event.cells !== undefined) {\n                const cells = Object.create(null);\n                const changedCells = event.cells;\n                if (changedCells.structure) {\n                    cells.structure = {\n                        array: {\n                            start: changedCells.structure.array.start,\n                            deleteCount: changedCells.structure.array.deleteCount,\n                            cells: changedCells.structure.array.cells !== undefined ? changedCells.structure.array.cells.map(cell => Converter.c2p.asNotebookCell(cell, base)) : undefined\n                        },\n                        didOpen: changedCells.structure.didOpen !== undefined\n                            ? changedCells.structure.didOpen.map(cell => base.asOpenTextDocumentParams(cell.document).textDocument)\n                            : undefined,\n                        didClose: changedCells.structure.didClose !== undefined\n                            ? changedCells.structure.didClose.map(cell => base.asCloseTextDocumentParams(cell.document).textDocument)\n                            : undefined\n                    };\n                }\n                if (changedCells.data !== undefined) {\n                    cells.data = changedCells.data.map(cell => Converter.c2p.asNotebookCell(cell, base));\n                }\n                if (changedCells.textContent !== undefined) {\n                    cells.textContent = changedCells.textContent.map(event => Converter.c2p.asTextContentChange(event, base));\n                }\n                if (Object.keys(cells).length > 0) {\n                    result.cells = cells;\n                }\n            }\n            return result;\n        }\n        c2p.asNotebookDocumentChangeEvent = asNotebookDocumentChangeEvent;\n    })(c2p = Converter.c2p || (Converter.c2p = {}));\n})(Converter || (Converter = {}));\nvar $NotebookCell;\n(function ($NotebookCell) {\n    function computeDiff(originalCells, modifiedCells, compareMetadata) {\n        const originalLength = originalCells.length;\n        const modifiedLength = modifiedCells.length;\n        let startIndex = 0;\n        while (startIndex < modifiedLength && startIndex < originalLength && equals(originalCells[startIndex], modifiedCells[startIndex], compareMetadata)) {\n            startIndex++;\n        }\n        if (startIndex < modifiedLength && startIndex < originalLength) {\n            let originalEndIndex = originalLength - 1;\n            let modifiedEndIndex = modifiedLength - 1;\n            while (originalEndIndex >= 0 && modifiedEndIndex >= 0 && equals(originalCells[originalEndIndex], modifiedCells[modifiedEndIndex], compareMetadata)) {\n                originalEndIndex--;\n                modifiedEndIndex--;\n            }\n            const deleteCount = (originalEndIndex + 1) - startIndex;\n            const newCells = startIndex === modifiedEndIndex + 1 ? undefined : modifiedCells.slice(startIndex, modifiedEndIndex + 1);\n            return newCells !== undefined ? { start: startIndex, deleteCount, cells: newCells } : { start: startIndex, deleteCount };\n        }\n        else if (startIndex < modifiedLength) {\n            return { start: startIndex, deleteCount: 0, cells: modifiedCells.slice(startIndex) };\n        }\n        else if (startIndex < originalLength) {\n            return { start: startIndex, deleteCount: originalLength - startIndex };\n        }\n        else {\n            // The two arrays are the same.\n            return undefined;\n        }\n    }\n    $NotebookCell.computeDiff = computeDiff;\n    /**\n     * We only sync kind, document, execution and metadata to the server. So we only need to compare those.\n     */\n    function equals(one, other, compareMetaData = true) {\n        if (one.kind !== other.kind || one.document.uri.toString() !== other.document.uri.toString() || one.document.languageId !== other.document.languageId ||\n            !equalsExecution(one.executionSummary, other.executionSummary)) {\n            return false;\n        }\n        return !compareMetaData || (compareMetaData && equalsMetadata(one.metadata, other.metadata));\n    }\n    function equalsExecution(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.executionOrder === other.executionOrder && one.success === other.success && equalsTiming(one.timing, other.timing);\n    }\n    function equalsTiming(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === undefined || other === undefined) {\n            return false;\n        }\n        return one.startTime === other.startTime && one.endTime === other.endTime;\n    }\n    function equalsMetadata(one, other) {\n        if (one === other) {\n            return true;\n        }\n        if (one === null || one === undefined || other === null || other === undefined) {\n            return false;\n        }\n        if (typeof one !== typeof other) {\n            return false;\n        }\n        if (typeof one !== 'object') {\n            return false;\n        }\n        const oneArray = Array.isArray(one);\n        const otherArray = Array.isArray(other);\n        if (oneArray !== otherArray) {\n            return false;\n        }\n        if (oneArray && otherArray) {\n            if (one.length !== other.length) {\n                return false;\n            }\n            for (let i = 0; i < one.length; i++) {\n                if (!equalsMetadata(one[i], other[i])) {\n                    return false;\n                }\n            }\n        }\n        if (isObjectLiteral(one) && isObjectLiteral(other)) {\n            const oneKeys = Object.keys(one);\n            const otherKeys = Object.keys(other);\n            if (oneKeys.length !== otherKeys.length) {\n                return false;\n            }\n            oneKeys.sort();\n            otherKeys.sort();\n            if (!equalsMetadata(oneKeys, otherKeys)) {\n                return false;\n            }\n            for (let i = 0; i < oneKeys.length; i++) {\n                const prop = oneKeys[i];\n                if (!equalsMetadata(one[prop], other[prop])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    function isObjectLiteral(value) {\n        return value !== null && typeof value === 'object';\n    }\n    $NotebookCell.isObjectLiteral = isObjectLiteral;\n})($NotebookCell || ($NotebookCell = {}));\nvar $NotebookDocumentFilter;\n(function ($NotebookDocumentFilter) {\n    function matchNotebook(filter, notebookDocument) {\n        if (typeof filter === 'string') {\n            return filter === '*' || notebookDocument.notebookType === filter;\n        }\n        if (filter.notebookType !== undefined && filter.notebookType !== '*' && notebookDocument.notebookType !== filter.notebookType) {\n            return false;\n        }\n        const uri = notebookDocument.uri;\n        if (filter.scheme !== undefined && filter.scheme !== '*' && uri.scheme !== filter.scheme) {\n            return false;\n        }\n        if (filter.pattern !== undefined) {\n            const matcher = new minimatch.Minimatch(filter.pattern, { noext: true });\n            if (!matcher.makeRe()) {\n                return false;\n            }\n            if (!matcher.match(uri.fsPath)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    $NotebookDocumentFilter.matchNotebook = matchNotebook;\n})($NotebookDocumentFilter || ($NotebookDocumentFilter = {}));\nvar $NotebookDocumentSyncOptions;\n(function ($NotebookDocumentSyncOptions) {\n    function asDocumentSelector(options) {\n        const selector = options.notebookSelector;\n        const result = [];\n        for (const element of selector) {\n            const notebookType = (typeof element.notebook === 'string' ? element.notebook : element.notebook?.notebookType) ?? '*';\n            const scheme = (typeof element.notebook === 'string') ? undefined : element.notebook?.scheme;\n            const pattern = (typeof element.notebook === 'string') ? undefined : element.notebook?.pattern;\n            if (element.cells !== undefined) {\n                for (const cell of element.cells) {\n                    result.push(asDocumentFilter(notebookType, scheme, pattern, cell.language));\n                }\n            }\n            else {\n                result.push(asDocumentFilter(notebookType, scheme, pattern, undefined));\n            }\n        }\n        return result;\n    }\n    $NotebookDocumentSyncOptions.asDocumentSelector = asDocumentSelector;\n    function asDocumentFilter(notebookType, scheme, pattern, language) {\n        return scheme === undefined && pattern === undefined\n            ? { notebook: notebookType, language }\n            : { notebook: { notebookType, scheme, pattern }, language };\n    }\n})($NotebookDocumentSyncOptions || ($NotebookDocumentSyncOptions = {}));\nvar SyncInfo;\n(function (SyncInfo) {\n    function create(cells) {\n        return {\n            cells,\n            uris: new Set(cells.map(cell => cell.document.uri.toString()))\n        };\n    }\n    SyncInfo.create = create;\n})(SyncInfo || (SyncInfo = {}));\nclass NotebookDocumentSyncFeatureProvider {\n    constructor(client, options) {\n        this.client = client;\n        this.options = options;\n        this.notebookSyncInfo = new Map();\n        this.notebookDidOpen = new Set();\n        this.disposables = [];\n        this.selector = client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n        // open\n        vscode.workspace.onDidOpenNotebookDocument((notebookDocument) => {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }, undefined, this.disposables);\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            this.notebookDidOpen.add(notebookDocument.uri.toString());\n            this.didOpen(notebookDocument);\n        }\n        // Notebook document changed.\n        vscode.workspace.onDidChangeNotebookDocument(event => this.didChangeNotebookDocument(event), undefined, this.disposables);\n        //save\n        if (this.options.save === true) {\n            vscode.workspace.onDidSaveNotebookDocument(notebookDocument => this.didSave(notebookDocument), undefined, this.disposables);\n        }\n        // close\n        vscode.workspace.onDidCloseNotebookDocument((notebookDocument) => {\n            this.didClose(notebookDocument);\n            this.notebookDidOpen.delete(notebookDocument.uri.toString());\n        }, undefined, this.disposables);\n    }\n    getState() {\n        for (const notebook of vscode.workspace.notebookDocuments) {\n            const matchingCells = this.getMatchingCells(notebook);\n            if (matchingCells !== undefined) {\n                return { kind: 'document', id: '$internal', registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: '$internal', registrations: true, matches: false };\n    }\n    get mode() {\n        return 'notebook';\n    }\n    handles(textDocument) {\n        return vscode.languages.match(this.selector, textDocument) > 0;\n    }\n    didOpenNotebookCellTextDocument(notebookDocument, cell) {\n        if (vscode.languages.match(this.selector, cell.document) === 0) {\n            return;\n        }\n        if (!this.notebookDidOpen.has(notebookDocument.uri.toString())) {\n            // We have never received an open notification for the notebook document.\n            // VS Code guarantees that we first get cell document open and then\n            // notebook open. So simply wait for the notebook open.\n            return;\n        }\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        // In VS Code we receive a notebook open before a cell document open.\n        // The document and the cell is synced.\n        const cellMatches = this.cellMatches(notebookDocument, cell);\n        if (syncInfo !== undefined) {\n            const cellIsSynced = syncInfo.uris.has(cell.document.uri.toString());\n            if ((cellMatches && cellIsSynced) || (!cellMatches && !cellIsSynced)) {\n                // The cell doesn't match and was not synced or it matches and is synced.\n                // In both cases nothing to do.\n                //\n                // Note that if the language mode of a document changes we remove the\n                // cell and add it back to update the language mode on the server side.\n                return;\n            }\n            if (cellMatches) {\n                // don't use cells from above since there might be more matching cells in the notebook\n                // Since we had a matching cell above we will have matching cells now.\n                const matchingCells = this.getMatchingCells(notebookDocument);\n                if (matchingCells !== undefined) {\n                    const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                    if (event !== undefined) {\n                        this.doSendChange(event, matchingCells).catch(() => { });\n                    }\n                }\n            }\n        }\n        else {\n            // No sync info. But we have a open event for the notebook document\n            // itself. If the cell matches then we need to send an open with\n            // exactly that cell.\n            if (cellMatches) {\n                this.doSendOpen(notebookDocument, [cell]).catch(() => { });\n            }\n        }\n    }\n    didChangeNotebookCellTextDocument(notebookDocument, event) {\n        // No match with the selector\n        if (vscode.languages.match(this.selector, event.document) === 0) {\n            return;\n        }\n        this.doSendChange({\n            notebook: notebookDocument,\n            cells: { textContent: [event] }\n        }, undefined).catch(() => { });\n    }\n    didCloseNotebookCellTextDocument(notebookDocument, cell) {\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        if (syncInfo === undefined) {\n            // The notebook document got never synced. So it doesn't matter if a cell\n            // document closes.\n            return;\n        }\n        const cellUri = cell.document.uri;\n        const index = syncInfo.cells.findIndex((item) => item.document.uri.toString() === cellUri.toString());\n        if (index === -1) {\n            // The cell never got synced or it got deleted and we now received the document\n            // close event.\n            return;\n        }\n        if (index === 0 && syncInfo.cells.length === 1) {\n            // The last cell. Close the notebook document in the server.\n            this.doSendClose(notebookDocument, syncInfo.cells).catch(() => { });\n        }\n        else {\n            const newCells = syncInfo.cells.slice();\n            const deleted = newCells.splice(index, 1);\n            this.doSendChange({\n                notebook: notebookDocument,\n                cells: {\n                    structure: {\n                        array: { start: index, deleteCount: 1 },\n                        didClose: deleted\n                    }\n                }\n            }, newCells).catch(() => { });\n        }\n    }\n    dispose() {\n        for (const disposable of this.disposables) {\n            disposable.dispose();\n        }\n    }\n    didOpen(notebookDocument, matchingCells = this.getMatchingCells(notebookDocument), syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString())) {\n        if (syncInfo !== undefined) {\n            if (matchingCells !== undefined) {\n                const event = this.asNotebookDocumentChangeEvent(notebookDocument, undefined, syncInfo, matchingCells);\n                if (event !== undefined) {\n                    this.doSendChange(event, matchingCells).catch(() => { });\n                }\n            }\n            else {\n                this.doSendClose(notebookDocument, []).catch(() => { });\n            }\n        }\n        else {\n            // Check if we need to sync the notebook document.\n            if (matchingCells === undefined) {\n                return;\n            }\n            this.doSendOpen(notebookDocument, matchingCells).catch(() => { });\n        }\n    }\n    didChangeNotebookDocument(event) {\n        const notebookDocument = event.notebook;\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        if (syncInfo === undefined) {\n            // We have no changes to the cells. Since the notebook wasn't synced\n            // it will not be synced now.\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            // Check if we have new matching cells.\n            const cells = this.getMatchingCells(notebookDocument);\n            // No matching cells and the notebook never synced. So still no need\n            // to sync it.\n            if (cells === undefined) {\n                return;\n            }\n            // Open the notebook document and ignore the rest of the changes\n            // this the notebooks will be synced with the correct settings.\n            this.didOpen(notebookDocument, cells, syncInfo);\n        }\n        else {\n            // The notebook is synced. First check if we have no matching\n            // cells anymore and if so close the notebook\n            const cells = this.getMatchingCells(notebookDocument);\n            if (cells === undefined) {\n                this.didClose(notebookDocument, syncInfo);\n                return;\n            }\n            const newEvent = this.asNotebookDocumentChangeEvent(event.notebook, event, syncInfo, cells);\n            if (newEvent !== undefined) {\n                this.doSendChange(newEvent, cells).catch(() => { });\n            }\n        }\n    }\n    didSave(notebookDocument) {\n        const syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString());\n        if (syncInfo === undefined) {\n            return;\n        }\n        this.doSendSave(notebookDocument).catch(() => { });\n    }\n    didClose(notebookDocument, syncInfo = this.notebookSyncInfo.get(notebookDocument.uri.toString())) {\n        if (syncInfo === undefined) {\n            return;\n        }\n        const syncedCells = notebookDocument.getCells().filter(cell => syncInfo.uris.has(cell.document.uri.toString()));\n        this.doSendClose(notebookDocument, syncedCells).catch(() => { });\n    }\n    async sendDidOpenNotebookDocument(notebookDocument) {\n        const cells = this.getMatchingCells(notebookDocument);\n        if (cells === undefined) {\n            return;\n        }\n        return this.doSendOpen(notebookDocument, cells);\n    }\n    async doSendOpen(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            const nb = Converter.c2p.asNotebookDocument(notebookDocument, cells, this.client.code2ProtocolConverter);\n            const cellDocuments = cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentItem(cell.document));\n            try {\n                await this.client.sendNotification(proto.DidOpenNotebookDocumentNotification.type, {\n                    notebookDocument: nb,\n                    cellTextDocuments: cellDocuments\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidOpenNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.set(notebookDocument.uri.toString(), SyncInfo.create(cells));\n        return middleware?.didOpen !== undefined ? middleware.didOpen(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    async sendDidChangeNotebookDocument(event) {\n        return this.doSendChange(event, undefined);\n    }\n    async doSendChange(event, cells = this.getMatchingCells(event.notebook)) {\n        const send = async (event) => {\n            try {\n                await this.client.sendNotification(proto.DidChangeNotebookDocumentNotification.type, {\n                    notebookDocument: Converter.c2p.asVersionedNotebookDocumentIdentifier(event.notebook, this.client.code2ProtocolConverter),\n                    change: Converter.c2p.asNotebookDocumentChangeEvent(event, this.client.code2ProtocolConverter)\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidChangeNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        if (event.cells?.structure !== undefined) {\n            this.notebookSyncInfo.set(event.notebook.uri.toString(), SyncInfo.create(cells ?? []));\n        }\n        return middleware?.didChange !== undefined ? middleware?.didChange(event, send) : send(event);\n    }\n    async sendDidSaveNotebookDocument(notebookDocument) {\n        return this.doSendSave(notebookDocument);\n    }\n    async doSendSave(notebookDocument) {\n        const send = async (notebookDocument) => {\n            try {\n                await this.client.sendNotification(proto.DidSaveNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) }\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidSaveNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        return middleware?.didSave !== undefined ? middleware.didSave(notebookDocument, send) : send(notebookDocument);\n    }\n    async sendDidCloseNotebookDocument(notebookDocument) {\n        return this.doSendClose(notebookDocument, this.getMatchingCells(notebookDocument) ?? []);\n    }\n    async doSendClose(notebookDocument, cells) {\n        const send = async (notebookDocument, cells) => {\n            try {\n                await this.client.sendNotification(proto.DidCloseNotebookDocumentNotification.type, {\n                    notebookDocument: { uri: this.client.code2ProtocolConverter.asUri(notebookDocument.uri) },\n                    cellTextDocuments: cells.map(cell => this.client.code2ProtocolConverter.asTextDocumentIdentifier(cell.document))\n                });\n            }\n            catch (error) {\n                this.client.error('Sending DidCloseNotebookDocumentNotification failed', error);\n                throw error;\n            }\n        };\n        const middleware = this.client.middleware?.notebooks;\n        this.notebookSyncInfo.delete(notebookDocument.uri.toString());\n        return middleware?.didClose !== undefined ? middleware.didClose(notebookDocument, cells, send) : send(notebookDocument, cells);\n    }\n    asNotebookDocumentChangeEvent(notebook, event, syncInfo, matchingCells) {\n        if (event !== undefined && event.notebook !== notebook) {\n            throw new Error('Notebook must be identical');\n        }\n        const result = {\n            notebook: notebook\n        };\n        if (event?.metadata !== undefined) {\n            result.metadata = Converter.c2p.asMetadata(event.metadata);\n        }\n        let matchingCellsSet;\n        if (event?.cellChanges !== undefined && event.cellChanges.length > 0) {\n            const data = [];\n            // Only consider the new matching cells.\n            matchingCellsSet = new Set(matchingCells.map(cell => cell.document.uri.toString()));\n            for (const cellChange of event.cellChanges) {\n                if (matchingCellsSet.has(cellChange.cell.document.uri.toString()) && (cellChange.executionSummary !== undefined || cellChange.metadata !== undefined)) {\n                    data.push(cellChange.cell);\n                }\n            }\n            if (data.length > 0) {\n                result.cells = result.cells ?? {};\n                result.cells.data = data;\n            }\n        }\n        if (((event?.contentChanges !== undefined && event.contentChanges.length > 0) || event === undefined) && syncInfo !== undefined && matchingCells !== undefined) {\n            // We still have matching cells. Check if the cell changes\n            // affect the notebook on the server side.\n            const oldCells = syncInfo.cells;\n            const newCells = matchingCells;\n            // meta data changes are reported using on the cell itself. So we can ignore comparing\n            // it which has a positive effect on performance.\n            const diff = $NotebookCell.computeDiff(oldCells, newCells, false);\n            let addedCells;\n            let removedCells;\n            if (diff !== undefined) {\n                addedCells = diff.cells === undefined\n                    ? new Map()\n                    : new Map(diff.cells.map(cell => [cell.document.uri.toString(), cell]));\n                removedCells = diff.deleteCount === 0\n                    ? new Map()\n                    : new Map(oldCells.slice(diff.start, diff.start + diff.deleteCount).map(cell => [cell.document.uri.toString(), cell]));\n                // Remove the onces that got deleted and inserted again.\n                for (const key of Array.from(removedCells.keys())) {\n                    if (addedCells.has(key)) {\n                        removedCells.delete(key);\n                        addedCells.delete(key);\n                    }\n                }\n                result.cells = result.cells ?? {};\n                const didOpen = [];\n                const didClose = [];\n                if (addedCells.size > 0 || removedCells.size > 0) {\n                    for (const cell of addedCells.values()) {\n                        didOpen.push(cell);\n                    }\n                    for (const cell of removedCells.values()) {\n                        didClose.push(cell);\n                    }\n                }\n                result.cells.structure = {\n                    array: diff,\n                    didOpen,\n                    didClose\n                };\n            }\n        }\n        // The notebook is a property as well.\n        return Object.keys(result).length > 1 ? result : undefined;\n    }\n    getMatchingCells(notebookDocument, cells = notebookDocument.getCells()) {\n        if (this.options.notebookSelector === undefined) {\n            return undefined;\n        }\n        for (const item of this.options.notebookSelector) {\n            if (item.notebook === undefined || $NotebookDocumentFilter.matchNotebook(item.notebook, notebookDocument)) {\n                const filtered = this.filterCells(notebookDocument, cells, item.cells);\n                return filtered.length === 0 ? undefined : filtered;\n            }\n        }\n        return undefined;\n    }\n    cellMatches(notebookDocument, cell) {\n        const cells = this.getMatchingCells(notebookDocument, [cell]);\n        return cells !== undefined && cells[0] === cell;\n    }\n    filterCells(notebookDocument, cells, cellSelector) {\n        const filtered = cellSelector !== undefined ? cells.filter((cell) => {\n            const cellLanguage = cell.document.languageId;\n            return cellSelector.some((filter => (filter.language === '*' || cellLanguage === filter.language)));\n        }) : cells;\n        return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells === 'function'\n            ? this.client.clientOptions.notebookDocumentOptions.filterCells(notebookDocument, filtered)\n            : filtered;\n    }\n}\nclass NotebookDocumentSyncFeature {\n    constructor(client) {\n        this.client = client;\n        this.registrations = new Map();\n        this.registrationType = proto.NotebookDocumentSyncRegistrationType.type;\n        // We don't receive an event for cells where the document changes its language mode\n        // Since we allow servers to filter on the language mode we fire such an event ourselves.\n        vscode.workspace.onDidOpenTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didOpenNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n        vscode.workspace.onDidChangeTextDocument((event) => {\n            if (event.contentChanges.length === 0) {\n                return;\n            }\n            const textDocument = event.document;\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            const [notebookDocument,] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didChangeNotebookCellTextDocument(notebookDocument, event);\n                }\n            }\n        });\n        vscode.workspace.onDidCloseTextDocument((textDocument) => {\n            if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n                return;\n            }\n            // There are two cases when we receive a close for a text document\n            // 1: the cell got removed. This is handled in `onDidChangeNotebookCells`\n            // 2: the language mode of a cell changed. This keeps the URI stable so\n            //    we will still find the cell and the notebook document.\n            const [notebookDocument, notebookCell] = this.findNotebookDocumentAndCell(textDocument);\n            if (notebookDocument === undefined || notebookCell === undefined) {\n                return;\n            }\n            for (const provider of this.registrations.values()) {\n                if (provider instanceof NotebookDocumentSyncFeatureProvider) {\n                    provider.didCloseNotebookCellTextDocument(notebookDocument, notebookCell);\n                }\n            }\n        });\n    }\n    getState() {\n        if (this.registrations.size === 0) {\n            return { kind: 'document', id: this.registrationType.method, registrations: false, matches: false };\n        }\n        for (const provider of this.registrations.values()) {\n            const state = provider.getState();\n            if (state.kind === 'document' && state.registrations === true && state.matches === true) {\n                return { kind: 'document', id: this.registrationType.method, registrations: true, matches: true };\n            }\n        }\n        return { kind: 'document', id: this.registrationType.method, registrations: true, matches: false };\n    }\n    fillClientCapabilities(capabilities) {\n        const synchronization = ensure(ensure(capabilities, 'notebookDocument'), 'synchronization');\n        synchronization.dynamicRegistration = true;\n        synchronization.executionSummarySupport = true;\n    }\n    preInitialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        this.dedicatedChannel = this.client.protocol2CodeConverter.asDocumentSelector($NotebookDocumentSyncOptions.asDocumentSelector(options));\n    }\n    initialize(capabilities) {\n        const options = capabilities.notebookDocumentSync;\n        if (options === undefined) {\n            return;\n        }\n        const id = options.id ?? UUID.generateUuid();\n        this.register({ id, registerOptions: options });\n    }\n    register(data) {\n        const provider = new NotebookDocumentSyncFeatureProvider(this.client, data.registerOptions);\n        this.registrations.set(data.id, provider);\n    }\n    unregister(id) {\n        const provider = this.registrations.get(id);\n        provider && provider.dispose();\n    }\n    clear() {\n        for (const provider of this.registrations.values()) {\n            provider.dispose();\n        }\n        this.registrations.clear();\n    }\n    handles(textDocument) {\n        if (textDocument.uri.scheme !== NotebookDocumentSyncFeature.CellScheme) {\n            return false;\n        }\n        if (this.dedicatedChannel !== undefined && vscode.languages.match(this.dedicatedChannel, textDocument) > 0) {\n            return true;\n        }\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(textDocument)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getProvider(notebookCell) {\n        for (const provider of this.registrations.values()) {\n            if (provider.handles(notebookCell.document)) {\n                return provider;\n            }\n        }\n        return undefined;\n    }\n    findNotebookDocumentAndCell(textDocument) {\n        const uri = textDocument.uri.toString();\n        for (const notebookDocument of vscode.workspace.notebookDocuments) {\n            for (const cell of notebookDocument.getCells()) {\n                if (cell.document.uri.toString() === uri) {\n                    return [notebookDocument, cell];\n                }\n            }\n        }\n        return [undefined, undefined];\n    }\n}\nexports.NotebookDocumentSyncFeature = NotebookDocumentSyncFeature;\nNotebookDocumentSyncFeature.CellScheme = 'vscode-notebook-cell';\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SyncConfigurationFeature = exports.toJSONObject = exports.ConfigurationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst Is = require(\"./utils/is\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\n/**\n * Configuration pull model. From server to client.\n */\nclass ConfigurationFeature {\n    constructor(client) {\n        this._client = client;\n    }\n    getState() {\n        return { kind: 'static' };\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.configuration = true;\n    }\n    initialize() {\n        let client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.ConfigurationRequest.type, (params, token) => {\n            let configuration = (params) => {\n                let result = [];\n                for (let item of params.items) {\n                    let resource = item.scopeUri !== void 0 && item.scopeUri !== null ? this._client.protocol2CodeConverter.asUri(item.scopeUri) : undefined;\n                    result.push(this.getConfiguration(resource, item.section !== null ? item.section : undefined));\n                }\n                return result;\n            };\n            let middleware = client.middleware.workspace;\n            return middleware && middleware.configuration\n                ? middleware.configuration(params, token, configuration)\n                : configuration(params, token);\n        });\n    }\n    getConfiguration(resource, section) {\n        let result = null;\n        if (section) {\n            let index = section.lastIndexOf('.');\n            if (index === -1) {\n                result = toJSONObject(vscode_1.workspace.getConfiguration(undefined, resource).get(section));\n            }\n            else {\n                let config = vscode_1.workspace.getConfiguration(section.substr(0, index), resource);\n                if (config) {\n                    result = toJSONObject(config.get(section.substr(index + 1)));\n                }\n            }\n        }\n        else {\n            let config = vscode_1.workspace.getConfiguration(undefined, resource);\n            result = {};\n            for (let key of Object.keys(config)) {\n                if (config.has(key)) {\n                    result[key] = toJSONObject(config.get(key));\n                }\n            }\n        }\n        if (result === undefined) {\n            result = null;\n        }\n        return result;\n    }\n    clear() {\n    }\n}\nexports.ConfigurationFeature = ConfigurationFeature;\nfunction toJSONObject(obj) {\n    if (obj) {\n        if (Array.isArray(obj)) {\n            return obj.map(toJSONObject);\n        }\n        else if (typeof obj === 'object') {\n            const res = Object.create(null);\n            for (const key in obj) {\n                if (Object.prototype.hasOwnProperty.call(obj, key)) {\n                    res[key] = toJSONObject(obj[key]);\n                }\n            }\n            return res;\n        }\n    }\n    return obj;\n}\nexports.toJSONObject = toJSONObject;\nclass SyncConfigurationFeature {\n    constructor(_client) {\n        this._client = _client;\n        this.isCleared = false;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeConfiguration').dynamicRegistration = true;\n    }\n    initialize() {\n        this.isCleared = false;\n        let section = this._client.clientOptions.synchronize?.configurationSection;\n        if (section !== undefined) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: {\n                    section: section\n                }\n            });\n        }\n    }\n    register(data) {\n        let disposable = vscode_1.workspace.onDidChangeConfiguration((event) => {\n            this.onDidChangeConfiguration(data.registerOptions.section, event);\n        });\n        this._listeners.set(data.id, disposable);\n        if (data.registerOptions.section !== undefined) {\n            this.onDidChangeConfiguration(data.registerOptions.section, undefined);\n        }\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable) {\n            this._listeners.delete(id);\n            disposable.dispose();\n        }\n    }\n    clear() {\n        for (const disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n        this.isCleared = true;\n    }\n    onDidChangeConfiguration(configurationSection, event) {\n        if (this.isCleared) {\n            return;\n        }\n        let sections;\n        if (Is.string(configurationSection)) {\n            sections = [configurationSection];\n        }\n        else {\n            sections = configurationSection;\n        }\n        if (sections !== undefined && event !== undefined) {\n            let affected = sections.some((section) => event.affectsConfiguration(section));\n            if (!affected) {\n                return;\n            }\n        }\n        const didChangeConfiguration = async (sections) => {\n            if (sections === undefined) {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: null });\n            }\n            else {\n                return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type, { settings: this.extractSettingsInformation(sections) });\n            }\n        };\n        let middleware = this._client.middleware.workspace?.didChangeConfiguration;\n        (middleware ? middleware(sections, didChangeConfiguration) : didChangeConfiguration(sections)).catch((error) => {\n            this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeConfigurationNotification.type.method} failed`, error);\n        });\n    }\n    extractSettingsInformation(keys) {\n        function ensurePath(config, path) {\n            let current = config;\n            for (let i = 0; i < path.length - 1; i++) {\n                let obj = current[path[i]];\n                if (!obj) {\n                    obj = Object.create(null);\n                    current[path[i]] = obj;\n                }\n                current = obj;\n            }\n            return current;\n        }\n        let resource = this._client.clientOptions.workspaceFolder\n            ? this._client.clientOptions.workspaceFolder.uri\n            : undefined;\n        let result = Object.create(null);\n        for (let i = 0; i < keys.length; i++) {\n            let key = keys[i];\n            let index = key.indexOf('.');\n            let config = null;\n            if (index >= 0) {\n                config = vscode_1.workspace.getConfiguration(key.substr(0, index), resource).get(key.substr(index + 1));\n            }\n            else {\n                config = vscode_1.workspace.getConfiguration(undefined, resource).get(key);\n            }\n            if (config) {\n                let path = keys[i].split('.');\n                ensurePath(result, path)[path[path.length - 1]] = toJSONObject(config);\n            }\n        }\n        return result;\n    }\n}\nexports.SyncConfigurationFeature = SyncConfigurationFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DidSaveTextDocumentFeature = exports.WillSaveWaitUntilFeature = exports.WillSaveFeature = exports.DidChangeTextDocumentFeature = exports.DidCloseTextDocumentFeature = exports.DidOpenTextDocumentFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DidOpenTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    constructor(client, syncedDocuments) {\n        super(client, vscode_1.workspace.onDidOpenTextDocument, vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type, () => client.middleware.didOpen, (textDocument) => client.code2ProtocolConverter.asOpenTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n    }\n    get openDocuments() {\n        return this._syncedDocuments.values();\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.type;\n    }\n    register(data) {\n        super.register(data);\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        const documentSelector = this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector);\n        vscode_1.workspace.textDocuments.forEach((textDocument) => {\n            const uri = textDocument.uri.toString();\n            if (this._syncedDocuments.has(uri)) {\n                return;\n            }\n            if (vscode_1.languages.match(documentSelector, textDocument) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                const middleware = this._client.middleware;\n                const didOpen = (textDocument) => {\n                    return this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                (middleware.didOpen ? middleware.didOpen(textDocument, didOpen) : didOpen(textDocument)).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                });\n                this._syncedDocuments.set(uri, textDocument);\n            }\n        });\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.set(textDocument.uri.toString(), textDocument);\n        super.notificationSent(textDocument, type, params);\n    }\n}\nexports.DidOpenTextDocumentFeature = DidOpenTextDocumentFeature;\nclass DidCloseTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    constructor(client, syncedDocuments, pendingTextDocumentChanges) {\n        super(client, vscode_1.workspace.onDidCloseTextDocument, vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type, () => client.middleware.didClose, (textDocument) => client.code2ProtocolConverter.asCloseTextDocumentParams(textDocument), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._syncedDocuments = syncedDocuments;\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidCloseTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.openClose) {\n            this.register({ id: UUID.generateUuid(), registerOptions: { documentSelector: documentSelector } });\n        }\n    }\n    async callback(data) {\n        await super.callback(data);\n        this._pendingTextDocumentChanges.delete(data.uri.toString());\n    }\n    getTextDocument(data) {\n        return data;\n    }\n    notificationSent(textDocument, type, params) {\n        this._syncedDocuments.delete(textDocument.uri.toString());\n        super.notificationSent(textDocument, type, params);\n    }\n    unregister(id) {\n        const selector = this._selectors.get(id);\n        // The super call removed the selector from the map\n        // of selectors.\n        super.unregister(id);\n        const selectors = this._selectors.values();\n        this._syncedDocuments.forEach((textDocument) => {\n            if (vscode_1.languages.match(selector, textDocument) > 0 && !this._selectorFilter(selectors, textDocument) && !this._client.hasDedicatedTextSynchronizationFeature(textDocument)) {\n                let middleware = this._client.middleware;\n                let didClose = (textDocument) => {\n                    return this._client.sendNotification(this._type, this._createParams(textDocument));\n                };\n                this._syncedDocuments.delete(textDocument.uri.toString());\n                (middleware.didClose ? middleware.didClose(textDocument, didClose) : didClose(textDocument)).catch((error) => {\n                    this._client.error(`Sending document notification ${this._type.method} failed`, error);\n                });\n            }\n        });\n    }\n}\nexports.DidCloseTextDocumentFeature = DidCloseTextDocumentFeature;\nclass DidChangeTextDocumentFeature extends features_1.DynamicDocumentFeature {\n    constructor(client, pendingTextDocumentChanges) {\n        super(client);\n        this._changeData = new Map();\n        this._onNotificationSent = new vscode_1.EventEmitter();\n        this._onPendingChangeAdded = new vscode_1.EventEmitter();\n        this._pendingTextDocumentChanges = pendingTextDocumentChanges;\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n    }\n    get onNotificationSent() {\n        return this._onNotificationSent.event;\n    }\n    get onPendingChangeAdded() {\n        return this._onPendingChangeAdded.event;\n    }\n    get syncKind() {\n        return this._syncKind;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.change !== undefined && textDocumentSyncOptions.change !== vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, { syncKind: textDocumentSyncOptions.change })\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onDidChangeTextDocument(this.callback, this);\n        }\n        this._changeData.set(data.id, {\n            syncKind: data.registerOptions.syncKind,\n            documentSelector: this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector),\n        });\n        this.updateSyncKind(data.registerOptions.syncKind);\n    }\n    *getDocumentSelectors() {\n        for (const data of this._changeData.values()) {\n            yield data.documentSelector;\n        }\n    }\n    async callback(event) {\n        // Text document changes are send for dirty changes as well. We don't\n        // have dirty / un-dirty events in the LSP so we ignore content changes\n        // with length zero.\n        if (event.contentChanges.length === 0) {\n            return;\n        }\n        // We need to capture the URI and version here since they might change on the text document\n        // until we reach did `didChange` call since the middleware support async execution.\n        const uri = event.document.uri;\n        const version = event.document.version;\n        const promises = [];\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, event.document) > 0 && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n                const middleware = this._client.middleware;\n                if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental) {\n                    const didChange = async (event) => {\n                        const params = this._client.code2ProtocolConverter.asChangeTextDocumentParams(event, uri, version);\n                        await this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                        this.notificationSent(event.document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n                else if (changeData.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    const didChange = async (event) => {\n                        const eventUri = event.document.uri.toString();\n                        this._pendingTextDocumentChanges.set(eventUri, event.document);\n                        this._onPendingChangeAdded.fire();\n                    };\n                    promises.push(middleware.didChange ? middleware.didChange(event, event => didChange(event)) : didChange(event));\n                }\n            }\n        }\n        return Promise.all(promises).then(undefined, (error) => {\n            this._client.error(`Sending document notification ${vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type.method} failed`, error);\n            throw error;\n        });\n    }\n    notificationSent(textDocument, type, params) {\n        this._onNotificationSent.fire({ textDocument, type, params });\n    }\n    unregister(id) {\n        this._changeData.delete(id);\n        if (this._changeData.size === 0) {\n            if (this._listener) {\n                this._listener.dispose();\n                this._listener = undefined;\n            }\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        }\n        else {\n            this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n            for (const changeData of this._changeData.values()) {\n                this.updateSyncKind(changeData.syncKind);\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n                    break;\n                }\n            }\n        }\n    }\n    clear() {\n        this._pendingTextDocumentChanges.clear();\n        this._changeData.clear();\n        this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.None;\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getPendingDocumentChanges(excludes) {\n        if (this._pendingTextDocumentChanges.size === 0) {\n            return [];\n        }\n        let result;\n        if (excludes.size === 0) {\n            result = Array.from(this._pendingTextDocumentChanges.values());\n            this._pendingTextDocumentChanges.clear();\n        }\n        else {\n            result = [];\n            for (const entry of this._pendingTextDocumentChanges) {\n                if (!excludes.has(entry[0])) {\n                    result.push(entry[1]);\n                    this._pendingTextDocumentChanges.delete(entry[0]);\n                }\n            }\n        }\n        return result;\n    }\n    getProvider(document) {\n        for (const changeData of this._changeData.values()) {\n            if (vscode_1.languages.match(changeData.documentSelector, document) > 0) {\n                return {\n                    send: (event) => {\n                        return this.callback(event);\n                    }\n                };\n            }\n        }\n        return undefined;\n    }\n    updateSyncKind(syncKind) {\n        if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            return;\n        }\n        switch (syncKind) {\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Full:\n                this._syncKind = syncKind;\n                break;\n            case vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental:\n                if (this._syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    this._syncKind = vscode_languageserver_protocol_1.TextDocumentSyncKind.Incremental;\n                }\n                break;\n        }\n    }\n}\nexports.DidChangeTextDocumentFeature = DidChangeTextDocumentFeature;\nclass WillSaveFeature extends features_1.TextDocumentEventFeature {\n    constructor(client) {\n        super(client, vscode_1.workspace.onWillSaveTextDocument, vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type, () => client.middleware.willSave, (willSaveEvent) => client.code2ProtocolConverter.asWillSaveTextDocumentParams(willSaveEvent), (event) => event.document, (selectors, willSaveEvent) => features_1.TextDocumentEventFeature.textDocumentFilter(selectors, willSaveEvent.document));\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSave) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    getTextDocument(data) {\n        return data.document;\n    }\n}\nexports.WillSaveFeature = WillSaveFeature;\nclass WillSaveWaitUntilFeature extends features_1.DynamicDocumentFeature {\n    constructor(client) {\n        super(client);\n        this._selectors = new Map();\n    }\n    getDocumentSelectors() {\n        return this._selectors.values();\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        let value = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization');\n        value.willSaveWaitUntil = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.willSaveWaitUntil) {\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: { documentSelector: documentSelector }\n            });\n        }\n    }\n    register(data) {\n        if (!data.registerOptions.documentSelector) {\n            return;\n        }\n        if (!this._listener) {\n            this._listener = vscode_1.workspace.onWillSaveTextDocument(this.callback, this);\n        }\n        this._selectors.set(data.id, this._client.protocol2CodeConverter.asDocumentSelector(data.registerOptions.documentSelector));\n    }\n    callback(event) {\n        if (features_1.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(), event.document) && !this._client.hasDedicatedTextSynchronizationFeature(event.document)) {\n            let middleware = this._client.middleware;\n            let willSaveWaitUntil = (event) => {\n                return this._client.sendRequest(vscode_languageserver_protocol_1.WillSaveTextDocumentWaitUntilRequest.type, this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(event)).then(async (edits) => {\n                    let vEdits = await this._client.protocol2CodeConverter.asTextEdits(edits);\n                    return vEdits === undefined ? [] : vEdits;\n                });\n            };\n            event.waitUntil(middleware.willSaveWaitUntil\n                ? middleware.willSaveWaitUntil(event, willSaveWaitUntil)\n                : willSaveWaitUntil(event));\n        }\n    }\n    unregister(id) {\n        this._selectors.delete(id);\n        if (this._selectors.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._selectors.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n}\nexports.WillSaveWaitUntilFeature = WillSaveWaitUntilFeature;\nclass DidSaveTextDocumentFeature extends features_1.TextDocumentEventFeature {\n    constructor(client) {\n        super(client, vscode_1.workspace.onDidSaveTextDocument, vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type, () => client.middleware.didSave, (textDocument) => client.code2ProtocolConverter.asSaveTextDocumentParams(textDocument, this._includeText), (data) => data, features_1.TextDocumentEventFeature.textDocumentFilter);\n        this._includeText = false;\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidSaveTextDocumentNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'synchronization').didSave = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const textDocumentSyncOptions = capabilities.resolvedTextDocumentSync;\n        if (documentSelector && textDocumentSyncOptions && textDocumentSyncOptions.save) {\n            const saveOptions = typeof textDocumentSyncOptions.save === 'boolean'\n                ? { includeText: false }\n                : { includeText: !!textDocumentSyncOptions.save.includeText };\n            this.register({\n                id: UUID.generateUuid(),\n                registerOptions: Object.assign({}, { documentSelector: documentSelector }, saveOptions)\n            });\n        }\n    }\n    register(data) {\n        this._includeText = !!data.registerOptions.includeText;\n        super.register(data);\n    }\n    getTextDocument(data) {\n        return data;\n    }\n}\nexports.DidSaveTextDocumentFeature = DidSaveTextDocumentFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nconst SupportedCompletionItemKinds = [\n    vscode_languageserver_protocol_1.CompletionItemKind.Text,\n    vscode_languageserver_protocol_1.CompletionItemKind.Method,\n    vscode_languageserver_protocol_1.CompletionItemKind.Function,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constructor,\n    vscode_languageserver_protocol_1.CompletionItemKind.Field,\n    vscode_languageserver_protocol_1.CompletionItemKind.Variable,\n    vscode_languageserver_protocol_1.CompletionItemKind.Class,\n    vscode_languageserver_protocol_1.CompletionItemKind.Interface,\n    vscode_languageserver_protocol_1.CompletionItemKind.Module,\n    vscode_languageserver_protocol_1.CompletionItemKind.Property,\n    vscode_languageserver_protocol_1.CompletionItemKind.Unit,\n    vscode_languageserver_protocol_1.CompletionItemKind.Value,\n    vscode_languageserver_protocol_1.CompletionItemKind.Enum,\n    vscode_languageserver_protocol_1.CompletionItemKind.Keyword,\n    vscode_languageserver_protocol_1.CompletionItemKind.Snippet,\n    vscode_languageserver_protocol_1.CompletionItemKind.Color,\n    vscode_languageserver_protocol_1.CompletionItemKind.File,\n    vscode_languageserver_protocol_1.CompletionItemKind.Reference,\n    vscode_languageserver_protocol_1.CompletionItemKind.Folder,\n    vscode_languageserver_protocol_1.CompletionItemKind.EnumMember,\n    vscode_languageserver_protocol_1.CompletionItemKind.Constant,\n    vscode_languageserver_protocol_1.CompletionItemKind.Struct,\n    vscode_languageserver_protocol_1.CompletionItemKind.Event,\n    vscode_languageserver_protocol_1.CompletionItemKind.Operator,\n    vscode_languageserver_protocol_1.CompletionItemKind.TypeParameter\n];\nclass CompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CompletionRequest.type);\n        this.labelDetailsSupport = new Map();\n    }\n    fillClientCapabilities(capabilities) {\n        let completion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'completion');\n        completion.dynamicRegistration = true;\n        completion.contextSupport = true;\n        completion.completionItem = {\n            snippetSupport: true,\n            commitCharactersSupport: true,\n            documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText],\n            deprecatedSupport: true,\n            preselectSupport: true,\n            tagSupport: { valueSet: [vscode_languageserver_protocol_1.CompletionItemTag.Deprecated] },\n            insertReplaceSupport: true,\n            resolveSupport: {\n                properties: ['documentation', 'detail', 'additionalTextEdits']\n            },\n            insertTextModeSupport: { valueSet: [vscode_languageserver_protocol_1.InsertTextMode.asIs, vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation] },\n            labelDetailsSupport: true\n        };\n        completion.insertTextMode = vscode_languageserver_protocol_1.InsertTextMode.adjustIndentation;\n        completion.completionItemKind = { valueSet: SupportedCompletionItemKinds };\n        completion.completionList = {\n            itemDefaults: [\n                'commitCharacters', 'editRange', 'insertTextFormat', 'insertTextMode', 'data'\n            ]\n        };\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.completionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options, id) {\n        this.labelDetailsSupport.set(id, !!options.completionItem?.labelDetailsSupport);\n        const triggerCharacters = options.triggerCharacters ?? [];\n        const defaultCommitCharacters = options.allCommitCharacters;\n        const selector = options.documentSelector;\n        const provider = {\n            provideCompletionItems: (document, position, token, context) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CompletionRequest.type, client.code2ProtocolConverter.asCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCompletionResult(result, defaultCommitCharacters, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideCompletionItem\n                    ? middleware.provideCompletionItem(document, position, context, token, provideCompletionItems)\n                    : provideCompletionItems(document, position, context, token);\n            },\n            resolveCompletionItem: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCompletionItem = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, client.code2ProtocolConverter.asCompletionItem(item, !!this.labelDetailsSupport.get(id)), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asCompletionItem(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CompletionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCompletionItem\n                        ? middleware.resolveCompletionItem(item, token, resolveCompletionItem)\n                        : resolveCompletionItem(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, ...triggerCharacters), provider];\n    }\n}\nexports.CompletionItemFeature = CompletionItemFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HoverFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass HoverFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.HoverRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const hoverCapability = ((0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'hover'));\n        hoverCapability.dynamicRegistration = true;\n        hoverCapability.contentFormat = [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText];\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.hoverProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideHover: (document, position, token) => {\n                const client = this._client;\n                const provideHover = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.HoverRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asHover(result);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.HoverRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideHover\n                    ? middleware.provideHover(document, position, token, provideHover)\n                    : provideHover(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.HoverFeature = HoverFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let definitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'definition');\n        definitionSupport.dynamicRegistration = true;\n        definitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.definitionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDefinition\n                    ? middleware.provideDefinition(document, position, token, provideDefinition)\n                    : provideDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DefinitionFeature = DefinitionFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SignatureHelpFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass SignatureHelpFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SignatureHelpRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let config = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'signatureHelp');\n        config.dynamicRegistration = true;\n        config.signatureInformation = { documentationFormat: [vscode_languageserver_protocol_1.MarkupKind.Markdown, vscode_languageserver_protocol_1.MarkupKind.PlainText] };\n        config.signatureInformation.parameterInformation = { labelOffsetSupport: true };\n        config.signatureInformation.activeParameterSupport = true;\n        config.contextSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.signatureHelpProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideSignatureHelp: (document, position, token, context) => {\n                const client = this._client;\n                const providerSignatureHelp = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, client.code2ProtocolConverter.asSignatureHelpParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSignatureHelp(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SignatureHelpRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSignatureHelp\n                    ? middleware.provideSignatureHelp(document, position, context, token, providerSignatureHelp)\n                    : providerSignatureHelp(document, position, context, token);\n            }\n        };\n        return [this.registerProvider(options, provider), provider];\n    }\n    registerProvider(options, provider) {\n        const selector = this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector);\n        if (options.retriggerCharacters === undefined) {\n            const triggerCharacters = options.triggerCharacters || [];\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, ...triggerCharacters);\n        }\n        else {\n            const metaData = {\n                triggerCharacters: options.triggerCharacters || [],\n                retriggerCharacters: options.retriggerCharacters || []\n            };\n            return vscode_1.languages.registerSignatureHelpProvider(selector, provider, metaData);\n        }\n    }\n}\nexports.SignatureHelpFeature = SignatureHelpFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentHighlightFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DocumentHighlightFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentHighlightRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentHighlight').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentHighlightProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentHighlights: (document, position, token) => {\n                const client = this._client;\n                const _provideDocumentHighlights = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentHighlights(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentHighlightRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentHighlights\n                    ? middleware.provideDocumentHighlights(document, position, token, _provideDocumentHighlights)\n                    : _provideDocumentHighlights(document, position, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentHighlightFeature = DocumentHighlightFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentSymbolFeature = exports.SupportedSymbolTags = exports.SupportedSymbolKinds = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nexports.SupportedSymbolKinds = [\n    vscode_languageserver_protocol_1.SymbolKind.File,\n    vscode_languageserver_protocol_1.SymbolKind.Module,\n    vscode_languageserver_protocol_1.SymbolKind.Namespace,\n    vscode_languageserver_protocol_1.SymbolKind.Package,\n    vscode_languageserver_protocol_1.SymbolKind.Class,\n    vscode_languageserver_protocol_1.SymbolKind.Method,\n    vscode_languageserver_protocol_1.SymbolKind.Property,\n    vscode_languageserver_protocol_1.SymbolKind.Field,\n    vscode_languageserver_protocol_1.SymbolKind.Constructor,\n    vscode_languageserver_protocol_1.SymbolKind.Enum,\n    vscode_languageserver_protocol_1.SymbolKind.Interface,\n    vscode_languageserver_protocol_1.SymbolKind.Function,\n    vscode_languageserver_protocol_1.SymbolKind.Variable,\n    vscode_languageserver_protocol_1.SymbolKind.Constant,\n    vscode_languageserver_protocol_1.SymbolKind.String,\n    vscode_languageserver_protocol_1.SymbolKind.Number,\n    vscode_languageserver_protocol_1.SymbolKind.Boolean,\n    vscode_languageserver_protocol_1.SymbolKind.Array,\n    vscode_languageserver_protocol_1.SymbolKind.Object,\n    vscode_languageserver_protocol_1.SymbolKind.Key,\n    vscode_languageserver_protocol_1.SymbolKind.Null,\n    vscode_languageserver_protocol_1.SymbolKind.EnumMember,\n    vscode_languageserver_protocol_1.SymbolKind.Struct,\n    vscode_languageserver_protocol_1.SymbolKind.Event,\n    vscode_languageserver_protocol_1.SymbolKind.Operator,\n    vscode_languageserver_protocol_1.SymbolKind.TypeParameter\n];\nexports.SupportedSymbolTags = [\n    vscode_languageserver_protocol_1.SymbolTag.Deprecated\n];\nclass DocumentSymbolFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentSymbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: exports.SupportedSymbolKinds\n        };\n        symbolCapabilities.hierarchicalDocumentSymbolSupport = true;\n        symbolCapabilities.tagSupport = {\n            valueSet: exports.SupportedSymbolTags\n        };\n        symbolCapabilities.labelSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentSymbolProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentSymbols: (document, token) => {\n                const client = this._client;\n                const _provideDocumentSymbols = async (document, token) => {\n                    try {\n                        const data = await client.sendRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, client.code2ProtocolConverter.asDocumentSymbolParams(document), token);\n                        if (token.isCancellationRequested || data === undefined || data === null) {\n                            return null;\n                        }\n                        if (data.length === 0) {\n                            return [];\n                        }\n                        else {\n                            const first = data[0];\n                            if (vscode_languageserver_protocol_1.DocumentSymbol.is(first)) {\n                                return await client.protocol2CodeConverter.asDocumentSymbols(data, token);\n                            }\n                            else {\n                                return await client.protocol2CodeConverter.asSymbolInformations(data, token);\n                            }\n                        }\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentSymbolRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentSymbols\n                    ? middleware.provideDocumentSymbols(document, token, _provideDocumentSymbols)\n                    : _provideDocumentSymbols(document, token);\n            }\n        };\n        const metaData = options.label !== undefined ? { label: options.label } : undefined;\n        return [vscode_1.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, metaData), provider];\n    }\n}\nexports.DocumentSymbolFeature = DocumentSymbolFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceSymbolFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst UUID = require(\"./utils/uuid\");\nclass WorkspaceSymbolFeature extends features_1.WorkspaceFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let symbolCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'symbol');\n        symbolCapabilities.dynamicRegistration = true;\n        symbolCapabilities.symbolKind = {\n            valueSet: documentSymbol_1.SupportedSymbolKinds\n        };\n        symbolCapabilities.tagSupport = {\n            valueSet: documentSymbol_1.SupportedSymbolTags\n        };\n        symbolCapabilities.resolveSupport = { properties: ['location.range'] };\n    }\n    initialize(capabilities) {\n        if (!capabilities.workspaceSymbolProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: capabilities.workspaceSymbolProvider === true ? { workDoneProgress: false } : capabilities.workspaceSymbolProvider\n        });\n    }\n    registerLanguageProvider(options) {\n        const provider = {\n            provideWorkspaceSymbols: (query, token) => {\n                const client = this._client;\n                const provideWorkspaceSymbols = (query, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, { query }, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSymbolInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideWorkspaceSymbols\n                    ? middleware.provideWorkspaceSymbols(query, token, provideWorkspaceSymbols)\n                    : provideWorkspaceSymbols(query, token);\n            },\n            resolveWorkspaceSymbol: options.resolveProvider === true\n                ? (item, token) => {\n                    const client = this._client;\n                    const resolveWorkspaceSymbol = (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, client.code2ProtocolConverter.asWorkspaceSymbol(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSymbolInformation(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.type, token, error, null);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveWorkspaceSymbol\n                        ? middleware.resolveWorkspaceSymbol(item, token, resolveWorkspaceSymbol)\n                        : resolveWorkspaceSymbol(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerWorkspaceSymbolProvider(provider), provider];\n    }\n}\nexports.WorkspaceSymbolFeature = WorkspaceSymbolFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReferencesFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass ReferencesFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ReferencesRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'references').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.referencesProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideReferences: (document, position, options, token) => {\n                const client = this._client;\n                const _providerReferences = (document, position, options, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, client.code2ProtocolConverter.asReferenceParams(document, position, options), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asReferences(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ReferencesRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideReferences\n                    ? middleware.provideReferences(document, position, options, token, _providerReferences)\n                    : _providerReferences(document, position, options, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ReferencesFeature = ReferencesFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeActionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nclass CodeActionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeActionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const cap = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeAction');\n        cap.dynamicRegistration = true;\n        cap.isPreferredSupport = true;\n        cap.disabledSupport = true;\n        cap.dataSupport = true;\n        // We can only resolve the edit property.\n        cap.resolveSupport = {\n            properties: ['edit']\n        };\n        cap.codeActionLiteralSupport = {\n            codeActionKind: {\n                valueSet: [\n                    vscode_languageserver_protocol_1.CodeActionKind.Empty,\n                    vscode_languageserver_protocol_1.CodeActionKind.QuickFix,\n                    vscode_languageserver_protocol_1.CodeActionKind.Refactor,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorExtract,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorInline,\n                    vscode_languageserver_protocol_1.CodeActionKind.RefactorRewrite,\n                    vscode_languageserver_protocol_1.CodeActionKind.Source,\n                    vscode_languageserver_protocol_1.CodeActionKind.SourceOrganizeImports\n                ]\n            }\n        };\n        cap.honorsChangeAnnotations = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeActionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideCodeActions: (document, range, context, token) => {\n                const client = this._client;\n                const _provideCodeActions = async (document, range, context, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        context: client.code2ProtocolConverter.asCodeActionContextSync(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, params, token).then((values) => {\n                        if (token.isCancellationRequested || values === null || values === undefined) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeActionResult(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeActions\n                    ? middleware.provideCodeActions(document, range, context, token, _provideCodeActions)\n                    : _provideCodeActions(document, range, context, token);\n            },\n            resolveCodeAction: options.resolveProvider\n                ? (item, token) => {\n                    const client = this._client;\n                    const middleware = this._client.middleware;\n                    const resolveCodeAction = async (item, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, client.code2ProtocolConverter.asCodeActionSync(item), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return item;\n                            }\n                            return client.protocol2CodeConverter.asCodeAction(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeActionResolveRequest.type, token, error, item);\n                        });\n                    };\n                    return middleware.resolveCodeAction\n                        ? middleware.resolveCodeAction(item, token, resolveCodeAction)\n                        : resolveCodeAction(item, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, (options.codeActionKinds\n                ? { providedCodeActionKinds: this._client.protocol2CodeConverter.asCodeActionKinds(options.codeActionKinds) }\n                : undefined)), provider];\n    }\n}\nexports.CodeActionFeature = CodeActionFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CodeLensFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nclass CodeLensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CodeLensRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'codeLens').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'codeLens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.CodeLensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeCodeLensEmitter.fire();\n            }\n        });\n        const options = this.getRegistrationOptions(documentSelector, capabilities.codeLensProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeCodeLenses: eventEmitter.event,\n            provideCodeLenses: (document, token) => {\n                const client = this._client;\n                const provideCodeLenses = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, client.code2ProtocolConverter.asCodeLensParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asCodeLenses(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideCodeLenses\n                    ? middleware.provideCodeLenses(document, token, provideCodeLenses)\n                    : provideCodeLenses(document, token);\n            },\n            resolveCodeLens: (options.resolveProvider)\n                ? (codeLens, token) => {\n                    const client = this._client;\n                    const resolveCodeLens = (codeLens, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, client.code2ProtocolConverter.asCodeLens(codeLens), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return codeLens;\n                            }\n                            return client.protocol2CodeConverter.asCodeLens(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.CodeLensResolveRequest.type, token, error, codeLens);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveCodeLens\n                        ? middleware.resolveCodeLens(codeLens, token, resolveCodeLens)\n                        : resolveCodeLens(codeLens, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider, onDidChangeCodeLensEmitter: eventEmitter }];\n    }\n}\nexports.CodeLensFeature = CodeLensFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentOnTypeFormattingFeature = exports.DocumentRangeFormattingFeature = exports.DocumentFormattingFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nvar FileFormattingOptions;\n(function (FileFormattingOptions) {\n    function fromConfiguration(document) {\n        const filesConfig = vscode_1.workspace.getConfiguration('files', document);\n        return {\n            trimTrailingWhitespace: filesConfig.get('trimTrailingWhitespace'),\n            trimFinalNewlines: filesConfig.get('trimFinalNewlines'),\n            insertFinalNewline: filesConfig.get('insertFinalNewline'),\n        };\n    }\n    FileFormattingOptions.fromConfiguration = fromConfiguration;\n})(FileFormattingOptions || (FileFormattingOptions = {}));\nclass DocumentFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'formatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentFormattingEdits: (document, options, token) => {\n                const client = this._client;\n                const provideDocumentFormattingEdits = (document, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentFormattingEdits\n                    ? middleware.provideDocumentFormattingEdits(document, options, token, provideDocumentFormattingEdits)\n                    : provideDocumentFormattingEdits(document, options, token);\n            }\n        };\n        return [vscode_1.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentFormattingFeature = DocumentFormattingFeature;\nclass DocumentRangeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rangeFormatting');\n        capability.dynamicRegistration = true;\n        capability.rangesSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentRangeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentRangeFormattingEdits: (document, range, options, token) => {\n                const client = this._client;\n                const provideDocumentRangeFormattingEdits = (document, range, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(range),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangeFormattingEdits\n                    ? middleware.provideDocumentRangeFormattingEdits(document, range, options, token, provideDocumentRangeFormattingEdits)\n                    : provideDocumentRangeFormattingEdits(document, range, options, token);\n            }\n        };\n        if (options.rangesSupport) {\n            provider.provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                const client = this._client;\n                const provideDocumentRangesFormattingEdits = (document, ranges, options, token) => {\n                    const params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        ranges: client.code2ProtocolConverter.asRanges(ranges),\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentRangesFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentRangesFormattingEdits\n                    ? middleware.provideDocumentRangesFormattingEdits(document, ranges, options, token, provideDocumentRangesFormattingEdits)\n                    : provideDocumentRangesFormattingEdits(document, ranges, options, token);\n            };\n        }\n        return [vscode_1.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentRangeFormattingFeature = DocumentRangeFormattingFeature;\nclass DocumentOnTypeFormattingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'onTypeFormatting').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentOnTypeFormattingProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideOnTypeFormattingEdits: (document, position, ch, options, token) => {\n                const client = this._client;\n                const provideOnTypeFormattingEdits = (document, position, ch, options, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        ch: ch,\n                        options: client.code2ProtocolConverter.asFormattingOptions(options, FileFormattingOptions.fromConfiguration(document))\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asTextEdits(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentOnTypeFormattingRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideOnTypeFormattingEdits\n                    ? middleware.provideOnTypeFormattingEdits(document, position, ch, options, token, provideOnTypeFormattingEdits)\n                    : provideOnTypeFormattingEdits(document, position, ch, options, token);\n            }\n        };\n        const moreTriggerCharacter = options.moreTriggerCharacter || [];\n        return [vscode_1.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider, options.firstTriggerCharacter, ...moreTriggerCharacter), provider];\n    }\n}\nexports.DocumentOnTypeFormattingFeature = DocumentOnTypeFormattingFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RenameFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst Is = require(\"./utils/is\");\nconst features_1 = require(\"./features\");\nclass RenameFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.RenameRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let rename = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'rename');\n        rename.dynamicRegistration = true;\n        rename.prepareSupport = true;\n        rename.prepareSupportDefaultBehavior = vscode_languageserver_protocol_1.PrepareSupportDefaultBehavior.Identifier;\n        rename.honorsChangeAnnotations = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.renameProvider);\n        if (!options) {\n            return;\n        }\n        if (Is.boolean(capabilities.renameProvider)) {\n            options.prepareProvider = false;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideRenameEdits: (document, position, newName, token) => {\n                const client = this._client;\n                const provideRenameEdits = (document, position, newName, token) => {\n                    let params = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        position: client.code2ProtocolConverter.asPosition(position),\n                        newName: newName\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.RenameRequest.type, params, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asWorkspaceEdit(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.RenameRequest.type, token, error, null, false);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideRenameEdits\n                    ? middleware.provideRenameEdits(document, position, newName, token, provideRenameEdits)\n                    : provideRenameEdits(document, position, newName, token);\n            },\n            prepareRename: options.prepareProvider\n                ? (document, position, token) => {\n                    const client = this._client;\n                    const prepareRename = (document, position, token) => {\n                        let params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            position: client.code2ProtocolConverter.asPosition(position),\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.PrepareRenameRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            if (vscode_languageserver_protocol_1.Range.is(result)) {\n                                return client.protocol2CodeConverter.asRange(result);\n                            }\n                            else if (this.isDefaultBehavior(result)) {\n                                return result.defaultBehavior === true\n                                    ? null\n                                    : Promise.reject(new Error(`The element can't be renamed.`));\n                            }\n                            else if (result && vscode_languageserver_protocol_1.Range.is(result.range)) {\n                                return {\n                                    range: client.protocol2CodeConverter.asRange(result.range),\n                                    placeholder: result.placeholder\n                                };\n                            }\n                            // To cancel the rename vscode API expects a rejected promise.\n                            return Promise.reject(new Error(`The element can't be renamed.`));\n                        }, (error) => {\n                            if (typeof error.message === 'string') {\n                                throw new Error(error.message);\n                            }\n                            else {\n                                throw new Error(`The element can't be renamed.`);\n                            }\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.prepareRename\n                        ? middleware.prepareRename(document, position, token, prepareRename)\n                        : prepareRename(document, position, token);\n                }\n                : undefined\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n    isDefaultBehavior(value) {\n        const candidate = value;\n        return candidate && Is.boolean(candidate.defaultBehavior);\n    }\n}\nexports.RenameFeature = RenameFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DocumentLinkFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass DocumentLinkFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentLinkRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const documentLinkCapabilities = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'documentLink');\n        documentLinkCapabilities.dynamicRegistration = true;\n        documentLinkCapabilities.tooltipSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.documentLinkProvider);\n        if (!options) {\n            return;\n        }\n        this.register({ id: UUID.generateUuid(), registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDocumentLinks: (document, token) => {\n                const client = this._client;\n                const provideDocumentLinks = (document, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, client.code2ProtocolConverter.asDocumentLinkParams(document), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDocumentLinks(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentLinks\n                    ? middleware.provideDocumentLinks(document, token, provideDocumentLinks)\n                    : provideDocumentLinks(document, token);\n            },\n            resolveDocumentLink: options.resolveProvider\n                ? (link, token) => {\n                    const client = this._client;\n                    let resolveDocumentLink = (link, token) => {\n                        return client.sendRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, client.code2ProtocolConverter.asDocumentLink(link), token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return link;\n                            }\n                            return client.protocol2CodeConverter.asDocumentLink(result);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentLinkResolveRequest.type, token, error, link);\n                        });\n                    };\n                    const middleware = client.middleware;\n                    return middleware.resolveDocumentLink\n                        ? middleware.resolveDocumentLink(link, token, resolveDocumentLink)\n                        : resolveDocumentLink(link, token);\n                }\n                : undefined\n        };\n        return [vscode_1.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.DocumentLinkFeature = DocumentLinkFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExecuteCommandFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nconst features_1 = require(\"./features\");\nclass ExecuteCommandFeature {\n    constructor(client) {\n        this._client = client;\n        this._commands = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._commands.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.ExecuteCommandRequest.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'executeCommand').dynamicRegistration = true;\n    }\n    initialize(capabilities) {\n        if (!capabilities.executeCommandProvider) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: Object.assign({}, capabilities.executeCommandProvider)\n        });\n    }\n    register(data) {\n        const client = this._client;\n        const middleware = client.middleware;\n        const executeCommand = (command, args) => {\n            let params = {\n                command,\n                arguments: args\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, params).then(undefined, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.ExecuteCommandRequest.type, undefined, error, undefined);\n            });\n        };\n        if (data.registerOptions.commands) {\n            const disposables = [];\n            for (const command of data.registerOptions.commands) {\n                disposables.push(vscode_1.commands.registerCommand(command, (...args) => {\n                    return middleware.executeCommand\n                        ? middleware.executeCommand(command, args, executeCommand)\n                        : executeCommand(command, args);\n                }));\n            }\n            this._commands.set(data.id, disposables);\n        }\n    }\n    unregister(id) {\n        let disposables = this._commands.get(id);\n        if (disposables) {\n            disposables.forEach(disposable => disposable.dispose());\n        }\n    }\n    clear() {\n        this._commands.forEach((value) => {\n            value.forEach(disposable => disposable.dispose());\n        });\n        this._commands.clear();\n    }\n}\nexports.ExecuteCommandFeature = ExecuteCommandFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FileSystemWatcherFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FileSystemWatcherFeature {\n    constructor(client, notifyFileEvent) {\n        this._client = client;\n        this._notifyFileEvent = notifyFileEvent;\n        this._watchers = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._watchers.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type;\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'didChangeWatchedFiles').relativePatternSupport = true;\n    }\n    initialize(_capabilities, _documentSelector) {\n    }\n    register(data) {\n        if (!Array.isArray(data.registerOptions.watchers)) {\n            return;\n        }\n        const disposables = [];\n        for (const watcher of data.registerOptions.watchers) {\n            const globPattern = this._client.protocol2CodeConverter.asGlobPattern(watcher.globPattern);\n            if (globPattern === undefined) {\n                continue;\n            }\n            let watchCreate = true, watchChange = true, watchDelete = true;\n            if (watcher.kind !== undefined && watcher.kind !== null) {\n                watchCreate = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Create) !== 0;\n                watchChange = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Change) !== 0;\n                watchDelete = (watcher.kind & vscode_languageserver_protocol_1.WatchKind.Delete) !== 0;\n            }\n            const fileSystemWatcher = vscode_1.workspace.createFileSystemWatcher(globPattern, !watchCreate, !watchChange, !watchDelete);\n            this.hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, disposables);\n            disposables.push(fileSystemWatcher);\n        }\n        this._watchers.set(data.id, disposables);\n    }\n    registerRaw(id, fileSystemWatchers) {\n        let disposables = [];\n        for (let fileSystemWatcher of fileSystemWatchers) {\n            this.hookListeners(fileSystemWatcher, true, true, true, disposables);\n        }\n        this._watchers.set(id, disposables);\n    }\n    hookListeners(fileSystemWatcher, watchCreate, watchChange, watchDelete, listeners) {\n        if (watchCreate) {\n            fileSystemWatcher.onDidCreate((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Created\n            }), null, listeners);\n        }\n        if (watchChange) {\n            fileSystemWatcher.onDidChange((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Changed\n            }), null, listeners);\n        }\n        if (watchDelete) {\n            fileSystemWatcher.onDidDelete((resource) => this._notifyFileEvent({\n                uri: this._client.code2ProtocolConverter.asUri(resource),\n                type: vscode_languageserver_protocol_1.FileChangeType.Deleted\n            }), null, listeners);\n        }\n    }\n    unregister(id) {\n        let disposables = this._watchers.get(id);\n        if (disposables) {\n            for (let disposable of disposables) {\n                disposable.dispose();\n            }\n        }\n    }\n    clear() {\n        this._watchers.forEach((disposables) => {\n            for (let disposable of disposables) {\n                disposable.dispose();\n            }\n        });\n        this._watchers.clear();\n    }\n}\nexports.FileSystemWatcherFeature = FileSystemWatcherFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ColorProviderFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ColorProviderFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DocumentColorRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'colorProvider').dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.colorProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideColorPresentations: (color, context, token) => {\n                const client = this._client;\n                const provideColorPresentations = (color, context, token) => {\n                    const requestParams = {\n                        color,\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(context.document),\n                        range: client.code2ProtocolConverter.asRange(context.range)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorPresentations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ColorPresentationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideColorPresentations\n                    ? middleware.provideColorPresentations(color, context, token, provideColorPresentations)\n                    : provideColorPresentations(color, context, token);\n            },\n            provideDocumentColors: (document, token) => {\n                const client = this._client;\n                const provideDocumentColors = (document, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return this._client.protocol2CodeConverter.asColorInformations(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DocumentColorRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDocumentColors\n                    ? middleware.provideDocumentColors(document, token, provideDocumentColors)\n                    : provideDocumentColors(document, token);\n            }\n        };\n        return [vscode_1.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.ColorProviderFeature = ColorProviderFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ImplementationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass ImplementationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.ImplementationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let implementationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'implementation');\n        implementationSupport.dynamicRegistration = true;\n        implementationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.implementationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideImplementation: (document, position, token) => {\n                const client = this._client;\n                const provideImplementation = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.ImplementationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideImplementation\n                    ? middleware.provideImplementation(document, position, token, provideImplementation)\n                    : provideImplementation(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.ImplementationFeature = ImplementationFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeDefinitionFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeDefinitionFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeDefinitionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition').dynamicRegistration = true;\n        let typeDefinitionSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeDefinition');\n        typeDefinitionSupport.dynamicRegistration = true;\n        typeDefinitionSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.typeDefinitionProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideTypeDefinition: (document, position, token) => {\n                const client = this._client;\n                const provideTypeDefinition = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDefinitionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeDefinitionRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideTypeDefinition\n                    ? middleware.provideTypeDefinition(document, position, token, provideTypeDefinition)\n                    : provideTypeDefinition(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.TypeDefinitionFeature = TypeDefinitionFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WorkspaceFoldersFeature = exports.arrayDiff = void 0;\nconst UUID = require(\"./utils/uuid\");\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nfunction access(target, key) {\n    if (target === undefined || target === null) {\n        return undefined;\n    }\n    return target[key];\n}\nfunction arrayDiff(left, right) {\n    return left.filter(element => right.indexOf(element) < 0);\n}\nexports.arrayDiff = arrayDiff;\nclass WorkspaceFoldersFeature {\n    constructor(client) {\n        this._client = client;\n        this._listeners = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this.registrationType.method, registrations: this._listeners.size > 0 };\n    }\n    get registrationType() {\n        return vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type;\n    }\n    fillInitializeParams(params) {\n        const folders = vscode_1.workspace.workspaceFolders;\n        this.initializeWithFolders(folders);\n        if (folders === void 0) {\n            params.workspaceFolders = null;\n        }\n        else {\n            params.workspaceFolders = folders.map(folder => this.asProtocol(folder));\n        }\n    }\n    initializeWithFolders(currentWorkspaceFolders) {\n        this._initialFolders = currentWorkspaceFolders;\n    }\n    fillClientCapabilities(capabilities) {\n        capabilities.workspace = capabilities.workspace || {};\n        capabilities.workspace.workspaceFolders = true;\n    }\n    initialize(capabilities) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.WorkspaceFoldersRequest.type, (token) => {\n            const workspaceFolders = () => {\n                const folders = vscode_1.workspace.workspaceFolders;\n                if (folders === undefined) {\n                    return null;\n                }\n                const result = folders.map((folder) => {\n                    return this.asProtocol(folder);\n                });\n                return result;\n            };\n            const middleware = client.middleware.workspace;\n            return middleware && middleware.workspaceFolders\n                ? middleware.workspaceFolders(token, workspaceFolders)\n                : workspaceFolders(token);\n        });\n        const value = access(access(access(capabilities, 'workspace'), 'workspaceFolders'), 'changeNotifications');\n        let id;\n        if (typeof value === 'string') {\n            id = value;\n        }\n        else if (value === true) {\n            id = UUID.generateUuid();\n        }\n        if (id) {\n            this.register({ id: id, registerOptions: undefined });\n        }\n    }\n    sendInitialEvent(currentWorkspaceFolders) {\n        let promise;\n        if (this._initialFolders && currentWorkspaceFolders) {\n            const removed = arrayDiff(this._initialFolders, currentWorkspaceFolders);\n            const added = arrayDiff(currentWorkspaceFolders, this._initialFolders);\n            if (added.length > 0 || removed.length > 0) {\n                promise = this.doSendEvent(added, removed);\n            }\n        }\n        else if (this._initialFolders) {\n            promise = this.doSendEvent([], this._initialFolders);\n        }\n        else if (currentWorkspaceFolders) {\n            promise = this.doSendEvent(currentWorkspaceFolders, []);\n        }\n        if (promise !== undefined) {\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        }\n    }\n    doSendEvent(addedFolders, removedFolders) {\n        let params = {\n            event: {\n                added: addedFolders.map(folder => this.asProtocol(folder)),\n                removed: removedFolders.map(folder => this.asProtocol(folder))\n            }\n        };\n        return this._client.sendNotification(vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type, params);\n    }\n    register(data) {\n        let id = data.id;\n        let client = this._client;\n        let disposable = vscode_1.workspace.onDidChangeWorkspaceFolders((event) => {\n            let didChangeWorkspaceFolders = (event) => {\n                return this.doSendEvent(event.added, event.removed);\n            };\n            let middleware = client.middleware.workspace;\n            const promise = middleware && middleware.didChangeWorkspaceFolders\n                ? middleware.didChangeWorkspaceFolders(event, didChangeWorkspaceFolders)\n                : didChangeWorkspaceFolders(event);\n            promise.catch((error) => {\n                this._client.error(`Sending notification ${vscode_languageserver_protocol_1.DidChangeWorkspaceFoldersNotification.type.method} failed`, error);\n            });\n        });\n        this._listeners.set(id, disposable);\n        this.sendInitialEvent(vscode_1.workspace.workspaceFolders);\n    }\n    unregister(id) {\n        let disposable = this._listeners.get(id);\n        if (disposable === void 0) {\n            return;\n        }\n        this._listeners.delete(id);\n        disposable.dispose();\n    }\n    clear() {\n        for (let disposable of this._listeners.values()) {\n            disposable.dispose();\n        }\n        this._listeners.clear();\n    }\n    asProtocol(workspaceFolder) {\n        if (workspaceFolder === void 0) {\n            return null;\n        }\n        return { uri: this._client.code2ProtocolConverter.asUri(workspaceFolder.uri), name: workspaceFolder.name };\n    }\n}\nexports.WorkspaceFoldersFeature = WorkspaceFoldersFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FoldingRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass FoldingRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.FoldingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'foldingRange');\n        capability.dynamicRegistration = true;\n        capability.rangeLimit = 5000;\n        capability.lineFoldingOnly = true;\n        capability.foldingRangeKind = { valueSet: [vscode_languageserver_protocol_1.FoldingRangeKind.Comment, vscode_languageserver_protocol_1.FoldingRangeKind.Imports, vscode_languageserver_protocol_1.FoldingRangeKind.Region] };\n        capability.foldingRange = { collapsedText: false };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'foldingRange').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.FoldingRangeRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeFoldingRange.fire();\n            }\n        });\n        let [id, options] = this.getRegistration(documentSelector, capabilities.foldingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeFoldingRanges: eventEmitter.event,\n            provideFoldingRanges: (document, context, token) => {\n                const client = this._client;\n                const provideFoldingRanges = (document, _, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, requestParams, token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asFoldingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.FoldingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideFoldingRanges\n                    ? middleware.provideFoldingRanges(document, context, token, provideFoldingRanges)\n                    : provideFoldingRanges(document, context, token);\n            }\n        };\n        return [vscode_1.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), { provider: provider, onDidChangeFoldingRange: eventEmitter }];\n    }\n}\nexports.FoldingRangeFeature = FoldingRangeFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DeclarationFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass DeclarationFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.DeclarationRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const declarationSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'declaration');\n        declarationSupport.dynamicRegistration = true;\n        declarationSupport.linkSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.declarationProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideDeclaration: (document, position, token) => {\n                const client = this._client;\n                const provideDeclaration = (document, position, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asDeclarationResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.DeclarationRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideDeclaration\n                    ? middleware.provideDeclaration(document, position, token, provideDeclaration)\n                    : provideDeclaration(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.DeclarationFeature = DeclarationFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SelectionRangeFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass SelectionRangeFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SelectionRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'selectionRange');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.selectionRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideSelectionRanges: (document, positions, token) => {\n                const client = this._client;\n                const provideSelectionRanges = async (document, positions, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        positions: client.code2ProtocolConverter.asPositionsSync(positions, token)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, requestParams, token).then((ranges) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asSelectionRanges(ranges, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.SelectionRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideSelectionRanges\n                    ? middleware.provideSelectionRanges(document, positions, token, provideSelectionRanges)\n                    : provideSelectionRanges(document, positions, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.SelectionRangeFeature = SelectionRangeFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProgressFeature = void 0;\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst progressPart_1 = require(\"./progressPart\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = Object.create(null);\n    }\n    return target[key];\n}\nclass ProgressFeature {\n    constructor(_client) {\n        this._client = _client;\n        this.activeParts = new Set();\n    }\n    getState() {\n        return { kind: 'window', id: vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.method, registrations: this.activeParts.size > 0 };\n    }\n    fillClientCapabilities(capabilities) {\n        ensure(capabilities, 'window').workDoneProgress = true;\n    }\n    initialize() {\n        const client = this._client;\n        const deleteHandler = (part) => {\n            this.activeParts.delete(part);\n        };\n        const createHandler = (params) => {\n            this.activeParts.add(new progressPart_1.ProgressPart(this._client, params.token, deleteHandler));\n        };\n        client.onRequest(vscode_languageserver_protocol_1.WorkDoneProgressCreateRequest.type, createHandler);\n    }\n    clear() {\n        for (const part of this.activeParts) {\n            part.done();\n        }\n        this.activeParts.clear();\n    }\n}\nexports.ProgressFeature = ProgressFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CallHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass CallHierarchyProvider {\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareCallHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareCallHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareCallHierarchy\n            ? middleware.prepareCallHierarchy(document, position, token, prepareCallHierarchy)\n            : prepareCallHierarchy(document, position, token);\n    }\n    provideCallHierarchyIncomingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyIncomingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyIncomingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyIncomingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyIncomingCalls\n            ? middleware.provideCallHierarchyIncomingCalls(item, token, provideCallHierarchyIncomingCalls)\n            : provideCallHierarchyIncomingCalls(item, token);\n    }\n    provideCallHierarchyOutgoingCalls(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideCallHierarchyOutgoingCalls = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asCallHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asCallHierarchyOutgoingCalls(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.CallHierarchyOutgoingCallsRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideCallHierarchyOutgoingCalls\n            ? middleware.provideCallHierarchyOutgoingCalls(item, token, provideCallHierarchyOutgoingCalls)\n            : provideCallHierarchyOutgoingCalls(item, token);\n    }\n}\nclass CallHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.CallHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(cap) {\n        const capabilities = cap;\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'callHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.callHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new CallHierarchyProvider(client);\n        return [vscode_1.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.CallHierarchyFeature = CallHierarchyFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SemanticTokensFeature = void 0;\nconst vscode = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst Is = require(\"./utils/is\");\nclass SemanticTokensFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.SemanticTokensRegistrationType.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'semanticTokens');\n        capability.dynamicRegistration = true;\n        capability.tokenTypes = [\n            vscode_languageserver_protocol_1.SemanticTokenTypes.namespace,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.type,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.class,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enum,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.interface,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.struct,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.typeParameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.parameter,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.variable,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.property,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.enumMember,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.event,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.function,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.method,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.macro,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.keyword,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.modifier,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.comment,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.string,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.number,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.regexp,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.operator,\n            vscode_languageserver_protocol_1.SemanticTokenTypes.decorator\n        ];\n        capability.tokenModifiers = [\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.declaration,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.definition,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.readonly,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.static,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.deprecated,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.abstract,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.async,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.modification,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.documentation,\n            vscode_languageserver_protocol_1.SemanticTokenModifiers.defaultLibrary\n        ];\n        capability.formats = [vscode_languageserver_protocol_1.TokenFormat.Relative];\n        capability.requests = {\n            range: true,\n            full: {\n                delta: true\n            }\n        };\n        capability.multilineTokenSupport = false;\n        capability.overlappingTokenSupport = false;\n        capability.serverCancelSupport = true;\n        capability.augmentsSyntaxTokens = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'semanticTokens').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const client = this._client;\n        client.onRequest(vscode_languageserver_protocol_1.SemanticTokensRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeSemanticTokensEmitter.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.semanticTokensProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const fullProvider = Is.boolean(options.full) ? options.full : options.full !== undefined;\n        const hasEditProvider = options.full !== undefined && typeof options.full !== 'boolean' && options.full.delta === true;\n        const eventEmitter = new vscode.EventEmitter();\n        const documentProvider = fullProvider\n            ? {\n                onDidChangeSemanticTokens: eventEmitter.event,\n                provideDocumentSemanticTokens: (document, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentSemanticTokens = (document, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentSemanticTokens\n                        ? middleware.provideDocumentSemanticTokens(document, token, provideDocumentSemanticTokens)\n                        : provideDocumentSemanticTokens(document, token);\n                },\n                provideDocumentSemanticTokensEdits: hasEditProvider\n                    ? (document, previousResultId, token) => {\n                        const client = this._client;\n                        const middleware = client.middleware;\n                        const provideDocumentSemanticTokensEdits = (document, previousResultId, token) => {\n                            const params = {\n                                textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                                previousResultId\n                            };\n                            return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, params, token).then(async (result) => {\n                                if (token.isCancellationRequested) {\n                                    return null;\n                                }\n                                if (vscode_languageserver_protocol_1.SemanticTokens.is(result)) {\n                                    return await client.protocol2CodeConverter.asSemanticTokens(result, token);\n                                }\n                                else {\n                                    return await client.protocol2CodeConverter.asSemanticTokensEdits(result, token);\n                                }\n                            }, (error) => {\n                                return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.type, token, error, null);\n                            });\n                        };\n                        return middleware.provideDocumentSemanticTokensEdits\n                            ? middleware.provideDocumentSemanticTokensEdits(document, previousResultId, token, provideDocumentSemanticTokensEdits)\n                            : provideDocumentSemanticTokensEdits(document, previousResultId, token);\n                    }\n                    : undefined\n            }\n            : undefined;\n        const hasRangeProvider = options.range === true;\n        const rangeProvider = hasRangeProvider\n            ? {\n                provideDocumentRangeSemanticTokens: (document, range, token) => {\n                    const client = this._client;\n                    const middleware = client.middleware;\n                    const provideDocumentRangeSemanticTokens = (document, range, token) => {\n                        const params = {\n                            textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                            range: client.code2ProtocolConverter.asRange(range)\n                        };\n                        return client.sendRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, params, token).then((result) => {\n                            if (token.isCancellationRequested) {\n                                return null;\n                            }\n                            return client.protocol2CodeConverter.asSemanticTokens(result, token);\n                        }, (error) => {\n                            return client.handleFailedRequest(vscode_languageserver_protocol_1.SemanticTokensRangeRequest.type, token, error, null);\n                        });\n                    };\n                    return middleware.provideDocumentRangeSemanticTokens\n                        ? middleware.provideDocumentRangeSemanticTokens(document, range, token, provideDocumentRangeSemanticTokens)\n                        : provideDocumentRangeSemanticTokens(document, range, token);\n                }\n            }\n            : undefined;\n        const disposables = [];\n        const client = this._client;\n        const legend = client.protocol2CodeConverter.asSemanticTokensLegend(options.legend);\n        const documentSelector = client.protocol2CodeConverter.asDocumentSelector(selector);\n        if (documentProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentSemanticTokensProvider(documentSelector, documentProvider, legend));\n        }\n        if (rangeProvider !== undefined) {\n            disposables.push(vscode.languages.registerDocumentRangeSemanticTokensProvider(documentSelector, rangeProvider, legend));\n        }\n        return [new vscode.Disposable(() => disposables.forEach(item => item.dispose())), { range: rangeProvider, full: documentProvider, onDidChangeSemanticTokensEmitter: eventEmitter }];\n    }\n}\nexports.SemanticTokensFeature = SemanticTokensFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WillDeleteFilesFeature = exports.WillRenameFilesFeature = exports.WillCreateFilesFeature = exports.DidDeleteFilesFeature = exports.DidRenameFilesFeature = exports.DidCreateFilesFeature = void 0;\nconst code = require(\"vscode\");\nconst minimatch = require(\"minimatch\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst UUID = require(\"./utils/uuid\");\nfunction ensure(target, key) {\n    if (target[key] === void 0) {\n        target[key] = {};\n    }\n    return target[key];\n}\nfunction access(target, key) {\n    return target[key];\n}\nfunction assign(target, key, value) {\n    target[key] = value;\n}\nclass FileOperationFeature {\n    constructor(client, event, registrationType, clientCapability, serverCapability) {\n        this._client = client;\n        this._event = event;\n        this._registrationType = registrationType;\n        this._clientCapability = clientCapability;\n        this._serverCapability = serverCapability;\n        this._filters = new Map();\n    }\n    getState() {\n        return { kind: 'workspace', id: this._registrationType.method, registrations: this._filters.size > 0 };\n    }\n    filterSize() {\n        return this._filters.size;\n    }\n    get registrationType() {\n        return this._registrationType;\n    }\n    fillClientCapabilities(capabilities) {\n        const value = ensure(ensure(capabilities, 'workspace'), 'fileOperations');\n        // this happens n times but it is the same value so we tolerate this.\n        assign(value, 'dynamicRegistration', true);\n        assign(value, this._clientCapability, true);\n    }\n    initialize(capabilities) {\n        const options = capabilities.workspace?.fileOperations;\n        const capability = options !== undefined ? access(options, this._serverCapability) : undefined;\n        if (capability?.filters !== undefined) {\n            try {\n                this.register({\n                    id: UUID.generateUuid(),\n                    registerOptions: { filters: capability.filters }\n                });\n            }\n            catch (e) {\n                this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${e}`);\n            }\n        }\n    }\n    register(data) {\n        if (!this._listener) {\n            this._listener = this._event(this.send, this);\n        }\n        const minimatchFilter = data.registerOptions.filters.map((filter) => {\n            const matcher = new minimatch.Minimatch(filter.pattern.glob, FileOperationFeature.asMinimatchOptions(filter.pattern.options));\n            if (!matcher.makeRe()) {\n                throw new Error(`Invalid pattern ${filter.pattern.glob}!`);\n            }\n            return { scheme: filter.scheme, matcher, kind: filter.pattern.matches };\n        });\n        this._filters.set(data.id, minimatchFilter);\n    }\n    unregister(id) {\n        this._filters.delete(id);\n        if (this._filters.size === 0 && this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    clear() {\n        this._filters.clear();\n        if (this._listener) {\n            this._listener.dispose();\n            this._listener = undefined;\n        }\n    }\n    getFileType(uri) {\n        return FileOperationFeature.getFileType(uri);\n    }\n    async filter(event, prop) {\n        // (Asynchronously) map each file onto a boolean of whether it matches\n        // any of the globs.\n        const fileMatches = await Promise.all(event.files.map(async (item) => {\n            const uri = prop(item);\n            // Use fsPath to make this consistent with file system watchers but help\n            // minimatch to use '/' instead of `\\\\` if present.\n            const path = uri.fsPath.replace(/\\\\/g, '/');\n            for (const filters of this._filters.values()) {\n                for (const filter of filters) {\n                    if (filter.scheme !== undefined && filter.scheme !== uri.scheme) {\n                        continue;\n                    }\n                    if (filter.matcher.match(path)) {\n                        // The pattern matches. If kind is undefined then everything is ok\n                        if (filter.kind === undefined) {\n                            return true;\n                        }\n                        const fileType = await this.getFileType(uri);\n                        // If we can't determine the file type than we treat it as a match.\n                        // Dropping it would be another alternative.\n                        if (fileType === undefined) {\n                            this._client.error(`Failed to determine file type for ${uri.toString()}.`);\n                            return true;\n                        }\n                        if ((fileType === code.FileType.File && filter.kind === proto.FileOperationPatternKind.file) || (fileType === code.FileType.Directory && filter.kind === proto.FileOperationPatternKind.folder)) {\n                            return true;\n                        }\n                    }\n                    else if (filter.kind === proto.FileOperationPatternKind.folder) {\n                        const fileType = await FileOperationFeature.getFileType(uri);\n                        if (fileType === code.FileType.Directory && filter.matcher.match(`${path}/`)) {\n                            return true;\n                        }\n                    }\n                }\n            }\n            return false;\n        }));\n        // Filter the files to those that matched.\n        const files = event.files.filter((_, index) => fileMatches[index]);\n        return { ...event, files };\n    }\n    static async getFileType(uri) {\n        try {\n            return (await code.workspace.fs.stat(uri)).type;\n        }\n        catch (e) {\n            return undefined;\n        }\n    }\n    static asMinimatchOptions(options) {\n        // The spec doesn't state that dot files don't match. So we make\n        // matching those the default.\n        const result = { dot: true };\n        if (options?.ignoreCase === true) {\n            result.nocase = true;\n        }\n        return result;\n    }\n}\nclass NotificationFileOperationFeature extends FileOperationFeature {\n    constructor(client, event, notificationType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, notificationType, clientCapability, serverCapability);\n        this._notificationType = notificationType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = async (event) => {\n                return this._client.sendNotification(this._notificationType, this._createParams(event));\n            };\n            return this.doSend(filteredEvent, next);\n        }\n    }\n}\nclass CachingNotificationFileOperationFeature extends NotificationFileOperationFeature {\n    constructor() {\n        super(...arguments);\n        this._fsPathFileTypes = new Map();\n    }\n    async getFileType(uri) {\n        const fsPath = uri.fsPath;\n        if (this._fsPathFileTypes.has(fsPath)) {\n            return this._fsPathFileTypes.get(fsPath);\n        }\n        const type = await FileOperationFeature.getFileType(uri);\n        if (type) {\n            this._fsPathFileTypes.set(fsPath, type);\n        }\n        return type;\n    }\n    async cacheFileTypes(event, prop) {\n        // Calling filter will force the matching logic to run. For any item\n        // that requires a getFileType lookup, the overriden getFileType will\n        // be called that will cache the result so that when onDidRename fires,\n        // it can still be checked even though the item no longer exists on disk\n        // in its original location.\n        await this.filter(event, prop);\n    }\n    clearFileTypeCache() {\n        this._fsPathFileTypes.clear();\n    }\n    unregister(id) {\n        super.unregister(id);\n        if (this.filterSize() === 0 && this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n    clear() {\n        super.clear();\n        if (this._willListener) {\n            this._willListener.dispose();\n            this._willListener = undefined;\n        }\n    }\n}\nclass DidCreateFilesFeature extends NotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidCreateFiles, proto.DidCreateFilesNotification.type, 'didCreate', 'didCreate', (i) => i, client.code2ProtocolConverter.asDidCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didCreateFiles\n            ? middleware.didCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidCreateFilesFeature = DidCreateFilesFeature;\nclass DidRenameFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidRenameFiles, proto.DidRenameFilesNotification.type, 'didRename', 'didRename', (i) => i.oldUri, client.code2ProtocolConverter.asDidRenameFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillRenameFiles(this.willRename, this);\n        }\n        super.register(data);\n    }\n    willRename(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i.oldUri));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didRenameFiles\n            ? middleware.didRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidRenameFilesFeature = DidRenameFilesFeature;\nclass DidDeleteFilesFeature extends CachingNotificationFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onDidDeleteFiles, proto.DidDeleteFilesNotification.type, 'didDelete', 'didDelete', (i) => i, client.code2ProtocolConverter.asDidDeleteFilesParams);\n    }\n    register(data) {\n        if (!this._willListener) {\n            this._willListener = code.workspace.onWillDeleteFiles(this.willDelete, this);\n        }\n        super.register(data);\n    }\n    willDelete(e) {\n        e.waitUntil(this.cacheFileTypes(e, (i) => i));\n    }\n    doSend(event, next) {\n        this.clearFileTypeCache();\n        const middleware = this._client.middleware.workspace;\n        return middleware?.didDeleteFiles\n            ? middleware.didDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.DidDeleteFilesFeature = DidDeleteFilesFeature;\nclass RequestFileOperationFeature extends FileOperationFeature {\n    constructor(client, event, requestType, clientCapability, serverCapability, accessUri, createParams) {\n        super(client, event, requestType, clientCapability, serverCapability);\n        this._requestType = requestType;\n        this._accessUri = accessUri;\n        this._createParams = createParams;\n    }\n    async send(originalEvent) {\n        const waitUntil = this.waitUntil(originalEvent);\n        originalEvent.waitUntil(waitUntil);\n    }\n    async waitUntil(originalEvent) {\n        // Create a copy of the event that has the files filtered to match what the\n        // server wants.\n        const filteredEvent = await this.filter(originalEvent, this._accessUri);\n        if (filteredEvent.files.length) {\n            const next = (event) => {\n                return this._client.sendRequest(this._requestType, this._createParams(event), event.token)\n                    .then(this._client.protocol2CodeConverter.asWorkspaceEdit);\n            };\n            return this.doSend(filteredEvent, next);\n        }\n        else {\n            return undefined;\n        }\n    }\n}\nclass WillCreateFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillCreateFiles, proto.WillCreateFilesRequest.type, 'willCreate', 'willCreate', (i) => i, client.code2ProtocolConverter.asWillCreateFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willCreateFiles\n            ? middleware.willCreateFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillCreateFilesFeature = WillCreateFilesFeature;\nclass WillRenameFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillRenameFiles, proto.WillRenameFilesRequest.type, 'willRename', 'willRename', (i) => i.oldUri, client.code2ProtocolConverter.asWillRenameFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willRenameFiles\n            ? middleware.willRenameFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillRenameFilesFeature = WillRenameFilesFeature;\nclass WillDeleteFilesFeature extends RequestFileOperationFeature {\n    constructor(client) {\n        super(client, code.workspace.onWillDeleteFiles, proto.WillDeleteFilesRequest.type, 'willDelete', 'willDelete', (i) => i, client.code2ProtocolConverter.asWillDeleteFilesParams);\n    }\n    doSend(event, next) {\n        const middleware = this._client.middleware.workspace;\n        return middleware?.willDeleteFiles\n            ? middleware.willDeleteFiles(event, next)\n            : next(event);\n    }\n}\nexports.WillDeleteFilesFeature = WillDeleteFilesFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LinkedEditingFeature = void 0;\nconst code = require(\"vscode\");\nconst proto = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass LinkedEditingFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, proto.LinkedEditingRangeRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const linkedEditingSupport = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'linkedEditingRange');\n        linkedEditingSupport.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        let [id, options] = this.getRegistration(documentSelector, capabilities.linkedEditingRangeProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideLinkedEditingRanges: (document, position, token) => {\n                const client = this._client;\n                const provideLinkedEditing = (document, position, token) => {\n                    return client.sendRequest(proto.LinkedEditingRangeRequest.type, client.code2ProtocolConverter.asTextDocumentPositionParams(document, position), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asLinkedEditingRanges(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(proto.LinkedEditingRangeRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideLinkedEditingRange\n                    ? middleware.provideLinkedEditingRange(document, position, token, provideLinkedEditing)\n                    : provideLinkedEditing(document, position, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), provider];\n    }\n    registerProvider(selector, provider) {\n        return code.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.LinkedEditingFeature = LinkedEditingFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypeHierarchyFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass TypeHierarchyProvider {\n    constructor(client) {\n        this.client = client;\n        this.middleware = client.middleware;\n    }\n    prepareTypeHierarchy(document, position, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const prepareTypeHierarchy = (document, position, token) => {\n            const params = client.code2ProtocolConverter.asTextDocumentPositionParams(document, position);\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type, token, error, null);\n            });\n        };\n        return middleware.prepareTypeHierarchy\n            ? middleware.prepareTypeHierarchy(document, position, token, prepareTypeHierarchy)\n            : prepareTypeHierarchy(document, position, token);\n    }\n    provideTypeHierarchySupertypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySupertypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySupertypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySupertypes\n            ? middleware.provideTypeHierarchySupertypes(item, token, provideTypeHierarchySupertypes)\n            : provideTypeHierarchySupertypes(item, token);\n    }\n    provideTypeHierarchySubtypes(item, token) {\n        const client = this.client;\n        const middleware = this.middleware;\n        const provideTypeHierarchySubtypes = (item, token) => {\n            const params = {\n                item: client.code2ProtocolConverter.asTypeHierarchyItem(item)\n            };\n            return client.sendRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, params, token).then((result) => {\n                if (token.isCancellationRequested) {\n                    return null;\n                }\n                return client.protocol2CodeConverter.asTypeHierarchyItems(result, token);\n            }, (error) => {\n                return client.handleFailedRequest(vscode_languageserver_protocol_1.TypeHierarchySubtypesRequest.type, token, error, null);\n            });\n        };\n        return middleware.provideTypeHierarchySubtypes\n            ? middleware.provideTypeHierarchySubtypes(item, token, provideTypeHierarchySubtypes)\n            : provideTypeHierarchySubtypes(item, token);\n    }\n}\nclass TypeHierarchyFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.TypeHierarchyPrepareRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const capability = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'typeHierarchy');\n        capability.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const [id, options] = this.getRegistration(documentSelector, capabilities.typeHierarchyProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const client = this._client;\n        const provider = new TypeHierarchyProvider(client);\n        return [vscode_1.languages.registerTypeHierarchyProvider(client.protocol2CodeConverter.asDocumentSelector(options.documentSelector), provider), provider];\n    }\n}\nexports.TypeHierarchyFeature = TypeHierarchyFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineValueFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlineValueFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineValueRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineValue').dynamicRegistration = true;\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlineValue').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlineValueRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlineValues.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlineValueProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlineValues: eventEmitter.event,\n            provideInlineValues: (document, viewPort, context, token) => {\n                const client = this._client;\n                const provideInlineValues = (document, viewPort, context, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort),\n                        context: client.code2ProtocolConverter.asInlineValueContext(context)\n                    };\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, requestParams, token).then((values) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineValues(values, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineValueRequest.type, token, error, null);\n                    });\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlineValues\n                    ? middleware.provideInlineValues(document, viewPort, context, token, provideInlineValues)\n                    : provideInlineValues(document, viewPort, context, token);\n            }\n        };\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlineValues: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlineValueFeature = InlineValueFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlayHintsFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nclass InlayHintsFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlayHintRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        const inlayHint = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlayHint');\n        inlayHint.dynamicRegistration = true;\n        inlayHint.resolveSupport = {\n            properties: ['tooltip', 'textEdits', 'label.tooltip', 'label.location', 'label.command']\n        };\n        (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'workspace'), 'inlayHint').refreshSupport = true;\n    }\n    initialize(capabilities, documentSelector) {\n        this._client.onRequest(vscode_languageserver_protocol_1.InlayHintRefreshRequest.type, async () => {\n            for (const provider of this.getAllProviders()) {\n                provider.onDidChangeInlayHints.fire();\n            }\n        });\n        const [id, options] = this.getRegistration(documentSelector, capabilities.inlayHintProvider);\n        if (!id || !options) {\n            return;\n        }\n        this.register({ id: id, registerOptions: options });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const eventEmitter = new vscode_1.EventEmitter();\n        const provider = {\n            onDidChangeInlayHints: eventEmitter.event,\n            provideInlayHints: (document, viewPort, token) => {\n                const client = this._client;\n                const provideInlayHints = async (document, viewPort, token) => {\n                    const requestParams = {\n                        textDocument: client.code2ProtocolConverter.asTextDocumentIdentifier(document),\n                        range: client.code2ProtocolConverter.asRange(viewPort)\n                    };\n                    try {\n                        const values = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, requestParams, token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlayHints(values, token);\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.provideInlayHints\n                    ? middleware.provideInlayHints(document, viewPort, token, provideInlayHints)\n                    : provideInlayHints(document, viewPort, token);\n            }\n        };\n        provider.resolveInlayHint = options.resolveProvider === true\n            ? (hint, token) => {\n                const client = this._client;\n                const resolveInlayHint = async (item, token) => {\n                    try {\n                        const value = await client.sendRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, client.code2ProtocolConverter.asInlayHint(item), token);\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        const result = client.protocol2CodeConverter.asInlayHint(value, token);\n                        return token.isCancellationRequested ? null : result;\n                    }\n                    catch (error) {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlayHintResolveRequest.type, token, error, null);\n                    }\n                };\n                const middleware = client.middleware;\n                return middleware.resolveInlayHint\n                    ? middleware.resolveInlayHint(hint, token, resolveInlayHint)\n                    : resolveInlayHint(hint, token);\n            }\n            : undefined;\n        return [this.registerProvider(selector, provider), { provider: provider, onDidChangeInlayHints: eventEmitter }];\n    }\n    registerProvider(selector, provider) {\n        return vscode_1.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider);\n    }\n}\nexports.InlayHintsFeature = InlayHintsFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InlineCompletionItemFeature = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst features_1 = require(\"./features\");\nconst UUID = require(\"./utils/uuid\");\nclass InlineCompletionItemFeature extends features_1.TextDocumentLanguageFeature {\n    constructor(client) {\n        super(client, vscode_languageserver_protocol_1.InlineCompletionRequest.type);\n    }\n    fillClientCapabilities(capabilities) {\n        let inlineCompletion = (0, features_1.ensure)((0, features_1.ensure)(capabilities, 'textDocument'), 'inlineCompletion');\n        inlineCompletion.dynamicRegistration = true;\n    }\n    initialize(capabilities, documentSelector) {\n        const options = this.getRegistrationOptions(documentSelector, capabilities.inlineCompletionProvider);\n        if (!options) {\n            return;\n        }\n        this.register({\n            id: UUID.generateUuid(),\n            registerOptions: options\n        });\n    }\n    registerLanguageProvider(options) {\n        const selector = options.documentSelector;\n        const provider = {\n            provideInlineCompletionItems: (document, position, context, token) => {\n                const client = this._client;\n                const middleware = this._client.middleware;\n                const provideInlineCompletionItems = (document, position, context, token) => {\n                    return client.sendRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, client.code2ProtocolConverter.asInlineCompletionParams(document, position, context), token).then((result) => {\n                        if (token.isCancellationRequested) {\n                            return null;\n                        }\n                        return client.protocol2CodeConverter.asInlineCompletionResult(result, token);\n                    }, (error) => {\n                        return client.handleFailedRequest(vscode_languageserver_protocol_1.InlineCompletionRequest.type, token, error, null);\n                    });\n                };\n                return middleware.provideInlineCompletionItems\n                    ? middleware.provideInlineCompletionItems(document, position, context, token, provideInlineCompletionItems)\n                    : provideInlineCompletionItems(document, position, context, token);\n            }\n        };\n        return [vscode_1.languages.registerInlineCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(selector), provider), provider];\n    }\n}\nexports.InlineCompletionItemFeature = InlineCompletionItemFeature;\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ProposedFeatures = exports.BaseLanguageClient = exports.MessageTransports = exports.SuspendMode = exports.State = exports.CloseAction = exports.ErrorAction = exports.RevealOutputChannelOn = void 0;\nconst vscode_1 = require(\"vscode\");\nconst vscode_languageserver_protocol_1 = require(\"vscode-languageserver-protocol\");\nconst c2p = require(\"./codeConverter\");\nconst p2c = require(\"./protocolConverter\");\nconst Is = require(\"./utils/is\");\nconst async_1 = require(\"./utils/async\");\nconst UUID = require(\"./utils/uuid\");\nconst progressPart_1 = require(\"./progressPart\");\nconst features_1 = require(\"./features\");\nconst diagnostic_1 = require(\"./diagnostic\");\nconst notebook_1 = require(\"./notebook\");\nconst configuration_1 = require(\"./configuration\");\nconst textSynchronization_1 = require(\"./textSynchronization\");\nconst completion_1 = require(\"./completion\");\nconst hover_1 = require(\"./hover\");\nconst definition_1 = require(\"./definition\");\nconst signatureHelp_1 = require(\"./signatureHelp\");\nconst documentHighlight_1 = require(\"./documentHighlight\");\nconst documentSymbol_1 = require(\"./documentSymbol\");\nconst workspaceSymbol_1 = require(\"./workspaceSymbol\");\nconst reference_1 = require(\"./reference\");\nconst codeAction_1 = require(\"./codeAction\");\nconst codeLens_1 = require(\"./codeLens\");\nconst formatting_1 = require(\"./formatting\");\nconst rename_1 = require(\"./rename\");\nconst documentLink_1 = require(\"./documentLink\");\nconst executeCommand_1 = require(\"./executeCommand\");\nconst fileSystemWatcher_1 = require(\"./fileSystemWatcher\");\nconst colorProvider_1 = require(\"./colorProvider\");\nconst implementation_1 = require(\"./implementation\");\nconst typeDefinition_1 = require(\"./typeDefinition\");\nconst workspaceFolder_1 = require(\"./workspaceFolder\");\nconst foldingRange_1 = require(\"./foldingRange\");\nconst declaration_1 = require(\"./declaration\");\nconst selectionRange_1 = require(\"./selectionRange\");\nconst progress_1 = require(\"./progress\");\nconst callHierarchy_1 = require(\"./callHierarchy\");\nconst semanticTokens_1 = require(\"./semanticTokens\");\nconst fileOperations_1 = require(\"./fileOperations\");\nconst linkedEditingRange_1 = require(\"./linkedEditingRange\");\nconst typeHierarchy_1 = require(\"./typeHierarchy\");\nconst inlineValue_1 = require(\"./inlineValue\");\nconst inlayHint_1 = require(\"./inlayHint\");\nconst inlineCompletion_1 = require(\"./inlineCompletion\");\n/**\n * Controls when the output channel is revealed.\n */\nvar RevealOutputChannelOn;\n(function (RevealOutputChannelOn) {\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Debug\"] = 0] = \"Debug\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Info\"] = 1] = \"Info\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Warn\"] = 2] = \"Warn\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Error\"] = 3] = \"Error\";\n    RevealOutputChannelOn[RevealOutputChannelOn[\"Never\"] = 4] = \"Never\";\n})(RevealOutputChannelOn || (exports.RevealOutputChannelOn = RevealOutputChannelOn = {}));\n/**\n * An action to be performed when the connection is producing errors.\n */\nvar ErrorAction;\n(function (ErrorAction) {\n    /**\n     * Continue running the server.\n     */\n    ErrorAction[ErrorAction[\"Continue\"] = 1] = \"Continue\";\n    /**\n     * Shutdown the server.\n     */\n    ErrorAction[ErrorAction[\"Shutdown\"] = 2] = \"Shutdown\";\n})(ErrorAction || (exports.ErrorAction = ErrorAction = {}));\n/**\n * An action to be performed when the connection to a server got closed.\n */\nvar CloseAction;\n(function (CloseAction) {\n    /**\n     * Don't restart the server. The connection stays closed.\n     */\n    CloseAction[CloseAction[\"DoNotRestart\"] = 1] = \"DoNotRestart\";\n    /**\n     * Restart the server.\n     */\n    CloseAction[CloseAction[\"Restart\"] = 2] = \"Restart\";\n})(CloseAction || (exports.CloseAction = CloseAction = {}));\n/**\n * Signals in which state the language client is in.\n */\nvar State;\n(function (State) {\n    /**\n     * The client is stopped or got never started.\n     */\n    State[State[\"Stopped\"] = 1] = \"Stopped\";\n    /**\n     * The client is starting but not ready yet.\n     */\n    State[State[\"Starting\"] = 3] = \"Starting\";\n    /**\n     * The client is running and ready.\n     */\n    State[State[\"Running\"] = 2] = \"Running\";\n})(State || (exports.State = State = {}));\nvar SuspendMode;\n(function (SuspendMode) {\n    /**\n     * Don't allow suspend mode.\n     */\n    SuspendMode[\"off\"] = \"off\";\n    /**\n     * Support suspend mode even if not all\n     * registered providers have a corresponding\n     * activation listener.\n     */\n    SuspendMode[\"on\"] = \"on\";\n})(SuspendMode || (exports.SuspendMode = SuspendMode = {}));\nvar ResolvedClientOptions;\n(function (ResolvedClientOptions) {\n    function sanitizeIsTrusted(isTrusted) {\n        if (isTrusted === undefined || isTrusted === null) {\n            return false;\n        }\n        if ((typeof isTrusted === 'boolean') || (typeof isTrusted === 'object' && isTrusted !== null && Is.stringArray(isTrusted.enabledCommands))) {\n            return isTrusted;\n        }\n        return false;\n    }\n    ResolvedClientOptions.sanitizeIsTrusted = sanitizeIsTrusted;\n})(ResolvedClientOptions || (ResolvedClientOptions = {}));\nclass DefaultErrorHandler {\n    constructor(client, maxRestartCount) {\n        this.client = client;\n        this.maxRestartCount = maxRestartCount;\n        this.restarts = [];\n    }\n    error(_error, _message, count) {\n        if (count && count <= 3) {\n            return { action: ErrorAction.Continue };\n        }\n        return { action: ErrorAction.Shutdown };\n    }\n    closed() {\n        this.restarts.push(Date.now());\n        if (this.restarts.length <= this.maxRestartCount) {\n            return { action: CloseAction.Restart };\n        }\n        else {\n            let diff = this.restarts[this.restarts.length - 1] - this.restarts[0];\n            if (diff <= 3 * 60 * 1000) {\n                return { action: CloseAction.DoNotRestart, message: `The ${this.client.name} server crashed ${this.maxRestartCount + 1} times in the last 3 minutes. The server will not be restarted. See the output for more information.` };\n            }\n            else {\n                this.restarts.shift();\n                return { action: CloseAction.Restart };\n            }\n        }\n    }\n}\nvar ClientState;\n(function (ClientState) {\n    ClientState[\"Initial\"] = \"initial\";\n    ClientState[\"Starting\"] = \"starting\";\n    ClientState[\"StartFailed\"] = \"startFailed\";\n    ClientState[\"Running\"] = \"running\";\n    ClientState[\"Stopping\"] = \"stopping\";\n    ClientState[\"Stopped\"] = \"stopped\";\n})(ClientState || (ClientState = {}));\nvar MessageTransports;\n(function (MessageTransports) {\n    function is(value) {\n        let candidate = value;\n        return candidate && vscode_languageserver_protocol_1.MessageReader.is(value.reader) && vscode_languageserver_protocol_1.MessageWriter.is(value.writer);\n    }\n    MessageTransports.is = is;\n})(MessageTransports || (exports.MessageTransports = MessageTransports = {}));\nclass BaseLanguageClient {\n    constructor(id, name, clientOptions) {\n        this._traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        this._diagnosticQueue = new Map();\n        this._diagnosticQueueState = { state: 'idle' };\n        this._features = [];\n        this._dynamicFeatures = new Map();\n        this.workspaceEditLock = new async_1.Semaphore(1);\n        this._id = id;\n        this._name = name;\n        clientOptions = clientOptions || {};\n        const markdown = { isTrusted: false, supportHtml: false };\n        if (clientOptions.markdown !== undefined) {\n            markdown.isTrusted = ResolvedClientOptions.sanitizeIsTrusted(clientOptions.markdown.isTrusted);\n            markdown.supportHtml = clientOptions.markdown.supportHtml === true;\n        }\n        // const defaultInterval = (clientOptions as TestOptions).$testMode ? 50 : 60000;\n        this._clientOptions = {\n            documentSelector: clientOptions.documentSelector ?? [],\n            synchronize: clientOptions.synchronize ?? {},\n            diagnosticCollectionName: clientOptions.diagnosticCollectionName,\n            outputChannelName: clientOptions.outputChannelName ?? this._name,\n            revealOutputChannelOn: clientOptions.revealOutputChannelOn ?? RevealOutputChannelOn.Error,\n            stdioEncoding: clientOptions.stdioEncoding ?? 'utf8',\n            initializationOptions: clientOptions.initializationOptions,\n            initializationFailedHandler: clientOptions.initializationFailedHandler,\n            progressOnInitialization: !!clientOptions.progressOnInitialization,\n            errorHandler: clientOptions.errorHandler ?? this.createDefaultErrorHandler(clientOptions.connectionOptions?.maxRestartCount),\n            middleware: clientOptions.middleware ?? {},\n            uriConverters: clientOptions.uriConverters,\n            workspaceFolder: clientOptions.workspaceFolder,\n            connectionOptions: clientOptions.connectionOptions,\n            markdown,\n            // suspend: {\n            // \tmode: clientOptions.suspend?.mode ?? SuspendMode.off,\n            // \tcallback: clientOptions.suspend?.callback ?? (() => Promise.resolve(true)),\n            // \tinterval: clientOptions.suspend?.interval ? Math.max(clientOptions.suspend.interval, defaultInterval) : defaultInterval\n            // },\n            diagnosticPullOptions: clientOptions.diagnosticPullOptions ?? { onChange: true, onSave: false },\n            notebookDocumentOptions: clientOptions.notebookDocumentOptions ?? {}\n        };\n        this._clientOptions.synchronize = this._clientOptions.synchronize || {};\n        this._state = ClientState.Initial;\n        this._ignoredRegistrations = new Set();\n        this._listeners = [];\n        this._notificationHandlers = new Map();\n        this._pendingNotificationHandlers = new Map();\n        this._notificationDisposables = new Map();\n        this._requestHandlers = new Map();\n        this._pendingRequestHandlers = new Map();\n        this._requestDisposables = new Map();\n        this._progressHandlers = new Map();\n        this._pendingProgressHandlers = new Map();\n        this._progressDisposables = new Map();\n        this._connection = undefined;\n        // this._idleStart = undefined;\n        this._initializeResult = undefined;\n        if (clientOptions.outputChannel) {\n            this._outputChannel = clientOptions.outputChannel;\n            this._disposeOutputChannel = false;\n        }\n        else {\n            this._outputChannel = undefined;\n            this._disposeOutputChannel = true;\n        }\n        this._traceOutputChannel = clientOptions.traceOutputChannel;\n        this._diagnostics = undefined;\n        this._pendingOpenNotifications = new Set();\n        this._pendingChangeSemaphore = new async_1.Semaphore(1);\n        this._pendingChangeDelayer = new async_1.Delayer(250);\n        this._fileEvents = [];\n        this._fileEventDelayer = new async_1.Delayer(250);\n        this._onStop = undefined;\n        this._telemetryEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._stateChangeEmitter = new vscode_languageserver_protocol_1.Emitter();\n        this._trace = vscode_languageserver_protocol_1.Trace.Off;\n        this._tracer = {\n            log: (messageOrDataObject, data) => {\n                if (Is.string(messageOrDataObject)) {\n                    this.logTrace(messageOrDataObject, data);\n                }\n                else {\n                    this.logObjectTrace(messageOrDataObject);\n                }\n            },\n        };\n        this._c2p = c2p.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.code2Protocol : undefined);\n        this._p2c = p2c.createConverter(clientOptions.uriConverters ? clientOptions.uriConverters.protocol2Code : undefined, this._clientOptions.markdown.isTrusted, this._clientOptions.markdown.supportHtml);\n        this._syncedDocuments = new Map();\n        this.registerBuiltinFeatures();\n    }\n    get name() {\n        return this._name;\n    }\n    get middleware() {\n        return this._clientOptions.middleware ?? Object.create(null);\n    }\n    get clientOptions() {\n        return this._clientOptions;\n    }\n    get protocol2CodeConverter() {\n        return this._p2c;\n    }\n    get code2ProtocolConverter() {\n        return this._c2p;\n    }\n    get onTelemetry() {\n        return this._telemetryEmitter.event;\n    }\n    get onDidChangeState() {\n        return this._stateChangeEmitter.event;\n    }\n    get outputChannel() {\n        if (!this._outputChannel) {\n            this._outputChannel = vscode_1.window.createOutputChannel(this._clientOptions.outputChannelName ? this._clientOptions.outputChannelName : this._name);\n        }\n        return this._outputChannel;\n    }\n    get traceOutputChannel() {\n        if (this._traceOutputChannel) {\n            return this._traceOutputChannel;\n        }\n        return this.outputChannel;\n    }\n    get diagnostics() {\n        return this._diagnostics;\n    }\n    get state() {\n        return this.getPublicState();\n    }\n    get $state() {\n        return this._state;\n    }\n    set $state(value) {\n        let oldState = this.getPublicState();\n        this._state = value;\n        let newState = this.getPublicState();\n        if (newState !== oldState) {\n            this._stateChangeEmitter.fire({ oldState, newState });\n        }\n    }\n    getPublicState() {\n        switch (this.$state) {\n            case ClientState.Starting:\n                return State.Starting;\n            case ClientState.Running:\n                return State.Running;\n            default:\n                return State.Stopped;\n        }\n    }\n    get initializeResult() {\n        return this._initializeResult;\n    }\n    async sendRequest(type, ...params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        const _sendRequest = this._clientOptions.middleware?.sendRequest;\n        if (_sendRequest !== undefined) {\n            let param = undefined;\n            let token = undefined;\n            // Separate cancellation tokens from other parameters for a better client interface\n            if (params.length === 1) {\n                // CancellationToken is an interface, so we need to check if the first param complies to it\n                if (vscode_languageserver_protocol_1.CancellationToken.is(params[0])) {\n                    token = params[0];\n                }\n                else {\n                    param = params[0];\n                }\n            }\n            else if (params.length === 2) {\n                param = params[0];\n                token = params[1];\n            }\n            // Return the general middleware invocation defining `next` as a utility function that reorganizes parameters to\n            // pass them to the original sendRequest function.\n            return _sendRequest(type, param, token, (type, param, token) => {\n                const params = [];\n                // Add the parameters if there are any\n                if (param !== undefined) {\n                    params.push(param);\n                }\n                // Add the cancellation token if there is one\n                if (token !== undefined) {\n                    params.push(token);\n                }\n                return connection.sendRequest(type, ...params);\n            });\n        }\n        else {\n            return connection.sendRequest(type, ...params);\n        }\n    }\n    onRequest(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._requestHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._requestDisposables.set(method, connection.onRequest(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingRequestHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingRequestHandlers.delete(method);\n                    const disposable = this._requestDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._requestDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._requestHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendNotification(type, params) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        const needsPendingFullTextDocumentSync = this._didChangeTextDocumentFeature.syncKind === vscode_languageserver_protocol_1.TextDocumentSyncKind.Full;\n        let openNotification;\n        if (needsPendingFullTextDocumentSync && typeof type !== 'string' && type.method === vscode_languageserver_protocol_1.DidOpenTextDocumentNotification.method) {\n            openNotification = params?.textDocument.uri;\n            this._pendingOpenNotifications.add(openNotification);\n        }\n        // Ensure we have a connection before we force the document sync.\n        const connection = await this.$start();\n        // If any document is synced in full mode make sure we flush any pending\n        // full document syncs.\n        if (needsPendingFullTextDocumentSync) {\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }\n        // We need to remove the pending open notification before we actually\n        // send the notification over the connection. Otherwise there could be\n        // a request coming in that although the open notification got already put\n        // onto the wire will ignore pending document changes.\n        //\n        // Since the code path of connection.sendNotification is actually sync\n        // until the message is handed of to the writer and the writer as a semaphore\n        // lock with a capacity of 1 no additional async scheduling can happen until\n        // the message is actually handed of.\n        if (openNotification !== undefined) {\n            this._pendingOpenNotifications.delete(openNotification);\n        }\n        const _sendNotification = this._clientOptions.middleware?.sendNotification;\n        return _sendNotification\n            ? _sendNotification(type, connection.sendNotification.bind(connection), params)\n            : connection.sendNotification(type, params);\n    }\n    onNotification(type, handler) {\n        const method = typeof type === 'string' ? type : type.method;\n        this._notificationHandlers.set(method, handler);\n        const connection = this.activeConnection();\n        let disposable;\n        if (connection !== undefined) {\n            this._notificationDisposables.set(method, connection.onNotification(type, handler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingNotificationHandlers.set(method, handler);\n            disposable = {\n                dispose: () => {\n                    this._pendingNotificationHandlers.delete(method);\n                    const disposable = this._notificationDisposables.get(method);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._notificationDisposables.delete(method);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._notificationHandlers.delete(method);\n                disposable.dispose();\n            }\n        };\n    }\n    async sendProgress(type, token, value) {\n        if (this.$state === ClientState.StartFailed || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped) {\n            return Promise.reject(new vscode_languageserver_protocol_1.ResponseError(vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive, `Client is not running`));\n        }\n        try {\n            // Ensure we have a connection before we force the document sync.\n            const connection = await this.$start();\n            return connection.sendProgress(type, token, value);\n        }\n        catch (error) {\n            this.error(`Sending progress for token ${token} failed.`, error);\n            throw error;\n        }\n    }\n    onProgress(type, token, handler) {\n        this._progressHandlers.set(token, { type, handler });\n        const connection = this.activeConnection();\n        let disposable;\n        const handleWorkDoneProgress = this._clientOptions.middleware?.handleWorkDoneProgress;\n        const realHandler = vscode_languageserver_protocol_1.WorkDoneProgress.is(type) && handleWorkDoneProgress !== undefined\n            ? (params) => {\n                handleWorkDoneProgress(token, params, () => handler(params));\n            }\n            : handler;\n        if (connection !== undefined) {\n            this._progressDisposables.set(token, connection.onProgress(type, token, realHandler));\n            disposable = {\n                dispose: () => {\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        else {\n            this._pendingProgressHandlers.set(token, { type, handler });\n            disposable = {\n                dispose: () => {\n                    this._pendingProgressHandlers.delete(token);\n                    const disposable = this._progressDisposables.get(token);\n                    if (disposable !== undefined) {\n                        disposable.dispose();\n                        this._progressDisposables.delete(token);\n                    }\n                }\n            };\n        }\n        return {\n            dispose: () => {\n                this._progressHandlers.delete(token);\n                disposable.dispose();\n            }\n        };\n    }\n    createDefaultErrorHandler(maxRestartCount) {\n        if (maxRestartCount !== undefined && maxRestartCount < 0) {\n            throw new Error(`Invalid maxRestartCount: ${maxRestartCount}`);\n        }\n        return new DefaultErrorHandler(this, maxRestartCount ?? 4);\n    }\n    async setTrace(value) {\n        this._trace = value;\n        const connection = this.activeConnection();\n        if (connection !== undefined) {\n            await connection.trace(this._trace, this._tracer, {\n                sendNotification: false,\n                traceFormat: this._traceFormat\n            });\n        }\n    }\n    data2String(data) {\n        if (data instanceof vscode_languageserver_protocol_1.ResponseError) {\n            const responseError = data;\n            return `  Message: ${responseError.message}\\n  Code: ${responseError.code} ${responseError.data ? '\\n' + responseError.data.toString() : ''}`;\n        }\n        if (data instanceof Error) {\n            if (Is.string(data.stack)) {\n                return data.stack;\n            }\n            return data.message;\n        }\n        if (Is.string(data)) {\n            return data;\n        }\n        return data.toString();\n    }\n    debug(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Debug, RevealOutputChannelOn.Debug, 'Debug', message, data, showNotification);\n    }\n    info(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Info, RevealOutputChannelOn.Info, 'Info', message, data, showNotification);\n    }\n    warn(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Warning, RevealOutputChannelOn.Warn, 'Warn', message, data, showNotification);\n    }\n    error(message, data, showNotification = true) {\n        this.logOutputMessage(vscode_languageserver_protocol_1.MessageType.Error, RevealOutputChannelOn.Error, 'Error', message, data, showNotification);\n    }\n    logOutputMessage(type, reveal, name, message, data, showNotification) {\n        this.outputChannel.appendLine(`[${name.padEnd(5)} - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data !== null && data !== undefined) {\n            this.outputChannel.appendLine(this.data2String(data));\n        }\n        if (showNotification === 'force' || (showNotification && this._clientOptions.revealOutputChannelOn <= reveal)) {\n            this.showNotificationMessage(type, message);\n        }\n    }\n    showNotificationMessage(type, message) {\n        message = message ?? 'A request has failed. See the output for more information.';\n        const messageFunc = type === vscode_languageserver_protocol_1.MessageType.Error\n            ? vscode_1.window.showErrorMessage\n            : type === vscode_languageserver_protocol_1.MessageType.Warning\n                ? vscode_1.window.showWarningMessage\n                : vscode_1.window.showInformationMessage;\n        void messageFunc(message, 'Go to output').then((selection) => {\n            if (selection !== undefined) {\n                this.outputChannel.show(true);\n            }\n        });\n    }\n    logTrace(message, data) {\n        this.traceOutputChannel.appendLine(`[Trace - ${(new Date().toLocaleTimeString())}] ${message}`);\n        if (data) {\n            this.traceOutputChannel.appendLine(this.data2String(data));\n        }\n    }\n    logObjectTrace(data) {\n        if (data.isLSPMessage && data.type) {\n            this.traceOutputChannel.append(`[LSP   - ${(new Date().toLocaleTimeString())}] `);\n        }\n        else {\n            this.traceOutputChannel.append(`[Trace - ${(new Date().toLocaleTimeString())}] `);\n        }\n        if (data) {\n            this.traceOutputChannel.appendLine(`${JSON.stringify(data)}`);\n        }\n    }\n    needsStart() {\n        return this.$state === ClientState.Initial || this.$state === ClientState.Stopping || this.$state === ClientState.Stopped;\n    }\n    needsStop() {\n        return this.$state === ClientState.Starting || this.$state === ClientState.Running;\n    }\n    activeConnection() {\n        return this.$state === ClientState.Running && this._connection !== undefined ? this._connection : undefined;\n    }\n    isRunning() {\n        return this.$state === ClientState.Running;\n    }\n    async start() {\n        if (this._disposed === 'disposing' || this._disposed === 'disposed') {\n            throw new Error(`Client got disposed and can't be restarted.`);\n        }\n        if (this.$state === ClientState.Stopping) {\n            throw new Error(`Client is currently stopping. Can only restart a full stopped client`);\n        }\n        // We are already running or are in the process of getting up\n        // to speed.\n        if (this._onStart !== undefined) {\n            return this._onStart;\n        }\n        const [promise, resolve, reject] = this.createOnStartPromise();\n        this._onStart = promise;\n        // If we restart then the diagnostics collection is reused.\n        if (this._diagnostics === undefined) {\n            this._diagnostics = this._clientOptions.diagnosticCollectionName\n                ? vscode_1.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName)\n                : vscode_1.languages.createDiagnosticCollection();\n        }\n        // When we start make all buffer handlers pending so that they\n        // get added.\n        for (const [method, handler] of this._notificationHandlers) {\n            if (!this._pendingNotificationHandlers.has(method)) {\n                this._pendingNotificationHandlers.set(method, handler);\n            }\n        }\n        for (const [method, handler] of this._requestHandlers) {\n            if (!this._pendingRequestHandlers.has(method)) {\n                this._pendingRequestHandlers.set(method, handler);\n            }\n        }\n        for (const [token, data] of this._progressHandlers) {\n            if (!this._pendingProgressHandlers.has(token)) {\n                this._pendingProgressHandlers.set(token, data);\n            }\n        }\n        this.$state = ClientState.Starting;\n        try {\n            const connection = await this.createConnection();\n            connection.onNotification(vscode_languageserver_protocol_1.LogMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        this.error(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        this.warn(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        this.info(message.message, undefined, false);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Debug:\n                        this.debug(message.message, undefined, false);\n                        break;\n                    default:\n                        this.outputChannel.appendLine(message.message);\n                }\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.ShowMessageNotification.type, (message) => {\n                switch (message.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        void vscode_1.window.showErrorMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        void vscode_1.window.showWarningMessage(message.message);\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        void vscode_1.window.showInformationMessage(message.message);\n                        break;\n                    default:\n                        void vscode_1.window.showInformationMessage(message.message);\n                }\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowMessageRequest.type, (params) => {\n                let messageFunc;\n                switch (params.type) {\n                    case vscode_languageserver_protocol_1.MessageType.Error:\n                        messageFunc = vscode_1.window.showErrorMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Warning:\n                        messageFunc = vscode_1.window.showWarningMessage;\n                        break;\n                    case vscode_languageserver_protocol_1.MessageType.Info:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                        break;\n                    default:\n                        messageFunc = vscode_1.window.showInformationMessage;\n                }\n                let actions = params.actions || [];\n                return messageFunc(params.message, ...actions);\n            });\n            connection.onNotification(vscode_languageserver_protocol_1.TelemetryEventNotification.type, (data) => {\n                this._telemetryEmitter.fire(data);\n            });\n            connection.onRequest(vscode_languageserver_protocol_1.ShowDocumentRequest.type, async (params) => {\n                const showDocument = async (params) => {\n                    const uri = this.protocol2CodeConverter.asUri(params.uri);\n                    try {\n                        if (params.external === true) {\n                            const success = await vscode_1.env.openExternal(uri);\n                            return { success };\n                        }\n                        else {\n                            const options = {};\n                            if (params.selection !== undefined) {\n                                options.selection = this.protocol2CodeConverter.asRange(params.selection);\n                            }\n                            if (params.takeFocus === undefined || params.takeFocus === false) {\n                                options.preserveFocus = true;\n                            }\n                            else if (params.takeFocus === true) {\n                                options.preserveFocus = false;\n                            }\n                            await vscode_1.window.showTextDocument(uri, options);\n                            return { success: true };\n                        }\n                    }\n                    catch (error) {\n                        return { success: false };\n                    }\n                };\n                const middleware = this._clientOptions.middleware.window?.showDocument;\n                if (middleware !== undefined) {\n                    return middleware(params, showDocument);\n                }\n                else {\n                    return showDocument(params);\n                }\n            });\n            connection.listen();\n            await this.initialize(connection);\n            resolve();\n        }\n        catch (error) {\n            this.$state = ClientState.StartFailed;\n            this.error(`${this._name} client: couldn't create connection to server.`, error, 'force');\n            reject(error);\n        }\n        return this._onStart;\n    }\n    createOnStartPromise() {\n        let resolve;\n        let reject;\n        const promise = new Promise((_resolve, _reject) => {\n            resolve = _resolve;\n            reject = _reject;\n        });\n        return [promise, resolve, reject];\n    }\n    async initialize(connection) {\n        this.refreshTrace(connection, false);\n        const initOption = this._clientOptions.initializationOptions;\n        // If the client is locked to a workspace folder use it. In this case the workspace folder\n        // feature is not registered and we need to initialize the value here.\n        const [rootPath, workspaceFolders] = this._clientOptions.workspaceFolder !== undefined\n            ? [this._clientOptions.workspaceFolder.uri.fsPath, [{ uri: this._c2p.asUri(this._clientOptions.workspaceFolder.uri), name: this._clientOptions.workspaceFolder.name }]]\n            : [this._clientGetRootPath(), null];\n        const initParams = {\n            processId: null,\n            clientInfo: {\n                name: vscode_1.env.appName,\n                version: vscode_1.version\n            },\n            locale: this.getLocale(),\n            rootPath: rootPath ? rootPath : null,\n            rootUri: rootPath ? this._c2p.asUri(vscode_1.Uri.file(rootPath)) : null,\n            capabilities: this.computeClientCapabilities(),\n            initializationOptions: Is.func(initOption) ? initOption() : initOption,\n            trace: vscode_languageserver_protocol_1.Trace.toString(this._trace),\n            workspaceFolders: workspaceFolders\n        };\n        this.fillInitializeParams(initParams);\n        if (this._clientOptions.progressOnInitialization) {\n            const token = UUID.generateUuid();\n            const part = new progressPart_1.ProgressPart(connection, token);\n            initParams.workDoneToken = token;\n            try {\n                const result = await this.doInitialize(connection, initParams);\n                part.done();\n                return result;\n            }\n            catch (error) {\n                part.cancel();\n                throw error;\n            }\n        }\n        else {\n            return this.doInitialize(connection, initParams);\n        }\n    }\n    async doInitialize(connection, initParams) {\n        try {\n            const result = await connection.initialize(initParams);\n            if (result.capabilities.positionEncoding !== undefined && result.capabilities.positionEncoding !== vscode_languageserver_protocol_1.PositionEncodingKind.UTF16) {\n                throw new Error(`Unsupported position encoding (${result.capabilities.positionEncoding}) received from server ${this.name}`);\n            }\n            this._initializeResult = result;\n            this.$state = ClientState.Running;\n            let textDocumentSyncOptions = undefined;\n            if (Is.number(result.capabilities.textDocumentSync)) {\n                if (result.capabilities.textDocumentSync === vscode_languageserver_protocol_1.TextDocumentSyncKind.None) {\n                    textDocumentSyncOptions = {\n                        openClose: false,\n                        change: vscode_languageserver_protocol_1.TextDocumentSyncKind.None,\n                        save: undefined\n                    };\n                }\n                else {\n                    textDocumentSyncOptions = {\n                        openClose: true,\n                        change: result.capabilities.textDocumentSync,\n                        save: {\n                            includeText: false\n                        }\n                    };\n                }\n            }\n            else if (result.capabilities.textDocumentSync !== undefined && result.capabilities.textDocumentSync !== null) {\n                textDocumentSyncOptions = result.capabilities.textDocumentSync;\n            }\n            this._capabilities = Object.assign({}, result.capabilities, { resolvedTextDocumentSync: textDocumentSyncOptions });\n            connection.onNotification(vscode_languageserver_protocol_1.PublishDiagnosticsNotification.type, params => this.handleDiagnostics(params));\n            connection.onRequest(vscode_languageserver_protocol_1.RegistrationRequest.type, params => this.handleRegistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/registerFeature', params => this.handleRegistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.UnregistrationRequest.type, params => this.handleUnregistrationRequest(params));\n            // See https://github.com/Microsoft/vscode-languageserver-node/issues/199\n            connection.onRequest('client/unregisterFeature', params => this.handleUnregistrationRequest(params));\n            connection.onRequest(vscode_languageserver_protocol_1.ApplyWorkspaceEditRequest.type, params => this.handleApplyWorkspaceEdit(params));\n            // Add pending notification, request and progress handlers.\n            for (const [method, handler] of this._pendingNotificationHandlers) {\n                this._notificationDisposables.set(method, connection.onNotification(method, handler));\n            }\n            this._pendingNotificationHandlers.clear();\n            for (const [method, handler] of this._pendingRequestHandlers) {\n                this._requestDisposables.set(method, connection.onRequest(method, handler));\n            }\n            this._pendingRequestHandlers.clear();\n            for (const [token, data] of this._pendingProgressHandlers) {\n                this._progressDisposables.set(token, connection.onProgress(data.type, token, data.handler));\n            }\n            this._pendingProgressHandlers.clear();\n            // if (this._clientOptions.suspend.mode !== SuspendMode.off) {\n            // \tthis._idleInterval =  RAL().timer.setInterval(() => this.checkSuspend(), this._clientOptions.suspend.interval);\n            // }\n            await connection.sendNotification(vscode_languageserver_protocol_1.InitializedNotification.type, {});\n            this.hookFileEvents(connection);\n            this.hookConfigurationChanged(connection);\n            this.initializeFeatures(connection);\n            return result;\n        }\n        catch (error) {\n            if (this._clientOptions.initializationFailedHandler) {\n                if (this._clientOptions.initializationFailedHandler(error)) {\n                    void this.initialize(connection);\n                }\n                else {\n                    void this.stop();\n                }\n            }\n            else if (error instanceof vscode_languageserver_protocol_1.ResponseError && error.data && error.data.retry) {\n                void vscode_1.window.showErrorMessage(error.message, { title: 'Retry', id: 'retry' }).then(item => {\n                    if (item && item.id === 'retry') {\n                        void this.initialize(connection);\n                    }\n                    else {\n                        void this.stop();\n                    }\n                });\n            }\n            else {\n                if (error && error.message) {\n                    void vscode_1.window.showErrorMessage(error.message);\n                }\n                this.error('Server initialization failed.', error);\n                void this.stop();\n            }\n            throw error;\n        }\n    }\n    _clientGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    stop(timeout = 2000) {\n        // Wait 2 seconds on stop\n        return this.shutdown('stop', timeout);\n    }\n    dispose(timeout = 2000) {\n        try {\n            this._disposed = 'disposing';\n            return this.stop(timeout);\n        }\n        finally {\n            this._disposed = 'disposed';\n        }\n    }\n    async shutdown(mode, timeout) {\n        // If the client is stopped or in its initial state return.\n        if (this.$state === ClientState.Stopped || this.$state === ClientState.Initial) {\n            return;\n        }\n        // If we are stopping the client and have a stop promise return it.\n        if (this.$state === ClientState.Stopping) {\n            if (this._onStop !== undefined) {\n                return this._onStop;\n            }\n            else {\n                throw new Error(`Client is stopping but no stop promise available.`);\n            }\n        }\n        const connection = this.activeConnection();\n        // We can't stop a client that is not running (e.g. has no connection). Especially not\n        // on that us starting since it can't be correctly synchronized.\n        if (connection === undefined || this.$state !== ClientState.Running) {\n            throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);\n        }\n        this._initializeResult = undefined;\n        this.$state = ClientState.Stopping;\n        this.cleanUp(mode);\n        const tp = new Promise(c => { (0, vscode_languageserver_protocol_1.RAL)().timer.setTimeout(c, timeout); });\n        const shutdown = (async (connection) => {\n            await connection.shutdown();\n            await connection.exit();\n            return connection;\n        })(connection);\n        return this._onStop = Promise.race([tp, shutdown]).then((connection) => {\n            // The connection won the race with the timeout.\n            if (connection !== undefined) {\n                connection.end();\n                connection.dispose();\n            }\n            else {\n                this.error(`Stopping server timed out`, undefined, false);\n                throw new Error(`Stopping the server timed out`);\n            }\n        }, (error) => {\n            this.error(`Stopping server failed`, error, false);\n            throw error;\n        }).finally(() => {\n            this.$state = ClientState.Stopped;\n            mode === 'stop' && this.cleanUpChannel();\n            this._onStart = undefined;\n            this._onStop = undefined;\n            this._connection = undefined;\n            this._ignoredRegistrations.clear();\n        });\n    }\n    cleanUp(mode) {\n        // purge outstanding file events.\n        this._fileEvents = [];\n        this._fileEventDelayer.cancel();\n        const disposables = this._listeners.splice(0, this._listeners.length);\n        for (const disposable of disposables) {\n            disposable.dispose();\n        }\n        if (this._syncedDocuments) {\n            this._syncedDocuments.clear();\n        }\n        // Clear features in reverse order;\n        for (const feature of Array.from(this._features.entries()).map(entry => entry[1]).reverse()) {\n            feature.clear();\n        }\n        if (mode === 'stop' && this._diagnostics !== undefined) {\n            this._diagnostics.dispose();\n            this._diagnostics = undefined;\n        }\n        if (this._idleInterval !== undefined) {\n            this._idleInterval.dispose();\n            this._idleInterval = undefined;\n        }\n        // this._idleStart = undefined;\n    }\n    cleanUpChannel() {\n        if (this._outputChannel !== undefined && this._disposeOutputChannel) {\n            this._outputChannel.dispose();\n            this._outputChannel = undefined;\n        }\n    }\n    notifyFileEvent(event) {\n        const client = this;\n        async function didChangeWatchedFile(event) {\n            client._fileEvents.push(event);\n            return client._fileEventDelayer.trigger(async () => {\n                await client.sendNotification(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type, { changes: client._fileEvents });\n                client._fileEvents = [];\n            });\n        }\n        const workSpaceMiddleware = this.clientOptions.middleware?.workspace;\n        (workSpaceMiddleware?.didChangeWatchedFile ? workSpaceMiddleware.didChangeWatchedFile(event, didChangeWatchedFile) : didChangeWatchedFile(event)).catch((error) => {\n            client.error(`Notify file events failed.`, error);\n        });\n    }\n    async sendPendingFullTextDocumentChanges(connection) {\n        return this._pendingChangeSemaphore.lock(async () => {\n            try {\n                const changes = this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);\n                if (changes.length === 0) {\n                    return;\n                }\n                for (const document of changes) {\n                    const params = this.code2ProtocolConverter.asChangeTextDocumentParams(document);\n                    // We await the send and not the delivery since it is more or less the same for\n                    // notifications.\n                    await connection.sendNotification(vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                    this._didChangeTextDocumentFeature.notificationSent(document, vscode_languageserver_protocol_1.DidChangeTextDocumentNotification.type, params);\n                }\n            }\n            catch (error) {\n                this.error(`Sending pending changes failed`, error, false);\n                throw error;\n            }\n        });\n    }\n    triggerPendingChangeDelivery() {\n        this._pendingChangeDelayer.trigger(async () => {\n            const connection = this.activeConnection();\n            if (connection === undefined) {\n                this.triggerPendingChangeDelivery();\n                return;\n            }\n            await this.sendPendingFullTextDocumentChanges(connection);\n        }).catch((error) => this.error(`Delivering pending changes failed`, error, false));\n    }\n    handleDiagnostics(params) {\n        if (!this._diagnostics) {\n            return;\n        }\n        const key = params.uri;\n        if (this._diagnosticQueueState.state === 'busy' && this._diagnosticQueueState.document === key) {\n            // Cancel the active run;\n            this._diagnosticQueueState.tokenSource.cancel();\n        }\n        this._diagnosticQueue.set(params.uri, params.diagnostics);\n        this.triggerDiagnosticQueue();\n    }\n    triggerDiagnosticQueue() {\n        (0, vscode_languageserver_protocol_1.RAL)().timer.setImmediate(() => { this.workDiagnosticQueue(); });\n    }\n    workDiagnosticQueue() {\n        if (this._diagnosticQueueState.state === 'busy') {\n            return;\n        }\n        const next = this._diagnosticQueue.entries().next();\n        if (next.done === true) {\n            // Nothing in the queue\n            return;\n        }\n        const [document, diagnostics] = next.value;\n        this._diagnosticQueue.delete(document);\n        const tokenSource = new vscode_1.CancellationTokenSource();\n        this._diagnosticQueueState = { state: 'busy', document: document, tokenSource };\n        this._p2c.asDiagnostics(diagnostics, tokenSource.token).then((converted) => {\n            if (!tokenSource.token.isCancellationRequested) {\n                const uri = this._p2c.asUri(document);\n                const middleware = this.clientOptions.middleware;\n                if (middleware.handleDiagnostics) {\n                    middleware.handleDiagnostics(uri, converted, (uri, diagnostics) => this.setDiagnostics(uri, diagnostics));\n                }\n                else {\n                    this.setDiagnostics(uri, converted);\n                }\n            }\n        }).finally(() => {\n            this._diagnosticQueueState = { state: 'idle' };\n            this.triggerDiagnosticQueue();\n        });\n    }\n    setDiagnostics(uri, diagnostics) {\n        if (!this._diagnostics) {\n            return;\n        }\n        this._diagnostics.set(uri, diagnostics);\n    }\n    getLocale() {\n        return vscode_1.env.language;\n    }\n    async $start() {\n        if (this.$state === ClientState.StartFailed) {\n            throw new Error(`Previous start failed. Can't restart server.`);\n        }\n        await this.start();\n        const connection = this.activeConnection();\n        if (connection === undefined) {\n            throw new Error(`Starting server failed`);\n        }\n        return connection;\n    }\n    async createConnection() {\n        let errorHandler = (error, message, count) => {\n            this.handleConnectionError(error, message, count).catch((error) => this.error(`Handling connection error failed`, error));\n        };\n        let closeHandler = () => {\n            this.handleConnectionClosed().catch((error) => this.error(`Handling connection close failed`, error));\n        };\n        const transports = await this.createMessageTransports(this._clientOptions.stdioEncoding || 'utf8');\n        this._connection = createConnection(transports.reader, transports.writer, errorHandler, closeHandler, this._clientOptions.connectionOptions);\n        return this._connection;\n    }\n    async handleConnectionClosed() {\n        // Check whether this is a normal shutdown in progress or the client stopped normally.\n        if (this.$state === ClientState.Stopped) {\n            return;\n        }\n        try {\n            if (this._connection !== undefined) {\n                this._connection.dispose();\n            }\n        }\n        catch (error) {\n            // Disposing a connection could fail if error cases.\n        }\n        let handlerResult = { action: CloseAction.DoNotRestart };\n        if (this.$state !== ClientState.Stopping) {\n            try {\n                handlerResult = await this._clientOptions.errorHandler.closed();\n            }\n            catch (error) {\n                // Ignore errors coming from the error handler.\n            }\n        }\n        this._connection = undefined;\n        if (handlerResult.action === CloseAction.DoNotRestart) {\n            this.error(handlerResult.message ?? 'Connection to server got closed. Server will not be restarted.', undefined, handlerResult.handled === true ? false : 'force');\n            this.cleanUp('stop');\n            if (this.$state === ClientState.Starting) {\n                this.$state = ClientState.StartFailed;\n            }\n            else {\n                this.$state = ClientState.Stopped;\n            }\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n        }\n        else if (handlerResult.action === CloseAction.Restart) {\n            this.info(handlerResult.message ?? 'Connection to server got closed. Server will restart.', !handlerResult.handled);\n            this.cleanUp('restart');\n            this.$state = ClientState.Initial;\n            this._onStop = Promise.resolve();\n            this._onStart = undefined;\n            this.start().catch((error) => this.error(`Restarting server failed`, error, 'force'));\n        }\n    }\n    async handleConnectionError(error, message, count) {\n        const handlerResult = await this._clientOptions.errorHandler.error(error, message, count);\n        if (handlerResult.action === ErrorAction.Shutdown) {\n            this.error(handlerResult.message ?? `Client ${this._name}: connection to server is erroring.\\n${error.message}\\nShutting down server.`, undefined, handlerResult.handled === true ? false : 'force');\n            this.stop().catch((error) => {\n                this.error(`Stopping server failed`, error, false);\n            });\n        }\n        else {\n            this.error(handlerResult.message ??\n                `Client ${this._name}: connection to server is erroring.\\n${error.message}`, undefined, handlerResult.handled === true ? false : 'force');\n        }\n    }\n    hookConfigurationChanged(connection) {\n        this._listeners.push(vscode_1.workspace.onDidChangeConfiguration(() => {\n            this.refreshTrace(connection, true);\n        }));\n    }\n    refreshTrace(connection, sendNotification = false) {\n        const config = vscode_1.workspace.getConfiguration(this._id);\n        let trace = vscode_languageserver_protocol_1.Trace.Off;\n        let traceFormat = vscode_languageserver_protocol_1.TraceFormat.Text;\n        if (config) {\n            const traceConfig = config.get('trace.server', 'off');\n            if (typeof traceConfig === 'string') {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(traceConfig);\n            }\n            else {\n                trace = vscode_languageserver_protocol_1.Trace.fromString(config.get('trace.server.verbosity', 'off'));\n                traceFormat = vscode_languageserver_protocol_1.TraceFormat.fromString(config.get('trace.server.format', 'text'));\n            }\n        }\n        this._trace = trace;\n        this._traceFormat = traceFormat;\n        connection.trace(this._trace, this._tracer, {\n            sendNotification,\n            traceFormat: this._traceFormat\n        }).catch((error) => { this.error(`Updating trace failed with error`, error, false); });\n    }\n    hookFileEvents(_connection) {\n        let fileEvents = this._clientOptions.synchronize.fileEvents;\n        if (!fileEvents) {\n            return;\n        }\n        let watchers;\n        if (Is.array(fileEvents)) {\n            watchers = fileEvents;\n        }\n        else {\n            watchers = [fileEvents];\n        }\n        if (!watchers) {\n            return;\n        }\n        this._dynamicFeatures.get(vscode_languageserver_protocol_1.DidChangeWatchedFilesNotification.type.method).registerRaw(UUID.generateUuid(), watchers);\n    }\n    registerFeatures(features) {\n        for (let feature of features) {\n            this.registerFeature(feature);\n        }\n    }\n    registerFeature(feature) {\n        this._features.push(feature);\n        if (features_1.DynamicFeature.is(feature)) {\n            const registrationType = feature.registrationType;\n            this._dynamicFeatures.set(registrationType.method, feature);\n        }\n    }\n    getFeature(request) {\n        return this._dynamicFeatures.get(request);\n    }\n    hasDedicatedTextSynchronizationFeature(textDocument) {\n        const feature = this.getFeature(vscode_languageserver_protocol_1.NotebookDocumentSyncRegistrationType.method);\n        if (feature === undefined || !(feature instanceof notebook_1.NotebookDocumentSyncFeature)) {\n            return false;\n        }\n        return feature.handles(textDocument);\n    }\n    registerBuiltinFeatures() {\n        const pendingFullTextDocumentChanges = new Map();\n        this.registerFeature(new configuration_1.ConfigurationFeature(this));\n        this.registerFeature(new textSynchronization_1.DidOpenTextDocumentFeature(this, this._syncedDocuments));\n        this._didChangeTextDocumentFeature = new textSynchronization_1.DidChangeTextDocumentFeature(this, pendingFullTextDocumentChanges);\n        this._didChangeTextDocumentFeature.onPendingChangeAdded(() => {\n            this.triggerPendingChangeDelivery();\n        });\n        this.registerFeature(this._didChangeTextDocumentFeature);\n        this.registerFeature(new textSynchronization_1.WillSaveFeature(this));\n        this.registerFeature(new textSynchronization_1.WillSaveWaitUntilFeature(this));\n        this.registerFeature(new textSynchronization_1.DidSaveTextDocumentFeature(this));\n        this.registerFeature(new textSynchronization_1.DidCloseTextDocumentFeature(this, this._syncedDocuments, pendingFullTextDocumentChanges));\n        this.registerFeature(new fileSystemWatcher_1.FileSystemWatcherFeature(this, (event) => this.notifyFileEvent(event)));\n        this.registerFeature(new completion_1.CompletionItemFeature(this));\n        this.registerFeature(new hover_1.HoverFeature(this));\n        this.registerFeature(new signatureHelp_1.SignatureHelpFeature(this));\n        this.registerFeature(new definition_1.DefinitionFeature(this));\n        this.registerFeature(new reference_1.ReferencesFeature(this));\n        this.registerFeature(new documentHighlight_1.DocumentHighlightFeature(this));\n        this.registerFeature(new documentSymbol_1.DocumentSymbolFeature(this));\n        this.registerFeature(new workspaceSymbol_1.WorkspaceSymbolFeature(this));\n        this.registerFeature(new codeAction_1.CodeActionFeature(this));\n        this.registerFeature(new codeLens_1.CodeLensFeature(this));\n        this.registerFeature(new formatting_1.DocumentFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentRangeFormattingFeature(this));\n        this.registerFeature(new formatting_1.DocumentOnTypeFormattingFeature(this));\n        this.registerFeature(new rename_1.RenameFeature(this));\n        this.registerFeature(new documentLink_1.DocumentLinkFeature(this));\n        this.registerFeature(new executeCommand_1.ExecuteCommandFeature(this));\n        this.registerFeature(new configuration_1.SyncConfigurationFeature(this));\n        this.registerFeature(new typeDefinition_1.TypeDefinitionFeature(this));\n        this.registerFeature(new implementation_1.ImplementationFeature(this));\n        this.registerFeature(new colorProvider_1.ColorProviderFeature(this));\n        // We only register the workspace folder feature if the client is not locked\n        // to a specific workspace folder.\n        if (this.clientOptions.workspaceFolder === undefined) {\n            this.registerFeature(new workspaceFolder_1.WorkspaceFoldersFeature(this));\n        }\n        this.registerFeature(new foldingRange_1.FoldingRangeFeature(this));\n        this.registerFeature(new declaration_1.DeclarationFeature(this));\n        this.registerFeature(new selectionRange_1.SelectionRangeFeature(this));\n        this.registerFeature(new progress_1.ProgressFeature(this));\n        this.registerFeature(new callHierarchy_1.CallHierarchyFeature(this));\n        this.registerFeature(new semanticTokens_1.SemanticTokensFeature(this));\n        this.registerFeature(new linkedEditingRange_1.LinkedEditingFeature(this));\n        this.registerFeature(new fileOperations_1.DidCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.DidDeleteFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillCreateFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillRenameFilesFeature(this));\n        this.registerFeature(new fileOperations_1.WillDeleteFilesFeature(this));\n        this.registerFeature(new typeHierarchy_1.TypeHierarchyFeature(this));\n        this.registerFeature(new inlineValue_1.InlineValueFeature(this));\n        this.registerFeature(new inlayHint_1.InlayHintsFeature(this));\n        this.registerFeature(new diagnostic_1.DiagnosticFeature(this));\n        this.registerFeature(new notebook_1.NotebookDocumentSyncFeature(this));\n    }\n    registerProposedFeatures() {\n        this.registerFeatures(ProposedFeatures.createAll(this));\n    }\n    fillInitializeParams(params) {\n        for (let feature of this._features) {\n            if (Is.func(feature.fillInitializeParams)) {\n                feature.fillInitializeParams(params);\n            }\n        }\n    }\n    computeClientCapabilities() {\n        const result = {};\n        (0, features_1.ensure)(result, 'workspace').applyEdit = true;\n        const workspaceEdit = (0, features_1.ensure)((0, features_1.ensure)(result, 'workspace'), 'workspaceEdit');\n        workspaceEdit.documentChanges = true;\n        workspaceEdit.resourceOperations = [vscode_languageserver_protocol_1.ResourceOperationKind.Create, vscode_languageserver_protocol_1.ResourceOperationKind.Rename, vscode_languageserver_protocol_1.ResourceOperationKind.Delete];\n        workspaceEdit.failureHandling = vscode_languageserver_protocol_1.FailureHandlingKind.TextOnlyTransactional;\n        workspaceEdit.normalizesLineEndings = true;\n        workspaceEdit.changeAnnotationSupport = {\n            groupsOnLabel: true\n        };\n        const diagnostics = (0, features_1.ensure)((0, features_1.ensure)(result, 'textDocument'), 'publishDiagnostics');\n        diagnostics.relatedInformation = true;\n        diagnostics.versionSupport = false;\n        diagnostics.tagSupport = { valueSet: [vscode_languageserver_protocol_1.DiagnosticTag.Unnecessary, vscode_languageserver_protocol_1.DiagnosticTag.Deprecated] };\n        diagnostics.codeDescriptionSupport = true;\n        diagnostics.dataSupport = true;\n        const windowCapabilities = (0, features_1.ensure)(result, 'window');\n        const showMessage = (0, features_1.ensure)(windowCapabilities, 'showMessage');\n        showMessage.messageActionItem = { additionalPropertiesSupport: true };\n        const showDocument = (0, features_1.ensure)(windowCapabilities, 'showDocument');\n        showDocument.support = true;\n        const generalCapabilities = (0, features_1.ensure)(result, 'general');\n        generalCapabilities.staleRequestSupport = {\n            cancel: true,\n            retryOnContentModified: Array.from(BaseLanguageClient.RequestsToCancelOnContentModified)\n        };\n        generalCapabilities.regularExpressions = { engine: 'ECMAScript', version: 'ES2020' };\n        generalCapabilities.markdown = {\n            parser: 'marked',\n            version: '1.1.0',\n        };\n        generalCapabilities.positionEncodings = ['utf-16'];\n        if (this._clientOptions.markdown.supportHtml) {\n            generalCapabilities.markdown.allowedTags = ['ul', 'li', 'p', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'];\n        }\n        for (let feature of this._features) {\n            feature.fillClientCapabilities(result);\n        }\n        return result;\n    }\n    initializeFeatures(_connection) {\n        const documentSelector = this._clientOptions.documentSelector;\n        for (const feature of this._features) {\n            if (Is.func(feature.preInitialize)) {\n                feature.preInitialize(this._capabilities, documentSelector);\n            }\n        }\n        for (const feature of this._features) {\n            feature.initialize(this._capabilities, documentSelector);\n        }\n    }\n    async handleRegistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleRegisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doRegisterCapability(nextParams));\n        }\n        else {\n            return this.doRegisterCapability(params);\n        }\n    }\n    async doRegisterCapability(params) {\n        // We will not receive a registration call before a client is running\n        // from a server. However if we stop or shutdown we might which might\n        // try to restart the server. So ignore registrations if we are not running\n        if (!this.isRunning()) {\n            for (const registration of params.registrations) {\n                this._ignoredRegistrations.add(registration.id);\n            }\n            return;\n        }\n        for (const registration of params.registrations) {\n            const feature = this._dynamicFeatures.get(registration.method);\n            if (feature === undefined) {\n                return Promise.reject(new Error(`No feature implementation for ${registration.method} found. Registration failed.`));\n            }\n            const options = registration.registerOptions ?? {};\n            options.documentSelector = options.documentSelector ?? this._clientOptions.documentSelector;\n            const data = {\n                id: registration.id,\n                registerOptions: options\n            };\n            try {\n                feature.register(data);\n            }\n            catch (err) {\n                return Promise.reject(err);\n            }\n        }\n    }\n    async handleUnregistrationRequest(params) {\n        const middleware = this.clientOptions.middleware?.handleUnregisterCapability;\n        if (middleware) {\n            return middleware(params, nextParams => this.doUnregisterCapability(nextParams));\n        }\n        else {\n            return this.doUnregisterCapability(params);\n        }\n    }\n    async doUnregisterCapability(params) {\n        for (const unregistration of params.unregisterations) {\n            if (this._ignoredRegistrations.has(unregistration.id)) {\n                continue;\n            }\n            const feature = this._dynamicFeatures.get(unregistration.method);\n            if (!feature) {\n                return Promise.reject(new Error(`No feature implementation for ${unregistration.method} found. Unregistration failed.`));\n            }\n            feature.unregister(unregistration.id);\n        }\n    }\n    async handleApplyWorkspaceEdit(params) {\n        const workspaceEdit = params.edit;\n        // Make sure we convert workspace edits one after the other. Otherwise\n        // we might execute a workspace edit received first after we received another\n        // one since the conversion might race.\n        const converted = await this.workspaceEditLock.lock(() => {\n            return this._p2c.asWorkspaceEdit(workspaceEdit);\n        });\n        // This is some sort of workaround since the version check should be done by VS Code in the Workspace.applyEdit.\n        // However doing it here adds some safety since the server can lag more behind then an extension.\n        const openTextDocuments = new Map();\n        vscode_1.workspace.textDocuments.forEach((document) => openTextDocuments.set(document.uri.toString(), document));\n        let versionMismatch = false;\n        if (workspaceEdit.documentChanges) {\n            for (const change of workspaceEdit.documentChanges) {\n                if (vscode_languageserver_protocol_1.TextDocumentEdit.is(change) && change.textDocument.version && change.textDocument.version >= 0) {\n                    const changeUri = this._p2c.asUri(change.textDocument.uri).toString();\n                    const textDocument = openTextDocuments.get(changeUri);\n                    if (textDocument && textDocument.version !== change.textDocument.version) {\n                        versionMismatch = true;\n                        break;\n                    }\n                }\n            }\n        }\n        if (versionMismatch) {\n            return Promise.resolve({ applied: false });\n        }\n        return Is.asPromise(vscode_1.workspace.applyEdit(converted).then((value) => { return { applied: value }; }));\n    }\n    handleFailedRequest(type, token, error, defaultValue, showNotification = true) {\n        // If we get a request cancel or a content modified don't log anything.\n        if (error instanceof vscode_languageserver_protocol_1.ResponseError) {\n            // The connection got disposed while we were waiting for a response.\n            // Simply return the default value. Is the best we can do.\n            if (error.code === vscode_languageserver_protocol_1.ErrorCodes.PendingResponseRejected || error.code === vscode_languageserver_protocol_1.ErrorCodes.ConnectionInactive) {\n                return defaultValue;\n            }\n            if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.RequestCancelled || error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ServerCancelled) {\n                if (token !== undefined && token.isCancellationRequested) {\n                    return defaultValue;\n                }\n                else {\n                    if (error.data !== undefined) {\n                        throw new features_1.LSPCancellationError(error.data);\n                    }\n                    else {\n                        throw new vscode_1.CancellationError();\n                    }\n                }\n            }\n            else if (error.code === vscode_languageserver_protocol_1.LSPErrorCodes.ContentModified) {\n                if (BaseLanguageClient.RequestsToCancelOnContentModified.has(type.method) || BaseLanguageClient.CancellableResolveCalls.has(type.method)) {\n                    throw new vscode_1.CancellationError();\n                }\n                else {\n                    return defaultValue;\n                }\n            }\n        }\n        this.error(`Request ${type.method} failed.`, error, showNotification);\n        throw error;\n    }\n}\nexports.BaseLanguageClient = BaseLanguageClient;\nBaseLanguageClient.RequestsToCancelOnContentModified = new Set([\n    vscode_languageserver_protocol_1.SemanticTokensRequest.method,\n    vscode_languageserver_protocol_1.SemanticTokensRangeRequest.method,\n    vscode_languageserver_protocol_1.SemanticTokensDeltaRequest.method\n]);\nBaseLanguageClient.CancellableResolveCalls = new Set([\n    vscode_languageserver_protocol_1.CompletionResolveRequest.method,\n    vscode_languageserver_protocol_1.CodeLensResolveRequest.method,\n    vscode_languageserver_protocol_1.CodeActionResolveRequest.method,\n    vscode_languageserver_protocol_1.InlayHintResolveRequest.method,\n    vscode_languageserver_protocol_1.DocumentLinkResolveRequest.method,\n    vscode_languageserver_protocol_1.WorkspaceSymbolResolveRequest.method\n]);\nclass ConsoleLogger {\n    error(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.error(message);\n    }\n    warn(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.warn(message);\n    }\n    info(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.info(message);\n    }\n    log(message) {\n        (0, vscode_languageserver_protocol_1.RAL)().console.log(message);\n    }\n}\nfunction createConnection(input, output, errorHandler, closeHandler, options) {\n    const logger = new ConsoleLogger();\n    const connection = (0, vscode_languageserver_protocol_1.createProtocolConnection)(input, output, logger, options);\n    connection.onError((data) => { errorHandler(data[0], data[1], data[2]); });\n    connection.onClose(closeHandler);\n    const result = {\n        listen: () => connection.listen(),\n        sendRequest: connection.sendRequest,\n        onRequest: connection.onRequest,\n        hasPendingResponse: connection.hasPendingResponse,\n        sendNotification: connection.sendNotification,\n        onNotification: connection.onNotification,\n        onProgress: connection.onProgress,\n        sendProgress: connection.sendProgress,\n        trace: (value, tracer, sendNotificationOrTraceOptions) => {\n            const defaultTraceOptions = {\n                sendNotification: false,\n                traceFormat: vscode_languageserver_protocol_1.TraceFormat.Text\n            };\n            if (sendNotificationOrTraceOptions === undefined) {\n                return connection.trace(value, tracer, defaultTraceOptions);\n            }\n            else if (Is.boolean(sendNotificationOrTraceOptions)) {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n            else {\n                return connection.trace(value, tracer, sendNotificationOrTraceOptions);\n            }\n        },\n        initialize: (params) => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.InitializeRequest.type, params);\n        },\n        shutdown: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendRequest(vscode_languageserver_protocol_1.ShutdownRequest.type, undefined);\n        },\n        exit: () => {\n            // This needs to return and MUST not be await to avoid any async\n            // scheduling. Otherwise messages might overtake each other.\n            return connection.sendNotification(vscode_languageserver_protocol_1.ExitNotification.type);\n        },\n        end: () => connection.end(),\n        dispose: () => connection.dispose()\n    };\n    return result;\n}\n// Exporting proposed protocol.\nvar ProposedFeatures;\n(function (ProposedFeatures) {\n    function createAll(_client) {\n        let result = [\n            new inlineCompletion_1.InlineCompletionItemFeature(_client)\n        ];\n        return result;\n    }\n    ProposedFeatures.createAll = createAll;\n})(ProposedFeatures || (exports.ProposedFeatures = ProposedFeatures = {}));\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.terminate = void 0;\nconst cp = require(\"child_process\");\nconst path_1 = require(\"path\");\nconst isWindows = (process.platform === 'win32');\nconst isMacintosh = (process.platform === 'darwin');\nconst isLinux = (process.platform === 'linux');\nfunction terminate(process, cwd) {\n    if (isWindows) {\n        try {\n            // This we run in Atom execFileSync is available.\n            // Ignore stderr since this is otherwise piped to parent.stderr\n            // which might be already closed.\n            let options = {\n                stdio: ['pipe', 'pipe', 'ignore']\n            };\n            if (cwd) {\n                options.cwd = cwd;\n            }\n            cp.execFileSync('taskkill', ['/T', '/F', '/PID', process.pid.toString()], options);\n            return true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else if (isLinux || isMacintosh) {\n        try {\n            var cmd = (0, path_1.join)(__dirname, 'terminateProcess.sh');\n            var result = cp.spawnSync(cmd, [process.pid.toString()]);\n            return result.error ? false : true;\n        }\n        catch (err) {\n            return false;\n        }\n    }\n    else {\n        process.kill('SIGKILL');\n        return true;\n    }\n}\nexports.terminate = terminate;\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');", "'use strict'\n\nconst debug = (\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_DEBUG &&\n  /\\bsemver\\b/i.test(process.env.NODE_DEBUG)\n) ? (...args) => console.error('SEMVER', ...args)\n  : () => {}\n\nmodule.exports = debug\n", "'use strict'\n\n// Note: this is the semver.org version of the spec that it implements\n// Not necessarily the package version of this code.\nconst SEMVER_SPEC_VERSION = '2.0.0'\n\nconst MAX_LENGTH = 256\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER ||\n/* istanbul ignore next */ 9007199254740991\n\n// Max safe segment length for coercion.\nconst MAX_SAFE_COMPONENT_LENGTH = 16\n\n// Max safe length for a build identifier. The max length minus 6 characters for\n// the shortest version with a build 0.0.0+BUILD.\nconst MAX_SAFE_BUILD_LENGTH = MAX_LENGTH - 6\n\nconst RELEASE_TYPES = [\n  'major',\n  'premajor',\n  'minor',\n  'preminor',\n  'patch',\n  'prepatch',\n  'prerelease',\n]\n\nmodule.exports = {\n  MAX_LENGTH,\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_SAFE_INTEGER,\n  RELEASE_TYPES,\n  SEMVER_SPEC_VERSION,\n  FLAG_INCLUDE_PRERELEASE: 0b001,\n  FLAG_LOOSE: 0b010,\n}\n", "'use strict'\n\nconst {\n  MAX_SAFE_COMPONENT_LENGTH,\n  MAX_SAFE_BUILD_LENGTH,\n  MAX_LENGTH,\n} = require('./constants')\nconst debug = require('./debug')\nexports = module.exports = {}\n\n// The actual regexps go on exports.re\nconst re = exports.re = []\nconst safeRe = exports.safeRe = []\nconst src = exports.src = []\nconst safeSrc = exports.safeSrc = []\nconst t = exports.t = {}\nlet R = 0\n\nconst LETTERDASHNUMBER = '[a-zA-Z0-9-]'\n\n// Replace some greedy regex tokens to prevent regex dos issues. These regex are\n// used internally via the safeRe object since all inputs in this library get\n// normalized first to trim and collapse all extra whitespace. The original\n// regexes are exported for userland consumption and lower level usage. A\n// future breaking change could export the safer regex only with a note that\n// all input should have extra whitespace removed.\nconst safeRegexReplacements = [\n  ['\\\\s', 1],\n  ['\\\\d', MAX_LENGTH],\n  [LETTERDASHNUMBER, MAX_SAFE_BUILD_LENGTH],\n]\n\nconst makeSafeRegex = (value) => {\n  for (const [token, max] of safeRegexReplacements) {\n    value = value\n      .split(`${token}*`).join(`${token}{0,${max}}`)\n      .split(`${token}+`).join(`${token}{1,${max}}`)\n  }\n  return value\n}\n\nconst createToken = (name, value, isGlobal) => {\n  const safe = makeSafeRegex(value)\n  const index = R++\n  debug(name, index, value)\n  t[name] = index\n  src[index] = value\n  safeSrc[index] = safe\n  re[index] = new RegExp(value, isGlobal ? 'g' : undefined)\n  safeRe[index] = new RegExp(safe, isGlobal ? 'g' : undefined)\n}\n\n// The following Regular Expressions can be used for tokenizing,\n// validating, and parsing SemVer version strings.\n\n// ## Numeric Identifier\n// A single `0`, or a non-zero digit followed by zero or more digits.\n\ncreateToken('NUMERICIDENTIFIER', '0|[1-9]\\\\d*')\ncreateToken('NUMERICIDENTIFIERLOOSE', '\\\\d+')\n\n// ## Non-numeric Identifier\n// Zero or more digits, followed by a letter or hyphen, and then zero or\n// more letters, digits, or hyphens.\n\ncreateToken('NONNUMERICIDENTIFIER', `\\\\d*[a-zA-Z-]${LETTERDASHNUMBER}*`)\n\n// ## Main Version\n// Three dot-separated numeric identifiers.\n\ncreateToken('MAINVERSION', `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})\\\\.` +\n                   `(${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('MAINVERSIONLOOSE', `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})\\\\.` +\n                        `(${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version Identifier\n// A numeric identifier, or a non-numeric identifier.\n// Non-numeric identifiers include numeric identifiers but can be longer.\n// Therefore non-numeric identifiers must go first.\n\ncreateToken('PRERELEASEIDENTIFIER', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIER]})`)\n\ncreateToken('PRERELEASEIDENTIFIERLOOSE', `(?:${src[t.NONNUMERICIDENTIFIER]\n}|${src[t.NUMERICIDENTIFIERLOOSE]})`)\n\n// ## Pre-release Version\n// Hyphen, followed by one or more dot-separated pre-release version\n// identifiers.\n\ncreateToken('PRERELEASE', `(?:-(${src[t.PRERELEASEIDENTIFIER]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIER]})*))`)\n\ncreateToken('PRERELEASELOOSE', `(?:-?(${src[t.PRERELEASEIDENTIFIERLOOSE]\n}(?:\\\\.${src[t.PRERELEASEIDENTIFIERLOOSE]})*))`)\n\n// ## Build Metadata Identifier\n// Any combination of digits, letters, or hyphens.\n\ncreateToken('BUILDIDENTIFIER', `${LETTERDASHNUMBER}+`)\n\n// ## Build Metadata\n// Plus sign, followed by one or more period-separated build metadata\n// identifiers.\n\ncreateToken('BUILD', `(?:\\\\+(${src[t.BUILDIDENTIFIER]\n}(?:\\\\.${src[t.BUILDIDENTIFIER]})*))`)\n\n// ## Full Version String\n// A main version, followed optionally by a pre-release version and\n// build metadata.\n\n// Note that the only major, minor, patch, and pre-release sections of\n// the version string are capturing groups.  The build metadata is not a\n// capturing group, because it should not ever be used in version\n// comparison.\n\ncreateToken('FULLPLAIN', `v?${src[t.MAINVERSION]\n}${src[t.PRERELEASE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('FULL', `^${src[t.FULLPLAIN]}$`)\n\n// like full, but allows v1.2.3 and =1.2.3, which people do sometimes.\n// also, 1.0.0alpha1 (prerelease without the hyphen) which is pretty\n// common in the npm registry.\ncreateToken('LOOSEPLAIN', `[v=\\\\s]*${src[t.MAINVERSIONLOOSE]\n}${src[t.PRERELEASELOOSE]}?${\n  src[t.BUILD]}?`)\n\ncreateToken('LOOSE', `^${src[t.LOOSEPLAIN]}$`)\n\ncreateToken('GTLT', '((?:<|>)?=?)')\n\n// Something like \"2.*\" or \"1.2.x\".\n// Note that \"x.x\" is a valid xRange identifer, meaning \"any version\"\n// Only the first item is strictly required.\ncreateToken('XRANGEIDENTIFIERLOOSE', `${src[t.NUMERICIDENTIFIERLOOSE]}|x|X|\\\\*`)\ncreateToken('XRANGEIDENTIFIER', `${src[t.NUMERICIDENTIFIER]}|x|X|\\\\*`)\n\ncreateToken('XRANGEPLAIN', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:\\\\.(${src[t.XRANGEIDENTIFIER]})` +\n                   `(?:${src[t.PRERELEASE]})?${\n                     src[t.BUILD]}?` +\n                   `)?)?`)\n\ncreateToken('XRANGEPLAINLOOSE', `[v=\\\\s]*(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:\\\\.(${src[t.XRANGEIDENTIFIERLOOSE]})` +\n                        `(?:${src[t.PRERELEASELOOSE]})?${\n                          src[t.BUILD]}?` +\n                        `)?)?`)\n\ncreateToken('XRANGE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAIN]}$`)\ncreateToken('XRANGELOOSE', `^${src[t.GTLT]}\\\\s*${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Coercion.\n// Extract anything that could conceivably be a part of a valid semver\ncreateToken('COERCEPLAIN', `${'(^|[^\\\\d])' +\n              '(\\\\d{1,'}${MAX_SAFE_COMPONENT_LENGTH}})` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?` +\n              `(?:\\\\.(\\\\d{1,${MAX_SAFE_COMPONENT_LENGTH}}))?`)\ncreateToken('COERCE', `${src[t.COERCEPLAIN]}(?:$|[^\\\\d])`)\ncreateToken('COERCEFULL', src[t.COERCEPLAIN] +\n              `(?:${src[t.PRERELEASE]})?` +\n              `(?:${src[t.BUILD]})?` +\n              `(?:$|[^\\\\d])`)\ncreateToken('COERCERTL', src[t.COERCE], true)\ncreateToken('COERCERTLFULL', src[t.COERCEFULL], true)\n\n// Tilde ranges.\n// Meaning is \"reasonably at or greater than\"\ncreateToken('LONETILDE', '(?:~>?)')\n\ncreateToken('TILDETRIM', `(\\\\s*)${src[t.LONETILDE]}\\\\s+`, true)\nexports.tildeTrimReplace = '$1~'\n\ncreateToken('TILDE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('TILDELOOSE', `^${src[t.LONETILDE]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// Caret ranges.\n// Meaning is \"at least and backwards compatible with\"\ncreateToken('LONECARET', '(?:\\\\^)')\n\ncreateToken('CARETTRIM', `(\\\\s*)${src[t.LONECARET]}\\\\s+`, true)\nexports.caretTrimReplace = '$1^'\n\ncreateToken('CARET', `^${src[t.LONECARET]}${src[t.XRANGEPLAIN]}$`)\ncreateToken('CARETLOOSE', `^${src[t.LONECARET]}${src[t.XRANGEPLAINLOOSE]}$`)\n\n// A simple gt/lt/eq thing, or just \"\" to indicate \"any version\"\ncreateToken('COMPARATORLOOSE', `^${src[t.GTLT]}\\\\s*(${src[t.LOOSEPLAIN]})$|^$`)\ncreateToken('COMPARATOR', `^${src[t.GTLT]}\\\\s*(${src[t.FULLPLAIN]})$|^$`)\n\n// An expression to strip any whitespace between the gtlt and the thing\n// it modifies, so that `> 1.2.3` ==> `>1.2.3`\ncreateToken('COMPARATORTRIM', `(\\\\s*)${src[t.GTLT]\n}\\\\s*(${src[t.LOOSEPLAIN]}|${src[t.XRANGEPLAIN]})`, true)\nexports.comparatorTrimReplace = '$1$2$3'\n\n// Something like `1.2.3 - 1.2.4`\n// Note that these all use the loose form, because they'll be\n// checked against either the strict or loose comparator form\n// later.\ncreateToken('HYPHENRANGE', `^\\\\s*(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s+-\\\\s+` +\n                   `(${src[t.XRANGEPLAIN]})` +\n                   `\\\\s*$`)\n\ncreateToken('HYPHENRANGELOOSE', `^\\\\s*(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s+-\\\\s+` +\n                        `(${src[t.XRANGEPLAINLOOSE]})` +\n                        `\\\\s*$`)\n\n// Star ranges basically just allow anything at all.\ncreateToken('STAR', '(<|>)?=?\\\\s*\\\\*')\n// >=0.0.0 is like a star\ncreateToken('GTE0', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0\\\\s*$')\ncreateToken('GTE0PRE', '^\\\\s*>=\\\\s*0\\\\.0\\\\.0-0\\\\s*$')\n", "'use strict'\n\n// parse out just the options we care about\nconst looseOption = Object.freeze({ loose: true })\nconst emptyOpts = Object.freeze({ })\nconst parseOptions = options => {\n  if (!options) {\n    return emptyOpts\n  }\n\n  if (typeof options !== 'object') {\n    return looseOption\n  }\n\n  return options\n}\nmodule.exports = parseOptions\n", "'use strict'\n\nconst numeric = /^[0-9]+$/\nconst compareIdentifiers = (a, b) => {\n  if (typeof a === 'number' && typeof b === 'number') {\n    return a === b ? 0 : a < b ? -1 : 1\n  }\n\n  const anum = numeric.test(a)\n  const bnum = numeric.test(b)\n\n  if (anum && bnum) {\n    a = +a\n    b = +b\n  }\n\n  return a === b ? 0\n    : (anum && !bnum) ? -1\n    : (bnum && !anum) ? 1\n    : a < b ? -1\n    : 1\n}\n\nconst rcompareIdentifiers = (a, b) => compareIdentifiers(b, a)\n\nmodule.exports = {\n  compareIdentifiers,\n  rcompareIdentifiers,\n}\n", "'use strict'\n\nconst debug = require('../internal/debug')\nconst { MAX_LENGTH, MAX_SAFE_INTEGER } = require('../internal/constants')\nconst { safeRe: re, t } = require('../internal/re')\n\nconst parseOptions = require('../internal/parse-options')\nconst { compareIdentifiers } = require('../internal/identifiers')\nclass SemVer {\n  constructor (version, options) {\n    options = parseOptions(options)\n\n    if (version instanceof SemVer) {\n      if (version.loose === !!options.loose &&\n        version.includePrerelease === !!options.includePrerelease) {\n        return version\n      } else {\n        version = version.version\n      }\n    } else if (typeof version !== 'string') {\n      throw new TypeError(`Invalid version. Must be a string. Got type \"${typeof version}\".`)\n    }\n\n    if (version.length > MAX_LENGTH) {\n      throw new TypeError(\n        `version is longer than ${MAX_LENGTH} characters`\n      )\n    }\n\n    debug('SemVer', version, options)\n    this.options = options\n    this.loose = !!options.loose\n    // this isn't actually relevant for versions, but keep it so that we\n    // don't run into trouble passing this.options around.\n    this.includePrerelease = !!options.includePrerelease\n\n    const m = version.trim().match(options.loose ? re[t.LOOSE] : re[t.FULL])\n\n    if (!m) {\n      throw new TypeError(`Invalid Version: ${version}`)\n    }\n\n    this.raw = version\n\n    // these are actually numbers\n    this.major = +m[1]\n    this.minor = +m[2]\n    this.patch = +m[3]\n\n    if (this.major > MAX_SAFE_INTEGER || this.major < 0) {\n      throw new TypeError('Invalid major version')\n    }\n\n    if (this.minor > MAX_SAFE_INTEGER || this.minor < 0) {\n      throw new TypeError('Invalid minor version')\n    }\n\n    if (this.patch > MAX_SAFE_INTEGER || this.patch < 0) {\n      throw new TypeError('Invalid patch version')\n    }\n\n    // numberify any prerelease numeric ids\n    if (!m[4]) {\n      this.prerelease = []\n    } else {\n      this.prerelease = m[4].split('.').map((id) => {\n        if (/^[0-9]+$/.test(id)) {\n          const num = +id\n          if (num >= 0 && num < MAX_SAFE_INTEGER) {\n            return num\n          }\n        }\n        return id\n      })\n    }\n\n    this.build = m[5] ? m[5].split('.') : []\n    this.format()\n  }\n\n  format () {\n    this.version = `${this.major}.${this.minor}.${this.patch}`\n    if (this.prerelease.length) {\n      this.version += `-${this.prerelease.join('.')}`\n    }\n    return this.version\n  }\n\n  toString () {\n    return this.version\n  }\n\n  compare (other) {\n    debug('SemVer.compare', this.version, this.options, other)\n    if (!(other instanceof SemVer)) {\n      if (typeof other === 'string' && other === this.version) {\n        return 0\n      }\n      other = new SemVer(other, this.options)\n    }\n\n    if (other.version === this.version) {\n      return 0\n    }\n\n    return this.compareMain(other) || this.comparePre(other)\n  }\n\n  compareMain (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    if (this.major < other.major) {\n      return -1\n    }\n    if (this.major > other.major) {\n      return 1\n    }\n    if (this.minor < other.minor) {\n      return -1\n    }\n    if (this.minor > other.minor) {\n      return 1\n    }\n    if (this.patch < other.patch) {\n      return -1\n    }\n    if (this.patch > other.patch) {\n      return 1\n    }\n    return 0\n  }\n\n  comparePre (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    // NOT having a prerelease is > having one\n    if (this.prerelease.length && !other.prerelease.length) {\n      return -1\n    } else if (!this.prerelease.length && other.prerelease.length) {\n      return 1\n    } else if (!this.prerelease.length && !other.prerelease.length) {\n      return 0\n    }\n\n    let i = 0\n    do {\n      const a = this.prerelease[i]\n      const b = other.prerelease[i]\n      debug('prerelease compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  compareBuild (other) {\n    if (!(other instanceof SemVer)) {\n      other = new SemVer(other, this.options)\n    }\n\n    let i = 0\n    do {\n      const a = this.build[i]\n      const b = other.build[i]\n      debug('build compare', i, a, b)\n      if (a === undefined && b === undefined) {\n        return 0\n      } else if (b === undefined) {\n        return 1\n      } else if (a === undefined) {\n        return -1\n      } else if (a === b) {\n        continue\n      } else {\n        return compareIdentifiers(a, b)\n      }\n    } while (++i)\n  }\n\n  // preminor will bump the version up to the next minor release, and immediately\n  // down to pre-release. premajor and prepatch work the same way.\n  inc (release, identifier, identifierBase) {\n    if (release.startsWith('pre')) {\n      if (!identifier && identifierBase === false) {\n        throw new Error('invalid increment argument: identifier is empty')\n      }\n      // Avoid an invalid semver results\n      if (identifier) {\n        const match = `-${identifier}`.match(this.options.loose ? re[t.PRERELEASELOOSE] : re[t.PRERELEASE])\n        if (!match || match[1] !== identifier) {\n          throw new Error(`invalid identifier: ${identifier}`)\n        }\n      }\n    }\n\n    switch (release) {\n      case 'premajor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor = 0\n        this.major++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'preminor':\n        this.prerelease.length = 0\n        this.patch = 0\n        this.minor++\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'prepatch':\n        // If this is already a prerelease, it will bump to the next version\n        // drop any prereleases that might already exist, since they are not\n        // relevant at this point.\n        this.prerelease.length = 0\n        this.inc('patch', identifier, identifierBase)\n        this.inc('pre', identifier, identifierBase)\n        break\n      // If the input is a non-prerelease version, this acts the same as\n      // prepatch.\n      case 'prerelease':\n        if (this.prerelease.length === 0) {\n          this.inc('patch', identifier, identifierBase)\n        }\n        this.inc('pre', identifier, identifierBase)\n        break\n      case 'release':\n        if (this.prerelease.length === 0) {\n          throw new Error(`version ${this.raw} is not a prerelease`)\n        }\n        this.prerelease.length = 0\n        break\n\n      case 'major':\n        // If this is a pre-major version, bump up to the same major version.\n        // Otherwise increment major.\n        // 1.0.0-5 bumps to 1.0.0\n        // 1.1.0 bumps to 2.0.0\n        if (\n          this.minor !== 0 ||\n          this.patch !== 0 ||\n          this.prerelease.length === 0\n        ) {\n          this.major++\n        }\n        this.minor = 0\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'minor':\n        // If this is a pre-minor version, bump up to the same minor version.\n        // Otherwise increment minor.\n        // 1.2.0-5 bumps to 1.2.0\n        // 1.2.1 bumps to 1.3.0\n        if (this.patch !== 0 || this.prerelease.length === 0) {\n          this.minor++\n        }\n        this.patch = 0\n        this.prerelease = []\n        break\n      case 'patch':\n        // If this is not a pre-release version, it will increment the patch.\n        // If it is a pre-release it will bump up to the same patch version.\n        // 1.2.0-5 patches to 1.2.0\n        // 1.2.0 patches to 1.2.1\n        if (this.prerelease.length === 0) {\n          this.patch++\n        }\n        this.prerelease = []\n        break\n      // This probably shouldn't be used publicly.\n      // 1.0.0 'pre' would become 1.0.0-0 which is the wrong direction.\n      case 'pre': {\n        const base = Number(identifierBase) ? 1 : 0\n\n        if (this.prerelease.length === 0) {\n          this.prerelease = [base]\n        } else {\n          let i = this.prerelease.length\n          while (--i >= 0) {\n            if (typeof this.prerelease[i] === 'number') {\n              this.prerelease[i]++\n              i = -2\n            }\n          }\n          if (i === -1) {\n            // didn't increment anything\n            if (identifier === this.prerelease.join('.') && identifierBase === false) {\n              throw new Error('invalid increment argument: identifier already exists')\n            }\n            this.prerelease.push(base)\n          }\n        }\n        if (identifier) {\n          // 1.2.0-beta.1 bumps to 1.2.0-beta.2,\n          // 1.2.0-beta.fooblz or 1.2.0-beta bumps to 1.2.0-beta.0\n          let prerelease = [identifier, base]\n          if (identifierBase === false) {\n            prerelease = [identifier]\n          }\n          if (compareIdentifiers(this.prerelease[0], identifier) === 0) {\n            if (isNaN(this.prerelease[1])) {\n              this.prerelease = prerelease\n            }\n          } else {\n            this.prerelease = prerelease\n          }\n        }\n        break\n      }\n      default:\n        throw new Error(`invalid increment argument: ${release}`)\n    }\n    this.raw = this.format()\n    if (this.build.length) {\n      this.raw += `+${this.build.join('.')}`\n    }\n    return this\n  }\n}\n\nmodule.exports = SemVer\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst parse = (version, options, throwErrors = false) => {\n  if (version instanceof SemVer) {\n    return version\n  }\n  try {\n    return new SemVer(version, options)\n  } catch (er) {\n    if (!throwErrors) {\n      return null\n    }\n    throw er\n  }\n}\n\nmodule.exports = parse\n", "'use strict'\n\nclass LRUCache {\n  constructor () {\n    this.max = 1000\n    this.map = new Map()\n  }\n\n  get (key) {\n    const value = this.map.get(key)\n    if (value === undefined) {\n      return undefined\n    } else {\n      // Remove the key from the map and add it to the end\n      this.map.delete(key)\n      this.map.set(key, value)\n      return value\n    }\n  }\n\n  delete (key) {\n    return this.map.delete(key)\n  }\n\n  set (key, value) {\n    const deleted = this.delete(key)\n\n    if (!deleted && value !== undefined) {\n      // If cache is full, delete the least recently used item\n      if (this.map.size >= this.max) {\n        const firstKey = this.map.keys().next().value\n        this.delete(firstKey)\n      }\n\n      this.map.set(key, value)\n    }\n\n    return this\n  }\n}\n\nmodule.exports = LRUCache\n", "'use strict'\n\nconst SemVer = require('../classes/semver')\nconst compare = (a, b, loose) =>\n  new SemVer(a, loose).compare(new SemVer(b, loose))\n\nmodule.exports = compare\n", "'use strict'\n\nconst compare = require('./compare')\nconst eq = (a, b, loose) => compare(a, b, loose) === 0\nmodule.exports = eq\n", "'use strict'\n\nconst compare = require('./compare')\nconst neq = (a, b, loose) => compare(a, b, loose) !== 0\nmodule.exports = neq\n", "'use strict'\n\nconst compare = require('./compare')\nconst gt = (a, b, loose) => compare(a, b, loose) > 0\nmodule.exports = gt\n", "'use strict'\n\nconst compare = require('./compare')\nconst gte = (a, b, loose) => compare(a, b, loose) >= 0\nmodule.exports = gte\n", "'use strict'\n\nconst compare = require('./compare')\nconst lt = (a, b, loose) => compare(a, b, loose) < 0\nmodule.exports = lt\n", "'use strict'\n\nconst compare = require('./compare')\nconst lte = (a, b, loose) => compare(a, b, loose) <= 0\nmodule.exports = lte\n", "'use strict'\n\nconst eq = require('./eq')\nconst neq = require('./neq')\nconst gt = require('./gt')\nconst gte = require('./gte')\nconst lt = require('./lt')\nconst lte = require('./lte')\n\nconst cmp = (a, op, b, loose) => {\n  switch (op) {\n    case '===':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a === b\n\n    case '!==':\n      if (typeof a === 'object') {\n        a = a.version\n      }\n      if (typeof b === 'object') {\n        b = b.version\n      }\n      return a !== b\n\n    case '':\n    case '=':\n    case '==':\n      return eq(a, b, loose)\n\n    case '!=':\n      return neq(a, b, loose)\n\n    case '>':\n      return gt(a, b, loose)\n\n    case '>=':\n      return gte(a, b, loose)\n\n    case '<':\n      return lt(a, b, loose)\n\n    case '<=':\n      return lte(a, b, loose)\n\n    default:\n      throw new TypeError(`Invalid operator: ${op}`)\n  }\n}\nmodule.exports = cmp\n", "'use strict'\n\nconst ANY = Symbol('SemVer ANY')\n// hoisted class for cyclic dependency\nclass Comparator {\n  static get ANY () {\n    return ANY\n  }\n\n  constructor (comp, options) {\n    options = parseOptions(options)\n\n    if (comp instanceof Comparator) {\n      if (comp.loose === !!options.loose) {\n        return comp\n      } else {\n        comp = comp.value\n      }\n    }\n\n    comp = comp.trim().split(/\\s+/).join(' ')\n    debug('comparator', comp, options)\n    this.options = options\n    this.loose = !!options.loose\n    this.parse(comp)\n\n    if (this.semver === ANY) {\n      this.value = ''\n    } else {\n      this.value = this.operator + this.semver.version\n    }\n\n    debug('comp', this)\n  }\n\n  parse (comp) {\n    const r = this.options.loose ? re[t.COMPARATORLOOSE] : re[t.COMPARATOR]\n    const m = comp.match(r)\n\n    if (!m) {\n      throw new TypeError(`Invalid comparator: ${comp}`)\n    }\n\n    this.operator = m[1] !== undefined ? m[1] : ''\n    if (this.operator === '=') {\n      this.operator = ''\n    }\n\n    // if it literally is just '>' or '' then allow anything.\n    if (!m[2]) {\n      this.semver = ANY\n    } else {\n      this.semver = new SemVer(m[2], this.options.loose)\n    }\n  }\n\n  toString () {\n    return this.value\n  }\n\n  test (version) {\n    debug('Comparator.test', version, this.options.loose)\n\n    if (this.semver === ANY || version === ANY) {\n      return true\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    return cmp(version, this.operator, this.semver, this.options)\n  }\n\n  intersects (comp, options) {\n    if (!(comp instanceof Comparator)) {\n      throw new TypeError('a Comparator is required')\n    }\n\n    if (this.operator === '') {\n      if (this.value === '') {\n        return true\n      }\n      return new Range(comp.value, options).test(this.value)\n    } else if (comp.operator === '') {\n      if (comp.value === '') {\n        return true\n      }\n      return new Range(this.value, options).test(comp.semver)\n    }\n\n    options = parseOptions(options)\n\n    // Special cases where nothing can possibly be lower\n    if (options.includePrerelease &&\n      (this.value === '<0.0.0-0' || comp.value === '<0.0.0-0')) {\n      return false\n    }\n    if (!options.includePrerelease &&\n      (this.value.startsWith('<0.0.0') || comp.value.startsWith('<0.0.0'))) {\n      return false\n    }\n\n    // Same direction increasing (> or >=)\n    if (this.operator.startsWith('>') && comp.operator.startsWith('>')) {\n      return true\n    }\n    // Same direction decreasing (< or <=)\n    if (this.operator.startsWith('<') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // same SemVer and both sides are inclusive (<= or >=)\n    if (\n      (this.semver.version === comp.semver.version) &&\n      this.operator.includes('=') && comp.operator.includes('=')) {\n      return true\n    }\n    // opposite directions less than\n    if (cmp(this.semver, '<', comp.semver, options) &&\n      this.operator.startsWith('>') && comp.operator.startsWith('<')) {\n      return true\n    }\n    // opposite directions greater than\n    if (cmp(this.semver, '>', comp.semver, options) &&\n      this.operator.startsWith('<') && comp.operator.startsWith('>')) {\n      return true\n    }\n    return false\n  }\n}\n\nmodule.exports = Comparator\n\nconst parseOptions = require('../internal/parse-options')\nconst { safeRe: re, t } = require('../internal/re')\nconst cmp = require('../functions/cmp')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst Range = require('./range')\n", "'use strict'\n\nconst SPACE_CHARACTERS = /\\s+/g\n\n// hoisted class for cyclic dependency\nclass Range {\n  constructor (range, options) {\n    options = parseOptions(options)\n\n    if (range instanceof Range) {\n      if (\n        range.loose === !!options.loose &&\n        range.includePrerelease === !!options.includePrerelease\n      ) {\n        return range\n      } else {\n        return new Range(range.raw, options)\n      }\n    }\n\n    if (range instanceof Comparator) {\n      // just put it in the set and return\n      this.raw = range.value\n      this.set = [[range]]\n      this.formatted = undefined\n      return this\n    }\n\n    this.options = options\n    this.loose = !!options.loose\n    this.includePrerelease = !!options.includePrerelease\n\n    // First reduce all whitespace as much as possible so we do not have to rely\n    // on potentially slow regexes like \\s*. This is then stored and used for\n    // future error messages as well.\n    this.raw = range.trim().replace(SPACE_CHARACTERS, ' ')\n\n    // First, split on ||\n    this.set = this.raw\n      .split('||')\n      // map the range to a 2d array of comparators\n      .map(r => this.parseRange(r.trim()))\n      // throw out any comparator lists that are empty\n      // this generally means that it was not a valid range, which is allowed\n      // in loose mode, but will still throw if the WHOLE range is invalid.\n      .filter(c => c.length)\n\n    if (!this.set.length) {\n      throw new TypeError(`Invalid SemVer Range: ${this.raw}`)\n    }\n\n    // if we have any that are not the null set, throw out null sets.\n    if (this.set.length > 1) {\n      // keep the first one, in case they're all null sets\n      const first = this.set[0]\n      this.set = this.set.filter(c => !isNullSet(c[0]))\n      if (this.set.length === 0) {\n        this.set = [first]\n      } else if (this.set.length > 1) {\n        // if we have any that are *, then the range is just *\n        for (const c of this.set) {\n          if (c.length === 1 && isAny(c[0])) {\n            this.set = [c]\n            break\n          }\n        }\n      }\n    }\n\n    this.formatted = undefined\n  }\n\n  get range () {\n    if (this.formatted === undefined) {\n      this.formatted = ''\n      for (let i = 0; i < this.set.length; i++) {\n        if (i > 0) {\n          this.formatted += '||'\n        }\n        const comps = this.set[i]\n        for (let k = 0; k < comps.length; k++) {\n          if (k > 0) {\n            this.formatted += ' '\n          }\n          this.formatted += comps[k].toString().trim()\n        }\n      }\n    }\n    return this.formatted\n  }\n\n  format () {\n    return this.range\n  }\n\n  toString () {\n    return this.range\n  }\n\n  parseRange (range) {\n    // memoize range parsing for performance.\n    // this is a very hot path, and fully deterministic.\n    const memoOpts =\n      (this.options.includePrerelease && FLAG_INCLUDE_PRERELEASE) |\n      (this.options.loose && FLAG_LOOSE)\n    const memoKey = memoOpts + ':' + range\n    const cached = cache.get(memoKey)\n    if (cached) {\n      return cached\n    }\n\n    const loose = this.options.loose\n    // `1.2.3 - 1.2.4` => `>=1.2.3 <=1.2.4`\n    const hr = loose ? re[t.HYPHENRANGELOOSE] : re[t.HYPHENRANGE]\n    range = range.replace(hr, hyphenReplace(this.options.includePrerelease))\n    debug('hyphen replace', range)\n\n    // `> 1.2.3 < 1.2.5` => `>1.2.3 <1.2.5`\n    range = range.replace(re[t.COMPARATORTRIM], comparatorTrimReplace)\n    debug('comparator trim', range)\n\n    // `~ 1.2.3` => `~1.2.3`\n    range = range.replace(re[t.TILDETRIM], tildeTrimReplace)\n    debug('tilde trim', range)\n\n    // `^ 1.2.3` => `^1.2.3`\n    range = range.replace(re[t.CARETTRIM], caretTrimReplace)\n    debug('caret trim', range)\n\n    // At this point, the range is completely trimmed and\n    // ready to be split into comparators.\n\n    let rangeList = range\n      .split(' ')\n      .map(comp => parseComparator(comp, this.options))\n      .join(' ')\n      .split(/\\s+/)\n      // >=0.0.0 is equivalent to *\n      .map(comp => replaceGTE0(comp, this.options))\n\n    if (loose) {\n      // in loose mode, throw out any that are not valid comparators\n      rangeList = rangeList.filter(comp => {\n        debug('loose invalid filter', comp, this.options)\n        return !!comp.match(re[t.COMPARATORLOOSE])\n      })\n    }\n    debug('range list', rangeList)\n\n    // if any comparators are the null set, then replace with JUST null set\n    // if more than one comparator, remove any * comparators\n    // also, don't include the same comparator more than once\n    const rangeMap = new Map()\n    const comparators = rangeList.map(comp => new Comparator(comp, this.options))\n    for (const comp of comparators) {\n      if (isNullSet(comp)) {\n        return [comp]\n      }\n      rangeMap.set(comp.value, comp)\n    }\n    if (rangeMap.size > 1 && rangeMap.has('')) {\n      rangeMap.delete('')\n    }\n\n    const result = [...rangeMap.values()]\n    cache.set(memoKey, result)\n    return result\n  }\n\n  intersects (range, options) {\n    if (!(range instanceof Range)) {\n      throw new TypeError('a Range is required')\n    }\n\n    return this.set.some((thisComparators) => {\n      return (\n        isSatisfiable(thisComparators, options) &&\n        range.set.some((rangeComparators) => {\n          return (\n            isSatisfiable(rangeComparators, options) &&\n            thisComparators.every((thisComparator) => {\n              return rangeComparators.every((rangeComparator) => {\n                return thisComparator.intersects(rangeComparator, options)\n              })\n            })\n          )\n        })\n      )\n    })\n  }\n\n  // if ANY of the sets match ALL of its comparators, then pass\n  test (version) {\n    if (!version) {\n      return false\n    }\n\n    if (typeof version === 'string') {\n      try {\n        version = new SemVer(version, this.options)\n      } catch (er) {\n        return false\n      }\n    }\n\n    for (let i = 0; i < this.set.length; i++) {\n      if (testSet(this.set[i], version, this.options)) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\nmodule.exports = Range\n\nconst LRU = require('../internal/lrucache')\nconst cache = new LRU()\n\nconst parseOptions = require('../internal/parse-options')\nconst Comparator = require('./comparator')\nconst debug = require('../internal/debug')\nconst SemVer = require('./semver')\nconst {\n  safeRe: re,\n  t,\n  comparatorTrimReplace,\n  tildeTrimReplace,\n  caretTrimReplace,\n} = require('../internal/re')\nconst { FLAG_INCLUDE_PRERELEASE, FLAG_LOOSE } = require('../internal/constants')\n\nconst isNullSet = c => c.value === '<0.0.0-0'\nconst isAny = c => c.value === ''\n\n// take a set of comparators and determine whether there\n// exists a version which can satisfy it\nconst isSatisfiable = (comparators, options) => {\n  let result = true\n  const remainingComparators = comparators.slice()\n  let testComparator = remainingComparators.pop()\n\n  while (result && remainingComparators.length) {\n    result = remainingComparators.every((otherComparator) => {\n      return testComparator.intersects(otherComparator, options)\n    })\n\n    testComparator = remainingComparators.pop()\n  }\n\n  return result\n}\n\n// comprised of xranges, tildes, stars, and gtlt's at this point.\n// already replaced the hyphen ranges\n// turn into a set of JUST comparators.\nconst parseComparator = (comp, options) => {\n  comp = comp.replace(re[t.BUILD], '')\n  debug('comp', comp, options)\n  comp = replaceCarets(comp, options)\n  debug('caret', comp)\n  comp = replaceTildes(comp, options)\n  debug('tildes', comp)\n  comp = replaceXRanges(comp, options)\n  debug('xrange', comp)\n  comp = replaceStars(comp, options)\n  debug('stars', comp)\n  return comp\n}\n\nconst isX = id => !id || id.toLowerCase() === 'x' || id === '*'\n\n// ~, ~> --> * (any, kinda silly)\n// ~2, ~2.x, ~2.x.x, ~>2, ~>2.x ~>2.x.x --> >=2.0.0 <3.0.0-0\n// ~2.0, ~2.0.x, ~>2.0, ~>2.0.x --> >=2.0.0 <2.1.0-0\n// ~1.2, ~1.2.x, ~>1.2, ~>1.2.x --> >=1.2.0 <1.3.0-0\n// ~1.2.3, ~>1.2.3 --> >=1.2.3 <1.3.0-0\n// ~1.2.0, ~>1.2.0 --> >=1.2.0 <1.3.0-0\n// ~0.0.1 --> >=0.0.1 <0.1.0-0\nconst replaceTildes = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceTilde(c, options))\n    .join(' ')\n}\n\nconst replaceTilde = (comp, options) => {\n  const r = options.loose ? re[t.TILDELOOSE] : re[t.TILDE]\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('tilde', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0 <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      // ~1.2 == >=1.2.0 <1.3.0-0\n      ret = `>=${M}.${m}.0 <${M}.${+m + 1}.0-0`\n    } else if (pr) {\n      debug('replaceTilde pr', pr)\n      ret = `>=${M}.${m}.${p}-${pr\n      } <${M}.${+m + 1}.0-0`\n    } else {\n      // ~1.2.3 == >=1.2.3 <1.3.0-0\n      ret = `>=${M}.${m}.${p\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('tilde return', ret)\n    return ret\n  })\n}\n\n// ^ --> * (any, kinda silly)\n// ^2, ^2.x, ^2.x.x --> >=2.0.0 <3.0.0-0\n// ^2.0, ^2.0.x --> >=2.0.0 <3.0.0-0\n// ^1.2, ^1.2.x --> >=1.2.0 <2.0.0-0\n// ^1.2.3 --> >=1.2.3 <2.0.0-0\n// ^1.2.0 --> >=1.2.0 <2.0.0-0\n// ^0.0.1 --> >=0.0.1 <0.0.2-0\n// ^0.1.0 --> >=0.1.0 <0.2.0-0\nconst replaceCarets = (comp, options) => {\n  return comp\n    .trim()\n    .split(/\\s+/)\n    .map((c) => replaceCaret(c, options))\n    .join(' ')\n}\n\nconst replaceCaret = (comp, options) => {\n  debug('caret', comp, options)\n  const r = options.loose ? re[t.CARETLOOSE] : re[t.CARET]\n  const z = options.includePrerelease ? '-0' : ''\n  return comp.replace(r, (_, M, m, p, pr) => {\n    debug('caret', comp, _, M, m, p, pr)\n    let ret\n\n    if (isX(M)) {\n      ret = ''\n    } else if (isX(m)) {\n      ret = `>=${M}.0.0${z} <${+M + 1}.0.0-0`\n    } else if (isX(p)) {\n      if (M === '0') {\n        ret = `>=${M}.${m}.0${z} <${M}.${+m + 1}.0-0`\n      } else {\n        ret = `>=${M}.${m}.0${z} <${+M + 1}.0.0-0`\n      }\n    } else if (pr) {\n      debug('replaceCaret pr', pr)\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p}-${pr\n          } <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p}-${pr\n        } <${+M + 1}.0.0-0`\n      }\n    } else {\n      debug('no pr')\n      if (M === '0') {\n        if (m === '0') {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${m}.${+p + 1}-0`\n        } else {\n          ret = `>=${M}.${m}.${p\n          }${z} <${M}.${+m + 1}.0-0`\n        }\n      } else {\n        ret = `>=${M}.${m}.${p\n        } <${+M + 1}.0.0-0`\n      }\n    }\n\n    debug('caret return', ret)\n    return ret\n  })\n}\n\nconst replaceXRanges = (comp, options) => {\n  debug('replaceXRanges', comp, options)\n  return comp\n    .split(/\\s+/)\n    .map((c) => replaceXRange(c, options))\n    .join(' ')\n}\n\nconst replaceXRange = (comp, options) => {\n  comp = comp.trim()\n  const r = options.loose ? re[t.XRANGELOOSE] : re[t.XRANGE]\n  return comp.replace(r, (ret, gtlt, M, m, p, pr) => {\n    debug('xRange', comp, ret, gtlt, M, m, p, pr)\n    const xM = isX(M)\n    const xm = xM || isX(m)\n    const xp = xm || isX(p)\n    const anyX = xp\n\n    if (gtlt === '=' && anyX) {\n      gtlt = ''\n    }\n\n    // if we're including prereleases in the match, then we need\n    // to fix this to -0, the lowest possible prerelease value\n    pr = options.includePrerelease ? '-0' : ''\n\n    if (xM) {\n      if (gtlt === '>' || gtlt === '<') {\n        // nothing is allowed\n        ret = '<0.0.0-0'\n      } else {\n        // nothing is forbidden\n        ret = '*'\n      }\n    } else if (gtlt && anyX) {\n      // we know patch is an x, because we have any x at all.\n      // replace X with 0\n      if (xm) {\n        m = 0\n      }\n      p = 0\n\n      if (gtlt === '>') {\n        // >1 => >=2.0.0\n        // >1.2 => >=1.3.0\n        gtlt = '>='\n        if (xm) {\n          M = +M + 1\n          m = 0\n          p = 0\n        } else {\n          m = +m + 1\n          p = 0\n        }\n      } else if (gtlt === '<=') {\n        // <=0.7.x is actually <0.8.0, since any 0.7.x should\n        // pass.  Similarly, <=7.x is actually <8.0.0, etc.\n        gtlt = '<'\n        if (xm) {\n          M = +M + 1\n        } else {\n          m = +m + 1\n        }\n      }\n\n      if (gtlt === '<') {\n        pr = '-0'\n      }\n\n      ret = `${gtlt + M}.${m}.${p}${pr}`\n    } else if (xm) {\n      ret = `>=${M}.0.0${pr} <${+M + 1}.0.0-0`\n    } else if (xp) {\n      ret = `>=${M}.${m}.0${pr\n      } <${M}.${+m + 1}.0-0`\n    }\n\n    debug('xRange return', ret)\n\n    return ret\n  })\n}\n\n// Because * is AND-ed with everything else in the comparator,\n// and '' means \"any version\", just remove the *s entirely.\nconst replaceStars = (comp, options) => {\n  debug('replaceStars', comp, options)\n  // Looseness is ignored here.  star is always as loose as it gets!\n  return comp\n    .trim()\n    .replace(re[t.STAR], '')\n}\n\nconst replaceGTE0 = (comp, options) => {\n  debug('replaceGTE0', comp, options)\n  return comp\n    .trim()\n    .replace(re[options.includePrerelease ? t.GTE0PRE : t.GTE0], '')\n}\n\n// This function is passed to string.replace(re[t.HYPHENRANGE])\n// M, m, patch, prerelease, build\n// 1.2 - 3.4.5 => >=1.2.0 <=3.4.5\n// 1.2.3 - 3.4 => >=1.2.0 <3.5.0-0 Any 3.4.x will do\n// 1.2 - 3.4 => >=1.2.0 <3.5.0-0\n// TODO build?\nconst hyphenReplace = incPr => ($0,\n  from, fM, fm, fp, fpr, fb,\n  to, tM, tm, tp, tpr) => {\n  if (isX(fM)) {\n    from = ''\n  } else if (isX(fm)) {\n    from = `>=${fM}.0.0${incPr ? '-0' : ''}`\n  } else if (isX(fp)) {\n    from = `>=${fM}.${fm}.0${incPr ? '-0' : ''}`\n  } else if (fpr) {\n    from = `>=${from}`\n  } else {\n    from = `>=${from}${incPr ? '-0' : ''}`\n  }\n\n  if (isX(tM)) {\n    to = ''\n  } else if (isX(tm)) {\n    to = `<${+tM + 1}.0.0-0`\n  } else if (isX(tp)) {\n    to = `<${tM}.${+tm + 1}.0-0`\n  } else if (tpr) {\n    to = `<=${tM}.${tm}.${tp}-${tpr}`\n  } else if (incPr) {\n    to = `<${tM}.${tm}.${+tp + 1}-0`\n  } else {\n    to = `<=${to}`\n  }\n\n  return `${from} ${to}`.trim()\n}\n\nconst testSet = (set, version, options) => {\n  for (let i = 0; i < set.length; i++) {\n    if (!set[i].test(version)) {\n      return false\n    }\n  }\n\n  if (version.prerelease.length && !options.includePrerelease) {\n    // Find the set of versions that are allowed to have prereleases\n    // For example, ^1.2.3-pr.1 desugars to >=1.2.3-pr.1 <2.0.0\n    // That should allow `1.2.3-pr.2` to pass.\n    // However, `1.2.4-alpha.notready` should NOT be allowed,\n    // even though it's within the range set by the comparators.\n    for (let i = 0; i < set.length; i++) {\n      debug(set[i].semver)\n      if (set[i].semver === Comparator.ANY) {\n        continue\n      }\n\n      if (set[i].semver.prerelease.length > 0) {\n        const allowed = set[i].semver\n        if (allowed.major === version.major &&\n            allowed.minor === version.minor &&\n            allowed.patch === version.patch) {\n          return true\n        }\n      }\n    }\n\n    // Version has a -pre, but it's not one of the ones we like.\n    return false\n  }\n\n  return true\n}\n", "'use strict'\n\nconst Range = require('../classes/range')\nconst satisfies = (version, range, options) => {\n  try {\n    range = new Range(range, options)\n  } catch (er) {\n    return false\n  }\n  return range.test(version)\n}\nmodule.exports = satisfies\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DiagnosticPullMode = exports.vsdiag = void 0;\n__exportStar(require(\"vscode-languageserver-protocol\"), exports);\n__exportStar(require(\"./features\"), exports);\nvar diagnostic_1 = require(\"./diagnostic\");\nObject.defineProperty(exports, \"vsdiag\", { enumerable: true, get: function () { return diagnostic_1.vsdiag; } });\nObject.defineProperty(exports, \"DiagnosticPullMode\", { enumerable: true, get: function () { return diagnostic_1.DiagnosticPullMode; } });\n__exportStar(require(\"./client\"), exports);\n", "\"use strict\";\n/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ------------------------------------------------------------------------------------------ */\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SettingMonitor = exports.LanguageClient = exports.TransportKind = void 0;\nconst cp = require(\"child_process\");\nconst fs = require(\"fs\");\nconst path = require(\"path\");\nconst vscode_1 = require(\"vscode\");\nconst Is = require(\"../common/utils/is\");\nconst client_1 = require(\"../common/client\");\nconst processes_1 = require(\"./processes\");\nconst node_1 = require(\"vscode-languageserver-protocol/node\");\n// Import SemVer functions individually to avoid circular dependencies in SemVer\nconst semverParse = require(\"semver/functions/parse\");\nconst semverSatisfies = require(\"semver/functions/satisfies\");\n__exportStar(require(\"vscode-languageserver-protocol/node\"), exports);\n__exportStar(require(\"../common/api\"), exports);\nconst REQUIRED_VSCODE_VERSION = '^1.82.0'; // do not change format, updated by `updateVSCode` script\nvar TransportKind;\n(function (TransportKind) {\n    TransportKind[TransportKind[\"stdio\"] = 0] = \"stdio\";\n    TransportKind[TransportKind[\"ipc\"] = 1] = \"ipc\";\n    TransportKind[TransportKind[\"pipe\"] = 2] = \"pipe\";\n    TransportKind[TransportKind[\"socket\"] = 3] = \"socket\";\n})(TransportKind || (exports.TransportKind = TransportKind = {}));\nvar Transport;\n(function (Transport) {\n    function isSocket(value) {\n        const candidate = value;\n        return candidate && candidate.kind === TransportKind.socket && Is.number(candidate.port);\n    }\n    Transport.isSocket = isSocket;\n})(Transport || (Transport = {}));\nvar Executable;\n(function (Executable) {\n    function is(value) {\n        return Is.string(value.command);\n    }\n    Executable.is = is;\n})(Executable || (Executable = {}));\nvar NodeModule;\n(function (NodeModule) {\n    function is(value) {\n        return Is.string(value.module);\n    }\n    NodeModule.is = is;\n})(NodeModule || (NodeModule = {}));\nvar StreamInfo;\n(function (StreamInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.writer !== undefined && candidate.reader !== undefined;\n    }\n    StreamInfo.is = is;\n})(StreamInfo || (StreamInfo = {}));\nvar ChildProcessInfo;\n(function (ChildProcessInfo) {\n    function is(value) {\n        let candidate = value;\n        return candidate && candidate.process !== undefined && typeof candidate.detached === 'boolean';\n    }\n    ChildProcessInfo.is = is;\n})(ChildProcessInfo || (ChildProcessInfo = {}));\nclass LanguageClient extends client_1.BaseLanguageClient {\n    constructor(arg1, arg2, arg3, arg4, arg5) {\n        let id;\n        let name;\n        let serverOptions;\n        let clientOptions;\n        let forceDebug;\n        if (Is.string(arg2)) {\n            id = arg1;\n            name = arg2;\n            serverOptions = arg3;\n            clientOptions = arg4;\n            forceDebug = !!arg5;\n        }\n        else {\n            id = arg1.toLowerCase();\n            name = arg1;\n            serverOptions = arg2;\n            clientOptions = arg3;\n            forceDebug = arg4;\n        }\n        if (forceDebug === undefined) {\n            forceDebug = false;\n        }\n        super(id, name, clientOptions);\n        this._serverOptions = serverOptions;\n        this._forceDebug = forceDebug;\n        this._isInDebugMode = forceDebug;\n        try {\n            this.checkVersion();\n        }\n        catch (error) {\n            if (Is.string(error.message)) {\n                this.outputChannel.appendLine(error.message);\n            }\n            throw error;\n        }\n    }\n    checkVersion() {\n        const codeVersion = semverParse(vscode_1.version);\n        if (!codeVersion) {\n            throw new Error(`No valid VS Code version detected. Version string is: ${vscode_1.version}`);\n        }\n        // Remove the insider pre-release since we stay API compatible.\n        if (codeVersion.prerelease && codeVersion.prerelease.length > 0) {\n            codeVersion.prerelease = [];\n        }\n        if (!semverSatisfies(codeVersion, REQUIRED_VSCODE_VERSION)) {\n            throw new Error(`The language client requires VS Code version ${REQUIRED_VSCODE_VERSION} but received version ${vscode_1.version}`);\n        }\n    }\n    get isInDebugMode() {\n        return this._isInDebugMode;\n    }\n    async restart() {\n        await this.stop();\n        // We are in debug mode. Wait a little before we restart\n        // so that the debug port can be freed. We can safely ignore\n        // the disposable returned from start since it will call\n        // stop on the same client instance.\n        if (this.isInDebugMode) {\n            await new Promise((resolve) => setTimeout(resolve, 1000));\n            await this.start();\n        }\n        else {\n            await this.start();\n        }\n    }\n    stop(timeout = 2000) {\n        return super.stop(timeout).finally(() => {\n            if (this._serverProcess) {\n                const toCheck = this._serverProcess;\n                this._serverProcess = undefined;\n                if (this._isDetached === undefined || !this._isDetached) {\n                    this.checkProcessDied(toCheck);\n                }\n                this._isDetached = undefined;\n            }\n        });\n    }\n    checkProcessDied(childProcess) {\n        if (!childProcess || childProcess.pid === undefined) {\n            return;\n        }\n        setTimeout(() => {\n            // Test if the process is still alive. Throws an exception if not\n            try {\n                if (childProcess.pid !== undefined) {\n                    process.kill(childProcess.pid, 0);\n                    (0, processes_1.terminate)(childProcess);\n                }\n            }\n            catch (error) {\n                // All is fine.\n            }\n        }, 2000);\n    }\n    handleConnectionClosed() {\n        this._serverProcess = undefined;\n        return super.handleConnectionClosed();\n    }\n    fillInitializeParams(params) {\n        super.fillInitializeParams(params);\n        if (params.processId === null) {\n            params.processId = process.pid;\n        }\n    }\n    createMessageTransports(encoding) {\n        function getEnvironment(env, fork) {\n            if (!env && !fork) {\n                return undefined;\n            }\n            const result = Object.create(null);\n            Object.keys(process.env).forEach(key => result[key] = process.env[key]);\n            if (fork) {\n                result['ELECTRON_RUN_AS_NODE'] = '1';\n                result['ELECTRON_NO_ASAR'] = '1';\n            }\n            if (env) {\n                Object.keys(env).forEach(key => result[key] = env[key]);\n            }\n            return result;\n        }\n        const debugStartWith = ['--debug=', '--debug-brk=', '--inspect=', '--inspect-brk='];\n        const debugEquals = ['--debug', '--debug-brk', '--inspect', '--inspect-brk'];\n        function startedInDebugMode() {\n            let args = process.execArgv;\n            if (args) {\n                return args.some((arg) => {\n                    return debugStartWith.some(value => arg.startsWith(value)) ||\n                        debugEquals.some(value => arg === value);\n                });\n            }\n            return false;\n        }\n        function assertStdio(process) {\n            if (process.stdin === null || process.stdout === null || process.stderr === null) {\n                throw new Error('Process created without stdio streams');\n            }\n        }\n        const server = this._serverOptions;\n        // We got a function.\n        if (Is.func(server)) {\n            return server().then((result) => {\n                if (client_1.MessageTransports.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return result;\n                }\n                else if (StreamInfo.is(result)) {\n                    this._isDetached = !!result.detached;\n                    return { reader: new node_1.StreamMessageReader(result.reader), writer: new node_1.StreamMessageWriter(result.writer) };\n                }\n                else {\n                    let cp;\n                    if (ChildProcessInfo.is(result)) {\n                        cp = result.process;\n                        this._isDetached = result.detached;\n                    }\n                    else {\n                        cp = result;\n                        this._isDetached = false;\n                    }\n                    cp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                    return { reader: new node_1.StreamMessageReader(cp.stdout), writer: new node_1.StreamMessageWriter(cp.stdin) };\n                }\n            });\n        }\n        let json;\n        let runDebug = server;\n        if (runDebug.run || runDebug.debug) {\n            if (this._forceDebug || startedInDebugMode()) {\n                json = runDebug.debug;\n                this._isInDebugMode = true;\n            }\n            else {\n                json = runDebug.run;\n                this._isInDebugMode = false;\n            }\n        }\n        else {\n            json = server;\n        }\n        return this._getServerWorkingDir(json.options).then(serverWorkingDir => {\n            if (NodeModule.is(json) && json.module) {\n                let node = json;\n                let transport = node.transport || TransportKind.stdio;\n                if (node.runtime) {\n                    const args = [];\n                    const options = node.options ?? Object.create(null);\n                    if (options.execArgv) {\n                        options.execArgv.forEach(element => args.push(element));\n                    }\n                    args.push(node.module);\n                    if (node.args) {\n                        node.args.forEach(element => args.push(element));\n                    }\n                    const execOptions = Object.create(null);\n                    execOptions.cwd = serverWorkingDir;\n                    execOptions.env = getEnvironment(options.env, false);\n                    const runtime = this._getRuntimePath(node.runtime, serverWorkingDir);\n                    let pipeName = undefined;\n                    if (transport === TransportKind.ipc) {\n                        // exec options not correctly typed in lib\n                        execOptions.stdio = [null, null, null, 'ipc'];\n                        args.push('--node-ipc');\n                    }\n                    else if (transport === TransportKind.stdio) {\n                        args.push('--stdio');\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        pipeName = (0, node_1.generateRandomPipeName)();\n                        args.push(`--pipe=${pipeName}`);\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        args.push(`--socket=${transport.port}`);\n                    }\n                    args.push(`--clientProcessId=${process.pid.toString()}`);\n                    if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                        const serverProcess = cp.spawn(runtime, args, execOptions);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return handleChildProcessStartError(serverProcess, `Launching server using runtime ${runtime} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        if (transport === TransportKind.ipc) {\n                            serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return Promise.resolve({ reader: new node_1.IPCMessageReader(serverProcess), writer: new node_1.IPCMessageWriter(serverProcess) });\n                        }\n                        else {\n                            return Promise.resolve({ reader: new node_1.StreamMessageReader(serverProcess.stdout), writer: new node_1.StreamMessageWriter(serverProcess.stdin) });\n                        }\n                    }\n                    else if (transport === TransportKind.pipe) {\n                        return (0, node_1.createClientPipeTransport)(pipeName).then((transport) => {\n                            const process = cp.spawn(runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return handleChildProcessStartError(process, `Launching server using runtime ${runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                    else if (Transport.isSocket(transport)) {\n                        return (0, node_1.createClientSocketTransport)(transport.port).then((transport) => {\n                            const process = cp.spawn(runtime, args, execOptions);\n                            if (!process || !process.pid) {\n                                return handleChildProcessStartError(process, `Launching server using runtime ${runtime} failed.`);\n                            }\n                            this._serverProcess = process;\n                            process.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            process.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            return transport.onConnected().then((protocol) => {\n                                return { reader: protocol[0], writer: protocol[1] };\n                            });\n                        });\n                    }\n                }\n                else {\n                    let pipeName = undefined;\n                    return new Promise((resolve, reject) => {\n                        const args = (node.args && node.args.slice()) ?? [];\n                        if (transport === TransportKind.ipc) {\n                            args.push('--node-ipc');\n                        }\n                        else if (transport === TransportKind.stdio) {\n                            args.push('--stdio');\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            pipeName = (0, node_1.generateRandomPipeName)();\n                            args.push(`--pipe=${pipeName}`);\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            args.push(`--socket=${transport.port}`);\n                        }\n                        args.push(`--clientProcessId=${process.pid.toString()}`);\n                        const options = node.options ?? Object.create(null);\n                        options.env = getEnvironment(options.env, true);\n                        options.execArgv = options.execArgv || [];\n                        options.cwd = serverWorkingDir;\n                        options.silent = true;\n                        if (transport === TransportKind.ipc || transport === TransportKind.stdio) {\n                            const sp = cp.fork(node.module, args || [], options);\n                            assertStdio(sp);\n                            this._serverProcess = sp;\n                            sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                            if (transport === TransportKind.ipc) {\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                resolve({ reader: new node_1.IPCMessageReader(this._serverProcess), writer: new node_1.IPCMessageWriter(this._serverProcess) });\n                            }\n                            else {\n                                resolve({ reader: new node_1.StreamMessageReader(sp.stdout), writer: new node_1.StreamMessageWriter(sp.stdin) });\n                            }\n                        }\n                        else if (transport === TransportKind.pipe) {\n                            (0, node_1.createClientPipeTransport)(pipeName).then((transport) => {\n                                const sp = cp.fork(node.module, args || [], options);\n                                assertStdio(sp);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                }, reject);\n                            }, reject);\n                        }\n                        else if (Transport.isSocket(transport)) {\n                            (0, node_1.createClientSocketTransport)(transport.port).then((transport) => {\n                                const sp = cp.fork(node.module, args || [], options);\n                                assertStdio(sp);\n                                this._serverProcess = sp;\n                                sp.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                sp.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                                transport.onConnected().then((protocol) => {\n                                    resolve({ reader: protocol[0], writer: protocol[1] });\n                                }, reject);\n                            }, reject);\n                        }\n                    });\n                }\n            }\n            else if (Executable.is(json) && json.command) {\n                const command = json;\n                const args = json.args !== undefined ? json.args.slice(0) : [];\n                let pipeName = undefined;\n                const transport = json.transport;\n                if (transport === TransportKind.stdio) {\n                    args.push('--stdio');\n                }\n                else if (transport === TransportKind.pipe) {\n                    pipeName = (0, node_1.generateRandomPipeName)();\n                    args.push(`--pipe=${pipeName}`);\n                }\n                else if (Transport.isSocket(transport)) {\n                    args.push(`--socket=${transport.port}`);\n                }\n                else if (transport === TransportKind.ipc) {\n                    throw new Error(`Transport kind ipc is not support for command executable`);\n                }\n                const options = Object.assign({}, command.options);\n                options.cwd = options.cwd || serverWorkingDir;\n                if (transport === undefined || transport === TransportKind.stdio) {\n                    const serverProcess = cp.spawn(command.command, args, options);\n                    if (!serverProcess || !serverProcess.pid) {\n                        return handleChildProcessStartError(serverProcess, `Launching server using command ${command.command} failed.`);\n                    }\n                    serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                    this._serverProcess = serverProcess;\n                    this._isDetached = !!options.detached;\n                    return Promise.resolve({ reader: new node_1.StreamMessageReader(serverProcess.stdout), writer: new node_1.StreamMessageWriter(serverProcess.stdin) });\n                }\n                else if (transport === TransportKind.pipe) {\n                    return (0, node_1.createClientPipeTransport)(pipeName).then((transport) => {\n                        const serverProcess = cp.spawn(command.command, args, options);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return handleChildProcessStartError(serverProcess, `Launching server using command ${command.command} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        this._isDetached = !!options.detached;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        return transport.onConnected().then((protocol) => {\n                            return { reader: protocol[0], writer: protocol[1] };\n                        });\n                    });\n                }\n                else if (Transport.isSocket(transport)) {\n                    return (0, node_1.createClientSocketTransport)(transport.port).then((transport) => {\n                        const serverProcess = cp.spawn(command.command, args, options);\n                        if (!serverProcess || !serverProcess.pid) {\n                            return handleChildProcessStartError(serverProcess, `Launching server using command ${command.command} failed.`);\n                        }\n                        this._serverProcess = serverProcess;\n                        this._isDetached = !!options.detached;\n                        serverProcess.stderr.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        serverProcess.stdout.on('data', data => this.outputChannel.append(Is.string(data) ? data : data.toString(encoding)));\n                        return transport.onConnected().then((protocol) => {\n                            return { reader: protocol[0], writer: protocol[1] };\n                        });\n                    });\n                }\n            }\n            return Promise.reject(new Error(`Unsupported server configuration ` + JSON.stringify(server, null, 4)));\n        }).finally(() => {\n            if (this._serverProcess !== undefined) {\n                this._serverProcess.on('exit', (code, signal) => {\n                    if (code !== null) {\n                        this.error(`Server process exited with code ${code}.`, undefined, false);\n                    }\n                    if (signal !== null) {\n                        this.error(`Server process exited with signal ${signal}.`, undefined, false);\n                    }\n                });\n            }\n        });\n    }\n    _getRuntimePath(runtime, serverWorkingDirectory) {\n        if (path.isAbsolute(runtime)) {\n            return runtime;\n        }\n        const mainRootPath = this._mainGetRootPath();\n        if (mainRootPath !== undefined) {\n            const result = path.join(mainRootPath, runtime);\n            if (fs.existsSync(result)) {\n                return result;\n            }\n        }\n        if (serverWorkingDirectory !== undefined) {\n            const result = path.join(serverWorkingDirectory, runtime);\n            if (fs.existsSync(result)) {\n                return result;\n            }\n        }\n        return runtime;\n    }\n    _mainGetRootPath() {\n        let folders = vscode_1.workspace.workspaceFolders;\n        if (!folders || folders.length === 0) {\n            return undefined;\n        }\n        let folder = folders[0];\n        if (folder.uri.scheme === 'file') {\n            return folder.uri.fsPath;\n        }\n        return undefined;\n    }\n    _getServerWorkingDir(options) {\n        let cwd = options && options.cwd;\n        if (!cwd) {\n            cwd = this.clientOptions.workspaceFolder\n                ? this.clientOptions.workspaceFolder.uri.fsPath\n                : this._mainGetRootPath();\n        }\n        if (cwd) {\n            // make sure the folder exists otherwise creating the process will fail\n            return new Promise(s => {\n                fs.lstat(cwd, (err, stats) => {\n                    s(!err && stats.isDirectory() ? cwd : undefined);\n                });\n            });\n        }\n        return Promise.resolve(undefined);\n    }\n}\nexports.LanguageClient = LanguageClient;\nclass SettingMonitor {\n    constructor(_client, _setting) {\n        this._client = _client;\n        this._setting = _setting;\n        this._listeners = [];\n    }\n    start() {\n        vscode_1.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration, this, this._listeners);\n        this.onDidChangeConfiguration();\n        return new vscode_1.Disposable(() => {\n            if (this._client.needsStop()) {\n                void this._client.stop();\n            }\n        });\n    }\n    onDidChangeConfiguration() {\n        let index = this._setting.indexOf('.');\n        let primary = index >= 0 ? this._setting.substr(0, index) : this._setting;\n        let rest = index >= 0 ? this._setting.substr(index + 1) : undefined;\n        let enabled = rest ? vscode_1.workspace.getConfiguration(primary).get(rest, false) : vscode_1.workspace.getConfiguration(primary);\n        if (enabled && this._client.needsStart()) {\n            this._client.start().catch((error) => this._client.error('Start failed after configuration change', error, 'force'));\n        }\n        else if (!enabled && this._client.needsStop()) {\n            void this._client.stop().catch((error) => this._client.error('Stop failed after configuration change', error, 'force'));\n        }\n    }\n}\nexports.SettingMonitor = SettingMonitor;\nfunction handleChildProcessStartError(process, message) {\n    if (process === null) {\n        return Promise.reject(message);\n    }\n    return new Promise((_, reject) => {\n        process.on('error', (err) => {\n            reject(`${message} ${err}`);\n        });\n        // the error event should always be run immediately,\n        // but race on it just in case\n        setImmediate(() => reject(message));\n    });\n}\n", "/* --------------------------------------------------------------------------------------------\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n * ----------------------------------------------------------------------------------------- */\n'use strict';\n\nmodule.exports = require('./lib/node/main');", "export function noop(): undefined {\n  return undefined;\n}\n", "import { noop } from '../../utils';\nimport { AssertionError } from '../../stub/assert';\n\nexport function typeIsObject(x: any): x is object {\n  return (typeof x === 'object' && x !== null) || typeof x === 'function';\n}\n\nexport const rethrowAssertionErrorRejection: (e: any) => void =\n  DEBUG ? e => {\n    // Used throughout the reference implementation, as `.catch(rethrowAssertionErrorRejection)`, to ensure any errors\n    // get shown. There are places in the spec where we do promise transformations and purposefully ignore or don't\n    // expect any errors, but assertion errors are always problematic.\n    if (e && e instanceof AssertionError) {\n      setTimeout(() => {\n        throw e;\n      }, 0);\n    }\n  } : noop;\n\nexport function setFunctionName(fn: Function, name: string): void {\n  try {\n    Object.defineProperty(fn, 'name', {\n      value: name,\n      configurable: true\n    });\n  } catch {\n    // This property is non-configurable in older browsers, so ignore if this throws.\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name#browser_compatibility\n  }\n}\n", "import { rethrowAssertionErrorRejection } from './miscellaneous';\nimport assert from '../../stub/assert';\n\nconst originalPromise = Promise;\nconst originalPromiseThen = Promise.prototype.then;\nconst originalPromiseReject = Promise.reject.bind(originalPromise);\n\n// https://webidl.spec.whatwg.org/#a-new-promise\nexport function newPromise<T>(executor: (\n  resolve: (value: T | PromiseLike<T>) => void,\n  reject: (reason?: any) => void\n) => void): Promise<T> {\n  return new originalPromise(executor);\n}\n\n// https://webidl.spec.whatwg.org/#a-promise-resolved-with\nexport function promiseResolvedWith<T>(value: T | PromiseLike<T>): Promise<T> {\n  return newPromise(resolve => resolve(value));\n}\n\n// https://webidl.spec.whatwg.org/#a-promise-rejected-with\nexport function promiseRejectedWith<T = never>(reason: any): Promise<T> {\n  return originalPromiseReject(reason);\n}\n\nexport function PerformPromiseThen<T, TResult1 = T, TResult2 = never>(\n  promise: Promise<T>,\n  onFulfilled?: (value: T) => TResult1 | PromiseLike<TResult1>,\n  onRejected?: (reason: any) => TResult2 | PromiseLike<TResult2>): Promise<TResult1 | TResult2> {\n  // There doesn't appear to be any way to correctly emulate the behaviour from JavaScript, so this is just an\n  // approximation.\n  return originalPromiseThen.call(promise, onFulfilled, onRejected) as Promise<TResult1 | TResult2>;\n}\n\n// Bluebird logs a warning when a promise is created within a fulfillment handler, but then isn't returned\n// from that handler. To prevent this, return null instead of void from all handlers.\n// http://bluebirdjs.com/docs/warning-explanations.html#warning-a-promise-was-created-in-a-handler-but-was-not-returned-from-it\nexport function uponPromise<T>(\n  promise: Promise<T>,\n  onFulfilled?: (value: T) => null | PromiseLike<null>,\n  onRejected?: (reason: any) => null | PromiseLike<null>): void {\n  PerformPromiseThen(\n    PerformPromiseThen(promise, onFulfilled, onRejected),\n    undefined,\n    rethrowAssertionErrorRejection\n  );\n}\n\nexport function uponFulfillment<T>(promise: Promise<T>, onFulfilled: (value: T) => null | PromiseLike<null>): void {\n  uponPromise(promise, onFulfilled);\n}\n\nexport function uponRejection(promise: Promise<unknown>, onRejected: (reason: any) => null | PromiseLike<null>): void {\n  uponPromise(promise, undefined, onRejected);\n}\n\nexport function transformPromiseWith<T, TResult1 = T, TResult2 = never>(\n  promise: Promise<T>,\n  fulfillmentHandler?: (value: T) => TResult1 | PromiseLike<TResult1>,\n  rejectionHandler?: (reason: any) => TResult2 | PromiseLike<TResult2>): Promise<TResult1 | TResult2> {\n  return PerformPromiseThen(promise, fulfillmentHandler, rejectionHandler);\n}\n\nexport function setPromiseIsHandledToTrue(promise: Promise<unknown>): void {\n  PerformPromiseThen(promise, undefined, rethrowAssertionErrorRejection);\n}\n\nlet _queueMicrotask: (callback: () => void) => void = callback => {\n  if (typeof queueMicrotask === 'function') {\n    _queueMicrotask = queueMicrotask;\n  } else {\n    const resolvedPromise = promiseResolvedWith(undefined);\n    _queueMicrotask = cb => PerformPromiseThen(resolvedPromise, cb);\n  }\n  return _queueMicrotask(callback);\n};\n\nexport { _queueMicrotask as queueMicrotask };\n\nexport function reflectCall<T, A extends any[], R>(F: (this: T, ...fnArgs: A) => R, V: T, args: A): R {\n  if (typeof F !== 'function') {\n    throw new TypeError('Argument is not a function');\n  }\n  return Function.prototype.apply.call(F, V, args);\n}\n\nexport function promiseCall<T, A extends any[], R>(F: (this: T, ...fnArgs: A) => R | PromiseLike<R>,\n                                                   V: T,\n                                                   args: A): Promise<R> {\n  assert(typeof F === 'function');\n  assert(V !== undefined);\n  assert(Array.isArray(args));\n  try {\n    return promiseResolvedWith(reflectCall(F, V, args));\n  } catch (value) {\n    return promiseRejectedWith(value);\n  }\n}\n", "import assert from '../stub/assert';\n\n// Original from Chromium\n// https://chromium.googlesource.com/chromium/src/+/0aee4434a4dba42a42abaea9bfbc0cd196a63bc1/third_party/blink/renderer/core/streams/SimpleQueue.js\n\nconst QUEUE_MAX_ARRAY_SIZE = 16384;\n\ninterface Node<T> {\n  _elements: T[];\n  _next: Node<T> | undefined;\n}\n\n/**\n * Simple queue structure.\n *\n * Avoids scalability issues with using a packed array directly by using\n * multiple arrays in a linked list and keeping the array size bounded.\n */\nexport class SimpleQueue<T> {\n  private _front: Node<T>;\n  private _back: Node<T>;\n  private _cursor = 0;\n  private _size = 0;\n\n  constructor() {\n    // _front and _back are always defined.\n    this._front = {\n      _elements: [],\n      _next: undefined\n    };\n    this._back = this._front;\n    // The cursor is used to avoid calling Array.shift().\n    // It contains the index of the front element of the array inside the\n    // front-most node. It is always in the range [0, QUEUE_MAX_ARRAY_SIZE).\n    this._cursor = 0;\n    // When there is only one node, size === elements.length - cursor.\n    this._size = 0;\n  }\n\n  get length(): number {\n    return this._size;\n  }\n\n  // For exception safety, this method is structured in order:\n  // 1. Read state\n  // 2. Calculate required state mutations\n  // 3. Perform state mutations\n  push(element: T): void {\n    const oldBack = this._back;\n    let newBack = oldBack;\n    assert(oldBack._next === undefined);\n    if (oldBack._elements.length === QUEUE_MAX_ARRAY_SIZE - 1) {\n      newBack = {\n        _elements: [],\n        _next: undefined\n      };\n    }\n\n    // push() is the mutation most likely to throw an exception, so it\n    // goes first.\n    oldBack._elements.push(element);\n    if (newBack !== oldBack) {\n      this._back = newBack;\n      oldBack._next = newBack;\n    }\n    ++this._size;\n  }\n\n  // Like push(), shift() follows the read -> calculate -> mutate pattern for\n  // exception safety.\n  shift(): T {\n    assert(this._size > 0); // must not be called on an empty queue\n\n    const oldFront = this._front;\n    let newFront = oldFront;\n    const oldCursor = this._cursor;\n    let newCursor = oldCursor + 1;\n\n    const elements = oldFront._elements;\n    const element = elements[oldCursor];\n\n    if (newCursor === QUEUE_MAX_ARRAY_SIZE) {\n      assert(elements.length === QUEUE_MAX_ARRAY_SIZE);\n      assert(oldFront._next !== undefined);\n      newFront = oldFront._next!;\n      newCursor = 0;\n    }\n\n    // No mutations before this point.\n    --this._size;\n    this._cursor = newCursor;\n    if (oldFront !== newFront) {\n      this._front = newFront;\n    }\n\n    // Permit shifted element to be garbage collected.\n    elements[oldCursor] = undefined!;\n\n    return element;\n  }\n\n  // The tricky thing about forEach() is that it can be called\n  // re-entrantly. The queue may be mutated inside the callback. It is easy to\n  // see that push() within the callback has no negative effects since the end\n  // of the queue is checked for on every iteration. If shift() is called\n  // repeatedly within the callback then the next iteration may return an\n  // element that has been removed. In this case the callback will be called\n  // with undefined values until we either \"catch up\" with elements that still\n  // exist or reach the back of the queue.\n  forEach(callback: (element: T) => void): void {\n    let i = this._cursor;\n    let node = this._front;\n    let elements = node._elements;\n    while (i !== elements.length || node._next !== undefined) {\n      if (i === elements.length) {\n        assert(node._next !== undefined);\n        assert(i === QUEUE_MAX_ARRAY_SIZE);\n        node = node._next!;\n        elements = node._elements;\n        i = 0;\n        if (elements.length === 0) {\n          break;\n        }\n      }\n      callback(elements[i]);\n      ++i;\n    }\n  }\n\n  // Return the element that would be returned if shift() was called now,\n  // without modifying the queue.\n  peek(): T {\n    assert(this._size > 0); // must not be called on an empty queue\n\n    const front = this._front;\n    const cursor = this._cursor;\n    return front._elements[cursor];\n  }\n}\n", "export const AbortSteps = Symbol('[[AbortSteps]]');\nexport const ErrorSteps = Symbol('[[ErrorSteps]]');\nexport const CancelSteps = Symbol('[[CancelSteps]]');\nexport const PullSteps = Symbol('[[PullSteps]]');\nexport const ReleaseSteps = Symbol('[[ReleaseSteps]]');\n", "import assert from '../../stub/assert';\nimport { ReadableStream, ReadableStreamCancel, type ReadableStreamReader } from '../readable-stream';\nimport { newPromise, setPromiseIsHandledToTrue } from '../helpers/webidl';\nimport { ReleaseSteps } from '../abstract-ops/internal-methods';\n\nexport function ReadableStreamReaderGenericInitialize<R>(reader: ReadableStreamReader<R>, stream: ReadableStream<R>) {\n  reader._ownerReadableStream = stream;\n  stream._reader = reader;\n\n  if (stream._state === 'readable') {\n    defaultReaderClosedPromiseInitialize(reader);\n  } else if (stream._state === 'closed') {\n    defaultReaderClosedPromiseInitializeAsResolved(reader);\n  } else {\n    assert(stream._state === 'errored');\n\n    defaultReaderClosedPromiseInitializeAsRejected(reader, stream._storedError);\n  }\n}\n\n// A client of ReadableStreamDefaultReader and ReadableStreamBYOBReader may use these functions directly to bypass state\n// check.\n\nexport function ReadableStreamReaderGenericCancel(reader: ReadableStreamReader<any>, reason: any): Promise<undefined> {\n  const stream = reader._ownerReadableStream;\n  assert(stream !== undefined);\n  return ReadableStreamCancel(stream, reason);\n}\n\nexport function ReadableStreamReaderGenericRelease(reader: ReadableStreamReader<any>) {\n  const stream = reader._ownerReadableStream;\n  assert(stream !== undefined);\n  assert(stream._reader === reader);\n\n  if (stream._state === 'readable') {\n    defaultReaderClosedPromiseReject(\n      reader,\n      new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n  } else {\n    defaultReaderClosedPromiseResetToRejected(\n      reader,\n      new TypeError(`Reader was released and can no longer be used to monitor the stream's closedness`));\n  }\n\n  stream._readableStreamController[ReleaseSteps]();\n\n  stream._reader = undefined;\n  reader._ownerReadableStream = undefined!;\n}\n\n// Helper functions for the readers.\n\nexport function readerLockException(name: string): TypeError {\n  return new TypeError('Cannot ' + name + ' a stream using a released reader');\n}\n\n// Helper functions for the ReadableStreamDefaultReader.\n\nexport function defaultReaderClosedPromiseInitialize(reader: ReadableStreamReader<any>) {\n  reader._closedPromise = newPromise((resolve, reject) => {\n    reader._closedPromise_resolve = resolve;\n    reader._closedPromise_reject = reject;\n  });\n}\n\nexport function defaultReaderClosedPromiseInitializeAsRejected(reader: ReadableStreamReader<any>, reason: any) {\n  defaultReaderClosedPromiseInitialize(reader);\n  defaultReaderClosedPromiseReject(reader, reason);\n}\n\nexport function defaultReaderClosedPromiseInitializeAsResolved(reader: ReadableStreamReader<any>) {\n  defaultReaderClosedPromiseInitialize(reader);\n  defaultReaderClosedPromiseResolve(reader);\n}\n\nexport function defaultReaderClosedPromiseReject(reader: ReadableStreamReader<any>, reason: any) {\n  if (reader._closedPromise_reject === undefined) {\n    return;\n  }\n\n  setPromiseIsHandledToTrue(reader._closedPromise);\n  reader._closedPromise_reject(reason);\n  reader._closedPromise_resolve = undefined;\n  reader._closedPromise_reject = undefined;\n}\n\nexport function defaultReaderClosedPromiseResetToRejected(reader: ReadableStreamReader<any>, reason: any) {\n  assert(reader._closedPromise_resolve === undefined);\n  assert(reader._closedPromise_reject === undefined);\n\n  defaultReaderClosedPromiseInitializeAsRejected(reader, reason);\n}\n\nexport function defaultReaderClosedPromiseResolve(reader: ReadableStreamReader<any>) {\n  if (reader._closedPromise_resolve === undefined) {\n    return;\n  }\n\n  reader._closedPromise_resolve(undefined);\n  reader._closedPromise_resolve = undefined;\n  reader._closedPromise_reject = undefined;\n}\n", "/// <reference lib=\"es2015.core\" />\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isFinite#Polyfill\nconst NumberIsFinite: typeof Number.isFinite = Number.isFinite || function (x) {\n  return typeof x === 'number' && isFinite(x);\n};\n\nexport default NumberIsFinite;\n", "/// <reference lib=\"es2015.core\" />\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/trunc#Polyfill\nconst MathTrunc: typeof Math.trunc = Math.trunc || function (v) {\n  return v < 0 ? Math.ceil(v) : Math.floor(v);\n};\n\nexport default MathTrunc;\n", "import NumberIsFinite from '../../stub/number-isfinite';\nimport MathTrunc from '../../stub/math-trunc';\n\n// https://heycam.github.io/webidl/#idl-dictionaries\nexport function isDictionary(x: any): x is object | null {\n  return typeof x === 'object' || typeof x === 'function';\n}\n\nexport function assertDictionary(obj: unknown,\n                                 context: string): asserts obj is object | null | undefined {\n  if (obj !== undefined && !isDictionary(obj)) {\n    throw new TypeError(`${context} is not an object.`);\n  }\n}\n\nexport type AnyFunction = (...args: any[]) => any;\n\n// https://heycam.github.io/webidl/#idl-callback-functions\nexport function assertFunction(x: unknown, context: string): asserts x is AnyFunction {\n  if (typeof x !== 'function') {\n    throw new TypeError(`${context} is not a function.`);\n  }\n}\n\n// https://heycam.github.io/webidl/#idl-object\nexport function isObject(x: any): x is object {\n  return (typeof x === 'object' && x !== null) || typeof x === 'function';\n}\n\nexport function assertObject(x: unknown,\n                             context: string): asserts x is object {\n  if (!isObject(x)) {\n    throw new TypeError(`${context} is not an object.`);\n  }\n}\n\nexport function assertRequiredArgument<T>(x: T | undefined,\n                                          position: number,\n                                          context: string): asserts x is T {\n  if (x === undefined) {\n    throw new TypeError(`Parameter ${position} is required in '${context}'.`);\n  }\n}\n\nexport function assertRequiredField<T>(x: T | undefined,\n                                       field: string,\n                                       context: string): asserts x is T {\n  if (x === undefined) {\n    throw new TypeError(`${field} is required in '${context}'.`);\n  }\n}\n\n// https://heycam.github.io/webidl/#idl-unrestricted-double\nexport function convertUnrestrictedDouble(value: unknown): number {\n  return Number(value);\n}\n\nfunction censorNegativeZero(x: number): number {\n  return x === 0 ? 0 : x;\n}\n\nfunction integerPart(x: number): number {\n  return censorNegativeZero(MathTrunc(x));\n}\n\n// https://heycam.github.io/webidl/#idl-unsigned-long-long\nexport function convertUnsignedLongLongWithEnforceRange(value: unknown, context: string): number {\n  const lowerBound = 0;\n  const upperBound = Number.MAX_SAFE_INTEGER;\n\n  let x = Number(value);\n  x = censorNegativeZero(x);\n\n  if (!NumberIsFinite(x)) {\n    throw new TypeError(`${context} is not a finite number`);\n  }\n\n  x = integerPart(x);\n\n  if (x < lowerBound || x > upperBound) {\n    throw new TypeError(`${context} is outside the accepted range of ${lowerBound} to ${upperBound}, inclusive`);\n  }\n\n  if (!NumberIsFinite(x) || x === 0) {\n    return 0;\n  }\n\n  // TODO Use BigInt if supported?\n  // let xBigInt = BigInt(integerPart(x));\n  // xBigInt = BigInt.asUintN(64, xBigInt);\n  // return Number(xBigInt);\n\n  return x;\n}\n", "import { IsReadableStream, ReadableStream } from '../readable-stream';\n\nexport function assertReadableStream(x: unknown, context: string): asserts x is ReadableStream {\n  if (!IsReadableStream(x)) {\n    throw new TypeError(`${context} is not a ReadableStream.`);\n  }\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport {\n  ReadableStreamReaderGenericCancel,\n  ReadableStreamReaderGenericInitialize,\n  ReadableStreamReaderGenericRelease,\n  readerLockException\n} from './generic-reader';\nimport { IsReadableStreamLocked, ReadableStream } from '../readable-stream';\nimport { setFunctionName, typeIsObject } from '../helpers/miscellaneous';\nimport { PullSteps } from '../abstract-ops/internal-methods';\nimport { newPromise, promiseRejectedWith } from '../helpers/webidl';\nimport { assertRequiredArgument } from '../validators/basic';\nimport { assertReadableStream } from '../validators/readable-stream';\n\n/**\n * A result returned by {@link ReadableStreamDefaultReader.read}.\n *\n * @public\n */\nexport type ReadableStreamDefaultReadResult<T> = {\n  done: false;\n  value: T;\n} | {\n  done: true;\n  value?: undefined;\n}\n\n// Abstract operations for the ReadableStream.\n\nexport function AcquireReadableStreamDefaultReader<R>(stream: ReadableStream): ReadableStreamDefaultReader<R> {\n  return new ReadableStreamDefaultReader(stream);\n}\n\n// ReadableStream API exposed for controllers.\n\nexport function ReadableStreamAddReadRequest<R>(stream: ReadableStream<R>,\n                                                readRequest: ReadRequest<R>): void {\n  assert(IsReadableStreamDefaultReader(stream._reader));\n  assert(stream._state === 'readable');\n\n  (stream._reader! as ReadableStreamDefaultReader<R>)._readRequests.push(readRequest);\n}\n\nexport function ReadableStreamFulfillReadRequest<R>(stream: ReadableStream<R>, chunk: R | undefined, done: boolean) {\n  const reader = stream._reader as ReadableStreamDefaultReader<R>;\n\n  assert(reader._readRequests.length > 0);\n\n  const readRequest = reader._readRequests.shift()!;\n  if (done) {\n    readRequest._closeSteps();\n  } else {\n    readRequest._chunkSteps(chunk!);\n  }\n}\n\nexport function ReadableStreamGetNumReadRequests<R>(stream: ReadableStream<R>): number {\n  return (stream._reader as ReadableStreamDefaultReader<R>)._readRequests.length;\n}\n\nexport function ReadableStreamHasDefaultReader(stream: ReadableStream): boolean {\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return false;\n  }\n\n  if (!IsReadableStreamDefaultReader(reader)) {\n    return false;\n  }\n\n  return true;\n}\n\n// Readers\n\nexport interface ReadRequest<R> {\n  _chunkSteps(chunk: R): void;\n\n  _closeSteps(): void;\n\n  _errorSteps(e: any): void;\n}\n\n/**\n * A default reader vended by a {@link ReadableStream}.\n *\n * @public\n */\nexport class ReadableStreamDefaultReader<R = any> {\n  /** @internal */\n  _ownerReadableStream!: ReadableStream<R>;\n  /** @internal */\n  _closedPromise!: Promise<undefined>;\n  /** @internal */\n  _closedPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _closedPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _readRequests: SimpleQueue<ReadRequest<R>>;\n\n  constructor(stream: ReadableStream<R>) {\n    assertRequiredArgument(stream, 1, 'ReadableStreamDefaultReader');\n    assertReadableStream(stream, 'First parameter');\n\n    if (IsReadableStreamLocked(stream)) {\n      throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n    }\n\n    ReadableStreamReaderGenericInitialize(this, stream);\n\n    this._readRequests = new SimpleQueue();\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the stream becomes closed,\n   * or rejected if the stream ever errors or the reader's lock is released before the stream finishes closing.\n   */\n  get closed(): Promise<undefined> {\n    if (!IsReadableStreamDefaultReader(this)) {\n      return promiseRejectedWith(defaultReaderBrandCheckException('closed'));\n    }\n\n    return this._closedPromise;\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n   */\n  cancel(reason: any = undefined): Promise<void> {\n    if (!IsReadableStreamDefaultReader(this)) {\n      return promiseRejectedWith(defaultReaderBrandCheckException('cancel'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('cancel'));\n    }\n\n    return ReadableStreamReaderGenericCancel(this, reason);\n  }\n\n  /**\n   * Returns a promise that allows access to the next chunk from the stream's internal queue, if available.\n   *\n   * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n   */\n  read(): Promise<ReadableStreamDefaultReadResult<R>> {\n    if (!IsReadableStreamDefaultReader(this)) {\n      return promiseRejectedWith(defaultReaderBrandCheckException('read'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('read from'));\n    }\n\n    let resolvePromise!: (result: ReadableStreamDefaultReadResult<R>) => void;\n    let rejectPromise!: (reason: any) => void;\n    const promise = newPromise<ReadableStreamDefaultReadResult<R>>((resolve, reject) => {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    const readRequest: ReadRequest<R> = {\n      _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n      _closeSteps: () => resolvePromise({ value: undefined, done: true }),\n      _errorSteps: e => rejectPromise(e)\n    };\n    ReadableStreamDefaultReaderRead(this, readRequest);\n    return promise;\n  }\n\n  /**\n   * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n   * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n   * from now on; otherwise, the reader will appear closed.\n   *\n   * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n   * the reader's {@link ReadableStreamDefaultReader.read | read()} method has not yet been settled. Attempting to\n   * do so will throw a `TypeError` and leave the reader locked to the stream.\n   */\n  releaseLock(): void {\n    if (!IsReadableStreamDefaultReader(this)) {\n      throw defaultReaderBrandCheckException('releaseLock');\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return;\n    }\n\n    ReadableStreamDefaultReaderRelease(this);\n  }\n}\n\nObject.defineProperties(ReadableStreamDefaultReader.prototype, {\n  cancel: { enumerable: true },\n  read: { enumerable: true },\n  releaseLock: { enumerable: true },\n  closed: { enumerable: true }\n});\nsetFunctionName(ReadableStreamDefaultReader.prototype.cancel, 'cancel');\nsetFunctionName(ReadableStreamDefaultReader.prototype.read, 'read');\nsetFunctionName(ReadableStreamDefaultReader.prototype.releaseLock, 'releaseLock');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamDefaultReader.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamDefaultReader',\n    configurable: true\n  });\n}\n\n// Abstract operations for the readers.\n\nexport function IsReadableStreamDefaultReader<R = any>(x: any): x is ReadableStreamDefaultReader<R> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_readRequests')) {\n    return false;\n  }\n\n  return x instanceof ReadableStreamDefaultReader;\n}\n\nexport function ReadableStreamDefaultReaderRead<R>(reader: ReadableStreamDefaultReader<R>,\n                                                   readRequest: ReadRequest<R>): void {\n  const stream = reader._ownerReadableStream;\n\n  assert(stream !== undefined);\n\n  stream._disturbed = true;\n\n  if (stream._state === 'closed') {\n    readRequest._closeSteps();\n  } else if (stream._state === 'errored') {\n    readRequest._errorSteps(stream._storedError);\n  } else {\n    assert(stream._state === 'readable');\n    stream._readableStreamController[PullSteps](readRequest as ReadRequest<any>);\n  }\n}\n\nexport function ReadableStreamDefaultReaderRelease(reader: ReadableStreamDefaultReader) {\n  ReadableStreamReaderGenericRelease(reader);\n  const e = new TypeError('Reader was released');\n  ReadableStreamDefaultReaderErrorReadRequests(reader, e);\n}\n\nexport function ReadableStreamDefaultReaderErrorReadRequests(reader: ReadableStreamDefaultReader, e: any) {\n  const readRequests = reader._readRequests;\n  reader._readRequests = new SimpleQueue();\n  readRequests.forEach(readRequest => {\n    readRequest._errorSteps(e);\n  });\n}\n\n// Helper functions for the ReadableStreamDefaultReader.\n\nfunction defaultReaderBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamDefaultReader.prototype.${name} can only be used on a ReadableStreamDefaultReader`);\n}\n", "/// <reference lib=\"es2018.asynciterable\" />\n\n/* eslint-disable @typescript-eslint/no-empty-function */\nexport const AsyncIteratorPrototype: AsyncIterable<any> =\n  Object.getPrototypeOf(Object.getPrototypeOf(async function* (): AsyncIterableIterator<any> {}).prototype);\n", "/// <reference lib=\"es2018.asynciterable\" />\n\nimport { ReadableStream } from '../readable-stream';\nimport {\n  AcquireReadableStreamDefaultReader,\n  ReadableStreamDefaultReader,\n  ReadableStreamDefaultReaderRead,\n  type ReadableStreamDefaultReadResult,\n  type ReadRequest\n} from './default-reader';\nimport { ReadableStreamReaderGenericCancel, ReadableStreamReaderGenericRelease } from './generic-reader';\nimport assert from '../../stub/assert';\nimport { AsyncIteratorPrototype } from '@@target/stub/async-iterator-prototype';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport {\n  newPromise,\n  promiseRejectedWith,\n  promiseResolvedWith,\n  queueMicrotask,\n  transformPromiseWith\n} from '../helpers/webidl';\n\n/**\n * An async iterator returned by {@link ReadableStream.values}.\n *\n * @public\n */\nexport interface ReadableStreamAsyncIterator<R> extends AsyncIterableIterator<R> {\n  next(): Promise<IteratorResult<R, undefined>>;\n\n  return(value?: any): Promise<IteratorResult<any>>;\n}\n\nexport class ReadableStreamAsyncIteratorImpl<R> {\n  private readonly _reader: ReadableStreamDefaultReader<R>;\n  private readonly _preventCancel: boolean;\n  private _ongoingPromise: Promise<ReadableStreamDefaultReadResult<R>> | undefined = undefined;\n  private _isFinished = false;\n\n  constructor(reader: ReadableStreamDefaultReader<R>, preventCancel: boolean) {\n    this._reader = reader;\n    this._preventCancel = preventCancel;\n  }\n\n  next(): Promise<ReadableStreamDefaultReadResult<R>> {\n    const nextSteps = () => this._nextSteps();\n    this._ongoingPromise = this._ongoingPromise ?\n      transformPromiseWith(this._ongoingPromise, nextSteps, nextSteps) :\n      nextSteps();\n    return this._ongoingPromise;\n  }\n\n  return(value: any): Promise<ReadableStreamDefaultReadResult<any>> {\n    const returnSteps = () => this._returnSteps(value);\n    return this._ongoingPromise ?\n      transformPromiseWith(this._ongoingPromise, returnSteps, returnSteps) :\n      returnSteps();\n  }\n\n  private _nextSteps(): Promise<ReadableStreamDefaultReadResult<R>> {\n    if (this._isFinished) {\n      return Promise.resolve({ value: undefined, done: true });\n    }\n\n    const reader = this._reader;\n    assert(reader._ownerReadableStream !== undefined);\n\n    let resolvePromise!: (result: ReadableStreamDefaultReadResult<R>) => void;\n    let rejectPromise!: (reason: any) => void;\n    const promise = newPromise<ReadableStreamDefaultReadResult<R>>((resolve, reject) => {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    const readRequest: ReadRequest<R> = {\n      _chunkSteps: chunk => {\n        this._ongoingPromise = undefined;\n        // This needs to be delayed by one microtask, otherwise we stop pulling too early which breaks a test.\n        // FIXME Is this a bug in the specification, or in the test?\n        queueMicrotask(() => resolvePromise({ value: chunk, done: false }));\n      },\n      _closeSteps: () => {\n        this._ongoingPromise = undefined;\n        this._isFinished = true;\n        ReadableStreamReaderGenericRelease(reader);\n        resolvePromise({ value: undefined, done: true });\n      },\n      _errorSteps: reason => {\n        this._ongoingPromise = undefined;\n        this._isFinished = true;\n        ReadableStreamReaderGenericRelease(reader);\n        rejectPromise(reason);\n      }\n    };\n    ReadableStreamDefaultReaderRead(reader, readRequest);\n    return promise;\n  }\n\n  private _returnSteps(value: any): Promise<ReadableStreamDefaultReadResult<any>> {\n    if (this._isFinished) {\n      return Promise.resolve({ value, done: true });\n    }\n    this._isFinished = true;\n\n    const reader = this._reader;\n    assert(reader._ownerReadableStream !== undefined);\n    assert(reader._readRequests.length === 0);\n\n    if (!this._preventCancel) {\n      const result = ReadableStreamReaderGenericCancel(reader, value);\n      ReadableStreamReaderGenericRelease(reader);\n      return transformPromiseWith(result, () => ({ value, done: true }));\n    }\n\n    ReadableStreamReaderGenericRelease(reader);\n    return promiseResolvedWith({ value, done: true });\n  }\n}\n\ninterface ReadableStreamAsyncIteratorInstance<R> extends ReadableStreamAsyncIterator<R> {\n  /** @interal */\n  _asyncIteratorImpl: ReadableStreamAsyncIteratorImpl<R>;\n\n  next(): Promise<IteratorResult<R, undefined>>;\n\n  return(value?: any): Promise<IteratorResult<any>>;\n}\n\nconst ReadableStreamAsyncIteratorPrototype: ReadableStreamAsyncIteratorInstance<any> = {\n  next(this: ReadableStreamAsyncIteratorInstance<any>): Promise<ReadableStreamDefaultReadResult<any>> {\n    if (!IsReadableStreamAsyncIterator(this)) {\n      return promiseRejectedWith(streamAsyncIteratorBrandCheckException('next'));\n    }\n    return this._asyncIteratorImpl.next();\n  },\n\n  return(this: ReadableStreamAsyncIteratorInstance<any>, value: any): Promise<ReadableStreamDefaultReadResult<any>> {\n    if (!IsReadableStreamAsyncIterator(this)) {\n      return promiseRejectedWith(streamAsyncIteratorBrandCheckException('return'));\n    }\n    return this._asyncIteratorImpl.return(value);\n  }\n} as any;\nObject.setPrototypeOf(ReadableStreamAsyncIteratorPrototype, AsyncIteratorPrototype);\n\n// Abstract operations for the ReadableStream.\n\nexport function AcquireReadableStreamAsyncIterator<R>(stream: ReadableStream<R>,\n                                                      preventCancel: boolean): ReadableStreamAsyncIterator<R> {\n  const reader = AcquireReadableStreamDefaultReader<R>(stream);\n  const impl = new ReadableStreamAsyncIteratorImpl(reader, preventCancel);\n  const iterator: ReadableStreamAsyncIteratorInstance<R> = Object.create(ReadableStreamAsyncIteratorPrototype);\n  iterator._asyncIteratorImpl = impl;\n  return iterator;\n}\n\nfunction IsReadableStreamAsyncIterator<R = any>(x: any): x is ReadableStreamAsyncIterator<R> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_asyncIteratorImpl')) {\n    return false;\n  }\n\n  try {\n    // noinspection SuspiciousTypeOfGuard\n    return (x as ReadableStreamAsyncIteratorInstance<any>)._asyncIteratorImpl instanceof\n      ReadableStreamAsyncIteratorImpl;\n  } catch {\n    return false;\n  }\n}\n\n// Helper functions for the ReadableStream.\n\nfunction streamAsyncIteratorBrandCheckException(name: string): TypeError {\n  return new TypeError(`ReadableStreamAsyncIterator.${name} can only be used on a ReadableSteamAsyncIterator`);\n}\n", "/// <reference lib=\"es2015.core\" />\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isNaN#Polyfill\nconst NumberIsNaN: typeof Number.isNaN = Number.isNaN || function (x) {\n  // eslint-disable-next-line no-self-compare\n  return x !== x;\n};\n\nexport default NumberIsNaN;\n", "import { reflectCall } from 'lib/helpers/webidl';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport assert from '../../stub/assert';\n\ndeclare global {\n  interface ArrayBuffer {\n    readonly detached: boolean;\n\n    transfer(): ArrayBuffer;\n  }\n\n  function structuredClone<T>(value: T, options: { transfer: ArrayBuffer[] }): T;\n}\n\nexport function CreateArrayFromList<T extends any[]>(elements: T): T {\n  // We use arrays to represent lists, so this is basically a no-op.\n  // Do a slice though just in case we happen to depend on the unique-ness.\n  return elements.slice() as T;\n}\n\nexport function CopyDataBlockBytes(dest: ArrayBuffer,\n                                   destOffset: number,\n                                   src: ArrayBuffer,\n                                   srcOffset: number,\n                                   n: number) {\n  new Uint8Array(dest).set(new Uint8Array(src, srcOffset, n), destOffset);\n}\n\nexport let TransferArrayBuffer = (O: ArrayBuffer): ArrayBuffer => {\n  if (typeof O.transfer === 'function') {\n    TransferArrayBuffer = buffer => buffer.transfer();\n  } else if (typeof structuredClone === 'function') {\n    TransferArrayBuffer = buffer => structuredClone(buffer, { transfer: [buffer] });\n  } else {\n    // Not implemented correctly\n    TransferArrayBuffer = buffer => buffer;\n  }\n  return TransferArrayBuffer(O);\n};\n\nexport function CanTransferArrayBuffer(O: ArrayBuffer): boolean {\n  return !IsDetachedBuffer(O);\n}\n\nexport let IsDetachedBuffer = (O: ArrayBuffer): boolean => {\n  if (typeof O.detached === 'boolean') {\n    IsDetachedBuffer = buffer => buffer.detached;\n  } else {\n    // Not implemented correctly\n    IsDetachedBuffer = buffer => buffer.byteLength === 0;\n  }\n  return IsDetachedBuffer(O);\n};\n\nexport function ArrayBufferSlice(buffer: ArrayBuffer, begin: number, end: number): ArrayBuffer {\n  // ArrayBuffer.prototype.slice is not available on IE10\n  // https://www.caniuse.com/mdn-javascript_builtins_arraybuffer_slice\n  if (buffer.slice) {\n    return buffer.slice(begin, end);\n  }\n  const length = end - begin;\n  const slice = new ArrayBuffer(length);\n  CopyDataBlockBytes(slice, 0, buffer, begin, length);\n  return slice;\n}\n\nexport type MethodName<T> = {\n  [P in keyof T]: T[P] extends Function | undefined ? P : never;\n}[keyof T];\n\nexport function GetMethod<T, K extends MethodName<T>>(receiver: T, prop: K): T[K] | undefined {\n  const func = receiver[prop];\n  if (func === undefined || func === null) {\n    return undefined;\n  }\n  if (typeof func !== 'function') {\n    throw new TypeError(`${String(prop)} is not a function`);\n  }\n  return func;\n}\n\nexport interface SyncIteratorRecord<T> {\n  iterator: Iterator<T>,\n  nextMethod: Iterator<T>['next'],\n  done: boolean;\n}\n\nexport interface AsyncIteratorRecord<T> {\n  iterator: AsyncIterator<T>,\n  nextMethod: AsyncIterator<T>['next'],\n  done: boolean;\n}\n\nexport type SyncOrAsyncIteratorRecord<T> = SyncIteratorRecord<T> | AsyncIteratorRecord<T>;\n\nexport function CreateAsyncFromSyncIterator<T>(syncIteratorRecord: SyncIteratorRecord<T>): AsyncIteratorRecord<T> {\n  // Instead of re-implementing CreateAsyncFromSyncIterator and %AsyncFromSyncIteratorPrototype%,\n  // we use yield* inside an async generator function to achieve the same result.\n\n  // Wrap the sync iterator inside a sync iterable, so we can use it with yield*.\n  const syncIterable = {\n    [Symbol.iterator]: () => syncIteratorRecord.iterator\n  };\n  // Create an async generator function and immediately invoke it.\n  const asyncIterator = (async function* () {\n    return yield* syncIterable;\n  }());\n  // Return as an async iterator record.\n  const nextMethod = asyncIterator.next;\n  return { iterator: asyncIterator, nextMethod, done: false };\n}\n\n// Aligns with core-js/modules/es.symbol.async-iterator.js\nexport const SymbolAsyncIterator: (typeof Symbol)['asyncIterator'] =\n  Symbol.asyncIterator ??\n  Symbol.for?.('Symbol.asyncIterator') ??\n  '@@asyncIterator';\n\nexport type SyncOrAsyncIterable<T> = Iterable<T> | AsyncIterable<T>;\nexport type SyncOrAsyncIteratorMethod<T> = () => (Iterator<T> | AsyncIterator<T>);\n\nfunction GetIterator<T>(\n  obj: SyncOrAsyncIterable<T>,\n  hint: 'async',\n  method?: SyncOrAsyncIteratorMethod<T>\n): AsyncIteratorRecord<T>;\nfunction GetIterator<T>(\n  obj: Iterable<T>,\n  hint: 'sync',\n  method?: SyncOrAsyncIteratorMethod<T>\n): SyncIteratorRecord<T>;\nfunction GetIterator<T>(\n  obj: SyncOrAsyncIterable<T>,\n  hint = 'sync',\n  method?: SyncOrAsyncIteratorMethod<T>\n): SyncOrAsyncIteratorRecord<T> {\n  assert(hint === 'sync' || hint === 'async');\n  if (method === undefined) {\n    if (hint === 'async') {\n      method = GetMethod(obj as AsyncIterable<T>, SymbolAsyncIterator);\n      if (method === undefined) {\n        const syncMethod = GetMethod(obj as Iterable<T>, Symbol.iterator);\n        const syncIteratorRecord = GetIterator(obj as Iterable<T>, 'sync', syncMethod);\n        return CreateAsyncFromSyncIterator(syncIteratorRecord);\n      }\n    } else {\n      method = GetMethod(obj as Iterable<T>, Symbol.iterator);\n    }\n  }\n  if (method === undefined) {\n    throw new TypeError('The object is not iterable');\n  }\n  const iterator = reflectCall(method, obj, []);\n  if (!typeIsObject(iterator)) {\n    throw new TypeError('The iterator method must return an object');\n  }\n  const nextMethod = iterator.next;\n  return { iterator, nextMethod, done: false } as SyncOrAsyncIteratorRecord<T>;\n}\n\nexport { GetIterator };\n\nexport function IteratorNext<T>(iteratorRecord: AsyncIteratorRecord<T>): Promise<IteratorResult<T>> {\n  const result = reflectCall(iteratorRecord.nextMethod, iteratorRecord.iterator, []);\n  if (!typeIsObject(result)) {\n    throw new TypeError('The iterator.next() method must return an object');\n  }\n  return result;\n}\n\nexport function IteratorComplete<TReturn>(\n  iterResult: IteratorResult<unknown, TReturn>\n): iterResult is IteratorReturnResult<TReturn> {\n  assert(typeIsObject(iterResult));\n  return Boolean(iterResult.done);\n}\n\nexport function IteratorValue<T>(iterResult: IteratorYieldResult<T>): T {\n  assert(typeIsObject(iterResult));\n  return iterResult.value;\n}\n", "import NumberIsNaN from '../../stub/number-isnan';\nimport { ArrayBufferSlice } from './ecmascript';\nimport type { NonShared } from '../helpers/array-buffer-view';\n\nexport function IsNonNegativeNumber(v: number): boolean {\n  if (typeof v !== 'number') {\n    return false;\n  }\n\n  if (NumberIsNaN(v)) {\n    return false;\n  }\n\n  if (v < 0) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function CloneAsUint8Array(O: NonShared<ArrayBufferView>): NonShared<Uint8Array> {\n  const buffer = ArrayBufferSlice(O.buffer, O.byteOffset, O.byteOffset + O.byteLength);\n  return new Uint8Array(buffer) as NonShared<Uint8Array>;\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport { IsNonNegativeNumber } from './miscellaneous';\n\nexport interface QueueContainer<T> {\n  _queue: SimpleQueue<T>;\n  _queueTotalSize: number;\n}\n\nexport interface QueuePair<T> {\n  value: T;\n  size: number;\n}\n\nexport function DequeueValue<T>(container: QueueContainer<QueuePair<T>>): T {\n  assert('_queue' in container && '_queueTotalSize' in container);\n  assert(container._queue.length > 0);\n\n  const pair = container._queue.shift()!;\n  container._queueTotalSize -= pair.size;\n  if (container._queueTotalSize < 0) {\n    container._queueTotalSize = 0;\n  }\n\n  return pair.value;\n}\n\nexport function EnqueueValueWithSize<T>(container: QueueContainer<QueuePair<T>>, value: T, size: number) {\n  assert('_queue' in container && '_queueTotalSize' in container);\n\n  if (!IsNonNegativeNumber(size) || size === Infinity) {\n    throw new RangeError('Size must be a finite, non-NaN, non-negative number.');\n  }\n\n  container._queue.push({ value, size });\n  container._queueTotalSize += size;\n}\n\nexport function PeekQueueValue<T>(container: QueueContainer<QueuePair<T>>): T {\n  assert('_queue' in container && '_queueTotalSize' in container);\n  assert(container._queue.length > 0);\n\n  const pair = container._queue.peek();\n  return pair.value;\n}\n\nexport function ResetQueue<T>(container: QueueContainer<T>) {\n  assert('_queue' in container && '_queueTotalSize' in container);\n\n  container._queue = new SimpleQueue<T>();\n  container._queueTotalSize = 0;\n}\n", "export type TypedArray =\n  | Int8Array\n  | Uint8Array\n  | Uint8ClampedArray\n  | Int16Array\n  | Uint16Array\n  | Int32Array\n  | Uint32Array\n  | Float32Array\n  | Float64Array;\n\nexport type NonShared<T extends ArrayBufferView> = T & {\n  buffer: ArrayBuffer;\n}\n\nexport interface ArrayBufferViewConstructor<T extends ArrayBufferView = ArrayBufferView> {\n  new(buffer: ArrayBuffer, byteOffset: number, length?: number): T;\n\n  readonly prototype: T;\n}\n\nexport interface TypedArrayConstructor<T extends TypedArray = TypedArray> extends ArrayBufferViewConstructor<T> {\n  readonly BYTES_PER_ELEMENT: number;\n}\n\nexport type DataViewConstructor = ArrayBufferViewConstructor<DataView>;\n\nfunction isDataViewConstructor(ctor: Function): ctor is DataViewConstructor {\n  return ctor === DataView;\n}\n\nexport function isDataView(view: ArrayBufferView): view is DataView {\n  return isDataViewConstructor(view.constructor);\n}\n\nexport function arrayBufferViewElementSize<T extends ArrayBufferView>(ctor: ArrayBufferViewConstructor<T>): number {\n  if (isDataViewConstructor(ctor)) {\n    return 1;\n  }\n  return (ctor as unknown as TypedArrayConstructor).BYTES_PER_ELEMENT;\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport { ResetQueue } from '../abstract-ops/queue-with-sizes';\nimport {\n  IsReadableStreamDefaultReader,\n  ReadableStreamAddReadRequest,\n  ReadableStreamFulfillReadRequest,\n  ReadableStreamGetNumReadRequests,\n  ReadableStreamHasDefaultReader,\n  type ReadRequest\n} from './default-reader';\nimport {\n  ReadableStreamAddReadIntoRequest,\n  ReadableStreamFulfillReadIntoRequest,\n  ReadableStreamGetNumReadIntoRequests,\n  ReadableStreamHasBYOBReader,\n  type ReadIntoRequest\n} from './byob-reader';\nimport NumberIsInteger from '../../stub/number-isinteger';\nimport {\n  IsReadableStreamLocked,\n  type ReadableByteStream,\n  ReadableStreamClose,\n  ReadableStreamError\n} from '../readable-stream';\nimport type { ValidatedUnderlyingByteSource } from './underlying-source';\nimport { setFunctionName, typeIsObject } from '../helpers/miscellaneous';\nimport {\n  ArrayBufferSlice,\n  CanTransferArrayBuffer,\n  CopyDataBlockBytes,\n  IsDetachedBuffer,\n  TransferArrayBuffer\n} from '../abstract-ops/ecmascript';\nimport { CancelSteps, PullSteps, ReleaseSteps } from '../abstract-ops/internal-methods';\nimport { promiseResolvedWith, uponPromise } from '../helpers/webidl';\nimport { assertRequiredArgument, convertUnsignedLongLongWithEnforceRange } from '../validators/basic';\nimport {\n  type ArrayBufferViewConstructor,\n  arrayBufferViewElementSize,\n  type NonShared,\n  type TypedArrayConstructor\n} from '../helpers/array-buffer-view';\n\n/**\n * A pull-into request in a {@link ReadableByteStreamController}.\n *\n * @public\n */\nexport class ReadableStreamBYOBRequest {\n  /** @internal */\n  _associatedReadableByteStreamController!: ReadableByteStreamController;\n  /** @internal */\n  _view!: NonShared<ArrayBufferView> | null;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the view for writing in to, or `null` if the BYOB request has already been responded to.\n   */\n  get view(): ArrayBufferView | null {\n    if (!IsReadableStreamBYOBRequest(this)) {\n      throw byobRequestBrandCheckException('view');\n    }\n\n    return this._view;\n  }\n\n  /**\n   * Indicates to the associated readable byte stream that `bytesWritten` bytes were written into\n   * {@link ReadableStreamBYOBRequest.view | view}, causing the result be surfaced to the consumer.\n   *\n   * After this method is called, {@link ReadableStreamBYOBRequest.view | view} will be transferred and no longer\n   * modifiable.\n   */\n  respond(bytesWritten: number): void;\n  respond(bytesWritten: number | undefined): void {\n    if (!IsReadableStreamBYOBRequest(this)) {\n      throw byobRequestBrandCheckException('respond');\n    }\n    assertRequiredArgument(bytesWritten, 1, 'respond');\n    bytesWritten = convertUnsignedLongLongWithEnforceRange(bytesWritten, 'First parameter');\n\n    if (this._associatedReadableByteStreamController === undefined) {\n      throw new TypeError('This BYOB request has been invalidated');\n    }\n\n    if (IsDetachedBuffer(this._view!.buffer)) {\n      throw new TypeError(`The BYOB request's buffer has been detached and so cannot be used as a response`);\n    }\n\n    assert(this._view!.byteLength > 0);\n    assert(this._view!.buffer.byteLength > 0);\n\n    ReadableByteStreamControllerRespond(this._associatedReadableByteStreamController, bytesWritten);\n  }\n\n  /**\n   * Indicates to the associated readable byte stream that instead of writing into\n   * {@link ReadableStreamBYOBRequest.view | view}, the underlying byte source is providing a new `ArrayBufferView`,\n   * which will be given to the consumer of the readable byte stream.\n   *\n   * After this method is called, `view` will be transferred and no longer modifiable.\n   */\n  respondWithNewView(view: ArrayBufferView): void;\n  respondWithNewView(view: NonShared<ArrayBufferView>): void {\n    if (!IsReadableStreamBYOBRequest(this)) {\n      throw byobRequestBrandCheckException('respondWithNewView');\n    }\n    assertRequiredArgument(view, 1, 'respondWithNewView');\n\n    if (!ArrayBuffer.isView(view)) {\n      throw new TypeError('You can only respond with array buffer views');\n    }\n\n    if (this._associatedReadableByteStreamController === undefined) {\n      throw new TypeError('This BYOB request has been invalidated');\n    }\n\n    if (IsDetachedBuffer(view.buffer)) {\n      throw new TypeError('The given view\\'s buffer has been detached and so cannot be used as a response');\n    }\n\n    ReadableByteStreamControllerRespondWithNewView(this._associatedReadableByteStreamController, view);\n  }\n}\n\nObject.defineProperties(ReadableStreamBYOBRequest.prototype, {\n  respond: { enumerable: true },\n  respondWithNewView: { enumerable: true },\n  view: { enumerable: true }\n});\nsetFunctionName(ReadableStreamBYOBRequest.prototype.respond, 'respond');\nsetFunctionName(ReadableStreamBYOBRequest.prototype.respondWithNewView, 'respondWithNewView');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamBYOBRequest.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamBYOBRequest',\n    configurable: true\n  });\n}\n\ninterface ByteQueueElement {\n  buffer: ArrayBuffer;\n  byteOffset: number;\n  byteLength: number;\n}\n\ntype PullIntoDescriptor<T extends NonShared<ArrayBufferView> = NonShared<ArrayBufferView>> =\n  DefaultPullIntoDescriptor\n  | BYOBPullIntoDescriptor<T>;\n\ninterface DefaultPullIntoDescriptor {\n  buffer: ArrayBuffer;\n  bufferByteLength: number;\n  byteOffset: number;\n  byteLength: number;\n  bytesFilled: number;\n  minimumFill: number;\n  elementSize: number;\n  viewConstructor: TypedArrayConstructor<Uint8Array>;\n  readerType: 'default' | 'none';\n}\n\ninterface BYOBPullIntoDescriptor<T extends NonShared<ArrayBufferView> = NonShared<ArrayBufferView>> {\n  buffer: ArrayBuffer;\n  bufferByteLength: number;\n  byteOffset: number;\n  byteLength: number;\n  bytesFilled: number;\n  minimumFill: number;\n  elementSize: number;\n  viewConstructor: ArrayBufferViewConstructor<T>;\n  readerType: 'byob' | 'none';\n}\n\n/**\n * Allows control of a {@link ReadableStream | readable byte stream}'s state and internal queue.\n *\n * @public\n */\nexport class ReadableByteStreamController {\n  /** @internal */\n  _controlledReadableByteStream!: ReadableByteStream;\n  /** @internal */\n  _queue!: SimpleQueue<ByteQueueElement>;\n  /** @internal */\n  _queueTotalSize!: number;\n  /** @internal */\n  _started!: boolean;\n  /** @internal */\n  _closeRequested!: boolean;\n  /** @internal */\n  _pullAgain!: boolean;\n  /** @internal */\n  _pulling !: boolean;\n  /** @internal */\n  _strategyHWM!: number;\n  /** @internal */\n  _pullAlgorithm!: () => Promise<void>;\n  /** @internal */\n  _cancelAlgorithm!: (reason: any) => Promise<void>;\n  /** @internal */\n  _autoAllocateChunkSize: number | undefined;\n  /** @internal */\n  _byobRequest: ReadableStreamBYOBRequest | null;\n  /** @internal */\n  _pendingPullIntos!: SimpleQueue<PullIntoDescriptor>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the current BYOB pull request, or `null` if there isn't one.\n   */\n  get byobRequest(): ReadableStreamBYOBRequest | null {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('byobRequest');\n    }\n\n    return ReadableByteStreamControllerGetBYOBRequest(this);\n  }\n\n  /**\n   * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n   * over-full. An underlying byte source ought to use this information to determine when and how to apply backpressure.\n   */\n  get desiredSize(): number | null {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('desiredSize');\n    }\n\n    return ReadableByteStreamControllerGetDesiredSize(this);\n  }\n\n  /**\n   * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n   * the stream, but once those are read, the stream will become closed.\n   */\n  close(): void {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('close');\n    }\n\n    if (this._closeRequested) {\n      throw new TypeError('The stream has already been closed; do not close it again!');\n    }\n\n    const state = this._controlledReadableByteStream._state;\n    if (state !== 'readable') {\n      throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be closed`);\n    }\n\n    ReadableByteStreamControllerClose(this);\n  }\n\n  /**\n   * Enqueues the given chunk chunk in the controlled readable stream.\n   * The chunk has to be an `ArrayBufferView` instance, or else a `TypeError` will be thrown.\n   */\n  enqueue(chunk: ArrayBufferView): void;\n  enqueue(chunk: NonShared<ArrayBufferView>): void {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('enqueue');\n    }\n\n    assertRequiredArgument(chunk, 1, 'enqueue');\n    if (!ArrayBuffer.isView(chunk)) {\n      throw new TypeError('chunk must be an array buffer view');\n    }\n    if (chunk.byteLength === 0) {\n      throw new TypeError('chunk must have non-zero byteLength');\n    }\n    if (chunk.buffer.byteLength === 0) {\n      throw new TypeError(`chunk's buffer must have non-zero byteLength`);\n    }\n\n    if (this._closeRequested) {\n      throw new TypeError('stream is closed or draining');\n    }\n\n    const state = this._controlledReadableByteStream._state;\n    if (state !== 'readable') {\n      throw new TypeError(`The stream (in ${state} state) is not in the readable state and cannot be enqueued to`);\n    }\n\n    ReadableByteStreamControllerEnqueue(this, chunk);\n  }\n\n  /**\n   * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n   */\n  error(e: any = undefined): void {\n    if (!IsReadableByteStreamController(this)) {\n      throw byteStreamControllerBrandCheckException('error');\n    }\n\n    ReadableByteStreamControllerError(this, e);\n  }\n\n  /** @internal */\n  [CancelSteps](reason: any): Promise<void> {\n    ReadableByteStreamControllerClearPendingPullIntos(this);\n\n    ResetQueue(this);\n\n    const result = this._cancelAlgorithm(reason);\n    ReadableByteStreamControllerClearAlgorithms(this);\n    return result;\n  }\n\n  /** @internal */\n  [PullSteps](readRequest: ReadRequest<NonShared<Uint8Array>>): void {\n    const stream = this._controlledReadableByteStream;\n    assert(ReadableStreamHasDefaultReader(stream));\n\n    if (this._queueTotalSize > 0) {\n      assert(ReadableStreamGetNumReadRequests(stream) === 0);\n\n      ReadableByteStreamControllerFillReadRequestFromQueue(this, readRequest);\n      return;\n    }\n\n    const autoAllocateChunkSize = this._autoAllocateChunkSize;\n    if (autoAllocateChunkSize !== undefined) {\n      let buffer: ArrayBuffer;\n      try {\n        buffer = new ArrayBuffer(autoAllocateChunkSize);\n      } catch (bufferE) {\n        readRequest._errorSteps(bufferE);\n        return;\n      }\n\n      const pullIntoDescriptor: DefaultPullIntoDescriptor = {\n        buffer,\n        bufferByteLength: autoAllocateChunkSize,\n        byteOffset: 0,\n        byteLength: autoAllocateChunkSize,\n        bytesFilled: 0,\n        minimumFill: 1,\n        elementSize: 1,\n        viewConstructor: Uint8Array,\n        readerType: 'default'\n      };\n\n      this._pendingPullIntos.push(pullIntoDescriptor);\n    }\n\n    ReadableStreamAddReadRequest(stream, readRequest);\n    ReadableByteStreamControllerCallPullIfNeeded(this);\n  }\n\n  /** @internal */\n  [ReleaseSteps](): void {\n    if (this._pendingPullIntos.length > 0) {\n      const firstPullInto = this._pendingPullIntos.peek();\n      firstPullInto.readerType = 'none';\n\n      this._pendingPullIntos = new SimpleQueue();\n      this._pendingPullIntos.push(firstPullInto);\n    }\n  }\n}\n\nObject.defineProperties(ReadableByteStreamController.prototype, {\n  close: { enumerable: true },\n  enqueue: { enumerable: true },\n  error: { enumerable: true },\n  byobRequest: { enumerable: true },\n  desiredSize: { enumerable: true }\n});\nsetFunctionName(ReadableByteStreamController.prototype.close, 'close');\nsetFunctionName(ReadableByteStreamController.prototype.enqueue, 'enqueue');\nsetFunctionName(ReadableByteStreamController.prototype.error, 'error');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableByteStreamController.prototype, Symbol.toStringTag, {\n    value: 'ReadableByteStreamController',\n    configurable: true\n  });\n}\n\n// Abstract operations for the ReadableByteStreamController.\n\nexport function IsReadableByteStreamController(x: any): x is ReadableByteStreamController {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableByteStream')) {\n    return false;\n  }\n\n  return x instanceof ReadableByteStreamController;\n}\n\nfunction IsReadableStreamBYOBRequest(x: any): x is ReadableStreamBYOBRequest {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_associatedReadableByteStreamController')) {\n    return false;\n  }\n\n  return x instanceof ReadableStreamBYOBRequest;\n}\n\nfunction ReadableByteStreamControllerCallPullIfNeeded(controller: ReadableByteStreamController): void {\n  const shouldPull = ReadableByteStreamControllerShouldCallPull(controller);\n  if (!shouldPull) {\n    return;\n  }\n\n  if (controller._pulling) {\n    controller._pullAgain = true;\n    return;\n  }\n\n  assert(!controller._pullAgain);\n\n  controller._pulling = true;\n\n  // TODO: Test controller argument\n  const pullPromise = controller._pullAlgorithm();\n  uponPromise(\n    pullPromise,\n    () => {\n      controller._pulling = false;\n\n      if (controller._pullAgain) {\n        controller._pullAgain = false;\n        ReadableByteStreamControllerCallPullIfNeeded(controller);\n      }\n\n      return null;\n    },\n    e => {\n      ReadableByteStreamControllerError(controller, e);\n      return null;\n    }\n  );\n}\n\nfunction ReadableByteStreamControllerClearPendingPullIntos(controller: ReadableByteStreamController) {\n  ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n  controller._pendingPullIntos = new SimpleQueue();\n}\n\nfunction ReadableByteStreamControllerCommitPullIntoDescriptor<T extends NonShared<ArrayBufferView>>(\n  stream: ReadableByteStream,\n  pullIntoDescriptor: PullIntoDescriptor<T>\n) {\n  assert(stream._state !== 'errored');\n  assert(pullIntoDescriptor.readerType !== 'none');\n\n  let done = false;\n  if (stream._state === 'closed') {\n    assert(pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize === 0);\n    done = true;\n  }\n\n  const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor<T>(pullIntoDescriptor);\n  if (pullIntoDescriptor.readerType === 'default') {\n    ReadableStreamFulfillReadRequest(stream, filledView as unknown as NonShared<Uint8Array>, done);\n  } else {\n    assert(pullIntoDescriptor.readerType === 'byob');\n    ReadableStreamFulfillReadIntoRequest(stream, filledView, done);\n  }\n}\n\nfunction ReadableByteStreamControllerConvertPullIntoDescriptor<T extends NonShared<ArrayBufferView>>(\n  pullIntoDescriptor: PullIntoDescriptor<T>\n): T {\n  const bytesFilled = pullIntoDescriptor.bytesFilled;\n  const elementSize = pullIntoDescriptor.elementSize;\n\n  assert(bytesFilled <= pullIntoDescriptor.byteLength);\n  assert(bytesFilled % elementSize === 0);\n\n  return new pullIntoDescriptor.viewConstructor(\n    pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, bytesFilled / elementSize) as T;\n}\n\nfunction ReadableByteStreamControllerEnqueueChunkToQueue(controller: ReadableByteStreamController,\n                                                         buffer: ArrayBuffer,\n                                                         byteOffset: number,\n                                                         byteLength: number) {\n  controller._queue.push({ buffer, byteOffset, byteLength });\n  controller._queueTotalSize += byteLength;\n}\n\nfunction ReadableByteStreamControllerEnqueueClonedChunkToQueue(controller: ReadableByteStreamController,\n                                                               buffer: ArrayBuffer,\n                                                               byteOffset: number,\n                                                               byteLength: number) {\n  let clonedChunk;\n  try {\n    clonedChunk = ArrayBufferSlice(buffer, byteOffset, byteOffset + byteLength);\n  } catch (cloneE) {\n    ReadableByteStreamControllerError(controller, cloneE);\n    throw cloneE;\n  }\n  ReadableByteStreamControllerEnqueueChunkToQueue(controller, clonedChunk, 0, byteLength);\n}\n\nfunction ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller: ReadableByteStreamController,\n                                                                    firstDescriptor: PullIntoDescriptor) {\n  assert(firstDescriptor.readerType === 'none');\n  if (firstDescriptor.bytesFilled > 0) {\n    ReadableByteStreamControllerEnqueueClonedChunkToQueue(\n      controller,\n      firstDescriptor.buffer,\n      firstDescriptor.byteOffset,\n      firstDescriptor.bytesFilled\n    );\n  }\n  ReadableByteStreamControllerShiftPendingPullInto(controller);\n}\n\nfunction ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller: ReadableByteStreamController,\n                                                                     pullIntoDescriptor: PullIntoDescriptor) {\n  const maxBytesToCopy = Math.min(controller._queueTotalSize,\n                                  pullIntoDescriptor.byteLength - pullIntoDescriptor.bytesFilled);\n  const maxBytesFilled = pullIntoDescriptor.bytesFilled + maxBytesToCopy;\n\n  let totalBytesToCopyRemaining = maxBytesToCopy;\n  let ready = false;\n  assert(pullIntoDescriptor.bytesFilled < pullIntoDescriptor.minimumFill);\n  const remainderBytes = maxBytesFilled % pullIntoDescriptor.elementSize;\n  const maxAlignedBytes = maxBytesFilled - remainderBytes;\n  // A descriptor for a read() request that is not yet filled up to its minimum length will stay at the head\n  // of the queue, so the underlying source can keep filling it.\n  if (maxAlignedBytes >= pullIntoDescriptor.minimumFill) {\n    totalBytesToCopyRemaining = maxAlignedBytes - pullIntoDescriptor.bytesFilled;\n    ready = true;\n  }\n\n  const queue = controller._queue;\n\n  while (totalBytesToCopyRemaining > 0) {\n    const headOfQueue = queue.peek();\n\n    const bytesToCopy = Math.min(totalBytesToCopyRemaining, headOfQueue.byteLength);\n\n    const destStart = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n    CopyDataBlockBytes(pullIntoDescriptor.buffer, destStart, headOfQueue.buffer, headOfQueue.byteOffset, bytesToCopy);\n\n    if (headOfQueue.byteLength === bytesToCopy) {\n      queue.shift();\n    } else {\n      headOfQueue.byteOffset += bytesToCopy;\n      headOfQueue.byteLength -= bytesToCopy;\n    }\n    controller._queueTotalSize -= bytesToCopy;\n\n    ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesToCopy, pullIntoDescriptor);\n\n    totalBytesToCopyRemaining -= bytesToCopy;\n  }\n\n  if (!ready) {\n    assert(controller._queueTotalSize === 0);\n    assert(pullIntoDescriptor.bytesFilled > 0);\n    assert(pullIntoDescriptor.bytesFilled < pullIntoDescriptor.minimumFill);\n  }\n\n  return ready;\n}\n\nfunction ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller: ReadableByteStreamController,\n                                                                size: number,\n                                                                pullIntoDescriptor: PullIntoDescriptor) {\n  assert(controller._pendingPullIntos.length === 0 || controller._pendingPullIntos.peek() === pullIntoDescriptor);\n  assert(controller._byobRequest === null);\n  pullIntoDescriptor.bytesFilled += size;\n}\n\nfunction ReadableByteStreamControllerHandleQueueDrain(controller: ReadableByteStreamController) {\n  assert(controller._controlledReadableByteStream._state === 'readable');\n\n  if (controller._queueTotalSize === 0 && controller._closeRequested) {\n    ReadableByteStreamControllerClearAlgorithms(controller);\n    ReadableStreamClose(controller._controlledReadableByteStream);\n  } else {\n    ReadableByteStreamControllerCallPullIfNeeded(controller);\n  }\n}\n\nfunction ReadableByteStreamControllerInvalidateBYOBRequest(controller: ReadableByteStreamController) {\n  if (controller._byobRequest === null) {\n    return;\n  }\n\n  controller._byobRequest._associatedReadableByteStreamController = undefined!;\n  controller._byobRequest._view = null!;\n  controller._byobRequest = null;\n}\n\nfunction ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller: ReadableByteStreamController) {\n  assert(!controller._closeRequested);\n\n  while (controller._pendingPullIntos.length > 0) {\n    if (controller._queueTotalSize === 0) {\n      return;\n    }\n\n    const pullIntoDescriptor = controller._pendingPullIntos.peek();\n    assert(pullIntoDescriptor.readerType !== 'none');\n\n    if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n      ReadableByteStreamControllerShiftPendingPullInto(controller);\n\n      ReadableByteStreamControllerCommitPullIntoDescriptor(\n        controller._controlledReadableByteStream,\n        pullIntoDescriptor\n      );\n    }\n  }\n}\n\nfunction ReadableByteStreamControllerProcessReadRequestsUsingQueue(controller: ReadableByteStreamController) {\n  const reader = controller._controlledReadableByteStream._reader;\n  assert(IsReadableStreamDefaultReader(reader));\n  while (reader._readRequests.length > 0) {\n    if (controller._queueTotalSize === 0) {\n      return;\n    }\n    const readRequest = reader._readRequests.shift();\n    ReadableByteStreamControllerFillReadRequestFromQueue(controller, readRequest);\n  }\n}\n\nexport function ReadableByteStreamControllerPullInto<T extends NonShared<ArrayBufferView>>(\n  controller: ReadableByteStreamController,\n  view: T,\n  min: number,\n  readIntoRequest: ReadIntoRequest<T>\n): void {\n  const stream = controller._controlledReadableByteStream;\n\n  const ctor = view.constructor as ArrayBufferViewConstructor<T>;\n  const elementSize = arrayBufferViewElementSize(ctor);\n\n  const { byteOffset, byteLength } = view;\n\n  const minimumFill = min * elementSize;\n  assert(minimumFill >= elementSize && minimumFill <= byteLength);\n  assert(minimumFill % elementSize === 0);\n\n  let buffer: ArrayBuffer;\n  try {\n    buffer = TransferArrayBuffer(view.buffer);\n  } catch (e) {\n    readIntoRequest._errorSteps(e);\n    return;\n  }\n\n  const pullIntoDescriptor: BYOBPullIntoDescriptor<T> = {\n    buffer,\n    bufferByteLength: buffer.byteLength,\n    byteOffset,\n    byteLength,\n    bytesFilled: 0,\n    minimumFill,\n    elementSize,\n    viewConstructor: ctor,\n    readerType: 'byob'\n  };\n\n  if (controller._pendingPullIntos.length > 0) {\n    controller._pendingPullIntos.push(pullIntoDescriptor);\n\n    // No ReadableByteStreamControllerCallPullIfNeeded() call since:\n    // - No change happens on desiredSize\n    // - The source has already been notified of that there's at least 1 pending read(view)\n\n    ReadableStreamAddReadIntoRequest(stream, readIntoRequest);\n    return;\n  }\n\n  if (stream._state === 'closed') {\n    const emptyView = new ctor(pullIntoDescriptor.buffer, pullIntoDescriptor.byteOffset, 0);\n    readIntoRequest._closeSteps(emptyView);\n    return;\n  }\n\n  if (controller._queueTotalSize > 0) {\n    if (ReadableByteStreamControllerFillPullIntoDescriptorFromQueue(controller, pullIntoDescriptor)) {\n      const filledView = ReadableByteStreamControllerConvertPullIntoDescriptor<T>(pullIntoDescriptor);\n\n      ReadableByteStreamControllerHandleQueueDrain(controller);\n\n      readIntoRequest._chunkSteps(filledView);\n      return;\n    }\n\n    if (controller._closeRequested) {\n      const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n      ReadableByteStreamControllerError(controller, e);\n\n      readIntoRequest._errorSteps(e);\n      return;\n    }\n  }\n\n  controller._pendingPullIntos.push(pullIntoDescriptor);\n\n  ReadableStreamAddReadIntoRequest<T>(stream, readIntoRequest);\n  ReadableByteStreamControllerCallPullIfNeeded(controller);\n}\n\nfunction ReadableByteStreamControllerRespondInClosedState(controller: ReadableByteStreamController,\n                                                          firstDescriptor: PullIntoDescriptor) {\n  assert(firstDescriptor.bytesFilled % firstDescriptor.elementSize === 0);\n\n  if (firstDescriptor.readerType === 'none') {\n    ReadableByteStreamControllerShiftPendingPullInto(controller);\n  }\n\n  const stream = controller._controlledReadableByteStream;\n  if (ReadableStreamHasBYOBReader(stream)) {\n    while (ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n      const pullIntoDescriptor = ReadableByteStreamControllerShiftPendingPullInto(controller);\n      ReadableByteStreamControllerCommitPullIntoDescriptor(stream, pullIntoDescriptor);\n    }\n  }\n}\n\nfunction ReadableByteStreamControllerRespondInReadableState(controller: ReadableByteStreamController,\n                                                            bytesWritten: number,\n                                                            pullIntoDescriptor: PullIntoDescriptor) {\n  assert(pullIntoDescriptor.bytesFilled + bytesWritten <= pullIntoDescriptor.byteLength);\n\n  ReadableByteStreamControllerFillHeadPullIntoDescriptor(controller, bytesWritten, pullIntoDescriptor);\n\n  if (pullIntoDescriptor.readerType === 'none') {\n    ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, pullIntoDescriptor);\n    ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n    return;\n  }\n\n  if (pullIntoDescriptor.bytesFilled < pullIntoDescriptor.minimumFill) {\n    // A descriptor for a read() request that is not yet filled up to its minimum length will stay at the head\n    // of the queue, so the underlying source can keep filling it.\n    return;\n  }\n\n  ReadableByteStreamControllerShiftPendingPullInto(controller);\n\n  const remainderSize = pullIntoDescriptor.bytesFilled % pullIntoDescriptor.elementSize;\n  if (remainderSize > 0) {\n    const end = pullIntoDescriptor.byteOffset + pullIntoDescriptor.bytesFilled;\n    ReadableByteStreamControllerEnqueueClonedChunkToQueue(\n      controller,\n      pullIntoDescriptor.buffer,\n      end - remainderSize,\n      remainderSize\n    );\n  }\n\n  pullIntoDescriptor.bytesFilled -= remainderSize;\n  ReadableByteStreamControllerCommitPullIntoDescriptor(controller._controlledReadableByteStream, pullIntoDescriptor);\n\n  ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n}\n\nfunction ReadableByteStreamControllerRespondInternal(controller: ReadableByteStreamController, bytesWritten: number) {\n  const firstDescriptor = controller._pendingPullIntos.peek();\n  assert(CanTransferArrayBuffer(firstDescriptor.buffer));\n\n  ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n\n  const state = controller._controlledReadableByteStream._state;\n  if (state === 'closed') {\n    assert(bytesWritten === 0);\n    ReadableByteStreamControllerRespondInClosedState(controller, firstDescriptor);\n  } else {\n    assert(state === 'readable');\n    assert(bytesWritten > 0);\n    ReadableByteStreamControllerRespondInReadableState(controller, bytesWritten, firstDescriptor);\n  }\n\n  ReadableByteStreamControllerCallPullIfNeeded(controller);\n}\n\nfunction ReadableByteStreamControllerShiftPendingPullInto(\n  controller: ReadableByteStreamController\n): PullIntoDescriptor {\n  assert(controller._byobRequest === null);\n  const descriptor = controller._pendingPullIntos.shift()!;\n  return descriptor;\n}\n\nfunction ReadableByteStreamControllerShouldCallPull(controller: ReadableByteStreamController): boolean {\n  const stream = controller._controlledReadableByteStream;\n\n  if (stream._state !== 'readable') {\n    return false;\n  }\n\n  if (controller._closeRequested) {\n    return false;\n  }\n\n  if (!controller._started) {\n    return false;\n  }\n\n  if (ReadableStreamHasDefaultReader(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n    return true;\n  }\n\n  if (ReadableStreamHasBYOBReader(stream) && ReadableStreamGetNumReadIntoRequests(stream) > 0) {\n    return true;\n  }\n\n  const desiredSize = ReadableByteStreamControllerGetDesiredSize(controller);\n  assert(desiredSize !== null);\n  if (desiredSize! > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction ReadableByteStreamControllerClearAlgorithms(controller: ReadableByteStreamController) {\n  controller._pullAlgorithm = undefined!;\n  controller._cancelAlgorithm = undefined!;\n}\n\n// A client of ReadableByteStreamController may use these functions directly to bypass state check.\n\nexport function ReadableByteStreamControllerClose(controller: ReadableByteStreamController) {\n  const stream = controller._controlledReadableByteStream;\n\n  if (controller._closeRequested || stream._state !== 'readable') {\n    return;\n  }\n\n  if (controller._queueTotalSize > 0) {\n    controller._closeRequested = true;\n\n    return;\n  }\n\n  if (controller._pendingPullIntos.length > 0) {\n    const firstPendingPullInto = controller._pendingPullIntos.peek();\n    if (firstPendingPullInto.bytesFilled % firstPendingPullInto.elementSize !== 0) {\n      const e = new TypeError('Insufficient bytes to fill elements in the given buffer');\n      ReadableByteStreamControllerError(controller, e);\n\n      throw e;\n    }\n  }\n\n  ReadableByteStreamControllerClearAlgorithms(controller);\n  ReadableStreamClose(stream);\n}\n\nexport function ReadableByteStreamControllerEnqueue(\n  controller: ReadableByteStreamController,\n  chunk: NonShared<ArrayBufferView>\n) {\n  const stream = controller._controlledReadableByteStream;\n\n  if (controller._closeRequested || stream._state !== 'readable') {\n    return;\n  }\n\n  const { buffer, byteOffset, byteLength } = chunk;\n  if (IsDetachedBuffer(buffer)) {\n    throw new TypeError('chunk\\'s buffer is detached and so cannot be enqueued');\n  }\n  const transferredBuffer = TransferArrayBuffer(buffer);\n\n  if (controller._pendingPullIntos.length > 0) {\n    const firstPendingPullInto = controller._pendingPullIntos.peek();\n    if (IsDetachedBuffer(firstPendingPullInto.buffer)) {\n      throw new TypeError(\n        'The BYOB request\\'s buffer has been detached and so cannot be filled with an enqueued chunk'\n      );\n    }\n    ReadableByteStreamControllerInvalidateBYOBRequest(controller);\n    firstPendingPullInto.buffer = TransferArrayBuffer(firstPendingPullInto.buffer);\n    if (firstPendingPullInto.readerType === 'none') {\n      ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue(controller, firstPendingPullInto);\n    }\n  }\n\n  if (ReadableStreamHasDefaultReader(stream)) {\n    ReadableByteStreamControllerProcessReadRequestsUsingQueue(controller);\n    if (ReadableStreamGetNumReadRequests(stream) === 0) {\n      assert(controller._pendingPullIntos.length === 0);\n      ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n    } else {\n      assert(controller._queue.length === 0);\n      if (controller._pendingPullIntos.length > 0) {\n        assert(controller._pendingPullIntos.peek().readerType === 'default');\n        ReadableByteStreamControllerShiftPendingPullInto(controller);\n      }\n      const transferredView = new Uint8Array(transferredBuffer, byteOffset, byteLength);\n      ReadableStreamFulfillReadRequest(stream, transferredView as NonShared<Uint8Array>, false);\n    }\n  } else if (ReadableStreamHasBYOBReader(stream)) {\n    // TODO: Ideally in this branch detaching should happen only if the buffer is not consumed fully.\n    ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n    ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(controller);\n  } else {\n    assert(!IsReadableStreamLocked(stream));\n    ReadableByteStreamControllerEnqueueChunkToQueue(controller, transferredBuffer, byteOffset, byteLength);\n  }\n\n  ReadableByteStreamControllerCallPullIfNeeded(controller);\n}\n\nexport function ReadableByteStreamControllerError(controller: ReadableByteStreamController, e: any) {\n  const stream = controller._controlledReadableByteStream;\n\n  if (stream._state !== 'readable') {\n    return;\n  }\n\n  ReadableByteStreamControllerClearPendingPullIntos(controller);\n\n  ResetQueue(controller);\n  ReadableByteStreamControllerClearAlgorithms(controller);\n  ReadableStreamError(stream, e);\n}\n\nexport function ReadableByteStreamControllerFillReadRequestFromQueue(\n  controller: ReadableByteStreamController,\n  readRequest: ReadRequest<NonShared<Uint8Array>>\n) {\n  assert(controller._queueTotalSize > 0);\n\n  const entry = controller._queue.shift();\n  controller._queueTotalSize -= entry.byteLength;\n\n  ReadableByteStreamControllerHandleQueueDrain(controller);\n\n  const view = new Uint8Array(entry.buffer, entry.byteOffset, entry.byteLength);\n  readRequest._chunkSteps(view as NonShared<Uint8Array>);\n}\n\nexport function ReadableByteStreamControllerGetBYOBRequest(\n  controller: ReadableByteStreamController\n): ReadableStreamBYOBRequest | null {\n  if (controller._byobRequest === null && controller._pendingPullIntos.length > 0) {\n    const firstDescriptor = controller._pendingPullIntos.peek();\n    const view = new Uint8Array(firstDescriptor.buffer,\n                                firstDescriptor.byteOffset + firstDescriptor.bytesFilled,\n                                firstDescriptor.byteLength - firstDescriptor.bytesFilled);\n\n    const byobRequest: ReadableStreamBYOBRequest = Object.create(ReadableStreamBYOBRequest.prototype);\n    SetUpReadableStreamBYOBRequest(byobRequest, controller, view as NonShared<Uint8Array>);\n    controller._byobRequest = byobRequest;\n  }\n  return controller._byobRequest;\n}\n\nfunction ReadableByteStreamControllerGetDesiredSize(controller: ReadableByteStreamController): number | null {\n  const state = controller._controlledReadableByteStream._state;\n\n  if (state === 'errored') {\n    return null;\n  }\n  if (state === 'closed') {\n    return 0;\n  }\n\n  return controller._strategyHWM - controller._queueTotalSize;\n}\n\nexport function ReadableByteStreamControllerRespond(controller: ReadableByteStreamController, bytesWritten: number) {\n  assert(controller._pendingPullIntos.length > 0);\n\n  const firstDescriptor = controller._pendingPullIntos.peek();\n  const state = controller._controlledReadableByteStream._state;\n\n  if (state === 'closed') {\n    if (bytesWritten !== 0) {\n      throw new TypeError('bytesWritten must be 0 when calling respond() on a closed stream');\n    }\n  } else {\n    assert(state === 'readable');\n    if (bytesWritten === 0) {\n      throw new TypeError('bytesWritten must be greater than 0 when calling respond() on a readable stream');\n    }\n    if (firstDescriptor.bytesFilled + bytesWritten > firstDescriptor.byteLength) {\n      throw new RangeError('bytesWritten out of range');\n    }\n  }\n\n  firstDescriptor.buffer = TransferArrayBuffer(firstDescriptor.buffer);\n\n  ReadableByteStreamControllerRespondInternal(controller, bytesWritten);\n}\n\nexport function ReadableByteStreamControllerRespondWithNewView(controller: ReadableByteStreamController,\n                                                               view: NonShared<ArrayBufferView>) {\n  assert(controller._pendingPullIntos.length > 0);\n  assert(!IsDetachedBuffer(view.buffer));\n\n  const firstDescriptor = controller._pendingPullIntos.peek();\n  const state = controller._controlledReadableByteStream._state;\n\n  if (state === 'closed') {\n    if (view.byteLength !== 0) {\n      throw new TypeError('The view\\'s length must be 0 when calling respondWithNewView() on a closed stream');\n    }\n  } else {\n    assert(state === 'readable');\n    if (view.byteLength === 0) {\n      throw new TypeError(\n        'The view\\'s length must be greater than 0 when calling respondWithNewView() on a readable stream'\n      );\n    }\n  }\n\n  if (firstDescriptor.byteOffset + firstDescriptor.bytesFilled !== view.byteOffset) {\n    throw new RangeError('The region specified by view does not match byobRequest');\n  }\n  if (firstDescriptor.bufferByteLength !== view.buffer.byteLength) {\n    throw new RangeError('The buffer of view has different capacity than byobRequest');\n  }\n  if (firstDescriptor.bytesFilled + view.byteLength > firstDescriptor.byteLength) {\n    throw new RangeError('The region specified by view is larger than byobRequest');\n  }\n\n  const viewByteLength = view.byteLength;\n  firstDescriptor.buffer = TransferArrayBuffer(view.buffer);\n  ReadableByteStreamControllerRespondInternal(controller, viewByteLength);\n}\n\nexport function SetUpReadableByteStreamController(stream: ReadableByteStream,\n                                                  controller: ReadableByteStreamController,\n                                                  startAlgorithm: () => void | PromiseLike<void>,\n                                                  pullAlgorithm: () => Promise<void>,\n                                                  cancelAlgorithm: (reason: any) => Promise<void>,\n                                                  highWaterMark: number,\n                                                  autoAllocateChunkSize: number | undefined) {\n  assert(stream._readableStreamController === undefined);\n  if (autoAllocateChunkSize !== undefined) {\n    assert(NumberIsInteger(autoAllocateChunkSize));\n    assert(autoAllocateChunkSize > 0);\n  }\n\n  controller._controlledReadableByteStream = stream;\n\n  controller._pullAgain = false;\n  controller._pulling = false;\n\n  controller._byobRequest = null;\n\n  // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n  controller._queue = controller._queueTotalSize = undefined!;\n  ResetQueue(controller);\n\n  controller._closeRequested = false;\n  controller._started = false;\n\n  controller._strategyHWM = highWaterMark;\n\n  controller._pullAlgorithm = pullAlgorithm;\n  controller._cancelAlgorithm = cancelAlgorithm;\n\n  controller._autoAllocateChunkSize = autoAllocateChunkSize;\n\n  controller._pendingPullIntos = new SimpleQueue();\n\n  stream._readableStreamController = controller;\n\n  const startResult = startAlgorithm();\n  uponPromise(\n    promiseResolvedWith(startResult),\n    () => {\n      controller._started = true;\n\n      assert(!controller._pulling);\n      assert(!controller._pullAgain);\n\n      ReadableByteStreamControllerCallPullIfNeeded(controller);\n      return null;\n    },\n    r => {\n      ReadableByteStreamControllerError(controller, r);\n      return null;\n    }\n  );\n}\n\nexport function SetUpReadableByteStreamControllerFromUnderlyingSource(\n  stream: ReadableByteStream,\n  underlyingByteSource: ValidatedUnderlyingByteSource,\n  highWaterMark: number\n) {\n  const controller: ReadableByteStreamController = Object.create(ReadableByteStreamController.prototype);\n\n  let startAlgorithm: () => void | PromiseLike<void>;\n  let pullAlgorithm: () => Promise<void>;\n  let cancelAlgorithm: (reason: any) => Promise<void>;\n\n  if (underlyingByteSource.start !== undefined) {\n    startAlgorithm = () => underlyingByteSource.start!(controller);\n  } else {\n    startAlgorithm = () => undefined;\n  }\n  if (underlyingByteSource.pull !== undefined) {\n    pullAlgorithm = () => underlyingByteSource.pull!(controller);\n  } else {\n    pullAlgorithm = () => promiseResolvedWith(undefined);\n  }\n  if (underlyingByteSource.cancel !== undefined) {\n    cancelAlgorithm = reason => underlyingByteSource.cancel!(reason);\n  } else {\n    cancelAlgorithm = () => promiseResolvedWith(undefined);\n  }\n\n  const autoAllocateChunkSize = underlyingByteSource.autoAllocateChunkSize;\n  if (autoAllocateChunkSize === 0) {\n    throw new TypeError('autoAllocateChunkSize must be greater than 0');\n  }\n\n  SetUpReadableByteStreamController(\n    stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, autoAllocateChunkSize\n  );\n}\n\nfunction SetUpReadableStreamBYOBRequest(request: ReadableStreamBYOBRequest,\n                                        controller: ReadableByteStreamController,\n                                        view: NonShared<ArrayBufferView>) {\n  assert(IsReadableByteStreamController(controller));\n  assert(typeof view === 'object');\n  assert(ArrayBuffer.isView(view));\n  assert(!IsDetachedBuffer(view.buffer));\n  request._associatedReadableByteStreamController = controller;\n  request._view = view;\n}\n\n// Helper functions for the ReadableStreamBYOBRequest.\n\nfunction byobRequestBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamBYOBRequest.prototype.${name} can only be used on a ReadableStreamBYOBRequest`);\n}\n\n// Helper functions for the ReadableByteStreamController.\n\nfunction byteStreamControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableByteStreamController.prototype.${name} can only be used on a ReadableByteStreamController`);\n}\n", "import { assertDictionary, convertUnsignedLongLongWithEnforceRange } from './basic';\nimport type {\n  ReadableStreamBYOBReaderReadOptions,\n  ReadableStreamGetReaderOptions,\n  ValidatedReadableStreamBYOBReaderReadOptions\n} from '../readable-stream/reader-options';\n\nexport function convertReaderOptions(options: ReadableStreamGetReaderOptions | null | undefined,\n                                     context: string): ReadableStreamGetReaderOptions {\n  assertDictionary(options, context);\n  const mode = options?.mode;\n  return {\n    mode: mode === undefined ? undefined : convertReadableStreamReaderMode(mode, `${context} has member 'mode' that`)\n  };\n}\n\nfunction convertReadableStreamReaderMode(mode: string, context: string): 'byob' {\n  mode = `${mode}`;\n  if (mode !== 'byob') {\n    throw new TypeError(`${context} '${mode}' is not a valid enumeration value for ReadableStreamReaderMode`);\n  }\n  return mode;\n}\n\nexport function convertByobReadOptions(\n  options: ReadableStreamBYOBReaderReadOptions | null | undefined,\n  context: string\n): ValidatedReadableStreamBYOBReaderReadOptions {\n  assertDictionary(options, context);\n  const min = options?.min ?? 1;\n  return {\n    min: convertUnsignedLongLongWithEnforceRange(\n      min,\n      `${context} has member 'min' that`\n    )\n  };\n}\n", "import assert from '../../stub/assert';\nimport { SimpleQueue } from '../simple-queue';\nimport {\n  ReadableStreamReaderGenericCancel,\n  ReadableStreamReaderGenericInitialize,\n  ReadableStreamReaderGenericRelease,\n  readerLockException\n} from './generic-reader';\nimport { IsReadableStreamLocked, type ReadableByteStream, type ReadableStream } from '../readable-stream';\nimport {\n  IsReadableByteStreamController,\n  ReadableByteStreamController,\n  ReadableByteStreamControllerPullInto\n} from './byte-stream-controller';\nimport { setFunctionName, typeIsObject } from '../helpers/miscellaneous';\nimport { newPromise, promiseRejectedWith } from '../helpers/webidl';\nimport { assertRequiredArgument } from '../validators/basic';\nimport { assertReadableStream } from '../validators/readable-stream';\nimport { IsDetachedBuffer } from '../abstract-ops/ecmascript';\nimport type {\n  ReadableStreamBYOBReaderReadOptions,\n  ValidatedReadableStreamBYOBReaderReadOptions\n} from './reader-options';\nimport { convertByobReadOptions } from '../validators/reader-options';\nimport { isDataView, type NonShared, type TypedArray } from '../helpers/array-buffer-view';\n\n/**\n * A result returned by {@link ReadableStreamBYOBReader.read}.\n *\n * @public\n */\nexport type ReadableStreamBYOBReadResult<T extends ArrayBufferView> = {\n  done: false;\n  value: T;\n} | {\n  done: true;\n  value: T | undefined;\n};\n\n// Abstract operations for the ReadableStream.\n\nexport function AcquireReadableStreamBYOBReader(stream: ReadableByteStream): ReadableStreamBYOBReader {\n  return new ReadableStreamBYOBReader(stream as ReadableStream<Uint8Array>);\n}\n\n// ReadableStream API exposed for controllers.\n\nexport function ReadableStreamAddReadIntoRequest<T extends NonShared<ArrayBufferView>>(\n  stream: ReadableByteStream,\n  readIntoRequest: ReadIntoRequest<T>\n): void {\n  assert(IsReadableStreamBYOBReader(stream._reader));\n  assert(stream._state === 'readable' || stream._state === 'closed');\n\n  (stream._reader! as ReadableStreamBYOBReader)._readIntoRequests.push(readIntoRequest);\n}\n\nexport function ReadableStreamFulfillReadIntoRequest(stream: ReadableByteStream,\n                                                     chunk: ArrayBufferView,\n                                                     done: boolean) {\n  const reader = stream._reader as ReadableStreamBYOBReader;\n\n  assert(reader._readIntoRequests.length > 0);\n\n  const readIntoRequest = reader._readIntoRequests.shift()!;\n  if (done) {\n    readIntoRequest._closeSteps(chunk);\n  } else {\n    readIntoRequest._chunkSteps(chunk);\n  }\n}\n\nexport function ReadableStreamGetNumReadIntoRequests(stream: ReadableByteStream): number {\n  return (stream._reader as ReadableStreamBYOBReader)._readIntoRequests.length;\n}\n\nexport function ReadableStreamHasBYOBReader(stream: ReadableByteStream): boolean {\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return false;\n  }\n\n  if (!IsReadableStreamBYOBReader(reader)) {\n    return false;\n  }\n\n  return true;\n}\n\n// Readers\n\nexport interface ReadIntoRequest<T extends NonShared<ArrayBufferView>> {\n  _chunkSteps(chunk: T): void;\n\n  _closeSteps(chunk: T | undefined): void;\n\n  _errorSteps(e: any): void;\n}\n\n/**\n * A BYOB reader vended by a {@link ReadableStream}.\n *\n * @public\n */\nexport class ReadableStreamBYOBReader {\n  /** @internal */\n  _ownerReadableStream!: ReadableByteStream;\n  /** @internal */\n  _closedPromise!: Promise<undefined>;\n  /** @internal */\n  _closedPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _closedPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _readIntoRequests: SimpleQueue<ReadIntoRequest<any>>;\n\n  constructor(stream: ReadableStream<Uint8Array>) {\n    assertRequiredArgument(stream, 1, 'ReadableStreamBYOBReader');\n    assertReadableStream(stream, 'First parameter');\n\n    if (IsReadableStreamLocked(stream)) {\n      throw new TypeError('This stream has already been locked for exclusive reading by another reader');\n    }\n\n    if (!IsReadableByteStreamController(stream._readableStreamController)) {\n      throw new TypeError('Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte ' +\n        'source');\n    }\n\n    ReadableStreamReaderGenericInitialize(this, stream);\n\n    this._readIntoRequests = new SimpleQueue();\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n   * the reader's lock is released before the stream finishes closing.\n   */\n  get closed(): Promise<undefined> {\n    if (!IsReadableStreamBYOBReader(this)) {\n      return promiseRejectedWith(byobReaderBrandCheckException('closed'));\n    }\n\n    return this._closedPromise;\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link ReadableStream.cancel | stream.cancel(reason)}.\n   */\n  cancel(reason: any = undefined): Promise<void> {\n    if (!IsReadableStreamBYOBReader(this)) {\n      return promiseRejectedWith(byobReaderBrandCheckException('cancel'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('cancel'));\n    }\n\n    return ReadableStreamReaderGenericCancel(this, reason);\n  }\n\n  /**\n   * Attempts to reads bytes into view, and returns a promise resolved with the result.\n   *\n   * If reading a chunk causes the queue to become empty, more data will be pulled from the underlying source.\n   */\n  read<T extends ArrayBufferView>(\n    view: T,\n    options?: ReadableStreamBYOBReaderReadOptions\n  ): Promise<ReadableStreamBYOBReadResult<T>>;\n  read<T extends NonShared<ArrayBufferView>>(\n    view: T,\n    rawOptions: ReadableStreamBYOBReaderReadOptions | null | undefined = {}\n  ): Promise<ReadableStreamBYOBReadResult<T>> {\n    if (!IsReadableStreamBYOBReader(this)) {\n      return promiseRejectedWith(byobReaderBrandCheckException('read'));\n    }\n\n    if (!ArrayBuffer.isView(view)) {\n      return promiseRejectedWith(new TypeError('view must be an array buffer view'));\n    }\n    if (view.byteLength === 0) {\n      return promiseRejectedWith(new TypeError('view must have non-zero byteLength'));\n    }\n    if (view.buffer.byteLength === 0) {\n      return promiseRejectedWith(new TypeError(`view's buffer must have non-zero byteLength`));\n    }\n    if (IsDetachedBuffer(view.buffer)) {\n      return promiseRejectedWith(new TypeError('view\\'s buffer has been detached'));\n    }\n\n    let options: ValidatedReadableStreamBYOBReaderReadOptions;\n    try {\n      options = convertByobReadOptions(rawOptions, 'options');\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n    const min = options.min;\n    if (min === 0) {\n      return promiseRejectedWith(new TypeError('options.min must be greater than 0'));\n    }\n    if (!isDataView(view)) {\n      if (min > (view as unknown as TypedArray).length) {\n        return promiseRejectedWith(new RangeError('options.min must be less than or equal to view\\'s length'));\n      }\n    } else if (min > view.byteLength) {\n      return promiseRejectedWith(new RangeError('options.min must be less than or equal to view\\'s byteLength'));\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return promiseRejectedWith(readerLockException('read from'));\n    }\n\n    let resolvePromise!: (result: ReadableStreamBYOBReadResult<T>) => void;\n    let rejectPromise!: (reason: any) => void;\n    const promise = newPromise<ReadableStreamBYOBReadResult<T>>((resolve, reject) => {\n      resolvePromise = resolve;\n      rejectPromise = reject;\n    });\n    const readIntoRequest: ReadIntoRequest<T> = {\n      _chunkSteps: chunk => resolvePromise({ value: chunk, done: false }),\n      _closeSteps: chunk => resolvePromise({ value: chunk, done: true }),\n      _errorSteps: e => rejectPromise(e)\n    };\n    ReadableStreamBYOBReaderRead(this, view, min, readIntoRequest);\n    return promise;\n  }\n\n  /**\n   * Releases the reader's lock on the corresponding stream. After the lock is released, the reader is no longer active.\n   * If the associated stream is errored when the lock is released, the reader will appear errored in the same way\n   * from now on; otherwise, the reader will appear closed.\n   *\n   * A reader's lock cannot be released while it still has a pending read request, i.e., if a promise returned by\n   * the reader's {@link ReadableStreamBYOBReader.read | read()} method has not yet been settled. Attempting to\n   * do so will throw a `TypeError` and leave the reader locked to the stream.\n   */\n  releaseLock(): void {\n    if (!IsReadableStreamBYOBReader(this)) {\n      throw byobReaderBrandCheckException('releaseLock');\n    }\n\n    if (this._ownerReadableStream === undefined) {\n      return;\n    }\n\n    ReadableStreamBYOBReaderRelease(this);\n  }\n}\n\nObject.defineProperties(ReadableStreamBYOBReader.prototype, {\n  cancel: { enumerable: true },\n  read: { enumerable: true },\n  releaseLock: { enumerable: true },\n  closed: { enumerable: true }\n});\nsetFunctionName(ReadableStreamBYOBReader.prototype.cancel, 'cancel');\nsetFunctionName(ReadableStreamBYOBReader.prototype.read, 'read');\nsetFunctionName(ReadableStreamBYOBReader.prototype.releaseLock, 'releaseLock');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamBYOBReader.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamBYOBReader',\n    configurable: true\n  });\n}\n\n// Abstract operations for the readers.\n\nexport function IsReadableStreamBYOBReader(x: any): x is ReadableStreamBYOBReader {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_readIntoRequests')) {\n    return false;\n  }\n\n  return x instanceof ReadableStreamBYOBReader;\n}\n\nexport function ReadableStreamBYOBReaderRead<T extends NonShared<ArrayBufferView>>(\n  reader: ReadableStreamBYOBReader,\n  view: T,\n  min: number,\n  readIntoRequest: ReadIntoRequest<T>\n): void {\n  const stream = reader._ownerReadableStream;\n\n  assert(stream !== undefined);\n\n  stream._disturbed = true;\n\n  if (stream._state === 'errored') {\n    readIntoRequest._errorSteps(stream._storedError);\n  } else {\n    ReadableByteStreamControllerPullInto(\n      stream._readableStreamController as ReadableByteStreamController,\n      view,\n      min,\n      readIntoRequest\n    );\n  }\n}\n\nexport function ReadableStreamBYOBReaderRelease(reader: ReadableStreamBYOBReader) {\n  ReadableStreamReaderGenericRelease(reader);\n  const e = new TypeError('Reader was released');\n  ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e);\n}\n\nexport function ReadableStreamBYOBReaderErrorReadIntoRequests(reader: ReadableStreamBYOBReader, e: any) {\n  const readIntoRequests = reader._readIntoRequests;\n  reader._readIntoRequests = new SimpleQueue();\n  readIntoRequests.forEach(readIntoRequest => {\n    readIntoRequest._errorSteps(e);\n  });\n}\n\n// Helper functions for the ReadableStreamBYOBReader.\n\nfunction byobReaderBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamBYOBReader.prototype.${name} can only be used on a ReadableStreamBYOBReader`);\n}\n", "import type { QueuingStrategy, QueuingStrategySizeCallback } from '../queuing-strategy';\nimport NumberIsNaN from '../../stub/number-isnan';\n\nexport function ExtractHighWaterMark(strategy: QueuingStrategy, defaultHWM: number): number {\n  const { highWaterMark } = strategy;\n\n  if (highWaterMark === undefined) {\n    return defaultHWM;\n  }\n\n  if (NumberIsNaN(highWaterMark) || highWaterMark < 0) {\n    throw new RangeError('Invalid highWaterMark');\n  }\n\n  return highWaterMark;\n}\n\nexport function ExtractSizeAlgorithm<T>(strategy: QueuingStrategy<T>): QueuingStrategySizeCallback<T> {\n  const { size } = strategy;\n\n  if (!size) {\n    return () => 1;\n  }\n\n  return size;\n}\n", "import type { QueuingStrategy, QueuingStrategySizeCallback } from '../queuing-strategy';\nimport { assertDictionary, assertFunction, convertUnrestrictedDouble } from './basic';\n\nexport function convertQueuingStrategy<T>(init: QueuingStrategy<T> | null | undefined,\n                                          context: string): QueuingStrategy<T> {\n  assertDictionary(init, context);\n  const highWaterMark = init?.highWaterMark;\n  const size = init?.size;\n  return {\n    highWaterMark: highWaterMark === undefined ? undefined : convertUnrestrictedDouble(highWaterMark),\n    size: size === undefined ? undefined : convertQueuingStrategySize(size, `${context} has member 'size' that`)\n  };\n}\n\nfunction convertQueuingStrategySize<T>(fn: QueuingStrategySizeCallback<T>,\n                                       context: string): QueuingStrategySizeCallback<T> {\n  assertFunction(fn, context);\n  return chunk => convertUnrestrictedDouble(fn(chunk));\n}\n", "import { assertDictionary, assertFunction } from './basic';\nimport { promiseCall, reflectCall } from '../helpers/webidl';\nimport type {\n  UnderlyingSink,\n  UnderlyingSinkAbortCallback,\n  UnderlyingSinkCloseCallback,\n  UnderlyingSinkStartCallback,\n  UnderlyingSinkWriteCallback,\n  ValidatedUnderlyingSink\n} from '../writable-stream/underlying-sink';\nimport { WritableStreamDefaultController } from '../writable-stream';\n\nexport function convertUnderlyingSink<W>(original: UnderlyingSink<W> | null,\n                                         context: string): ValidatedUnderlyingSink<W> {\n  assertDictionary(original, context);\n  const abort = original?.abort;\n  const close = original?.close;\n  const start = original?.start;\n  const type = original?.type;\n  const write = original?.write;\n  return {\n    abort: abort === undefined ?\n      undefined :\n      convertUnderlyingSinkAbortCallback(abort, original!, `${context} has member 'abort' that`),\n    close: close === undefined ?\n      undefined :\n      convertUnderlyingSinkCloseCallback(close, original!, `${context} has member 'close' that`),\n    start: start === undefined ?\n      undefined :\n      convertUnderlyingSinkStartCallback(start, original!, `${context} has member 'start' that`),\n    write: write === undefined ?\n      undefined :\n      convertUnderlyingSinkWriteCallback(write, original!, `${context} has member 'write' that`),\n    type\n  };\n}\n\nfunction convertUnderlyingSinkAbortCallback(\n  fn: UnderlyingSinkAbortCallback,\n  original: UnderlyingSink,\n  context: string\n): (reason: any) => Promise<void> {\n  assertFunction(fn, context);\n  return (reason: any) => promiseCall(fn, original, [reason]);\n}\n\nfunction convertUnderlyingSinkCloseCallback(\n  fn: UnderlyingSinkCloseCallback,\n  original: UnderlyingSink,\n  context: string\n): () => Promise<void> {\n  assertFunction(fn, context);\n  return () => promiseCall(fn, original, []);\n}\n\nfunction convertUnderlyingSinkStartCallback(\n  fn: UnderlyingSinkStartCallback,\n  original: UnderlyingSink,\n  context: string\n): UnderlyingSinkStartCallback {\n  assertFunction(fn, context);\n  return (controller: WritableStreamDefaultController) => reflectCall(fn, original, [controller]);\n}\n\nfunction convertUnderlyingSinkWriteCallback<W>(\n  fn: UnderlyingSinkWriteCallback<W>,\n  original: UnderlyingSink<W>,\n  context: string\n): (chunk: W, controller: WritableStreamDefaultController) => Promise<void> {\n  assertFunction(fn, context);\n  return (chunk: W, controller: WritableStreamDefaultController) => promiseCall(fn, original, [chunk, controller]);\n}\n", "import { IsWritableStream, WritableStream } from '../writable-stream';\n\nexport function assertWritableStream(x: unknown, context: string): asserts x is WritableStream {\n  if (!IsWritableStream(x)) {\n    throw new TypeError(`${context} is not a WritableStream.`);\n  }\n}\n", "/**\n * A signal object that allows you to communicate with a request and abort it if required\n * via its associated `AbortController` object.\n *\n * @remarks\n *   This interface is compatible with the `AbortSignal` interface defined in TypeScript's DOM types.\n *   It is redefined here, so it can be polyfilled without a DOM, for example with\n *   {@link https://www.npmjs.com/package/abortcontroller-polyfill | abortcontroller-polyfill} in a Node environment.\n *\n * @public\n */\nexport interface AbortSignal {\n  /**\n   * Whether the request is aborted.\n   */\n  readonly aborted: boolean;\n\n  /**\n   * If aborted, returns the reason for aborting.\n   */\n  readonly reason?: any;\n\n  /**\n   * Add an event listener to be triggered when this signal becomes aborted.\n   */\n  addEventListener(type: 'abort', listener: () => void): void;\n\n  /**\n   * Remove an event listener that was previously added with {@link AbortSignal.addEventListener}.\n   */\n  removeEventListener(type: 'abort', listener: () => void): void;\n}\n\nexport function isAbortSignal(value: unknown): value is AbortSignal {\n  if (typeof value !== 'object' || value === null) {\n    return false;\n  }\n  try {\n    return typeof (value as AbortSignal).aborted === 'boolean';\n  } catch {\n    // AbortSignal.prototype.aborted throws if its brand check fails\n    return false;\n  }\n}\n\n/**\n * A controller object that allows you to abort an `AbortSignal` when desired.\n *\n * @remarks\n *   This interface is compatible with the `AbortController` interface defined in TypeScript's DOM types.\n *   It is redefined here, so it can be polyfilled without a DOM, for example with\n *   {@link https://www.npmjs.com/package/abortcontroller-polyfill | abortcontroller-polyfill} in a Node environment.\n *\n * @internal\n */\nexport interface AbortController {\n  readonly signal: AbortSignal;\n\n  abort(reason?: any): void;\n}\n\ninterface AbortControllerConstructor {\n  new(): AbortController;\n}\n\nconst supportsAbortController = typeof (AbortController as any) === 'function';\n\n/**\n * Construct a new AbortController, if supported by the platform.\n *\n * @internal\n */\nexport function createAbortController(): AbortController | undefined {\n  if (supportsAbortController) {\n    return new (AbortController as AbortControllerConstructor)();\n  }\n  return undefined;\n}\n", "import assert from '../stub/assert';\nimport {\n  newPromise,\n  promiseRejectedWith,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  uponPromise\n} from './helpers/webidl';\nimport {\n  DequeueValue,\n  EnqueueValueWithSize,\n  PeekQueueValue,\n  type QueuePair,\n  ResetQueue\n} from './abstract-ops/queue-with-sizes';\nimport type { QueuingStrategy, QueuingStrategySizeCallback } from './queuing-strategy';\nimport { SimpleQueue } from './simple-queue';\nimport { setFunctionName, typeIsObject } from './helpers/miscellaneous';\nimport { AbortSteps, ErrorSteps } from './abstract-ops/internal-methods';\nimport { IsNonNegativeNumber } from './abstract-ops/miscellaneous';\nimport { ExtractHighWaterMark, ExtractSizeAlgorithm } from './abstract-ops/queuing-strategy';\nimport { convertQueuingStrategy } from './validators/queuing-strategy';\nimport type {\n  UnderlyingSink,\n  UnderlyingSinkAbortCallback,\n  UnderlyingSinkCloseCallback,\n  UnderlyingSinkStartCallback,\n  UnderlyingSinkWriteCallback,\n  ValidatedUnderlyingSink\n} from './writable-stream/underlying-sink';\nimport { assertObject, assertRequiredArgument } from './validators/basic';\nimport { convertUnderlyingSink } from './validators/underlying-sink';\nimport { assertWritableStream } from './validators/writable-stream';\nimport { type AbortController, type AbortSignal, createAbortController } from './abort-signal';\n\ntype WritableStreamState = 'writable' | 'closed' | 'erroring' | 'errored';\n\ninterface WriteOrCloseRequest {\n  _resolve: (value?: undefined) => void;\n  _reject: (reason: any) => void;\n}\n\ntype WriteRequest = WriteOrCloseRequest;\ntype CloseRequest = WriteOrCloseRequest;\n\ninterface PendingAbortRequest {\n  _promise: Promise<undefined>;\n  _resolve: (value?: undefined) => void;\n  _reject: (reason: any) => void;\n  _reason: any;\n  _wasAlreadyErroring: boolean;\n}\n\n/**\n * A writable stream represents a destination for data, into which you can write.\n *\n * @public\n */\nclass WritableStream<W = any> {\n  /** @internal */\n  _state!: WritableStreamState;\n  /** @internal */\n  _storedError: any;\n  /** @internal */\n  _writer: WritableStreamDefaultWriter<W> | undefined;\n  /** @internal */\n  _writableStreamController!: WritableStreamDefaultController<W>;\n  /** @internal */\n  _writeRequests!: SimpleQueue<WriteRequest>;\n  /** @internal */\n  _inFlightWriteRequest: WriteRequest | undefined;\n  /** @internal */\n  _closeRequest: CloseRequest | undefined;\n  /** @internal */\n  _inFlightCloseRequest: CloseRequest | undefined;\n  /** @internal */\n  _pendingAbortRequest: PendingAbortRequest | undefined;\n  /** @internal */\n  _backpressure!: boolean;\n\n  constructor(underlyingSink?: UnderlyingSink<W>, strategy?: QueuingStrategy<W>);\n  constructor(rawUnderlyingSink: UnderlyingSink<W> | null | undefined = {},\n              rawStrategy: QueuingStrategy<W> | null | undefined = {}) {\n    if (rawUnderlyingSink === undefined) {\n      rawUnderlyingSink = null;\n    } else {\n      assertObject(rawUnderlyingSink, 'First parameter');\n    }\n\n    const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n    const underlyingSink = convertUnderlyingSink(rawUnderlyingSink, 'First parameter');\n\n    InitializeWritableStream(this);\n\n    const type = underlyingSink.type;\n    if (type !== undefined) {\n      throw new RangeError('Invalid type is specified');\n    }\n\n    const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n    const highWaterMark = ExtractHighWaterMark(strategy, 1);\n\n    SetUpWritableStreamDefaultControllerFromUnderlyingSink(this, underlyingSink, highWaterMark, sizeAlgorithm);\n  }\n\n  /**\n   * Returns whether or not the writable stream is locked to a writer.\n   */\n  get locked(): boolean {\n    if (!IsWritableStream(this)) {\n      throw streamBrandCheckException('locked');\n    }\n\n    return IsWritableStreamLocked(this);\n  }\n\n  /**\n   * Aborts the stream, signaling that the producer can no longer successfully write to the stream and it is to be\n   * immediately moved to an errored state, with any queued-up writes discarded. This will also execute any abort\n   * mechanism of the underlying sink.\n   *\n   * The returned promise will fulfill if the stream shuts down successfully, or reject if the underlying sink signaled\n   * that there was an error doing so. Additionally, it will reject with a `TypeError` (without attempting to cancel\n   * the stream) if the stream is currently locked.\n   */\n  abort(reason: any = undefined): Promise<void> {\n    if (!IsWritableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('abort'));\n    }\n\n    if (IsWritableStreamLocked(this)) {\n      return promiseRejectedWith(new TypeError('Cannot abort a stream that already has a writer'));\n    }\n\n    return WritableStreamAbort(this, reason);\n  }\n\n  /**\n   * Closes the stream. The underlying sink will finish processing any previously-written chunks, before invoking its\n   * close behavior. During this time any further attempts to write will fail (without erroring the stream).\n   *\n   * The method returns a promise that will fulfill if all remaining chunks are successfully written and the stream\n   * successfully closes, or rejects if an error is encountered during this process. Additionally, it will reject with\n   * a `TypeError` (without attempting to cancel the stream) if the stream is currently locked.\n   */\n  close() {\n    if (!IsWritableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('close'));\n    }\n\n    if (IsWritableStreamLocked(this)) {\n      return promiseRejectedWith(new TypeError('Cannot close a stream that already has a writer'));\n    }\n\n    if (WritableStreamCloseQueuedOrInFlight(this)) {\n      return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n    }\n\n    return WritableStreamClose(this);\n  }\n\n  /**\n   * Creates a {@link WritableStreamDefaultWriter | writer} and locks the stream to the new writer. While the stream\n   * is locked, no other writer can be acquired until this one is released.\n   *\n   * This functionality is especially useful for creating abstractions that desire the ability to write to a stream\n   * without interruption or interleaving. By getting a writer for the stream, you can ensure nobody else can write at\n   * the same time, which would cause the resulting written data to be unpredictable and probably useless.\n   */\n  getWriter(): WritableStreamDefaultWriter<W> {\n    if (!IsWritableStream(this)) {\n      throw streamBrandCheckException('getWriter');\n    }\n\n    return AcquireWritableStreamDefaultWriter(this);\n  }\n}\n\nObject.defineProperties(WritableStream.prototype, {\n  abort: { enumerable: true },\n  close: { enumerable: true },\n  getWriter: { enumerable: true },\n  locked: { enumerable: true }\n});\nsetFunctionName(WritableStream.prototype.abort, 'abort');\nsetFunctionName(WritableStream.prototype.close, 'close');\nsetFunctionName(WritableStream.prototype.getWriter, 'getWriter');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(WritableStream.prototype, Symbol.toStringTag, {\n    value: 'WritableStream',\n    configurable: true\n  });\n}\n\nexport {\n  AcquireWritableStreamDefaultWriter,\n  CreateWritableStream,\n  IsWritableStream,\n  IsWritableStreamLocked,\n  WritableStream,\n  WritableStreamAbort,\n  WritableStreamDefaultControllerErrorIfNeeded,\n  WritableStreamDefaultWriterCloseWithErrorPropagation,\n  WritableStreamDefaultWriterRelease,\n  WritableStreamDefaultWriterWrite,\n  WritableStreamCloseQueuedOrInFlight\n};\n\nexport type {\n  UnderlyingSink,\n  UnderlyingSinkStartCallback,\n  UnderlyingSinkWriteCallback,\n  UnderlyingSinkCloseCallback,\n  UnderlyingSinkAbortCallback\n};\n\n// Abstract operations for the WritableStream.\n\nfunction AcquireWritableStreamDefaultWriter<W>(stream: WritableStream<W>): WritableStreamDefaultWriter<W> {\n  return new WritableStreamDefaultWriter(stream);\n}\n\n// Throws if and only if startAlgorithm throws.\nfunction CreateWritableStream<W>(startAlgorithm: () => void | PromiseLike<void>,\n                                 writeAlgorithm: (chunk: W) => Promise<void>,\n                                 closeAlgorithm: () => Promise<void>,\n                                 abortAlgorithm: (reason: any) => Promise<void>,\n                                 highWaterMark = 1,\n                                 sizeAlgorithm: QueuingStrategySizeCallback<W> = () => 1) {\n  assert(IsNonNegativeNumber(highWaterMark));\n\n  const stream: WritableStream<W> = Object.create(WritableStream.prototype);\n  InitializeWritableStream(stream);\n\n  const controller: WritableStreamDefaultController<W> = Object.create(WritableStreamDefaultController.prototype);\n\n  SetUpWritableStreamDefaultController(stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm,\n                                       abortAlgorithm, highWaterMark, sizeAlgorithm);\n  return stream;\n}\n\nfunction InitializeWritableStream<W>(stream: WritableStream<W>) {\n  stream._state = 'writable';\n\n  // The error that will be reported by new method calls once the state becomes errored. Only set when [[state]] is\n  // 'erroring' or 'errored'. May be set to an undefined value.\n  stream._storedError = undefined;\n\n  stream._writer = undefined;\n\n  // Initialize to undefined first because the constructor of the controller checks this\n  // variable to validate the caller.\n  stream._writableStreamController = undefined!;\n\n  // This queue is placed here instead of the writer class in order to allow for passing a writer to the next data\n  // producer without waiting for the queued writes to finish.\n  stream._writeRequests = new SimpleQueue();\n\n  // Write requests are removed from _writeRequests when write() is called on the underlying sink. This prevents\n  // them from being erroneously rejected on error. If a write() call is in-flight, the request is stored here.\n  stream._inFlightWriteRequest = undefined;\n\n  // The promise that was returned from writer.close(). Stored here because it may be fulfilled after the writer\n  // has been detached.\n  stream._closeRequest = undefined;\n\n  // Close request is removed from _closeRequest when close() is called on the underlying sink. This prevents it\n  // from being erroneously rejected on error. If a close() call is in-flight, the request is stored here.\n  stream._inFlightCloseRequest = undefined;\n\n  // The promise that was returned from writer.abort(). This may also be fulfilled after the writer has detached.\n  stream._pendingAbortRequest = undefined;\n\n  // The backpressure signal set by the controller.\n  stream._backpressure = false;\n}\n\nfunction IsWritableStream(x: unknown): x is WritableStream {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_writableStreamController')) {\n    return false;\n  }\n\n  return x instanceof WritableStream;\n}\n\nfunction IsWritableStreamLocked(stream: WritableStream): boolean {\n  assert(IsWritableStream(stream));\n\n  if (stream._writer === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction WritableStreamAbort(stream: WritableStream, reason: any): Promise<undefined> {\n  if (stream._state === 'closed' || stream._state === 'errored') {\n    return promiseResolvedWith(undefined);\n  }\n  stream._writableStreamController._abortReason = reason;\n  stream._writableStreamController._abortController?.abort(reason);\n\n  // TypeScript narrows the type of `stream._state` down to 'writable' | 'erroring',\n  // but it doesn't know that signaling abort runs author code that might have changed the state.\n  // Widen the type again by casting to WritableStreamState.\n  const state = stream._state as WritableStreamState;\n\n  if (state === 'closed' || state === 'errored') {\n    return promiseResolvedWith(undefined);\n  }\n  if (stream._pendingAbortRequest !== undefined) {\n    return stream._pendingAbortRequest._promise;\n  }\n\n  assert(state === 'writable' || state === 'erroring');\n\n  let wasAlreadyErroring = false;\n  if (state === 'erroring') {\n    wasAlreadyErroring = true;\n    // reason will not be used, so don't keep a reference to it.\n    reason = undefined;\n  }\n\n  const promise = newPromise<undefined>((resolve, reject) => {\n    stream._pendingAbortRequest = {\n      _promise: undefined!,\n      _resolve: resolve,\n      _reject: reject,\n      _reason: reason,\n      _wasAlreadyErroring: wasAlreadyErroring\n    };\n  });\n  stream._pendingAbortRequest!._promise = promise;\n\n  if (!wasAlreadyErroring) {\n    WritableStreamStartErroring(stream, reason);\n  }\n\n  return promise;\n}\n\nfunction WritableStreamClose(stream: WritableStream<any>): Promise<undefined> {\n  const state = stream._state;\n  if (state === 'closed' || state === 'errored') {\n    return promiseRejectedWith(new TypeError(\n      `The stream (in ${state} state) is not in the writable state and cannot be closed`));\n  }\n\n  assert(state === 'writable' || state === 'erroring');\n  assert(!WritableStreamCloseQueuedOrInFlight(stream));\n\n  const promise = newPromise<undefined>((resolve, reject) => {\n    const closeRequest: CloseRequest = {\n      _resolve: resolve,\n      _reject: reject\n    };\n\n    stream._closeRequest = closeRequest;\n  });\n\n  const writer = stream._writer;\n  if (writer !== undefined && stream._backpressure && state === 'writable') {\n    defaultWriterReadyPromiseResolve(writer);\n  }\n\n  WritableStreamDefaultControllerClose(stream._writableStreamController);\n\n  return promise;\n}\n\n// WritableStream API exposed for controllers.\n\nfunction WritableStreamAddWriteRequest(stream: WritableStream): Promise<undefined> {\n  assert(IsWritableStreamLocked(stream));\n  assert(stream._state === 'writable');\n\n  const promise = newPromise<undefined>((resolve, reject) => {\n    const writeRequest: WriteRequest = {\n      _resolve: resolve,\n      _reject: reject\n    };\n\n    stream._writeRequests.push(writeRequest);\n  });\n\n  return promise;\n}\n\nfunction WritableStreamDealWithRejection(stream: WritableStream, error: any) {\n  const state = stream._state;\n\n  if (state === 'writable') {\n    WritableStreamStartErroring(stream, error);\n    return;\n  }\n\n  assert(state === 'erroring');\n  WritableStreamFinishErroring(stream);\n}\n\nfunction WritableStreamStartErroring(stream: WritableStream, reason: any) {\n  assert(stream._storedError === undefined);\n  assert(stream._state === 'writable');\n\n  const controller = stream._writableStreamController;\n  assert(controller !== undefined);\n\n  stream._state = 'erroring';\n  stream._storedError = reason;\n  const writer = stream._writer;\n  if (writer !== undefined) {\n    WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, reason);\n  }\n\n  if (!WritableStreamHasOperationMarkedInFlight(stream) && controller._started) {\n    WritableStreamFinishErroring(stream);\n  }\n}\n\nfunction WritableStreamFinishErroring(stream: WritableStream) {\n  assert(stream._state === 'erroring');\n  assert(!WritableStreamHasOperationMarkedInFlight(stream));\n  stream._state = 'errored';\n  stream._writableStreamController[ErrorSteps]();\n\n  const storedError = stream._storedError;\n  stream._writeRequests.forEach(writeRequest => {\n    writeRequest._reject(storedError);\n  });\n  stream._writeRequests = new SimpleQueue();\n\n  if (stream._pendingAbortRequest === undefined) {\n    WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n    return;\n  }\n\n  const abortRequest = stream._pendingAbortRequest;\n  stream._pendingAbortRequest = undefined;\n\n  if (abortRequest._wasAlreadyErroring) {\n    abortRequest._reject(storedError);\n    WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n    return;\n  }\n\n  const promise = stream._writableStreamController[AbortSteps](abortRequest._reason);\n  uponPromise(\n    promise,\n    () => {\n      abortRequest._resolve();\n      WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n      return null;\n    },\n    (reason: any) => {\n      abortRequest._reject(reason);\n      WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream);\n      return null;\n    });\n}\n\nfunction WritableStreamFinishInFlightWrite(stream: WritableStream) {\n  assert(stream._inFlightWriteRequest !== undefined);\n  stream._inFlightWriteRequest!._resolve(undefined);\n  stream._inFlightWriteRequest = undefined;\n}\n\nfunction WritableStreamFinishInFlightWriteWithError(stream: WritableStream, error: any) {\n  assert(stream._inFlightWriteRequest !== undefined);\n  stream._inFlightWriteRequest!._reject(error);\n  stream._inFlightWriteRequest = undefined;\n\n  assert(stream._state === 'writable' || stream._state === 'erroring');\n\n  WritableStreamDealWithRejection(stream, error);\n}\n\nfunction WritableStreamFinishInFlightClose(stream: WritableStream) {\n  assert(stream._inFlightCloseRequest !== undefined);\n  stream._inFlightCloseRequest!._resolve(undefined);\n  stream._inFlightCloseRequest = undefined;\n\n  const state = stream._state;\n\n  assert(state === 'writable' || state === 'erroring');\n\n  if (state === 'erroring') {\n    // The error was too late to do anything, so it is ignored.\n    stream._storedError = undefined;\n    if (stream._pendingAbortRequest !== undefined) {\n      stream._pendingAbortRequest._resolve();\n      stream._pendingAbortRequest = undefined;\n    }\n  }\n\n  stream._state = 'closed';\n\n  const writer = stream._writer;\n  if (writer !== undefined) {\n    defaultWriterClosedPromiseResolve(writer);\n  }\n\n  assert(stream._pendingAbortRequest === undefined);\n  assert(stream._storedError === undefined);\n}\n\nfunction WritableStreamFinishInFlightCloseWithError(stream: WritableStream, error: any) {\n  assert(stream._inFlightCloseRequest !== undefined);\n  stream._inFlightCloseRequest!._reject(error);\n  stream._inFlightCloseRequest = undefined;\n\n  assert(stream._state === 'writable' || stream._state === 'erroring');\n\n  // Never execute sink abort() after sink close().\n  if (stream._pendingAbortRequest !== undefined) {\n    stream._pendingAbortRequest._reject(error);\n    stream._pendingAbortRequest = undefined;\n  }\n  WritableStreamDealWithRejection(stream, error);\n}\n\n// TODO(ricea): Fix alphabetical order.\nfunction WritableStreamCloseQueuedOrInFlight(stream: WritableStream): boolean {\n  if (stream._closeRequest === undefined && stream._inFlightCloseRequest === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction WritableStreamHasOperationMarkedInFlight(stream: WritableStream): boolean {\n  if (stream._inFlightWriteRequest === undefined && stream._inFlightCloseRequest === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction WritableStreamMarkCloseRequestInFlight(stream: WritableStream) {\n  assert(stream._inFlightCloseRequest === undefined);\n  assert(stream._closeRequest !== undefined);\n  stream._inFlightCloseRequest = stream._closeRequest;\n  stream._closeRequest = undefined;\n}\n\nfunction WritableStreamMarkFirstWriteRequestInFlight(stream: WritableStream) {\n  assert(stream._inFlightWriteRequest === undefined);\n  assert(stream._writeRequests.length !== 0);\n  stream._inFlightWriteRequest = stream._writeRequests.shift();\n}\n\nfunction WritableStreamRejectCloseAndClosedPromiseIfNeeded(stream: WritableStream) {\n  assert(stream._state === 'errored');\n  if (stream._closeRequest !== undefined) {\n    assert(stream._inFlightCloseRequest === undefined);\n\n    stream._closeRequest._reject(stream._storedError);\n    stream._closeRequest = undefined;\n  }\n  const writer = stream._writer;\n  if (writer !== undefined) {\n    defaultWriterClosedPromiseReject(writer, stream._storedError);\n  }\n}\n\nfunction WritableStreamUpdateBackpressure(stream: WritableStream, backpressure: boolean) {\n  assert(stream._state === 'writable');\n  assert(!WritableStreamCloseQueuedOrInFlight(stream));\n\n  const writer = stream._writer;\n  if (writer !== undefined && backpressure !== stream._backpressure) {\n    if (backpressure) {\n      defaultWriterReadyPromiseReset(writer);\n    } else {\n      assert(!backpressure);\n\n      defaultWriterReadyPromiseResolve(writer);\n    }\n  }\n\n  stream._backpressure = backpressure;\n}\n\n/**\n * A default writer vended by a {@link WritableStream}.\n *\n * @public\n */\nexport class WritableStreamDefaultWriter<W = any> {\n  /** @internal */\n  _ownerWritableStream: WritableStream<W>;\n  /** @internal */\n  _closedPromise!: Promise<undefined>;\n  /** @internal */\n  _closedPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _closedPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _closedPromiseState!: 'pending' | 'resolved' | 'rejected';\n  /** @internal */\n  _readyPromise!: Promise<undefined>;\n  /** @internal */\n  _readyPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _readyPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _readyPromiseState!: 'pending' | 'fulfilled' | 'rejected';\n\n  constructor(stream: WritableStream<W>) {\n    assertRequiredArgument(stream, 1, 'WritableStreamDefaultWriter');\n    assertWritableStream(stream, 'First parameter');\n\n    if (IsWritableStreamLocked(stream)) {\n      throw new TypeError('This stream has already been locked for exclusive writing by another writer');\n    }\n\n    this._ownerWritableStream = stream;\n    stream._writer = this;\n\n    const state = stream._state;\n\n    if (state === 'writable') {\n      if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._backpressure) {\n        defaultWriterReadyPromiseInitialize(this);\n      } else {\n        defaultWriterReadyPromiseInitializeAsResolved(this);\n      }\n\n      defaultWriterClosedPromiseInitialize(this);\n    } else if (state === 'erroring') {\n      defaultWriterReadyPromiseInitializeAsRejected(this, stream._storedError);\n      defaultWriterClosedPromiseInitialize(this);\n    } else if (state === 'closed') {\n      defaultWriterReadyPromiseInitializeAsResolved(this);\n      defaultWriterClosedPromiseInitializeAsResolved(this);\n    } else {\n      assert(state === 'errored');\n\n      const storedError = stream._storedError;\n      defaultWriterReadyPromiseInitializeAsRejected(this, storedError);\n      defaultWriterClosedPromiseInitializeAsRejected(this, storedError);\n    }\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the stream becomes closed, or rejected if the stream ever errors or\n   * the writers lock is released before the stream finishes closing.\n   */\n  get closed(): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('closed'));\n    }\n\n    return this._closedPromise;\n  }\n\n  /**\n   * Returns the desired size to fill the streams internal queue. It can be negative, if the queue is over-full.\n   * A producer can use this information to determine the right amount of data to write.\n   *\n   * It will be `null` if the stream cannot be successfully written to (due to either being errored, or having an abort\n   * queued up). It will return zero if the stream is closed. And the getter will throw an exception if invoked when\n   * the writers lock is released.\n   */\n  get desiredSize(): number | null {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      throw defaultWriterBrandCheckException('desiredSize');\n    }\n\n    if (this._ownerWritableStream === undefined) {\n      throw defaultWriterLockException('desiredSize');\n    }\n\n    return WritableStreamDefaultWriterGetDesiredSize(this);\n  }\n\n  /**\n   * Returns a promise that will be fulfilled when the desired size to fill the streams internal queue transitions\n   * from non-positive to positive, signaling that it is no longer applying backpressure. Once the desired size dips\n   * back to zero or below, the getter will return a new promise that stays pending until the next transition.\n   *\n   * If the stream becomes errored or aborted, or the writers lock is released, the returned promise will become\n   * rejected.\n   */\n  get ready(): Promise<undefined> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('ready'));\n    }\n\n    return this._readyPromise;\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link WritableStream.abort | stream.abort(reason)}.\n   */\n  abort(reason: any = undefined): Promise<void> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('abort'));\n    }\n\n    if (this._ownerWritableStream === undefined) {\n      return promiseRejectedWith(defaultWriterLockException('abort'));\n    }\n\n    return WritableStreamDefaultWriterAbort(this, reason);\n  }\n\n  /**\n   * If the reader is active, behaves the same as {@link WritableStream.close | stream.close()}.\n   */\n  close(): Promise<void> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('close'));\n    }\n\n    const stream = this._ownerWritableStream;\n\n    if (stream === undefined) {\n      return promiseRejectedWith(defaultWriterLockException('close'));\n    }\n\n    if (WritableStreamCloseQueuedOrInFlight(stream)) {\n      return promiseRejectedWith(new TypeError('Cannot close an already-closing stream'));\n    }\n\n    return WritableStreamDefaultWriterClose(this);\n  }\n\n  /**\n   * Releases the writers lock on the corresponding stream. After the lock is released, the writer is no longer active.\n   * If the associated stream is errored when the lock is released, the writer will appear errored in the same way from\n   * now on; otherwise, the writer will appear closed.\n   *\n   * Note that the lock can still be released even if some ongoing writes have not yet finished (i.e. even if the\n   * promises returned from previous calls to {@link WritableStreamDefaultWriter.write | write()} have not yet settled).\n   * Its not necessary to hold the lock on the writer for the duration of the write; the lock instead simply prevents\n   * other producers from writing in an interleaved manner.\n   */\n  releaseLock(): void {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      throw defaultWriterBrandCheckException('releaseLock');\n    }\n\n    const stream = this._ownerWritableStream;\n\n    if (stream === undefined) {\n      return;\n    }\n\n    assert(stream._writer !== undefined);\n\n    WritableStreamDefaultWriterRelease(this);\n  }\n\n  /**\n   * Writes the given chunk to the writable stream, by waiting until any previous writes have finished successfully,\n   * and then sending the chunk to the underlying sink's {@link UnderlyingSink.write | write()} method. It will return\n   * a promise that fulfills with undefined upon a successful write, or rejects if the write fails or stream becomes\n   * errored before the writing process is initiated.\n   *\n   * Note that what \"success\" means is up to the underlying sink; it might indicate simply that the chunk has been\n   * accepted, and not necessarily that it is safely saved to its ultimate destination.\n   */\n  write(chunk: W): Promise<void>;\n  write(chunk: W = undefined!): Promise<void> {\n    if (!IsWritableStreamDefaultWriter(this)) {\n      return promiseRejectedWith(defaultWriterBrandCheckException('write'));\n    }\n\n    if (this._ownerWritableStream === undefined) {\n      return promiseRejectedWith(defaultWriterLockException('write to'));\n    }\n\n    return WritableStreamDefaultWriterWrite(this, chunk);\n  }\n}\n\nObject.defineProperties(WritableStreamDefaultWriter.prototype, {\n  abort: { enumerable: true },\n  close: { enumerable: true },\n  releaseLock: { enumerable: true },\n  write: { enumerable: true },\n  closed: { enumerable: true },\n  desiredSize: { enumerable: true },\n  ready: { enumerable: true }\n});\nsetFunctionName(WritableStreamDefaultWriter.prototype.abort, 'abort');\nsetFunctionName(WritableStreamDefaultWriter.prototype.close, 'close');\nsetFunctionName(WritableStreamDefaultWriter.prototype.releaseLock, 'releaseLock');\nsetFunctionName(WritableStreamDefaultWriter.prototype.write, 'write');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(WritableStreamDefaultWriter.prototype, Symbol.toStringTag, {\n    value: 'WritableStreamDefaultWriter',\n    configurable: true\n  });\n}\n\n// Abstract operations for the WritableStreamDefaultWriter.\n\nfunction IsWritableStreamDefaultWriter<W = any>(x: any): x is WritableStreamDefaultWriter<W> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_ownerWritableStream')) {\n    return false;\n  }\n\n  return x instanceof WritableStreamDefaultWriter;\n}\n\n// A client of WritableStreamDefaultWriter may use these functions directly to bypass state check.\n\nfunction WritableStreamDefaultWriterAbort(writer: WritableStreamDefaultWriter, reason: any) {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  return WritableStreamAbort(stream, reason);\n}\n\nfunction WritableStreamDefaultWriterClose(writer: WritableStreamDefaultWriter): Promise<undefined> {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  return WritableStreamClose(stream);\n}\n\nfunction WritableStreamDefaultWriterCloseWithErrorPropagation(writer: WritableStreamDefaultWriter): Promise<undefined> {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  const state = stream._state;\n  if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n    return promiseResolvedWith(undefined);\n  }\n\n  if (state === 'errored') {\n    return promiseRejectedWith(stream._storedError);\n  }\n\n  assert(state === 'writable' || state === 'erroring');\n\n  return WritableStreamDefaultWriterClose(writer);\n}\n\nfunction WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer: WritableStreamDefaultWriter, error: any) {\n  if (writer._closedPromiseState === 'pending') {\n    defaultWriterClosedPromiseReject(writer, error);\n  } else {\n    defaultWriterClosedPromiseResetToRejected(writer, error);\n  }\n}\n\nfunction WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer: WritableStreamDefaultWriter, error: any) {\n  if (writer._readyPromiseState === 'pending') {\n    defaultWriterReadyPromiseReject(writer, error);\n  } else {\n    defaultWriterReadyPromiseResetToRejected(writer, error);\n  }\n}\n\nfunction WritableStreamDefaultWriterGetDesiredSize(writer: WritableStreamDefaultWriter): number | null {\n  const stream = writer._ownerWritableStream;\n  const state = stream._state;\n\n  if (state === 'errored' || state === 'erroring') {\n    return null;\n  }\n\n  if (state === 'closed') {\n    return 0;\n  }\n\n  return WritableStreamDefaultControllerGetDesiredSize(stream._writableStreamController);\n}\n\nfunction WritableStreamDefaultWriterRelease(writer: WritableStreamDefaultWriter) {\n  const stream = writer._ownerWritableStream;\n  assert(stream !== undefined);\n  assert(stream._writer === writer);\n\n  const releasedError = new TypeError(\n    `Writer was released and can no longer be used to monitor the stream's closedness`);\n\n  WritableStreamDefaultWriterEnsureReadyPromiseRejected(writer, releasedError);\n\n  // The state transitions to \"errored\" before the sink abort() method runs, but the writer.closed promise is not\n  // rejected until afterwards. This means that simply testing state will not work.\n  WritableStreamDefaultWriterEnsureClosedPromiseRejected(writer, releasedError);\n\n  stream._writer = undefined;\n  writer._ownerWritableStream = undefined!;\n}\n\nfunction WritableStreamDefaultWriterWrite<W>(writer: WritableStreamDefaultWriter<W>, chunk: W): Promise<undefined> {\n  const stream = writer._ownerWritableStream;\n\n  assert(stream !== undefined);\n\n  const controller = stream._writableStreamController;\n\n  const chunkSize = WritableStreamDefaultControllerGetChunkSize(controller, chunk);\n\n  if (stream !== writer._ownerWritableStream) {\n    return promiseRejectedWith(defaultWriterLockException('write to'));\n  }\n\n  const state = stream._state;\n  if (state === 'errored') {\n    return promiseRejectedWith(stream._storedError);\n  }\n  if (WritableStreamCloseQueuedOrInFlight(stream) || state === 'closed') {\n    return promiseRejectedWith(new TypeError('The stream is closing or closed and cannot be written to'));\n  }\n  if (state === 'erroring') {\n    return promiseRejectedWith(stream._storedError);\n  }\n\n  assert(state === 'writable');\n\n  const promise = WritableStreamAddWriteRequest(stream);\n\n  WritableStreamDefaultControllerWrite(controller, chunk, chunkSize);\n\n  return promise;\n}\n\nconst closeSentinel: unique symbol = {} as any;\n\ntype QueueRecord<W> = W | typeof closeSentinel;\n\n/**\n * Allows control of a {@link WritableStream | writable stream}'s state and internal queue.\n *\n * @public\n */\nexport class WritableStreamDefaultController<W = any> {\n  /** @internal */\n  _controlledWritableStream!: WritableStream<W>;\n  /** @internal */\n  _queue!: SimpleQueue<QueuePair<QueueRecord<W>>>;\n  /** @internal */\n  _queueTotalSize!: number;\n  /** @internal */\n  _abortReason: any;\n  /** @internal */\n  _abortController: AbortController | undefined;\n  /** @internal */\n  _started!: boolean;\n  /** @internal */\n  _strategySizeAlgorithm!: QueuingStrategySizeCallback<W>;\n  /** @internal */\n  _strategyHWM!: number;\n  /** @internal */\n  _writeAlgorithm!: (chunk: W) => Promise<void>;\n  /** @internal */\n  _closeAlgorithm!: () => Promise<void>;\n  /** @internal */\n  _abortAlgorithm!: (reason: any) => Promise<void>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * The reason which was passed to `WritableStream.abort(reason)` when the stream was aborted.\n   *\n   * @deprecated\n   *  This property has been removed from the specification, see https://github.com/whatwg/streams/pull/1177.\n   *  Use {@link WritableStreamDefaultController.signal}'s `reason` instead.\n   */\n  get abortReason(): any {\n    if (!IsWritableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('abortReason');\n    }\n    return this._abortReason;\n  }\n\n  /**\n   * An `AbortSignal` that can be used to abort the pending write or close operation when the stream is aborted.\n   */\n  get signal(): AbortSignal {\n    if (!IsWritableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('signal');\n    }\n    if (this._abortController === undefined) {\n      // Older browsers or older Node versions may not support `AbortController` or `AbortSignal`.\n      // We don't want to bundle and ship an `AbortController` polyfill together with our polyfill,\n      // so instead we only implement support for `signal` if we find a global `AbortController` constructor.\n      throw new TypeError('WritableStreamDefaultController.prototype.signal is not supported');\n    }\n    return this._abortController.signal;\n  }\n\n  /**\n   * Closes the controlled writable stream, making all future interactions with it fail with the given error `e`.\n   *\n   * This method is rarely used, since usually it suffices to return a rejected promise from one of the underlying\n   * sink's methods. However, it can be useful for suddenly shutting down a stream in response to an event outside the\n   * normal lifecycle of interactions with the underlying sink.\n   */\n  error(e: any = undefined): void {\n    if (!IsWritableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('error');\n    }\n    const state = this._controlledWritableStream._state;\n    if (state !== 'writable') {\n      // The stream is closed, errored or will be soon. The sink can't do anything useful if it gets an error here, so\n      // just treat it as a no-op.\n      return;\n    }\n\n    WritableStreamDefaultControllerError(this, e);\n  }\n\n  /** @internal */\n  [AbortSteps](reason: any): Promise<void> {\n    const result = this._abortAlgorithm(reason);\n    WritableStreamDefaultControllerClearAlgorithms(this);\n    return result;\n  }\n\n  /** @internal */\n  [ErrorSteps]() {\n    ResetQueue(this);\n  }\n}\n\nObject.defineProperties(WritableStreamDefaultController.prototype, {\n  abortReason: { enumerable: true },\n  signal: { enumerable: true },\n  error: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(WritableStreamDefaultController.prototype, Symbol.toStringTag, {\n    value: 'WritableStreamDefaultController',\n    configurable: true\n  });\n}\n\n// Abstract operations implementing interface required by the WritableStream.\n\nfunction IsWritableStreamDefaultController(x: any): x is WritableStreamDefaultController<any> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledWritableStream')) {\n    return false;\n  }\n\n  return x instanceof WritableStreamDefaultController;\n}\n\nfunction SetUpWritableStreamDefaultController<W>(stream: WritableStream<W>,\n                                                 controller: WritableStreamDefaultController<W>,\n                                                 startAlgorithm: () => void | PromiseLike<void>,\n                                                 writeAlgorithm: (chunk: W) => Promise<void>,\n                                                 closeAlgorithm: () => Promise<void>,\n                                                 abortAlgorithm: (reason: any) => Promise<void>,\n                                                 highWaterMark: number,\n                                                 sizeAlgorithm: QueuingStrategySizeCallback<W>) {\n  assert(IsWritableStream(stream));\n  assert(stream._writableStreamController === undefined);\n\n  controller._controlledWritableStream = stream;\n  stream._writableStreamController = controller;\n\n  // Need to set the slots so that the assert doesn't fire. In the spec the slots already exist implicitly.\n  controller._queue = undefined!;\n  controller._queueTotalSize = undefined!;\n  ResetQueue(controller);\n\n  controller._abortReason = undefined;\n  controller._abortController = createAbortController();\n  controller._started = false;\n\n  controller._strategySizeAlgorithm = sizeAlgorithm;\n  controller._strategyHWM = highWaterMark;\n\n  controller._writeAlgorithm = writeAlgorithm;\n  controller._closeAlgorithm = closeAlgorithm;\n  controller._abortAlgorithm = abortAlgorithm;\n\n  const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n  WritableStreamUpdateBackpressure(stream, backpressure);\n\n  const startResult = startAlgorithm();\n  const startPromise = promiseResolvedWith(startResult);\n  uponPromise(\n    startPromise,\n    () => {\n      assert(stream._state === 'writable' || stream._state === 'erroring');\n      controller._started = true;\n      WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n      return null;\n    },\n    r => {\n      assert(stream._state === 'writable' || stream._state === 'erroring');\n      controller._started = true;\n      WritableStreamDealWithRejection(stream, r);\n      return null;\n    }\n  );\n}\n\nfunction SetUpWritableStreamDefaultControllerFromUnderlyingSink<W>(stream: WritableStream<W>,\n                                                                   underlyingSink: ValidatedUnderlyingSink<W>,\n                                                                   highWaterMark: number,\n                                                                   sizeAlgorithm: QueuingStrategySizeCallback<W>) {\n  const controller = Object.create(WritableStreamDefaultController.prototype);\n\n  let startAlgorithm: () => void | PromiseLike<void>;\n  let writeAlgorithm: (chunk: W) => Promise<void>;\n  let closeAlgorithm: () => Promise<void>;\n  let abortAlgorithm: (reason: any) => Promise<void>;\n\n  if (underlyingSink.start !== undefined) {\n    startAlgorithm = () => underlyingSink.start!(controller);\n  } else {\n    startAlgorithm = () => undefined;\n  }\n  if (underlyingSink.write !== undefined) {\n    writeAlgorithm = chunk => underlyingSink.write!(chunk, controller);\n  } else {\n    writeAlgorithm = () => promiseResolvedWith(undefined);\n  }\n  if (underlyingSink.close !== undefined) {\n    closeAlgorithm = () => underlyingSink.close!();\n  } else {\n    closeAlgorithm = () => promiseResolvedWith(undefined);\n  }\n  if (underlyingSink.abort !== undefined) {\n    abortAlgorithm = reason => underlyingSink.abort!(reason);\n  } else {\n    abortAlgorithm = () => promiseResolvedWith(undefined);\n  }\n\n  SetUpWritableStreamDefaultController(\n    stream, controller, startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm, highWaterMark, sizeAlgorithm\n  );\n}\n\n// ClearAlgorithms may be called twice. Erroring the same stream in multiple ways will often result in redundant calls.\nfunction WritableStreamDefaultControllerClearAlgorithms(controller: WritableStreamDefaultController<any>) {\n  controller._writeAlgorithm = undefined!;\n  controller._closeAlgorithm = undefined!;\n  controller._abortAlgorithm = undefined!;\n  controller._strategySizeAlgorithm = undefined!;\n}\n\nfunction WritableStreamDefaultControllerClose<W>(controller: WritableStreamDefaultController<W>) {\n  EnqueueValueWithSize(controller, closeSentinel, 0);\n  WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n}\n\nfunction WritableStreamDefaultControllerGetChunkSize<W>(controller: WritableStreamDefaultController<W>,\n                                                        chunk: W): number {\n  try {\n    return controller._strategySizeAlgorithm(chunk);\n  } catch (chunkSizeE) {\n    WritableStreamDefaultControllerErrorIfNeeded(controller, chunkSizeE);\n    return 1;\n  }\n}\n\nfunction WritableStreamDefaultControllerGetDesiredSize(controller: WritableStreamDefaultController<any>): number {\n  return controller._strategyHWM - controller._queueTotalSize;\n}\n\nfunction WritableStreamDefaultControllerWrite<W>(controller: WritableStreamDefaultController<W>,\n                                                 chunk: W,\n                                                 chunkSize: number) {\n  try {\n    EnqueueValueWithSize(controller, chunk, chunkSize);\n  } catch (enqueueE) {\n    WritableStreamDefaultControllerErrorIfNeeded(controller, enqueueE);\n    return;\n  }\n\n  const stream = controller._controlledWritableStream;\n  if (!WritableStreamCloseQueuedOrInFlight(stream) && stream._state === 'writable') {\n    const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n    WritableStreamUpdateBackpressure(stream, backpressure);\n  }\n\n  WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n}\n\n// Abstract operations for the WritableStreamDefaultController.\n\nfunction WritableStreamDefaultControllerAdvanceQueueIfNeeded<W>(controller: WritableStreamDefaultController<W>) {\n  const stream = controller._controlledWritableStream;\n\n  if (!controller._started) {\n    return;\n  }\n\n  if (stream._inFlightWriteRequest !== undefined) {\n    return;\n  }\n\n  const state = stream._state;\n  assert(state !== 'closed' && state !== 'errored');\n  if (state === 'erroring') {\n    WritableStreamFinishErroring(stream);\n    return;\n  }\n\n  if (controller._queue.length === 0) {\n    return;\n  }\n\n  const value = PeekQueueValue(controller);\n  if (value === closeSentinel) {\n    WritableStreamDefaultControllerProcessClose(controller);\n  } else {\n    WritableStreamDefaultControllerProcessWrite(controller, value);\n  }\n}\n\nfunction WritableStreamDefaultControllerErrorIfNeeded(controller: WritableStreamDefaultController<any>, error: any) {\n  if (controller._controlledWritableStream._state === 'writable') {\n    WritableStreamDefaultControllerError(controller, error);\n  }\n}\n\nfunction WritableStreamDefaultControllerProcessClose(controller: WritableStreamDefaultController<any>) {\n  const stream = controller._controlledWritableStream;\n\n  WritableStreamMarkCloseRequestInFlight(stream);\n\n  DequeueValue(controller);\n  assert(controller._queue.length === 0);\n\n  const sinkClosePromise = controller._closeAlgorithm();\n  WritableStreamDefaultControllerClearAlgorithms(controller);\n  uponPromise(\n    sinkClosePromise,\n    () => {\n      WritableStreamFinishInFlightClose(stream);\n      return null;\n    },\n    reason => {\n      WritableStreamFinishInFlightCloseWithError(stream, reason);\n      return null;\n    }\n  );\n}\n\nfunction WritableStreamDefaultControllerProcessWrite<W>(controller: WritableStreamDefaultController<W>, chunk: W) {\n  const stream = controller._controlledWritableStream;\n\n  WritableStreamMarkFirstWriteRequestInFlight(stream);\n\n  const sinkWritePromise = controller._writeAlgorithm(chunk);\n  uponPromise(\n    sinkWritePromise,\n    () => {\n      WritableStreamFinishInFlightWrite(stream);\n\n      const state = stream._state;\n      assert(state === 'writable' || state === 'erroring');\n\n      DequeueValue(controller);\n\n      if (!WritableStreamCloseQueuedOrInFlight(stream) && state === 'writable') {\n        const backpressure = WritableStreamDefaultControllerGetBackpressure(controller);\n        WritableStreamUpdateBackpressure(stream, backpressure);\n      }\n\n      WritableStreamDefaultControllerAdvanceQueueIfNeeded(controller);\n      return null;\n    },\n    reason => {\n      if (stream._state === 'writable') {\n        WritableStreamDefaultControllerClearAlgorithms(controller);\n      }\n      WritableStreamFinishInFlightWriteWithError(stream, reason);\n      return null;\n    }\n  );\n}\n\nfunction WritableStreamDefaultControllerGetBackpressure(controller: WritableStreamDefaultController<any>): boolean {\n  const desiredSize = WritableStreamDefaultControllerGetDesiredSize(controller);\n  return desiredSize <= 0;\n}\n\n// A client of WritableStreamDefaultController may use these functions directly to bypass state check.\n\nfunction WritableStreamDefaultControllerError(controller: WritableStreamDefaultController<any>, error: any) {\n  const stream = controller._controlledWritableStream;\n\n  assert(stream._state === 'writable');\n\n  WritableStreamDefaultControllerClearAlgorithms(controller);\n  WritableStreamStartErroring(stream, error);\n}\n\n// Helper functions for the WritableStream.\n\nfunction streamBrandCheckException(name: string): TypeError {\n  return new TypeError(`WritableStream.prototype.${name} can only be used on a WritableStream`);\n}\n\n// Helper functions for the WritableStreamDefaultController.\n\nfunction defaultControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `WritableStreamDefaultController.prototype.${name} can only be used on a WritableStreamDefaultController`);\n}\n\n\n// Helper functions for the WritableStreamDefaultWriter.\n\nfunction defaultWriterBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `WritableStreamDefaultWriter.prototype.${name} can only be used on a WritableStreamDefaultWriter`);\n}\n\nfunction defaultWriterLockException(name: string): TypeError {\n  return new TypeError('Cannot ' + name + ' a stream using a released writer');\n}\n\nfunction defaultWriterClosedPromiseInitialize(writer: WritableStreamDefaultWriter) {\n  writer._closedPromise = newPromise((resolve, reject) => {\n    writer._closedPromise_resolve = resolve;\n    writer._closedPromise_reject = reject;\n    writer._closedPromiseState = 'pending';\n  });\n}\n\nfunction defaultWriterClosedPromiseInitializeAsRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  defaultWriterClosedPromiseInitialize(writer);\n  defaultWriterClosedPromiseReject(writer, reason);\n}\n\nfunction defaultWriterClosedPromiseInitializeAsResolved(writer: WritableStreamDefaultWriter) {\n  defaultWriterClosedPromiseInitialize(writer);\n  defaultWriterClosedPromiseResolve(writer);\n}\n\nfunction defaultWriterClosedPromiseReject(writer: WritableStreamDefaultWriter, reason: any) {\n  if (writer._closedPromise_reject === undefined) {\n    return;\n  }\n  assert(writer._closedPromiseState === 'pending');\n\n  setPromiseIsHandledToTrue(writer._closedPromise);\n  writer._closedPromise_reject(reason);\n  writer._closedPromise_resolve = undefined;\n  writer._closedPromise_reject = undefined;\n  writer._closedPromiseState = 'rejected';\n}\n\nfunction defaultWriterClosedPromiseResetToRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  assert(writer._closedPromise_resolve === undefined);\n  assert(writer._closedPromise_reject === undefined);\n  assert(writer._closedPromiseState !== 'pending');\n\n  defaultWriterClosedPromiseInitializeAsRejected(writer, reason);\n}\n\nfunction defaultWriterClosedPromiseResolve(writer: WritableStreamDefaultWriter) {\n  if (writer._closedPromise_resolve === undefined) {\n    return;\n  }\n  assert(writer._closedPromiseState === 'pending');\n\n  writer._closedPromise_resolve(undefined);\n  writer._closedPromise_resolve = undefined;\n  writer._closedPromise_reject = undefined;\n  writer._closedPromiseState = 'resolved';\n}\n\nfunction defaultWriterReadyPromiseInitialize(writer: WritableStreamDefaultWriter) {\n  writer._readyPromise = newPromise((resolve, reject) => {\n    writer._readyPromise_resolve = resolve;\n    writer._readyPromise_reject = reject;\n  });\n  writer._readyPromiseState = 'pending';\n}\n\nfunction defaultWriterReadyPromiseInitializeAsRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  defaultWriterReadyPromiseInitialize(writer);\n  defaultWriterReadyPromiseReject(writer, reason);\n}\n\nfunction defaultWriterReadyPromiseInitializeAsResolved(writer: WritableStreamDefaultWriter) {\n  defaultWriterReadyPromiseInitialize(writer);\n  defaultWriterReadyPromiseResolve(writer);\n}\n\nfunction defaultWriterReadyPromiseReject(writer: WritableStreamDefaultWriter, reason: any) {\n  if (writer._readyPromise_reject === undefined) {\n    return;\n  }\n\n  setPromiseIsHandledToTrue(writer._readyPromise);\n  writer._readyPromise_reject(reason);\n  writer._readyPromise_resolve = undefined;\n  writer._readyPromise_reject = undefined;\n  writer._readyPromiseState = 'rejected';\n}\n\nfunction defaultWriterReadyPromiseReset(writer: WritableStreamDefaultWriter) {\n  assert(writer._readyPromise_resolve === undefined);\n  assert(writer._readyPromise_reject === undefined);\n\n  defaultWriterReadyPromiseInitialize(writer);\n}\n\nfunction defaultWriterReadyPromiseResetToRejected(writer: WritableStreamDefaultWriter, reason: any) {\n  assert(writer._readyPromise_resolve === undefined);\n  assert(writer._readyPromise_reject === undefined);\n\n  defaultWriterReadyPromiseInitializeAsRejected(writer, reason);\n}\n\nfunction defaultWriterReadyPromiseResolve(writer: WritableStreamDefaultWriter) {\n  if (writer._readyPromise_resolve === undefined) {\n    return;\n  }\n\n  writer._readyPromise_resolve(undefined);\n  writer._readyPromise_resolve = undefined;\n  writer._readyPromise_reject = undefined;\n  writer._readyPromiseState = 'fulfilled';\n}\n", "/// <reference lib=\"dom\" />\n\nfunction getGlobals(): typeof globalThis | undefined {\n  if (typeof globalThis !== 'undefined') {\n    return globalThis;\n  } else if (typeof self !== 'undefined') {\n    return self;\n  } else if (typeof global !== 'undefined') {\n    return global;\n  }\n  return undefined;\n}\n\nexport const globals = getGlobals();\n", "/// <reference types=\"node\" />\nimport { globals } from '../globals';\nimport { setFunctionName } from '../lib/helpers/miscellaneous';\n\ninterface DOMException extends Error {\n  name: string;\n  message: string;\n}\n\ntype DOMExceptionConstructor = new (message?: string, name?: string) => DOMException;\n\nfunction isDOMExceptionConstructor(ctor: unknown): ctor is DOMExceptionConstructor {\n  if (!(typeof ctor === 'function' || typeof ctor === 'object')) {\n    return false;\n  }\n  if ((ctor as DOMExceptionConstructor).name !== 'DOMException') {\n    return false;\n  }\n  try {\n    new (ctor as DOMExceptionConstructor)();\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * Support:\n * - Web browsers\n * - Node 18 and higher (https://github.com/nodejs/node/commit/e4b1fb5e6422c1ff151234bb9de792d45dd88d87)\n */\nfunction getFromGlobal(): DOMExceptionConstructor | undefined {\n  const ctor = globals?.DOMException;\n  return isDOMExceptionConstructor(ctor) ? ctor : undefined;\n}\n\n/**\n * Support:\n * - All platforms\n */\nfunction createPolyfill(): DOMExceptionConstructor {\n  // eslint-disable-next-line @typescript-eslint/no-shadow\n  const ctor = function DOMException(this: DOMException, message?: string, name?: string) {\n    this.message = message || '';\n    this.name = name || 'Error';\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  } as any;\n  setFunctionName(ctor, 'DOMException');\n  ctor.prototype = Object.create(Error.prototype);\n  Object.defineProperty(ctor.prototype, 'constructor', { value: ctor, writable: true, configurable: true });\n  return ctor;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redeclare\nconst DOMException: DOMExceptionConstructor = getFromGlobal() || createPolyfill();\n\nexport { DOMException };\n", "import { IsReadableStream, IsReadableStreamLocked, ReadableStream, ReadableStreamCancel } from '../readable-stream';\nimport { AcquireReadableStreamDefaultReader, ReadableStreamDefaultReaderRead } from './default-reader';\nimport { ReadableStreamReaderGenericRelease } from './generic-reader';\nimport {\n  AcquireWritableStreamDefaultWriter,\n  IsWritableStream,\n  IsWritableStreamLocked,\n  WritableStream,\n  WritableStreamAbort,\n  WritableStreamCloseQueuedOrInFlight,\n  WritableStreamDefaultWriterCloseWithErrorPropagation,\n  WritableStreamDefaultWriterRelease,\n  WritableStreamDefaultWriterWrite\n} from '../writable-stream';\nimport assert from '../../stub/assert';\nimport {\n  newPromise,\n  PerformPromiseThen,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  uponFulfillment,\n  uponPromise,\n  uponRejection\n} from '../helpers/webidl';\nimport { noop } from '../../utils';\nimport { type AbortSignal, isAbortSignal } from '../abort-signal';\nimport { DOMException } from '../../stub/dom-exception';\n\nexport function ReadableStreamPipeTo<T>(source: ReadableStream<T>,\n                                        dest: WritableStream<T>,\n                                        preventClose: boolean,\n                                        preventAbort: boolean,\n                                        preventCancel: boolean,\n                                        signal: AbortSignal | undefined): Promise<undefined> {\n  assert(IsReadableStream(source));\n  assert(IsWritableStream(dest));\n  assert(typeof preventClose === 'boolean');\n  assert(typeof preventAbort === 'boolean');\n  assert(typeof preventCancel === 'boolean');\n  assert(signal === undefined || isAbortSignal(signal));\n  assert(!IsReadableStreamLocked(source));\n  assert(!IsWritableStreamLocked(dest));\n\n  const reader = AcquireReadableStreamDefaultReader<T>(source);\n  const writer = AcquireWritableStreamDefaultWriter<T>(dest);\n\n  source._disturbed = true;\n\n  let shuttingDown = false;\n\n  // This is used to keep track of the spec's requirement that we wait for ongoing writes during shutdown.\n  let currentWrite = promiseResolvedWith<void>(undefined);\n\n  return newPromise((resolve, reject) => {\n    let abortAlgorithm: () => void;\n    if (signal !== undefined) {\n      abortAlgorithm = () => {\n        const error = signal.reason !== undefined ? signal.reason : new DOMException('Aborted', 'AbortError');\n        const actions: Array<() => Promise<void>> = [];\n        if (!preventAbort) {\n          actions.push(() => {\n            if (dest._state === 'writable') {\n              return WritableStreamAbort(dest, error);\n            }\n            return promiseResolvedWith(undefined);\n          });\n        }\n        if (!preventCancel) {\n          actions.push(() => {\n            if (source._state === 'readable') {\n              return ReadableStreamCancel(source, error);\n            }\n            return promiseResolvedWith(undefined);\n          });\n        }\n        shutdownWithAction(() => Promise.all(actions.map(action => action())), true, error);\n      };\n\n      if (signal.aborted) {\n        abortAlgorithm();\n        return;\n      }\n\n      signal.addEventListener('abort', abortAlgorithm);\n    }\n\n    // Using reader and writer, read all chunks from this and write them to dest\n    // - Backpressure must be enforced\n    // - Shutdown must stop all activity\n    function pipeLoop() {\n      return newPromise<void>((resolveLoop, rejectLoop) => {\n        function next(done: boolean) {\n          if (done) {\n            resolveLoop();\n          } else {\n            // Use `PerformPromiseThen` instead of `uponPromise` to avoid\n            // adding unnecessary `.catch(rethrowAssertionErrorRejection)` handlers\n            PerformPromiseThen(pipeStep(), next, rejectLoop);\n          }\n        }\n\n        next(false);\n      });\n    }\n\n    function pipeStep(): Promise<boolean> {\n      if (shuttingDown) {\n        return promiseResolvedWith(true);\n      }\n\n      return PerformPromiseThen(writer._readyPromise, () => {\n        return newPromise<boolean>((resolveRead, rejectRead) => {\n          ReadableStreamDefaultReaderRead(\n            reader,\n            {\n              _chunkSteps: chunk => {\n                currentWrite = PerformPromiseThen(WritableStreamDefaultWriterWrite(writer, chunk), undefined, noop);\n                resolveRead(false);\n              },\n              _closeSteps: () => resolveRead(true),\n              _errorSteps: rejectRead\n            }\n          );\n        });\n      });\n    }\n\n    // Errors must be propagated forward\n    isOrBecomesErrored(source, reader._closedPromise, storedError => {\n      if (!preventAbort) {\n        shutdownWithAction(() => WritableStreamAbort(dest, storedError), true, storedError);\n      } else {\n        shutdown(true, storedError);\n      }\n      return null;\n    });\n\n    // Errors must be propagated backward\n    isOrBecomesErrored(dest, writer._closedPromise, storedError => {\n      if (!preventCancel) {\n        shutdownWithAction(() => ReadableStreamCancel(source, storedError), true, storedError);\n      } else {\n        shutdown(true, storedError);\n      }\n      return null;\n    });\n\n    // Closing must be propagated forward\n    isOrBecomesClosed(source, reader._closedPromise, () => {\n      if (!preventClose) {\n        shutdownWithAction(() => WritableStreamDefaultWriterCloseWithErrorPropagation(writer));\n      } else {\n        shutdown();\n      }\n      return null;\n    });\n\n    // Closing must be propagated backward\n    if (WritableStreamCloseQueuedOrInFlight(dest) || dest._state === 'closed') {\n      const destClosed = new TypeError('the destination writable stream closed before all data could be piped to it');\n\n      if (!preventCancel) {\n        shutdownWithAction(() => ReadableStreamCancel(source, destClosed), true, destClosed);\n      } else {\n        shutdown(true, destClosed);\n      }\n    }\n\n    setPromiseIsHandledToTrue(pipeLoop());\n\n    function waitForWritesToFinish(): Promise<void> {\n      // Another write may have started while we were waiting on this currentWrite, so we have to be sure to wait\n      // for that too.\n      const oldCurrentWrite = currentWrite;\n      return PerformPromiseThen(\n        currentWrite,\n        () => oldCurrentWrite !== currentWrite ? waitForWritesToFinish() : undefined\n      );\n    }\n\n    function isOrBecomesErrored(stream: ReadableStream | WritableStream,\n                                promise: Promise<void>,\n                                action: (reason: any) => null) {\n      if (stream._state === 'errored') {\n        action(stream._storedError);\n      } else {\n        uponRejection(promise, action);\n      }\n    }\n\n    function isOrBecomesClosed(stream: ReadableStream | WritableStream, promise: Promise<void>, action: () => null) {\n      if (stream._state === 'closed') {\n        action();\n      } else {\n        uponFulfillment(promise, action);\n      }\n    }\n\n    function shutdownWithAction(action: () => Promise<unknown>, originalIsError?: boolean, originalError?: any) {\n      if (shuttingDown) {\n        return;\n      }\n      shuttingDown = true;\n\n      if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n        uponFulfillment(waitForWritesToFinish(), doTheRest);\n      } else {\n        doTheRest();\n      }\n\n      function doTheRest(): null {\n        uponPromise(\n          action(),\n          () => finalize(originalIsError, originalError),\n          newError => finalize(true, newError)\n        );\n        return null;\n      }\n    }\n\n    function shutdown(isError?: boolean, error?: any) {\n      if (shuttingDown) {\n        return;\n      }\n      shuttingDown = true;\n\n      if (dest._state === 'writable' && !WritableStreamCloseQueuedOrInFlight(dest)) {\n        uponFulfillment(waitForWritesToFinish(), () => finalize(isError, error));\n      } else {\n        finalize(isError, error);\n      }\n    }\n\n    function finalize(isError?: boolean, error?: any): null {\n      WritableStreamDefaultWriterRelease(writer);\n      ReadableStreamReaderGenericRelease(reader);\n\n      if (signal !== undefined) {\n        signal.removeEventListener('abort', abortAlgorithm);\n      }\n      if (isError) {\n        reject(error);\n      } else {\n        resolve(undefined);\n      }\n\n      return null;\n    }\n  });\n}\n", "import type { QueuingStrategySizeCallback } from '../queuing-strategy';\nimport assert from '../../stub/assert';\nimport { DequeueValue, EnqueueValueWithSize, type QueuePair, ResetQueue } from '../abstract-ops/queue-with-sizes';\nimport {\n  ReadableStreamAddReadRequest,\n  ReadableStreamFulfillReadRequest,\n  ReadableStreamGetNumReadRequests,\n  type ReadRequest\n} from './default-reader';\nimport { SimpleQueue } from '../simple-queue';\nimport { IsReadableStreamLocked, ReadableStream, ReadableStreamClose, ReadableStreamError } from '../readable-stream';\nimport type { ValidatedUnderlyingSource } from './underlying-source';\nimport { setFunctionName, typeIsObject } from '../helpers/miscellaneous';\nimport { CancelSteps, PullSteps, ReleaseSteps } from '../abstract-ops/internal-methods';\nimport { promiseResolvedWith, uponPromise } from '../helpers/webidl';\n\n/**\n * Allows control of a {@link ReadableStream | readable stream}'s state and internal queue.\n *\n * @public\n */\nexport class ReadableStreamDefaultController<R> {\n  /** @internal */\n  _controlledReadableStream!: ReadableStream<R>;\n  /** @internal */\n  _queue!: SimpleQueue<QueuePair<R>>;\n  /** @internal */\n  _queueTotalSize!: number;\n  /** @internal */\n  _started!: boolean;\n  /** @internal */\n  _closeRequested!: boolean;\n  /** @internal */\n  _pullAgain!: boolean;\n  /** @internal */\n  _pulling !: boolean;\n  /** @internal */\n  _strategySizeAlgorithm!: QueuingStrategySizeCallback<R>;\n  /** @internal */\n  _strategyHWM!: number;\n  /** @internal */\n  _pullAlgorithm!: () => Promise<void>;\n  /** @internal */\n  _cancelAlgorithm!: (reason: any) => Promise<void>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the desired size to fill the controlled stream's internal queue. It can be negative, if the queue is\n   * over-full. An underlying source ought to use this information to determine when and how to apply backpressure.\n   */\n  get desiredSize(): number | null {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('desiredSize');\n    }\n\n    return ReadableStreamDefaultControllerGetDesiredSize(this);\n  }\n\n  /**\n   * Closes the controlled readable stream. Consumers will still be able to read any previously-enqueued chunks from\n   * the stream, but once those are read, the stream will become closed.\n   */\n  close(): void {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('close');\n    }\n\n    if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n      throw new TypeError('The stream is not in a state that permits close');\n    }\n\n    ReadableStreamDefaultControllerClose(this);\n  }\n\n  /**\n   * Enqueues the given chunk `chunk` in the controlled readable stream.\n   */\n  enqueue(chunk: R): void;\n  enqueue(chunk: R = undefined!): void {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('enqueue');\n    }\n\n    if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(this)) {\n      throw new TypeError('The stream is not in a state that permits enqueue');\n    }\n\n    return ReadableStreamDefaultControllerEnqueue(this, chunk);\n  }\n\n  /**\n   * Errors the controlled readable stream, making all future interactions with it fail with the given error `e`.\n   */\n  error(e: any = undefined): void {\n    if (!IsReadableStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('error');\n    }\n\n    ReadableStreamDefaultControllerError(this, e);\n  }\n\n  /** @internal */\n  [CancelSteps](reason: any): Promise<void> {\n    ResetQueue(this);\n    const result = this._cancelAlgorithm(reason);\n    ReadableStreamDefaultControllerClearAlgorithms(this);\n    return result;\n  }\n\n  /** @internal */\n  [PullSteps](readRequest: ReadRequest<R>): void {\n    const stream = this._controlledReadableStream;\n\n    if (this._queue.length > 0) {\n      const chunk = DequeueValue(this);\n\n      if (this._closeRequested && this._queue.length === 0) {\n        ReadableStreamDefaultControllerClearAlgorithms(this);\n        ReadableStreamClose(stream);\n      } else {\n        ReadableStreamDefaultControllerCallPullIfNeeded(this);\n      }\n\n      readRequest._chunkSteps(chunk);\n    } else {\n      ReadableStreamAddReadRequest(stream, readRequest);\n      ReadableStreamDefaultControllerCallPullIfNeeded(this);\n    }\n  }\n\n  /** @internal */\n  [ReleaseSteps](): void {\n    // Do nothing.\n  }\n}\n\nObject.defineProperties(ReadableStreamDefaultController.prototype, {\n  close: { enumerable: true },\n  enqueue: { enumerable: true },\n  error: { enumerable: true },\n  desiredSize: { enumerable: true }\n});\nsetFunctionName(ReadableStreamDefaultController.prototype.close, 'close');\nsetFunctionName(ReadableStreamDefaultController.prototype.enqueue, 'enqueue');\nsetFunctionName(ReadableStreamDefaultController.prototype.error, 'error');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStreamDefaultController.prototype, Symbol.toStringTag, {\n    value: 'ReadableStreamDefaultController',\n    configurable: true\n  });\n}\n\n// Abstract operations for the ReadableStreamDefaultController.\n\nfunction IsReadableStreamDefaultController<R = any>(x: any): x is ReadableStreamDefaultController<R> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledReadableStream')) {\n    return false;\n  }\n\n  return x instanceof ReadableStreamDefaultController;\n}\n\nfunction ReadableStreamDefaultControllerCallPullIfNeeded(controller: ReadableStreamDefaultController<any>): void {\n  const shouldPull = ReadableStreamDefaultControllerShouldCallPull(controller);\n  if (!shouldPull) {\n    return;\n  }\n\n  if (controller._pulling) {\n    controller._pullAgain = true;\n    return;\n  }\n\n  assert(!controller._pullAgain);\n\n  controller._pulling = true;\n\n  const pullPromise = controller._pullAlgorithm();\n  uponPromise(\n    pullPromise,\n    () => {\n      controller._pulling = false;\n\n      if (controller._pullAgain) {\n        controller._pullAgain = false;\n        ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n      }\n\n      return null;\n    },\n    e => {\n      ReadableStreamDefaultControllerError(controller, e);\n      return null;\n    }\n  );\n}\n\nfunction ReadableStreamDefaultControllerShouldCallPull(controller: ReadableStreamDefaultController<any>): boolean {\n  const stream = controller._controlledReadableStream;\n\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n    return false;\n  }\n\n  if (!controller._started) {\n    return false;\n  }\n\n  if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n    return true;\n  }\n\n  const desiredSize = ReadableStreamDefaultControllerGetDesiredSize(controller);\n  assert(desiredSize !== null);\n  if (desiredSize! > 0) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction ReadableStreamDefaultControllerClearAlgorithms(controller: ReadableStreamDefaultController<any>) {\n  controller._pullAlgorithm = undefined!;\n  controller._cancelAlgorithm = undefined!;\n  controller._strategySizeAlgorithm = undefined!;\n}\n\n// A client of ReadableStreamDefaultController may use these functions directly to bypass state check.\n\nexport function ReadableStreamDefaultControllerClose(controller: ReadableStreamDefaultController<any>) {\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n    return;\n  }\n\n  const stream = controller._controlledReadableStream;\n\n  controller._closeRequested = true;\n\n  if (controller._queue.length === 0) {\n    ReadableStreamDefaultControllerClearAlgorithms(controller);\n    ReadableStreamClose(stream);\n  }\n}\n\nexport function ReadableStreamDefaultControllerEnqueue<R>(\n  controller: ReadableStreamDefaultController<R>,\n  chunk: R\n): void {\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(controller)) {\n    return;\n  }\n\n  const stream = controller._controlledReadableStream;\n\n  if (IsReadableStreamLocked(stream) && ReadableStreamGetNumReadRequests(stream) > 0) {\n    ReadableStreamFulfillReadRequest(stream, chunk, false);\n  } else {\n    let chunkSize;\n    try {\n      chunkSize = controller._strategySizeAlgorithm(chunk);\n    } catch (chunkSizeE) {\n      ReadableStreamDefaultControllerError(controller, chunkSizeE);\n      throw chunkSizeE;\n    }\n\n    try {\n      EnqueueValueWithSize(controller, chunk, chunkSize);\n    } catch (enqueueE) {\n      ReadableStreamDefaultControllerError(controller, enqueueE);\n      throw enqueueE;\n    }\n  }\n\n  ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n}\n\nexport function ReadableStreamDefaultControllerError(controller: ReadableStreamDefaultController<any>, e: any) {\n  const stream = controller._controlledReadableStream;\n\n  if (stream._state !== 'readable') {\n    return;\n  }\n\n  ResetQueue(controller);\n\n  ReadableStreamDefaultControllerClearAlgorithms(controller);\n  ReadableStreamError(stream, e);\n}\n\nexport function ReadableStreamDefaultControllerGetDesiredSize(\n  controller: ReadableStreamDefaultController<any>\n): number | null {\n  const state = controller._controlledReadableStream._state;\n\n  if (state === 'errored') {\n    return null;\n  }\n  if (state === 'closed') {\n    return 0;\n  }\n\n  return controller._strategyHWM - controller._queueTotalSize;\n}\n\n// This is used in the implementation of TransformStream.\nexport function ReadableStreamDefaultControllerHasBackpressure(\n  controller: ReadableStreamDefaultController<any>\n): boolean {\n  if (ReadableStreamDefaultControllerShouldCallPull(controller)) {\n    return false;\n  }\n\n  return true;\n}\n\nexport function ReadableStreamDefaultControllerCanCloseOrEnqueue(\n  controller: ReadableStreamDefaultController<any>\n): boolean {\n  const state = controller._controlledReadableStream._state;\n\n  if (!controller._closeRequested && state === 'readable') {\n    return true;\n  }\n\n  return false;\n}\n\nexport function SetUpReadableStreamDefaultController<R>(stream: ReadableStream<R>,\n                                                        controller: ReadableStreamDefaultController<R>,\n                                                        startAlgorithm: () => void | PromiseLike<void>,\n                                                        pullAlgorithm: () => Promise<void>,\n                                                        cancelAlgorithm: (reason: any) => Promise<void>,\n                                                        highWaterMark: number,\n                                                        sizeAlgorithm: QueuingStrategySizeCallback<R>) {\n  assert(stream._readableStreamController === undefined);\n\n  controller._controlledReadableStream = stream;\n\n  controller._queue = undefined!;\n  controller._queueTotalSize = undefined!;\n  ResetQueue(controller);\n\n  controller._started = false;\n  controller._closeRequested = false;\n  controller._pullAgain = false;\n  controller._pulling = false;\n\n  controller._strategySizeAlgorithm = sizeAlgorithm;\n  controller._strategyHWM = highWaterMark;\n\n  controller._pullAlgorithm = pullAlgorithm;\n  controller._cancelAlgorithm = cancelAlgorithm;\n\n  stream._readableStreamController = controller;\n\n  const startResult = startAlgorithm();\n  uponPromise(\n    promiseResolvedWith(startResult),\n    () => {\n      controller._started = true;\n\n      assert(!controller._pulling);\n      assert(!controller._pullAgain);\n\n      ReadableStreamDefaultControllerCallPullIfNeeded(controller);\n      return null;\n    },\n    r => {\n      ReadableStreamDefaultControllerError(controller, r);\n      return null;\n    }\n  );\n}\n\nexport function SetUpReadableStreamDefaultControllerFromUnderlyingSource<R>(\n  stream: ReadableStream<R>,\n  underlyingSource: ValidatedUnderlyingSource<R>,\n  highWaterMark: number,\n  sizeAlgorithm: QueuingStrategySizeCallback<R>\n) {\n  const controller: ReadableStreamDefaultController<R> = Object.create(ReadableStreamDefaultController.prototype);\n\n  let startAlgorithm: () => void | PromiseLike<void>;\n  let pullAlgorithm: () => Promise<void>;\n  let cancelAlgorithm: (reason: any) => Promise<void>;\n\n  if (underlyingSource.start !== undefined) {\n    startAlgorithm = () => underlyingSource.start!(controller);\n  } else {\n    startAlgorithm = () => undefined;\n  }\n  if (underlyingSource.pull !== undefined) {\n    pullAlgorithm = () => underlyingSource.pull!(controller);\n  } else {\n    pullAlgorithm = () => promiseResolvedWith(undefined);\n  }\n  if (underlyingSource.cancel !== undefined) {\n    cancelAlgorithm = reason => underlyingSource.cancel!(reason);\n  } else {\n    cancelAlgorithm = () => promiseResolvedWith(undefined);\n  }\n\n  SetUpReadableStreamDefaultController(\n    stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm\n  );\n}\n\n// Helper functions for the ReadableStreamDefaultController.\n\nfunction defaultControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `ReadableStreamDefaultController.prototype.${name} can only be used on a ReadableStreamDefaultController`);\n}\n", "import {\n  CreateReadableByteStream,\n  CreateReadableStream,\n  type DefaultReadableStream,\n  IsReadableStream,\n  type ReadableByteStream,\n  ReadableStream,\n  ReadableStreamCancel,\n  type ReadableStreamReader\n} from '../readable-stream';\nimport { ReadableStreamReaderGenericRelease } from './generic-reader';\nimport {\n  AcquireReadableStreamDefaultReader,\n  IsReadableStreamDefaultReader,\n  ReadableStreamDefaultReaderRead,\n  type ReadRequest\n} from './default-reader';\nimport {\n  AcquireReadableStreamBYOBReader,\n  IsReadableStreamBYOBReader,\n  ReadableStreamBYOBReaderRead,\n  type ReadIntoRequest\n} from './byob-reader';\nimport assert from '../../stub/assert';\nimport { newPromise, promiseResolvedWith, queueMicrotask, uponRejection } from '../helpers/webidl';\nimport {\n  ReadableStreamDefaultControllerClose,\n  ReadableStreamDefaultControllerEnqueue,\n  ReadableStreamDefaultControllerError\n} from './default-controller';\nimport {\n  IsReadableByteStreamController,\n  ReadableByteStreamControllerClose,\n  ReadableByteStreamControllerEnqueue,\n  ReadableByteStreamControllerError,\n  ReadableByteStreamControllerGetBYOBRequest,\n  ReadableByteStreamControllerRespond,\n  ReadableByteStreamControllerRespondWithNewView\n} from './byte-stream-controller';\nimport { CreateArrayFromList } from '../abstract-ops/ecmascript';\nimport { CloneAsUint8Array } from '../abstract-ops/miscellaneous';\nimport type { NonShared } from '../helpers/array-buffer-view';\n\nexport function ReadableStreamTee<R>(stream: ReadableStream<R>,\n                                     cloneForBranch2: boolean): [ReadableStream<R>, ReadableStream<R>] {\n  assert(IsReadableStream(stream));\n  assert(typeof cloneForBranch2 === 'boolean');\n  if (IsReadableByteStreamController(stream._readableStreamController)) {\n    return ReadableByteStreamTee(stream as unknown as ReadableByteStream) as\n      unknown as [ReadableStream<R>, ReadableStream<R>];\n  }\n  return ReadableStreamDefaultTee(stream, cloneForBranch2);\n}\n\nexport function ReadableStreamDefaultTee<R>(\n  stream: ReadableStream<R>,\n  cloneForBranch2: boolean\n): [DefaultReadableStream<R>, DefaultReadableStream<R>] {\n  assert(IsReadableStream(stream));\n  assert(typeof cloneForBranch2 === 'boolean');\n\n  const reader = AcquireReadableStreamDefaultReader<R>(stream);\n\n  let reading = false;\n  let readAgain = false;\n  let canceled1 = false;\n  let canceled2 = false;\n  let reason1: any;\n  let reason2: any;\n  let branch1: DefaultReadableStream<R>;\n  let branch2: DefaultReadableStream<R>;\n\n  let resolveCancelPromise: (value: undefined | Promise<undefined>) => void;\n  const cancelPromise = newPromise<undefined>(resolve => {\n    resolveCancelPromise = resolve;\n  });\n\n  function pullAlgorithm(): Promise<void> {\n    if (reading) {\n      readAgain = true;\n      return promiseResolvedWith(undefined);\n    }\n\n    reading = true;\n\n    const readRequest: ReadRequest<R> = {\n      _chunkSteps: chunk => {\n        // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n        // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n        // successful synchronously-available reads get ahead of asynchronously-available errors.\n        queueMicrotask(() => {\n          readAgain = false;\n          const chunk1 = chunk;\n          const chunk2 = chunk;\n\n          // There is no way to access the cloning code right now in the reference implementation.\n          // If we add one then we'll need an implementation for serializable objects.\n          // if (!canceled2 && cloneForBranch2) {\n          //   chunk2 = StructuredDeserialize(StructuredSerialize(chunk2));\n          // }\n\n          if (!canceled1) {\n            ReadableStreamDefaultControllerEnqueue(branch1._readableStreamController, chunk1);\n          }\n          if (!canceled2) {\n            ReadableStreamDefaultControllerEnqueue(branch2._readableStreamController, chunk2);\n          }\n\n          reading = false;\n          if (readAgain) {\n            pullAlgorithm();\n          }\n        });\n      },\n      _closeSteps: () => {\n        reading = false;\n        if (!canceled1) {\n          ReadableStreamDefaultControllerClose(branch1._readableStreamController);\n        }\n        if (!canceled2) {\n          ReadableStreamDefaultControllerClose(branch2._readableStreamController);\n        }\n\n        if (!canceled1 || !canceled2) {\n          resolveCancelPromise(undefined);\n        }\n      },\n      _errorSteps: () => {\n        reading = false;\n      }\n    };\n    ReadableStreamDefaultReaderRead(reader, readRequest);\n\n    return promiseResolvedWith(undefined);\n  }\n\n  function cancel1Algorithm(reason: any): Promise<void> {\n    canceled1 = true;\n    reason1 = reason;\n    if (canceled2) {\n      const compositeReason = CreateArrayFromList([reason1, reason2]);\n      const cancelResult = ReadableStreamCancel(stream, compositeReason);\n      resolveCancelPromise(cancelResult);\n    }\n    return cancelPromise;\n  }\n\n  function cancel2Algorithm(reason: any): Promise<void> {\n    canceled2 = true;\n    reason2 = reason;\n    if (canceled1) {\n      const compositeReason = CreateArrayFromList([reason1, reason2]);\n      const cancelResult = ReadableStreamCancel(stream, compositeReason);\n      resolveCancelPromise(cancelResult);\n    }\n    return cancelPromise;\n  }\n\n  function startAlgorithm() {\n    // do nothing\n  }\n\n  branch1 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel1Algorithm);\n  branch2 = CreateReadableStream(startAlgorithm, pullAlgorithm, cancel2Algorithm);\n\n  uponRejection(reader._closedPromise, (r: any) => {\n    ReadableStreamDefaultControllerError(branch1._readableStreamController, r);\n    ReadableStreamDefaultControllerError(branch2._readableStreamController, r);\n    if (!canceled1 || !canceled2) {\n      resolveCancelPromise(undefined);\n    }\n    return null;\n  });\n\n  return [branch1, branch2];\n}\n\nexport function ReadableByteStreamTee(stream: ReadableByteStream): [ReadableByteStream, ReadableByteStream] {\n  assert(IsReadableStream(stream));\n  assert(IsReadableByteStreamController(stream._readableStreamController));\n\n  let reader: ReadableStreamReader<NonShared<Uint8Array>> = AcquireReadableStreamDefaultReader(stream);\n  let reading = false;\n  let readAgainForBranch1 = false;\n  let readAgainForBranch2 = false;\n  let canceled1 = false;\n  let canceled2 = false;\n  let reason1: any;\n  let reason2: any;\n  let branch1: ReadableByteStream;\n  let branch2: ReadableByteStream;\n\n  let resolveCancelPromise: (value: undefined | Promise<undefined>) => void;\n  const cancelPromise = newPromise<void>(resolve => {\n    resolveCancelPromise = resolve;\n  });\n\n  function forwardReaderError(thisReader: ReadableStreamReader<NonShared<Uint8Array>>) {\n    uponRejection(thisReader._closedPromise, r => {\n      if (thisReader !== reader) {\n        return null;\n      }\n      ReadableByteStreamControllerError(branch1._readableStreamController, r);\n      ReadableByteStreamControllerError(branch2._readableStreamController, r);\n      if (!canceled1 || !canceled2) {\n        resolveCancelPromise(undefined);\n      }\n      return null;\n    });\n  }\n\n  function pullWithDefaultReader() {\n    if (IsReadableStreamBYOBReader(reader)) {\n      assert(reader._readIntoRequests.length === 0);\n      ReadableStreamReaderGenericRelease(reader);\n\n      reader = AcquireReadableStreamDefaultReader(stream);\n      forwardReaderError(reader);\n    }\n\n    const readRequest: ReadRequest<NonShared<Uint8Array>> = {\n      _chunkSteps: chunk => {\n        // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n        // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n        // successful synchronously-available reads get ahead of asynchronously-available errors.\n        queueMicrotask(() => {\n          readAgainForBranch1 = false;\n          readAgainForBranch2 = false;\n\n          const chunk1 = chunk;\n          let chunk2 = chunk;\n          if (!canceled1 && !canceled2) {\n            try {\n              chunk2 = CloneAsUint8Array(chunk);\n            } catch (cloneE) {\n              ReadableByteStreamControllerError(branch1._readableStreamController, cloneE);\n              ReadableByteStreamControllerError(branch2._readableStreamController, cloneE);\n              resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n              return;\n            }\n          }\n\n          if (!canceled1) {\n            ReadableByteStreamControllerEnqueue(branch1._readableStreamController, chunk1);\n          }\n          if (!canceled2) {\n            ReadableByteStreamControllerEnqueue(branch2._readableStreamController, chunk2);\n          }\n\n          reading = false;\n          if (readAgainForBranch1) {\n            pull1Algorithm();\n          } else if (readAgainForBranch2) {\n            pull2Algorithm();\n          }\n        });\n      },\n      _closeSteps: () => {\n        reading = false;\n        if (!canceled1) {\n          ReadableByteStreamControllerClose(branch1._readableStreamController);\n        }\n        if (!canceled2) {\n          ReadableByteStreamControllerClose(branch2._readableStreamController);\n        }\n        if (branch1._readableStreamController._pendingPullIntos.length > 0) {\n          ReadableByteStreamControllerRespond(branch1._readableStreamController, 0);\n        }\n        if (branch2._readableStreamController._pendingPullIntos.length > 0) {\n          ReadableByteStreamControllerRespond(branch2._readableStreamController, 0);\n        }\n        if (!canceled1 || !canceled2) {\n          resolveCancelPromise(undefined);\n        }\n      },\n      _errorSteps: () => {\n        reading = false;\n      }\n    };\n    ReadableStreamDefaultReaderRead(reader, readRequest);\n  }\n\n  function pullWithBYOBReader(view: NonShared<ArrayBufferView>, forBranch2: boolean) {\n    if (IsReadableStreamDefaultReader<NonShared<Uint8Array>>(reader)) {\n      assert(reader._readRequests.length === 0);\n      ReadableStreamReaderGenericRelease(reader);\n\n      reader = AcquireReadableStreamBYOBReader(stream);\n      forwardReaderError(reader);\n    }\n\n    const byobBranch = forBranch2 ? branch2 : branch1;\n    const otherBranch = forBranch2 ? branch1 : branch2;\n\n    const readIntoRequest: ReadIntoRequest<NonShared<ArrayBufferView>> = {\n      _chunkSteps: chunk => {\n        // This needs to be delayed a microtask because it takes at least a microtask to detect errors (using\n        // reader._closedPromise below), and we want errors in stream to error both branches immediately. We cannot let\n        // successful synchronously-available reads get ahead of asynchronously-available errors.\n        queueMicrotask(() => {\n          readAgainForBranch1 = false;\n          readAgainForBranch2 = false;\n\n          const byobCanceled = forBranch2 ? canceled2 : canceled1;\n          const otherCanceled = forBranch2 ? canceled1 : canceled2;\n\n          if (!otherCanceled) {\n            let clonedChunk;\n            try {\n              clonedChunk = CloneAsUint8Array(chunk);\n            } catch (cloneE) {\n              ReadableByteStreamControllerError(byobBranch._readableStreamController, cloneE);\n              ReadableByteStreamControllerError(otherBranch._readableStreamController, cloneE);\n              resolveCancelPromise(ReadableStreamCancel(stream, cloneE));\n              return;\n            }\n            if (!byobCanceled) {\n              ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n            }\n            ReadableByteStreamControllerEnqueue(otherBranch._readableStreamController, clonedChunk);\n          } else if (!byobCanceled) {\n            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n          }\n\n          reading = false;\n          if (readAgainForBranch1) {\n            pull1Algorithm();\n          } else if (readAgainForBranch2) {\n            pull2Algorithm();\n          }\n        });\n      },\n      _closeSteps: chunk => {\n        reading = false;\n\n        const byobCanceled = forBranch2 ? canceled2 : canceled1;\n        const otherCanceled = forBranch2 ? canceled1 : canceled2;\n\n        if (!byobCanceled) {\n          ReadableByteStreamControllerClose(byobBranch._readableStreamController);\n        }\n        if (!otherCanceled) {\n          ReadableByteStreamControllerClose(otherBranch._readableStreamController);\n        }\n\n        if (chunk !== undefined) {\n          assert(chunk.byteLength === 0);\n\n          if (!byobCanceled) {\n            ReadableByteStreamControllerRespondWithNewView(byobBranch._readableStreamController, chunk);\n          }\n          if (!otherCanceled && otherBranch._readableStreamController._pendingPullIntos.length > 0) {\n            ReadableByteStreamControllerRespond(otherBranch._readableStreamController, 0);\n          }\n        }\n\n        if (!byobCanceled || !otherCanceled) {\n          resolveCancelPromise(undefined);\n        }\n      },\n      _errorSteps: () => {\n        reading = false;\n      }\n    };\n    ReadableStreamBYOBReaderRead(reader, view, 1, readIntoRequest);\n  }\n\n  function pull1Algorithm(): Promise<void> {\n    if (reading) {\n      readAgainForBranch1 = true;\n      return promiseResolvedWith(undefined);\n    }\n\n    reading = true;\n\n    const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch1._readableStreamController);\n    if (byobRequest === null) {\n      pullWithDefaultReader();\n    } else {\n      pullWithBYOBReader(byobRequest._view!, false);\n    }\n\n    return promiseResolvedWith(undefined);\n  }\n\n  function pull2Algorithm(): Promise<void> {\n    if (reading) {\n      readAgainForBranch2 = true;\n      return promiseResolvedWith(undefined);\n    }\n\n    reading = true;\n\n    const byobRequest = ReadableByteStreamControllerGetBYOBRequest(branch2._readableStreamController);\n    if (byobRequest === null) {\n      pullWithDefaultReader();\n    } else {\n      pullWithBYOBReader(byobRequest._view!, true);\n    }\n\n    return promiseResolvedWith(undefined);\n  }\n\n  function cancel1Algorithm(reason: any): Promise<void> {\n    canceled1 = true;\n    reason1 = reason;\n    if (canceled2) {\n      const compositeReason = CreateArrayFromList([reason1, reason2]);\n      const cancelResult = ReadableStreamCancel(stream, compositeReason);\n      resolveCancelPromise(cancelResult);\n    }\n    return cancelPromise;\n  }\n\n  function cancel2Algorithm(reason: any): Promise<void> {\n    canceled2 = true;\n    reason2 = reason;\n    if (canceled1) {\n      const compositeReason = CreateArrayFromList([reason1, reason2]);\n      const cancelResult = ReadableStreamCancel(stream, compositeReason);\n      resolveCancelPromise(cancelResult);\n    }\n    return cancelPromise;\n  }\n\n  function startAlgorithm(): void {\n    return;\n  }\n\n  branch1 = CreateReadableByteStream(startAlgorithm, pull1Algorithm, cancel1Algorithm);\n  branch2 = CreateReadableByteStream(startAlgorithm, pull2Algorithm, cancel2Algorithm);\n\n  forwardReaderError(reader);\n\n  return [branch1, branch2];\n}\n", "import { typeIsObject } from '../helpers/miscellaneous';\nimport type { ReadableStreamDefaultReadResult } from './default-reader';\n\n/**\n * A common interface for a `ReadadableStream` implementation.\n *\n * @public\n */\nexport interface ReadableStreamLike<R = any> {\n  readonly locked: boolean;\n\n  getReader(): ReadableStreamDefaultReaderLike<R>;\n}\n\n/**\n * A common interface for a `ReadableStreamDefaultReader` implementation.\n *\n * @public\n */\nexport interface ReadableStreamDefaultReaderLike<R = any> {\n  readonly closed: Promise<undefined>;\n\n  cancel(reason?: any): Promise<void>;\n\n  read(): Promise<ReadableStreamDefaultReadResult<R>>;\n\n  releaseLock(): void;\n}\n\nexport function isReadableStreamLike<R>(stream: unknown): stream is ReadableStreamLike<R> {\n  return typeIsObject(stream) && typeof (stream as ReadableStreamLike<R>).getReader !== 'undefined';\n}\n", "import { CreateReadableStream, type DefaultReadableStream } from '../readable-stream';\nimport {\n  isReadableStreamLike,\n  type ReadableStreamDefaultReaderLike,\n  type ReadableStreamLike\n} from './readable-stream-like';\nimport { ReadableStreamDefaultControllerClose, ReadableStreamDefaultControllerEnqueue } from './default-controller';\nimport { GetIterator, GetMethod, IteratorComplete, IteratorNext, IteratorValue } from '../abstract-ops/ecmascript';\nimport { promiseRejectedWith, promiseResolvedWith, reflectCall, transformPromiseWith } from '../helpers/webidl';\nimport { typeIsObject } from '../helpers/miscellaneous';\nimport { noop } from '../../utils';\n\nexport function ReadableStreamFrom<R>(\n  source: Iterable<R> | AsyncIterable<R> | ReadableStreamLike<R>\n): DefaultReadableStream<R> {\n  if (isReadableStreamLike(source)) {\n    return ReadableStreamFromDefaultReader(source.getReader());\n  }\n  return ReadableStreamFromIterable(source);\n}\n\nexport function ReadableStreamFromIterable<R>(asyncIterable: Iterable<R> | AsyncIterable<R>): DefaultReadableStream<R> {\n  let stream: DefaultReadableStream<R>;\n  const iteratorRecord = GetIterator(asyncIterable, 'async');\n\n  const startAlgorithm = noop;\n\n  function pullAlgorithm(): Promise<void> {\n    let nextResult;\n    try {\n      nextResult = IteratorNext(iteratorRecord);\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n    const nextPromise = promiseResolvedWith(nextResult);\n    return transformPromiseWith(nextPromise, iterResult => {\n      if (!typeIsObject(iterResult)) {\n        throw new TypeError('The promise returned by the iterator.next() method must fulfill with an object');\n      }\n      const done = IteratorComplete(iterResult);\n      if (done) {\n        ReadableStreamDefaultControllerClose(stream._readableStreamController);\n      } else {\n        const value = IteratorValue(iterResult);\n        ReadableStreamDefaultControllerEnqueue(stream._readableStreamController, value);\n      }\n    });\n  }\n\n  function cancelAlgorithm(reason: any): Promise<void> {\n    const iterator = iteratorRecord.iterator;\n    let returnMethod: (typeof iterator)['return'] | undefined;\n    try {\n      returnMethod = GetMethod(iterator, 'return');\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n    if (returnMethod === undefined) {\n      return promiseResolvedWith(undefined);\n    }\n    let returnResult: IteratorResult<R> | Promise<IteratorResult<R>>;\n    try {\n      returnResult = reflectCall(returnMethod, iterator, [reason]);\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n    const returnPromise = promiseResolvedWith(returnResult);\n    return transformPromiseWith(returnPromise, iterResult => {\n      if (!typeIsObject(iterResult)) {\n        throw new TypeError('The promise returned by the iterator.return() method must fulfill with an object');\n      }\n      return undefined;\n    });\n  }\n\n  stream = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, 0);\n  return stream;\n}\n\nexport function ReadableStreamFromDefaultReader<R>(\n  reader: ReadableStreamDefaultReaderLike<R>\n): DefaultReadableStream<R> {\n  let stream: DefaultReadableStream<R>;\n\n  const startAlgorithm = noop;\n\n  function pullAlgorithm(): Promise<void> {\n    let readPromise;\n    try {\n      readPromise = reader.read();\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n    return transformPromiseWith(readPromise, readResult => {\n      if (!typeIsObject(readResult)) {\n        throw new TypeError('The promise returned by the reader.read() method must fulfill with an object');\n      }\n      if (readResult.done) {\n        ReadableStreamDefaultControllerClose(stream._readableStreamController);\n      } else {\n        const value = readResult.value;\n        ReadableStreamDefaultControllerEnqueue(stream._readableStreamController, value);\n      }\n    });\n  }\n\n  function cancelAlgorithm(reason: any): Promise<void> {\n    try {\n      return promiseResolvedWith(reader.cancel(reason));\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n  }\n\n  stream = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, 0);\n  return stream;\n}\n", "import { assertDictionary, assertFunction, convertUnsignedLongLongWithEnforceRange } from './basic';\nimport type {\n  ReadableStreamController,\n  UnderlyingByteSource,\n  UnderlyingDefaultOrByteSource,\n  UnderlyingDefaultOrByteSourcePullCallback,\n  UnderlyingDefaultOrByteSourceStartCallback,\n  UnderlyingSource,\n  UnderlyingSourceCancelCallback,\n  ValidatedUnderlyingDefaultOrByteSource\n} from '../readable-stream/underlying-source';\nimport { promiseCall, reflectCall } from '../helpers/webidl';\n\nexport function convertUnderlyingDefaultOrByteSource<R>(\n  source: UnderlyingSource<R> | UnderlyingByteSource | null,\n  context: string\n): ValidatedUnderlyingDefaultOrByteSource<R> {\n  assertDictionary(source, context);\n  const original = source as (UnderlyingDefaultOrByteSource<R> | null);\n  const autoAllocateChunkSize = original?.autoAllocateChunkSize;\n  const cancel = original?.cancel;\n  const pull = original?.pull;\n  const start = original?.start;\n  const type = original?.type;\n  return {\n    autoAllocateChunkSize: autoAllocateChunkSize === undefined ?\n      undefined :\n      convertUnsignedLongLongWithEnforceRange(\n        autoAllocateChunkSize,\n        `${context} has member 'autoAllocateChunkSize' that`\n      ),\n    cancel: cancel === undefined ?\n      undefined :\n      convertUnderlyingSourceCancelCallback(cancel, original!, `${context} has member 'cancel' that`),\n    pull: pull === undefined ?\n      undefined :\n      convertUnderlyingSourcePullCallback(pull, original!, `${context} has member 'pull' that`),\n    start: start === undefined ?\n      undefined :\n      convertUnderlyingSourceStartCallback(start, original!, `${context} has member 'start' that`),\n    type: type === undefined ? undefined : convertReadableStreamType(type, `${context} has member 'type' that`)\n  };\n}\n\nfunction convertUnderlyingSourceCancelCallback(\n  fn: UnderlyingSourceCancelCallback,\n  original: UnderlyingDefaultOrByteSource,\n  context: string\n): (reason: any) => Promise<void> {\n  assertFunction(fn, context);\n  return (reason: any) => promiseCall(fn, original, [reason]);\n}\n\nfunction convertUnderlyingSourcePullCallback<R>(\n  fn: UnderlyingDefaultOrByteSourcePullCallback<R>,\n  original: UnderlyingDefaultOrByteSource<R>,\n  context: string\n): (controller: ReadableStreamController<R>) => Promise<void> {\n  assertFunction(fn, context);\n  return (controller: ReadableStreamController<R>) => promiseCall(fn, original, [controller]);\n}\n\nfunction convertUnderlyingSourceStartCallback<R>(\n  fn: UnderlyingDefaultOrByteSourceStartCallback<R>,\n  original: UnderlyingDefaultOrByteSource<R>,\n  context: string\n): UnderlyingDefaultOrByteSourceStartCallback<R> {\n  assertFunction(fn, context);\n  return (controller: ReadableStreamController<R>) => reflectCall(fn, original, [controller]);\n}\n\nfunction convertReadableStreamType(type: string, context: string): 'bytes' {\n  type = `${type}`;\n  if (type !== 'bytes') {\n    throw new TypeError(`${context} '${type}' is not a valid enumeration value for ReadableStreamType`);\n  }\n  return type;\n}\n", "import { assertDictionary } from './basic';\nimport type {\n  ReadableStreamIteratorOptions,\n  ValidatedReadableStreamIteratorOptions\n} from '../readable-stream/iterator-options';\n\nexport function convertIteratorOptions(options: ReadableStreamIteratorOptions | null | undefined,\n                                       context: string): ValidatedReadableStreamIteratorOptions {\n  assertDictionary(options, context);\n  const preventCancel = options?.preventCancel;\n  return { preventCancel: Boolean(preventCancel) };\n}\n", "import { assertDictionary } from './basic';\nimport type { StreamPipeOptions, ValidatedStreamPipeOptions } from '../readable-stream/pipe-options';\nimport { type AbortSignal, isAbortSignal } from '../abort-signal';\n\nexport function convertPipeOptions(options: StreamPipeOptions | null | undefined,\n                                   context: string): ValidatedStreamPipeOptions {\n  assertDictionary(options, context);\n  const preventAbort = options?.preventAbort;\n  const preventCancel = options?.preventCancel;\n  const preventClose = options?.preventClose;\n  const signal = options?.signal;\n  if (signal !== undefined) {\n    assertAbortSignal(signal, `${context} has member 'signal' that`);\n  }\n  return {\n    preventAbort: Boolean(preventAbort),\n    preventCancel: Boolean(preventCancel),\n    preventClose: Boolean(preventClose),\n    signal\n  };\n}\n\nfunction assertAbortSignal(signal: unknown, context: string): asserts signal is AbortSignal {\n  if (!isAbortSignal(signal)) {\n    throw new TypeError(`${context} is not an AbortSignal.`);\n  }\n}\n", "import { assertDictionary, assertRequiredField } from './basic';\nimport { ReadableStream } from '../readable-stream';\nimport { WritableStream } from '../writable-stream';\nimport { assertReadableStream } from './readable-stream';\nimport { assertWritableStream } from './writable-stream';\n\nexport function convertReadableWritablePair<RS extends ReadableStream, WS extends WritableStream>(\n  pair: { readable: RS; writable: WS } | null | undefined,\n  context: string\n): { readable: RS; writable: WS } {\n  assertDictionary(pair, context);\n\n  const readable = pair?.readable;\n  assertRequiredField(readable, 'readable', 'ReadableWritablePair');\n  assertReadableStream(readable, `${context} has member 'readable' that`);\n\n  const writable = pair?.writable;\n  assertRequiredField(writable, 'writable', 'ReadableWritablePair');\n  assertWritableStream(writable, `${context} has member 'writable' that`);\n\n  return { readable, writable };\n}\n", "import assert from '../stub/assert';\nimport {\n  promiseRejectedWith,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  transformPromiseWith\n} from './helpers/webidl';\nimport type { QueuingStrategy, QueuingStrategySizeCallback } from './queuing-strategy';\nimport { AcquireReadableStreamAsyncIterator, type ReadableStreamAsyncIterator } from './readable-stream/async-iterator';\nimport { defaultReaderClosedPromiseReject, defaultReaderClosedPromiseResolve } from './readable-stream/generic-reader';\nimport {\n  AcquireReadableStreamDefaultReader,\n  IsReadableStreamDefaultReader,\n  ReadableStreamDefaultReader,\n  ReadableStreamDefaultReaderErrorReadRequests,\n  type ReadableStreamDefaultReadResult\n} from './readable-stream/default-reader';\nimport {\n  AcquireReadableStreamBYOBReader,\n  IsReadableStreamBYOBReader,\n  ReadableStreamBYOBReader,\n  ReadableStreamBYOBReaderErrorReadIntoRequests,\n  type ReadableStreamBYOBReadResult\n} from './readable-stream/byob-reader';\nimport { ReadableStreamPipeTo } from './readable-stream/pipe';\nimport { ReadableStreamTee } from './readable-stream/tee';\nimport { ReadableStreamFrom } from './readable-stream/from';\nimport { IsWritableStream, IsWritableStreamLocked, WritableStream } from './writable-stream';\nimport { SimpleQueue } from './simple-queue';\nimport {\n  ReadableByteStreamController,\n  ReadableStreamBYOBRequest,\n  SetUpReadableByteStreamController,\n  SetUpReadableByteStreamControllerFromUnderlyingSource\n} from './readable-stream/byte-stream-controller';\nimport {\n  ReadableStreamDefaultController,\n  SetUpReadableStreamDefaultController,\n  SetUpReadableStreamDefaultControllerFromUnderlyingSource\n} from './readable-stream/default-controller';\nimport type {\n  UnderlyingByteSource,\n  UnderlyingByteSourcePullCallback,\n  UnderlyingByteSourceStartCallback,\n  UnderlyingSource,\n  UnderlyingSourceCancelCallback,\n  UnderlyingSourcePullCallback,\n  UnderlyingSourceStartCallback\n} from './readable-stream/underlying-source';\nimport { noop } from '../utils';\nimport { setFunctionName, typeIsObject } from './helpers/miscellaneous';\nimport { CreateArrayFromList, SymbolAsyncIterator } from './abstract-ops/ecmascript';\nimport { CancelSteps } from './abstract-ops/internal-methods';\nimport { IsNonNegativeNumber } from './abstract-ops/miscellaneous';\nimport { assertObject, assertRequiredArgument } from './validators/basic';\nimport { convertQueuingStrategy } from './validators/queuing-strategy';\nimport { ExtractHighWaterMark, ExtractSizeAlgorithm } from './abstract-ops/queuing-strategy';\nimport { convertUnderlyingDefaultOrByteSource } from './validators/underlying-source';\nimport type {\n  ReadableStreamBYOBReaderReadOptions,\n  ReadableStreamGetReaderOptions\n} from './readable-stream/reader-options';\nimport { convertReaderOptions } from './validators/reader-options';\nimport type { StreamPipeOptions, ValidatedStreamPipeOptions } from './readable-stream/pipe-options';\nimport type { ReadableStreamIteratorOptions } from './readable-stream/iterator-options';\nimport { convertIteratorOptions } from './validators/iterator-options';\nimport { convertPipeOptions } from './validators/pipe-options';\nimport type { ReadableWritablePair } from './readable-stream/readable-writable-pair';\nimport { convertReadableWritablePair } from './validators/readable-writable-pair';\nimport type { ReadableStreamDefaultReaderLike, ReadableStreamLike } from './readable-stream/readable-stream-like';\nimport type { NonShared } from './helpers/array-buffer-view';\n\nexport type DefaultReadableStream<R = any> = ReadableStream<R> & {\n  _readableStreamController: ReadableStreamDefaultController<R>\n};\n\nexport type ReadableByteStream = ReadableStream<NonShared<Uint8Array>> & {\n  _readableStreamController: ReadableByteStreamController\n};\n\ntype ReadableStreamState = 'readable' | 'closed' | 'errored';\n\n/**\n * A readable stream represents a source of data, from which you can read.\n *\n * @public\n */\nexport class ReadableStream<R = any> implements AsyncIterable<R> {\n  /** @internal */\n  _state!: ReadableStreamState;\n  /** @internal */\n  _reader: ReadableStreamReader<R> | undefined;\n  /** @internal */\n  _storedError: any;\n  /** @internal */\n  _disturbed!: boolean;\n  /** @internal */\n  _readableStreamController!: ReadableStreamDefaultController<R> | ReadableByteStreamController;\n\n  constructor(underlyingSource: UnderlyingByteSource, strategy?: { highWaterMark?: number; size?: undefined });\n  constructor(underlyingSource?: UnderlyingSource<R>, strategy?: QueuingStrategy<R>);\n  constructor(rawUnderlyingSource: UnderlyingSource<R> | UnderlyingByteSource | null | undefined = {},\n              rawStrategy: QueuingStrategy<R> | null | undefined = {}) {\n    if (rawUnderlyingSource === undefined) {\n      rawUnderlyingSource = null;\n    } else {\n      assertObject(rawUnderlyingSource, 'First parameter');\n    }\n\n    const strategy = convertQueuingStrategy(rawStrategy, 'Second parameter');\n    const underlyingSource = convertUnderlyingDefaultOrByteSource(rawUnderlyingSource, 'First parameter');\n\n    InitializeReadableStream(this);\n\n    if (underlyingSource.type === 'bytes') {\n      if (strategy.size !== undefined) {\n        throw new RangeError('The strategy for a byte stream cannot have a size function');\n      }\n      const highWaterMark = ExtractHighWaterMark(strategy, 0);\n      SetUpReadableByteStreamControllerFromUnderlyingSource(\n        this as unknown as ReadableByteStream,\n        underlyingSource,\n        highWaterMark\n      );\n    } else {\n      assert(underlyingSource.type === undefined);\n      const sizeAlgorithm = ExtractSizeAlgorithm(strategy);\n      const highWaterMark = ExtractHighWaterMark(strategy, 1);\n      SetUpReadableStreamDefaultControllerFromUnderlyingSource(\n        this,\n        underlyingSource,\n        highWaterMark,\n        sizeAlgorithm\n      );\n    }\n  }\n\n  /**\n   * Whether or not the readable stream is locked to a {@link ReadableStreamDefaultReader | reader}.\n   */\n  get locked(): boolean {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('locked');\n    }\n\n    return IsReadableStreamLocked(this);\n  }\n\n  /**\n   * Cancels the stream, signaling a loss of interest in the stream by a consumer.\n   *\n   * The supplied `reason` argument will be given to the underlying source's {@link UnderlyingSource.cancel | cancel()}\n   * method, which might or might not use it.\n   */\n  cancel(reason: any = undefined): Promise<void> {\n    if (!IsReadableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('cancel'));\n    }\n\n    if (IsReadableStreamLocked(this)) {\n      return promiseRejectedWith(new TypeError('Cannot cancel a stream that already has a reader'));\n    }\n\n    return ReadableStreamCancel(this, reason);\n  }\n\n  /**\n   * Creates a {@link ReadableStreamBYOBReader} and locks the stream to the new reader.\n   *\n   * This call behaves the same way as the no-argument variant, except that it only works on readable byte streams,\n   * i.e. streams which were constructed specifically with the ability to handle \"bring your own buffer\" reading.\n   * The returned BYOB reader provides the ability to directly read individual chunks from the stream via its\n   * {@link ReadableStreamBYOBReader.read | read()} method, into developer-supplied buffers, allowing more precise\n   * control over allocation.\n   */\n  getReader({ mode }: { mode: 'byob' }): ReadableStreamBYOBReader;\n  /**\n   * Creates a {@link ReadableStreamDefaultReader} and locks the stream to the new reader.\n   * While the stream is locked, no other reader can be acquired until this one is released.\n   *\n   * This functionality is especially useful for creating abstractions that desire the ability to consume a stream\n   * in its entirety. By getting a reader for the stream, you can ensure nobody else can interleave reads with yours\n   * or cancel the stream, which would interfere with your abstraction.\n   */\n  getReader(): ReadableStreamDefaultReader<R>;\n  getReader(\n    rawOptions: ReadableStreamGetReaderOptions | null | undefined = undefined\n  ): ReadableStreamDefaultReader<R> | ReadableStreamBYOBReader {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('getReader');\n    }\n\n    const options = convertReaderOptions(rawOptions, 'First parameter');\n\n    if (options.mode === undefined) {\n      return AcquireReadableStreamDefaultReader(this);\n    }\n\n    assert(options.mode === 'byob');\n    return AcquireReadableStreamBYOBReader(this as unknown as ReadableByteStream);\n  }\n\n  /**\n   * Provides a convenient, chainable way of piping this readable stream through a transform stream\n   * (or any other `{ writable, readable }` pair). It simply {@link ReadableStream.pipeTo | pipes} the stream\n   * into the writable side of the supplied pair, and returns the readable side for further use.\n   *\n   * Piping a stream will lock it for the duration of the pipe, preventing any other consumer from acquiring a reader.\n   */\n  pipeThrough<RS extends ReadableStream>(\n    transform: { readable: RS; writable: WritableStream<R> },\n    options?: StreamPipeOptions\n  ): RS;\n  pipeThrough<RS extends ReadableStream>(\n    rawTransform: { readable: RS; writable: WritableStream<R> } | null | undefined,\n    rawOptions: StreamPipeOptions | null | undefined = {}\n  ): RS {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('pipeThrough');\n    }\n    assertRequiredArgument(rawTransform, 1, 'pipeThrough');\n\n    const transform = convertReadableWritablePair(rawTransform, 'First parameter');\n    const options = convertPipeOptions(rawOptions, 'Second parameter');\n\n    if (IsReadableStreamLocked(this)) {\n      throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream');\n    }\n    if (IsWritableStreamLocked(transform.writable)) {\n      throw new TypeError('ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream');\n    }\n\n    const promise = ReadableStreamPipeTo(\n      this, transform.writable, options.preventClose, options.preventAbort, options.preventCancel, options.signal\n    );\n\n    setPromiseIsHandledToTrue(promise);\n\n    return transform.readable;\n  }\n\n  /**\n   * Pipes this readable stream to a given writable stream. The way in which the piping process behaves under\n   * various error conditions can be customized with a number of passed options. It returns a promise that fulfills\n   * when the piping process completes successfully, or rejects if any errors were encountered.\n   *\n   * Piping a stream will lock it for the duration of the pipe, preventing any other consumer from acquiring a reader.\n   */\n  pipeTo(destination: WritableStream<R>, options?: StreamPipeOptions): Promise<void>;\n  pipeTo(destination: WritableStream<R> | null | undefined,\n         rawOptions: StreamPipeOptions | null | undefined = {}): Promise<void> {\n    if (!IsReadableStream(this)) {\n      return promiseRejectedWith(streamBrandCheckException('pipeTo'));\n    }\n\n    if (destination === undefined) {\n      return promiseRejectedWith(`Parameter 1 is required in 'pipeTo'.`);\n    }\n    if (!IsWritableStream(destination)) {\n      return promiseRejectedWith(\n        new TypeError(`ReadableStream.prototype.pipeTo's first argument must be a WritableStream`)\n      );\n    }\n\n    let options: ValidatedStreamPipeOptions;\n    try {\n      options = convertPipeOptions(rawOptions, 'Second parameter');\n    } catch (e) {\n      return promiseRejectedWith(e);\n    }\n\n    if (IsReadableStreamLocked(this)) {\n      return promiseRejectedWith(\n        new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream')\n      );\n    }\n    if (IsWritableStreamLocked(destination)) {\n      return promiseRejectedWith(\n        new TypeError('ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream')\n      );\n    }\n\n    return ReadableStreamPipeTo<R>(\n      this, destination, options.preventClose, options.preventAbort, options.preventCancel, options.signal\n    );\n  }\n\n  /**\n   * Tees this readable stream, returning a two-element array containing the two resulting branches as\n   * new {@link ReadableStream} instances.\n   *\n   * Teeing a stream will lock it, preventing any other consumer from acquiring a reader.\n   * To cancel the stream, cancel both of the resulting branches; a composite cancellation reason will then be\n   * propagated to the stream's underlying source.\n   *\n   * Note that the chunks seen in each branch will be the same object. If the chunks are not immutable,\n   * this could allow interference between the two branches.\n   */\n  tee(): [ReadableStream<R>, ReadableStream<R>] {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('tee');\n    }\n\n    const branches = ReadableStreamTee(this, false);\n    return CreateArrayFromList(branches);\n  }\n\n  /**\n   * Asynchronously iterates over the chunks in the stream's internal queue.\n   *\n   * Asynchronously iterating over the stream will lock it, preventing any other consumer from acquiring a reader.\n   * The lock will be released if the async iterator's {@link ReadableStreamAsyncIterator.return | return()} method\n   * is called, e.g. by breaking out of the loop.\n   *\n   * By default, calling the async iterator's {@link ReadableStreamAsyncIterator.return | return()} method will also\n   * cancel the stream. To prevent this, use the stream's {@link ReadableStream.values | values()} method, passing\n   * `true` for the `preventCancel` option.\n   */\n  values(options?: ReadableStreamIteratorOptions): ReadableStreamAsyncIterator<R>;\n  values(rawOptions: ReadableStreamIteratorOptions | null | undefined = undefined): ReadableStreamAsyncIterator<R> {\n    if (!IsReadableStream(this)) {\n      throw streamBrandCheckException('values');\n    }\n\n    const options = convertIteratorOptions(rawOptions, 'First parameter');\n    return AcquireReadableStreamAsyncIterator<R>(this, options.preventCancel);\n  }\n\n  /**\n   * {@inheritDoc ReadableStream.values}\n   */\n  [Symbol.asyncIterator](options?: ReadableStreamIteratorOptions): ReadableStreamAsyncIterator<R>;\n\n  [SymbolAsyncIterator](options?: ReadableStreamIteratorOptions): ReadableStreamAsyncIterator<R> {\n    // Stub implementation, overridden below\n    return this.values(options);\n  }\n\n  /**\n   * Creates a new ReadableStream wrapping the provided iterable or async iterable.\n   *\n   * This can be used to adapt various kinds of objects into a readable stream,\n   * such as an array, an async generator, or a Node.js readable stream.\n   */\n  static from<R>(asyncIterable: Iterable<R> | AsyncIterable<R> | ReadableStreamLike<R>): ReadableStream<R> {\n    return ReadableStreamFrom(asyncIterable);\n  }\n}\n\nObject.defineProperties(ReadableStream, {\n  from: { enumerable: true }\n});\nObject.defineProperties(ReadableStream.prototype, {\n  cancel: { enumerable: true },\n  getReader: { enumerable: true },\n  pipeThrough: { enumerable: true },\n  pipeTo: { enumerable: true },\n  tee: { enumerable: true },\n  values: { enumerable: true },\n  locked: { enumerable: true }\n});\nsetFunctionName(ReadableStream.from, 'from');\nsetFunctionName(ReadableStream.prototype.cancel, 'cancel');\nsetFunctionName(ReadableStream.prototype.getReader, 'getReader');\nsetFunctionName(ReadableStream.prototype.pipeThrough, 'pipeThrough');\nsetFunctionName(ReadableStream.prototype.pipeTo, 'pipeTo');\nsetFunctionName(ReadableStream.prototype.tee, 'tee');\nsetFunctionName(ReadableStream.prototype.values, 'values');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ReadableStream.prototype, Symbol.toStringTag, {\n    value: 'ReadableStream',\n    configurable: true\n  });\n}\nObject.defineProperty(ReadableStream.prototype, SymbolAsyncIterator, {\n  value: ReadableStream.prototype.values,\n  writable: true,\n  configurable: true\n});\n\nexport type {\n  ReadableStreamAsyncIterator,\n  ReadableStreamDefaultReadResult,\n  ReadableStreamBYOBReadResult,\n  ReadableStreamBYOBReaderReadOptions,\n  UnderlyingByteSource,\n  UnderlyingSource,\n  UnderlyingSourceStartCallback,\n  UnderlyingSourcePullCallback,\n  UnderlyingSourceCancelCallback,\n  UnderlyingByteSourceStartCallback,\n  UnderlyingByteSourcePullCallback,\n  StreamPipeOptions,\n  ReadableWritablePair,\n  ReadableStreamIteratorOptions,\n  ReadableStreamLike,\n  ReadableStreamDefaultReaderLike\n};\n\n// Abstract operations for the ReadableStream.\n\n// Throws if and only if startAlgorithm throws.\nexport function CreateReadableStream<R>(\n  startAlgorithm: () => void | PromiseLike<void>,\n  pullAlgorithm: () => Promise<void>,\n  cancelAlgorithm: (reason: any) => Promise<void>,\n  highWaterMark = 1,\n  sizeAlgorithm: QueuingStrategySizeCallback<R> = () => 1\n): DefaultReadableStream<R> {\n  assert(IsNonNegativeNumber(highWaterMark));\n\n  const stream: DefaultReadableStream<R> = Object.create(ReadableStream.prototype);\n  InitializeReadableStream(stream);\n\n  const controller: ReadableStreamDefaultController<R> = Object.create(ReadableStreamDefaultController.prototype);\n  SetUpReadableStreamDefaultController(\n    stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, highWaterMark, sizeAlgorithm\n  );\n\n  return stream;\n}\n\n// Throws if and only if startAlgorithm throws.\nexport function CreateReadableByteStream(\n  startAlgorithm: () => void | PromiseLike<void>,\n  pullAlgorithm: () => Promise<void>,\n  cancelAlgorithm: (reason: any) => Promise<void>\n): ReadableByteStream {\n  const stream: ReadableByteStream = Object.create(ReadableStream.prototype);\n  InitializeReadableStream(stream);\n\n  const controller: ReadableByteStreamController = Object.create(ReadableByteStreamController.prototype);\n  SetUpReadableByteStreamController(stream, controller, startAlgorithm, pullAlgorithm, cancelAlgorithm, 0, undefined);\n\n  return stream;\n}\n\nfunction InitializeReadableStream(stream: ReadableStream) {\n  stream._state = 'readable';\n  stream._reader = undefined;\n  stream._storedError = undefined;\n  stream._disturbed = false;\n}\n\nexport function IsReadableStream(x: unknown): x is ReadableStream {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_readableStreamController')) {\n    return false;\n  }\n\n  return x instanceof ReadableStream;\n}\n\nexport function IsReadableStreamDisturbed(stream: ReadableStream): boolean {\n  assert(IsReadableStream(stream));\n\n  return stream._disturbed;\n}\n\nexport function IsReadableStreamLocked(stream: ReadableStream): boolean {\n  assert(IsReadableStream(stream));\n\n  if (stream._reader === undefined) {\n    return false;\n  }\n\n  return true;\n}\n\n// ReadableStream API exposed for controllers.\n\nexport function ReadableStreamCancel<R>(stream: ReadableStream<R>, reason: any): Promise<undefined> {\n  stream._disturbed = true;\n\n  if (stream._state === 'closed') {\n    return promiseResolvedWith(undefined);\n  }\n  if (stream._state === 'errored') {\n    return promiseRejectedWith(stream._storedError);\n  }\n\n  ReadableStreamClose(stream);\n\n  const reader = stream._reader;\n  if (reader !== undefined && IsReadableStreamBYOBReader(reader)) {\n    const readIntoRequests = reader._readIntoRequests;\n    reader._readIntoRequests = new SimpleQueue();\n    readIntoRequests.forEach(readIntoRequest => {\n      readIntoRequest._closeSteps(undefined);\n    });\n  }\n\n  const sourceCancelPromise = stream._readableStreamController[CancelSteps](reason);\n  return transformPromiseWith(sourceCancelPromise, noop);\n}\n\nexport function ReadableStreamClose<R>(stream: ReadableStream<R>): void {\n  assert(stream._state === 'readable');\n\n  stream._state = 'closed';\n\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return;\n  }\n\n  defaultReaderClosedPromiseResolve(reader);\n\n  if (IsReadableStreamDefaultReader<R>(reader)) {\n    const readRequests = reader._readRequests;\n    reader._readRequests = new SimpleQueue();\n    readRequests.forEach(readRequest => {\n      readRequest._closeSteps();\n    });\n  }\n}\n\nexport function ReadableStreamError<R>(stream: ReadableStream<R>, e: any): void {\n  assert(IsReadableStream(stream));\n  assert(stream._state === 'readable');\n\n  stream._state = 'errored';\n  stream._storedError = e;\n\n  const reader = stream._reader;\n\n  if (reader === undefined) {\n    return;\n  }\n\n  defaultReaderClosedPromiseReject(reader, e);\n\n  if (IsReadableStreamDefaultReader<R>(reader)) {\n    ReadableStreamDefaultReaderErrorReadRequests(reader, e);\n  } else {\n    assert(IsReadableStreamBYOBReader(reader));\n    ReadableStreamBYOBReaderErrorReadIntoRequests(reader, e);\n  }\n}\n\n// Readers\n\nexport type ReadableStreamReader<R> = ReadableStreamDefaultReader<R> | ReadableStreamBYOBReader;\n\nexport {\n  ReadableStreamDefaultReader,\n  ReadableStreamBYOBReader\n};\n\n// Controllers\n\nexport {\n  ReadableStreamDefaultController,\n  ReadableStreamBYOBRequest,\n  ReadableByteStreamController\n};\n\n// Helper functions for the ReadableStream.\n\nfunction streamBrandCheckException(name: string): TypeError {\n  return new TypeError(`ReadableStream.prototype.${name} can only be used on a ReadableStream`);\n}\n", "import type { QueuingStrategyInit } from '../queuing-strategy';\nimport { assertDictionary, assertRequiredField, convertUnrestrictedDouble } from './basic';\n\nexport function convertQueuingStrategyInit(init: QueuingStrategyInit | null | undefined,\n                                           context: string): QueuingStrategyInit {\n  assertDictionary(init, context);\n  const highWaterMark = init?.highWaterMark;\n  assertRequiredField(highWaterMark, 'highWaterMark', 'QueuingStrategyInit');\n  return {\n    highWaterMark: convertUnrestrictedDouble(highWaterMark)\n  };\n}\n", "import type { QueuingStrategy, QueuingStrategyInit } from './queuing-strategy';\nimport { setFunctionName, typeIsObject } from './helpers/miscellaneous';\nimport { assertRequiredArgument } from './validators/basic';\nimport { convertQueuingStrategyInit } from './validators/queuing-strategy-init';\n\n// The size function must not have a prototype property nor be a constructor\nconst byteLengthSizeFunction = (chunk: ArrayBufferView): number => {\n  return chunk.byteLength;\n};\nsetFunctionName(byteLengthSizeFunction, 'size');\n\n/**\n * A queuing strategy that counts the number of bytes in each chunk.\n *\n * @public\n */\nexport default class ByteLengthQueuingStrategy implements QueuingStrategy<ArrayBufferView> {\n  /** @internal */\n  readonly _byteLengthQueuingStrategyHighWaterMark: number;\n\n  constructor(options: QueuingStrategyInit) {\n    assertRequiredArgument(options, 1, 'ByteLengthQueuingStrategy');\n    options = convertQueuingStrategyInit(options, 'First parameter');\n    this._byteLengthQueuingStrategyHighWaterMark = options.highWaterMark;\n  }\n\n  /**\n   * Returns the high water mark provided to the constructor.\n   */\n  get highWaterMark(): number {\n    if (!IsByteLengthQueuingStrategy(this)) {\n      throw byteLengthBrandCheckException('highWaterMark');\n    }\n    return this._byteLengthQueuingStrategyHighWaterMark;\n  }\n\n  /**\n   * Measures the size of `chunk` by returning the value of its `byteLength` property.\n   */\n  get size(): (chunk: ArrayBufferView) => number {\n    if (!IsByteLengthQueuingStrategy(this)) {\n      throw byteLengthBrandCheckException('size');\n    }\n    return byteLengthSizeFunction;\n  }\n}\n\nObject.defineProperties(ByteLengthQueuingStrategy.prototype, {\n  highWaterMark: { enumerable: true },\n  size: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(ByteLengthQueuingStrategy.prototype, Symbol.toStringTag, {\n    value: 'ByteLengthQueuingStrategy',\n    configurable: true\n  });\n}\n\n// Helper functions for the ByteLengthQueuingStrategy.\n\nfunction byteLengthBrandCheckException(name: string): TypeError {\n  return new TypeError(`ByteLengthQueuingStrategy.prototype.${name} can only be used on a ByteLengthQueuingStrategy`);\n}\n\nexport function IsByteLengthQueuingStrategy(x: any): x is ByteLengthQueuingStrategy {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_byteLengthQueuingStrategyHighWaterMark')) {\n    return false;\n  }\n\n  return x instanceof ByteLengthQueuingStrategy;\n}\n", "import type { QueuingStrategy, QueuingStrategyInit } from './queuing-strategy';\nimport { setFunctionName, typeIsObject } from './helpers/miscellaneous';\nimport { assertRequiredArgument } from './validators/basic';\nimport { convertQueuingStrategyInit } from './validators/queuing-strategy-init';\n\n// The size function must not have a prototype property nor be a constructor\nconst countSizeFunction = (): 1 => {\n  return 1;\n};\nsetFunctionName(countSizeFunction, 'size');\n\n/**\n * A queuing strategy that counts the number of chunks.\n *\n * @public\n */\nexport default class CountQueuingStrategy implements QueuingStrategy<any> {\n  /** @internal */\n  readonly _countQueuingStrategyHighWaterMark!: number;\n\n  constructor(options: QueuingStrategyInit) {\n    assertRequiredArgument(options, 1, 'CountQueuingStrategy');\n    options = convertQueuingStrategyInit(options, 'First parameter');\n    this._countQueuingStrategyHighWaterMark = options.highWaterMark;\n  }\n\n  /**\n   * Returns the high water mark provided to the constructor.\n   */\n  get highWaterMark(): number {\n    if (!IsCountQueuingStrategy(this)) {\n      throw countBrandCheckException('highWaterMark');\n    }\n    return this._countQueuingStrategyHighWaterMark;\n  }\n\n  /**\n   * Measures the size of `chunk` by always returning 1.\n   * This ensures that the total queue size is a count of the number of chunks in the queue.\n   */\n  get size(): (chunk: any) => 1 {\n    if (!IsCountQueuingStrategy(this)) {\n      throw countBrandCheckException('size');\n    }\n    return countSizeFunction;\n  }\n}\n\nObject.defineProperties(CountQueuingStrategy.prototype, {\n  highWaterMark: { enumerable: true },\n  size: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(CountQueuingStrategy.prototype, Symbol.toStringTag, {\n    value: 'CountQueuingStrategy',\n    configurable: true\n  });\n}\n\n// Helper functions for the CountQueuingStrategy.\n\nfunction countBrandCheckException(name: string): TypeError {\n  return new TypeError(`CountQueuingStrategy.prototype.${name} can only be used on a CountQueuingStrategy`);\n}\n\nexport function IsCountQueuingStrategy(x: any): x is CountQueuingStrategy {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_countQueuingStrategyHighWaterMark')) {\n    return false;\n  }\n\n  return x instanceof CountQueuingStrategy;\n}\n", "import { assertDictionary, assertFunction } from './basic';\nimport { promiseCall, reflectCall } from '../helpers/webidl';\nimport type {\n  Transformer,\n  TransformerCancelCallback,\n  TransformerFlushCallback,\n  TransformerStartCallback,\n  TransformerTransformCallback,\n  ValidatedTransformer\n} from '../transform-stream/transformer';\nimport { TransformStreamDefaultController } from '../transform-stream';\n\nexport function convertTransformer<I, O>(original: Transformer<I, O> | null,\n                                         context: string): ValidatedTransformer<I, O> {\n  assertDictionary(original, context);\n  const cancel = original?.cancel;\n  const flush = original?.flush;\n  const readableType = original?.readableType;\n  const start = original?.start;\n  const transform = original?.transform;\n  const writableType = original?.writableType;\n  return {\n    cancel: cancel === undefined ?\n      undefined :\n      convertTransformerCancelCallback(cancel, original!, `${context} has member 'cancel' that`),\n    flush: flush === undefined ?\n      undefined :\n      convertTransformerFlushCallback(flush, original!, `${context} has member 'flush' that`),\n    readableType,\n    start: start === undefined ?\n      undefined :\n      convertTransformerStartCallback(start, original!, `${context} has member 'start' that`),\n    transform: transform === undefined ?\n      undefined :\n      convertTransformerTransformCallback(transform, original!, `${context} has member 'transform' that`),\n    writableType\n  };\n}\n\nfunction convertTransformerFlushCallback<I, O>(\n  fn: TransformerFlushCallback<O>,\n  original: Transformer<I, O>,\n  context: string\n): (controller: TransformStreamDefaultController<O>) => Promise<void> {\n  assertFunction(fn, context);\n  return (controller: TransformStreamDefaultController<O>) => promiseCall(fn, original, [controller]);\n}\n\nfunction convertTransformerStartCallback<I, O>(\n  fn: TransformerStartCallback<O>,\n  original: Transformer<I, O>,\n  context: string\n): TransformerStartCallback<O> {\n  assertFunction(fn, context);\n  return (controller: TransformStreamDefaultController<O>) => reflectCall(fn, original, [controller]);\n}\n\nfunction convertTransformerTransformCallback<I, O>(\n  fn: TransformerTransformCallback<I, O>,\n  original: Transformer<I, O>,\n  context: string\n): (chunk: I, controller: TransformStreamDefaultController<O>) => Promise<void> {\n  assertFunction(fn, context);\n  return (chunk: I, controller: TransformStreamDefaultController<O>) => promiseCall(fn, original, [chunk, controller]);\n}\n\nfunction convertTransformerCancelCallback<I, O>(\n  fn: TransformerCancelCallback,\n  original: Transformer<I, O>,\n  context: string\n): (reason: any) => Promise<void> {\n  assertFunction(fn, context);\n  return (reason: any) => promiseCall(fn, original, [reason]);\n}\n", "import assert from '../stub/assert';\nimport {\n  newPromise,\n  promiseRejectedWith,\n  promiseResolvedWith,\n  setPromiseIsHandledToTrue,\n  transformPromiseWith,\n  uponPromise\n} from './helpers/webidl';\nimport { CreateReadableStream, type DefaultReadableStream, ReadableStream } from './readable-stream';\nimport {\n  ReadableStreamDefaultControllerCanCloseOrEnqueue,\n  ReadableStreamDefaultControllerClose,\n  ReadableStreamDefaultControllerEnqueue,\n  ReadableStreamDefaultControllerError,\n  ReadableStreamDefaultControllerGetDesiredSize,\n  ReadableStreamDefaultControllerHasBackpressure\n} from './readable-stream/default-controller';\nimport type { QueuingStrategy, QueuingStrategySizeCallback } from './queuing-strategy';\nimport { CreateWritableStream, WritableStream, WritableStreamDefaultControllerErrorIfNeeded } from './writable-stream';\nimport { setFunctionName, typeIsObject } from './helpers/miscellaneous';\nimport { IsNonNegativeNumber } from './abstract-ops/miscellaneous';\nimport { convertQueuingStrategy } from './validators/queuing-strategy';\nimport { ExtractHighWaterMark, ExtractSizeAlgorithm } from './abstract-ops/queuing-strategy';\nimport type {\n  Transformer,\n  TransformerCancelCallback,\n  TransformerFlushCallback,\n  TransformerStartCallback,\n  TransformerTransformCallback,\n  ValidatedTransformer\n} from './transform-stream/transformer';\nimport { convertTransformer } from './validators/transformer';\n\n// Class TransformStream\n\n/**\n * A transform stream consists of a pair of streams: a {@link WritableStream | writable stream},\n * known as its writable side, and a {@link ReadableStream | readable stream}, known as its readable side.\n * In a manner specific to the transform stream in question, writes to the writable side result in new data being\n * made available for reading from the readable side.\n *\n * @public\n */\nexport class TransformStream<I = any, O = any> {\n  /** @internal */\n  _writable!: WritableStream<I>;\n  /** @internal */\n  _readable!: DefaultReadableStream<O>;\n  /** @internal */\n  _backpressure!: boolean;\n  /** @internal */\n  _backpressureChangePromise!: Promise<void>;\n  /** @internal */\n  _backpressureChangePromise_resolve!: () => void;\n  /** @internal */\n  _transformStreamController!: TransformStreamDefaultController<O>;\n\n  constructor(\n    transformer?: Transformer<I, O>,\n    writableStrategy?: QueuingStrategy<I>,\n    readableStrategy?: QueuingStrategy<O>\n  );\n  constructor(rawTransformer: Transformer<I, O> | null | undefined = {},\n              rawWritableStrategy: QueuingStrategy<I> | null | undefined = {},\n              rawReadableStrategy: QueuingStrategy<O> | null | undefined = {}) {\n    if (rawTransformer === undefined) {\n      rawTransformer = null;\n    }\n\n    const writableStrategy = convertQueuingStrategy(rawWritableStrategy, 'Second parameter');\n    const readableStrategy = convertQueuingStrategy(rawReadableStrategy, 'Third parameter');\n\n    const transformer = convertTransformer(rawTransformer, 'First parameter');\n    if (transformer.readableType !== undefined) {\n      throw new RangeError('Invalid readableType specified');\n    }\n    if (transformer.writableType !== undefined) {\n      throw new RangeError('Invalid writableType specified');\n    }\n\n    const readableHighWaterMark = ExtractHighWaterMark(readableStrategy, 0);\n    const readableSizeAlgorithm = ExtractSizeAlgorithm(readableStrategy);\n    const writableHighWaterMark = ExtractHighWaterMark(writableStrategy, 1);\n    const writableSizeAlgorithm = ExtractSizeAlgorithm(writableStrategy);\n\n    let startPromise_resolve!: (value: void | PromiseLike<void>) => void;\n    const startPromise = newPromise<void>(resolve => {\n      startPromise_resolve = resolve;\n    });\n\n    InitializeTransformStream(\n      this, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark, readableSizeAlgorithm\n    );\n    SetUpTransformStreamDefaultControllerFromTransformer(this, transformer);\n\n    if (transformer.start !== undefined) {\n      startPromise_resolve(transformer.start(this._transformStreamController));\n    } else {\n      startPromise_resolve(undefined);\n    }\n  }\n\n  /**\n   * The readable side of the transform stream.\n   */\n  get readable(): ReadableStream<O> {\n    if (!IsTransformStream(this)) {\n      throw streamBrandCheckException('readable');\n    }\n\n    return this._readable;\n  }\n\n  /**\n   * The writable side of the transform stream.\n   */\n  get writable(): WritableStream<I> {\n    if (!IsTransformStream(this)) {\n      throw streamBrandCheckException('writable');\n    }\n\n    return this._writable;\n  }\n}\n\nObject.defineProperties(TransformStream.prototype, {\n  readable: { enumerable: true },\n  writable: { enumerable: true }\n});\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(TransformStream.prototype, Symbol.toStringTag, {\n    value: 'TransformStream',\n    configurable: true\n  });\n}\n\nexport type {\n  Transformer,\n  TransformerCancelCallback,\n  TransformerStartCallback,\n  TransformerFlushCallback,\n  TransformerTransformCallback\n};\n\n// Transform Stream Abstract Operations\n\nexport function CreateTransformStream<I, O>(startAlgorithm: () => void | PromiseLike<void>,\n                                            transformAlgorithm: (chunk: I) => Promise<void>,\n                                            flushAlgorithm: () => Promise<void>,\n                                            cancelAlgorithm: (reason: any) => Promise<void>,\n                                            writableHighWaterMark = 1,\n                                            writableSizeAlgorithm: QueuingStrategySizeCallback<I> = () => 1,\n                                            readableHighWaterMark = 0,\n                                            readableSizeAlgorithm: QueuingStrategySizeCallback<O> = () => 1) {\n  assert(IsNonNegativeNumber(writableHighWaterMark));\n  assert(IsNonNegativeNumber(readableHighWaterMark));\n\n  const stream: TransformStream<I, O> = Object.create(TransformStream.prototype);\n\n  let startPromise_resolve!: (value: void | PromiseLike<void>) => void;\n  const startPromise = newPromise<void>(resolve => {\n    startPromise_resolve = resolve;\n  });\n\n  InitializeTransformStream(stream, startPromise, writableHighWaterMark, writableSizeAlgorithm, readableHighWaterMark,\n                            readableSizeAlgorithm);\n\n  const controller: TransformStreamDefaultController<O> = Object.create(TransformStreamDefaultController.prototype);\n\n  SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm, cancelAlgorithm);\n\n  const startResult = startAlgorithm();\n  startPromise_resolve(startResult);\n  return stream;\n}\n\nfunction InitializeTransformStream<I, O>(stream: TransformStream<I, O>,\n                                         startPromise: Promise<void>,\n                                         writableHighWaterMark: number,\n                                         writableSizeAlgorithm: QueuingStrategySizeCallback<I>,\n                                         readableHighWaterMark: number,\n                                         readableSizeAlgorithm: QueuingStrategySizeCallback<O>) {\n  function startAlgorithm(): Promise<void> {\n    return startPromise;\n  }\n\n  function writeAlgorithm(chunk: I): Promise<void> {\n    return TransformStreamDefaultSinkWriteAlgorithm(stream, chunk);\n  }\n\n  function abortAlgorithm(reason: any): Promise<void> {\n    return TransformStreamDefaultSinkAbortAlgorithm(stream, reason);\n  }\n\n  function closeAlgorithm(): Promise<void> {\n    return TransformStreamDefaultSinkCloseAlgorithm(stream);\n  }\n\n  stream._writable = CreateWritableStream(startAlgorithm, writeAlgorithm, closeAlgorithm, abortAlgorithm,\n                                          writableHighWaterMark, writableSizeAlgorithm);\n\n  function pullAlgorithm(): Promise<void> {\n    return TransformStreamDefaultSourcePullAlgorithm(stream);\n  }\n\n  function cancelAlgorithm(reason: any): Promise<void> {\n    return TransformStreamDefaultSourceCancelAlgorithm(stream, reason);\n  }\n\n  stream._readable = CreateReadableStream(startAlgorithm, pullAlgorithm, cancelAlgorithm, readableHighWaterMark,\n                                          readableSizeAlgorithm);\n\n  // The [[backpressure]] slot is set to undefined so that it can be initialised by TransformStreamSetBackpressure.\n  stream._backpressure = undefined!;\n  stream._backpressureChangePromise = undefined!;\n  stream._backpressureChangePromise_resolve = undefined!;\n  TransformStreamSetBackpressure(stream, true);\n\n  stream._transformStreamController = undefined!;\n}\n\nfunction IsTransformStream(x: unknown): x is TransformStream {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_transformStreamController')) {\n    return false;\n  }\n\n  return x instanceof TransformStream;\n}\n\n// This is a no-op if both sides are already errored.\nfunction TransformStreamError(stream: TransformStream, e: any) {\n  ReadableStreamDefaultControllerError(stream._readable._readableStreamController, e);\n  TransformStreamErrorWritableAndUnblockWrite(stream, e);\n}\n\nfunction TransformStreamErrorWritableAndUnblockWrite(stream: TransformStream, e: any) {\n  TransformStreamDefaultControllerClearAlgorithms(stream._transformStreamController);\n  WritableStreamDefaultControllerErrorIfNeeded(stream._writable._writableStreamController, e);\n  TransformStreamUnblockWrite(stream);\n}\n\nfunction TransformStreamUnblockWrite(stream: TransformStream) {\n  if (stream._backpressure) {\n    // Pretend that pull() was called to permit any pending write() calls to complete. TransformStreamSetBackpressure()\n    // cannot be called from enqueue() or pull() once the ReadableStream is errored, so this will will be the final time\n    // _backpressure is set.\n    TransformStreamSetBackpressure(stream, false);\n  }\n}\n\nfunction TransformStreamSetBackpressure(stream: TransformStream, backpressure: boolean) {\n  // Passes also when called during construction.\n  assert(stream._backpressure !== backpressure);\n\n  if (stream._backpressureChangePromise !== undefined) {\n    stream._backpressureChangePromise_resolve();\n  }\n\n  stream._backpressureChangePromise = newPromise(resolve => {\n    stream._backpressureChangePromise_resolve = resolve;\n  });\n\n  stream._backpressure = backpressure;\n}\n\n// Class TransformStreamDefaultController\n\n/**\n * Allows control of the {@link ReadableStream} and {@link WritableStream} of the associated {@link TransformStream}.\n *\n * @public\n */\nexport class TransformStreamDefaultController<O> {\n  /** @internal */\n  _controlledTransformStream: TransformStream<any, O>;\n  /** @internal */\n  _finishPromise: Promise<undefined> | undefined;\n  /** @internal */\n  _finishPromise_resolve?: (value?: undefined) => void;\n  /** @internal */\n  _finishPromise_reject?: (reason: any) => void;\n  /** @internal */\n  _transformAlgorithm: (chunk: any) => Promise<void>;\n  /** @internal */\n  _flushAlgorithm: () => Promise<void>;\n  /** @internal */\n  _cancelAlgorithm: (reason: any) => Promise<void>;\n\n  private constructor() {\n    throw new TypeError('Illegal constructor');\n  }\n\n  /**\n   * Returns the desired size to fill the readable sides internal queue. It can be negative, if the queue is over-full.\n   */\n  get desiredSize(): number | null {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('desiredSize');\n    }\n\n    const readableController = this._controlledTransformStream._readable._readableStreamController;\n    return ReadableStreamDefaultControllerGetDesiredSize(readableController);\n  }\n\n  /**\n   * Enqueues the given chunk `chunk` in the readable side of the controlled transform stream.\n   */\n  enqueue(chunk: O): void;\n  enqueue(chunk: O = undefined!): void {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('enqueue');\n    }\n\n    TransformStreamDefaultControllerEnqueue(this, chunk);\n  }\n\n  /**\n   * Errors both the readable side and the writable side of the controlled transform stream, making all future\n   * interactions with it fail with the given error `e`. Any chunks queued for transformation will be discarded.\n   */\n  error(reason: any = undefined): void {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('error');\n    }\n\n    TransformStreamDefaultControllerError(this, reason);\n  }\n\n  /**\n   * Closes the readable side and errors the writable side of the controlled transform stream. This is useful when the\n   * transformer only needs to consume a portion of the chunks written to the writable side.\n   */\n  terminate(): void {\n    if (!IsTransformStreamDefaultController(this)) {\n      throw defaultControllerBrandCheckException('terminate');\n    }\n\n    TransformStreamDefaultControllerTerminate(this);\n  }\n}\n\nObject.defineProperties(TransformStreamDefaultController.prototype, {\n  enqueue: { enumerable: true },\n  error: { enumerable: true },\n  terminate: { enumerable: true },\n  desiredSize: { enumerable: true }\n});\nsetFunctionName(TransformStreamDefaultController.prototype.enqueue, 'enqueue');\nsetFunctionName(TransformStreamDefaultController.prototype.error, 'error');\nsetFunctionName(TransformStreamDefaultController.prototype.terminate, 'terminate');\nif (typeof Symbol.toStringTag === 'symbol') {\n  Object.defineProperty(TransformStreamDefaultController.prototype, Symbol.toStringTag, {\n    value: 'TransformStreamDefaultController',\n    configurable: true\n  });\n}\n\n// Transform Stream Default Controller Abstract Operations\n\nfunction IsTransformStreamDefaultController<O = any>(x: any): x is TransformStreamDefaultController<O> {\n  if (!typeIsObject(x)) {\n    return false;\n  }\n\n  if (!Object.prototype.hasOwnProperty.call(x, '_controlledTransformStream')) {\n    return false;\n  }\n\n  return x instanceof TransformStreamDefaultController;\n}\n\nfunction SetUpTransformStreamDefaultController<I, O>(stream: TransformStream<I, O>,\n                                                     controller: TransformStreamDefaultController<O>,\n                                                     transformAlgorithm: (chunk: I) => Promise<void>,\n                                                     flushAlgorithm: () => Promise<void>,\n                                                     cancelAlgorithm: (reason: any) => Promise<void>) {\n  assert(IsTransformStream(stream));\n  assert(stream._transformStreamController === undefined);\n\n  controller._controlledTransformStream = stream;\n  stream._transformStreamController = controller;\n\n  controller._transformAlgorithm = transformAlgorithm;\n  controller._flushAlgorithm = flushAlgorithm;\n  controller._cancelAlgorithm = cancelAlgorithm;\n\n  controller._finishPromise = undefined;\n  controller._finishPromise_resolve = undefined;\n  controller._finishPromise_reject = undefined;\n}\n\nfunction SetUpTransformStreamDefaultControllerFromTransformer<I, O>(stream: TransformStream<I, O>,\n                                                                    transformer: ValidatedTransformer<I, O>) {\n  const controller: TransformStreamDefaultController<O> = Object.create(TransformStreamDefaultController.prototype);\n\n  let transformAlgorithm: (chunk: I) => Promise<void>;\n  let flushAlgorithm: () => Promise<void>;\n  let cancelAlgorithm: (reason: any) => Promise<void>;\n\n  if (transformer.transform !== undefined) {\n    transformAlgorithm = chunk => transformer.transform!(chunk, controller);\n  } else {\n    transformAlgorithm = chunk => {\n      try {\n        TransformStreamDefaultControllerEnqueue(controller, chunk as unknown as O);\n        return promiseResolvedWith(undefined);\n      } catch (transformResultE) {\n        return promiseRejectedWith(transformResultE);\n      }\n    };\n  }\n\n  if (transformer.flush !== undefined) {\n    flushAlgorithm = () => transformer.flush!(controller);\n  } else {\n    flushAlgorithm = () => promiseResolvedWith(undefined);\n  }\n\n  if (transformer.cancel !== undefined) {\n    cancelAlgorithm = reason => transformer.cancel!(reason);\n  } else {\n    cancelAlgorithm = () => promiseResolvedWith(undefined);\n  }\n\n  SetUpTransformStreamDefaultController(stream, controller, transformAlgorithm, flushAlgorithm, cancelAlgorithm);\n}\n\nfunction TransformStreamDefaultControllerClearAlgorithms(controller: TransformStreamDefaultController<any>) {\n  controller._transformAlgorithm = undefined!;\n  controller._flushAlgorithm = undefined!;\n  controller._cancelAlgorithm = undefined!;\n}\n\nfunction TransformStreamDefaultControllerEnqueue<O>(controller: TransformStreamDefaultController<O>, chunk: O) {\n  const stream = controller._controlledTransformStream;\n  const readableController = stream._readable._readableStreamController;\n  if (!ReadableStreamDefaultControllerCanCloseOrEnqueue(readableController)) {\n    throw new TypeError('Readable side is not in a state that permits enqueue');\n  }\n\n  // We throttle transform invocations based on the backpressure of the ReadableStream, but we still\n  // accept TransformStreamDefaultControllerEnqueue() calls.\n\n  try {\n    ReadableStreamDefaultControllerEnqueue(readableController, chunk);\n  } catch (e) {\n    // This happens when readableStrategy.size() throws.\n    TransformStreamErrorWritableAndUnblockWrite(stream, e);\n\n    throw stream._readable._storedError;\n  }\n\n  const backpressure = ReadableStreamDefaultControllerHasBackpressure(readableController);\n  if (backpressure !== stream._backpressure) {\n    assert(backpressure);\n    TransformStreamSetBackpressure(stream, true);\n  }\n}\n\nfunction TransformStreamDefaultControllerError(controller: TransformStreamDefaultController<any>, e: any) {\n  TransformStreamError(controller._controlledTransformStream, e);\n}\n\nfunction TransformStreamDefaultControllerPerformTransform<I, O>(controller: TransformStreamDefaultController<O>,\n                                                                chunk: I) {\n  const transformPromise = controller._transformAlgorithm(chunk);\n  return transformPromiseWith(transformPromise, undefined, r => {\n    TransformStreamError(controller._controlledTransformStream, r);\n    throw r;\n  });\n}\n\nfunction TransformStreamDefaultControllerTerminate<O>(controller: TransformStreamDefaultController<O>) {\n  const stream = controller._controlledTransformStream;\n  const readableController = stream._readable._readableStreamController;\n\n  ReadableStreamDefaultControllerClose(readableController);\n\n  const error = new TypeError('TransformStream terminated');\n  TransformStreamErrorWritableAndUnblockWrite(stream, error);\n}\n\n// TransformStreamDefaultSink Algorithms\n\nfunction TransformStreamDefaultSinkWriteAlgorithm<I, O>(stream: TransformStream<I, O>, chunk: I): Promise<void> {\n  assert(stream._writable._state === 'writable');\n\n  const controller = stream._transformStreamController;\n\n  if (stream._backpressure) {\n    const backpressureChangePromise = stream._backpressureChangePromise;\n    assert(backpressureChangePromise !== undefined);\n    return transformPromiseWith(backpressureChangePromise, () => {\n      const writable = stream._writable;\n      const state = writable._state;\n      if (state === 'erroring') {\n        throw writable._storedError;\n      }\n      assert(state === 'writable');\n      return TransformStreamDefaultControllerPerformTransform<I, O>(controller, chunk);\n    });\n  }\n\n  return TransformStreamDefaultControllerPerformTransform<I, O>(controller, chunk);\n}\n\nfunction TransformStreamDefaultSinkAbortAlgorithm<I, O>(stream: TransformStream<I, O>, reason: any): Promise<void> {\n  const controller = stream._transformStreamController;\n  if (controller._finishPromise !== undefined) {\n    return controller._finishPromise;\n  }\n\n  // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n  const readable = stream._readable;\n\n  // Assign the _finishPromise now so that if _cancelAlgorithm calls readable.cancel() internally,\n  // we don't run the _cancelAlgorithm again.\n  controller._finishPromise = newPromise((resolve, reject) => {\n    controller._finishPromise_resolve = resolve;\n    controller._finishPromise_reject = reject;\n  });\n\n  const cancelPromise = controller._cancelAlgorithm(reason);\n  TransformStreamDefaultControllerClearAlgorithms(controller);\n\n  uponPromise(cancelPromise, () => {\n    if (readable._state === 'errored') {\n      defaultControllerFinishPromiseReject(controller, readable._storedError);\n    } else {\n      ReadableStreamDefaultControllerError(readable._readableStreamController, reason);\n      defaultControllerFinishPromiseResolve(controller);\n    }\n    return null;\n  }, r => {\n    ReadableStreamDefaultControllerError(readable._readableStreamController, r);\n    defaultControllerFinishPromiseReject(controller, r);\n    return null;\n  });\n\n  return controller._finishPromise;\n}\n\nfunction TransformStreamDefaultSinkCloseAlgorithm<I, O>(stream: TransformStream<I, O>): Promise<void> {\n  const controller = stream._transformStreamController;\n  if (controller._finishPromise !== undefined) {\n    return controller._finishPromise;\n  }\n\n  // stream._readable cannot change after construction, so caching it across a call to user code is safe.\n  const readable = stream._readable;\n\n  // Assign the _finishPromise now so that if _flushAlgorithm calls readable.cancel() internally,\n  // we don't also run the _cancelAlgorithm.\n  controller._finishPromise = newPromise((resolve, reject) => {\n    controller._finishPromise_resolve = resolve;\n    controller._finishPromise_reject = reject;\n  });\n\n  const flushPromise = controller._flushAlgorithm();\n  TransformStreamDefaultControllerClearAlgorithms(controller);\n\n  uponPromise(flushPromise, () => {\n    if (readable._state === 'errored') {\n      defaultControllerFinishPromiseReject(controller, readable._storedError);\n    } else {\n      ReadableStreamDefaultControllerClose(readable._readableStreamController);\n      defaultControllerFinishPromiseResolve(controller);\n    }\n    return null;\n  }, r => {\n    ReadableStreamDefaultControllerError(readable._readableStreamController, r);\n    defaultControllerFinishPromiseReject(controller, r);\n    return null;\n  });\n\n  return controller._finishPromise;\n}\n\n// TransformStreamDefaultSource Algorithms\n\nfunction TransformStreamDefaultSourcePullAlgorithm(stream: TransformStream): Promise<void> {\n  // Invariant. Enforced by the promises returned by start() and pull().\n  assert(stream._backpressure);\n\n  assert(stream._backpressureChangePromise !== undefined);\n\n  TransformStreamSetBackpressure(stream, false);\n\n  // Prevent the next pull() call until there is backpressure.\n  return stream._backpressureChangePromise;\n}\n\nfunction TransformStreamDefaultSourceCancelAlgorithm<I, O>(stream: TransformStream<I, O>, reason: any): Promise<void> {\n  const controller = stream._transformStreamController;\n  if (controller._finishPromise !== undefined) {\n    return controller._finishPromise;\n  }\n\n  // stream._writable cannot change after construction, so caching it across a call to user code is safe.\n  const writable = stream._writable;\n\n  // Assign the _finishPromise now so that if _flushAlgorithm calls writable.abort() or\n  // writable.cancel() internally, we don't run the _cancelAlgorithm again, or also run the\n  // _flushAlgorithm.\n  controller._finishPromise = newPromise((resolve, reject) => {\n    controller._finishPromise_resolve = resolve;\n    controller._finishPromise_reject = reject;\n  });\n\n  const cancelPromise = controller._cancelAlgorithm(reason);\n  TransformStreamDefaultControllerClearAlgorithms(controller);\n\n  uponPromise(cancelPromise, () => {\n    if (writable._state === 'errored') {\n      defaultControllerFinishPromiseReject(controller, writable._storedError);\n    } else {\n      WritableStreamDefaultControllerErrorIfNeeded(writable._writableStreamController, reason);\n      TransformStreamUnblockWrite(stream);\n      defaultControllerFinishPromiseResolve(controller);\n    }\n    return null;\n  }, r => {\n    WritableStreamDefaultControllerErrorIfNeeded(writable._writableStreamController, r);\n    TransformStreamUnblockWrite(stream);\n    defaultControllerFinishPromiseReject(controller, r);\n    return null;\n  });\n\n  return controller._finishPromise;\n}\n\n// Helper functions for the TransformStreamDefaultController.\n\nfunction defaultControllerBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `TransformStreamDefaultController.prototype.${name} can only be used on a TransformStreamDefaultController`);\n}\n\nexport function defaultControllerFinishPromiseResolve(controller: TransformStreamDefaultController<any>) {\n  if (controller._finishPromise_resolve === undefined) {\n    return;\n  }\n\n  controller._finishPromise_resolve();\n  controller._finishPromise_resolve = undefined;\n  controller._finishPromise_reject = undefined;\n}\n\nexport function defaultControllerFinishPromiseReject(controller: TransformStreamDefaultController<any>, reason: any) {\n  if (controller._finishPromise_reject === undefined) {\n    return;\n  }\n\n  setPromiseIsHandledToTrue(controller._finishPromise!);\n  controller._finishPromise_reject(reason);\n  controller._finishPromise_resolve = undefined;\n  controller._finishPromise_reject = undefined;\n}\n\n// Helper functions for the TransformStream.\n\nfunction streamBrandCheckException(name: string): TypeError {\n  return new TypeError(\n    `TransformStream.prototype.${name} can only be used on a TransformStream`);\n}\n", "/* c8 ignore start */\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\nif (!globalThis.ReadableStream) {\n  // `node:stream/web` got introduced in v16.5.0 as experimental\n  // and it's preferred over the polyfilled version. So we also\n  // suppress the warning that gets emitted by NodeJS for using it.\n  try {\n    const process = require('node:process')\n    const { emitWarning } = process\n    try {\n      process.emitWarning = () => {}\n      Object.assign(globalThis, require('node:stream/web'))\n      process.emitWarning = emitWarning\n    } catch (error) {\n      process.emitWarning = emitWarning\n      throw error\n    }\n  } catch (error) {\n    // fallback to polyfill implementation\n    Object.assign(globalThis, require('web-streams-polyfill/dist/ponyfill.es2018.js'))\n  }\n}\n\ntry {\n  // Don't use node: prefix for this, require+node: is not supported until node v14.14\n  // Only `import()` can use prefix in 12.20 and later\n  const { Blob } = require('buffer')\n  if (Blob && !Blob.prototype.stream) {\n    Blob.prototype.stream = function name (params) {\n      let position = 0\n      const blob = this\n\n      return new ReadableStream({\n        type: 'bytes',\n        async pull (ctrl) {\n          const chunk = blob.slice(position, Math.min(blob.size, position + POOL_SIZE))\n          const buffer = await chunk.arrayBuffer()\n          position += buffer.byteLength\n          ctrl.enqueue(new Uint8Array(buffer))\n\n          if (position === blob.size) {\n            ctrl.close()\n          }\n        }\n      })\n    }\n  }\n} catch (error) {}\n/* c8 ignore end */\n", "/*! fetch-blob. MIT License. Jimmy W\u00E4rting <https://jimmy.warting.se/opensource> */\n\n// TODO (jimmywarting): in the feature use conditional loading with top level await (requires 14.x)\n// Node has recently added whatwg stream into core\n\nimport './streams.cjs'\n\n// 64 KiB (same size chrome slice theirs blob into Uint8array's)\nconst POOL_SIZE = 65536\n\n/** @param {(Blob | Uint8Array)[]} parts */\nasync function * toIterator (parts, clone = true) {\n  for (const part of parts) {\n    if ('stream' in part) {\n      yield * (/** @type {AsyncIterableIterator<Uint8Array>} */ (part.stream()))\n    } else if (ArrayBuffer.isView(part)) {\n      if (clone) {\n        let position = part.byteOffset\n        const end = part.byteOffset + part.byteLength\n        while (position !== end) {\n          const size = Math.min(end - position, POOL_SIZE)\n          const chunk = part.buffer.slice(position, position + size)\n          position += chunk.byteLength\n          yield new Uint8Array(chunk)\n        }\n      } else {\n        yield part\n      }\n    /* c8 ignore next 10 */\n    } else {\n      // For blobs that have arrayBuffer but no stream method (nodes buffer.Blob)\n      let position = 0, b = (/** @type {Blob} */ (part))\n      while (position !== b.size) {\n        const chunk = b.slice(position, Math.min(b.size, position + POOL_SIZE))\n        const buffer = await chunk.arrayBuffer()\n        position += buffer.byteLength\n        yield new Uint8Array(buffer)\n      }\n    }\n  }\n}\n\nconst _Blob = class Blob {\n  /** @type {Array.<(Blob|Uint8Array)>} */\n  #parts = []\n  #type = ''\n  #size = 0\n  #endings = 'transparent'\n\n  /**\n   * The Blob() constructor returns a new Blob object. The content\n   * of the blob consists of the concatenation of the values given\n   * in the parameter array.\n   *\n   * @param {*} blobParts\n   * @param {{ type?: string, endings?: string }} [options]\n   */\n  constructor (blobParts = [], options = {}) {\n    if (typeof blobParts !== 'object' || blobParts === null) {\n      throw new TypeError('Failed to construct \\'Blob\\': The provided value cannot be converted to a sequence.')\n    }\n\n    if (typeof blobParts[Symbol.iterator] !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': The object must have a callable @@iterator property.')\n    }\n\n    if (typeof options !== 'object' && typeof options !== 'function') {\n      throw new TypeError('Failed to construct \\'Blob\\': parameter 2 cannot convert to dictionary.')\n    }\n\n    if (options === null) options = {}\n\n    const encoder = new TextEncoder()\n    for (const element of blobParts) {\n      let part\n      if (ArrayBuffer.isView(element)) {\n        part = new Uint8Array(element.buffer.slice(element.byteOffset, element.byteOffset + element.byteLength))\n      } else if (element instanceof ArrayBuffer) {\n        part = new Uint8Array(element.slice(0))\n      } else if (element instanceof Blob) {\n        part = element\n      } else {\n        part = encoder.encode(`${element}`)\n      }\n\n      this.#size += ArrayBuffer.isView(part) ? part.byteLength : part.size\n      this.#parts.push(part)\n    }\n\n    this.#endings = `${options.endings === undefined ? 'transparent' : options.endings}`\n    const type = options.type === undefined ? '' : String(options.type)\n    this.#type = /^[\\x20-\\x7E]*$/.test(type) ? type : ''\n  }\n\n  /**\n   * The Blob interface's size property returns the\n   * size of the Blob in bytes.\n   */\n  get size () {\n    return this.#size\n  }\n\n  /**\n   * The type property of a Blob object returns the MIME type of the file.\n   */\n  get type () {\n    return this.#type\n  }\n\n  /**\n   * The text() method in the Blob interface returns a Promise\n   * that resolves with a string containing the contents of\n   * the blob, interpreted as UTF-8.\n   *\n   * @return {Promise<string>}\n   */\n  async text () {\n    // More optimized than using this.arrayBuffer()\n    // that requires twice as much ram\n    const decoder = new TextDecoder()\n    let str = ''\n    for await (const part of toIterator(this.#parts, false)) {\n      str += decoder.decode(part, { stream: true })\n    }\n    // Remaining\n    str += decoder.decode()\n    return str\n  }\n\n  /**\n   * The arrayBuffer() method in the Blob interface returns a\n   * Promise that resolves with the contents of the blob as\n   * binary data contained in an ArrayBuffer.\n   *\n   * @return {Promise<ArrayBuffer>}\n   */\n  async arrayBuffer () {\n    // Easier way... Just a unnecessary overhead\n    // const view = new Uint8Array(this.size);\n    // await this.stream().getReader({mode: 'byob'}).read(view);\n    // return view.buffer;\n\n    const data = new Uint8Array(this.size)\n    let offset = 0\n    for await (const chunk of toIterator(this.#parts, false)) {\n      data.set(chunk, offset)\n      offset += chunk.length\n    }\n\n    return data.buffer\n  }\n\n  stream () {\n    const it = toIterator(this.#parts, true)\n\n    return new globalThis.ReadableStream({\n      // @ts-ignore\n      type: 'bytes',\n      async pull (ctrl) {\n        const chunk = await it.next()\n        chunk.done ? ctrl.close() : ctrl.enqueue(chunk.value)\n      },\n\n      async cancel () {\n        await it.return()\n      }\n    })\n  }\n\n  /**\n   * The Blob interface's slice() method creates and returns a\n   * new Blob object which contains data from a subset of the\n   * blob on which it's called.\n   *\n   * @param {number} [start]\n   * @param {number} [end]\n   * @param {string} [type]\n   */\n  slice (start = 0, end = this.size, type = '') {\n    const { size } = this\n\n    let relativeStart = start < 0 ? Math.max(size + start, 0) : Math.min(start, size)\n    let relativeEnd = end < 0 ? Math.max(size + end, 0) : Math.min(end, size)\n\n    const span = Math.max(relativeEnd - relativeStart, 0)\n    const parts = this.#parts\n    const blobParts = []\n    let added = 0\n\n    for (const part of parts) {\n      // don't add the overflow to new blobParts\n      if (added >= span) {\n        break\n      }\n\n      const size = ArrayBuffer.isView(part) ? part.byteLength : part.size\n      if (relativeStart && size <= relativeStart) {\n        // Skip the beginning and change the relative\n        // start & end position as we skip the unwanted parts\n        relativeStart -= size\n        relativeEnd -= size\n      } else {\n        let chunk\n        if (ArrayBuffer.isView(part)) {\n          chunk = part.subarray(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.byteLength\n        } else {\n          chunk = part.slice(relativeStart, Math.min(size, relativeEnd))\n          added += chunk.size\n        }\n        relativeEnd -= size\n        blobParts.push(chunk)\n        relativeStart = 0 // All next sequential parts should start at 0\n      }\n    }\n\n    const blob = new Blob([], { type: String(type).toLowerCase() })\n    blob.#size = span\n    blob.#parts = blobParts\n\n    return blob\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return (\n      object &&\n      typeof object === 'object' &&\n      typeof object.constructor === 'function' &&\n      (\n        typeof object.stream === 'function' ||\n        typeof object.arrayBuffer === 'function'\n      ) &&\n      /^(Blob|File)$/.test(object[Symbol.toStringTag])\n    )\n  }\n}\n\nObject.defineProperties(_Blob.prototype, {\n  size: { enumerable: true },\n  type: { enumerable: true },\n  slice: { enumerable: true }\n})\n\n/** @type {typeof globalThis.Blob} */\nexport const Blob = _Blob\nexport default Blob\n", "import Blob from './index.js'\n\nconst _File = class File extends Blob {\n  #lastModified = 0\n  #name = ''\n\n  /**\n   * @param {*[]} fileBits\n   * @param {string} fileName\n   * @param {{lastModified?: number, type?: string}} options\n   */// @ts-ignore\n  constructor (fileBits, fileName, options = {}) {\n    if (arguments.length < 2) {\n      throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`)\n    }\n    super(fileBits, options)\n\n    if (options === null) options = {}\n\n    // Simulate WebIDL type casting for NaN value in lastModified option.\n    const lastModified = options.lastModified === undefined ? Date.now() : Number(options.lastModified)\n    if (!Number.isNaN(lastModified)) {\n      this.#lastModified = lastModified\n    }\n\n    this.#name = String(fileName)\n  }\n\n  get name () {\n    return this.#name\n  }\n\n  get lastModified () {\n    return this.#lastModified\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'File'\n  }\n\n  static [Symbol.hasInstance] (object) {\n    return !!object && object instanceof Blob &&\n      /^(File)$/.test(object[Symbol.toStringTag])\n  }\n}\n\n/** @type {typeof globalThis.File} */// @ts-ignore\nexport const File = _File\nexport default File\n", "/*! formdata-polyfill. MIT License. Jimmy W\u00E4rting <https://jimmy.warting.se/opensource> */\n\nimport C from 'fetch-blob'\nimport F from 'fetch-blob/file.js'\n\nvar {toStringTag:t,iterator:i,hasInstance:h}=Symbol,\nr=Math.random,\nm='append,set,get,getAll,delete,keys,values,entries,forEach,constructor'.split(','),\nf=(a,b,c)=>(a+='',/^(Blob|File)$/.test(b && b[t])?[(c=c!==void 0?c+'':b[t]=='File'?b.name:'blob',a),b.name!==c||b[t]=='blob'?new F([b],c,b):b]:[a,b+'']),\ne=(c,f)=>(f?c:c.replace(/\\r?\\n|\\r/g,'\\r\\n')).replace(/\\n/g,'%0A').replace(/\\r/g,'%0D').replace(/\"/g,'%22'),\nx=(n, a, e)=>{if(a.length<e){throw new TypeError(`Failed to execute '${n}' on 'FormData': ${e} arguments required, but only ${a.length} present.`)}}\n\nexport const File = F\n\n/** @type {typeof globalThis.FormData} */\nexport const FormData = class FormData {\n#d=[];\nconstructor(...a){if(a.length)throw new TypeError(`Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.`)}\nget [t]() {return 'FormData'}\n[i](){return this.entries()}\nstatic [h](o) {return o&&typeof o==='object'&&o[t]==='FormData'&&!m.some(m=>typeof o[m]!='function')}\nappend(...a){x('append',arguments,2);this.#d.push(f(...a))}\ndelete(a){x('delete',arguments,1);a+='';this.#d=this.#d.filter(([b])=>b!==a)}\nget(a){x('get',arguments,1);a+='';for(var b=this.#d,l=b.length,c=0;c<l;c++)if(b[c][0]===a)return b[c][1];return null}\ngetAll(a,b){x('getAll',arguments,1);b=[];a+='';this.#d.forEach(c=>c[0]===a&&b.push(c[1]));return b}\nhas(a){x('has',arguments,1);a+='';return this.#d.some(b=>b[0]===a)}\nforEach(a,b){x('forEach',arguments,1);for(var [c,d]of this)a.call(b,d,c,this)}\nset(...a){x('set',arguments,2);var b=[],c=!0;a=f(...a);this.#d.forEach(d=>{d[0]===a[0]?c&&(c=!b.push(a)):b.push(d)});c&&b.push(a);this.#d=b}\n*entries(){yield*this.#d}\n*keys(){for(var[a]of this)yield a}\n*values(){for(var[,a]of this)yield a}}\n\n/** @param {FormData} F */\nexport function formDataToBlob (F,B=C){\nvar b=`${r()}${r()}`.replace(/\\./g, '').slice(-28).padStart(32, '-'),c=[],p=`--${b}\\r\\nContent-Disposition: form-data; name=\"`\nF.forEach((v,n)=>typeof v=='string'\n?c.push(p+e(n)+`\"\\r\\n\\r\\n${v.replace(/\\r(?!\\n)|(?<!\\r)\\n/g, '\\r\\n')}\\r\\n`)\n:c.push(p+e(n)+`\"; filename=\"${e(v.name, 1)}\"\\r\\nContent-Type: ${v.type||\"application/octet-stream\"}\\r\\n\\r\\n`, v, '\\r\\n'))\nc.push(`--${b}--`)\nreturn new B(c,{type:\"multipart/form-data; boundary=\"+b})}\n", "/*! node-domexception. MIT License. Jimmy W\u00E4rting <https://jimmy.warting.se/opensource> */\n\nif (!globalThis.DOMException) {\n  try {\n    const { MessageChannel } = require('worker_threads'),\n    port = new MessageChannel().port1,\n    ab = new ArrayBuffer()\n    port.postMessage(ab, [ab, ab])\n  } catch (err) {\n    err.constructor.name === 'DOMException' && (\n      globalThis.DOMException = err.constructor\n    )\n  }\n}\n\nmodule.exports = globalThis.DOMException\n", "import { statSync, createReadStream, promises as fs } from 'node:fs'\nimport { basename } from 'node:path'\nimport DOMException from 'node-domexception'\n\nimport File from './file.js'\nimport Blob from './index.js'\n\nconst { stat } = fs\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst blobFromSync = (path, type) => fromBlob(statSync(path), path, type)\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<Blob>}\n */\nconst blobFrom = (path, type) => stat(path).then(stat => fromBlob(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n * @returns {Promise<File>}\n */\nconst fileFrom = (path, type) => stat(path).then(stat => fromFile(stat, path, type))\n\n/**\n * @param {string} path filepath on the disk\n * @param {string} [type] mimetype to use\n */\nconst fileFromSync = (path, type) => fromFile(statSync(path), path, type)\n\n// @ts-ignore\nconst fromBlob = (stat, path, type = '') => new Blob([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], { type })\n\n// @ts-ignore\nconst fromFile = (stat, path, type = '') => new File([new BlobDataItem({\n  path,\n  size: stat.size,\n  lastModified: stat.mtimeMs,\n  start: 0\n})], basename(path), { type, lastModified: stat.mtimeMs })\n\n/**\n * This is a blob backed up by a file on the disk\n * with minium requirement. Its wrapped around a Blob as a blobPart\n * so you have no direct access to this.\n *\n * @private\n */\nclass BlobDataItem {\n  #path\n  #start\n\n  constructor (options) {\n    this.#path = options.path\n    this.#start = options.start\n    this.size = options.size\n    this.lastModified = options.lastModified\n  }\n\n  /**\n   * Slicing arguments is first validated and formatted\n   * to not be out of range by Blob.prototype.slice\n   */\n  slice (start, end) {\n    return new BlobDataItem({\n      path: this.#path,\n      lastModified: this.lastModified,\n      size: end - start,\n      start: this.#start + start\n    })\n  }\n\n  async * stream () {\n    const { mtimeMs } = await stat(this.#path)\n    if (mtimeMs > this.lastModified) {\n      throw new DOMException('The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.', 'NotReadableError')\n    }\n    yield * createReadStream(this.#path, {\n      start: this.#start,\n      end: this.#start + this.size - 1\n    })\n  }\n\n  get [Symbol.toStringTag] () {\n    return 'Blob'\n  }\n}\n\nexport default blobFromSync\nexport { File, Blob, blobFrom, blobFromSync, fileFrom, fileFromSync }\n", "import {File} from 'fetch-blob/from.js';\nimport {FormData} from 'formdata-polyfill/esm.min.js';\n\nlet s = 0;\nconst S = {\n\tSTART_BOUNDARY: s++,\n\tHEADER_FIELD_START: s++,\n\tHEADER_FIELD: s++,\n\tHEADER_VALUE_START: s++,\n\tHEADER_VALUE: s++,\n\tHEADER_VALUE_ALMOST_DONE: s++,\n\tHEADERS_ALMOST_DONE: s++,\n\tPART_DATA_START: s++,\n\tPART_DATA: s++,\n\tEND: s++\n};\n\nlet f = 1;\nconst F = {\n\tPART_BOUNDARY: f,\n\tLAST_BOUNDARY: f *= 2\n};\n\nconst LF = 10;\nconst CR = 13;\nconst SPACE = 32;\nconst HYPHEN = 45;\nconst COLON = 58;\nconst A = 97;\nconst Z = 122;\n\nconst lower = c => c | 0x20;\n\nconst noop = () => {};\n\nclass MultipartParser {\n\t/**\n\t * @param {string} boundary\n\t */\n\tconstructor(boundary) {\n\t\tthis.index = 0;\n\t\tthis.flags = 0;\n\n\t\tthis.onHeaderEnd = noop;\n\t\tthis.onHeaderField = noop;\n\t\tthis.onHeadersEnd = noop;\n\t\tthis.onHeaderValue = noop;\n\t\tthis.onPartBegin = noop;\n\t\tthis.onPartData = noop;\n\t\tthis.onPartEnd = noop;\n\n\t\tthis.boundaryChars = {};\n\n\t\tboundary = '\\r\\n--' + boundary;\n\t\tconst ui8a = new Uint8Array(boundary.length);\n\t\tfor (let i = 0; i < boundary.length; i++) {\n\t\t\tui8a[i] = boundary.charCodeAt(i);\n\t\t\tthis.boundaryChars[ui8a[i]] = true;\n\t\t}\n\n\t\tthis.boundary = ui8a;\n\t\tthis.lookbehind = new Uint8Array(this.boundary.length + 8);\n\t\tthis.state = S.START_BOUNDARY;\n\t}\n\n\t/**\n\t * @param {Uint8Array} data\n\t */\n\twrite(data) {\n\t\tlet i = 0;\n\t\tconst length_ = data.length;\n\t\tlet previousIndex = this.index;\n\t\tlet {lookbehind, boundary, boundaryChars, index, state, flags} = this;\n\t\tconst boundaryLength = this.boundary.length;\n\t\tconst boundaryEnd = boundaryLength - 1;\n\t\tconst bufferLength = data.length;\n\t\tlet c;\n\t\tlet cl;\n\n\t\tconst mark = name => {\n\t\t\tthis[name + 'Mark'] = i;\n\t\t};\n\n\t\tconst clear = name => {\n\t\t\tdelete this[name + 'Mark'];\n\t\t};\n\n\t\tconst callback = (callbackSymbol, start, end, ui8a) => {\n\t\t\tif (start === undefined || start !== end) {\n\t\t\t\tthis[callbackSymbol](ui8a && ui8a.subarray(start, end));\n\t\t\t}\n\t\t};\n\n\t\tconst dataCallback = (name, clear) => {\n\t\t\tconst markSymbol = name + 'Mark';\n\t\t\tif (!(markSymbol in this)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (clear) {\n\t\t\t\tcallback(name, this[markSymbol], i, data);\n\t\t\t\tdelete this[markSymbol];\n\t\t\t} else {\n\t\t\t\tcallback(name, this[markSymbol], data.length, data);\n\t\t\t\tthis[markSymbol] = 0;\n\t\t\t}\n\t\t};\n\n\t\tfor (i = 0; i < length_; i++) {\n\t\t\tc = data[i];\n\n\t\t\tswitch (state) {\n\t\t\t\tcase S.START_BOUNDARY:\n\t\t\t\t\tif (index === boundary.length - 2) {\n\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else if (c !== CR) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (index - 1 === boundary.length - 2) {\n\t\t\t\t\t\tif (flags & F.LAST_BOUNDARY && c === HYPHEN) {\n\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t} else if (!(flags & F.LAST_BOUNDARY) && c === LF) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c !== boundary[index + 2]) {\n\t\t\t\t\t\tindex = -2;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === boundary[index + 2]) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_FIELD_START:\n\t\t\t\t\tstate = S.HEADER_FIELD;\n\t\t\t\t\tmark('onHeaderField');\n\t\t\t\t\tindex = 0;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_FIELD:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tclear('onHeaderField');\n\t\t\t\t\t\tstate = S.HEADERS_ALMOST_DONE;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tindex++;\n\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (c === COLON) {\n\t\t\t\t\t\tif (index === 1) {\n\t\t\t\t\t\t\t// empty header field\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdataCallback('onHeaderField', true);\n\t\t\t\t\t\tstate = S.HEADER_VALUE_START;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tcl = lower(c);\n\t\t\t\t\tif (cl < A || cl > Z) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_START:\n\t\t\t\t\tif (c === SPACE) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tmark('onHeaderValue');\n\t\t\t\t\tstate = S.HEADER_VALUE;\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.HEADER_VALUE:\n\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\tdataCallback('onHeaderValue', true);\n\t\t\t\t\t\tcallback('onHeaderEnd');\n\t\t\t\t\t\tstate = S.HEADER_VALUE_ALMOST_DONE;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADER_VALUE_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.HEADERS_ALMOST_DONE:\n\t\t\t\t\tif (c !== LF) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback('onHeadersEnd');\n\t\t\t\t\tstate = S.PART_DATA_START;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.PART_DATA_START:\n\t\t\t\t\tstate = S.PART_DATA;\n\t\t\t\t\tmark('onPartData');\n\t\t\t\t\t// falls through\n\t\t\t\tcase S.PART_DATA:\n\t\t\t\t\tpreviousIndex = index;\n\n\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t// boyer-moore derrived algorithm to safely skip non-boundary data\n\t\t\t\t\t\ti += boundaryEnd;\n\t\t\t\t\t\twhile (i < bufferLength && !(data[i] in boundaryChars)) {\n\t\t\t\t\t\t\ti += boundaryLength;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti -= boundaryEnd;\n\t\t\t\t\t\tc = data[i];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index < boundary.length) {\n\t\t\t\t\t\tif (boundary[index] === c) {\n\t\t\t\t\t\t\tif (index === 0) {\n\t\t\t\t\t\t\t\tdataCallback('onPartData', true);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index === boundary.length) {\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t\tif (c === CR) {\n\t\t\t\t\t\t\t// CR = part boundary\n\t\t\t\t\t\t\tflags |= F.PART_BOUNDARY;\n\t\t\t\t\t\t} else if (c === HYPHEN) {\n\t\t\t\t\t\t\t// HYPHEN = end boundary\n\t\t\t\t\t\t\tflags |= F.LAST_BOUNDARY;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (index - 1 === boundary.length) {\n\t\t\t\t\t\tif (flags & F.PART_BOUNDARY) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\tif (c === LF) {\n\t\t\t\t\t\t\t\t// unset the PART_BOUNDARY flag\n\t\t\t\t\t\t\t\tflags &= ~F.PART_BOUNDARY;\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tcallback('onPartBegin');\n\t\t\t\t\t\t\t\tstate = S.HEADER_FIELD_START;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (flags & F.LAST_BOUNDARY) {\n\t\t\t\t\t\t\tif (c === HYPHEN) {\n\t\t\t\t\t\t\t\tcallback('onPartEnd');\n\t\t\t\t\t\t\t\tstate = S.END;\n\t\t\t\t\t\t\t\tflags = 0;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t// when matching a possible boundary, keep a lookbehind reference\n\t\t\t\t\t\t// in case it turns out to be a false lead\n\t\t\t\t\t\tlookbehind[index - 1] = c;\n\t\t\t\t\t} else if (previousIndex > 0) {\n\t\t\t\t\t\t// if our boundary turned out to be rubbish, the captured lookbehind\n\t\t\t\t\t\t// belongs to partData\n\t\t\t\t\t\tconst _lookbehind = new Uint8Array(lookbehind.buffer, lookbehind.byteOffset, lookbehind.byteLength);\n\t\t\t\t\t\tcallback('onPartData', 0, previousIndex, _lookbehind);\n\t\t\t\t\t\tpreviousIndex = 0;\n\t\t\t\t\t\tmark('onPartData');\n\n\t\t\t\t\t\t// reconsider the current character even so it interrupted the sequence\n\t\t\t\t\t\t// it could be the beginning of a new sequence\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tcase S.END:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Unexpected state entered: ${state}`);\n\t\t\t}\n\t\t}\n\n\t\tdataCallback('onHeaderField');\n\t\tdataCallback('onHeaderValue');\n\t\tdataCallback('onPartData');\n\n\t\t// Update properties for the next call\n\t\tthis.index = index;\n\t\tthis.state = state;\n\t\tthis.flags = flags;\n\t}\n\n\tend() {\n\t\tif ((this.state === S.HEADER_FIELD_START && this.index === 0) ||\n\t\t\t(this.state === S.PART_DATA && this.index === this.boundary.length)) {\n\t\t\tthis.onPartEnd();\n\t\t} else if (this.state !== S.END) {\n\t\t\tthrow new Error('MultipartParser.end(): stream ended unexpectedly');\n\t\t}\n\t}\n}\n\nfunction _fileName(headerValue) {\n\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\tconst m = headerValue.match(/\\bfilename=(\"(.*?)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))($|;\\s)/i);\n\tif (!m) {\n\t\treturn;\n\t}\n\n\tconst match = m[2] || m[3] || '';\n\tlet filename = match.slice(match.lastIndexOf('\\\\') + 1);\n\tfilename = filename.replace(/%22/g, '\"');\n\tfilename = filename.replace(/&#(\\d{4});/g, (m, code) => {\n\t\treturn String.fromCharCode(code);\n\t});\n\treturn filename;\n}\n\nexport async function toFormData(Body, ct) {\n\tif (!/multipart/i.test(ct)) {\n\t\tthrow new TypeError('Failed to fetch');\n\t}\n\n\tconst m = ct.match(/boundary=(?:\"([^\"]+)\"|([^;]+))/i);\n\n\tif (!m) {\n\t\tthrow new TypeError('no or bad content-type header, no multipart boundary');\n\t}\n\n\tconst parser = new MultipartParser(m[1] || m[2]);\n\n\tlet headerField;\n\tlet headerValue;\n\tlet entryValue;\n\tlet entryName;\n\tlet contentType;\n\tlet filename;\n\tconst entryChunks = [];\n\tconst formData = new FormData();\n\n\tconst onPartData = ui8a => {\n\t\tentryValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tconst appendToFile = ui8a => {\n\t\tentryChunks.push(ui8a);\n\t};\n\n\tconst appendFileToFormData = () => {\n\t\tconst file = new File(entryChunks, filename, {type: contentType});\n\t\tformData.append(entryName, file);\n\t};\n\n\tconst appendEntryToFormData = () => {\n\t\tformData.append(entryName, entryValue);\n\t};\n\n\tconst decoder = new TextDecoder('utf-8');\n\tdecoder.decode();\n\n\tparser.onPartBegin = function () {\n\t\tparser.onPartData = onPartData;\n\t\tparser.onPartEnd = appendEntryToFormData;\n\n\t\theaderField = '';\n\t\theaderValue = '';\n\t\tentryValue = '';\n\t\tentryName = '';\n\t\tcontentType = '';\n\t\tfilename = null;\n\t\tentryChunks.length = 0;\n\t};\n\n\tparser.onHeaderField = function (ui8a) {\n\t\theaderField += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderValue = function (ui8a) {\n\t\theaderValue += decoder.decode(ui8a, {stream: true});\n\t};\n\n\tparser.onHeaderEnd = function () {\n\t\theaderValue += decoder.decode();\n\t\theaderField = headerField.toLowerCase();\n\n\t\tif (headerField === 'content-disposition') {\n\t\t\t// matches either a quoted-string or a token (RFC 2616 section 19.5.1)\n\t\t\tconst m = headerValue.match(/\\bname=(\"([^\"]*)\"|([^()<>@,;:\\\\\"/[\\]?={}\\s\\t]+))/i);\n\n\t\t\tif (m) {\n\t\t\t\tentryName = m[2] || m[3] || '';\n\t\t\t}\n\n\t\t\tfilename = _fileName(headerValue);\n\n\t\t\tif (filename) {\n\t\t\t\tparser.onPartData = appendToFile;\n\t\t\t\tparser.onPartEnd = appendFileToFormData;\n\t\t\t}\n\t\t} else if (headerField === 'content-type') {\n\t\t\tcontentType = headerValue;\n\t\t}\n\n\t\theaderValue = '';\n\t\theaderField = '';\n\t};\n\n\tfor await (const chunk of Body) {\n\t\tparser.write(chunk);\n\t}\n\n\tparser.end();\n\n\treturn formData;\n}\n", "const Stream = require('stream');\nconst util = require('util');\nconst strFunction = 'function';\n\nfunction PullStream() {\n  if (!(this instanceof PullStream))\n    return new PullStream();\n\n  Stream.Duplex.call(this, {decodeStrings:false, objectMode:true});\n  this.buffer = Buffer.from('');\n  const self = this;\n  self.on('finish', function() {\n    self.finished = true;\n    self.emit('chunk', false);\n  });\n}\n\nutil.inherits(PullStream, Stream.Duplex);\n\nPullStream.prototype._write = function(chunk, e, cb) {\n  this.buffer = Buffer.concat([this.buffer, chunk]);\n  this.cb = cb;\n  this.emit('chunk');\n};\n\n\n// The `eof` parameter is interpreted as `file_length` if the type is number\n// otherwise (i.e. buffer) it is interpreted as a pattern signaling end of stream\nPullStream.prototype.stream = function(eof, includeEof) {\n  const p = Stream.PassThrough();\n  let done;\n  const self= this;\n\n  function cb() {\n    if (typeof self.cb === strFunction) {\n      const callback = self.cb;\n      self.cb = undefined;\n      return callback();\n    }\n  }\n\n  function pull() {\n    let packet;\n    if (self.buffer && self.buffer.length) {\n      if (typeof eof === 'number') {\n        packet = self.buffer.slice(0, eof);\n        self.buffer = self.buffer.slice(eof);\n        eof -= packet.length;\n        done = done || !eof;\n      } else {\n        let match = self.buffer.indexOf(eof);\n        if (match !== -1) {\n          // store signature match byte offset to allow us to reference\n          // this for zip64 offset\n          self.match = match;\n          if (includeEof) match = match + eof.length;\n          packet = self.buffer.slice(0, match);\n          self.buffer = self.buffer.slice(match);\n          done = true;\n        } else {\n          const len = self.buffer.length - eof.length;\n          if (len <= 0) {\n            cb();\n          } else {\n            packet = self.buffer.slice(0, len);\n            self.buffer = self.buffer.slice(len);\n          }\n        }\n      }\n      if (packet) p.write(packet, function() {\n        if (self.buffer.length === 0 || (eof.length && self.buffer.length <= eof.length)) cb();\n      });\n    }\n\n    if (!done) {\n      if (self.finished) {\n        self.removeListener('chunk', pull);\n        self.emit('error', new Error('FILE_ENDED'));\n        return;\n      }\n\n    } else {\n      self.removeListener('chunk', pull);\n      p.end();\n    }\n  }\n\n  self.on('chunk', pull);\n  pull();\n  return p;\n};\n\nPullStream.prototype.pull = function(eof, includeEof) {\n  if (eof === 0) return Promise.resolve('');\n\n  // If we already have the required data in buffer\n  // we can resolve the request immediately\n  if (!isNaN(eof) && this.buffer.length > eof) {\n    const data = this.buffer.slice(0, eof);\n    this.buffer = this.buffer.slice(eof);\n    return Promise.resolve(data);\n  }\n\n  // Otherwise we stream until we have it\n  let buffer = Buffer.from('');\n  const self = this;\n\n  const concatStream = new Stream.Transform();\n  concatStream._transform = function(d, e, cb) {\n    buffer = Buffer.concat([buffer, d]);\n    cb();\n  };\n\n  let rejectHandler;\n  let pullStreamRejectHandler;\n  return new Promise(function(resolve, reject) {\n    rejectHandler = reject;\n    pullStreamRejectHandler = function(e) {\n      self.__emittedError = e;\n      reject(e);\n    };\n    if (self.finished)\n      return reject(new Error('FILE_ENDED'));\n    self.once('error', pullStreamRejectHandler); // reject any errors from pullstream itself\n    self.stream(eof, includeEof)\n      .on('error', reject)\n      .pipe(concatStream)\n      .on('finish', function() {resolve(buffer);})\n      .on('error', reject);\n  })\n    .finally(function() {\n      self.removeListener('error', rejectHandler);\n      self.removeListener('error', pullStreamRejectHandler);\n    });\n};\n\nPullStream.prototype._read = function(){};\n\nmodule.exports = PullStream;\n", "const Stream = require('stream');\nconst util = require('util');\nfunction NoopStream() {\n  if (!(this instanceof NoopStream)) {\n    return new NoopStream();\n  }\n  Stream.Transform.call(this);\n}\n\nutil.inherits(NoopStream, Stream.Transform);\n\nNoopStream.prototype._transform = function(d, e, cb) { cb() ;};\n\nmodule.exports = NoopStream;", "const Stream = require('stream');\n\nmodule.exports = function(entry) {\n  return new Promise(function(resolve, reject) {\n    const chunks = [];\n    const bufferStream = Stream.Transform()\n      .on('finish', function() {\n        resolve(Buffer.concat(chunks));\n      })\n      .on('error', reject);\n\n    bufferStream._transform = function(d, e, cb) {\n      chunks.push(d);\n      cb();\n    };\n    entry.on('error', reject)\n      .pipe(bufferStream);\n  });\n};\n", "const parseUIntLE = function(buffer, offset, size) {\n  let result;\n  switch(size) {\n    case 1:\n      result = buffer.readUInt8(offset);\n      break;\n    case 2:\n      result = buffer.readUInt16LE(offset);\n      break;\n    case 4:\n      result = buffer.readUInt32LE(offset);\n      break;\n    case 8:\n      result = Number(buffer.readBigUInt64LE(offset));\n      break;\n    default:\n      throw new Error('Unsupported UInt LE size!');\n  }\n  return result;\n};\n\n/**\n * Parses sequential unsigned little endian numbers from the head of the passed buffer according to\n * the specified format passed.  If the buffer is not large enough to satisfy the full format,\n * null values will be assigned to the remaining keys.\n * @param {*} buffer The buffer to sequentially extract numbers from.\n * @param {*} format Expected format to follow when extrcting values from the buffer.  A list of list entries\n * with the following structure:\n * [\n *   [\n *     <key>,  // Name of the key to assign the extracted number to.\n *     <size>  // The size in bytes of the number to extract. possible values are 1, 2, 4, 8.\n *   ],\n *   ...\n * ]\n * @returns An object with keys set to their associated extracted values.\n */\nconst parse = function(buffer, format) {\n  const result = {};\n  let offset = 0;\n  for(const [key, size] of format) {\n    if(buffer.length >= offset + size) {\n      result[key] = parseUIntLE(buffer, offset, size);\n    }\n    else {\n      result[key] = null;\n    }\n    offset += size;\n  }\n  return result;\n};\n\nmodule.exports = {\n  parse\n};", "const parseBuffer = require('./parseBuffer');\n\nmodule.exports = function(extraField, vars) {\n  let extra;\n  // Find the ZIP64 header, if present.\n  while(!extra && extraField && extraField.length) {\n    const candidateExtra = parseBuffer.parse(extraField, [\n      ['signature', 2],\n      ['partSize', 2],\n    ]);\n\n    if(candidateExtra.signature === 0x0001) {\n      // parse buffer based on data in ZIP64 central directory; order is important!\n      const fieldsToExpect = [];\n      if (vars.uncompressedSize === 0xffffffff) fieldsToExpect.push(['uncompressedSize', 8]);\n      if (vars.compressedSize === 0xffffffff) fieldsToExpect.push(['compressedSize', 8]);\n      if (vars.offsetToLocalFileHeader === 0xffffffff) fieldsToExpect.push(['offsetToLocalFileHeader', 8]);\n\n      // slice off the 4 bytes for signature and partSize\n      extra = parseBuffer.parse(extraField.slice(4), fieldsToExpect);\n    } else {\n      // Advance the buffer to the next part.\n      // The total size of this part is the 4 byte header + partsize.\n      extraField = extraField.slice(candidateExtra.partSize + 4);\n    }\n  }\n\n  extra = extra || {};\n\n  if (vars.compressedSize === 0xffffffff)\n    vars.compressedSize = extra.compressedSize;\n\n  if (vars.uncompressedSize === 0xffffffff)\n    vars.uncompressedSize= extra.uncompressedSize;\n\n  if (vars.offsetToLocalFileHeader === 0xffffffff)\n    vars.offsetToLocalFileHeader = extra.offsetToLocalFileHeader;\n\n  return extra;\n};\n", "// Dates in zip file entries are stored as DosDateTime\n// Spec is here: https://docs.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-dosdatetimetofiletime\n\nmodule.exports = function parseDateTime(date, time) {\n  const day = date & 0x1F;\n  const month = date >> 5 & 0x0F;\n  const year = (date >> 9 & 0x7F) + 1980;\n  const seconds = time ? (time & 0x1F) * 2 : 0;\n  const minutes = time ? (time >> 5) & 0x3F : 0;\n  const hours = time ? (time >> 11): 0;\n\n  return new Date(Date.UTC(year, month-1, day, hours, minutes, seconds));\n};", "const util = require('util');\nconst zlib = require('zlib');\nconst Stream = require('stream');\nconst PullStream = require('./PullStream');\nconst NoopStream = require('./NoopStream');\nconst BufferStream = require('./BufferStream');\nconst parseExtraField = require('./parseExtraField');\nconst parseDateTime = require('./parseDateTime');\nconst pipeline = Stream.pipeline;\nconst parseBuffer = require('./parseBuffer');\n\nconst endDirectorySignature = Buffer.alloc(4);\nendDirectorySignature.writeUInt32LE(0x06054b50, 0);\n\nfunction Parse(opts) {\n  if (!(this instanceof Parse)) {\n    return new Parse(opts);\n  }\n  const self = this;\n  self._opts = opts || { verbose: false };\n\n  PullStream.call(self, self._opts);\n  self.on('finish', function() {\n    self.emit('end');\n    self.emit('close');\n  });\n  self._readRecord().catch(function(e) {\n    if (!self.__emittedError || self.__emittedError !== e)\n      self.emit('error', e);\n  });\n}\n\nutil.inherits(Parse, PullStream);\n\nParse.prototype._readRecord = function () {\n  const self = this;\n\n  return self.pull(4).then(function(data) {\n    if (data.length === 0)\n      return;\n\n    const signature = data.readUInt32LE(0);\n\n    if (signature === 0x34327243) {\n      return self._readCrxHeader();\n    }\n    if (signature === 0x04034b50) {\n      return self._readFile();\n    }\n    else if (signature === 0x02014b50) {\n      self.reachedCD = true;\n      return self._readCentralDirectoryFileHeader();\n    }\n    else if (signature === 0x06054b50) {\n      return self._readEndOfCentralDirectoryRecord();\n    }\n    else if (self.reachedCD) {\n      // _readEndOfCentralDirectoryRecord expects the EOCD\n      // signature to be consumed so set includeEof=true\n      const includeEof = true;\n      return self.pull(endDirectorySignature, includeEof).then(function() {\n        return self._readEndOfCentralDirectoryRecord();\n      });\n    }\n    else\n      self.emit('error', new Error('invalid signature: 0x' + signature.toString(16)));\n  }).then((function(loop) {\n    if(loop) {\n      return self._readRecord();\n    }\n  }));\n};\n\nParse.prototype._readCrxHeader = function() {\n  const self = this;\n  return self.pull(12).then(function(data) {\n    self.crxHeader = parseBuffer.parse(data, [\n      ['version', 4],\n      ['pubKeyLength', 4],\n      ['signatureLength', 4],\n    ]);\n    return self.pull(self.crxHeader.pubKeyLength + self.crxHeader.signatureLength);\n  }).then(function(data) {\n    self.crxHeader.publicKey = data.slice(0, self.crxHeader.pubKeyLength);\n    self.crxHeader.signature = data.slice(self.crxHeader.pubKeyLength);\n    self.emit('crx-header', self.crxHeader);\n    return true;\n  });\n};\n\nParse.prototype._readFile = function () {\n  const self = this;\n  return self.pull(26).then(function(data) {\n    const vars = parseBuffer.parse(data, [\n      ['versionsNeededToExtract', 2],\n      ['flags', 2],\n      ['compressionMethod', 2],\n      ['lastModifiedTime', 2],\n      ['lastModifiedDate', 2],\n      ['crc32', 4],\n      ['compressedSize', 4],\n      ['uncompressedSize', 4],\n      ['fileNameLength', 2],\n      ['extraFieldLength', 2],\n    ]);\n\n    vars.lastModifiedDateTime = parseDateTime(vars.lastModifiedDate, vars.lastModifiedTime);\n\n    if (self.crxHeader) vars.crxHeader = self.crxHeader;\n\n    return self.pull(vars.fileNameLength).then(function(fileNameBuffer) {\n      const fileName = fileNameBuffer.toString('utf8');\n      const entry = Stream.PassThrough();\n      let __autodraining = false;\n\n      entry.autodrain = function() {\n        __autodraining = true;\n        const draining = entry.pipe(NoopStream());\n        draining.promise = function() {\n          return new Promise(function(resolve, reject) {\n            draining.on('finish', resolve);\n            draining.on('error', reject);\n          });\n        };\n        return draining;\n      };\n\n      entry.buffer = function() {\n        return BufferStream(entry);\n      };\n\n      entry.path = fileName;\n      entry.props = {};\n      entry.props.path = fileName;\n      entry.props.pathBuffer = fileNameBuffer;\n      entry.props.flags = {\n        \"isUnicode\": (vars.flags & 0x800) != 0\n      };\n      entry.type = (vars.uncompressedSize === 0 && /[/\\\\]$/.test(fileName)) ? 'Directory' : 'File';\n\n      if (self._opts.verbose) {\n        if (entry.type === 'Directory') {\n          console.log('   creating:', fileName);\n        } else if (entry.type === 'File') {\n          if (vars.compressionMethod === 0) {\n            console.log(' extracting:', fileName);\n          } else {\n            console.log('  inflating:', fileName);\n          }\n        }\n      }\n\n      return self.pull(vars.extraFieldLength).then(function(extraField) {\n        const extra = parseExtraField(extraField, vars);\n\n        entry.vars = vars;\n        entry.extra = extra;\n\n        if (self._opts.forceStream) {\n          self.push(entry);\n        } else {\n          self.emit('entry', entry);\n\n          if (self._readableState.pipesCount || (self._readableState.pipes && self._readableState.pipes.length))\n            self.push(entry);\n        }\n\n        if (self._opts.verbose)\n          console.log({\n            filename:fileName,\n            vars: vars,\n            extra: extra\n          });\n\n        const fileSizeKnown = !(vars.flags & 0x08) || vars.compressedSize > 0;\n        let eof;\n\n        entry.__autodraining = __autodraining; // expose __autodraining for test purposes\n        const inflater = (vars.compressionMethod && !__autodraining) ? zlib.createInflateRaw() : Stream.PassThrough();\n\n        if (fileSizeKnown) {\n          entry.size = vars.uncompressedSize;\n          eof = vars.compressedSize;\n        } else {\n          eof = Buffer.alloc(4);\n          eof.writeUInt32LE(0x08074b50, 0);\n        }\n\n        return new Promise(function(resolve, reject) {\n          pipeline(\n            self.stream(eof),\n            inflater,\n            entry,\n            function (err) {\n              if (err) {\n                return reject(err);\n              }\n\n              return fileSizeKnown ? resolve(fileSizeKnown) : self._processDataDescriptor(entry).then(resolve).catch(reject);\n            }\n          );\n        });\n      });\n    });\n  });\n};\n\nParse.prototype._processDataDescriptor = function (entry) {\n  const self = this;\n  return self.pull(16).then(function(data) {\n    const vars = parseBuffer.parse(data, [\n      ['dataDescriptorSignature', 4],\n      ['crc32', 4],\n      ['compressedSize', 4],\n      ['uncompressedSize', 4],\n    ]);\n\n    entry.size = vars.uncompressedSize;\n    return true;\n  });\n};\n\nParse.prototype._readCentralDirectoryFileHeader = function () {\n  const self = this;\n  return self.pull(42).then(function(data) {\n    const vars = parseBuffer.parse(data, [\n      ['versionMadeBy', 2],\n      ['versionsNeededToExtract', 2],\n      ['flags', 2],\n      ['compressionMethod', 2],\n      ['lastModifiedTime', 2],\n      ['lastModifiedDate', 2],\n      ['crc32', 4],\n      ['compressedSize', 4],\n      ['uncompressedSize', 4],\n      ['fileNameLength', 2],\n      ['extraFieldLength', 2],\n      ['fileCommentLength', 2],\n      ['diskNumber', 2],\n      ['internalFileAttributes', 2],\n      ['externalFileAttributes', 4],\n      ['offsetToLocalFileHeader', 4],\n    ]);\n\n    return self.pull(vars.fileNameLength).then(function(fileName) {\n      vars.fileName = fileName.toString('utf8');\n      return self.pull(vars.extraFieldLength);\n    })\n      .then(function() {\n        return self.pull(vars.fileCommentLength);\n      })\n      .then(function() {\n        return true;\n      });\n  });\n};\n\nParse.prototype._readEndOfCentralDirectoryRecord = function() {\n  const self = this;\n  return self.pull(18).then(function(data) {\n\n    const vars = parseBuffer.parse(data, [\n      ['diskNumber', 2],\n      ['diskStart', 2],\n      ['numberOfRecordsOnDisk', 2],\n      ['numberOfRecords', 2],\n      ['sizeOfCentralDirectory', 4],\n      ['offsetToStartOfCentralDirectory', 4],\n      ['commentLength', 2],\n    ]);\n\n    return self.pull(vars.commentLength).then(function() {\n      self.end();\n      self.push(null);\n    });\n\n  });\n};\n\nParse.prototype.promise = function() {\n  const self = this;\n  return new Promise(function(resolve, reject) {\n    self.on('finish', resolve);\n    self.on('error', reject);\n  });\n};\n\nmodule.exports = Parse;\n", "'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n", "var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n", "module.exports = require('stream');\n", "/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('buffer').Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n", "if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n", "try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n", "'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}", "'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err) {\n      if (!this._writableState) {\n        pna.nextTick(emitErrorNT, this, err);\n      } else if (!this._writableState.errorEmitted) {\n        this._writableState.errorEmitted = true;\n        pna.nextTick(emitErrorNT, this, err);\n      }\n    }\n\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      if (!_this._writableState) {\n        pna.nextTick(emitErrorNT, _this, err);\n      } else if (!_this._writableState.errorEmitted) {\n        _this._writableState.errorEmitted = true;\n        pna.nextTick(emitErrorNT, _this, err);\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finalCalled = false;\n    this._writableState.prefinished = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};", "\n/**\n * For Node.js, simply re-export the core `util.deprecate` function.\n */\n\nmodule.exports = require('util').deprecate;\n", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n\n  // reuse the free corkReq.\n  state.corkedRequestsFree.next = corkReq;\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = (typeof global !== 'undefined' ? global : typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : {}).Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', state.awaitDrain);\n        state.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, { hasUnpiped: false });\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}", "// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};", "var Stream = require('stream');\nif (process.env.READABLE_STREAM === 'disable' && Stream) {\n  module.exports = Stream;\n  exports = module.exports = Stream.Readable;\n  exports.Readable = Stream.Readable;\n  exports.Writable = Stream.Writable;\n  exports.Duplex = Stream.Duplex;\n  exports.Transform = Stream.Transform;\n  exports.PassThrough = Stream.PassThrough;\n  exports.Stream = Stream;\n} else {\n  exports = module.exports = require('./lib/_stream_readable.js');\n  exports.Stream = Stream || exports;\n  exports.Readable = exports;\n  exports.Writable = require('./lib/_stream_writable.js');\n  exports.Duplex = require('./lib/_stream_duplex.js');\n  exports.Transform = require('./lib/_stream_transform.js');\n  exports.PassThrough = require('./lib/_stream_passthrough.js');\n}\n", "\"use strict\";\n\nvar stream = require(\"readable-stream\");\n\nfunction DuplexWrapper(options, writable, readable) {\n  if (typeof readable === \"undefined\") {\n    readable = writable;\n    writable = options;\n    options = null;\n  }\n\n  stream.Duplex.call(this, options);\n\n  if (typeof readable.read !== \"function\") {\n    readable = (new stream.Readable(options)).wrap(readable);\n  }\n\n  this._writable = writable;\n  this._readable = readable;\n  this._waiting = false;\n\n  var self = this;\n\n  writable.once(\"finish\", function() {\n    self.end();\n  });\n\n  this.once(\"finish\", function() {\n    writable.end();\n  });\n\n  readable.on(\"readable\", function() {\n    if (self._waiting) {\n      self._waiting = false;\n      self._read();\n    }\n  });\n\n  readable.once(\"end\", function() {\n    self.push(null);\n  });\n\n  if (!options || typeof options.bubbleErrors === \"undefined\" || options.bubbleErrors) {\n    writable.on(\"error\", function(err) {\n      self.emit(\"error\", err);\n    });\n\n    readable.on(\"error\", function(err) {\n      self.emit(\"error\", err);\n    });\n  }\n}\n\nDuplexWrapper.prototype = Object.create(stream.Duplex.prototype, {constructor: {value: DuplexWrapper}});\n\nDuplexWrapper.prototype._write = function _write(input, encoding, done) {\n  this._writable.write(input, encoding, done);\n};\n\nDuplexWrapper.prototype._read = function _read() {\n  var buf;\n  var reads = 0;\n  while ((buf = this._readable.read()) !== null) {\n    this.push(buf);\n    reads++;\n  }\n  if (reads === 0) {\n    this._waiting = true;\n  }\n};\n\nmodule.exports = function duplex2(options, writable, readable) {\n  return new DuplexWrapper(options, writable, readable);\n};\n\nmodule.exports.DuplexWrapper = DuplexWrapper;\n", "const Stream = require('stream');\nconst Parse = require('./parse');\nconst duplexer2 = require('duplexer2');\nconst BufferStream = require('./BufferStream');\n\nfunction parseOne(match, opts) {\n  const inStream = Stream.PassThrough({objectMode:true});\n  const outStream = Stream.PassThrough();\n  const transform = Stream.Transform({objectMode:true});\n  const re = match instanceof RegExp ? match : (match && new RegExp(match));\n  let found;\n\n  transform._transform = function(entry, e, cb) {\n    if (found || (re && !re.exec(entry.path))) {\n      entry.autodrain();\n      return cb();\n    } else {\n      found = true;\n      out.emit('entry', entry);\n      entry.on('error', function(e) {\n        outStream.emit('error', e);\n      });\n      entry.pipe(outStream)\n        .on('error', function(err) {\n          cb(err);\n        })\n        .on('finish', function(d) {\n          cb(null, d);\n        });\n    }\n  };\n\n  inStream.pipe(Parse(opts))\n    .on('error', function(err) {\n      outStream.emit('error', err);\n    })\n    .pipe(transform)\n    .on('error', Object) // Silence error as its already addressed in transform\n    .on('finish', function() {\n      if (!found)\n        outStream.emit('error', new Error('PATTERN_NOT_FOUND'));\n      else\n        outStream.end();\n    });\n\n  const out = duplexer2(inStream, outStream);\n  out.buffer = function() {\n    return BufferStream(outStream);\n  };\n\n  return out;\n}\n\nmodule.exports = parseOne;\n", "'use strict'\n\nexports.fromCallback = function (fn) {\n  return Object.defineProperty(function (...args) {\n    if (typeof args[args.length - 1] === 'function') fn.apply(this, args)\n    else {\n      return new Promise((resolve, reject) => {\n        args.push((err, res) => (err != null) ? reject(err) : resolve(res))\n        fn.apply(this, args)\n      })\n    }\n  }, 'name', { value: fn.name })\n}\n\nexports.fromPromise = function (fn) {\n  return Object.defineProperty(function (...args) {\n    const cb = args[args.length - 1]\n    if (typeof cb !== 'function') return fn.apply(this, args)\n    else {\n      args.pop()\n      fn.apply(this, args).then(r => cb(null, r), cb)\n    }\n  }, 'name', { value: fn.name })\n}\n", "var constants = require('constants')\n\nvar origCwd = process.cwd\nvar cwd = null\n\nvar platform = process.env.GRACEFUL_FS_PLATFORM || process.platform\n\nprocess.cwd = function() {\n  if (!cwd)\n    cwd = origCwd.call(process)\n  return cwd\n}\ntry {\n  process.cwd()\n} catch (er) {}\n\n// This check is needed until node.js 12 is required\nif (typeof process.chdir === 'function') {\n  var chdir = process.chdir\n  process.chdir = function (d) {\n    cwd = null\n    chdir.call(process, d)\n  }\n  if (Object.setPrototypeOf) Object.setPrototypeOf(process.chdir, chdir)\n}\n\nmodule.exports = patch\n\nfunction patch (fs) {\n  // (re-)implement some things that are known busted or missing.\n\n  // lchmod, broken prior to 0.6.2\n  // back-port the fix here.\n  if (constants.hasOwnProperty('O_SYMLINK') &&\n      process.version.match(/^v0\\.6\\.[0-2]|^v0\\.5\\./)) {\n    patchLchmod(fs)\n  }\n\n  // lutimes implementation, or no-op\n  if (!fs.lutimes) {\n    patchLutimes(fs)\n  }\n\n  // https://github.com/isaacs/node-graceful-fs/issues/4\n  // Chown should not fail on einval or eperm if non-root.\n  // It should not fail on enosys ever, as this just indicates\n  // that a fs doesn't support the intended operation.\n\n  fs.chown = chownFix(fs.chown)\n  fs.fchown = chownFix(fs.fchown)\n  fs.lchown = chownFix(fs.lchown)\n\n  fs.chmod = chmodFix(fs.chmod)\n  fs.fchmod = chmodFix(fs.fchmod)\n  fs.lchmod = chmodFix(fs.lchmod)\n\n  fs.chownSync = chownFixSync(fs.chownSync)\n  fs.fchownSync = chownFixSync(fs.fchownSync)\n  fs.lchownSync = chownFixSync(fs.lchownSync)\n\n  fs.chmodSync = chmodFixSync(fs.chmodSync)\n  fs.fchmodSync = chmodFixSync(fs.fchmodSync)\n  fs.lchmodSync = chmodFixSync(fs.lchmodSync)\n\n  fs.stat = statFix(fs.stat)\n  fs.fstat = statFix(fs.fstat)\n  fs.lstat = statFix(fs.lstat)\n\n  fs.statSync = statFixSync(fs.statSync)\n  fs.fstatSync = statFixSync(fs.fstatSync)\n  fs.lstatSync = statFixSync(fs.lstatSync)\n\n  // if lchmod/lchown do not exist, then make them no-ops\n  if (fs.chmod && !fs.lchmod) {\n    fs.lchmod = function (path, mode, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchmodSync = function () {}\n  }\n  if (fs.chown && !fs.lchown) {\n    fs.lchown = function (path, uid, gid, cb) {\n      if (cb) process.nextTick(cb)\n    }\n    fs.lchownSync = function () {}\n  }\n\n  // on Windows, A/V software can lock the directory, causing this\n  // to fail with an EACCES or EPERM if the directory contains newly\n  // created files.  Try again on failure, for up to 60 seconds.\n\n  // Set the timeout this long because some Windows Anti-Virus, such as Parity\n  // bit9, may lock files for up to a minute, causing npm package install\n  // failures. Also, take care to yield the scheduler. Windows scheduling gives\n  // CPU to a busy looping process, which can cause the program causing the lock\n  // contention to be starved of CPU by node, so the contention doesn't resolve.\n  if (platform === \"win32\") {\n    fs.rename = typeof fs.rename !== 'function' ? fs.rename\n    : (function (fs$rename) {\n      function rename (from, to, cb) {\n        var start = Date.now()\n        var backoff = 0;\n        fs$rename(from, to, function CB (er) {\n          if (er\n              && (er.code === \"EACCES\" || er.code === \"EPERM\" || er.code === \"EBUSY\")\n              && Date.now() - start < 60000) {\n            setTimeout(function() {\n              fs.stat(to, function (stater, st) {\n                if (stater && stater.code === \"ENOENT\")\n                  fs$rename(from, to, CB);\n                else\n                  cb(er)\n              })\n            }, backoff)\n            if (backoff < 100)\n              backoff += 10;\n            return;\n          }\n          if (cb) cb(er)\n        })\n      }\n      if (Object.setPrototypeOf) Object.setPrototypeOf(rename, fs$rename)\n      return rename\n    })(fs.rename)\n  }\n\n  // if read() returns EAGAIN, then just try it again.\n  fs.read = typeof fs.read !== 'function' ? fs.read\n  : (function (fs$read) {\n    function read (fd, buffer, offset, length, position, callback_) {\n      var callback\n      if (callback_ && typeof callback_ === 'function') {\n        var eagCounter = 0\n        callback = function (er, _, __) {\n          if (er && er.code === 'EAGAIN' && eagCounter < 10) {\n            eagCounter ++\n            return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n          }\n          callback_.apply(this, arguments)\n        }\n      }\n      return fs$read.call(fs, fd, buffer, offset, length, position, callback)\n    }\n\n    // This ensures `util.promisify` works as it does for native `fs.read`.\n    if (Object.setPrototypeOf) Object.setPrototypeOf(read, fs$read)\n    return read\n  })(fs.read)\n\n  fs.readSync = typeof fs.readSync !== 'function' ? fs.readSync\n  : (function (fs$readSync) { return function (fd, buffer, offset, length, position) {\n    var eagCounter = 0\n    while (true) {\n      try {\n        return fs$readSync.call(fs, fd, buffer, offset, length, position)\n      } catch (er) {\n        if (er.code === 'EAGAIN' && eagCounter < 10) {\n          eagCounter ++\n          continue\n        }\n        throw er\n      }\n    }\n  }})(fs.readSync)\n\n  function patchLchmod (fs) {\n    fs.lchmod = function (path, mode, callback) {\n      fs.open( path\n             , constants.O_WRONLY | constants.O_SYMLINK\n             , mode\n             , function (err, fd) {\n        if (err) {\n          if (callback) callback(err)\n          return\n        }\n        // prefer to return the chmod error, if one occurs,\n        // but still try to close, and report closing errors if they occur.\n        fs.fchmod(fd, mode, function (err) {\n          fs.close(fd, function(err2) {\n            if (callback) callback(err || err2)\n          })\n        })\n      })\n    }\n\n    fs.lchmodSync = function (path, mode) {\n      var fd = fs.openSync(path, constants.O_WRONLY | constants.O_SYMLINK, mode)\n\n      // prefer to return the chmod error, if one occurs,\n      // but still try to close, and report closing errors if they occur.\n      var threw = true\n      var ret\n      try {\n        ret = fs.fchmodSync(fd, mode)\n        threw = false\n      } finally {\n        if (threw) {\n          try {\n            fs.closeSync(fd)\n          } catch (er) {}\n        } else {\n          fs.closeSync(fd)\n        }\n      }\n      return ret\n    }\n  }\n\n  function patchLutimes (fs) {\n    if (constants.hasOwnProperty(\"O_SYMLINK\") && fs.futimes) {\n      fs.lutimes = function (path, at, mt, cb) {\n        fs.open(path, constants.O_SYMLINK, function (er, fd) {\n          if (er) {\n            if (cb) cb(er)\n            return\n          }\n          fs.futimes(fd, at, mt, function (er) {\n            fs.close(fd, function (er2) {\n              if (cb) cb(er || er2)\n            })\n          })\n        })\n      }\n\n      fs.lutimesSync = function (path, at, mt) {\n        var fd = fs.openSync(path, constants.O_SYMLINK)\n        var ret\n        var threw = true\n        try {\n          ret = fs.futimesSync(fd, at, mt)\n          threw = false\n        } finally {\n          if (threw) {\n            try {\n              fs.closeSync(fd)\n            } catch (er) {}\n          } else {\n            fs.closeSync(fd)\n          }\n        }\n        return ret\n      }\n\n    } else if (fs.futimes) {\n      fs.lutimes = function (_a, _b, _c, cb) { if (cb) process.nextTick(cb) }\n      fs.lutimesSync = function () {}\n    }\n  }\n\n  function chmodFix (orig) {\n    if (!orig) return orig\n    return function (target, mode, cb) {\n      return orig.call(fs, target, mode, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chmodFixSync (orig) {\n    if (!orig) return orig\n    return function (target, mode) {\n      try {\n        return orig.call(fs, target, mode)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n\n  function chownFix (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid, cb) {\n      return orig.call(fs, target, uid, gid, function (er) {\n        if (chownErOk(er)) er = null\n        if (cb) cb.apply(this, arguments)\n      })\n    }\n  }\n\n  function chownFixSync (orig) {\n    if (!orig) return orig\n    return function (target, uid, gid) {\n      try {\n        return orig.call(fs, target, uid, gid)\n      } catch (er) {\n        if (!chownErOk(er)) throw er\n      }\n    }\n  }\n\n  function statFix (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options, cb) {\n      if (typeof options === 'function') {\n        cb = options\n        options = null\n      }\n      function callback (er, stats) {\n        if (stats) {\n          if (stats.uid < 0) stats.uid += 0x100000000\n          if (stats.gid < 0) stats.gid += 0x100000000\n        }\n        if (cb) cb.apply(this, arguments)\n      }\n      return options ? orig.call(fs, target, options, callback)\n        : orig.call(fs, target, callback)\n    }\n  }\n\n  function statFixSync (orig) {\n    if (!orig) return orig\n    // Older versions of Node erroneously returned signed integers for\n    // uid + gid.\n    return function (target, options) {\n      var stats = options ? orig.call(fs, target, options)\n        : orig.call(fs, target)\n      if (stats) {\n        if (stats.uid < 0) stats.uid += 0x100000000\n        if (stats.gid < 0) stats.gid += 0x100000000\n      }\n      return stats;\n    }\n  }\n\n  // ENOSYS means that the fs doesn't support the op. Just ignore\n  // that, because it doesn't matter.\n  //\n  // if there's no getuid, or if getuid() is something other\n  // than 0, and the error is EINVAL or EPERM, then just ignore\n  // it.\n  //\n  // This specific case is a silent failure in cp, install, tar,\n  // and most other unix tools that manage permissions.\n  //\n  // When running as root, or if other types of errors are\n  // encountered, then it's strict.\n  function chownErOk (er) {\n    if (!er)\n      return true\n\n    if (er.code === \"ENOSYS\")\n      return true\n\n    var nonroot = !process.getuid || process.getuid() !== 0\n    if (nonroot) {\n      if (er.code === \"EINVAL\" || er.code === \"EPERM\")\n        return true\n    }\n\n    return false\n  }\n}\n", "var Stream = require('stream').Stream\n\nmodule.exports = legacy\n\nfunction legacy (fs) {\n  return {\n    ReadStream: ReadStream,\n    WriteStream: WriteStream\n  }\n\n  function ReadStream (path, options) {\n    if (!(this instanceof ReadStream)) return new ReadStream(path, options);\n\n    Stream.call(this);\n\n    var self = this;\n\n    this.path = path;\n    this.fd = null;\n    this.readable = true;\n    this.paused = false;\n\n    this.flags = 'r';\n    this.mode = 438; /*=0666*/\n    this.bufferSize = 64 * 1024;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.encoding) this.setEncoding(this.encoding);\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.end === undefined) {\n        this.end = Infinity;\n      } else if ('number' !== typeof this.end) {\n        throw TypeError('end must be a Number');\n      }\n\n      if (this.start > this.end) {\n        throw new Error('start must be <= end');\n      }\n\n      this.pos = this.start;\n    }\n\n    if (this.fd !== null) {\n      process.nextTick(function() {\n        self._read();\n      });\n      return;\n    }\n\n    fs.open(this.path, this.flags, this.mode, function (err, fd) {\n      if (err) {\n        self.emit('error', err);\n        self.readable = false;\n        return;\n      }\n\n      self.fd = fd;\n      self.emit('open', fd);\n      self._read();\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (!(this instanceof WriteStream)) return new WriteStream(path, options);\n\n    Stream.call(this);\n\n    this.path = path;\n    this.fd = null;\n    this.writable = true;\n\n    this.flags = 'w';\n    this.encoding = 'binary';\n    this.mode = 438; /*=0666*/\n    this.bytesWritten = 0;\n\n    options = options || {};\n\n    // Mixin options into this\n    var keys = Object.keys(options);\n    for (var index = 0, length = keys.length; index < length; index++) {\n      var key = keys[index];\n      this[key] = options[key];\n    }\n\n    if (this.start !== undefined) {\n      if ('number' !== typeof this.start) {\n        throw TypeError('start must be a Number');\n      }\n      if (this.start < 0) {\n        throw new Error('start must be >= zero');\n      }\n\n      this.pos = this.start;\n    }\n\n    this.busy = false;\n    this._queue = [];\n\n    if (this.fd === null) {\n      this._open = fs.open;\n      this._queue.push([this._open, this.path, this.flags, this.mode, undefined]);\n      this.flush();\n    }\n  }\n}\n", "'use strict'\n\nmodule.exports = clone\n\nvar getPrototypeOf = Object.getPrototypeOf || function (obj) {\n  return obj.__proto__\n}\n\nfunction clone (obj) {\n  if (obj === null || typeof obj !== 'object')\n    return obj\n\n  if (obj instanceof Object)\n    var copy = { __proto__: getPrototypeOf(obj) }\n  else\n    var copy = Object.create(null)\n\n  Object.getOwnPropertyNames(obj).forEach(function (key) {\n    Object.defineProperty(copy, key, Object.getOwnPropertyDescriptor(obj, key))\n  })\n\n  return copy\n}\n", "var fs = require('fs')\nvar polyfills = require('./polyfills.js')\nvar legacy = require('./legacy-streams.js')\nvar clone = require('./clone.js')\n\nvar util = require('util')\n\n/* istanbul ignore next - node 0.x polyfill */\nvar gracefulQueue\nvar previousSymbol\n\n/* istanbul ignore else - node 0.x polyfill */\nif (typeof Symbol === 'function' && typeof Symbol.for === 'function') {\n  gracefulQueue = Symbol.for('graceful-fs.queue')\n  // This is used in testing by future versions\n  previousSymbol = Symbol.for('graceful-fs.previous')\n} else {\n  gracefulQueue = '___graceful-fs.queue'\n  previousSymbol = '___graceful-fs.previous'\n}\n\nfunction noop () {}\n\nfunction publishQueue(context, queue) {\n  Object.defineProperty(context, gracefulQueue, {\n    get: function() {\n      return queue\n    }\n  })\n}\n\nvar debug = noop\nif (util.debuglog)\n  debug = util.debuglog('gfs4')\nelse if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || ''))\n  debug = function() {\n    var m = util.format.apply(util, arguments)\n    m = 'GFS4: ' + m.split(/\\n/).join('\\nGFS4: ')\n    console.error(m)\n  }\n\n// Once time initialization\nif (!fs[gracefulQueue]) {\n  // This queue can be shared by multiple loaded instances\n  var queue = global[gracefulQueue] || []\n  publishQueue(fs, queue)\n\n  // Patch fs.close/closeSync to shared queue version, because we need\n  // to retry() whenever a close happens *anywhere* in the program.\n  // This is essential when multiple graceful-fs instances are\n  // in play at the same time.\n  fs.close = (function (fs$close) {\n    function close (fd, cb) {\n      return fs$close.call(fs, fd, function (err) {\n        // This function uses the graceful-fs shared queue\n        if (!err) {\n          resetQueue()\n        }\n\n        if (typeof cb === 'function')\n          cb.apply(this, arguments)\n      })\n    }\n\n    Object.defineProperty(close, previousSymbol, {\n      value: fs$close\n    })\n    return close\n  })(fs.close)\n\n  fs.closeSync = (function (fs$closeSync) {\n    function closeSync (fd) {\n      // This function uses the graceful-fs shared queue\n      fs$closeSync.apply(fs, arguments)\n      resetQueue()\n    }\n\n    Object.defineProperty(closeSync, previousSymbol, {\n      value: fs$closeSync\n    })\n    return closeSync\n  })(fs.closeSync)\n\n  if (/\\bgfs4\\b/i.test(process.env.NODE_DEBUG || '')) {\n    process.on('exit', function() {\n      debug(fs[gracefulQueue])\n      require('assert').equal(fs[gracefulQueue].length, 0)\n    })\n  }\n}\n\nif (!global[gracefulQueue]) {\n  publishQueue(global, fs[gracefulQueue]);\n}\n\nmodule.exports = patch(clone(fs))\nif (process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH && !fs.__patched) {\n    module.exports = patch(fs)\n    fs.__patched = true;\n}\n\nfunction patch (fs) {\n  // Everything that references the open() function needs to be in here\n  polyfills(fs)\n  fs.gracefulify = patch\n\n  fs.createReadStream = createReadStream\n  fs.createWriteStream = createWriteStream\n  var fs$readFile = fs.readFile\n  fs.readFile = readFile\n  function readFile (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$readFile(path, options, cb)\n\n    function go$readFile (path, options, cb, startTime) {\n      return fs$readFile(path, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$readFile, [path, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$writeFile = fs.writeFile\n  fs.writeFile = writeFile\n  function writeFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$writeFile(path, data, options, cb)\n\n    function go$writeFile (path, data, options, cb, startTime) {\n      return fs$writeFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$writeFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$appendFile = fs.appendFile\n  if (fs$appendFile)\n    fs.appendFile = appendFile\n  function appendFile (path, data, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    return go$appendFile(path, data, options, cb)\n\n    function go$appendFile (path, data, options, cb, startTime) {\n      return fs$appendFile(path, data, options, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$appendFile, [path, data, options, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$copyFile = fs.copyFile\n  if (fs$copyFile)\n    fs.copyFile = copyFile\n  function copyFile (src, dest, flags, cb) {\n    if (typeof flags === 'function') {\n      cb = flags\n      flags = 0\n    }\n    return go$copyFile(src, dest, flags, cb)\n\n    function go$copyFile (src, dest, flags, cb, startTime) {\n      return fs$copyFile(src, dest, flags, function (err) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$copyFile, [src, dest, flags, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  var fs$readdir = fs.readdir\n  fs.readdir = readdir\n  var noReaddirOptionVersions = /^v[0-5]\\./\n  function readdir (path, options, cb) {\n    if (typeof options === 'function')\n      cb = options, options = null\n\n    var go$readdir = noReaddirOptionVersions.test(process.version)\n      ? function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n      : function go$readdir (path, options, cb, startTime) {\n        return fs$readdir(path, options, fs$readdirCallback(\n          path, options, cb, startTime\n        ))\n      }\n\n    return go$readdir(path, options, cb)\n\n    function fs$readdirCallback (path, options, cb, startTime) {\n      return function (err, files) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([\n            go$readdir,\n            [path, options, cb],\n            err,\n            startTime || Date.now(),\n            Date.now()\n          ])\n        else {\n          if (files && files.sort)\n            files.sort()\n\n          if (typeof cb === 'function')\n            cb.call(this, err, files)\n        }\n      }\n    }\n  }\n\n  if (process.version.substr(0, 4) === 'v0.8') {\n    var legStreams = legacy(fs)\n    ReadStream = legStreams.ReadStream\n    WriteStream = legStreams.WriteStream\n  }\n\n  var fs$ReadStream = fs.ReadStream\n  if (fs$ReadStream) {\n    ReadStream.prototype = Object.create(fs$ReadStream.prototype)\n    ReadStream.prototype.open = ReadStream$open\n  }\n\n  var fs$WriteStream = fs.WriteStream\n  if (fs$WriteStream) {\n    WriteStream.prototype = Object.create(fs$WriteStream.prototype)\n    WriteStream.prototype.open = WriteStream$open\n  }\n\n  Object.defineProperty(fs, 'ReadStream', {\n    get: function () {\n      return ReadStream\n    },\n    set: function (val) {\n      ReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  Object.defineProperty(fs, 'WriteStream', {\n    get: function () {\n      return WriteStream\n    },\n    set: function (val) {\n      WriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  // legacy names\n  var FileReadStream = ReadStream\n  Object.defineProperty(fs, 'FileReadStream', {\n    get: function () {\n      return FileReadStream\n    },\n    set: function (val) {\n      FileReadStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n  var FileWriteStream = WriteStream\n  Object.defineProperty(fs, 'FileWriteStream', {\n    get: function () {\n      return FileWriteStream\n    },\n    set: function (val) {\n      FileWriteStream = val\n    },\n    enumerable: true,\n    configurable: true\n  })\n\n  function ReadStream (path, options) {\n    if (this instanceof ReadStream)\n      return fs$ReadStream.apply(this, arguments), this\n    else\n      return ReadStream.apply(Object.create(ReadStream.prototype), arguments)\n  }\n\n  function ReadStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        if (that.autoClose)\n          that.destroy()\n\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n        that.read()\n      }\n    })\n  }\n\n  function WriteStream (path, options) {\n    if (this instanceof WriteStream)\n      return fs$WriteStream.apply(this, arguments), this\n    else\n      return WriteStream.apply(Object.create(WriteStream.prototype), arguments)\n  }\n\n  function WriteStream$open () {\n    var that = this\n    open(that.path, that.flags, that.mode, function (err, fd) {\n      if (err) {\n        that.destroy()\n        that.emit('error', err)\n      } else {\n        that.fd = fd\n        that.emit('open', fd)\n      }\n    })\n  }\n\n  function createReadStream (path, options) {\n    return new fs.ReadStream(path, options)\n  }\n\n  function createWriteStream (path, options) {\n    return new fs.WriteStream(path, options)\n  }\n\n  var fs$open = fs.open\n  fs.open = open\n  function open (path, flags, mode, cb) {\n    if (typeof mode === 'function')\n      cb = mode, mode = null\n\n    return go$open(path, flags, mode, cb)\n\n    function go$open (path, flags, mode, cb, startTime) {\n      return fs$open(path, flags, mode, function (err, fd) {\n        if (err && (err.code === 'EMFILE' || err.code === 'ENFILE'))\n          enqueue([go$open, [path, flags, mode, cb], err, startTime || Date.now(), Date.now()])\n        else {\n          if (typeof cb === 'function')\n            cb.apply(this, arguments)\n        }\n      })\n    }\n  }\n\n  return fs\n}\n\nfunction enqueue (elem) {\n  debug('ENQUEUE', elem[0].name, elem[1])\n  fs[gracefulQueue].push(elem)\n  retry()\n}\n\n// keep track of the timeout between retry() calls\nvar retryTimer\n\n// reset the startTime and lastTime to now\n// this resets the start of the 60 second overall timeout as well as the\n// delay between attempts so that we'll retry these jobs sooner\nfunction resetQueue () {\n  var now = Date.now()\n  for (var i = 0; i < fs[gracefulQueue].length; ++i) {\n    // entries that are only a length of 2 are from an older version, don't\n    // bother modifying those since they'll be retried anyway.\n    if (fs[gracefulQueue][i].length > 2) {\n      fs[gracefulQueue][i][3] = now // startTime\n      fs[gracefulQueue][i][4] = now // lastTime\n    }\n  }\n  // call retry to make sure we're actively processing the queue\n  retry()\n}\n\nfunction retry () {\n  // clear the timer and remove it to help prevent unintended concurrency\n  clearTimeout(retryTimer)\n  retryTimer = undefined\n\n  if (fs[gracefulQueue].length === 0)\n    return\n\n  var elem = fs[gracefulQueue].shift()\n  var fn = elem[0]\n  var args = elem[1]\n  // these items may be unset if they were added by an older graceful-fs\n  var err = elem[2]\n  var startTime = elem[3]\n  var lastTime = elem[4]\n\n  // if we don't have a startTime we have no way of knowing if we've waited\n  // long enough, so go ahead and retry this item now\n  if (startTime === undefined) {\n    debug('RETRY', fn.name, args)\n    fn.apply(null, args)\n  } else if (Date.now() - startTime >= 60000) {\n    // it's been more than 60 seconds total, bail now\n    debug('TIMEOUT', fn.name, args)\n    var cb = args.pop()\n    if (typeof cb === 'function')\n      cb.call(null, err)\n  } else {\n    // the amount of time between the last attempt and right now\n    var sinceAttempt = Date.now() - lastTime\n    // the amount of time between when we first tried, and when we last tried\n    // rounded up to at least 1\n    var sinceStart = Math.max(lastTime - startTime, 1)\n    // backoff. wait longer than the total time we've been retrying, but only\n    // up to a maximum of 100ms\n    var desiredDelay = Math.min(sinceStart * 1.2, 100)\n    // it's been long enough since the last retry, do it again\n    if (sinceAttempt >= desiredDelay) {\n      debug('RETRY', fn.name, args)\n      fn.apply(null, args.concat([startTime]))\n    } else {\n      // if we can't do this job yet, push it to the end of the queue\n      // and let the next iteration check again\n      fs[gracefulQueue].push(elem)\n    }\n  }\n\n  // schedule our next run if one isn't already scheduled\n  if (retryTimer === undefined) {\n    retryTimer = setTimeout(retry, 0)\n  }\n}\n", "'use strict'\n// This is adapted from https://github.com/normalize/mz\n// Copyright (c) 2014-2016 Jonathan Ong me@jongleberry.com and Contributors\nconst u = require('universalify').fromCallback\nconst fs = require('graceful-fs')\n\nconst api = [\n  'access',\n  'appendFile',\n  'chmod',\n  'chown',\n  'close',\n  'copyFile',\n  'cp',\n  'fchmod',\n  'fchown',\n  'fdatasync',\n  'fstat',\n  'fsync',\n  'ftruncate',\n  'futimes',\n  'glob',\n  'lchmod',\n  'lchown',\n  'lutimes',\n  'link',\n  'lstat',\n  'mkdir',\n  'mkdtemp',\n  'open',\n  'opendir',\n  'readdir',\n  'readFile',\n  'readlink',\n  'realpath',\n  'rename',\n  'rm',\n  'rmdir',\n  'stat',\n  'statfs',\n  'symlink',\n  'truncate',\n  'unlink',\n  'utimes',\n  'writeFile'\n].filter(key => {\n  // Some commands are not available on some systems. Ex:\n  // fs.cp was added in Node.js v16.7.0\n  // fs.statfs was added in Node v19.6.0, v18.15.0\n  // fs.glob was added in Node.js v22.0.0\n  // fs.lchown is not available on at least some Linux\n  return typeof fs[key] === 'function'\n})\n\n// Export cloned fs:\nObject.assign(exports, fs)\n\n// Universalify async methods:\napi.forEach(method => {\n  exports[method] = u(fs[method])\n})\n\n// We differ from mz/fs in that we still ship the old, broken, fs.exists()\n// since we are a drop-in replacement for the native module\nexports.exists = function (filename, callback) {\n  if (typeof callback === 'function') {\n    return fs.exists(filename, callback)\n  }\n  return new Promise(resolve => {\n    return fs.exists(filename, resolve)\n  })\n}\n\n// fs.read(), fs.write(), fs.readv(), & fs.writev() need special treatment due to multiple callback args\n\nexports.read = function (fd, buffer, offset, length, position, callback) {\n  if (typeof callback === 'function') {\n    return fs.read(fd, buffer, offset, length, position, callback)\n  }\n  return new Promise((resolve, reject) => {\n    fs.read(fd, buffer, offset, length, position, (err, bytesRead, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffer })\n    })\n  })\n}\n\n// Function signature can be\n// fs.write(fd, buffer[, offset[, length[, position]]], callback)\n// OR\n// fs.write(fd, string[, position[, encoding]], callback)\n// We need to handle both cases, so we use ...args\nexports.write = function (fd, buffer, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.write(fd, buffer, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.write(fd, buffer, ...args, (err, bytesWritten, buffer) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffer })\n    })\n  })\n}\n\n// Function signature is\n// s.readv(fd, buffers[, position], callback)\n// We need to handle the optional arg, so we use ...args\nexports.readv = function (fd, buffers, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.readv(fd, buffers, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.readv(fd, buffers, ...args, (err, bytesRead, buffers) => {\n      if (err) return reject(err)\n      resolve({ bytesRead, buffers })\n    })\n  })\n}\n\n// Function signature is\n// s.writev(fd, buffers[, position], callback)\n// We need to handle the optional arg, so we use ...args\nexports.writev = function (fd, buffers, ...args) {\n  if (typeof args[args.length - 1] === 'function') {\n    return fs.writev(fd, buffers, ...args)\n  }\n\n  return new Promise((resolve, reject) => {\n    fs.writev(fd, buffers, ...args, (err, bytesWritten, buffers) => {\n      if (err) return reject(err)\n      resolve({ bytesWritten, buffers })\n    })\n  })\n}\n\n// fs.realpath.native sometimes not available if fs is monkey-patched\nif (typeof fs.realpath.native === 'function') {\n  exports.realpath.native = u(fs.realpath.native)\n} else {\n  process.emitWarning(\n    'fs.realpath.native is not a function. Is fs being monkey-patched?',\n    'Warning', 'fs-extra-WARN0003'\n  )\n}\n", "// Adapted from https://github.com/sindresorhus/make-dir\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n// Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n'use strict'\nconst path = require('path')\n\n// https://github.com/nodejs/node/issues/8987\n// https://github.com/libuv/libuv/pull/1088\nmodule.exports.checkPath = function checkPath (pth) {\n  if (process.platform === 'win32') {\n    const pathHasInvalidWinCharacters = /[<>:\"|?*]/.test(pth.replace(path.parse(pth).root, ''))\n\n    if (pathHasInvalidWinCharacters) {\n      const error = new Error(`Path contains invalid characters: ${pth}`)\n      error.code = 'EINVAL'\n      throw error\n    }\n  }\n}\n", "'use strict'\nconst fs = require('../fs')\nconst { checkPath } = require('./utils')\n\nconst getMode = options => {\n  const defaults = { mode: 0o777 }\n  if (typeof options === 'number') return options\n  return ({ ...defaults, ...options }).mode\n}\n\nmodule.exports.makeDir = async (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdir(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n\nmodule.exports.makeDirSync = (dir, options) => {\n  checkPath(dir)\n\n  return fs.mkdirSync(dir, {\n    mode: getMode(options),\n    recursive: true\n  })\n}\n", "'use strict'\nconst u = require('universalify').fromPromise\nconst { makeDir: _makeDir, makeDirSync } = require('./make-dir')\nconst makeDir = u(_makeDir)\n\nmodule.exports = {\n  mkdirs: makeDir,\n  mkdirsSync: makeDirSync,\n  // alias\n  mkdirp: makeDir,\n  mkdirpSync: makeDirSync,\n  ensureDir: makeDir,\n  ensureDirSync: makeDirSync\n}\n", "'use strict'\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\n\nfunction pathExists (path) {\n  return fs.access(path).then(() => true).catch(() => false)\n}\n\nmodule.exports = {\n  pathExists: u(pathExists),\n  pathExistsSync: fs.existsSync\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst u = require('universalify').fromPromise\n\nasync function utimesMillis (path, atime, mtime) {\n  // if (!HAS_MILLIS_RES) return fs.utimes(path, atime, mtime, callback)\n  const fd = await fs.open(path, 'r+')\n\n  let closeErr = null\n\n  try {\n    await fs.futimes(fd, atime, mtime)\n  } finally {\n    try {\n      await fs.close(fd)\n    } catch (e) {\n      closeErr = e\n    }\n  }\n\n  if (closeErr) {\n    throw closeErr\n  }\n}\n\nfunction utimesMillisSync (path, atime, mtime) {\n  const fd = fs.openSync(path, 'r+')\n  fs.futimesSync(fd, atime, mtime)\n  return fs.closeSync(fd)\n}\n\nmodule.exports = {\n  utimesMillis: u(utimesMillis),\n  utimesMillisSync\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst u = require('universalify').fromPromise\n\nfunction getStats (src, dest, opts) {\n  const statFunc = opts.dereference\n    ? (file) => fs.stat(file, { bigint: true })\n    : (file) => fs.lstat(file, { bigint: true })\n  return Promise.all([\n    statFunc(src),\n    statFunc(dest).catch(err => {\n      if (err.code === 'ENOENT') return null\n      throw err\n    })\n  ]).then(([srcStat, destStat]) => ({ srcStat, destStat }))\n}\n\nfunction getStatsSync (src, dest, opts) {\n  let destStat\n  const statFunc = opts.dereference\n    ? (file) => fs.statSync(file, { bigint: true })\n    : (file) => fs.lstatSync(file, { bigint: true })\n  const srcStat = statFunc(src)\n  try {\n    destStat = statFunc(dest)\n  } catch (err) {\n    if (err.code === 'ENOENT') return { srcStat, destStat: null }\n    throw err\n  }\n  return { srcStat, destStat }\n}\n\nasync function checkPaths (src, dest, funcName, opts) {\n  const { srcStat, destStat } = await getStats(src, dest, opts)\n  if (destStat) {\n    if (areIdentical(srcStat, destStat)) {\n      const srcBaseName = path.basename(src)\n      const destBaseName = path.basename(dest)\n      if (funcName === 'move' &&\n        srcBaseName !== destBaseName &&\n        srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n        return { srcStat, destStat, isChangingCase: true }\n      }\n      throw new Error('Source and destination must not be the same.')\n    }\n    if (srcStat.isDirectory() && !destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n    }\n    if (!srcStat.isDirectory() && destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)\n    }\n  }\n\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n\n  return { srcStat, destStat }\n}\n\nfunction checkPathsSync (src, dest, funcName, opts) {\n  const { srcStat, destStat } = getStatsSync(src, dest, opts)\n\n  if (destStat) {\n    if (areIdentical(srcStat, destStat)) {\n      const srcBaseName = path.basename(src)\n      const destBaseName = path.basename(dest)\n      if (funcName === 'move' &&\n        srcBaseName !== destBaseName &&\n        srcBaseName.toLowerCase() === destBaseName.toLowerCase()) {\n        return { srcStat, destStat, isChangingCase: true }\n      }\n      throw new Error('Source and destination must not be the same.')\n    }\n    if (srcStat.isDirectory() && !destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite non-directory '${dest}' with directory '${src}'.`)\n    }\n    if (!srcStat.isDirectory() && destStat.isDirectory()) {\n      throw new Error(`Cannot overwrite directory '${dest}' with non-directory '${src}'.`)\n    }\n  }\n\n  if (srcStat.isDirectory() && isSrcSubdir(src, dest)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return { srcStat, destStat }\n}\n\n// recursively check if dest parent is a subdirectory of src.\n// It works for all file types including symlinks since it\n// checks the src and dest inodes. It starts from the deepest\n// parent and stops once it reaches the src parent or the root path.\nasync function checkParentPaths (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n\n  let destStat\n  try {\n    destStat = await fs.stat(destParent, { bigint: true })\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n\n  return checkParentPaths(src, srcStat, destParent, funcName)\n}\n\nfunction checkParentPathsSync (src, srcStat, dest, funcName) {\n  const srcParent = path.resolve(path.dirname(src))\n  const destParent = path.resolve(path.dirname(dest))\n  if (destParent === srcParent || destParent === path.parse(destParent).root) return\n  let destStat\n  try {\n    destStat = fs.statSync(destParent, { bigint: true })\n  } catch (err) {\n    if (err.code === 'ENOENT') return\n    throw err\n  }\n  if (areIdentical(srcStat, destStat)) {\n    throw new Error(errMsg(src, dest, funcName))\n  }\n  return checkParentPathsSync(src, srcStat, destParent, funcName)\n}\n\nfunction areIdentical (srcStat, destStat) {\n  // stat.dev can be 0n on windows when node version >= 22.x.x\n  return destStat.ino !== undefined && destStat.dev !== undefined && destStat.ino === srcStat.ino && destStat.dev === srcStat.dev\n}\n\n// return true if dest is a subdir of src, otherwise false.\n// It only checks the path strings.\nfunction isSrcSubdir (src, dest) {\n  const srcArr = path.resolve(src).split(path.sep).filter(i => i)\n  const destArr = path.resolve(dest).split(path.sep).filter(i => i)\n  return srcArr.every((cur, i) => destArr[i] === cur)\n}\n\nfunction errMsg (src, dest, funcName) {\n  return `Cannot ${funcName} '${src}' to a subdirectory of itself, '${dest}'.`\n}\n\nmodule.exports = {\n  // checkPaths\n  checkPaths: u(checkPaths),\n  checkPathsSync,\n  // checkParent\n  checkParentPaths: u(checkParentPaths),\n  checkParentPathsSync,\n  // Misc\n  isSrcSubdir,\n  areIdentical\n}\n", "'use strict'\n\n// https://github.com/jprichardson/node-fs-extra/issues/1056\n// Performing parallel operations on each item of an async iterator is\n// surprisingly hard; you need to have handlers in place to avoid getting an\n// UnhandledPromiseRejectionWarning.\n// NOTE: This function does not presently handle return values, only errors\nasync function asyncIteratorConcurrentProcess (iterator, fn) {\n  const promises = []\n  for await (const item of iterator) {\n    promises.push(\n      fn(item).then(\n        () => null,\n        (err) => err ?? new Error('unknown error')\n      )\n    )\n  }\n  await Promise.all(\n    promises.map((promise) =>\n      promise.then((possibleErr) => {\n        if (possibleErr !== null) throw possibleErr\n      })\n    )\n  )\n}\n\nmodule.exports = {\n  asyncIteratorConcurrentProcess\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst { mkdirs } = require('../mkdirs')\nconst { pathExists } = require('../path-exists')\nconst { utimesMillis } = require('../util/utimes')\nconst stat = require('../util/stat')\nconst { asyncIteratorConcurrentProcess } = require('../util/async')\n\nasync function copy (src, dest, opts = {}) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0001'\n    )\n  }\n\n  const { srcStat, destStat } = await stat.checkPaths(src, dest, 'copy', opts)\n\n  await stat.checkParentPaths(src, srcStat, dest, 'copy')\n\n  const include = await runFilter(src, dest, opts)\n\n  if (!include) return\n\n  // check if the parent of dest exists, and create it if it doesn't exist\n  const destParent = path.dirname(dest)\n  const dirExists = await pathExists(destParent)\n  if (!dirExists) {\n    await mkdirs(destParent)\n  }\n\n  await getStatsAndPerformCopy(destStat, src, dest, opts)\n}\n\nasync function runFilter (src, dest, opts) {\n  if (!opts.filter) return true\n  return opts.filter(src, dest)\n}\n\nasync function getStatsAndPerformCopy (destStat, src, dest, opts) {\n  const statFn = opts.dereference ? fs.stat : fs.lstat\n  const srcStat = await statFn(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n\n  if (\n    srcStat.isFile() ||\n    srcStat.isCharacterDevice() ||\n    srcStat.isBlockDevice()\n  ) return onFile(srcStat, destStat, src, dest, opts)\n\n  if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n  if (srcStat.isSocket()) throw new Error(`Cannot copy a socket file: ${src}`)\n  if (srcStat.isFIFO()) throw new Error(`Cannot copy a FIFO pipe: ${src}`)\n  throw new Error(`Unknown file: ${src}`)\n}\n\nasync function onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n\n  if (opts.overwrite) {\n    await fs.unlink(dest)\n    return copyFile(srcStat, src, dest, opts)\n  }\n  if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nasync function copyFile (srcStat, src, dest, opts) {\n  await fs.copyFile(src, dest)\n  if (opts.preserveTimestamps) {\n    // Make sure the file is writable before setting the timestamp\n    // otherwise open fails with EPERM when invoked with 'r+'\n    // (through utimes call)\n    if (fileIsNotWritable(srcStat.mode)) {\n      await makeFileWritable(dest, srcStat.mode)\n    }\n\n    // Set timestamps and mode correspondingly\n\n    // Note that The initial srcStat.atime cannot be trusted\n    // because it is modified by the read(2) system call\n    // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n    const updatedSrcStat = await fs.stat(src)\n    await utimesMillis(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n  }\n\n  return fs.chmod(dest, srcStat.mode)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return fs.chmod(dest, srcMode | 0o200)\n}\n\nasync function onDir (srcStat, destStat, src, dest, opts) {\n  // the dest directory might not exist, create it\n  if (!destStat) {\n    await fs.mkdir(dest)\n  }\n\n  // iterate through the files in the current directory to copy everything\n  await asyncIteratorConcurrentProcess(await fs.opendir(src), async (item) => {\n    const srcItem = path.join(src, item.name)\n    const destItem = path.join(dest, item.name)\n\n    const include = await runFilter(srcItem, destItem, opts)\n    // only copy the item if it matches the filter function\n    if (include) {\n      const { destStat } = await stat.checkPaths(srcItem, destItem, 'copy', opts)\n      // If the item is a copyable file, `getStatsAndPerformCopy` will copy it\n      // If the item is a directory, `getStatsAndPerformCopy` will call `onDir` recursively\n      await getStatsAndPerformCopy(destStat, srcItem, destItem, opts)\n    }\n  })\n\n  if (!destStat) {\n    await fs.chmod(dest, srcStat.mode)\n  }\n}\n\nasync function onLink (destStat, src, dest, opts) {\n  let resolvedSrc = await fs.readlink(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n  if (!destStat) {\n    return fs.symlink(resolvedSrc, dest)\n  }\n\n  let resolvedDest = null\n  try {\n    resolvedDest = await fs.readlink(dest)\n  } catch (e) {\n    // dest exists and is a regular file or directory,\n    // Windows may throw UNKNOWN error. If dest already exists,\n    // fs throws error anyway, so no need to guard against it here.\n    if (e.code === 'EINVAL' || e.code === 'UNKNOWN') return fs.symlink(resolvedSrc, dest)\n    throw e\n  }\n  if (opts.dereference) {\n    resolvedDest = path.resolve(process.cwd(), resolvedDest)\n  }\n  // If both symlinks resolve to the same target, they are still distinct symlinks\n  // that can be copied/overwritten. Only check subdirectory constraints when\n  // the resolved paths are different.\n  if (resolvedSrc !== resolvedDest) {\n    if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n      throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n    }\n\n    // do not copy if src is a subdir of dest since unlinking\n    // dest in this case would result in removing src contents\n    // and therefore a broken symlink would be created.\n    if (stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n      throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n    }\n  }\n\n  // copy the link\n  await fs.unlink(dest)\n  return fs.symlink(resolvedSrc, dest)\n}\n\nmodule.exports = copy\n", "'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst mkdirsSync = require('../mkdirs').mkdirsSync\nconst utimesMillisSync = require('../util/utimes').utimesMillisSync\nconst stat = require('../util/stat')\n\nfunction copySync (src, dest, opts) {\n  if (typeof opts === 'function') {\n    opts = { filter: opts }\n  }\n\n  opts = opts || {}\n  opts.clobber = 'clobber' in opts ? !!opts.clobber : true // default to true for now\n  opts.overwrite = 'overwrite' in opts ? !!opts.overwrite : opts.clobber // overwrite falls back to clobber\n\n  // Warn about using preserveTimestamps on 32-bit node\n  if (opts.preserveTimestamps && process.arch === 'ia32') {\n    process.emitWarning(\n      'Using the preserveTimestamps option in 32-bit node is not recommended;\\n\\n' +\n      '\\tsee https://github.com/jprichardson/node-fs-extra/issues/269',\n      'Warning', 'fs-extra-WARN0002'\n    )\n  }\n\n  const { srcStat, destStat } = stat.checkPathsSync(src, dest, 'copy', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'copy')\n  if (opts.filter && !opts.filter(src, dest)) return\n  const destParent = path.dirname(dest)\n  if (!fs.existsSync(destParent)) mkdirsSync(destParent)\n  return getStats(destStat, src, dest, opts)\n}\n\nfunction getStats (destStat, src, dest, opts) {\n  const statSync = opts.dereference ? fs.statSync : fs.lstatSync\n  const srcStat = statSync(src)\n\n  if (srcStat.isDirectory()) return onDir(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isFile() ||\n           srcStat.isCharacterDevice() ||\n           srcStat.isBlockDevice()) return onFile(srcStat, destStat, src, dest, opts)\n  else if (srcStat.isSymbolicLink()) return onLink(destStat, src, dest, opts)\n  else if (srcStat.isSocket()) throw new Error(`Cannot copy a socket file: ${src}`)\n  else if (srcStat.isFIFO()) throw new Error(`Cannot copy a FIFO pipe: ${src}`)\n  throw new Error(`Unknown file: ${src}`)\n}\n\nfunction onFile (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return copyFile(srcStat, src, dest, opts)\n  return mayCopyFile(srcStat, src, dest, opts)\n}\n\nfunction mayCopyFile (srcStat, src, dest, opts) {\n  if (opts.overwrite) {\n    fs.unlinkSync(dest)\n    return copyFile(srcStat, src, dest, opts)\n  } else if (opts.errorOnExist) {\n    throw new Error(`'${dest}' already exists`)\n  }\n}\n\nfunction copyFile (srcStat, src, dest, opts) {\n  fs.copyFileSync(src, dest)\n  if (opts.preserveTimestamps) handleTimestamps(srcStat.mode, src, dest)\n  return setDestMode(dest, srcStat.mode)\n}\n\nfunction handleTimestamps (srcMode, src, dest) {\n  // Make sure the file is writable before setting the timestamp\n  // otherwise open fails with EPERM when invoked with 'r+'\n  // (through utimes call)\n  if (fileIsNotWritable(srcMode)) makeFileWritable(dest, srcMode)\n  return setDestTimestamps(src, dest)\n}\n\nfunction fileIsNotWritable (srcMode) {\n  return (srcMode & 0o200) === 0\n}\n\nfunction makeFileWritable (dest, srcMode) {\n  return setDestMode(dest, srcMode | 0o200)\n}\n\nfunction setDestMode (dest, srcMode) {\n  return fs.chmodSync(dest, srcMode)\n}\n\nfunction setDestTimestamps (src, dest) {\n  // The initial srcStat.atime cannot be trusted\n  // because it is modified by the read(2) system call\n  // (See https://nodejs.org/api/fs.html#fs_stat_time_values)\n  const updatedSrcStat = fs.statSync(src)\n  return utimesMillisSync(dest, updatedSrcStat.atime, updatedSrcStat.mtime)\n}\n\nfunction onDir (srcStat, destStat, src, dest, opts) {\n  if (!destStat) return mkDirAndCopy(srcStat.mode, src, dest, opts)\n  return copyDir(src, dest, opts)\n}\n\nfunction mkDirAndCopy (srcMode, src, dest, opts) {\n  fs.mkdirSync(dest)\n  copyDir(src, dest, opts)\n  return setDestMode(dest, srcMode)\n}\n\nfunction copyDir (src, dest, opts) {\n  const dir = fs.opendirSync(src)\n\n  try {\n    let dirent\n\n    while ((dirent = dir.readSync()) !== null) {\n      copyDirItem(dirent.name, src, dest, opts)\n    }\n  } finally {\n    dir.closeSync()\n  }\n}\n\nfunction copyDirItem (item, src, dest, opts) {\n  const srcItem = path.join(src, item)\n  const destItem = path.join(dest, item)\n  if (opts.filter && !opts.filter(srcItem, destItem)) return\n  const { destStat } = stat.checkPathsSync(srcItem, destItem, 'copy', opts)\n  return getStats(destStat, srcItem, destItem, opts)\n}\n\nfunction onLink (destStat, src, dest, opts) {\n  let resolvedSrc = fs.readlinkSync(src)\n  if (opts.dereference) {\n    resolvedSrc = path.resolve(process.cwd(), resolvedSrc)\n  }\n\n  if (!destStat) {\n    return fs.symlinkSync(resolvedSrc, dest)\n  } else {\n    let resolvedDest\n    try {\n      resolvedDest = fs.readlinkSync(dest)\n    } catch (err) {\n      // dest exists and is a regular file or directory,\n      // Windows may throw UNKNOWN error. If dest already exists,\n      // fs throws error anyway, so no need to guard against it here.\n      if (err.code === 'EINVAL' || err.code === 'UNKNOWN') return fs.symlinkSync(resolvedSrc, dest)\n      throw err\n    }\n    if (opts.dereference) {\n      resolvedDest = path.resolve(process.cwd(), resolvedDest)\n    }\n    // If both symlinks resolve to the same target, they are still distinct symlinks\n    // that can be copied/overwritten. Only check subdirectory constraints when\n    // the resolved paths are different.\n    if (resolvedSrc !== resolvedDest) {\n      if (stat.isSrcSubdir(resolvedSrc, resolvedDest)) {\n        throw new Error(`Cannot copy '${resolvedSrc}' to a subdirectory of itself, '${resolvedDest}'.`)\n      }\n\n      // prevent copy if src is a subdir of dest since unlinking\n      // dest in this case would result in removing src contents\n      // and therefore a broken symlink would be created.\n      if (stat.isSrcSubdir(resolvedDest, resolvedSrc)) {\n        throw new Error(`Cannot overwrite '${resolvedDest}' with '${resolvedSrc}'.`)\n      }\n    }\n    return copyLink(resolvedSrc, dest)\n  }\n}\n\nfunction copyLink (resolvedSrc, dest) {\n  fs.unlinkSync(dest)\n  return fs.symlinkSync(resolvedSrc, dest)\n}\n\nmodule.exports = copySync\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nmodule.exports = {\n  copy: u(require('./copy')),\n  copySync: require('./copy-sync')\n}\n", "'use strict'\n\nconst fs = require('graceful-fs')\nconst u = require('universalify').fromCallback\n\nfunction remove (path, callback) {\n  fs.rm(path, { recursive: true, force: true }, callback)\n}\n\nfunction removeSync (path) {\n  fs.rmSync(path, { recursive: true, force: true })\n}\n\nmodule.exports = {\n  remove: u(remove),\n  removeSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst remove = require('../remove')\n\nconst emptyDir = u(async function emptyDir (dir) {\n  let items\n  try {\n    items = await fs.readdir(dir)\n  } catch {\n    return mkdir.mkdirs(dir)\n  }\n\n  return Promise.all(items.map(item => remove.remove(path.join(dir, item))))\n})\n\nfunction emptyDirSync (dir) {\n  let items\n  try {\n    items = fs.readdirSync(dir)\n  } catch {\n    return mkdir.mkdirsSync(dir)\n  }\n\n  items.forEach(item => {\n    item = path.join(dir, item)\n    remove.removeSync(item)\n  })\n}\n\nmodule.exports = {\n  emptyDirSync,\n  emptydirSync: emptyDirSync,\n  emptyDir,\n  emptydir: emptyDir\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst path = require('path')\nconst fs = require('../fs')\nconst mkdir = require('../mkdirs')\n\nasync function createFile (file) {\n  let stats\n  try {\n    stats = await fs.stat(file)\n  } catch { }\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n\n  let dirStats = null\n  try {\n    dirStats = await fs.stat(dir)\n  } catch (err) {\n    // if the directory doesn't exist, make it\n    if (err.code === 'ENOENT') {\n      await mkdir.mkdirs(dir)\n      await fs.writeFile(file, '')\n      return\n    } else {\n      throw err\n    }\n  }\n\n  if (dirStats.isDirectory()) {\n    await fs.writeFile(file, '')\n  } else {\n    // parent is not a directory\n    // This is just to cause an internal ENOTDIR error to be thrown\n    await fs.readdir(dir)\n  }\n}\n\nfunction createFileSync (file) {\n  let stats\n  try {\n    stats = fs.statSync(file)\n  } catch { }\n  if (stats && stats.isFile()) return\n\n  const dir = path.dirname(file)\n  try {\n    if (!fs.statSync(dir).isDirectory()) {\n      // parent is not a directory\n      // This is just to cause an internal ENOTDIR error to be thrown\n      fs.readdirSync(dir)\n    }\n  } catch (err) {\n    // If the stat call above failed because the directory doesn't exist, create it\n    if (err && err.code === 'ENOENT') mkdir.mkdirsSync(dir)\n    else throw err\n  }\n\n  fs.writeFileSync(file, '')\n}\n\nmodule.exports = {\n  createFile: u(createFile),\n  createFileSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst path = require('path')\nconst fs = require('../fs')\nconst mkdir = require('../mkdirs')\nconst { pathExists } = require('../path-exists')\nconst { areIdentical } = require('../util/stat')\n\nasync function createLink (srcpath, dstpath) {\n  let dstStat\n  try {\n    dstStat = await fs.lstat(dstpath)\n  } catch {\n    // ignore error\n  }\n\n  let srcStat\n  try {\n    srcStat = await fs.lstat(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  if (dstStat && areIdentical(srcStat, dstStat)) return\n\n  const dir = path.dirname(dstpath)\n\n  const dirExists = await pathExists(dir)\n\n  if (!dirExists) {\n    await mkdir.mkdirs(dir)\n  }\n\n  await fs.link(srcpath, dstpath)\n}\n\nfunction createLinkSync (srcpath, dstpath) {\n  let dstStat\n  try {\n    dstStat = fs.lstatSync(dstpath)\n  } catch {}\n\n  try {\n    const srcStat = fs.lstatSync(srcpath)\n    if (dstStat && areIdentical(srcStat, dstStat)) return\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureLink')\n    throw err\n  }\n\n  const dir = path.dirname(dstpath)\n  const dirExists = fs.existsSync(dir)\n  if (dirExists) return fs.linkSync(srcpath, dstpath)\n  mkdir.mkdirsSync(dir)\n\n  return fs.linkSync(srcpath, dstpath)\n}\n\nmodule.exports = {\n  createLink: u(createLink),\n  createLinkSync\n}\n", "'use strict'\n\nconst path = require('path')\nconst fs = require('../fs')\nconst { pathExists } = require('../path-exists')\n\nconst u = require('universalify').fromPromise\n\n/**\n * Function that returns two types of paths, one relative to symlink, and one\n * relative to the current working directory. Checks if path is absolute or\n * relative. If the path is relative, this function checks if the path is\n * relative to symlink or relative to current working directory. This is an\n * initiative to find a smarter `srcpath` to supply when building symlinks.\n * This allows you to determine which path to use out of one of three possible\n * types of source paths. The first is an absolute path. This is detected by\n * `path.isAbsolute()`. When an absolute path is provided, it is checked to\n * see if it exists. If it does it's used, if not an error is returned\n * (callback)/ thrown (sync). The other two options for `srcpath` are a\n * relative url. By default Node's `fs.symlink` works by creating a symlink\n * using `dstpath` and expects the `srcpath` to be relative to the newly\n * created symlink. If you provide a `srcpath` that does not exist on the file\n * system it results in a broken symlink. To minimize this, the function\n * checks to see if the 'relative to symlink' source file exists, and if it\n * does it will use it. If it does not, it checks if there's a file that\n * exists that is relative to the current working directory, if does its used.\n * This preserves the expectations of the original fs.symlink spec and adds\n * the ability to pass in `relative to current working direcotry` paths.\n */\n\nasync function symlinkPaths (srcpath, dstpath) {\n  if (path.isAbsolute(srcpath)) {\n    try {\n      await fs.lstat(srcpath)\n    } catch (err) {\n      err.message = err.message.replace('lstat', 'ensureSymlink')\n      throw err\n    }\n\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  }\n\n  const dstdir = path.dirname(dstpath)\n  const relativeToDst = path.join(dstdir, srcpath)\n\n  const exists = await pathExists(relativeToDst)\n  if (exists) {\n    return {\n      toCwd: relativeToDst,\n      toDst: srcpath\n    }\n  }\n\n  try {\n    await fs.lstat(srcpath)\n  } catch (err) {\n    err.message = err.message.replace('lstat', 'ensureSymlink')\n    throw err\n  }\n\n  return {\n    toCwd: srcpath,\n    toDst: path.relative(dstdir, srcpath)\n  }\n}\n\nfunction symlinkPathsSync (srcpath, dstpath) {\n  if (path.isAbsolute(srcpath)) {\n    const exists = fs.existsSync(srcpath)\n    if (!exists) throw new Error('absolute srcpath does not exist')\n    return {\n      toCwd: srcpath,\n      toDst: srcpath\n    }\n  }\n\n  const dstdir = path.dirname(dstpath)\n  const relativeToDst = path.join(dstdir, srcpath)\n  const exists = fs.existsSync(relativeToDst)\n  if (exists) {\n    return {\n      toCwd: relativeToDst,\n      toDst: srcpath\n    }\n  }\n\n  const srcExists = fs.existsSync(srcpath)\n  if (!srcExists) throw new Error('relative srcpath does not exist')\n  return {\n    toCwd: srcpath,\n    toDst: path.relative(dstdir, srcpath)\n  }\n}\n\nmodule.exports = {\n  symlinkPaths: u(symlinkPaths),\n  symlinkPathsSync\n}\n", "'use strict'\n\nconst fs = require('../fs')\nconst u = require('universalify').fromPromise\n\nasync function symlinkType (srcpath, type) {\n  if (type) return type\n\n  let stats\n  try {\n    stats = await fs.lstat(srcpath)\n  } catch {\n    return 'file'\n  }\n\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nfunction symlinkTypeSync (srcpath, type) {\n  if (type) return type\n\n  let stats\n  try {\n    stats = fs.lstatSync(srcpath)\n  } catch {\n    return 'file'\n  }\n  return (stats && stats.isDirectory()) ? 'dir' : 'file'\n}\n\nmodule.exports = {\n  symlinkType: u(symlinkType),\n  symlinkTypeSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst path = require('path')\nconst fs = require('../fs')\n\nconst { mkdirs, mkdirsSync } = require('../mkdirs')\n\nconst { symlinkPaths, symlinkPathsSync } = require('./symlink-paths')\nconst { symlinkType, symlinkTypeSync } = require('./symlink-type')\n\nconst { pathExists } = require('../path-exists')\n\nconst { areIdentical } = require('../util/stat')\n\nasync function createSymlink (srcpath, dstpath, type) {\n  let stats\n  try {\n    stats = await fs.lstat(dstpath)\n  } catch { }\n\n  if (stats && stats.isSymbolicLink()) {\n    const [srcStat, dstStat] = await Promise.all([\n      fs.stat(srcpath),\n      fs.stat(dstpath)\n    ])\n\n    if (areIdentical(srcStat, dstStat)) return\n  }\n\n  const relative = await symlinkPaths(srcpath, dstpath)\n  srcpath = relative.toDst\n  const toType = await symlinkType(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n\n  if (!(await pathExists(dir))) {\n    await mkdirs(dir)\n  }\n\n  return fs.symlink(srcpath, dstpath, toType)\n}\n\nfunction createSymlinkSync (srcpath, dstpath, type) {\n  let stats\n  try {\n    stats = fs.lstatSync(dstpath)\n  } catch { }\n  if (stats && stats.isSymbolicLink()) {\n    const srcStat = fs.statSync(srcpath)\n    const dstStat = fs.statSync(dstpath)\n    if (areIdentical(srcStat, dstStat)) return\n  }\n\n  const relative = symlinkPathsSync(srcpath, dstpath)\n  srcpath = relative.toDst\n  type = symlinkTypeSync(relative.toCwd, type)\n  const dir = path.dirname(dstpath)\n  const exists = fs.existsSync(dir)\n  if (exists) return fs.symlinkSync(srcpath, dstpath, type)\n  mkdirsSync(dir)\n  return fs.symlinkSync(srcpath, dstpath, type)\n}\n\nmodule.exports = {\n  createSymlink: u(createSymlink),\n  createSymlinkSync\n}\n", "'use strict'\n\nconst { createFile, createFileSync } = require('./file')\nconst { createLink, createLinkSync } = require('./link')\nconst { createSymlink, createSymlinkSync } = require('./symlink')\n\nmodule.exports = {\n  // file\n  createFile,\n  createFileSync,\n  ensureFile: createFile,\n  ensureFileSync: createFileSync,\n  // link\n  createLink,\n  createLinkSync,\n  ensureLink: createLink,\n  ensureLinkSync: createLinkSync,\n  // symlink\n  createSymlink,\n  createSymlinkSync,\n  ensureSymlink: createSymlink,\n  ensureSymlinkSync: createSymlinkSync\n}\n", "function stringify (obj, { EOL = '\\n', finalEOL = true, replacer = null, spaces } = {}) {\n  const EOF = finalEOL ? EOL : ''\n  const str = JSON.stringify(obj, replacer, spaces)\n\n  return str.replace(/\\n/g, EOL) + EOF\n}\n\nfunction stripBom (content) {\n  // we do this because JSON.parse would convert it to a utf8 string if encoding wasn't specified\n  if (Buffer.isBuffer(content)) content = content.toString('utf8')\n  return content.replace(/^\\uFEFF/, '')\n}\n\nmodule.exports = { stringify, stripBom }\n", "let _fs\ntry {\n  _fs = require('graceful-fs')\n} catch (_) {\n  _fs = require('fs')\n}\nconst universalify = require('universalify')\nconst { stringify, stripBom } = require('./utils')\n\nasync function _readFile (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  let data = await universalify.fromCallback(fs.readFile)(file, options)\n\n  data = stripBom(data)\n\n  let obj\n  try {\n    obj = JSON.parse(data, options ? options.reviver : null)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n\n  return obj\n}\n\nconst readFile = universalify.fromPromise(_readFile)\n\nfunction readFileSync (file, options = {}) {\n  if (typeof options === 'string') {\n    options = { encoding: options }\n  }\n\n  const fs = options.fs || _fs\n\n  const shouldThrow = 'throws' in options ? options.throws : true\n\n  try {\n    let content = fs.readFileSync(file, options)\n    content = stripBom(content)\n    return JSON.parse(content, options.reviver)\n  } catch (err) {\n    if (shouldThrow) {\n      err.message = `${file}: ${err.message}`\n      throw err\n    } else {\n      return null\n    }\n  }\n}\n\nasync function _writeFile (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n\n  await universalify.fromCallback(fs.writeFile)(file, str, options)\n}\n\nconst writeFile = universalify.fromPromise(_writeFile)\n\nfunction writeFileSync (file, obj, options = {}) {\n  const fs = options.fs || _fs\n\n  const str = stringify(obj, options)\n  // not sure if fs.writeFileSync returns anything, but just in case\n  return fs.writeFileSync(file, str, options)\n}\n\n// NOTE: do not change this export format; required for ESM compat\n// see https://github.com/jprichardson/node-jsonfile/pull/162 for details\nmodule.exports = {\n  readFile,\n  readFileSync,\n  writeFile,\n  writeFileSync\n}\n", "'use strict'\n\nconst jsonFile = require('jsonfile')\n\nmodule.exports = {\n  // jsonfile exports\n  readJson: jsonFile.readFile,\n  readJsonSync: jsonFile.readFileSync,\n  writeJson: jsonFile.writeFile,\n  writeJsonSync: jsonFile.writeFileSync\n}\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst fs = require('../fs')\nconst path = require('path')\nconst mkdir = require('../mkdirs')\nconst pathExists = require('../path-exists').pathExists\n\nasync function outputFile (file, data, encoding = 'utf-8') {\n  const dir = path.dirname(file)\n\n  if (!(await pathExists(dir))) {\n    await mkdir.mkdirs(dir)\n  }\n\n  return fs.writeFile(file, data, encoding)\n}\n\nfunction outputFileSync (file, ...args) {\n  const dir = path.dirname(file)\n  if (!fs.existsSync(dir)) {\n    mkdir.mkdirsSync(dir)\n  }\n\n  fs.writeFileSync(file, ...args)\n}\n\nmodule.exports = {\n  outputFile: u(outputFile),\n  outputFileSync\n}\n", "'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFile } = require('../output-file')\n\nasync function outputJson (file, data, options = {}) {\n  const str = stringify(data, options)\n\n  await outputFile(file, str, options)\n}\n\nmodule.exports = outputJson\n", "'use strict'\n\nconst { stringify } = require('jsonfile/utils')\nconst { outputFileSync } = require('../output-file')\n\nfunction outputJsonSync (file, data, options) {\n  const str = stringify(data, options)\n\n  outputFileSync(file, str, options)\n}\n\nmodule.exports = outputJsonSync\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nconst jsonFile = require('./jsonfile')\n\njsonFile.outputJson = u(require('./output-json'))\njsonFile.outputJsonSync = require('./output-json-sync')\n// aliases\njsonFile.outputJSON = jsonFile.outputJson\njsonFile.outputJSONSync = jsonFile.outputJsonSync\njsonFile.writeJSON = jsonFile.writeJson\njsonFile.writeJSONSync = jsonFile.writeJsonSync\njsonFile.readJSON = jsonFile.readJson\njsonFile.readJSONSync = jsonFile.readJsonSync\n\nmodule.exports = jsonFile\n", "'use strict'\n\nconst fs = require('../fs')\nconst path = require('path')\nconst { copy } = require('../copy')\nconst { remove } = require('../remove')\nconst { mkdirp } = require('../mkdirs')\nconst { pathExists } = require('../path-exists')\nconst stat = require('../util/stat')\n\nasync function move (src, dest, opts = {}) {\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat, isChangingCase = false } = await stat.checkPaths(src, dest, 'move', opts)\n\n  await stat.checkParentPaths(src, srcStat, dest, 'move')\n\n  // If the parent of dest is not root, make sure it exists before proceeding\n  const destParent = path.dirname(dest)\n  const parsedParentPath = path.parse(destParent)\n  if (parsedParentPath.root !== destParent) {\n    await mkdirp(destParent)\n  }\n\n  return doRename(src, dest, overwrite, isChangingCase)\n}\n\nasync function doRename (src, dest, overwrite, isChangingCase) {\n  if (!isChangingCase) {\n    if (overwrite) {\n      await remove(dest)\n    } else if (await pathExists(dest)) {\n      throw new Error('dest already exists.')\n    }\n  }\n\n  try {\n    // Try w/ rename first, and try copy + remove if EXDEV\n    await fs.rename(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') {\n      throw err\n    }\n    await moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nasync function moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true,\n    preserveTimestamps: true\n  }\n\n  await copy(src, dest, opts)\n  return remove(src)\n}\n\nmodule.exports = move\n", "'use strict'\n\nconst fs = require('graceful-fs')\nconst path = require('path')\nconst copySync = require('../copy').copySync\nconst removeSync = require('../remove').removeSync\nconst mkdirpSync = require('../mkdirs').mkdirpSync\nconst stat = require('../util/stat')\n\nfunction moveSync (src, dest, opts) {\n  opts = opts || {}\n  const overwrite = opts.overwrite || opts.clobber || false\n\n  const { srcStat, isChangingCase = false } = stat.checkPathsSync(src, dest, 'move', opts)\n  stat.checkParentPathsSync(src, srcStat, dest, 'move')\n  if (!isParentRoot(dest)) mkdirpSync(path.dirname(dest))\n  return doRename(src, dest, overwrite, isChangingCase)\n}\n\nfunction isParentRoot (dest) {\n  const parent = path.dirname(dest)\n  const parsedPath = path.parse(parent)\n  return parsedPath.root === parent\n}\n\nfunction doRename (src, dest, overwrite, isChangingCase) {\n  if (isChangingCase) return rename(src, dest, overwrite)\n  if (overwrite) {\n    removeSync(dest)\n    return rename(src, dest, overwrite)\n  }\n  if (fs.existsSync(dest)) throw new Error('dest already exists.')\n  return rename(src, dest, overwrite)\n}\n\nfunction rename (src, dest, overwrite) {\n  try {\n    fs.renameSync(src, dest)\n  } catch (err) {\n    if (err.code !== 'EXDEV') throw err\n    return moveAcrossDevice(src, dest, overwrite)\n  }\n}\n\nfunction moveAcrossDevice (src, dest, overwrite) {\n  const opts = {\n    overwrite,\n    errorOnExist: true,\n    preserveTimestamps: true\n  }\n  copySync(src, dest, opts)\n  return removeSync(src)\n}\n\nmodule.exports = moveSync\n", "'use strict'\n\nconst u = require('universalify').fromPromise\nmodule.exports = {\n  move: u(require('./move')),\n  moveSync: require('./move-sync')\n}\n", "'use strict'\n\nmodule.exports = {\n  // Export promiseified graceful-fs:\n  ...require('./fs'),\n  // Export extra methods:\n  ...require('./copy'),\n  ...require('./empty'),\n  ...require('./ensure'),\n  ...require('./json'),\n  ...require('./mkdirs'),\n  ...require('./move'),\n  ...require('./output-file'),\n  ...require('./path-exists'),\n  ...require('./remove')\n}\n", "module.exports = Extract;\n\nconst Parse = require('./parse');\nconst fs = require('fs-extra');\nconst path = require('path');\nconst stream = require('stream');\nconst duplexer2 = require('duplexer2');\n\nfunction Extract (opts) {\n  // make sure path is normalized before using it\n  opts.path = path.resolve(path.normalize(opts.path));\n\n  const parser = new Parse(opts);\n\n  const outStream = new stream.Writable({objectMode: true});\n  outStream._write = async function(entry, encoding, cb) {\n\n    // to avoid zip slip (writing outside of the destination), we resolve\n    // the target path, and make sure it's nested in the intended\n    // destination, or not extract it otherwise.\n    // NOTE: Need to normalize to forward slashes for UNIX OS's to properly\n    // ignore the zip slipped file entirely\n    const extractPath = path.join(opts.path, entry.path.replace(/\\\\/g, '/'));\n    if (extractPath.indexOf(opts.path) != 0) {\n      return cb();\n    }\n\n\n    if (entry.type == 'Directory') {\n      await fs.ensureDir(extractPath);\n      return cb();\n    }\n\n    await fs.ensureDir(path.dirname(extractPath));\n\n    const writer = opts.getWriter ? opts.getWriter({path: extractPath}) : fs.createWriteStream(extractPath);\n\n    entry.pipe(writer)\n      .on('error', cb)\n      .on('close', cb);\n  };\n\n  const extract = duplexer2(parser, outStream);\n  parser.once('crx-header', function(crxHeader) {\n    extract.crxHeader = crxHeader;\n  });\n\n  parser\n    .pipe(outStream)\n    .on('finish', function() {\n      extract.emit('close');\n    });\n\n  extract.promise = function() {\n    return new Promise(function(resolve, reject) {\n      extract.on('close', resolve);\n      extract.on('error', reject);\n    });\n  };\n\n  return extract;\n}\n", "//     Int64.js\n//\n//     Copyright (c) 2012 Robert Kieffer\n//     MIT License - http://opensource.org/licenses/mit-license.php\n\n/**\n * Support for handling 64-bit int numbers in Javascript (node.js)\n *\n * JS Numbers are IEEE-754 binary double-precision floats, which limits the\n * range of values that can be represented with integer precision to:\n *\n * 2^^53 <= N <= 2^53\n *\n * Int64 objects wrap a node Buffer that holds the 8-bytes of int64 data.  These\n * objects operate directly on the buffer which means that if they are created\n * using an existing buffer then setting the value will modify the Buffer, and\n * vice-versa.\n *\n * Internal Representation\n *\n * The internal buffer format is Big Endian.  I.e. the most-significant byte is\n * at buffer[0], the least-significant at buffer[7].  For the purposes of\n * converting to/from JS native numbers, the value is assumed to be a signed\n * integer stored in 2's complement form.\n *\n * For details about IEEE-754 see:\n * http://en.wikipedia.org/wiki/Double_precision_floating-point_format\n */\n\n// Useful masks and values for bit twiddling\nvar MASK31 =  0x7fffffff, VAL31 = 0x80000000;\nvar MASK32 =  0xffffffff, VAL32 = 0x100000000;\n\n// Map for converting hex octets to strings\nvar _HEX = [];\nfor (var i = 0; i < 256; i++) {\n  _HEX[i] = (i > 0xF ? '' : '0') + i.toString(16);\n}\n\n//\n// Int64\n//\n\n/**\n * Constructor accepts any of the following argument types:\n *\n * new Int64(buffer[, offset=0]) - Existing Buffer with byte offset\n * new Int64(Uint8Array[, offset=0]) - Existing Uint8Array with a byte offset\n * new Int64(string)             - Hex string (throws if n is outside int64 range)\n * new Int64(number)             - Number (throws if n is outside int64 range)\n * new Int64(hi, lo)             - Raw bits as two 32-bit values\n */\nvar Int64 = module.exports = function(a1, a2) {\n  if (a1 instanceof Buffer) {\n    this.buffer = a1;\n    this.offset = a2 || 0;\n  } else if (Object.prototype.toString.call(a1) == '[object Uint8Array]') {\n    // Under Browserify, Buffers can extend Uint8Arrays rather than an\n    // instance of Buffer. We could assume the passed in Uint8Array is actually\n    // a buffer but that won't handle the case where a raw Uint8Array is passed\n    // in. We construct a new Buffer just in case.\n    this.buffer = new Buffer(a1);\n    this.offset = a2 || 0;\n  } else {\n    this.buffer = this.buffer || new Buffer(8);\n    this.offset = 0;\n    this.setValue.apply(this, arguments);\n  }\n};\n\n\n// Max integer value that JS can accurately represent\nInt64.MAX_INT = Math.pow(2, 53);\n\n// Min integer value that JS can accurately represent\nInt64.MIN_INT = -Math.pow(2, 53);\n\nInt64.prototype = {\n\n  constructor: Int64,\n\n  /**\n   * Do in-place 2's compliment.  See\n   * http://en.wikipedia.org/wiki/Two's_complement\n   */\n  _2scomp: function() {\n    var b = this.buffer, o = this.offset, carry = 1;\n    for (var i = o + 7; i >= o; i--) {\n      var v = (b[i] ^ 0xff) + carry;\n      b[i] = v & 0xff;\n      carry = v >> 8;\n    }\n  },\n\n  /**\n   * Set the value. Takes any of the following arguments:\n   *\n   * setValue(string) - A hexidecimal string\n   * setValue(number) - Number (throws if n is outside int64 range)\n   * setValue(hi, lo) - Raw bits as two 32-bit values\n   */\n  setValue: function(hi, lo) {\n    var negate = false;\n    if (arguments.length == 1) {\n      if (typeof(hi) == 'number') {\n        // Simplify bitfield retrieval by using abs() value.  We restore sign\n        // later\n        negate = hi < 0;\n        hi = Math.abs(hi);\n        lo = hi % VAL32;\n        hi = hi / VAL32;\n        if (hi > VAL32) throw new RangeError(hi  + ' is outside Int64 range');\n        hi = hi | 0;\n      } else if (typeof(hi) == 'string') {\n        hi = (hi + '').replace(/^0x/, '');\n        lo = hi.substr(-8);\n        hi = hi.length > 8 ? hi.substr(0, hi.length - 8) : '';\n        hi = parseInt(hi, 16);\n        lo = parseInt(lo, 16);\n      } else {\n        throw new Error(hi + ' must be a Number or String');\n      }\n    }\n\n    // Technically we should throw if hi or lo is outside int32 range here, but\n    // it's not worth the effort. Anything past the 32'nd bit is ignored.\n\n    // Copy bytes to buffer\n    var b = this.buffer, o = this.offset;\n    for (var i = 7; i >= 0; i--) {\n      b[o+i] = lo & 0xff;\n      lo = i == 4 ? hi : lo >>> 8;\n    }\n\n    // Restore sign of passed argument\n    if (negate) this._2scomp();\n  },\n\n  /**\n   * Convert to a native JS number.\n   *\n   * WARNING: Do not expect this value to be accurate to integer precision for\n   * large (positive or negative) numbers!\n   *\n   * @param allowImprecise If true, no check is performed to verify the\n   * returned value is accurate to integer precision.  If false, imprecise\n   * numbers (very large positive or negative numbers) will be forced to +/-\n   * Infinity.\n   */\n  toNumber: function(allowImprecise) {\n    var b = this.buffer, o = this.offset;\n\n    // Running sum of octets, doing a 2's complement\n    var negate = b[o] & 0x80, x = 0, carry = 1;\n    for (var i = 7, m = 1; i >= 0; i--, m *= 256) {\n      var v = b[o+i];\n\n      // 2's complement for negative numbers\n      if (negate) {\n        v = (v ^ 0xff) + carry;\n        carry = v >> 8;\n        v = v & 0xff;\n      }\n\n      x += v * m;\n    }\n\n    // Return Infinity if we've lost integer precision\n    if (!allowImprecise && x >= Int64.MAX_INT) {\n      return negate ? -Infinity : Infinity;\n    }\n\n    return negate ? -x : x;\n  },\n\n  /**\n   * Convert to a JS Number. Returns +/-Infinity for values that can't be\n   * represented to integer precision.\n   */\n  valueOf: function() {\n    return this.toNumber(false);\n  },\n\n  /**\n   * Return string value\n   *\n   * @param radix Just like Number#toString()'s radix\n   */\n  toString: function(radix) {\n    return this.valueOf().toString(radix || 10);\n  },\n\n  /**\n   * Return a string showing the buffer octets, with MSB on the left.\n   *\n   * @param sep separator string. default is '' (empty string)\n   */\n  toOctetString: function(sep) {\n    var out = new Array(8);\n    var b = this.buffer, o = this.offset;\n    for (var i = 0; i < 8; i++) {\n      out[i] = _HEX[b[o+i]];\n    }\n    return out.join(sep || '');\n  },\n\n  /**\n   * Returns the int64's 8 bytes in a buffer.\n   *\n   * @param {bool} [rawBuffer=false]  If no offset and this is true, return the internal buffer.  Should only be used if\n   *                                  you're discarding the Int64 afterwards, as it breaks encapsulation.\n   */\n  toBuffer: function(rawBuffer) {\n    if (rawBuffer && this.offset === 0) return this.buffer;\n\n    var out = new Buffer(8);\n    this.buffer.copy(out, 0, this.offset, this.offset + 8);\n    return out;\n  },\n\n  /**\n   * Copy 8 bytes of int64 into target buffer at target offset.\n   *\n   * @param {Buffer} targetBuffer       Buffer to copy into.\n   * @param {number} [targetOffset=0]   Offset into target buffer.\n   */\n  copy: function(targetBuffer, targetOffset) {\n    this.buffer.copy(targetBuffer, targetOffset || 0, this.offset, this.offset + 8);\n  },\n\n  /**\n   * Returns a number indicating whether this comes before or after or is the\n   * same as the other in sort order.\n   *\n   * @param {Int64} other  Other Int64 to compare.\n   */\n  compare: function(other) {\n\n    // If sign bits differ ...\n    if ((this.buffer[this.offset] & 0x80) != (other.buffer[other.offset] & 0x80)) {\n      return other.buffer[other.offset] - this.buffer[this.offset];\n    }\n\n    // otherwise, compare bytes lexicographically\n    for (var i = 0; i < 8; i++) {\n      if (this.buffer[this.offset+i] !== other.buffer[other.offset+i]) {\n        return this.buffer[this.offset+i] - other.buffer[other.offset+i];\n      }\n    }\n    return 0;\n  },\n\n  /**\n   * Returns a boolean indicating if this integer is equal to other.\n   *\n   * @param {Int64} other  Other Int64 to compare.\n   */\n  equals: function(other) {\n    return this.compare(other) === 0;\n  },\n\n  /**\n   * Pretty output in console.log\n   */\n  inspect: function() {\n    return '[Int64 value:' + this + ' octets:' + this.toOctetString(' ') + ']';\n  }\n};\n", "const Int64 = require(\"node-int64\");\nlet Stream = require(\"stream\");\n\n// Backwards compatibility for node versions < 8\n\nif (!Stream.Writable || !Stream.Writable.prototype.destroy)\n  Stream = require(\"readable-stream\");\n\nlet table;\n\nfunction generateTable() {\n  const poly = 0xEDB88320;\n  let c, n, k;\n  table = [];\n  for (n = 0; n < 256; n++) {\n    c = n;\n    for (k = 0; k < 8; k++) c = c & 1 ? poly ^ (c >>> 1) : (c = c >>> 1);\n    table[n] = c >>> 0;\n  }\n}\n\nfunction crc(ch, crc) {\n  if (!table) generateTable();\n\n  if (ch.charCodeAt) ch = ch.charCodeAt(0);\n\n  const l = (crc.readUInt32BE() >> 8) & 0xffffff;\n  const r = table[(crc.readUInt32BE() ^ (ch >>> 0)) & 0xff];\n\n  return (l ^ r) >>> 0;\n}\n\nfunction multiply(a, b) {\n  const ah = (a >> 16) & 0xffff;\n  const al = a & 0xffff;\n  const bh = (b >> 16) & 0xffff;\n  const bl = b & 0xffff;\n  const high = (ah * bl + al * bh) & 0xffff;\n\n  return ((high << 16) >>> 0) + al * bl;\n}\n\nfunction Decrypt() {\n  if (!(this instanceof Decrypt)) return new Decrypt();\n\n  this.key0 = Buffer.allocUnsafe(4);\n  this.key1 = Buffer.allocUnsafe(4);\n  this.key2 = Buffer.allocUnsafe(4);\n\n  this.key0.writeUInt32BE(0x12345678, 0);\n  this.key1.writeUInt32BE(0x23456789, 0);\n  this.key2.writeUInt32BE(0x34567890, 0);\n}\n\nDecrypt.prototype.update = function (h) {\n  this.key0.writeUInt32BE(crc(h, this.key0));\n  this.key1.writeUInt32BE(\n    ((this.key0.readUInt32BE() & 0xff & 0xFFFFFFFF) +\n      this.key1.readUInt32BE()) >>> 0\n  );\n  const x = new Int64(\n    (multiply(this.key1.readUInt32BE(), 134775813) + 1) & 0xFFFFFFFF\n  );\n  const b = Buffer.alloc(8);\n  x.copy(b, 0);\n  b.copy(this.key1, 0, 4, 8);\n  this.key2.writeUInt32BE(\n    crc(((this.key1.readUInt32BE() >> 24) & 0xff) >>> 0, this.key2)\n  );\n};\n\nDecrypt.prototype.decryptByte = function (c) {\n  const k = (this.key2.readUInt32BE() | 2) >>> 0;\n  c = c ^ ((multiply(k, (k ^ 1 >>> 0)) >> 8) & 0xff);\n  this.update(c);\n\n  return c;\n};\n\nDecrypt.prototype.stream = function () {\n  const stream = Stream.Transform(),\n    self = this;\n  stream._transform = function (d, e, cb) {\n    for (let i = 0; i < d.length; i++) {\n      d[i] = self.decryptByte(d[i]);\n    }\n    this.push(d);\n    cb();\n  };\n\n  return stream;\n};\n\nmodule.exports = Decrypt;", "const Decrypt = require('../Decrypt');\nconst PullStream = require('../PullStream');\nconst Stream = require('stream');\nconst zlib = require('zlib');\nconst parseExtraField = require('../parseExtraField');\nconst parseDateTime = require('../parseDateTime');\nconst parseBuffer = require('../parseBuffer');\n\nmodule.exports = function unzip(source, offset, _password, directoryVars, length) {\n  const file = PullStream(),\n    entry = Stream.PassThrough();\n\n  const req = source.stream(offset, length);\n  req.pipe(file).on('error', function(e) {\n    entry.emit('error', e);\n  });\n\n  entry.vars = file.pull(30)\n    .then(function(data) {\n      let vars = parseBuffer.parse(data, [\n        ['signature', 4],\n        ['versionsNeededToExtract', 2],\n        ['flags', 2],\n        ['compressionMethod', 2],\n        ['lastModifiedTime', 2],\n        ['lastModifiedDate', 2],\n        ['crc32', 4],\n        ['compressedSize', 4],\n        ['uncompressedSize', 4],\n        ['fileNameLength', 2],\n        ['extraFieldLength', 2],\n      ]);\n\n      vars.lastModifiedDateTime = parseDateTime(vars.lastModifiedDate, vars.lastModifiedTime);\n\n      return file.pull(vars.fileNameLength)\n        .then(function(fileName) {\n          vars.fileName = fileName.toString('utf8');\n          return file.pull(vars.extraFieldLength);\n        })\n        .then(function(extraField) {\n          let checkEncryption;\n          vars.extra = parseExtraField(extraField, vars);\n          // Ignore logal file header vars if the directory vars are available\n          if (directoryVars && directoryVars.compressedSize) vars = directoryVars;\n\n          if (vars.flags & 0x01) checkEncryption = file.pull(12)\n            .then(function(header) {\n              if (!_password)\n                throw new Error('MISSING_PASSWORD');\n\n              const decrypt = Decrypt();\n\n              String(_password).split('').forEach(function(d) {\n                decrypt.update(d);\n              });\n\n              for (let i=0; i < header.length; i++)\n                header[i] = decrypt.decryptByte(header[i]);\n\n              vars.decrypt = decrypt;\n              vars.compressedSize -= 12;\n\n              const check = (vars.flags & 0x8) ? (vars.lastModifiedTime >> 8) & 0xff : (vars.crc32 >> 24) & 0xff;\n              if (header[11] !== check)\n                throw new Error('BAD_PASSWORD');\n\n              return vars;\n            });\n\n          return Promise.resolve(checkEncryption)\n            .then(function() {\n              entry.emit('vars', vars);\n              return vars;\n            });\n        });\n    });\n\n  entry.vars.then(function(vars) {\n    const fileSizeKnown = !(vars.flags & 0x08) || vars.compressedSize > 0;\n    let eof;\n\n    const inflater = vars.compressionMethod ? zlib.createInflateRaw() : Stream.PassThrough();\n\n    if (fileSizeKnown) {\n      entry.size = vars.uncompressedSize;\n      eof = vars.compressedSize;\n    } else {\n      eof = Buffer.alloc(4);\n      eof.writeUInt32LE(0x08074b50, 0);\n    }\n\n    let stream = file.stream(eof);\n\n    if (vars.decrypt)\n      stream = stream.pipe(vars.decrypt.stream());\n\n    stream\n      .pipe(inflater)\n      .on('error', function(err) { entry.emit('error', err);})\n      .pipe(entry)\n      .on('finish', function() {\n        if(req.destroy)\n          req.destroy();\n        else if (req.abort)\n          req.abort();\n        else if (req.close)\n          req.close();\n        else if (req.push)\n          req.push();\n        else\n          console.log('warning - unable to close stream');\n      });\n  })\n    .catch(function(e) {\n      entry.emit('error', e);\n    });\n\n  return entry;\n};\n", "var isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n", "\"use strict\";\nvar es5 = require(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var receiver = new FakeConstructor();\n    function ic() {\n        return typeof receiver.foo;\n    }\n    ic();\n    ic();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj instanceof Error ||\n        (obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\");\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if (classString(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nvar reflectHandler;\nfunction contextBind(ctx, cb) {\n    if (ctx === null ||\n        typeof cb !== \"function\" ||\n        cb === reflectHandler) {\n        return cb;\n    }\n\n    if (ctx.domain !== null) {\n        cb = ctx.domain.bind(cb);\n    }\n\n    var async = ctx.async;\n    if (async !== null) {\n        var old = cb;\n        cb = function() {\n            var $_len = arguments.length + 2;var args = new Array($_len); for(var $_i = 2; $_i < $_len ; ++$_i) {args[$_i] = arguments[$_i  - 2];};\n            args[0] = old;\n            args[1] = this;\n            return async.runInAsyncScope.apply(async, args);\n        };\n    }\n    return cb;\n}\n\nvar ret = {\n    setReflectHandler: function(fn) {\n        reflectHandler = fn;\n    },\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    contextBind: contextBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version;\n    if (process.versions && process.versions.node) {\n        version = process.versions.node.split(\".\").map(Number);\n    } else if (process.version) {\n        version = process.version.split(\".\").map(Number);\n    }\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\nret.nodeSupportsAsyncResource = ret.isNode && (function() {\n    var supportsAsync = false;\n    try {\n        var res = require(\"async_hooks\").AsyncResource;\n        supportsAsync = typeof res.prototype.runInAsyncScope === \"function\";\n    } catch (e) {\n        supportsAsync = false;\n    }\n    return supportsAsync;\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n", "\"use strict\";\nvar util = require(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova)) &&\n          (\"classList\" in document.documentElement)) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n", "\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n", "\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = require(\"./schedule\");\nvar Queue = require(\"./queue\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nAsync.prototype.invokeLater = AsyncInvokeLater;\nAsync.prototype.invoke = AsyncInvoke;\nAsync.prototype.settlePromises = AsyncSettlePromises;\n\n\nfunction _drainQueue(queue) {\n    while (queue.length() > 0) {\n        _drainQueueStep(queue);\n    }\n}\n\nfunction _drainQueueStep(queue) {\n    var fn = queue.shift();\n    if (typeof fn !== \"function\") {\n        fn._settlePromises();\n    } else {\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n}\n\nAsync.prototype._drainQueues = function () {\n    _drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    _drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n", "\"use strict\";\nvar es5 = require(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = require(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = require(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n        values.suppressUnhandledRejections();\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n", "\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n", "\"use strict\";\nmodule.exports = function(Promise, Context,\n    enableAsyncHooks, disableAsyncHooks) {\nvar async = Promise._async;\nvar Warning = require(\"./errors\").Warning;\nvar util = require(\"./util\");\nvar es5 = require(\"./es5\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (false ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nvar deferUnhandledRejectionCheck;\n(function() {\n    var promises = [];\n\n    function unhandledRejectionCheck() {\n        for (var i = 0; i < promises.length; ++i) {\n            promises[i]._notifyUnhandledRejection();\n        }\n        unhandledRejectionClear();\n    }\n\n    function unhandledRejectionClear() {\n        promises.length = 0;\n    }\n\n    deferUnhandledRejectionCheck = function(promise) {\n        promises.push(promise);\n        setTimeout(unhandledRejectionCheck, 1);\n    };\n\n    es5.defineProperty(Promise, \"_unhandledRejectionCheck\", {\n        value: unhandledRejectionCheck\n    });\n    es5.defineProperty(Promise, \"_unhandledRejectionClear\", {\n        value: unhandledRejectionClear\n    });\n})();\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    deferUnhandledRejectionCheck(this);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var context = Promise._getContext();\n    possiblyUnhandledRejection = util.contextBind(context, fn);\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var context = Promise._getContext();\n    unhandledRejectionHandled = util.contextBind(context, fn);\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        var Promise_dereferenceTrace = Promise.prototype._dereferenceTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Promise.prototype._dereferenceTrace = Promise_dereferenceTrace;\n            Context.deactivateLongStackTraces();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Promise.prototype._dereferenceTrace = longStackTracesDereferenceTrace;\n        Context.activateLongStackTraces();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\n\nvar legacyHandlers = {\n    unhandledrejection: {\n        before: function() {\n            var ret = util.global.onunhandledrejection;\n            util.global.onunhandledrejection = null;\n            return ret;\n        },\n        after: function(fn) {\n            util.global.onunhandledrejection = fn;\n        }\n    },\n    rejectionhandled: {\n        before: function() {\n            var ret = util.global.onrejectionhandled;\n            util.global.onrejectionhandled = null;\n            return ret;\n        },\n        after: function(fn) {\n            util.global.onrejectionhandled = fn;\n        }\n    }\n};\n\nvar fireDomEvent = (function() {\n    var dispatch = function(legacy, e) {\n        if (legacy) {\n            var fn;\n            try {\n                fn = legacy.before();\n                return !util.global.dispatchEvent(e);\n            } finally {\n                legacy.after(fn);\n            }\n        } else {\n            return !util.global.dispatchEvent(e);\n        }\n    };\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var eventData = {\n                    detail: event,\n                    cancelable: true\n                };\n                var domEvent = new CustomEvent(name, eventData);\n                es5.defineProperty(\n                    domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(\n                    domEvent, \"reason\", {value: event.reason});\n\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var domEvent = new Event(name, {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                es5.defineProperty(domEvent, \"promise\", {value: event.promise});\n                es5.defineProperty(domEvent, \"reason\", {value: event.reason});\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                name = name.toLowerCase();\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name, false, true,\n                    event);\n                return dispatch(legacyHandlers[name], domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    if (\"asyncHooks\" in opts && util.nodeSupportsAsyncResource) {\n        var prev = config.asyncHooks;\n        var cur = !!opts.asyncHooks;\n        if (prev !== cur) {\n            config.asyncHooks = cur;\n            if (cur) {\n                enableAsyncHooks();\n            } else {\n                disableAsyncHooks();\n            }\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._dereferenceTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction longStackTracesDereferenceTrace() {\n    this._trace = undefined;\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = (firstLineError.stack || \"\").split(\"\\n\");\n    var lastStackLines = (lastLineError.stack || \"\").split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false,\n    asyncHooks: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    asyncHooks: function() {\n        return config.asyncHooks;\n    },\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n", "\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util\");\nvar getKeys = require(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n", "\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = require(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n", "\"use strict\";\nvar util = require(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = require(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = require(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n", "\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n", "\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n", "\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n", "\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n", "\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async) {\nvar util = require(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!false) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!false) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var context = Promise._getContext();\n                        holder.fn = util.contextBind(context, holder.fn);\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len ; ++$_i) {args[$_i] = arguments[$_i ];};\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n", "\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!false) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n    if (!false) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n", "\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = require(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = require(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n", "\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var context = Promise._getContext();\n    this._callback = util.contextBind(context, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n    if (util.isArray(promises)) {\n        for (var i = 0; i < promises.length; ++i) {\n            var maybePromise = promises[i];\n            if (maybePromise instanceof Promise) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        }\n    }\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n", "\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = require(\"./util\");\nvar nodebackForPromise = require(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = require(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!false) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n", "\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\nvar isObject = util.isObject;\nvar es5 = require(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n", "\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n", "\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var context = Promise._getContext();\n    this._fn = util.contextBind(context, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined &&\n        this._eachValues !== null &&\n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    for (var j = i; j < length; ++j) {\n        var maybePromise = values[j];\n        if (maybePromise instanceof Promise) {\n            maybePromise.suppressUnhandledRejections();\n        }\n    }\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n\n            if ((i & 127) === 0) {\n                value._setNoAsyncGuarantee();\n            }\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n", "\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = require(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.allSettled = function (promises) {\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n", "\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util\");\nvar RangeError = require(\"./errors\").RangeError;\nvar AggregateError = require(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = require(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n", "\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = require(\"./util\");\n    var TypeError = require(\"./errors\").TypeError;\n    var inherits = require(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n", "\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n", "\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n", "\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = require(\"./util\");\nutil.setReflectHandler(reflectHandler);\n\nvar getDomain = function() {\n    var domain = process.domain;\n    if (domain === undefined) {\n        return null;\n    }\n    return domain;\n};\nvar getContextDefault = function() {\n    return null;\n};\nvar getContextDomain = function() {\n    return {\n        domain: getDomain(),\n        async: null\n    };\n};\nvar AsyncResource = util.isNode && util.nodeSupportsAsyncResource ?\n    require(\"async_hooks\").AsyncResource : null;\nvar getContextAsyncHooks = function() {\n    return {\n        domain: getDomain(),\n        async: new AsyncResource(\"Bluebird::Promise\")\n    };\n};\nvar getContext = util.isNode ? getContextDomain : getContextDefault;\nutil.notEnumerableProp(Promise, \"_getContext\", getContext);\nvar enableAsyncHooks = function() {\n    getContext = getContextAsyncHooks;\n    util.notEnumerableProp(Promise, \"_getContext\", getContextAsyncHooks);\n};\nvar disableAsyncHooks = function() {\n    getContext = getContextDomain;\n    util.notEnumerableProp(Promise, \"_getContext\", getContextDomain);\n};\n\nvar es5 = require(\"./es5\");\nvar Async = require(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = require(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = require(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    require(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = require(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\n\nvar debug = require(\"./debuggability\")(Promise, Context,\n    enableAsyncHooks, disableAsyncHooks);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    require(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = require(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n\n        if (typeof fn !== \"function\") {\n            throw new TypeError(\"The last argument to .catch() \" +\n                \"must be a function, got \" + util.toString(fn));\n        }\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var context = getContext();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: util.contextBind(context, handler),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise,\n                receiver, context);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    var bitField = this._bitField;\n    this._bitField = bitField |\n        (((bitField & 536870912) >> 2) ^\n        134217728);\n};\n\nPromise.prototype._setNoAsyncGuarantee = function() {\n    this._bitField = (this._bitField | 536870912) &\n        (~134217728);\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    context\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 = util.contextBind(context, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 = util.contextBind(context, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                util.contextBind(context, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                util.contextBind(context, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(maybePromise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n        this._dereferenceTrace();\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n    es5.defineProperty(Promise.prototype, Symbol.toStringTag, {\n        get: function () {\n            return \"Object\";\n        }\n    });\n}\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nrequire(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\nrequire(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\nrequire(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\nrequire(\"./direct_resolve\")(Promise);\nrequire(\"./synchronous_inspection\")(Promise);\nrequire(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async);\nPromise.Promise = Promise;\nPromise.version = \"3.7.2\";\nrequire('./call_get.js')(Promise);\nrequire('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\nrequire('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./nodeify.js')(Promise);\nrequire('./promisify.js')(Promise, INTERNAL);\nrequire('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrequire('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./settle.js')(Promise, PromiseArray, debug);\nrequire('./some.js')(Promise, PromiseArray, apiRejection);\nrequire('./timers.js')(Promise, INTERNAL, debug);\nrequire('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\nrequire('./any.js')(Promise);\nrequire('./each.js')(Promise, INTERNAL);\nrequire('./filter.js')(Promise, INTERNAL);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n", "\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = require(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n", "const PullStream = require('../PullStream');\nconst unzip = require('./unzip');\nconst BufferStream = require('../BufferStream');\nconst parseExtraField = require('../parseExtraField');\nconst path = require('path');\nconst fs = require('fs-extra');\nconst parseDateTime = require('../parseDateTime');\nconst parseBuffer = require('../parseBuffer');\nconst Bluebird = require('bluebird');\n\nconst signature = Buffer.alloc(4);\nsignature.writeUInt32LE(0x06054b50, 0);\n\nfunction getCrxHeader(source) {\n  const sourceStream = source.stream(0).pipe(PullStream());\n\n  return sourceStream.pull(4).then(function(data) {\n    const signature = data.readUInt32LE(0);\n    if (signature === 0x34327243) {\n      let crxHeader;\n      return sourceStream.pull(12).then(function(data) {\n        crxHeader = parseBuffer.parse(data, [\n          ['version', 4],\n          ['pubKeyLength', 4],\n          ['signatureLength', 4],\n        ]);\n      }).then(function() {\n        return sourceStream.pull(crxHeader.pubKeyLength +crxHeader.signatureLength);\n      }).then(function(data) {\n        crxHeader.publicKey = data.slice(0, crxHeader.pubKeyLength);\n        crxHeader.signature = data.slice(crxHeader.pubKeyLength);\n        crxHeader.size = 16 + crxHeader.pubKeyLength +crxHeader.signatureLength;\n        return crxHeader;\n      });\n    }\n  });\n}\n\n// Zip64 File Format Notes: https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\nfunction getZip64CentralDirectory(source, zip64CDL) {\n  const d64loc = parseBuffer.parse(zip64CDL, [\n    ['signature', 4],\n    ['diskNumber', 4],\n    ['offsetToStartOfCentralDirectory', 8],\n    ['numberOfDisks', 4],\n  ]);\n\n  if (d64loc.signature != 0x07064b50) {\n    throw new Error('invalid zip64 end of central dir locator signature (0x07064b50): 0x' + d64loc.signature.toString(16));\n  }\n\n  const dir64 = PullStream();\n  source.stream(d64loc.offsetToStartOfCentralDirectory).pipe(dir64);\n\n  return dir64.pull(56);\n}\n\n// Zip64 File Format Notes: https://pkware.cachefly.net/webdocs/casestudies/APPNOTE.TXT\nfunction parseZip64DirRecord (dir64record) {\n  const vars = parseBuffer.parse(dir64record, [\n    ['signature', 4],\n    ['sizeOfCentralDirectory', 8],\n    ['version', 2],\n    ['versionsNeededToExtract', 2],\n    ['diskNumber', 4],\n    ['diskStart', 4],\n    ['numberOfRecordsOnDisk', 8],\n    ['numberOfRecords', 8],\n    ['sizeOfCentralDirectory', 8],\n    ['offsetToStartOfCentralDirectory', 8],\n  ]);\n\n  if (vars.signature != 0x06064b50) {\n    throw new Error('invalid zip64 end of central dir locator signature (0x06064b50): 0x0' + vars.signature.toString(16));\n  }\n\n  return vars;\n}\n\nmodule.exports = function centralDirectory(source, options) {\n  const endDir = PullStream();\n  const records = PullStream();\n  const tailSize = (options && options.tailSize) || 80;\n  let sourceSize,\n    crxHeader,\n    startOffset,\n    vars;\n\n  if (options && options.crx)\n    crxHeader = getCrxHeader(source);\n\n  return source.size()\n    .then(function(size) {\n      sourceSize = size;\n\n      source.stream(Math.max(0, size-tailSize))\n        .on('error', function (error) { endDir.emit('error', error); })\n        .pipe(endDir);\n\n      return endDir.pull(signature);\n    })\n    .then(function() {\n      return Bluebird.props({directory: endDir.pull(22), crxHeader: crxHeader});\n    })\n    .then(function(d) {\n      const data = d.directory;\n      startOffset = d.crxHeader && d.crxHeader.size || 0;\n\n      vars = parseBuffer.parse(data, [\n        ['signature', 4],\n        ['diskNumber', 2],\n        ['diskStart', 2],\n        ['numberOfRecordsOnDisk', 2],\n        ['numberOfRecords', 2],\n        ['sizeOfCentralDirectory', 4],\n        ['offsetToStartOfCentralDirectory', 4],\n        ['commentLength', 2],\n      ]);\n\n      // Is this zip file using zip64 format? Use same check as Go:\n      // https://github.com/golang/go/blob/master/src/archive/zip/reader.go#L503\n      // For zip64 files, need to find zip64 central directory locator header to extract\n      // relative offset for zip64 central directory record.\n      if (vars.diskNumber == 0xffff || vars.numberOfRecords == 0xffff ||\n        vars.offsetToStartOfCentralDirectory == 0xffffffff) {\n\n        // Offset to zip64 CDL is 20 bytes before normal CDR\n        const zip64CDLSize = 20;\n        const zip64CDLOffset = sourceSize - (tailSize - endDir.match + zip64CDLSize);\n        const zip64CDLStream = PullStream();\n\n        source.stream(zip64CDLOffset).pipe(zip64CDLStream);\n\n        return zip64CDLStream.pull(zip64CDLSize)\n          .then(function (d) { return getZip64CentralDirectory(source, d); })\n          .then(function (dir64record) {\n            vars = parseZip64DirRecord(dir64record);\n          });\n      } else {\n        vars.offsetToStartOfCentralDirectory += startOffset;\n      }\n    })\n    .then(function() {\n      if (vars.commentLength) return endDir.pull(vars.commentLength).then(function(comment) {\n        vars.comment = comment.toString('utf8');\n      });\n    })\n    .then(function() {\n      source.stream(vars.offsetToStartOfCentralDirectory).pipe(records);\n\n      vars.extract = function(opts) {\n        if (!opts || !opts.path) throw new Error('PATH_MISSING');\n        // make sure path is normalized before using it\n        opts.path = path.resolve(path.normalize(opts.path));\n        return vars.files.then(function(files) {\n          return Bluebird.map(files, async function(entry) {\n            // to avoid zip slip (writing outside of the destination), we resolve\n            // the target path, and make sure it's nested in the intended\n            // destination, or not extract it otherwise.\n            const extractPath = path.join(opts.path, entry.path);\n            if (extractPath.indexOf(opts.path) != 0) {\n              return;\n            }\n\n            if (entry.type == 'Directory') {\n              await fs.ensureDir(extractPath);\n              return;\n            }\n\n            await fs.ensureDir(path.dirname(extractPath));\n\n            const writer = opts.getWriter ? opts.getWriter({path: extractPath}) : fs.createWriteStream(extractPath);\n\n            return new Promise(function(resolve, reject) {\n              entry.stream(opts.password)\n                .on('error', reject)\n                .pipe(writer)\n                .on('close', resolve)\n                .on('error', reject);\n            });\n          }, { concurrency: opts.concurrency > 1 ? opts.concurrency : 1 });\n        });\n      };\n\n      vars.files = Bluebird.mapSeries(Array(vars.numberOfRecords), function() {\n        return records.pull(46).then(function(data) {\n          const vars = parseBuffer.parse(data, [\n            ['signature', 4],\n            ['versionMadeBy', 2],\n            ['versionsNeededToExtract', 2],\n            ['flags', 2],\n            ['compressionMethod', 2],\n            ['lastModifiedTime', 2],\n            ['lastModifiedDate', 2],\n            ['crc32', 4],\n            ['compressedSize', 4],\n            ['uncompressedSize', 4],\n            ['fileNameLength', 2],\n            ['extraFieldLength', 2],\n            ['fileCommentLength', 2],\n            ['diskNumber', 2],\n            ['internalFileAttributes', 2],\n            ['externalFileAttributes', 4],\n            ['offsetToLocalFileHeader', 4],\n          ]);\n\n          vars.offsetToLocalFileHeader += startOffset;\n          vars.lastModifiedDateTime = parseDateTime(vars.lastModifiedDate, vars.lastModifiedTime);\n\n          return records.pull(vars.fileNameLength).then(function(fileNameBuffer) {\n            vars.pathBuffer = fileNameBuffer;\n            vars.path = fileNameBuffer.toString('utf8');\n            vars.isUnicode = (vars.flags & 0x800) != 0;\n            return records.pull(vars.extraFieldLength);\n          })\n            .then(function(extraField) {\n              vars.extra = parseExtraField(extraField, vars);\n              return records.pull(vars.fileCommentLength);\n            })\n            .then(function(comment) {\n              vars.comment = comment;\n              vars.type = (vars.uncompressedSize === 0 && /[/\\\\]$/.test(vars.path)) ? 'Directory' : 'File';\n              const padding = options && options.padding || 1000;\n              vars.stream = function(_password) {\n                const totalSize = 30\n              + padding // add an extra buffer\n              + (vars.extraFieldLength || 0)\n              + (vars.fileNameLength || 0)\n              + vars.compressedSize;\n\n                return unzip(source, vars.offsetToLocalFileHeader, _password, vars, totalSize);\n              };\n              vars.buffer = function(_password) {\n                return BufferStream(vars.stream(_password));\n              };\n              return vars;\n            });\n        });\n      });\n\n      return Bluebird.props(vars);\n    });\n};\n", "const fs = require('graceful-fs');\nconst directory = require('./directory');\nconst Stream = require('stream');\n\nmodule.exports = {\n  buffer: function(buffer, options) {\n    const source = {\n      stream: function(offset, length) {\n        const stream = Stream.PassThrough();\n        const end = length ? offset + length : undefined;\n        stream.end(buffer.slice(offset, end));\n        return stream;\n      },\n      size: function() {\n        return Promise.resolve(buffer.length);\n      }\n    };\n    return directory(source, options);\n  },\n  file: function(filename, options) {\n    const source = {\n      stream: function(start, length) {\n        const end = length ? start + length : undefined;\n        return fs.createReadStream(filename, {start, end});\n      },\n      size: function() {\n        return new Promise(function(resolve, reject) {\n          fs.stat(filename, function(err, d) {\n            if (err)\n              reject(err);\n            else\n              resolve(d.size);\n          });\n        });\n      }\n    };\n    return directory(source, options);\n  },\n\n  url: function(request, params, options) {\n    if (typeof params === 'string')\n      params = {url: params};\n    if (!params.url)\n      throw 'URL missing';\n    params.headers = params.headers || {};\n\n    const source = {\n      stream : function(offset, length) {\n        const options = Object.create(params);\n        const end = length ? offset + length : '';\n        options.headers = Object.create(params.headers);\n        options.headers.range = 'bytes='+offset+'-' + end;\n        return request(options);\n      },\n      size: function() {\n        return new Promise(function(resolve, reject) {\n          const req = request(params);\n          req.on('response', function(d) {\n            req.abort();\n            if (!d.headers['content-length'])\n              reject(new Error('Missing content length header'));\n            else\n              resolve(d.headers['content-length']);\n          }).on('error', reject);\n        });\n      }\n    };\n\n    return directory(source, options);\n  },\n\n  s3 : function(client, params, options) {\n    const source = {\n      size: function() {\n        return new Promise(function(resolve, reject) {\n          client.headObject(params, function(err, d) {\n            if (err)\n              reject(err);\n            else\n              resolve(d.ContentLength);\n          });\n        });\n      },\n      stream: function(offset, length) {\n        const d = {};\n        for (const key in params)\n          d[key] = params[key];\n        const end = length ? offset + length : '';\n        d.Range = 'bytes='+offset+'-' + end;\n        return client.getObject(d).createReadStream();\n      }\n    };\n\n    return directory(source, options);\n  },\n  s3_v3: function (client, params, options) {\n    //@ts-ignore\n    const { GetObjectCommand, HeadObjectCommand } = require('@aws-sdk/client-s3');\n    const source = {\n      size: async () => {\n        const head = await client.send(\n          new HeadObjectCommand({\n            Bucket: params.Bucket,\n            Key: params.Key,\n          })\n        );\n\n        if(!head.ContentLength) {\n          return 0;\n        }\n\n        return head.ContentLength;\n      },\n      stream: (offset, length) => {\n        const stream = Stream.PassThrough();\n        const end = length ? offset + length : \"\";\n        client\n          .send(\n            new GetObjectCommand({\n              Bucket: params.Bucket,\n              Key: params.Key,\n              Range: `bytes=${offset}-${end}`,\n            })\n          )\n          .then((response) => {\n            response.Body.pipe(stream);\n          })\n          .catch((error) => {\n            stream.emit(\"error\", error);\n          });\n\n        return stream;\n      },\n    };\n\n    return directory(source, options);\n  },\n  custom: function(source, options) {\n    return directory(source, options);\n  }\n};\n", "'use strict';\nexports.Parse = require('./lib/parse');\nexports.ParseOne = require('./lib/parseOne');\nexports.Extract = require('./lib/extract');\nexports.Open = require('./lib/Open');", "import * as vscode from 'vscode';\r\nimport { Server } from './server';\r\nimport { needsInstall, install } from './installation/installer';\r\n\r\nlet lspServer: Server | null = null;\r\n\r\nexport async function activate(context: vscode.ExtensionContext) {\r\n    // THIS is where your first log goes. \r\n    // If you don't see this in the \"Developer Tools\" console, \r\n    // the extension isn't loading at all.\r\n    console.log(\"!!! InlineXML: Activate function triggered !!!\");\r\n\r\n    const logger = vscode.window.createOutputChannel(\"InlineXML Boot\");\r\n    logger.show(true);\r\n    logger.appendLine('\uD83D\uDE80 [System] Activation sequence initiated...');\r\n\r\n    try {\r\n        if (needsInstall()) {\r\n            await install();\r\n        }\r\n\r\n        lspServer = new Server();\r\n        await lspServer.listen();\r\n\r\n        const restartCommand = vscode.commands.registerCommand('inlinexml.restartLSP', async () => {\r\n            if (lspServer) {\r\n                await lspServer.disconnect();\r\n                await lspServer.listen();\r\n            }\r\n        });\r\n\r\n        context.subscriptions.push(restartCommand);\r\n    } catch (err: any) {\r\n        console.error(\"Critical Startup Error:\", err);\r\n        logger.appendLine(`\u274C Error: ${err.message}`);\r\n    }\r\n}\r\n\r\nexport async function deactivate() {\r\n    if (lspServer) {\r\n        await lspServer.disconnect();\r\n    }\r\n}", "import * as vscode from 'vscode';\r\nimport { \r\n    LanguageClient, \r\n    LanguageClientOptions, \r\n    ServerOptions, \r\n    RevealOutputChannelOn \r\n} from 'vscode-languageclient/node.js';\r\nimport { PassThrough } from 'stream';\r\nimport { URI } from 'vscode-uri';\r\nimport Executor from './executor.js';\r\nimport * as cp from 'child_process';\r\n\r\n/**\r\n * Orchestrates the connection between VS Code and the C# Language Server.\r\n * Handles the raw Stdio stream to allow for custom URI remapping.\r\n */\r\nexport class Server {\r\n    private executor: Executor;\r\n    private client: LanguageClient | null = null;\r\n    private outputChannel: vscode.OutputChannel;\r\n    private childProcess?: cp.ChildProcess;\r\n    private responseStream?: PassThrough;\r\n    public isReady = false;\r\n\r\n    // ELI5: When false, the output channel will remain quiet.\r\n    public static DEBUG_MODE = false;\r\n\r\n    constructor() {\r\n        this.executor = new Executor();\r\n        this.outputChannel = vscode.window.createOutputChannel(\"InlineXML LSP\");\r\n    }\r\n\r\n    /**\r\n     * Ensures URIs coming back from the C# server match exactly what VS Code expects,\r\n     * specifically handling case-sensitivity and open document instances.\r\n     */\r\n    private normalizeUri(rawUri: string): string {\r\n        try {\r\n            const parsed = URI.parse(rawUri);\r\n            const fsPath = parsed.fsPath.toLowerCase();\r\n            const openDoc = vscode.workspace.textDocuments.find(doc => \r\n                doc.uri.fsPath.toLowerCase() === fsPath\r\n            );\r\n            return openDoc ? openDoc.uri.toString() : URI.file(parsed.fsPath).toString();\r\n        } catch (e) {\r\n            return rawUri;\r\n        }\r\n    }\r\n\r\n    async listen() {\r\n        if (this.client) return; \r\n        \r\n        if (Server.DEBUG_MODE) {\r\n            this.outputChannel.show(true);\r\n            this.outputChannel.appendLine(\"[SYSTEM] --- STARTING LSP ORCHESTRA ---\");\r\n        }\r\n\r\n        const workspaceFolder = vscode.workspace.workspaceFolders?.[0]?.uri.fsPath;\r\n        if (!workspaceFolder) return;\r\n\r\n        const details = this.executor.getExecutionDetails(workspaceFolder);\r\n        \r\n        const serverOptions: ServerOptions = async () => {\r\n            this.childProcess = cp.spawn(details.command, details.args, { \r\n                cwd: details.cwd, \r\n                shell: true, \r\n                stdio: ['pipe', 'pipe', 'pipe'] \r\n            });\r\n\r\n            this.childProcess.stderr?.on('data', (data) => {\r\n                if (Server.DEBUG_MODE) {\r\n                    this.outputChannel.appendLine(`[C# STDERR]: ${data.toString().trim()}`);\r\n                }\r\n            });\r\n\r\n            const requestStream = new PassThrough();\r\n            this.responseStream = new PassThrough();\r\n\r\n            // Pipe VS Code's requests into the C# process stdin\r\n            requestStream.pipe(this.childProcess.stdin!);\r\n\r\n            let buffer = Buffer.alloc(0);\r\n\r\n            // Listen to C# process stdout and parse LSP messages\r\n            this.childProcess.stdout!.on('data', (data: Buffer) => {\r\n                buffer = Buffer.concat([buffer, data]);\r\n\r\n                while (true) {\r\n                    const str = buffer.toString('utf8');\r\n                    const headerToken = \"Content-Length:\";\r\n                    const index = str.indexOf(headerToken);\r\n\r\n                    if (index === -1) break; \r\n\r\n                    if (index > 0) {\r\n                        buffer = buffer.slice(index);\r\n                        continue;\r\n                    }\r\n\r\n                    const headerMatch = str.match(/Content-Length: (\\d+)\\r\\n\\r\\n/);\r\n                    if (!headerMatch) break; \r\n                    \r\n                    const contentLength = parseInt(headerMatch[1]);\r\n                    const headerLength = headerMatch[0].length;\r\n\r\n                    if (buffer.length < headerLength + contentLength) break; \r\n\r\n                    const jsonPart = buffer.slice(headerLength, headerLength + contentLength).toString('utf8');\r\n                    \r\n                    try {\r\n                        let msg = JSON.parse(jsonPart);\r\n                        \r\n                        // Remap Diagnostics URIs (The \"Broken Link\" fix)\r\n                        if (msg.method === 'textDocument/publishDiagnostics' && msg.params?.uri) {\r\n                            msg.params.uri = this.normalizeUri(msg.params.uri);\r\n                        }\r\n\r\n                        const body = JSON.stringify(msg);\r\n                        const header = `Content-Length: ${Buffer.byteLength(body, 'utf8')}\\r\\n\\r\\n`;\r\n                        \r\n                        // Push the (potentially modified) message back to VS Code\r\n                        this.responseStream?.write(header + body);\r\n                    } catch (e: any) {\r\n                        if (Server.DEBUG_MODE) {\r\n                            this.outputChannel.appendLine(`[JS ERROR] JSON Parse failure: ${e.message}`);\r\n                        }\r\n                    }\r\n                    \r\n                    buffer = buffer.slice(headerLength + contentLength);\r\n                }\r\n            });\r\n\r\n            return { writer: requestStream, reader: this.responseStream };\r\n        };\r\n\r\n        const clientOptions: LanguageClientOptions = {\r\n            documentSelector: [\r\n                { scheme: 'file', language: 'inlinexml' },\r\n                { scheme: 'file', language: 'csharp' },\r\n                { scheme: 'file', pattern: '**/*.xcs' }\r\n            ],\r\n            diagnosticCollectionName: 'inlinexml',\r\n            revealOutputChannelOn: RevealOutputChannelOn.Never,\r\n            outputChannel: this.outputChannel\r\n        };\r\n\r\n        this.client = new LanguageClient('inlinexmlLSP', 'InlineXML', serverOptions, clientOptions);\r\n\r\n        await this.client.start();\r\n        this.isReady = true;\r\n    }\r\n\r\n    async disconnect() {\r\n        this.isReady = false;\r\n        if (this.client) {\r\n            await this.client.stop();\r\n            this.client = null;\r\n        }\r\n        if (this.childProcess) {\r\n            this.childProcess.kill();\r\n        }\r\n    }\r\n}", "// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n", "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n", "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};", "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))", "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\n// !!!!!\n// SEE https://github.com/microsoft/vscode/blob/master/src/vs/base/common/platform.ts\n// !!!!!\n\ndeclare const process: { platform: 'win32' };\ndeclare const navigator: { userAgent: string };\n\nexport let isWindows: boolean;\n\nif (typeof process === 'object') {\n\tisWindows = process.platform === 'win32';\n} else if (typeof navigator === 'object') {\n\tlet userAgent = navigator.userAgent;\n\tisWindows = userAgent.indexOf('Windows') >= 0;\n}\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport { CharCode } from './charCode'\nimport { isWindows } from './platform';\n\nconst _schemePattern = /^\\w[\\w\\d+.-]*$/;\nconst _singleSlashStart = /^\\//;\nconst _doubleSlashStart = /^\\/\\//;\n\nfunction _validateUri(ret: URI, _strict?: boolean): void {\n\n\t// scheme, must be set\n\tif (!ret.scheme && _strict) {\n\t\tthrow new Error(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n\t}\n\n\t// scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n\t// ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n\tif (ret.scheme && !_schemePattern.test(ret.scheme)) {\n\t\tthrow new Error('[UriError]: Scheme contains illegal characters.');\n\t}\n\n\t// path, http://tools.ietf.org/html/rfc3986#section-3.3\n\t// If a URI contains an authority component, then the path component\n\t// must either be empty or begin with a slash (\"/\") character.  If a URI\n\t// does not contain an authority component, then the path cannot begin\n\t// with two slash characters (\"//\").\n\tif (ret.path) {\n\t\tif (ret.authority) {\n\t\t\tif (!_singleSlashStart.test(ret.path)) {\n\t\t\t\tthrow new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n\t\t\t}\n\t\t} else {\n\t\t\tif (_doubleSlashStart.test(ret.path)) {\n\t\t\t\tthrow new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n\t\t\t}\n\t\t}\n\t}\n}\n\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme: string, _strict: boolean): string {\n\tif (!scheme && !_strict) {\n\t\treturn 'file';\n\t}\n\treturn scheme;\n}\n\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme: string, path: string): string {\n\n\t// the slash-character is our 'default base' as we don't\n\t// support constructing URIs relative to other URIs. This\n\t// also means that we alter and potentially break paths.\n\t// see https://tools.ietf.org/html/rfc3986#section-5.1.4\n\tswitch (scheme) {\n\t\tcase 'https':\n\t\tcase 'http':\n\t\tcase 'file':\n\t\t\tif (!path) {\n\t\t\t\tpath = _slash;\n\t\t\t} else if (path[0] !== _slash) {\n\t\t\t\tpath = _slash + path;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\treturn path;\n}\n\nconst _empty = '';\nconst _slash = '/';\nconst _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nexport class URI implements UriComponents {\n\n\tstatic isUri(thing: any): thing is URI {\n\t\tif (thing instanceof URI) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!thing) {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof (<URI>thing).authority === 'string'\n\t\t\t&& typeof (<URI>thing).fragment === 'string'\n\t\t\t&& typeof (<URI>thing).path === 'string'\n\t\t\t&& typeof (<URI>thing).query === 'string'\n\t\t\t&& typeof (<URI>thing).scheme === 'string'\n\t\t\t&& typeof (<URI>thing).fsPath === 'string'\n\t\t\t&& typeof (<URI>thing).with === 'function'\n\t\t\t&& typeof (<URI>thing).toString === 'function';\n\t}\n\n\t/**\n\t * scheme is the 'http' part of 'http://www.example.com/some/path?query#fragment'.\n\t * The part before the first colon.\n\t */\n\treadonly scheme: string;\n\n\t/**\n\t * authority is the 'www.example.com' part of 'http://www.example.com/some/path?query#fragment'.\n\t * The part between the first double slashes and the next slash.\n\t */\n\treadonly authority: string;\n\n\t/**\n\t * path is the '/some/path' part of 'http://www.example.com/some/path?query#fragment'.\n\t */\n\treadonly path: string;\n\n\t/**\n\t * query is the 'query' part of 'http://www.example.com/some/path?query#fragment'.\n\t */\n\treadonly query: string;\n\n\t/**\n\t * fragment is the 'fragment' part of 'http://www.example.com/some/path?query#fragment'.\n\t */\n\treadonly fragment: string;\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(scheme: string, authority?: string, path?: string, query?: string, fragment?: string, _strict?: boolean);\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(components: UriComponents);\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(schemeOrData: string | UriComponents, authority?: string, path?: string, query?: string, fragment?: string, _strict: boolean = false) {\n\n\t\tif (typeof schemeOrData === 'object') {\n\t\t\tthis.scheme = schemeOrData.scheme || _empty;\n\t\t\tthis.authority = schemeOrData.authority || _empty;\n\t\t\tthis.path = schemeOrData.path || _empty;\n\t\t\tthis.query = schemeOrData.query || _empty;\n\t\t\tthis.fragment = schemeOrData.fragment || _empty;\n\t\t\t// no validation because it's this URI\n\t\t\t// that creates uri components.\n\t\t\t// _validateUri(this);\n\t\t} else {\n\t\t\tthis.scheme = _schemeFix(schemeOrData, _strict);\n\t\t\tthis.authority = authority || _empty;\n\t\t\tthis.path = _referenceResolution(this.scheme, path || _empty);\n\t\t\tthis.query = query || _empty;\n\t\t\tthis.fragment = fragment || _empty;\n\n\t\t\t_validateUri(this, _strict);\n\t\t}\n\t}\n\n\t// ---- filesystem path -----------------------\n\n\t/**\n\t * Returns a string representing the corresponding file system path of this URI.\n\t * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n\t * platform specific path separator.\n\t *\n\t * * Will *not* validate the path for invalid characters and semantics.\n\t * * Will *not* look at the scheme of this URI.\n\t * * The result shall *not* be used for display purposes but for accessing a file on disk.\n\t *\n\t *\n\t * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n\t * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n\t *\n\t * ```ts\n\t\tconst u = URI.parse('file://server/c$/folder/file.txt')\n\t\tu.authority === 'server'\n\t\tu.path === '/shares/c$/file.txt'\n\t\tu.fsPath === '\\\\server\\c$\\folder\\file.txt'\n\t```\n\t *\n\t * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n\t * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n\t * with URIs that represent files on disk (`file` scheme).\n\t */\n\tget fsPath(): string {\n\t\t// if (this.scheme !== 'file') {\n\t\t// \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n\t\t// }\n\t\treturn uriToFsPath(this, false);\n\t}\n\n\t// ---- modify to new -------------------------\n\n\twith(change: { scheme?: string; authority?: string | null; path?: string | null; query?: string | null; fragment?: string | null }): URI {\n\n\t\tif (!change) {\n\t\t\treturn this;\n\t\t}\n\n\t\tlet { scheme, authority, path, query, fragment } = change;\n\t\tif (scheme === undefined) {\n\t\t\tscheme = this.scheme;\n\t\t} else if (scheme === null) {\n\t\t\tscheme = _empty;\n\t\t}\n\t\tif (authority === undefined) {\n\t\t\tauthority = this.authority;\n\t\t} else if (authority === null) {\n\t\t\tauthority = _empty;\n\t\t}\n\t\tif (path === undefined) {\n\t\t\tpath = this.path;\n\t\t} else if (path === null) {\n\t\t\tpath = _empty;\n\t\t}\n\t\tif (query === undefined) {\n\t\t\tquery = this.query;\n\t\t} else if (query === null) {\n\t\t\tquery = _empty;\n\t\t}\n\t\tif (fragment === undefined) {\n\t\t\tfragment = this.fragment;\n\t\t} else if (fragment === null) {\n\t\t\tfragment = _empty;\n\t\t}\n\n\t\tif (scheme === this.scheme\n\t\t\t&& authority === this.authority\n\t\t\t&& path === this.path\n\t\t\t&& query === this.query\n\t\t\t&& fragment === this.fragment) {\n\n\t\t\treturn this;\n\t\t}\n\n\t\treturn new Uri(scheme, authority, path, query, fragment);\n\t}\n\n\t// ---- parse & validate ------------------------\n\n\t/**\n\t * Creates a new URI from a string, e.g. `http://www.example.com/some/path`,\n\t * `file:///usr/home`, or `scheme:with/path`.\n\t *\n\t * @param value A string which represents an URI (see `URI#toString`).\n\t */\n\tstatic parse(value: string, _strict: boolean = false): URI {\n\t\tconst match = _regexp.exec(value);\n\t\tif (!match) {\n\t\t\treturn new Uri(_empty, _empty, _empty, _empty, _empty);\n\t\t}\n\t\treturn new Uri(\n\t\t\tmatch[2] || _empty,\n\t\t\tpercentDecode(match[4] || _empty),\n\t\t\tpercentDecode(match[5] || _empty),\n\t\t\tpercentDecode(match[7] || _empty),\n\t\t\tpercentDecode(match[9] || _empty),\n\t\t\t_strict\n\t\t);\n\t}\n\n\t/**\n\t * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n\t * `/usr/home`, or `\\\\server\\share\\some\\path`.\n\t *\n\t * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n\t * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n\t * `URI.parse('file://' + path)` because the path might contain characters that are\n\t * interpreted (# and ?). See the following sample:\n\t * ```ts\n\tconst good = URI.file('/coding/c#/project1');\n\tgood.scheme === 'file';\n\tgood.path === '/coding/c#/project1';\n\tgood.fragment === '';\n\tconst bad = URI.parse('file://' + '/coding/c#/project1');\n\tbad.scheme === 'file';\n\tbad.path === '/coding/c'; // path is now broken\n\tbad.fragment === '/project1';\n\t```\n\t *\n\t * @param path A file system path (see `URI#fsPath`)\n\t */\n\tstatic file(path: string): URI {\n\n\t\tlet authority = _empty;\n\n\t\t// normalize to fwd-slashes on windows,\n\t\t// on other systems bwd-slashes are valid\n\t\t// filename character, eg /f\\oo/ba\\r.txt\n\t\tif (isWindows) {\n\t\t\tpath = path.replace(/\\\\/g, _slash);\n\t\t}\n\n\t\t// check for authority as used in UNC shares\n\t\t// or use the path as given\n\t\tif (path[0] === _slash && path[1] === _slash) {\n\t\t\tconst idx = path.indexOf(_slash, 2);\n\t\t\tif (idx === -1) {\n\t\t\t\tauthority = path.substring(2);\n\t\t\t\tpath = _slash;\n\t\t\t} else {\n\t\t\t\tauthority = path.substring(2, idx);\n\t\t\t\tpath = path.substring(idx) || _slash;\n\t\t\t}\n\t\t}\n\n\t\treturn new Uri('file', authority, path, _empty, _empty);\n\t}\n\n\tstatic from(components: { scheme: string; authority?: string; path?: string; query?: string; fragment?: string }): URI {\n\t\tconst result = new Uri(\n\t\t\tcomponents.scheme,\n\t\t\tcomponents.authority,\n\t\t\tcomponents.path,\n\t\t\tcomponents.query,\n\t\t\tcomponents.fragment,\n\t\t);\n\t\t_validateUri(result, true);\n\t\treturn result;\n\t}\n\n\t// ---- printing/externalize ---------------------------\n\n\t/**\n\t * Creates a string representation for this URI. It's guaranteed that calling\n\t * `URI.parse` with the result of this function creates an URI which is equal\n\t * to this URI.\n\t *\n\t * * The result shall *not* be used for display purposes but for externalization or transport.\n\t * * The result will be encoded using the percentage encoding and encoding happens mostly\n\t * ignore the scheme-specific encoding rules.\n\t *\n\t * @param skipEncoding Do not encode the result, default is `false`\n\t */\n\ttoString(skipEncoding: boolean = false): string {\n\t\treturn _asFormatted(this, skipEncoding);\n\t}\n\n\ttoJSON(): UriComponents {\n\t\treturn this;\n\t}\n\n\tstatic revive(data: UriComponents | URI): URI;\n\tstatic revive(data: UriComponents | URI | undefined): URI | undefined;\n\tstatic revive(data: UriComponents | URI | null): URI | null;\n\tstatic revive(data: UriComponents | URI | undefined | null): URI | undefined | null;\n\tstatic revive(data: UriComponents | URI | undefined | null): URI | undefined | null {\n\t\tif (!data) {\n\t\t\treturn <any>data;\n\t\t} else if (data instanceof URI) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst result = new Uri(data);\n\t\t\tresult._formatted = (<UriState>data).external;\n\t\t\tresult._fsPath = (<UriState>data)._sep === _pathSepMarker ? (<UriState>data).fsPath : null;\n\t\t\treturn result;\n\t\t}\n\t}\n}\n\nexport interface UriComponents {\n\tscheme: string;\n\tauthority: string;\n\tpath: string;\n\tquery: string;\n\tfragment: string;\n}\n\ninterface UriState extends UriComponents {\n\t$mid: number;\n\texternal: string;\n\tfsPath: string;\n\t_sep: 1 | undefined;\n}\n\nconst _pathSepMarker = isWindows ? 1 : undefined;\n\n// This class exists so that URI is compatible with vscode.Uri (API).\nclass Uri extends URI {\n\n\t_formatted: string | null = null;\n\t_fsPath: string | null = null;\n\n\toverride get fsPath(): string {\n\t\tif (!this._fsPath) {\n\t\t\tthis._fsPath = uriToFsPath(this, false);\n\t\t}\n\t\treturn this._fsPath;\n\t}\n\n\toverride toString(skipEncoding: boolean = false): string {\n\t\tif (!skipEncoding) {\n\t\t\tif (!this._formatted) {\n\t\t\t\tthis._formatted = _asFormatted(this, false);\n\t\t\t}\n\t\t\treturn this._formatted;\n\t\t} else {\n\t\t\t// we don't cache that\n\t\t\treturn _asFormatted(this, true);\n\t\t}\n\t}\n\n\toverride toJSON(): UriComponents {\n\t\tconst res = <UriState>{\n\t\t\t$mid: 1\n\t\t};\n\t\t// cached state\n\t\tif (this._fsPath) {\n\t\t\tres.fsPath = this._fsPath;\n\t\t\tres._sep = _pathSepMarker;\n\t\t}\n\t\tif (this._formatted) {\n\t\t\tres.external = this._formatted;\n\t\t}\n\t\t// uri components\n\t\tif (this.path) {\n\t\t\tres.path = this.path;\n\t\t}\n\t\tif (this.scheme) {\n\t\t\tres.scheme = this.scheme;\n\t\t}\n\t\tif (this.authority) {\n\t\t\tres.authority = this.authority;\n\t\t}\n\t\tif (this.query) {\n\t\t\tres.query = this.query;\n\t\t}\n\t\tif (this.fragment) {\n\t\t\tres.fragment = this.fragment;\n\t\t}\n\t\treturn res;\n\t}\n}\n\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nconst encodeTable: { [ch: number]: string } = {\n\t[CharCode.Colon]: '%3A', // gen-delims\n\t[CharCode.Slash]: '%2F',\n\t[CharCode.QuestionMark]: '%3F',\n\t[CharCode.Hash]: '%23',\n\t[CharCode.OpenSquareBracket]: '%5B',\n\t[CharCode.CloseSquareBracket]: '%5D',\n\t[CharCode.AtSign]: '%40',\n\n\t[CharCode.ExclamationMark]: '%21', // sub-delims\n\t[CharCode.DollarSign]: '%24',\n\t[CharCode.Ampersand]: '%26',\n\t[CharCode.SingleQuote]: '%27',\n\t[CharCode.OpenParen]: '%28',\n\t[CharCode.CloseParen]: '%29',\n\t[CharCode.Asterisk]: '%2A',\n\t[CharCode.Plus]: '%2B',\n\t[CharCode.Comma]: '%2C',\n\t[CharCode.Semicolon]: '%3B',\n\t[CharCode.Equals]: '%3D',\n\n\t[CharCode.Space]: '%20',\n};\n\nfunction encodeURIComponentFast(uriComponent: string, isPath: boolean, isAuthority: boolean): string {\n\tlet res: string | undefined = undefined;\n\tlet nativeEncodePos = -1;\n\n\tfor (let pos = 0; pos < uriComponent.length; pos++) {\n\t\tconst code = uriComponent.charCodeAt(pos);\n\n\t\t// unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n\t\tif (\n\t\t\t(code >= CharCode.a && code <= CharCode.z)\n\t\t\t|| (code >= CharCode.A && code <= CharCode.Z)\n\t\t\t|| (code >= CharCode.Digit0 && code <= CharCode.Digit9)\n\t\t\t|| code === CharCode.Dash\n\t\t\t|| code === CharCode.Period\n\t\t\t|| code === CharCode.Underline\n\t\t\t|| code === CharCode.Tilde\n\t\t\t|| (isPath && code === CharCode.Slash)\n\t\t\t|| (isAuthority && code === CharCode.OpenSquareBracket)\n\t\t\t|| (isAuthority && code === CharCode.CloseSquareBracket)\n\t\t\t|| (isAuthority && code === CharCode.Colon)\n\t\t) {\n\t\t\t// check if we are delaying native encode\n\t\t\tif (nativeEncodePos !== -1) {\n\t\t\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n\t\t\t\tnativeEncodePos = -1;\n\t\t\t}\n\t\t\t// check if we write into a new string (by default we try to return the param)\n\t\t\tif (res !== undefined) {\n\t\t\t\tres += uriComponent.charAt(pos);\n\t\t\t}\n\n\t\t} else {\n\t\t\t// encoding needed, we need to allocate a new string\n\t\t\tif (res === undefined) {\n\t\t\t\tres = uriComponent.substr(0, pos);\n\t\t\t}\n\n\t\t\t// check with default table first\n\t\t\tconst escaped = encodeTable[code];\n\t\t\tif (escaped !== undefined) {\n\n\t\t\t\t// check if we are delaying native encode\n\t\t\t\tif (nativeEncodePos !== -1) {\n\t\t\t\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n\t\t\t\t\tnativeEncodePos = -1;\n\t\t\t\t}\n\n\t\t\t\t// append escaped variant to result\n\t\t\t\tres += escaped;\n\n\t\t\t} else if (nativeEncodePos === -1) {\n\t\t\t\t// use native encode only when needed\n\t\t\t\tnativeEncodePos = pos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (nativeEncodePos !== -1) {\n\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n\t}\n\n\treturn res !== undefined ? res : uriComponent;\n}\n\nfunction encodeURIComponentMinimal(path: string): string {\n\tlet res: string | undefined = undefined;\n\tfor (let pos = 0; pos < path.length; pos++) {\n\t\tconst code = path.charCodeAt(pos);\n\t\tif (code === CharCode.Hash || code === CharCode.QuestionMark) {\n\t\t\tif (res === undefined) {\n\t\t\t\tres = path.substr(0, pos);\n\t\t\t}\n\t\t\tres += encodeTable[code];\n\t\t} else {\n\t\t\tif (res !== undefined) {\n\t\t\t\tres += path[pos];\n\t\t\t}\n\t\t}\n\t}\n\treturn res !== undefined ? res : path;\n}\n\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri: URI, keepDriveLetterCasing: boolean): string {\n\n\tlet value: string;\n\tif (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n\t\t// unc path: file://shares/c$/far/boo\n\t\tvalue = `//${uri.authority}${uri.path}`;\n\t} else if (\n\t\turi.path.charCodeAt(0) === CharCode.Slash\n\t\t&& (uri.path.charCodeAt(1) >= CharCode.A && uri.path.charCodeAt(1) <= CharCode.Z || uri.path.charCodeAt(1) >= CharCode.a && uri.path.charCodeAt(1) <= CharCode.z)\n\t\t&& uri.path.charCodeAt(2) === CharCode.Colon\n\t) {\n\t\tif (!keepDriveLetterCasing) {\n\t\t\t// windows drive letter: file:///c:/far/boo\n\t\t\tvalue = uri.path[1].toLowerCase() + uri.path.substr(2);\n\t\t} else {\n\t\t\tvalue = uri.path.substr(1);\n\t\t}\n\t} else {\n\t\t// other path\n\t\tvalue = uri.path;\n\t}\n\tif (isWindows) {\n\t\tvalue = value.replace(/\\//g, '\\\\');\n\t}\n\treturn value;\n}\n\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri: URI, skipEncoding: boolean): string {\n\n\tconst encoder = !skipEncoding\n\t\t? encodeURIComponentFast\n\t\t: encodeURIComponentMinimal;\n\n\tlet res = '';\n\tlet { scheme, authority, path, query, fragment } = uri;\n\tif (scheme) {\n\t\tres += scheme;\n\t\tres += ':';\n\t}\n\tif (authority || scheme === 'file') {\n\t\tres += _slash;\n\t\tres += _slash;\n\t}\n\tif (authority) {\n\t\tlet idx = authority.indexOf('@');\n\t\tif (idx !== -1) {\n\t\t\t// <user>@<auth>\n\t\t\tconst userinfo = authority.substr(0, idx);\n\t\t\tauthority = authority.substr(idx + 1);\n\t\t\tidx = userinfo.lastIndexOf(':');\n\t\t\tif (idx === -1) {\n\t\t\t\tres += encoder(userinfo, false, false);\n\t\t\t} else {\n\t\t\t\t// <user>:<pass>@<auth>\n\t\t\t\tres += encoder(userinfo.substr(0, idx), false, false);\n\t\t\t\tres += ':';\n\t\t\t\tres += encoder(userinfo.substr(idx + 1), false, true);\n\t\t\t}\n\t\t\tres += '@';\n\t\t}\n\t\tauthority = authority.toLowerCase();\n\t\tidx = authority.lastIndexOf(':');\n\t\tif (idx === -1) {\n\t\t\tres += encoder(authority, false, true);\n\t\t} else {\n\t\t\t// <auth>:<port>\n\t\t\tres += encoder(authority.substr(0, idx), false, true);\n\t\t\tres += authority.substr(idx);\n\t\t}\n\t}\n\tif (path) {\n\t\t// lower-case windows drive letters in /C:/fff or C:/fff\n\t\tif (path.length >= 3 && path.charCodeAt(0) === CharCode.Slash && path.charCodeAt(2) === CharCode.Colon) {\n\t\t\tconst code = path.charCodeAt(1);\n\t\t\tif (code >= CharCode.A && code <= CharCode.Z) {\n\t\t\t\tpath = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n\t\t\t}\n\t\t} else if (path.length >= 2 && path.charCodeAt(1) === CharCode.Colon) {\n\t\t\tconst code = path.charCodeAt(0);\n\t\t\tif (code >= CharCode.A && code <= CharCode.Z) {\n\t\t\t\tpath = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"/c:\".length === 3\n\t\t\t}\n\t\t}\n\t\t// encode the rest of the path\n\t\tres += encoder(path, true, false);\n\t}\n\tif (query) {\n\t\tres += '?';\n\t\tres += encoder(query, false, false);\n\t}\n\tif (fragment) {\n\t\tres += '#';\n\t\tres += !skipEncoding ? encodeURIComponentFast(fragment, false, false) : fragment;\n\t}\n\treturn res;\n}\n\n// --- decode\n\nfunction decodeURIComponentGraceful(str: string): string {\n\ttry {\n\t\treturn decodeURIComponent(str);\n\t} catch {\n\t\tif (str.length > 3) {\n\t\t\treturn str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n\t\t} else {\n\t\t\treturn str;\n\t\t}\n\t}\n}\n\nconst _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\n\nfunction percentDecode(str: string): string {\n\tif (!str.match(_rEncodedAsHex)) {\n\t\treturn str;\n\t}\n\treturn str.replace(_rEncodedAsHex, (match) => decodeURIComponentGraceful(match));\n}\n\n/**\n * Mapped-type that replaces all occurrences of URI with UriComponents\n */\nexport type UriDto<T> = { [K in keyof T]: T[K] extends URI\n\t? UriComponents\n\t: UriDto<T[K]> };\n", "/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n'use strict';\n\nimport { CharCode } from './charCode';\nimport { URI } from './uri';\nimport * as nodePath from 'path';\n\nconst posixPath = nodePath.posix || nodePath;\nconst slash = '/';\n\nexport namespace Utils {\n\n    /**\n     * Joins one or more input paths to the path of URI. \n     * '/' is used as the directory separation character. \n     * \n     * The resolved path will be normalized. That means:\n     *  - all '..' and '.' segments are resolved.\n     *  - multiple, sequential occurences of '/' are replaced by a single instance of '/'.\n     *  - trailing separators are preserved.\n     * \n     * @param uri The input URI.\n     * @param paths The paths to be joined with the path of URI.\n     * @returns A URI with the joined path. All other properties of the URI (scheme, authority, query, fragments, ...) will be taken from the input URI.\n     */\n    export function joinPath(uri: URI, ...paths: string[]): URI {\n        return uri.with({ path: posixPath.join(uri.path, ...paths) });\n    }\n\n\n    /**\n     * Resolves one or more paths against the path of a URI. \n     * '/' is used as the directory separation character. \n     * \n     * The resolved path will be normalized. That means:\n     *  - all '..' and '.' segments are resolved. \n     *  - multiple, sequential occurences of '/' are replaced by a single instance of '/'.\n     *  - trailing separators are removed.\n     * \n     * @param uri The input URI.\n     * @param paths The paths to resolve against the path of URI.\n     * @returns A URI with the resolved path. All other properties of the URI (scheme, authority, query, fragments, ...) will be taken from the input URI.\n     */\n    export function resolvePath(uri: URI, ...paths: string[]): URI {\n        let path = uri.path; \n        let slashAdded = false;\n        if (path[0] !== slash) {\n            path = slash + path; // make the path abstract: for posixPath.resolve the first segments has to be absolute or cwd is used.\n            slashAdded = true;\n        }\n        let resolvedPath = posixPath.resolve(path, ...paths);\n        if (slashAdded && resolvedPath[0] === slash && !uri.authority) {\n            resolvedPath = resolvedPath.substring(1);\n        }\n        return uri.with({ path: resolvedPath });\n    }\n\n    /**\n     * Returns a URI where the path is the directory name of the input uri, similar to the Unix dirname command. \n     * In the path, '/' is recognized as the directory separation character. Trailing directory separators are ignored.\n     * The orignal URI is returned if the URIs path is empty or does not contain any path segments.\n     * \n     * @param uri The input URI.\n     * @return The last segment of the URIs path.\n     */\n    export function dirname(uri: URI): URI {\n        if (uri.path.length === 0 || uri.path === slash) {\n            return uri;\n        }\n        let path = posixPath.dirname(uri.path);\n        if (path.length === 1 && path.charCodeAt(0) === CharCode.Period) {\n            path = '';\n        }\n        return uri.with({ path });\n    }\n\n    /**\n     * Returns the last segment of the path of a URI, similar to the Unix basename command. \n     * In the path, '/' is recognized as the directory separation character. Trailing directory separators are ignored.\n     * The empty string is returned if the URIs path is empty or does not contain any path segments.\n     * \n     * @param uri The input URI.\n     * @return The base name of the URIs path.\n     */\n    export function basename(uri: URI): string {\n        return posixPath.basename(uri.path);\n    }\n\n    /**\n     * Returns the extension name of the path of a URI, similar to the Unix extname command. \n     * In the path, '/' is recognized as the directory separation character. Trailing directory separators are ignored.\n     * The empty string is returned if the URIs path is empty or does not contain any path segments.\n     * \n     * @param uri The input URI.\n     * @return The extension name of the URIs path.\n     */\n    export function extname(uri: URI): string {\n        return posixPath.extname(uri.path);\n    }\n}", "import { dirname } from 'path';\r\nimport { getBinaryPath } from './installation/installer';\r\n\r\nconsole.log('[executor.ts] Loading...');\r\n\r\n/**\r\n * Interface representing the command line details needed \r\n * to spawn the Language Server process.\r\n */\r\nexport interface ExecutionDetails {\r\n    command: string;\r\n    args: string[];\r\n    cwd: string;\r\n}\r\n\r\n/**\r\n * Manages the execution context for the InlineXML Language Server.\r\n * Switches between local 'dotnet run' for development and the downloaded \r\n * native binary for production/distribution.\r\n */\r\nexport default class Executor {\r\n    /**\r\n     * Set to true to use local source code via 'dotnet run'.\r\n     * Set to false to use the optimized binary downloaded by installer.ts.\r\n     */\r\n    public static IS_DEBUG = false; \r\n    \r\n    /** Local path used only when IS_DEBUG is true */\r\n    private static readonly LOCAL_REPO_PATH = 'C:/Users/John/Desktop/Projects/LanguageServer/InlineXML/InlineXML';\r\n    private static readonly PROJECT_FILE = 'InlineXML.csproj';\r\n\r\n    /**\r\n     * Generates the command and arguments required to start the Language Server.\r\n     * @param workspaceFolder - The root path of the project being edited.\r\n     * @returns An object containing the command, args, and cwd.\r\n     */\r\n    public getExecutionDetails(workspaceFolder: string): ExecutionDetails {\r\n        // Normalize the workspace path to use forward slashes for cross-platform consistency\r\n        const targetWorkspace = workspaceFolder.replace(/\\\\/g, '/');\r\n\r\n        // --- DEBUG MODE (Local Development) ---\r\n        // Used by the developer to test changes in the C# source code immediately.\r\n        if (Executor.IS_DEBUG) {\r\n            const sourceRepo = Executor.LOCAL_REPO_PATH.replace(/\\\\/g, '/');\r\n            const projectPath = `${sourceRepo}/${Executor.PROJECT_FILE}`;\r\n\r\n            return {\r\n                command: 'dotnet',\r\n                args: [\r\n                    'run', \r\n                    '--project', projectPath,\r\n                    '--',                     // CRITICAL: Tells dotnet to stop parsing and pass following args to our app\r\n                    '--lsp', \r\n                    '--workspace', targetWorkspace \r\n                ],\r\n                cwd: sourceRepo\r\n            };\r\n        }\r\n\r\n        // --- PRODUCTION MODE (Downloaded Binary) ---\r\n        // This uses the standalone executable (InlineXML or InlineXML.exe).\r\n        // It's much faster because it doesn't require the .NET SDK or a 'dotnet build' step.\r\n        const downloadedBinPath = getBinaryPath();\r\n        const downloadedBinDir = dirname(downloadedBinPath);\r\n        \r\n        return {\r\n            command: downloadedBinPath,\r\n            args: [\r\n                '--lsp', \r\n                '--workspace', targetWorkspace\r\n            ],\r\n            // We set the current working directory to the binary's folder\r\n            // to ensure it can load any companion .dll or .json files.\r\n            cwd: downloadedBinDir\r\n        };\r\n    }\r\n}", "import * as fs from 'fs';\r\nimport * as path from 'path';\r\nimport * as os from 'os';\r\nimport fetch from 'node-fetch';\r\nimport * as unzipper from 'unzipper';\r\nimport * as child_process from 'child_process';\r\n\r\nconsole.log('[installer.js] Loading...');\r\n\r\nconst Binaries = {\r\n    macos: {\r\n        zip: \"https://github.com/InlineXML/binary/releases/download/v1.0.17/InlineXML-osx-x64.zip\"\r\n    },\r\n    windows: {\r\n        zip: \"https://github.com/InlineXML/binary/releases/download/v1.0.17/InlineXML-win-x64.zip\"\r\n    },\r\n    ubuntu: {\r\n        zip: \"https://github.com/InlineXML/binary/releases/download/v1.0.17/InlineXML-linux-x64.zip\"\r\n    }\r\n};\r\n\r\nconst INSTALL_DIR = path.join(os.homedir(), '.inlinexml-bin');\r\n\r\nconst getPlatform = () => {\r\n    const plat = os.platform();\r\n    if (plat === 'darwin') return 'macos';\r\n    if (plat === 'win32') return 'windows';\r\n    if (plat === 'linux') return 'ubuntu';\r\n    throw new Error(`Unsupported platform: ${plat}`);\r\n}\r\n\r\nexport const getBinaryPath = () => {\r\n    const platform = getPlatform();\r\n    const binaryName = platform === 'windows' ? 'InlineXML.exe' : 'InlineXML';\r\n    return path.join(INSTALL_DIR, binaryName);\r\n}\r\n\r\nexport const needsInstall = () => {\r\n    const binPath = getBinaryPath();\r\n    const exists = fs.existsSync(binPath);\r\n    console.log(`[INSTALLER] Binary path: ${binPath}`);\r\n    console.log(`[INSTALLER] Binary exists: ${exists}`);\r\n    return !exists;\r\n}\r\n\r\nexport const install = async () => {\r\n    const platform = getPlatform();\r\n    const { zip } = Binaries[platform];\r\n\r\n    console.log(`[INSTALLER] Platform detected: ${platform}`);\r\n    console.log(`[INSTALLER] Install directory: ${INSTALL_DIR}`);\r\n\r\n    // Ensure clean start\r\n    if (fs.existsSync(INSTALL_DIR)) {\r\n        console.log(`[INSTALLER] Removing existing directory: ${INSTALL_DIR}`);\r\n        fs.rmSync(INSTALL_DIR, { recursive: true, force: true });\r\n    }\r\n    fs.mkdirSync(INSTALL_DIR, { recursive: true });\r\n\r\n    console.log(`[INSTALLER] Downloading from ${zip}...`);\r\n    const response = await fetch(zip);\r\n    if (!response.ok) {\r\n        throw new Error(`Download failed: ${response.statusText}`);\r\n    }\r\n    \r\n    console.log(`[INSTALLER] Download successful, extracting...`);\r\n    const zipBuffer = Buffer.from(await response.arrayBuffer());\r\n    const directory = await unzipper.Open.buffer(zipBuffer);\r\n    \r\n    let fileCount = 0;\r\n    // ELI5: We walk through every single file in the zip (EXE, DLLs, JSON configs)\r\n    // and save them all into the install directory.\r\n    for (const file of directory.files) {\r\n        // Skip directories themselves, we'll create them via path.join\r\n        if (file.type === 'Directory') continue;\r\n\r\n        // Flatten the structure: we want everything in the root of INSTALL_DIR\r\n        // If your zip has a subfolder (like 'publish/'), path.basename removes it.\r\n        const fileName = path.basename(file.path);\r\n        const filePath = path.join(INSTALL_DIR, fileName);\r\n        \r\n        const content = await file.buffer();\r\n        \r\n        // Write the file. We use 0o755 for everything just to be safe, \r\n        // ensuring the main binary is executable on Mac/Linux.\r\n        fs.writeFileSync(filePath, content, { mode: 0o755 });\r\n        fileCount++;\r\n        console.log(`[INSTALLER] Extracted: ${fileName}`);\r\n    }\r\n\r\n    const finalBin = getBinaryPath();\r\n    if (!fs.existsSync(finalBin)) {\r\n        throw new Error(`Installation failed: Executable not found in the extracted files. Extracted ${fileCount} files total.`);\r\n    }\r\n\r\n    console.log(`[INSTALLER] Installed ${fileCount} files to ${INSTALL_DIR}`);\r\n    console.log(`[INSTALLER] Final binary: ${finalBin}`);\r\n    return finalBin;\r\n}\r\n\r\nexport const runBinary = (args = []) => {\r\n    const binPath = getBinaryPath();\r\n    if (!fs.existsSync(binPath)) {\r\n        throw new Error('Binary not installed yet. Call install() first.');\r\n    }\r\n    return child_process.spawnSync(binPath, args, { stdio: 'inherit' });\r\n}", "/**\n * Index.js\n *\n * a request API compatible with window.fetch\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport http from 'node:http';\nimport https from 'node:https';\nimport zlib from 'node:zlib';\nimport Stream, {PassThrough, pipeline as pump} from 'node:stream';\nimport {Buffer} from 'node:buffer';\n\nimport dataUriToBuffer from 'data-uri-to-buffer';\n\nimport {writeToStream, clone} from './body.js';\nimport Response from './response.js';\nimport Headers, {fromRawHeaders} from './headers.js';\nimport Request, {getNodeRequestOptions} from './request.js';\nimport {FetchError} from './errors/fetch-error.js';\nimport {AbortError} from './errors/abort-error.js';\nimport {isRedirect} from './utils/is-redirect.js';\nimport {FormData} from 'formdata-polyfill/esm.min.js';\nimport {isDomainOrSubdomain, isSameProtocol} from './utils/is.js';\nimport {parseReferrerPolicyFromHeader} from './utils/referrer.js';\nimport {\n\tBlob,\n\tFile,\n\tfileFromSync,\n\tfileFrom,\n\tblobFromSync,\n\tblobFrom\n} from 'fetch-blob/from.js';\n\nexport {FormData, Headers, Request, Response, FetchError, AbortError, isRedirect};\nexport {Blob, File, fileFromSync, fileFrom, blobFromSync, blobFrom};\n\nconst supportedSchemas = new Set(['data:', 'http:', 'https:']);\n\n/**\n * Fetch function\n *\n * @param   {string | URL | import('./request').default} url - Absolute url or Request instance\n * @param   {*} [options_] - Fetch options\n * @return  {Promise<import('./response').default>}\n */\nexport default async function fetch(url, options_) {\n\treturn new Promise((resolve, reject) => {\n\t\t// Build request object\n\t\tconst request = new Request(url, options_);\n\t\tconst {parsedURL, options} = getNodeRequestOptions(request);\n\t\tif (!supportedSchemas.has(parsedURL.protocol)) {\n\t\t\tthrow new TypeError(`node-fetch cannot load ${url}. URL scheme \"${parsedURL.protocol.replace(/:$/, '')}\" is not supported.`);\n\t\t}\n\n\t\tif (parsedURL.protocol === 'data:') {\n\t\t\tconst data = dataUriToBuffer(request.url);\n\t\t\tconst response = new Response(data, {headers: {'Content-Type': data.typeFull}});\n\t\t\tresolve(response);\n\t\t\treturn;\n\t\t}\n\n\t\t// Wrap http.request into fetch\n\t\tconst send = (parsedURL.protocol === 'https:' ? https : http).request;\n\t\tconst {signal} = request;\n\t\tlet response = null;\n\n\t\tconst abort = () => {\n\t\t\tconst error = new AbortError('The operation was aborted.');\n\t\t\treject(error);\n\t\t\tif (request.body && request.body instanceof Stream.Readable) {\n\t\t\t\trequest.body.destroy(error);\n\t\t\t}\n\n\t\t\tif (!response || !response.body) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponse.body.emit('error', error);\n\t\t};\n\n\t\tif (signal && signal.aborted) {\n\t\t\tabort();\n\t\t\treturn;\n\t\t}\n\n\t\tconst abortAndFinalize = () => {\n\t\t\tabort();\n\t\t\tfinalize();\n\t\t};\n\n\t\t// Send request\n\t\tconst request_ = send(parsedURL.toString(), options);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener('abort', abortAndFinalize);\n\t\t}\n\n\t\tconst finalize = () => {\n\t\t\trequest_.abort();\n\t\t\tif (signal) {\n\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t}\n\t\t};\n\n\t\trequest_.on('error', error => {\n\t\t\treject(new FetchError(`request to ${request.url} failed, reason: ${error.message}`, 'system', error));\n\t\t\tfinalize();\n\t\t});\n\n\t\tfixResponseChunkedTransferBadEnding(request_, error => {\n\t\t\tif (response && response.body) {\n\t\t\t\tresponse.body.destroy(error);\n\t\t\t}\n\t\t});\n\n\t\t/* c8 ignore next 18 */\n\t\tif (process.version < 'v14') {\n\t\t\t// Before Node.js 14, pipeline() does not fully support async iterators and does not always\n\t\t\t// properly handle when the socket close/end events are out of order.\n\t\t\trequest_.on('socket', s => {\n\t\t\t\tlet endedWithEventsCount;\n\t\t\t\ts.prependListener('end', () => {\n\t\t\t\t\tendedWithEventsCount = s._eventsCount;\n\t\t\t\t});\n\t\t\t\ts.prependListener('close', hadError => {\n\t\t\t\t\t// if end happened before close but the socket didn't emit an error, do it now\n\t\t\t\t\tif (response && endedWithEventsCount < s._eventsCount && !hadError) {\n\t\t\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\t\t\tresponse.body.emit('error', error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\trequest_.on('response', response_ => {\n\t\t\trequest_.setTimeout(0);\n\t\t\tconst headers = fromRawHeaders(response_.rawHeaders);\n\n\t\t\t// HTTP fetch step 5\n\t\t\tif (isRedirect(response_.statusCode)) {\n\t\t\t\t// HTTP fetch step 5.2\n\t\t\t\tconst location = headers.get('Location');\n\n\t\t\t\t// HTTP fetch step 5.3\n\t\t\t\tlet locationURL = null;\n\t\t\t\ttry {\n\t\t\t\t\tlocationURL = location === null ? null : new URL(location, request.url);\n\t\t\t\t} catch {\n\t\t\t\t\t// error here can only be invalid URL in Location: header\n\t\t\t\t\t// do not throw when options.redirect == manual\n\t\t\t\t\t// let the user extract the errorneous redirect URL\n\t\t\t\t\tif (request.redirect !== 'manual') {\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with an invalid redirect URL: ${location}`, 'invalid-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// HTTP fetch step 5.5\n\t\t\t\tswitch (request.redirect) {\n\t\t\t\t\tcase 'error':\n\t\t\t\t\t\treject(new FetchError(`uri requested responds with a redirect, redirect mode is set to error: ${request.url}`, 'no-redirect'));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'manual':\n\t\t\t\t\t\t// Nothing to do\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'follow': {\n\t\t\t\t\t\t// HTTP-redirect fetch step 2\n\t\t\t\t\t\tif (locationURL === null) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 5\n\t\t\t\t\t\tif (request.counter >= request.follow) {\n\t\t\t\t\t\t\treject(new FetchError(`maximum redirect reached at: ${request.url}`, 'max-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 6 (counter increment)\n\t\t\t\t\t\t// Create a new Request object.\n\t\t\t\t\t\tconst requestOptions = {\n\t\t\t\t\t\t\theaders: new Headers(request.headers),\n\t\t\t\t\t\t\tfollow: request.follow,\n\t\t\t\t\t\t\tcounter: request.counter + 1,\n\t\t\t\t\t\t\tagent: request.agent,\n\t\t\t\t\t\t\tcompress: request.compress,\n\t\t\t\t\t\t\tmethod: request.method,\n\t\t\t\t\t\t\tbody: clone(request),\n\t\t\t\t\t\t\tsignal: request.signal,\n\t\t\t\t\t\t\tsize: request.size,\n\t\t\t\t\t\t\treferrer: request.referrer,\n\t\t\t\t\t\t\treferrerPolicy: request.referrerPolicy\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// when forwarding sensitive headers like \"Authorization\",\n\t\t\t\t\t\t// \"WWW-Authenticate\", and \"Cookie\" to untrusted targets,\n\t\t\t\t\t\t// headers will be ignored when following a redirect to a domain\n\t\t\t\t\t\t// that is not a subdomain match or exact match of the initial domain.\n\t\t\t\t\t\t// For example, a redirect from \"foo.com\" to either \"foo.com\" or \"sub.foo.com\"\n\t\t\t\t\t\t// will forward the sensitive headers, but a redirect to \"bar.com\" will not.\n\t\t\t\t\t\t// headers will also be ignored when following a redirect to a domain using\n\t\t\t\t\t\t// a different protocol. For example, a redirect from \"https://foo.com\" to \"http://foo.com\"\n\t\t\t\t\t\t// will not forward the sensitive headers\n\t\t\t\t\t\tif (!isDomainOrSubdomain(request.url, locationURL) || !isSameProtocol(request.url, locationURL)) {\n\t\t\t\t\t\t\tfor (const name of ['authorization', 'www-authenticate', 'cookie', 'cookie2']) {\n\t\t\t\t\t\t\t\trequestOptions.headers.delete(name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 9\n\t\t\t\t\t\tif (response_.statusCode !== 303 && request.body && options_.body instanceof Stream.Readable) {\n\t\t\t\t\t\t\treject(new FetchError('Cannot follow redirect with body being a readable stream', 'unsupported-redirect'));\n\t\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 11\n\t\t\t\t\t\tif (response_.statusCode === 303 || ((response_.statusCode === 301 || response_.statusCode === 302) && request.method === 'POST')) {\n\t\t\t\t\t\t\trequestOptions.method = 'GET';\n\t\t\t\t\t\t\trequestOptions.body = undefined;\n\t\t\t\t\t\t\trequestOptions.headers.delete('content-length');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 14\n\t\t\t\t\t\tconst responseReferrerPolicy = parseReferrerPolicyFromHeader(headers);\n\t\t\t\t\t\tif (responseReferrerPolicy) {\n\t\t\t\t\t\t\trequestOptions.referrerPolicy = responseReferrerPolicy;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// HTTP-redirect fetch step 15\n\t\t\t\t\t\tresolve(fetch(new Request(locationURL, requestOptions)));\n\t\t\t\t\t\tfinalize();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn reject(new TypeError(`Redirect option '${request.redirect}' is not a valid value of RequestRedirect`));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Prepare response\n\t\t\tif (signal) {\n\t\t\t\tresponse_.once('end', () => {\n\t\t\t\t\tsignal.removeEventListener('abort', abortAndFinalize);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet body = pump(response_, new PassThrough(), error => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// see https://github.com/nodejs/node/pull/29376\n\t\t\t/* c8 ignore next 3 */\n\t\t\tif (process.version < 'v12.10') {\n\t\t\t\tresponse_.on('aborted', abortAndFinalize);\n\t\t\t}\n\n\t\t\tconst responseOptions = {\n\t\t\t\turl: request.url,\n\t\t\t\tstatus: response_.statusCode,\n\t\t\t\tstatusText: response_.statusMessage,\n\t\t\t\theaders,\n\t\t\t\tsize: request.size,\n\t\t\t\tcounter: request.counter,\n\t\t\t\thighWaterMark: request.highWaterMark\n\t\t\t};\n\n\t\t\t// HTTP-network fetch step 12.1.1.3\n\t\t\tconst codings = headers.get('Content-Encoding');\n\n\t\t\t// HTTP-network fetch step 12.1.1.4: handle content codings\n\n\t\t\t// in following scenarios we ignore compression support\n\t\t\t// 1. compression support is disabled\n\t\t\t// 2. HEAD request\n\t\t\t// 3. no Content-Encoding header\n\t\t\t// 4. no content response (204)\n\t\t\t// 5. content not modified response (304)\n\t\t\tif (!request.compress || request.method === 'HEAD' || codings === null || response_.statusCode === 204 || response_.statusCode === 304) {\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For Node v6+\n\t\t\t// Be less strict when decoding compressed responses, since sometimes\n\t\t\t// servers send slightly invalid responses that are still accepted\n\t\t\t// by common browsers.\n\t\t\t// Always using Z_SYNC_FLUSH is what cURL does.\n\t\t\tconst zlibOptions = {\n\t\t\t\tflush: zlib.Z_SYNC_FLUSH,\n\t\t\t\tfinishFlush: zlib.Z_SYNC_FLUSH\n\t\t\t};\n\n\t\t\t// For gzip\n\t\t\tif (codings === 'gzip' || codings === 'x-gzip') {\n\t\t\t\tbody = pump(body, zlib.createGunzip(zlibOptions), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For deflate\n\t\t\tif (codings === 'deflate' || codings === 'x-deflate') {\n\t\t\t\t// Handle the infamous raw deflate response from old servers\n\t\t\t\t// a hack for old IIS and Apache servers\n\t\t\t\tconst raw = pump(response_, new PassThrough(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\traw.once('data', chunk => {\n\t\t\t\t\t// See http://stackoverflow.com/questions/37519828\n\t\t\t\t\tif ((chunk[0] & 0x0F) === 0x08) {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflate(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbody = pump(body, zlib.createInflateRaw(), error => {\n\t\t\t\t\t\t\tif (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t\t\traw.once('end', () => {\n\t\t\t\t\t// Some old IIS servers return zero-length OK deflate responses, so\n\t\t\t\t\t// 'data' is never emitted. See https://github.com/node-fetch/node-fetch/pull/903\n\t\t\t\t\tif (!response) {\n\t\t\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// For br\n\t\t\tif (codings === 'br') {\n\t\t\t\tbody = pump(body, zlib.createBrotliDecompress(), error => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tresponse = new Response(body, responseOptions);\n\t\t\t\tresolve(response);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Otherwise, use response as-is\n\t\t\tresponse = new Response(body, responseOptions);\n\t\t\tresolve(response);\n\t\t});\n\n\t\t// eslint-disable-next-line promise/prefer-await-to-then\n\t\twriteToStream(request_, request).catch(reject);\n\t});\n}\n\nfunction fixResponseChunkedTransferBadEnding(request, errorCallback) {\n\tconst LAST_CHUNK = Buffer.from('0\\r\\n\\r\\n');\n\n\tlet isChunkedTransfer = false;\n\tlet properLastChunkReceived = false;\n\tlet previousChunk;\n\n\trequest.on('response', response => {\n\t\tconst {headers} = response;\n\t\tisChunkedTransfer = headers['transfer-encoding'] === 'chunked' && !headers['content-length'];\n\t});\n\n\trequest.on('socket', socket => {\n\t\tconst onSocketClose = () => {\n\t\t\tif (isChunkedTransfer && !properLastChunkReceived) {\n\t\t\t\tconst error = new Error('Premature close');\n\t\t\t\terror.code = 'ERR_STREAM_PREMATURE_CLOSE';\n\t\t\t\terrorCallback(error);\n\t\t\t}\n\t\t};\n\n\t\tconst onData = buf => {\n\t\t\tproperLastChunkReceived = Buffer.compare(buf.slice(-5), LAST_CHUNK) === 0;\n\n\t\t\t// Sometimes final 0-length chunk and end of message code are in separate packets\n\t\t\tif (!properLastChunkReceived && previousChunk) {\n\t\t\t\tproperLastChunkReceived = (\n\t\t\t\t\tBuffer.compare(previousChunk.slice(-3), LAST_CHUNK.slice(0, 3)) === 0 &&\n\t\t\t\t\tBuffer.compare(buf.slice(-2), LAST_CHUNK.slice(3)) === 0\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tpreviousChunk = buf;\n\t\t};\n\n\t\tsocket.prependListener('close', onSocketClose);\n\t\tsocket.on('data', onData);\n\n\t\trequest.on('close', () => {\n\t\t\tsocket.removeListener('close', onSocketClose);\n\t\t\tsocket.removeListener('data', onData);\n\t\t});\n\t});\n}\n", "export interface MimeBuffer extends Buffer {\n\ttype: string;\n\ttypeFull: string;\n\tcharset: string;\n}\n\n/**\n * Returns a `Buffer` instance from the given data URI `uri`.\n *\n * @param {String} uri Data URI to turn into a Buffer instance\n * @returns {Buffer} Buffer instance from Data URI\n * @api public\n */\nexport function dataUriToBuffer(uri: string): MimeBuffer {\n\tif (!/^data:/i.test(uri)) {\n\t\tthrow new TypeError(\n\t\t\t'`uri` does not appear to be a Data URI (must begin with \"data:\")'\n\t\t);\n\t}\n\n\t// strip newlines\n\turi = uri.replace(/\\r?\\n/g, '');\n\n\t// split the URI up into the \"metadata\" and the \"data\" portions\n\tconst firstComma = uri.indexOf(',');\n\tif (firstComma === -1 || firstComma <= 4) {\n\t\tthrow new TypeError('malformed data: URI');\n\t}\n\n\t// remove the \"data:\" scheme and parse the metadata\n\tconst meta = uri.substring(5, firstComma).split(';');\n\n\tlet charset = '';\n\tlet base64 = false;\n\tconst type = meta[0] || 'text/plain';\n\tlet typeFull = type;\n\tfor (let i = 1; i < meta.length; i++) {\n\t\tif (meta[i] === 'base64') {\n\t\t\tbase64 = true;\n\t\t} else if(meta[i]) {\n\t\t\ttypeFull += `;${  meta[i]}`;\n\t\t\tif (meta[i].indexOf('charset=') === 0) {\n\t\t\t\tcharset = meta[i].substring(8);\n\t\t\t}\n\t\t}\n\t}\n\t// defaults to US-ASCII only if type is not provided\n\tif (!meta[0] && !charset.length) {\n\t\ttypeFull += ';charset=US-ASCII';\n\t\tcharset = 'US-ASCII';\n\t}\n\n\t// get the encoded data portion and decode URI-encoded chars\n\tconst encoding = base64 ? 'base64' : 'ascii';\n\tconst data = unescape(uri.substring(firstComma + 1));\n\tconst buffer = Buffer.from(data, encoding) as MimeBuffer;\n\n\t// set `.type` and `.typeFull` properties to MIME type\n\tbuffer.type = type;\n\tbuffer.typeFull = typeFull;\n\n\t// set the `.charset` property\n\tbuffer.charset = charset;\n\n\treturn buffer;\n}\n\nexport default dataUriToBuffer;\n", "\n/**\n * Body.js\n *\n * Body interface provides common methods for Request and Response\n */\n\nimport Stream, {PassThrough} from 'node:stream';\nimport {types, deprecate, promisify} from 'node:util';\nimport {Buffer} from 'node:buffer';\n\nimport Blob from 'fetch-blob';\nimport {FormData, formDataToBlob} from 'formdata-polyfill/esm.min.js';\n\nimport {FetchError} from './errors/fetch-error.js';\nimport {FetchBaseError} from './errors/base.js';\nimport {isBlob, isURLSearchParameters} from './utils/is.js';\n\nconst pipeline = promisify(Stream.pipeline);\nconst INTERNALS = Symbol('Body internals');\n\n/**\n * Body mixin\n *\n * Ref: https://fetch.spec.whatwg.org/#body\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Body {\n\tconstructor(body, {\n\t\tsize = 0\n\t} = {}) {\n\t\tlet boundary = null;\n\n\t\tif (body === null) {\n\t\t\t// Body is undefined or null\n\t\t\tbody = null;\n\t\t} else if (isURLSearchParameters(body)) {\n\t\t\t// Body is a URLSearchParams\n\t\t\tbody = Buffer.from(body.toString());\n\t\t} else if (isBlob(body)) {\n\t\t\t// Body is blob\n\t\t} else if (Buffer.isBuffer(body)) {\n\t\t\t// Body is Buffer\n\t\t} else if (types.isAnyArrayBuffer(body)) {\n\t\t\t// Body is ArrayBuffer\n\t\t\tbody = Buffer.from(body);\n\t\t} else if (ArrayBuffer.isView(body)) {\n\t\t\t// Body is ArrayBufferView\n\t\t\tbody = Buffer.from(body.buffer, body.byteOffset, body.byteLength);\n\t\t} else if (body instanceof Stream) {\n\t\t\t// Body is stream\n\t\t} else if (body instanceof FormData) {\n\t\t\t// Body is FormData\n\t\t\tbody = formDataToBlob(body);\n\t\t\tboundary = body.type.split('=')[1];\n\t\t} else {\n\t\t\t// None of the above\n\t\t\t// coerce to string then buffer\n\t\t\tbody = Buffer.from(String(body));\n\t\t}\n\n\t\tlet stream = body;\n\n\t\tif (Buffer.isBuffer(body)) {\n\t\t\tstream = Stream.Readable.from(body);\n\t\t} else if (isBlob(body)) {\n\t\t\tstream = Stream.Readable.from(body.stream());\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tbody,\n\t\t\tstream,\n\t\t\tboundary,\n\t\t\tdisturbed: false,\n\t\t\terror: null\n\t\t};\n\t\tthis.size = size;\n\n\t\tif (body instanceof Stream) {\n\t\t\tbody.on('error', error_ => {\n\t\t\t\tconst error = error_ instanceof FetchBaseError ?\n\t\t\t\t\terror_ :\n\t\t\t\t\tnew FetchError(`Invalid response body while trying to fetch ${this.url}: ${error_.message}`, 'system', error_);\n\t\t\t\tthis[INTERNALS].error = error;\n\t\t\t});\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn this[INTERNALS].stream;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[INTERNALS].disturbed;\n\t}\n\n\t/**\n\t * Decode response as ArrayBuffer\n\t *\n\t * @return  Promise\n\t */\n\tasync arrayBuffer() {\n\t\tconst {buffer, byteOffset, byteLength} = await consumeBody(this);\n\t\treturn buffer.slice(byteOffset, byteOffset + byteLength);\n\t}\n\n\tasync formData() {\n\t\tconst ct = this.headers.get('content-type');\n\n\t\tif (ct.startsWith('application/x-www-form-urlencoded')) {\n\t\t\tconst formData = new FormData();\n\t\t\tconst parameters = new URLSearchParams(await this.text());\n\n\t\t\tfor (const [name, value] of parameters) {\n\t\t\t\tformData.append(name, value);\n\t\t\t}\n\n\t\t\treturn formData;\n\t\t}\n\n\t\tconst {toFormData} = await import('./utils/multipart-parser.js');\n\t\treturn toFormData(this.body, ct);\n\t}\n\n\t/**\n\t * Return raw response as Blob\n\t *\n\t * @return Promise\n\t */\n\tasync blob() {\n\t\tconst ct = (this.headers && this.headers.get('content-type')) || (this[INTERNALS].body && this[INTERNALS].body.type) || '';\n\t\tconst buf = await this.arrayBuffer();\n\n\t\treturn new Blob([buf], {\n\t\t\ttype: ct\n\t\t});\n\t}\n\n\t/**\n\t * Decode response as json\n\t *\n\t * @return  Promise\n\t */\n\tasync json() {\n\t\tconst text = await this.text();\n\t\treturn JSON.parse(text);\n\t}\n\n\t/**\n\t * Decode response as text\n\t *\n\t * @return  Promise\n\t */\n\tasync text() {\n\t\tconst buffer = await consumeBody(this);\n\t\treturn new TextDecoder().decode(buffer);\n\t}\n\n\t/**\n\t * Decode response as buffer (non-spec api)\n\t *\n\t * @return  Promise\n\t */\n\tbuffer() {\n\t\treturn consumeBody(this);\n\t}\n}\n\nBody.prototype.buffer = deprecate(Body.prototype.buffer, 'Please use \\'response.arrayBuffer()\\' instead of \\'response.buffer()\\'', 'node-fetch#buffer');\n\n// In browsers, all properties are enumerable.\nObject.defineProperties(Body.prototype, {\n\tbody: {enumerable: true},\n\tbodyUsed: {enumerable: true},\n\tarrayBuffer: {enumerable: true},\n\tblob: {enumerable: true},\n\tjson: {enumerable: true},\n\ttext: {enumerable: true},\n\tdata: {get: deprecate(() => {},\n\t\t'data doesn\\'t exist, use json(), text(), arrayBuffer(), or body instead',\n\t\t'https://github.com/node-fetch/node-fetch/issues/1000 (response)')}\n});\n\n/**\n * Consume and convert an entire Body to a Buffer.\n *\n * Ref: https://fetch.spec.whatwg.org/#concept-body-consume-body\n *\n * @return Promise\n */\nasync function consumeBody(data) {\n\tif (data[INTERNALS].disturbed) {\n\t\tthrow new TypeError(`body used already for: ${data.url}`);\n\t}\n\n\tdata[INTERNALS].disturbed = true;\n\n\tif (data[INTERNALS].error) {\n\t\tthrow data[INTERNALS].error;\n\t}\n\n\tconst {body} = data;\n\n\t// Body is null\n\tif (body === null) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t/* c8 ignore next 3 */\n\tif (!(body instanceof Stream)) {\n\t\treturn Buffer.alloc(0);\n\t}\n\n\t// Body is stream\n\t// get ready to actually consume the body\n\tconst accum = [];\n\tlet accumBytes = 0;\n\n\ttry {\n\t\tfor await (const chunk of body) {\n\t\t\tif (data.size > 0 && accumBytes + chunk.length > data.size) {\n\t\t\t\tconst error = new FetchError(`content size at ${data.url} over limit: ${data.size}`, 'max-size');\n\t\t\t\tbody.destroy(error);\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\taccumBytes += chunk.length;\n\t\t\taccum.push(chunk);\n\t\t}\n\t} catch (error) {\n\t\tconst error_ = error instanceof FetchBaseError ? error : new FetchError(`Invalid response body while trying to fetch ${data.url}: ${error.message}`, 'system', error);\n\t\tthrow error_;\n\t}\n\n\tif (body.readableEnded === true || body._readableState.ended === true) {\n\t\ttry {\n\t\t\tif (accum.every(c => typeof c === 'string')) {\n\t\t\t\treturn Buffer.from(accum.join(''));\n\t\t\t}\n\n\t\t\treturn Buffer.concat(accum, accumBytes);\n\t\t} catch (error) {\n\t\t\tthrow new FetchError(`Could not create Buffer from response body for ${data.url}: ${error.message}`, 'system', error);\n\t\t}\n\t} else {\n\t\tthrow new FetchError(`Premature close of server response while trying to fetch ${data.url}`);\n\t}\n}\n\n/**\n * Clone body given Res/Req instance\n *\n * @param   Mixed   instance       Response or Request instance\n * @param   String  highWaterMark  highWaterMark for both PassThrough body streams\n * @return  Mixed\n */\nexport const clone = (instance, highWaterMark) => {\n\tlet p1;\n\tlet p2;\n\tlet {body} = instance[INTERNALS];\n\n\t// Don't allow cloning a used body\n\tif (instance.bodyUsed) {\n\t\tthrow new Error('cannot clone body after it is used');\n\t}\n\n\t// Check that body is a stream and not form-data object\n\t// note: we can't clone the form-data object without having it as a dependency\n\tif ((body instanceof Stream) && (typeof body.getBoundary !== 'function')) {\n\t\t// Tee instance body\n\t\tp1 = new PassThrough({highWaterMark});\n\t\tp2 = new PassThrough({highWaterMark});\n\t\tbody.pipe(p1);\n\t\tbody.pipe(p2);\n\t\t// Set instance body to teed body and return the other teed body\n\t\tinstance[INTERNALS].stream = p1;\n\t\tbody = p2;\n\t}\n\n\treturn body;\n};\n\nconst getNonSpecFormDataBoundary = deprecate(\n\tbody => body.getBoundary(),\n\t'form-data doesn\\'t follow the spec and requires special treatment. Use alternative package',\n\t'https://github.com/node-fetch/node-fetch/issues/1167'\n);\n\n/**\n * Performs the operation \"extract a `Content-Type` value from |object|\" as\n * specified in the specification:\n * https://fetch.spec.whatwg.org/#concept-bodyinit-extract\n *\n * This function assumes that instance.body is present.\n *\n * @param {any} body Any options.body input\n * @returns {string | null}\n */\nexport const extractContentType = (body, request) => {\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn null;\n\t}\n\n\t// Body is string\n\tif (typeof body === 'string') {\n\t\treturn 'text/plain;charset=UTF-8';\n\t}\n\n\t// Body is a URLSearchParams\n\tif (isURLSearchParameters(body)) {\n\t\treturn 'application/x-www-form-urlencoded;charset=UTF-8';\n\t}\n\n\t// Body is blob\n\tif (isBlob(body)) {\n\t\treturn body.type || null;\n\t}\n\n\t// Body is a Buffer (Buffer, ArrayBuffer or ArrayBufferView)\n\tif (Buffer.isBuffer(body) || types.isAnyArrayBuffer(body) || ArrayBuffer.isView(body)) {\n\t\treturn null;\n\t}\n\n\tif (body instanceof FormData) {\n\t\treturn `multipart/form-data; boundary=${request[INTERNALS].boundary}`;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getBoundary === 'function') {\n\t\treturn `multipart/form-data;boundary=${getNonSpecFormDataBoundary(body)}`;\n\t}\n\n\t// Body is stream - can't really do much about this\n\tif (body instanceof Stream) {\n\t\treturn null;\n\t}\n\n\t// Body constructor defaults other things to string\n\treturn 'text/plain;charset=UTF-8';\n};\n\n/**\n * The Fetch Standard treats this as if \"total bytes\" is a property on the body.\n * For us, we have to explicitly get it with a function.\n *\n * ref: https://fetch.spec.whatwg.org/#concept-body-total-bytes\n *\n * @param {any} obj.body Body object from the Body instance.\n * @returns {number | null}\n */\nexport const getTotalBytes = request => {\n\tconst {body} = request[INTERNALS];\n\n\t// Body is null or undefined\n\tif (body === null) {\n\t\treturn 0;\n\t}\n\n\t// Body is Blob\n\tif (isBlob(body)) {\n\t\treturn body.size;\n\t}\n\n\t// Body is Buffer\n\tif (Buffer.isBuffer(body)) {\n\t\treturn body.length;\n\t}\n\n\t// Detect form data input from form-data module\n\tif (body && typeof body.getLengthSync === 'function') {\n\t\treturn body.hasKnownLength && body.hasKnownLength() ? body.getLengthSync() : null;\n\t}\n\n\t// Body is stream\n\treturn null;\n};\n\n/**\n * Write a Body to a Node.js WritableStream (e.g. http.Request) object.\n *\n * @param {Stream.Writable} dest The stream to write to.\n * @param obj.body Body object from the Body instance.\n * @returns {Promise<void>}\n */\nexport const writeToStream = async (dest, {body}) => {\n\tif (body === null) {\n\t\t// Body is null\n\t\tdest.end();\n\t} else {\n\t\t// Body is stream\n\t\tawait pipeline(body, dest);\n\t}\n};\n", "export class FetchBaseError extends Error {\n\tconstructor(message, type) {\n\t\tsuper(message);\n\t\t// Hide custom error implementation details from end-users\n\t\tError.captureStackTrace(this, this.constructor);\n\n\t\tthis.type = type;\n\t}\n\n\tget name() {\n\t\treturn this.constructor.name;\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n}\n", "\nimport {FetchBaseError} from './base.js';\n\n/**\n * @typedef {{ address?: string, code: string, dest?: string, errno: number, info?: object, message: string, path?: string, port?: number, syscall: string}} SystemError\n*/\n\n/**\n * FetchError interface for operational errors\n */\nexport class FetchError extends FetchBaseError {\n\t/**\n\t * @param  {string} message -      Error message for human\n\t * @param  {string} [type] -        Error type for machine\n\t * @param  {SystemError} [systemError] - For Node.js system error\n\t */\n\tconstructor(message, type, systemError) {\n\t\tsuper(message, type);\n\t\t// When err.type is `system`, err.erroredSysCall contains system error and err.code contains system error code\n\t\tif (systemError) {\n\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\tthis.code = this.errno = systemError.code;\n\t\t\tthis.erroredSysCall = systemError.syscall;\n\t\t}\n\t}\n}\n", "/**\n * Is.js\n *\n * Object type checks.\n */\n\nconst NAME = Symbol.toStringTag;\n\n/**\n * Check if `obj` is a URLSearchParams object\n * ref: https://github.com/node-fetch/node-fetch/issues/296#issuecomment-307598143\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isURLSearchParameters = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.append === 'function' &&\n\t\ttypeof object.delete === 'function' &&\n\t\ttypeof object.get === 'function' &&\n\t\ttypeof object.getAll === 'function' &&\n\t\ttypeof object.has === 'function' &&\n\t\ttypeof object.set === 'function' &&\n\t\ttypeof object.sort === 'function' &&\n\t\tobject[NAME] === 'URLSearchParams'\n\t);\n};\n\n/**\n * Check if `object` is a W3C `Blob` object (which `File` inherits from)\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isBlob = object => {\n\treturn (\n\t\tobject &&\n\t\ttypeof object === 'object' &&\n\t\ttypeof object.arrayBuffer === 'function' &&\n\t\ttypeof object.type === 'string' &&\n\t\ttypeof object.stream === 'function' &&\n\t\ttypeof object.constructor === 'function' &&\n\t\t/^(Blob|File)$/.test(object[NAME])\n\t);\n};\n\n/**\n * Check if `obj` is an instance of AbortSignal.\n * @param {*} object - Object to check for\n * @return {boolean}\n */\nexport const isAbortSignal = object => {\n\treturn (\n\t\ttypeof object === 'object' && (\n\t\t\tobject[NAME] === 'AbortSignal' ||\n\t\t\tobject[NAME] === 'EventTarget'\n\t\t)\n\t);\n};\n\n/**\n * isDomainOrSubdomain reports whether sub is a subdomain (or exact match) of\n * the parent domain.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isDomainOrSubdomain = (destination, original) => {\n\tconst orig = new URL(original).hostname;\n\tconst dest = new URL(destination).hostname;\n\n\treturn orig === dest || orig.endsWith(`.${dest}`);\n};\n\n/**\n * isSameProtocol reports whether the two provided URLs use the same protocol.\n *\n * Both domains must already be in canonical form.\n * @param {string|URL} original\n * @param {string|URL} destination\n */\nexport const isSameProtocol = (destination, original) => {\n\tconst orig = new URL(original).protocol;\n\tconst dest = new URL(destination).protocol;\n\n\treturn orig === dest;\n};\n", "/**\n * Headers.js\n *\n * Headers class offers convenient helpers\n */\n\nimport {types} from 'node:util';\nimport http from 'node:http';\n\n/* c8 ignore next 9 */\nconst validateHeaderName = typeof http.validateHeaderName === 'function' ?\n\thttp.validateHeaderName :\n\tname => {\n\t\tif (!/^[\\^`\\-\\w!#$%&'*+.|~]+$/.test(name)) {\n\t\t\tconst error = new TypeError(`Header name must be a valid HTTP token [${name}]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_HTTP_TOKEN'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/* c8 ignore next 9 */\nconst validateHeaderValue = typeof http.validateHeaderValue === 'function' ?\n\thttp.validateHeaderValue :\n\t(name, value) => {\n\t\tif (/[^\\t\\u0020-\\u007E\\u0080-\\u00FF]/.test(value)) {\n\t\t\tconst error = new TypeError(`Invalid character in header content [\"${name}\"]`);\n\t\t\tObject.defineProperty(error, 'code', {value: 'ERR_INVALID_CHAR'});\n\t\t\tthrow error;\n\t\t}\n\t};\n\n/**\n * @typedef {Headers | Record<string, string> | Iterable<readonly [string, string]> | Iterable<Iterable<string>>} HeadersInit\n */\n\n/**\n * This Fetch API interface allows you to perform various actions on HTTP request and response headers.\n * These actions include retrieving, setting, adding to, and removing.\n * A Headers object has an associated header list, which is initially empty and consists of zero or more name and value pairs.\n * You can add to this using methods like append() (see Examples.)\n * In all methods of this interface, header names are matched by case-insensitive byte sequence.\n *\n */\nexport default class Headers extends URLSearchParams {\n\t/**\n\t * Headers class\n\t *\n\t * @constructor\n\t * @param {HeadersInit} [init] - Response headers\n\t */\n\tconstructor(init) {\n\t\t// Validate and normalize init object in [name, value(s)][]\n\t\t/** @type {string[][]} */\n\t\tlet result = [];\n\t\tif (init instanceof Headers) {\n\t\t\tconst raw = init.raw();\n\t\t\tfor (const [name, values] of Object.entries(raw)) {\n\t\t\t\tresult.push(...values.map(value => [name, value]));\n\t\t\t}\n\t\t} else if (init == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\t\t// No op\n\t\t} else if (typeof init === 'object' && !types.isBoxedPrimitive(init)) {\n\t\t\tconst method = init[Symbol.iterator];\n\t\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\t\tif (method == null) {\n\t\t\t\t// Record<ByteString, ByteString>\n\t\t\t\tresult.push(...Object.entries(init));\n\t\t\t} else {\n\t\t\t\tif (typeof method !== 'function') {\n\t\t\t\t\tthrow new TypeError('Header pairs must be iterable');\n\t\t\t\t}\n\n\t\t\t\t// Sequence<sequence<ByteString>>\n\t\t\t\t// Note: per spec we have to first exhaust the lists then process them\n\t\t\t\tresult = [...init]\n\t\t\t\t\t.map(pair => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof pair !== 'object' || types.isBoxedPrimitive(pair)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be an iterable object');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t}).map(pair => {\n\t\t\t\t\t\tif (pair.length !== 2) {\n\t\t\t\t\t\t\tthrow new TypeError('Each header pair must be a name/value tuple');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn [...pair];\n\t\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Failed to construct \\'Headers\\': The provided value is not of type \\'(sequence<sequence<ByteString>> or record<ByteString, ByteString>)');\n\t\t}\n\n\t\t// Validate and lowercase\n\t\tresult =\n\t\t\tresult.length > 0 ?\n\t\t\t\tresult.map(([name, value]) => {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn [String(name).toLowerCase(), String(value)];\n\t\t\t\t}) :\n\t\t\t\tundefined;\n\n\t\tsuper(result);\n\n\t\t// Returning a Proxy that will lowercase key names, validate parameters and sort keys\n\t\t// eslint-disable-next-line no-constructor-return\n\t\treturn new Proxy(this, {\n\t\t\tget(target, p, receiver) {\n\t\t\t\tswitch (p) {\n\t\t\t\t\tcase 'append':\n\t\t\t\t\tcase 'set':\n\t\t\t\t\t\treturn (name, value) => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase(),\n\t\t\t\t\t\t\t\tString(value)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'delete':\n\t\t\t\t\tcase 'has':\n\t\t\t\t\tcase 'getAll':\n\t\t\t\t\t\treturn name => {\n\t\t\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\t\t\treturn URLSearchParams.prototype[p].call(\n\t\t\t\t\t\t\t\ttarget,\n\t\t\t\t\t\t\t\tString(name).toLowerCase()\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'keys':\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\ttarget.sort();\n\t\t\t\t\t\t\treturn new Set(URLSearchParams.prototype.keys.call(target)).keys();\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn Reflect.get(target, p, receiver);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t/* c8 ignore next */\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn this.constructor.name;\n\t}\n\n\ttoString() {\n\t\treturn Object.prototype.toString.call(this);\n\t}\n\n\tget(name) {\n\t\tconst values = this.getAll(name);\n\t\tif (values.length === 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlet value = values.join(', ');\n\t\tif (/^content-encoding$/i.test(name)) {\n\t\t\tvalue = value.toLowerCase();\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tforEach(callback, thisArg = undefined) {\n\t\tfor (const name of this.keys()) {\n\t\t\tReflect.apply(callback, thisArg, [this.get(name), name, this]);\n\t\t}\n\t}\n\n\t* values() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield this.get(name);\n\t\t}\n\t}\n\n\t/**\n\t * @type {() => IterableIterator<[string, string]>}\n\t */\n\t* entries() {\n\t\tfor (const name of this.keys()) {\n\t\t\tyield [name, this.get(name)];\n\t\t}\n\t}\n\n\t[Symbol.iterator]() {\n\t\treturn this.entries();\n\t}\n\n\t/**\n\t * Node-fetch non-spec method\n\t * returning all headers and their values as array\n\t * @returns {Record<string, string[]>}\n\t */\n\traw() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tresult[key] = this.getAll(key);\n\t\t\treturn result;\n\t\t}, {});\n\t}\n\n\t/**\n\t * For better console.log(headers) and also to convert Headers into Node.js Request compatible format\n\t */\n\t[Symbol.for('nodejs.util.inspect.custom')]() {\n\t\treturn [...this.keys()].reduce((result, key) => {\n\t\t\tconst values = this.getAll(key);\n\t\t\t// Http.request() only supports string as Host header.\n\t\t\t// This hack makes specifying custom Host header possible.\n\t\t\tif (key === 'host') {\n\t\t\t\tresult[key] = values[0];\n\t\t\t} else {\n\t\t\t\tresult[key] = values.length > 1 ? values : values[0];\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}, {});\n\t}\n}\n\n/**\n * Re-shaping object for Web IDL tests\n * Only need to do it for overridden methods\n */\nObject.defineProperties(\n\tHeaders.prototype,\n\t['get', 'entries', 'forEach', 'values'].reduce((result, property) => {\n\t\tresult[property] = {enumerable: true};\n\t\treturn result;\n\t}, {})\n);\n\n/**\n * Create a Headers object from an http.IncomingMessage.rawHeaders, ignoring those that do\n * not conform to HTTP grammar productions.\n * @param {import('http').IncomingMessage['rawHeaders']} headers\n */\nexport function fromRawHeaders(headers = []) {\n\treturn new Headers(\n\t\theaders\n\t\t\t// Split into pairs\n\t\t\t.reduce((result, value, index, array) => {\n\t\t\t\tif (index % 2 === 0) {\n\t\t\t\t\tresult.push(array.slice(index, index + 2));\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t\t.filter(([name, value]) => {\n\t\t\t\ttry {\n\t\t\t\t\tvalidateHeaderName(name);\n\t\t\t\t\tvalidateHeaderValue(name, String(value));\n\t\t\t\t\treturn true;\n\t\t\t\t} catch {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t})\n\n\t);\n}\n", "const redirectStatus = new Set([301, 302, 303, 307, 308]);\n\n/**\n * Redirect code matching\n *\n * @param {number} code - Status code\n * @return {boolean}\n */\nexport const isRedirect = code => {\n\treturn redirectStatus.has(code);\n};\n", "/**\n * Response.js\n *\n * Response class provides content decoding\n */\n\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType} from './body.js';\nimport {isRedirect} from './utils/is-redirect.js';\n\nconst INTERNALS = Symbol('Response internals');\n\n/**\n * Response class\n *\n * Ref: https://fetch.spec.whatwg.org/#response-class\n *\n * @param   Stream  body  Readable stream\n * @param   Object  opts  Response options\n * @return  Void\n */\nexport default class Response extends Body {\n\tconstructor(body = null, options = {}) {\n\t\tsuper(body, options);\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq, no-negated-condition\n\t\tconst status = options.status != null ? options.status : 200;\n\n\t\tconst headers = new Headers(options.headers);\n\n\t\tif (body !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(body, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.append('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\ttype: 'default',\n\t\t\turl: options.url,\n\t\t\tstatus,\n\t\t\tstatusText: options.statusText || '',\n\t\t\theaders,\n\t\t\tcounter: options.counter,\n\t\t\thighWaterMark: options.highWaterMark\n\t\t};\n\t}\n\n\tget type() {\n\t\treturn this[INTERNALS].type;\n\t}\n\n\tget url() {\n\t\treturn this[INTERNALS].url || '';\n\t}\n\n\tget status() {\n\t\treturn this[INTERNALS].status;\n\t}\n\n\t/**\n\t * Convenience property representing if the request ended normally\n\t */\n\tget ok() {\n\t\treturn this[INTERNALS].status >= 200 && this[INTERNALS].status < 300;\n\t}\n\n\tget redirected() {\n\t\treturn this[INTERNALS].counter > 0;\n\t}\n\n\tget statusText() {\n\t\treturn this[INTERNALS].statusText;\n\t}\n\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget highWaterMark() {\n\t\treturn this[INTERNALS].highWaterMark;\n\t}\n\n\t/**\n\t * Clone this response\n\t *\n\t * @return  Response\n\t */\n\tclone() {\n\t\treturn new Response(clone(this, this.highWaterMark), {\n\t\t\ttype: this.type,\n\t\t\turl: this.url,\n\t\t\tstatus: this.status,\n\t\t\tstatusText: this.statusText,\n\t\t\theaders: this.headers,\n\t\t\tok: this.ok,\n\t\t\tredirected: this.redirected,\n\t\t\tsize: this.size,\n\t\t\thighWaterMark: this.highWaterMark\n\t\t});\n\t}\n\n\t/**\n\t * @param {string} url    The URL that the new response is to originate from.\n\t * @param {number} status An optional status code for the response (e.g., 302.)\n\t * @returns {Response}    A Response object.\n\t */\n\tstatic redirect(url, status = 302) {\n\t\tif (!isRedirect(status)) {\n\t\t\tthrow new RangeError('Failed to execute \"redirect\" on \"response\": Invalid status code');\n\t\t}\n\n\t\treturn new Response(null, {\n\t\t\theaders: {\n\t\t\t\tlocation: new URL(url).toString()\n\t\t\t},\n\t\t\tstatus\n\t\t});\n\t}\n\n\tstatic error() {\n\t\tconst response = new Response(null, {status: 0, statusText: ''});\n\t\tresponse[INTERNALS].type = 'error';\n\t\treturn response;\n\t}\n\n\tstatic json(data = undefined, init = {}) {\n\t\tconst body = JSON.stringify(data);\n\n\t\tif (body === undefined) {\n\t\t\tthrow new TypeError('data is not JSON serializable');\n\t\t}\n\n\t\tconst headers = new Headers(init && init.headers);\n\n\t\tif (!headers.has('content-type')) {\n\t\t\theaders.set('content-type', 'application/json');\n\t\t}\n\n\t\treturn new Response(body, {\n\t\t\t...init,\n\t\t\theaders\n\t\t});\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Response';\n\t}\n}\n\nObject.defineProperties(Response.prototype, {\n\ttype: {enumerable: true},\n\turl: {enumerable: true},\n\tstatus: {enumerable: true},\n\tok: {enumerable: true},\n\tredirected: {enumerable: true},\n\tstatusText: {enumerable: true},\n\theaders: {enumerable: true},\n\tclone: {enumerable: true}\n});\n", "/**\n * Request.js\n *\n * Request class contains server only options\n *\n * All spec algorithm step numbers are based on https://fetch.spec.whatwg.org/commit-snapshots/ae716822cb3a61843226cd090eefc6589446c1d2/.\n */\n\nimport {format as formatUrl} from 'node:url';\nimport {deprecate} from 'node:util';\nimport Headers from './headers.js';\nimport Body, {clone, extractContentType, getTotalBytes} from './body.js';\nimport {isAbortSignal} from './utils/is.js';\nimport {getSearch} from './utils/get-search.js';\nimport {\n\tvalidateReferrerPolicy, determineRequestsReferrer, DEFAULT_REFERRER_POLICY\n} from './utils/referrer.js';\n\nconst INTERNALS = Symbol('Request internals');\n\n/**\n * Check if `obj` is an instance of Request.\n *\n * @param  {*} object\n * @return {boolean}\n */\nconst isRequest = object => {\n\treturn (\n\t\ttypeof object === 'object' &&\n\t\ttypeof object[INTERNALS] === 'object'\n\t);\n};\n\nconst doBadDataWarn = deprecate(() => {},\n\t'.data is not a valid RequestInit property, use .body instead',\n\t'https://github.com/node-fetch/node-fetch/issues/1000 (request)');\n\n/**\n * Request class\n *\n * Ref: https://fetch.spec.whatwg.org/#request-class\n *\n * @param   Mixed   input  Url or Request instance\n * @param   Object  init   Custom options\n * @return  Void\n */\nexport default class Request extends Body {\n\tconstructor(input, init = {}) {\n\t\tlet parsedURL;\n\n\t\t// Normalize input and force URL to be encoded as UTF-8 (https://github.com/node-fetch/node-fetch/issues/245)\n\t\tif (isRequest(input)) {\n\t\t\tparsedURL = new URL(input.url);\n\t\t} else {\n\t\t\tparsedURL = new URL(input);\n\t\t\tinput = {};\n\t\t}\n\n\t\tif (parsedURL.username !== '' || parsedURL.password !== '') {\n\t\t\tthrow new TypeError(`${parsedURL} is an url with embedded credentials.`);\n\t\t}\n\n\t\tlet method = init.method || input.method || 'GET';\n\t\tif (/^(delete|get|head|options|post|put)$/i.test(method)) {\n\t\t\tmethod = method.toUpperCase();\n\t\t}\n\n\t\tif (!isRequest(init) && 'data' in init) {\n\t\t\tdoBadDataWarn();\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif ((init.body != null || (isRequest(input) && input.body !== null)) &&\n\t\t\t(method === 'GET' || method === 'HEAD')) {\n\t\t\tthrow new TypeError('Request with GET/HEAD method cannot have body');\n\t\t}\n\n\t\tconst inputBody = init.body ?\n\t\t\tinit.body :\n\t\t\t(isRequest(input) && input.body !== null ?\n\t\t\t\tclone(input) :\n\t\t\t\tnull);\n\n\t\tsuper(inputBody, {\n\t\t\tsize: init.size || input.size || 0\n\t\t});\n\n\t\tconst headers = new Headers(init.headers || input.headers || {});\n\n\t\tif (inputBody !== null && !headers.has('Content-Type')) {\n\t\t\tconst contentType = extractContentType(inputBody, this);\n\t\t\tif (contentType) {\n\t\t\t\theaders.set('Content-Type', contentType);\n\t\t\t}\n\t\t}\n\n\t\tlet signal = isRequest(input) ?\n\t\t\tinput.signal :\n\t\t\tnull;\n\t\tif ('signal' in init) {\n\t\t\tsignal = init.signal;\n\t\t}\n\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tif (signal != null && !isAbortSignal(signal)) {\n\t\t\tthrow new TypeError('Expected signal to be an instanceof AbortSignal or EventTarget');\n\t\t}\n\n\t\t// \u00A75.4, Request constructor steps, step 15.1\n\t\t// eslint-disable-next-line no-eq-null, eqeqeq\n\t\tlet referrer = init.referrer == null ? input.referrer : init.referrer;\n\t\tif (referrer === '') {\n\t\t\t// \u00A75.4, Request constructor steps, step 15.2\n\t\t\treferrer = 'no-referrer';\n\t\t} else if (referrer) {\n\t\t\t// \u00A75.4, Request constructor steps, step 15.3.1, 15.3.2\n\t\t\tconst parsedReferrer = new URL(referrer);\n\t\t\t// \u00A75.4, Request constructor steps, step 15.3.3, 15.3.4\n\t\t\treferrer = /^about:(\\/\\/)?client$/.test(parsedReferrer) ? 'client' : parsedReferrer;\n\t\t} else {\n\t\t\treferrer = undefined;\n\t\t}\n\n\t\tthis[INTERNALS] = {\n\t\t\tmethod,\n\t\t\tredirect: init.redirect || input.redirect || 'follow',\n\t\t\theaders,\n\t\t\tparsedURL,\n\t\t\tsignal,\n\t\t\treferrer\n\t\t};\n\n\t\t// Node-fetch-only options\n\t\tthis.follow = init.follow === undefined ? (input.follow === undefined ? 20 : input.follow) : init.follow;\n\t\tthis.compress = init.compress === undefined ? (input.compress === undefined ? true : input.compress) : init.compress;\n\t\tthis.counter = init.counter || input.counter || 0;\n\t\tthis.agent = init.agent || input.agent;\n\t\tthis.highWaterMark = init.highWaterMark || input.highWaterMark || 16384;\n\t\tthis.insecureHTTPParser = init.insecureHTTPParser || input.insecureHTTPParser || false;\n\n\t\t// \u00A75.4, Request constructor steps, step 16.\n\t\t// Default is empty string per https://fetch.spec.whatwg.org/#concept-request-referrer-policy\n\t\tthis.referrerPolicy = init.referrerPolicy || input.referrerPolicy || '';\n\t}\n\n\t/** @returns {string} */\n\tget method() {\n\t\treturn this[INTERNALS].method;\n\t}\n\n\t/** @returns {string} */\n\tget url() {\n\t\treturn formatUrl(this[INTERNALS].parsedURL);\n\t}\n\n\t/** @returns {Headers} */\n\tget headers() {\n\t\treturn this[INTERNALS].headers;\n\t}\n\n\tget redirect() {\n\t\treturn this[INTERNALS].redirect;\n\t}\n\n\t/** @returns {AbortSignal} */\n\tget signal() {\n\t\treturn this[INTERNALS].signal;\n\t}\n\n\t// https://fetch.spec.whatwg.org/#dom-request-referrer\n\tget referrer() {\n\t\tif (this[INTERNALS].referrer === 'no-referrer') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer === 'client') {\n\t\t\treturn 'about:client';\n\t\t}\n\n\t\tif (this[INTERNALS].referrer) {\n\t\t\treturn this[INTERNALS].referrer.toString();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tget referrerPolicy() {\n\t\treturn this[INTERNALS].referrerPolicy;\n\t}\n\n\tset referrerPolicy(referrerPolicy) {\n\t\tthis[INTERNALS].referrerPolicy = validateReferrerPolicy(referrerPolicy);\n\t}\n\n\t/**\n\t * Clone this request\n\t *\n\t * @return  Request\n\t */\n\tclone() {\n\t\treturn new Request(this);\n\t}\n\n\tget [Symbol.toStringTag]() {\n\t\treturn 'Request';\n\t}\n}\n\nObject.defineProperties(Request.prototype, {\n\tmethod: {enumerable: true},\n\turl: {enumerable: true},\n\theaders: {enumerable: true},\n\tredirect: {enumerable: true},\n\tclone: {enumerable: true},\n\tsignal: {enumerable: true},\n\treferrer: {enumerable: true},\n\treferrerPolicy: {enumerable: true}\n});\n\n/**\n * Convert a Request to Node.js http request options.\n *\n * @param {Request} request - A Request instance\n * @return The options object to be passed to http.request\n */\nexport const getNodeRequestOptions = request => {\n\tconst {parsedURL} = request[INTERNALS];\n\tconst headers = new Headers(request[INTERNALS].headers);\n\n\t// Fetch step 1.3\n\tif (!headers.has('Accept')) {\n\t\theaders.set('Accept', '*/*');\n\t}\n\n\t// HTTP-network-or-cache fetch steps 2.4-2.7\n\tlet contentLengthValue = null;\n\tif (request.body === null && /^(post|put)$/i.test(request.method)) {\n\t\tcontentLengthValue = '0';\n\t}\n\n\tif (request.body !== null) {\n\t\tconst totalBytes = getTotalBytes(request);\n\t\t// Set Content-Length if totalBytes is a number (that is not NaN)\n\t\tif (typeof totalBytes === 'number' && !Number.isNaN(totalBytes)) {\n\t\t\tcontentLengthValue = String(totalBytes);\n\t\t}\n\t}\n\n\tif (contentLengthValue) {\n\t\theaders.set('Content-Length', contentLengthValue);\n\t}\n\n\t// 4.1. Main fetch, step 2.6\n\t// > If request's referrer policy is the empty string, then set request's referrer policy to the\n\t// > default referrer policy.\n\tif (request.referrerPolicy === '') {\n\t\trequest.referrerPolicy = DEFAULT_REFERRER_POLICY;\n\t}\n\n\t// 4.1. Main fetch, step 2.7\n\t// > If request's referrer is not \"no-referrer\", set request's referrer to the result of invoking\n\t// > determine request's referrer.\n\tif (request.referrer && request.referrer !== 'no-referrer') {\n\t\trequest[INTERNALS].referrer = determineRequestsReferrer(request);\n\t} else {\n\t\trequest[INTERNALS].referrer = 'no-referrer';\n\t}\n\n\t// 4.5. HTTP-network-or-cache fetch, step 6.9\n\t// > If httpRequest's referrer is a URL, then append `Referer`/httpRequest's referrer, serialized\n\t// >  and isomorphic encoded, to httpRequest's header list.\n\tif (request[INTERNALS].referrer instanceof URL) {\n\t\theaders.set('Referer', request.referrer);\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.11\n\tif (!headers.has('User-Agent')) {\n\t\theaders.set('User-Agent', 'node-fetch');\n\t}\n\n\t// HTTP-network-or-cache fetch step 2.15\n\tif (request.compress && !headers.has('Accept-Encoding')) {\n\t\theaders.set('Accept-Encoding', 'gzip, deflate, br');\n\t}\n\n\tlet {agent} = request;\n\tif (typeof agent === 'function') {\n\t\tagent = agent(parsedURL);\n\t}\n\n\t// HTTP-network fetch step 4.2\n\t// chunked encoding is handled by Node.js\n\n\tconst search = getSearch(parsedURL);\n\n\t// Pass the full URL directly to request(), but overwrite the following\n\t// options:\n\tconst options = {\n\t\t// Overwrite search to retain trailing ? (issue #776)\n\t\tpath: parsedURL.pathname + search,\n\t\t// The following options are not expressed in the URL\n\t\tmethod: request.method,\n\t\theaders: headers[Symbol.for('nodejs.util.inspect.custom')](),\n\t\tinsecureHTTPParser: request.insecureHTTPParser,\n\t\tagent\n\t};\n\n\treturn {\n\t\t/** @type {URL} */\n\t\tparsedURL,\n\t\toptions\n\t};\n};\n", "export const getSearch = parsedURL => {\n\tif (parsedURL.search) {\n\t\treturn parsedURL.search;\n\t}\n\n\tconst lastOffset = parsedURL.href.length - 1;\n\tconst hash = parsedURL.hash || (parsedURL.href[lastOffset] === '#' ? '#' : '');\n\treturn parsedURL.href[lastOffset - hash.length] === '?' ? '?' : '';\n};\n", "import {isIP} from 'node:net';\n\n/**\n * @external URL\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/URL|URL}\n */\n\n/**\n * @module utils/referrer\n * @private\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#strip-url|Referrer Policy \u00A78.4. Strip url for use as a referrer}\n * @param {string} URL\n * @param {boolean} [originOnly=false]\n */\nexport function stripURLForUseAsAReferrer(url, originOnly = false) {\n\t// 1. If url is null, return no referrer.\n\tif (url == null) { // eslint-disable-line no-eq-null, eqeqeq\n\t\treturn 'no-referrer';\n\t}\n\n\turl = new URL(url);\n\n\t// 2. If url's scheme is a local scheme, then return no referrer.\n\tif (/^(about|blob|data):$/.test(url.protocol)) {\n\t\treturn 'no-referrer';\n\t}\n\n\t// 3. Set url's username to the empty string.\n\turl.username = '';\n\n\t// 4. Set url's password to null.\n\t// Note: `null` appears to be a mistake as this actually results in the password being `\"null\"`.\n\turl.password = '';\n\n\t// 5. Set url's fragment to null.\n\t// Note: `null` appears to be a mistake as this actually results in the fragment being `\"#null\"`.\n\turl.hash = '';\n\n\t// 6. If the origin-only flag is true, then:\n\tif (originOnly) {\n\t\t// 6.1. Set url's path to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the path being `\"/null\"`.\n\t\turl.pathname = '';\n\n\t\t// 6.2. Set url's query to null.\n\t\t// Note: `null` appears to be a mistake as this actually results in the query being `\"?null\"`.\n\t\turl.search = '';\n\t}\n\n\t// 7. Return url.\n\treturn url;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#enumdef-referrerpolicy|enum ReferrerPolicy}\n */\nexport const ReferrerPolicy = new Set([\n\t'',\n\t'no-referrer',\n\t'no-referrer-when-downgrade',\n\t'same-origin',\n\t'origin',\n\t'strict-origin',\n\t'origin-when-cross-origin',\n\t'strict-origin-when-cross-origin',\n\t'unsafe-url'\n]);\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#default-referrer-policy|default referrer policy}\n */\nexport const DEFAULT_REFERRER_POLICY = 'strict-origin-when-cross-origin';\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#referrer-policies|Referrer Policy \u00A73. Referrer Policies}\n * @param {string} referrerPolicy\n * @returns {string} referrerPolicy\n */\nexport function validateReferrerPolicy(referrerPolicy) {\n\tif (!ReferrerPolicy.has(referrerPolicy)) {\n\t\tthrow new TypeError(`Invalid referrerPolicy: ${referrerPolicy}`);\n\t}\n\n\treturn referrerPolicy;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-origin-trustworthy|Referrer Policy \u00A73.2. Is origin potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isOriginPotentiallyTrustworthy(url) {\n\t// 1. If origin is an opaque origin, return \"Not Trustworthy\".\n\t// Not applicable\n\n\t// 2. Assert: origin is a tuple origin.\n\t// Not for implementations\n\n\t// 3. If origin's scheme is either \"https\" or \"wss\", return \"Potentially Trustworthy\".\n\tif (/^(http|ws)s:$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 4. If origin's host component matches one of the CIDR notations 127.0.0.0/8 or ::1/128 [RFC4632], return \"Potentially Trustworthy\".\n\tconst hostIp = url.host.replace(/(^\\[)|(]$)/g, '');\n\tconst hostIPVersion = isIP(hostIp);\n\n\tif (hostIPVersion === 4 && /^127\\./.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\tif (hostIPVersion === 6 && /^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(hostIp)) {\n\t\treturn true;\n\t}\n\n\t// 5. If origin's host component is \"localhost\" or falls within \".localhost\", and the user agent conforms to the name resolution rules in [let-localhost-be-localhost], return \"Potentially Trustworthy\".\n\t// We are returning FALSE here because we cannot ensure conformance to\n\t// let-localhost-be-loalhost (https://tools.ietf.org/html/draft-west-let-localhost-be-localhost)\n\tif (url.host === 'localhost' || url.host.endsWith('.localhost')) {\n\t\treturn false;\n\t}\n\n\t// 6. If origin's scheme component is file, return \"Potentially Trustworthy\".\n\tif (url.protocol === 'file:') {\n\t\treturn true;\n\t}\n\n\t// 7. If origin's scheme component is one which the user agent considers to be authenticated, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 8. If origin has been configured as a trustworthy origin, return \"Potentially Trustworthy\".\n\t// Not supported\n\n\t// 9. Return \"Not Trustworthy\".\n\treturn false;\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-secure-contexts/#is-url-trustworthy|Referrer Policy \u00A73.3. Is url potentially trustworthy?}\n * @param {external:URL} url\n * @returns `true`: \"Potentially Trustworthy\", `false`: \"Not Trustworthy\"\n */\nexport function isUrlPotentiallyTrustworthy(url) {\n\t// 1. If url is \"about:blank\" or \"about:srcdoc\", return \"Potentially Trustworthy\".\n\tif (/^about:(blank|srcdoc)$/.test(url)) {\n\t\treturn true;\n\t}\n\n\t// 2. If url's scheme is \"data\", return \"Potentially Trustworthy\".\n\tif (url.protocol === 'data:') {\n\t\treturn true;\n\t}\n\n\t// Note: The origin of blob: and filesystem: URLs is the origin of the context in which they were\n\t// created. Therefore, blobs created in a trustworthy origin will themselves be potentially\n\t// trustworthy.\n\tif (/^(blob|filesystem):$/.test(url.protocol)) {\n\t\treturn true;\n\t}\n\n\t// 3. Return the result of executing \u00A73.2 Is origin potentially trustworthy? on url's origin.\n\treturn isOriginPotentiallyTrustworthy(url);\n}\n\n/**\n * Modifies the referrerURL to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy \u00A78.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerURLCallback\n * @param {external:URL} referrerURL\n * @returns {external:URL} modified referrerURL\n */\n\n/**\n * Modifies the referrerOrigin to enforce any extra security policy considerations.\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy \u00A78.3. Determine request's Referrer}, step 7\n * @callback module:utils/referrer~referrerOriginCallback\n * @param {external:URL} referrerOrigin\n * @returns {external:URL} modified referrerOrigin\n */\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#determine-requests-referrer|Referrer Policy \u00A78.3. Determine request's Referrer}\n * @param {Request} request\n * @param {object} o\n * @param {module:utils/referrer~referrerURLCallback} o.referrerURLCallback\n * @param {module:utils/referrer~referrerOriginCallback} o.referrerOriginCallback\n * @returns {external:URL} Request's referrer\n */\nexport function determineRequestsReferrer(request, {referrerURLCallback, referrerOriginCallback} = {}) {\n\t// There are 2 notes in the specification about invalid pre-conditions.  We return null, here, for\n\t// these cases:\n\t// > Note: If request's referrer is \"no-referrer\", Fetch will not call into this algorithm.\n\t// > Note: If request's referrer policy is the empty string, Fetch will not call into this\n\t// > algorithm.\n\tif (request.referrer === 'no-referrer' || request.referrerPolicy === '') {\n\t\treturn null;\n\t}\n\n\t// 1. Let policy be request's associated referrer policy.\n\tconst policy = request.referrerPolicy;\n\n\t// 2. Let environment be request's client.\n\t// not applicable to node.js\n\n\t// 3. Switch on request's referrer:\n\tif (request.referrer === 'about:client') {\n\t\treturn 'no-referrer';\n\t}\n\n\t// \"a URL\": Let referrerSource be request's referrer.\n\tconst referrerSource = request.referrer;\n\n\t// 4. Let request's referrerURL be the result of stripping referrerSource for use as a referrer.\n\tlet referrerURL = stripURLForUseAsAReferrer(referrerSource);\n\n\t// 5. Let referrerOrigin be the result of stripping referrerSource for use as a referrer, with the\n\t//    origin-only flag set to true.\n\tlet referrerOrigin = stripURLForUseAsAReferrer(referrerSource, true);\n\n\t// 6. If the result of serializing referrerURL is a string whose length is greater than 4096, set\n\t//    referrerURL to referrerOrigin.\n\tif (referrerURL.toString().length > 4096) {\n\t\treferrerURL = referrerOrigin;\n\t}\n\n\t// 7. The user agent MAY alter referrerURL or referrerOrigin at this point to enforce arbitrary\n\t//    policy considerations in the interests of minimizing data leakage. For example, the user\n\t//    agent could strip the URL down to an origin, modify its host, replace it with an empty\n\t//    string, etc.\n\tif (referrerURLCallback) {\n\t\treferrerURL = referrerURLCallback(referrerURL);\n\t}\n\n\tif (referrerOriginCallback) {\n\t\treferrerOrigin = referrerOriginCallback(referrerOrigin);\n\t}\n\n\t// 8.Execute the statements corresponding to the value of policy:\n\tconst currentURL = new URL(request.url);\n\n\tswitch (policy) {\n\t\tcase 'no-referrer':\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin':\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'unsafe-url':\n\t\t\treturn referrerURL;\n\n\t\tcase 'strict-origin':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerOrigin.\n\t\t\treturn referrerOrigin.toString();\n\n\t\tcase 'strict-origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 3. Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'same-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// 2. Return no referrer.\n\t\t\treturn 'no-referrer';\n\n\t\tcase 'origin-when-cross-origin':\n\t\t\t// 1. If the origin of referrerURL and the origin of request's current URL are the same, then\n\t\t\t//    return referrerURL.\n\t\t\tif (referrerURL.origin === currentURL.origin) {\n\t\t\t\treturn referrerURL;\n\t\t\t}\n\n\t\t\t// Return referrerOrigin.\n\t\t\treturn referrerOrigin;\n\n\t\tcase 'no-referrer-when-downgrade':\n\t\t\t// 1. If referrerURL is a potentially trustworthy URL and request's current URL is not a\n\t\t\t//    potentially trustworthy URL, then return no referrer.\n\t\t\tif (isUrlPotentiallyTrustworthy(referrerURL) && !isUrlPotentiallyTrustworthy(currentURL)) {\n\t\t\t\treturn 'no-referrer';\n\t\t\t}\n\n\t\t\t// 2. Return referrerURL.\n\t\t\treturn referrerURL;\n\n\t\tdefault:\n\t\t\tthrow new TypeError(`Invalid referrerPolicy: ${policy}`);\n\t}\n}\n\n/**\n * @see {@link https://w3c.github.io/webappsec-referrer-policy/#parse-referrer-policy-from-header|Referrer Policy \u00A78.1. Parse a referrer policy from a Referrer-Policy header}\n * @param {Headers} headers Response headers\n * @returns {string} policy\n */\nexport function parseReferrerPolicyFromHeader(headers) {\n\t// 1. Let policy-tokens be the result of extracting header list values given `Referrer-Policy`\n\t//    and response\u2019s header list.\n\tconst policyTokens = (headers.get('referrer-policy') || '').split(/[,\\s]+/);\n\n\t// 2. Let policy be the empty string.\n\tlet policy = '';\n\n\t// 3. For each token in policy-tokens, if token is a referrer policy and token is not the empty\n\t//    string, then set policy to token.\n\t// Note: This algorithm loops over multiple policy values to allow deployment of new policy\n\t// values with fallbacks for older user agents, as described in \u00A7 11.1 Unknown Policy Values.\n\tfor (const token of policyTokens) {\n\t\tif (token && ReferrerPolicy.has(token)) {\n\t\t\tpolicy = token;\n\t\t}\n\t}\n\n\t// 4. Return policy.\n\treturn policy;\n}\n", "import {FetchBaseError} from './base.js';\n\n/**\n * AbortError interface for cancelled requests\n */\nexport class AbortError extends FetchBaseError {\n\tconstructor(message, type = 'aborted') {\n\t\tsuper(message, type);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["require_is", "__commonJSMin", "exports", "boolean", "value", "string", "number", "error", "func", "array", "stringArray", "elem", "typedArray", "check", "thenable", "asPromise", "resolve", "reject", "resolved", "require_is", "__commonJSMin", "exports", "boolean", "value", "string", "number", "error", "func", "array", "stringArray", "elem", "require_messages", "__commonJSMin", "exports", "is", "ErrorCodes", "ResponseError", "_ResponseError", "code", "message", "data", "result", "ParameterStructures", "_ParameterStructures", "kind", "value", "AbstractMessageSignature", "method", "numberOfParams", "RequestType0", "RequestType", "_parameterStructures", "RequestType1", "RequestType2", "RequestType3", "RequestType4", "RequestType5", "RequestType6", "RequestType7", "RequestType8", "RequestType9", "NotificationType", "NotificationType0", "NotificationType1", "NotificationType2", "NotificationType3", "NotificationType4", "NotificationType5", "NotificationType6", "NotificationType7", "NotificationType8", "NotificationType9", "Message", "isRequest", "candidate", "isNotification", "isResponse", "require_linkedMap", "__commonJSMin", "exports", "_a", "Touch", "LinkedMap", "key", "touch", "item", "value", "callbackfn", "thisArg", "state", "current", "iterator", "result", "newSize", "currentSize", "next", "previous", "data", "LRUCache", "limit", "ratio", "require_disposable", "__commonJSMin", "exports", "Disposable", "create", "func", "require_ral", "__commonJSMin", "exports", "_ral", "RAL", "install", "ral", "require_events", "__commonJSMin", "exports", "ral_1", "Event", "_disposable", "CallbackList", "callback", "context", "bucket", "foundCallbackWithDifferentContext", "len", "args", "ret", "callbacks", "contexts", "i", "e", "Emitter", "_Emitter", "_options", "listener", "thisArgs", "disposables", "result", "event", "require_cancellation", "__commonJSMin", "exports", "ral_1", "Is", "events_1", "CancellationToken", "is", "value", "candidate", "shortcutEvent", "callback", "context", "handle", "MutableToken", "CancellationTokenSource", "require_sharedArrayCancellation", "__commonJSMin", "exports", "cancellation_1", "CancellationState", "SharedArraySenderStrategy", "request", "buffer", "data", "_conn", "id", "SharedArrayBufferCancellationToken", "SharedArrayBufferCancellationTokenSource", "SharedArrayReceiverStrategy", "require_semaphore", "__commonJSMin", "exports", "ral_1", "Semaphore", "capacity", "thunk", "resolve", "reject", "next", "result", "value", "err", "require_messageReader", "__commonJSMin", "exports", "ral_1", "Is", "events_1", "semaphore_1", "MessageReader", "is", "value", "candidate", "AbstractMessageReader", "error", "info", "ResolvedMessageReaderOptions", "fromOptions", "options", "charset", "result", "contentDecoder", "contentDecoders", "contentTypeDecoder", "contentTypeDecoders", "decoder", "ReadableStreamMessageReader", "readable", "timeout", "callback", "data", "headers", "contentLength", "length", "body", "bytes", "message", "token", "require_messageWriter", "__commonJSMin", "exports", "ral_1", "Is", "semaphore_1", "events_1", "ContentLength", "CRLF", "MessageWriter", "is", "value", "candidate", "AbstractMessageWriter", "error", "message", "count", "ResolvedMessageWriterOptions", "fromOptions", "options", "WriteableStreamMessageWriter", "writable", "msg", "buffer", "headers", "data", "require_messageBuffer", "__commonJSMin", "exports", "CR", "LF", "CRLF", "AbstractMessageBuffer", "encoding", "chunk", "toAppend", "lowerCaseKeys", "state", "chunkIndex", "offset", "chunkBytesRead", "row", "buffer", "result", "headers", "i", "header", "index", "key", "value", "length", "byteCount", "resultOffset", "chunkPart", "require_connection", "__commonJSMin", "exports", "ral_1", "Is", "messages_1", "linkedMap_1", "events_1", "cancellation_1", "CancelNotification", "ProgressToken", "is", "value", "ProgressNotification", "ProgressType", "StarRequestHandler", "Trace", "TraceValues", "fromString", "toString", "TraceFormat", "SetTraceNotification", "LogTraceNotification", "ConnectionErrors", "ConnectionError", "_ConnectionError", "code", "message", "ConnectionStrategy", "candidate", "IdCancellationReceiverStrategy", "RequestCancellationReceiverStrategy", "CancellationReceiverStrategy", "_", "CancellationSenderStrategy", "conn", "id", "CancellationStrategy", "MessageStrategy", "ConnectionOptions", "ConnectionState", "createMessageConnection", "messageReader", "messageWriter", "_logger", "options", "logger", "sequenceNumber", "notificationSequenceNumber", "unknownResponseSequenceNumber", "version", "starRequestHandler", "requestHandlers", "starNotificationHandler", "notificationHandlers", "progressHandlers", "timer", "messageQueue", "responsePromises", "knownCanceledRequests", "requestTokens", "trace", "traceFormat", "tracer", "state", "errorEmitter", "closeEmitter", "unhandledNotificationEmitter", "unhandledProgressEmitter", "disposeEmitter", "cancellationStrategy", "createRequestQueueKey", "createResponseQueueKey", "createNotificationQueueKey", "addMessageToQueue", "queue", "cancelUndispatched", "_message", "isListening", "isClosed", "isDisposed", "closeHandler", "readErrorHandler", "error", "writeErrorHandler", "data", "triggerMessageQueue", "processMessageQueue", "handleMessage", "handleRequest", "handleNotification", "handleResponse", "handleInvalidMessage", "messageStrategy", "callback", "cancelId", "key", "toCancel", "strategy", "response", "traceSendingResponse", "cancellationToken", "traceReceivedNotification", "requestMessage", "reply", "resultOrError", "method", "startTime", "replyError", "replySuccess", "result", "traceReceivedRequest", "element", "type", "requestHandler", "tokenKey", "cancellationSource", "handlerResult", "promise", "responseMessage", "responsePromise", "traceReceivedResponse", "notificationHandler", "params", "responseHandler", "stringifyTrace", "traceSendingRequest", "logLSPMessage", "traceSendingNotification", "lspMessage", "throwIfClosedOrDisposed", "throwIfListening", "throwIfNotListening", "undefinedToNull", "param", "nullToUndefined", "isNamedParam", "computeSingleParam", "parameterStructures", "computeMessageParams", "numberOfParams", "i", "connection", "args", "messageParams", "first", "paramStart", "paramEnd", "notificationMessage", "handler", "_type", "token", "last", "disposable", "p", "resolve", "reject", "resolveWithCleanup", "r", "rejectWithCleanup", "_value", "_tracer", "sendNotificationOrTraceOptions", "_sendNotification", "_traceFormat", "verbose", "require_api", "__commonJSMin", "exports", "messages_1", "linkedMap_1", "disposable_1", "events_1", "cancellation_1", "sharedArrayCancellation_1", "messageReader_1", "messageWriter_1", "messageBuffer_1", "connection_1", "ral_1", "require_ril", "__commonJSMin", "exports", "util_1", "api_1", "MessageBuffer", "_MessageBuffer", "encoding", "value", "buffer", "length", "ReadableStreamWrapper", "stream", "listener", "WritableStreamWrapper", "data", "resolve", "reject", "callback", "error", "_ril", "msg", "options", "err", "ms", "args", "handle", "RIL", "install", "require_main", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "ril_1", "path", "os", "crypto_1", "net_1", "api_1", "IPCMessageReader", "process", "eventEmitter", "error", "callback", "IPCMessageWriter", "msg", "PortMessageReader", "port", "message", "PortMessageWriter", "SocketMessageReader", "socket", "encoding", "SocketMessageWriter", "options", "StreamMessageReader", "readable", "StreamMessageWriter", "writable", "XDG_RUNTIME_DIR", "safeIpcPathLengths", "generateRandomPipeName", "randomSuffix", "result", "limit", "createClientPipeTransport", "pipeName", "connectResolve", "connected", "resolve", "_reject", "reject", "server", "createServerPipeTransport", "createClientSocketTransport", "createServerSocketTransport", "isReadableStream", "value", "candidate", "isWritableStream", "createMessageConnection", "input", "output", "logger", "reader", "writer", "require_node", "__commonJSMin", "exports", "module", "require_main", "__commonJSMin", "exports", "module", "factory", "v", "require", "DocumentUri", "is", "value", "URI", "integer", "uinteger", "Position", "create", "line", "character", "candidate", "Is", "Range", "one", "two", "three", "four", "Location", "uri", "range", "LocationLink", "targetUri", "targetRange", "targetSelectionRange", "originSelectionRange", "Color", "red", "green", "blue", "alpha", "ColorInformation", "color", "ColorPresentation", "label", "textEdit", "additionalTextEdits", "TextEdit", "FoldingRangeKind", "FoldingRange", "startLine", "endLine", "startCharacter", "endCharacter", "kind", "collapsedText", "result", "DiagnosticRelatedInformation", "location", "message", "DiagnosticSeverity", "DiagnosticTag", "CodeDescription", "Diagnostic", "severity", "code", "source", "relatedInformation", "_a", "Command", "title", "command", "args", "_i", "replace", "newText", "insert", "position", "del", "ChangeAnnotation", "needsConfirmation", "description", "ChangeAnnotationIdentifier", "AnnotatedTextEdit", "annotation", "TextDocumentEdit", "textDocument", "edits", "OptionalVersionedTextDocumentIdentifier", "CreateFile", "options", "RenameFile", "oldUri", "newUri", "DeleteFile", "WorkspaceEdit", "change", "TextEditChangeImpl", "changeAnnotations", "edit", "id", "ChangeAnnotations", "annotations", "idOrAnnotation", "WorkspaceChange", "workspaceEdit", "_this", "textEditChange", "key", "textDocumentEdit", "optionsOrAnnotation", "operation", "TextDocumentIdentifier", "VersionedTextDocumentIdentifier", "version", "TextDocumentItem", "languageId", "text", "MarkupKind", "MarkupContent", "CompletionItemKind", "InsertTextFormat", "CompletionItemTag", "InsertReplaceEdit", "InsertTextMode", "CompletionItemLabelDetails", "CompletionItem", "CompletionList", "items", "isIncomplete", "MarkedString", "fromPlainText", "plainText", "Hover", "ParameterInformation", "documentation", "SignatureInformation", "parameters", "DocumentHighlightKind", "DocumentHighlight", "SymbolKind", "SymbolTag", "SymbolInformation", "name", "containerName", "WorkspaceSymbol", "DocumentSymbol", "detail", "selectionRange", "children", "CodeActionKind", "CodeActionTriggerKind", "CodeActionContext", "diagnostics", "only", "triggerKind", "CodeAction", "kindOrCommandOrEdit", "checkKind", "CodeLens", "data", "FormattingOptions", "tabSize", "insertSpaces", "DocumentLink", "target", "SelectionRange", "parent", "SemanticTokenTypes", "SemanticTokenModifiers", "SemanticTokens", "InlineValueText", "InlineValueVariableLookup", "variableName", "caseSensitiveLookup", "InlineValueEvaluatableExpression", "expression", "InlineValueContext", "frameId", "stoppedLocation", "InlayHintKind", "InlayHintLabelPart", "InlayHint", "StringValue", "createSnippet", "InlineCompletionItem", "insertText", "filterText", "InlineCompletionList", "InlineCompletionTriggerKind", "SelectedCompletionInfo", "InlineCompletionContext", "selectedCompletionInfo", "WorkspaceFolder", "TextDocument", "content", "FullTextDocument", "applyEdits", "document", "sortedEdits", "mergeSort", "a", "b", "diff", "lastModifiedOffset", "i", "e", "startOffset", "endOffset", "compare", "p", "left", "right", "leftIdx", "rightIdx", "ret", "start", "end", "event", "lineOffsets", "isLineStart", "ch", "offset", "low", "high", "mid", "lineOffset", "nextLineOffset", "toString", "defined", "undefined", "boolean", "string", "number", "numberRange", "min", "max", "func", "objectLiteral", "typedArray", "check", "require_messages", "__commonJSMin", "exports", "vscode_jsonrpc_1", "MessageDirection", "RegistrationType", "method", "ProtocolRequestType0", "ProtocolRequestType", "ProtocolNotificationType0", "ProtocolNotificationType", "require_is", "__commonJSMin", "exports", "boolean", "value", "string", "number", "error", "func", "array", "stringArray", "elem", "typedArray", "check", "objectLiteral", "require_protocol_implementation", "__commonJSMin", "exports", "messages_1", "ImplementationRequest", "require_protocol_typeDefinition", "__commonJSMin", "exports", "messages_1", "TypeDefinitionRequest", "require_protocol_workspaceFolder", "__commonJSMin", "exports", "messages_1", "WorkspaceFoldersRequest", "DidChangeWorkspaceFoldersNotification", "require_protocol_configuration", "__commonJSMin", "exports", "messages_1", "ConfigurationRequest", "require_protocol_colorProvider", "__commonJSMin", "exports", "messages_1", "DocumentColorRequest", "ColorPresentationRequest", "require_protocol_foldingRange", "__commonJSMin", "exports", "messages_1", "FoldingRangeRequest", "FoldingRangeRefreshRequest", "require_protocol_declaration", "__commonJSMin", "exports", "messages_1", "DeclarationRequest", "require_protocol_selectionRange", "__commonJSMin", "exports", "messages_1", "SelectionRangeRequest", "require_protocol_progress", "__commonJSMin", "exports", "vscode_jsonrpc_1", "messages_1", "WorkDoneProgress", "is", "value", "WorkDoneProgressCreateRequest", "WorkDoneProgressCancelNotification", "require_protocol_callHierarchy", "__commonJSMin", "exports", "messages_1", "CallHierarchyPrepareRequest", "CallHierarchyIncomingCallsRequest", "CallHierarchyOutgoingCallsRequest", "require_protocol_semanticTokens", "__commonJSMin", "exports", "messages_1", "TokenFormat", "SemanticTokensRegistrationType", "SemanticTokensRequest", "SemanticTokensDeltaRequest", "SemanticTokensRangeRequest", "SemanticTokensRefreshRequest", "require_protocol_showDocument", "__commonJSMin", "exports", "messages_1", "ShowDocumentRequest", "require_protocol_linkedEditingRange", "__commonJSMin", "exports", "messages_1", "LinkedEditingRangeRequest", "require_protocol_fileOperations", "__commonJSMin", "exports", "messages_1", "FileOperationPatternKind", "WillCreateFilesRequest", "DidCreateFilesNotification", "WillRenameFilesRequest", "DidRenameFilesNotification", "DidDeleteFilesNotification", "WillDeleteFilesRequest", "require_protocol_moniker", "__commonJSMin", "exports", "messages_1", "UniquenessLevel", "MonikerKind", "MonikerRequest", "require_protocol_typeHierarchy", "__commonJSMin", "exports", "messages_1", "TypeHierarchyPrepareRequest", "TypeHierarchySupertypesRequest", "TypeHierarchySubtypesRequest", "require_protocol_inlineValue", "__commonJSMin", "exports", "messages_1", "InlineValueRequest", "InlineValueRefreshRequest", "require_protocol_inlayHint", "__commonJSMin", "exports", "messages_1", "InlayHintRequest", "InlayHintResolveRequest", "InlayHintRefreshRequest", "require_protocol_diagnostic", "__commonJSMin", "exports", "vscode_jsonrpc_1", "Is", "messages_1", "DiagnosticServerCancellationData", "is", "value", "candidate", "DocumentDiagnosticReportKind", "DocumentDiagnosticRequest", "WorkspaceDiagnosticRequest", "DiagnosticRefreshRequest", "require_protocol_notebook", "__commonJSMin", "exports", "vscode_languageserver_types_1", "Is", "messages_1", "NotebookCellKind", "is", "value", "ExecutionSummary", "create", "executionOrder", "success", "result", "candidate", "equals", "one", "other", "NotebookCell", "kind", "document", "diff", "two", "equalsMetadata", "oneArray", "otherArray", "i", "oneKeys", "otherKeys", "prop", "NotebookDocument", "uri", "notebookType", "version", "cells", "NotebookDocumentSyncRegistrationType", "DidOpenNotebookDocumentNotification", "NotebookCellArrayChange", "start", "deleteCount", "DidChangeNotebookDocumentNotification", "DidSaveNotebookDocumentNotification", "DidCloseNotebookDocumentNotification", "require_protocol_inlineCompletion", "__commonJSMin", "exports", "messages_1", "InlineCompletionRequest", "require_protocol", "__commonJSMin", "exports", "messages_1", "vscode_languageserver_types_1", "Is", "protocol_implementation_1", "protocol_typeDefinition_1", "protocol_workspaceFolder_1", "protocol_configuration_1", "protocol_colorProvider_1", "protocol_foldingRange_1", "protocol_declaration_1", "protocol_selectionRange_1", "protocol_progress_1", "protocol_callHierarchy_1", "protocol_semanticTokens_1", "protocol_showDocument_1", "protocol_linkedEditingRange_1", "protocol_fileOperations_1", "protocol_moniker_1", "protocol_typeHierarchy_1", "protocol_inlineValue_1", "protocol_inlayHint_1", "protocol_diagnostic_1", "protocol_notebook_1", "protocol_inlineCompletion_1", "TextDocumentFilter", "is", "value", "candidate", "NotebookDocumentFilter", "NotebookCellTextDocumentFilter", "DocumentSelector", "elem", "RegistrationRequest", "UnregistrationRequest", "ResourceOperationKind", "FailureHandlingKind", "PositionEncodingKind", "StaticRegistrationOptions", "hasId", "TextDocumentRegistrationOptions", "WorkDoneProgressOptions", "hasWorkDoneProgress", "InitializeRequest", "InitializeErrorCodes", "InitializedNotification", "ShutdownRequest", "ExitNotification", "DidChangeConfigurationNotification", "MessageType", "ShowMessageNotification", "ShowMessageRequest", "LogMessageNotification", "TelemetryEventNotification", "TextDocumentSyncKind", "DidOpenTextDocumentNotification", "TextDocumentContentChangeEvent", "isIncremental", "event", "isFull", "DidChangeTextDocumentNotification", "DidCloseTextDocumentNotification", "DidSaveTextDocumentNotification", "TextDocumentSaveReason", "WillSaveTextDocumentNotification", "WillSaveTextDocumentWaitUntilRequest", "DidChangeWatchedFilesNotification", "FileChangeType", "RelativePattern", "WatchKind", "PublishDiagnosticsNotification", "CompletionTriggerKind", "CompletionRequest", "CompletionResolveRequest", "HoverRequest", "SignatureHelpTriggerKind", "SignatureHelpRequest", "DefinitionRequest", "ReferencesRequest", "DocumentHighlightRequest", "DocumentSymbolRequest", "CodeActionRequest", "CodeActionResolveRequest", "WorkspaceSymbolRequest", "WorkspaceSymbolResolveRequest", "CodeLensRequest", "CodeLensResolveRequest", "CodeLensRefreshRequest", "DocumentLinkRequest", "DocumentLinkResolveRequest", "DocumentFormattingRequest", "DocumentRangeFormattingRequest", "DocumentRangesFormattingRequest", "DocumentOnTypeFormattingRequest", "PrepareSupportDefaultBehavior", "RenameRequest", "PrepareRenameRequest", "ExecuteCommandRequest", "ApplyWorkspaceEditRequest", "require_connection", "__commonJSMin", "exports", "vscode_jsonrpc_1", "createProtocolConnection", "input", "output", "logger", "options", "require_api", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "connection_1", "LSPErrorCodes", "require_main", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "node_1", "createProtocolConnection", "input", "output", "logger", "options", "require_async", "__commonJSMin", "exports", "vscode_languageserver_protocol_1", "Delayer", "defaultDelay", "task", "delay", "resolve", "result", "Semaphore", "capacity", "thunk", "reject", "next", "value", "err", "$test", "setTestMode", "clearTestMode", "defaultYieldTimeout", "Timer", "yieldAfter", "timeTaken", "timeLeft", "map", "items", "func", "token", "options", "timer", "convertBatch", "start", "i", "index", "mapAsync", "forEach", "runBatch", "require_protocolCompletionItem", "__commonJSMin", "exports", "code", "ProtocolCompletionItem", "label", "require_protocolCodeLens", "__commonJSMin", "exports", "code", "ProtocolCodeLens", "range", "require_protocolDocumentLink", "__commonJSMin", "exports", "code", "ProtocolDocumentLink", "range", "target", "require_protocolCodeAction", "__commonJSMin", "exports", "vscode", "ProtocolCodeAction", "title", "data", "require_protocolDiagnostic", "__commonJSMin", "exports", "vscode", "Is", "DiagnosticCode", "is", "value", "candidate", "ProtocolDiagnostic", "range", "message", "severity", "data", "require_protocolCallHierarchyItem", "__commonJSMin", "exports", "code", "ProtocolCallHierarchyItem", "kind", "name", "detail", "uri", "range", "selectionRange", "data", "require_protocolTypeHierarchyItem", "__commonJSMin", "exports", "code", "ProtocolTypeHierarchyItem", "kind", "name", "detail", "uri", "range", "selectionRange", "data", "require_protocolWorkspaceSymbol", "__commonJSMin", "exports", "code", "WorkspaceSymbol", "name", "kind", "containerName", "locationOrUri", "data", "hasRange", "require_protocolInlayHint", "__commonJSMin", "exports", "code", "ProtocolInlayHint", "position", "label", "kind", "require_codeConverter", "__commonJSMin", "exports", "code", "proto", "Is", "async", "protocolCompletionItem_1", "protocolCodeLens_1", "protocolDocumentLink_1", "protocolCodeAction_1", "protocolDiagnostic_1", "protocolCallHierarchyItem_1", "protocolTypeHierarchyItem_1", "protocolWorkspaceSymbol_1", "protocolInlayHint_1", "InsertReplaceRange", "is", "value", "candidate", "createConverter", "uriConverter", "_uriConverter", "asUri", "asTextDocumentIdentifier", "textDocument", "asTextDocumentItem", "asVersionedTextDocumentIdentifier", "asOpenTextDocumentParams", "isTextDocumentChangeEvent", "isTextDocument", "asChangeTextDocumentParams", "arg0", "arg1", "arg2", "uri", "version", "change", "range", "asCloseTextDocumentParams", "asSaveTextDocumentParams", "includeContent", "result", "asTextDocumentSaveReason", "reason", "asWillSaveTextDocumentParams", "event", "asDidCreateFilesParams", "fileUri", "asDidRenameFilesParams", "file", "asDidDeleteFilesParams", "asWillCreateFilesParams", "asWillRenameFilesParams", "asWillDeleteFilesParams", "asTextDocumentPositionParams", "position", "asWorkerPosition", "asCompletionTriggerKind", "triggerKind", "asCompletionParams", "context", "asSignatureHelpTriggerKind", "asParameterInformation", "asParameterInformations", "values", "asSignatureInformation", "asSignatureInformations", "asSignatureHelp", "asSignatureHelpParams", "asPosition", "asPositions", "token", "asPositionsSync", "asRange", "asRanges", "asLocation", "asDiagnosticSeverity", "asDiagnosticTags", "tags", "tag", "converted", "asDiagnosticTag", "asRelatedInformation", "item", "asRelatedInformations", "items", "asDiagnosticCode", "asDiagnostic", "protocolDiagnostic", "asDiagnostics", "asDiagnosticsSync", "asDocumentation", "format", "documentation", "asCompletionItemTag", "asCompletionItemTags", "asCompletionItemKind", "original", "asCompletionItem", "labelDetailsSupport", "label", "labelDetails", "protocolItem", "fillPrimaryInsertText", "asTextEdits", "asCommand", "index", "target", "source", "text", "asCompletionTextEdit", "newText", "asTextEdit", "edit", "edits", "asSymbolKind", "asSymbolTag", "asSymbolTags", "asReferenceParams", "options", "asCodeAction", "asCodeActionKind", "asCodeActionSync", "asCodeActionContext", "only", "asCodeActionTriggerKind", "asCodeActionContextSync", "kind", "asInlineValueContext", "asInlineCompletionParams", "document", "asCodeLens", "asFormattingOptions", "fileOptions", "asDocumentSymbolParams", "asCodeLensParams", "asDocumentLink", "asDocumentLinkParams", "asCallHierarchyItem", "asTypeHierarchyItem", "asWorkspaceSymbol", "asInlayHint", "asInlayHintLabelPart", "asTooltip", "require_protocolConverter", "__commonJSMin", "exports", "code", "ls", "Is", "async", "protocolCompletionItem_1", "protocolCodeLens_1", "protocolDocumentLink_1", "protocolCodeAction_1", "protocolDiagnostic_1", "protocolCallHierarchyItem_1", "protocolTypeHierarchyItem_1", "protocolWorkspaceSymbol_1", "protocolInlayHint_1", "vscode_languageserver_protocol_1", "CodeBlock", "is", "value", "candidate", "createConverter", "uriConverter", "trustMarkdown", "supportHtml", "_uriConverter", "asUri", "asDocumentSelector", "selector", "result", "filter", "notebookType", "asDiagnostics", "diagnostics", "token", "asDiagnostic", "asDiagnosticsSync", "i", "diagnostic", "asRange", "asDiagnosticSeverity", "diagnosticCode", "asRelatedInformation", "asDiagnosticTags", "relatedInformation", "info", "asLocation", "tags", "tag", "converted", "asDiagnosticTag", "asPosition", "asRanges", "items", "range", "asHoverContent", "asMarkdownString", "element", "item", "asDocumentation", "asHover", "hover", "asCompletionResult", "allCommitCharacters", "asCompletionItem", "list", "defaultRange", "commitCharacters", "getCompletionItemDefaults", "rangeDefaults", "asCompletionItemKind", "asCompletionItemTag", "asCompletionItemTags", "defaultCommitCharacters", "defaultInsertTextMode", "defaultInsertTextFormat", "defaultData", "label", "asCompletionItemLabel", "insertText", "asCompletionInsertText", "itemKind", "original", "asTextEditsSync", "asCommand", "data", "insertTextMode", "insertTextFormat", "newText", "getCompletionRangeAndText", "asTextEdit", "edit", "asTextEdits", "asSignatureHelp", "asSignatureInformations", "asSignatureInformation", "asParameterInformations", "asParameterInformation", "asDeclarationResult", "asLocationResult", "asDefinitionResult", "asLocationLink", "links", "locations", "asReferences", "values", "asDocumentHighlights", "asDocumentHighlight", "asDocumentHighlightKind", "asSymbolInformations", "asSymbolInformation", "asSymbolKind", "asSymbolTag", "asSymbolTags", "location", "fillTags", "asDocumentSymbols", "asDocumentSymbol", "children", "child", "asCommands", "kindMapping", "asCodeActionKind", "parts", "part", "asCodeActionKinds", "kind", "asCodeAction", "asWorkspaceEdit", "asCodeActionResult", "asCodeLens", "asCodeLenses", "sharedMetadata", "changeAnnotations", "key", "metaData", "asWorkspaceEditEntryMetadata", "asMetadata", "annotation", "documentChanges", "change", "uri", "changes", "asDocumentLink", "target", "link", "asDocumentLinks", "asColor", "color", "asColorInformation", "ci", "asColorInformations", "colorInformation", "asColorPresentation", "cp", "presentation", "asColorPresentations", "colorPresentations", "asFoldingRangeKind", "asFoldingRange", "r", "asFoldingRanges", "foldingRanges", "asSelectionRange", "selectionRange", "asSelectionRanges", "selectionRanges", "asInlineValue", "inlineValue", "asInlineValues", "inlineValues", "asInlayHint", "asInlayHintLabelPart", "asTooltip", "asInlayHints", "asCallHierarchyItem", "asCallHierarchyItems", "asCallHierarchyIncomingCall", "asCallHierarchyIncomingCalls", "asCallHierarchyOutgoingCall", "asCallHierarchyOutgoingCalls", "asSemanticTokens", "_token", "asSemanticTokensEdit", "asSemanticTokensEdits", "asSemanticTokensLegend", "asLinkedEditingRanges", "asRegularExpression", "asTypeHierarchyItem", "asTypeHierarchyItems", "asGlobPattern", "pattern", "workspaceFolder", "asInlineCompletionResult", "asInlineCompletionItem", "command", "inlineCompletionItem", "require_uuid", "__commonJSMin", "exports", "ValueUUID", "_value", "other", "V4UUID", "_V4UUID", "array", "v4", "_UUIDPattern", "isUUID", "value", "parse", "generateUuid", "require_progressPart", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "Is", "ProgressPart", "_client", "_token", "done", "value", "params", "progress", "cancellationToken", "resolve", "reject", "percentage", "delta", "require_features", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "Is", "UUID", "LSPCancellationError", "data", "ensure", "target", "key", "StaticFeature", "is", "value", "candidate", "DynamicFeature", "DynamicDocumentFeature", "client", "selectors", "count", "selector", "document", "registrations", "TextDocumentEventFeature", "textDocument", "event", "type", "middleware", "createParams", "selectorFilter", "error", "doSend", "params", "id", "TextDocumentLanguageFeature", "registrationType", "registration", "documentSelector", "capability", "options", "result", "item", "WorkspaceFeature", "require_path", "__commonJSMin", "exports", "module", "isWindows", "require_balanced_match", "__commonJSMin", "exports", "module", "balanced", "a", "b", "str", "maybeMatch", "r", "range", "reg", "m", "begs", "beg", "left", "right", "result", "ai", "bi", "i", "require_brace_expansion", "__commonJSMin", "exports", "module", "balanced", "expandTop", "escSlash", "escOpen", "escClose", "escComma", "escPeriod", "numeric", "str", "escapeBraces", "unescapeBraces", "parseCommaParts", "parts", "m", "pre", "body", "post", "p", "postParts", "expand", "embrace", "isPadded", "el", "lte", "i", "y", "gte", "isTop", "expansions", "k", "expansion", "isNumericSequence", "isAlphaSequence", "isSequence", "isOptions", "n", "N", "x", "width", "incr", "test", "reverse", "pad", "c", "need", "z", "j", "require_minimatch", "__commonJSMin", "exports", "module", "minimatch", "p", "pattern", "options", "assertValidPattern", "Minimatch", "path", "GLOBSTAR", "expand", "plTypes", "qmark", "star", "twoStarDot", "twoStarNoDot", "charSet", "s", "set", "c", "reSpecials", "addPatternStartSet", "slashSplit", "i", "list", "ext", "a", "b", "t", "k", "def", "orig", "m", "braceExpand", "MAX_PATTERN_LENGTH", "SUBPARSE", "mm", "f", "globUnescape", "charUnescape", "regExpEscape", "braExpEscape", "args", "si", "negate", "negateOffset", "file", "partial", "fi", "pi", "fl", "pl", "fr", "pr", "swallowee", "hit", "isSub", "re", "hasMagic", "escaping", "patternListStack", "negativeLists", "stateChar", "inClass", "reClassStart", "classStart", "cs", "sp", "dotTravAllowed", "dotFileAllowed", "patternStart", "subPatternStart", "clearStateChar", "plEntry", "tail", "_", "$1", "$2", "addPatternStart", "n", "nl", "nlBefore", "nlFirst", "nlAfter", "nlLast", "closeParensBefore", "openParensBefore", "cleanAfter", "dollar", "flags", "twoStar", "filename", "require_diagnostic", "__commonJSMin", "exports", "minimatch", "vscode_1", "vscode_languageserver_protocol_1", "uuid_1", "features_1", "ensure", "target", "key", "vsdiag", "DocumentDiagnosticReportKind", "DiagnosticPullMode", "RequestStateKind", "Tabs", "_Tabs", "openTabsHandler", "event", "oldTabs", "currentTabs", "closed", "opened", "tab", "toFire", "item", "document", "uri", "result", "strings", "uris", "seen", "group", "input", "PullState", "DocumentOrUri", "asKey", "DocumentPullStateTracker", "kind", "arg1", "states", "version", "state", "arg2", "resultId", "value", "DiagnosticRequestor", "client", "tabs", "options", "cb", "error", "isUri", "currentRequestState", "documentState", "tokenSource", "report", "afterState", "request", "previousResultIds", "chunk", "previousResultId", "token", "provideDiagnostics", "params", "middleware", "resultIds", "resultReporter", "convertReport", "convertPreviousResultIds", "converted", "partialResultToken", "disposable", "partialResult", "BackgroundScheduler", "diagnosticRequestor", "DiagnosticFeatureProviderImpl", "diagnosticPullOptions", "documentSelector", "disposables", "matchResource", "resource", "selector", "filter", "matcher", "matches", "isActiveDocument", "addToBackgroundIfNeeded", "editor", "oldActive", "openFeature", "textDocument", "uriStr", "pulledTextDocuments", "changeFeature", "saveFeature", "closeFeature", "DiagnosticFeature", "capabilities", "capability", "provider", "id", "require_notebook", "__commonJSMin", "exports", "vscode", "minimatch", "proto", "UUID", "Is", "ensure", "target", "key", "Converter", "c2p", "asVersionedNotebookDocumentIdentifier", "notebookDocument", "base", "asNotebookDocument", "cells", "result", "asNotebookCells", "asMetadata", "cell", "asNotebookCell", "metadata", "deepCopy", "asNotebookCellKind", "kind", "seen", "value", "elem", "props", "prop", "asTextContentChange", "event", "params", "asNotebookDocumentChangeEvent", "changedCells", "$NotebookCell", "computeDiff", "originalCells", "modifiedCells", "compareMetadata", "originalLength", "modifiedLength", "startIndex", "equals", "originalEndIndex", "modifiedEndIndex", "deleteCount", "newCells", "one", "other", "compareMetaData", "equalsExecution", "equalsMetadata", "equalsTiming", "oneArray", "otherArray", "i", "isObjectLiteral", "oneKeys", "otherKeys", "$NotebookDocumentFilter", "matchNotebook", "filter", "uri", "matcher", "$NotebookDocumentSyncOptions", "asDocumentSelector", "options", "selector", "element", "notebookType", "scheme", "pattern", "asDocumentFilter", "language", "SyncInfo", "create", "NotebookDocumentSyncFeatureProvider", "client", "notebook", "textDocument", "syncInfo", "cellMatches", "cellIsSynced", "matchingCells", "cellUri", "index", "item", "deleted", "disposable", "newEvent", "syncedCells", "send", "nb", "cellDocuments", "error", "middleware", "matchingCellsSet", "data", "cellChange", "oldCells", "diff", "addedCells", "removedCells", "didOpen", "didClose", "filtered", "cellSelector", "cellLanguage", "NotebookDocumentSyncFeature", "_NotebookDocumentSyncFeature", "notebookCell", "provider", "state", "capabilities", "synchronization", "id", "require_configuration", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "Is", "UUID", "features_1", "ConfigurationFeature", "client", "capabilities", "params", "token", "configuration", "result", "item", "resource", "middleware", "section", "index", "toJSONObject", "config", "key", "obj", "res", "SyncConfigurationFeature", "_client", "data", "disposable", "event", "id", "configurationSection", "sections", "didChangeConfiguration", "error", "keys", "ensurePath", "path", "current", "i", "require_textSynchronization", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DidOpenTextDocumentFeature", "client", "syncedDocuments", "textDocument", "data", "capabilities", "documentSelector", "textDocumentSyncOptions", "uri", "middleware", "didOpen", "error", "type", "params", "DidCloseTextDocumentFeature", "pendingTextDocumentChanges", "id", "selector", "selectors", "didClose", "DidChangeTextDocumentFeature", "event", "version", "promises", "changeData", "didChange", "eventUri", "excludes", "result", "entry", "document", "syncKind", "WillSaveFeature", "willSaveEvent", "value", "WillSaveWaitUntilFeature", "willSaveWaitUntil", "edits", "vEdits", "DidSaveTextDocumentFeature", "saveOptions", "require_completion", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "SupportedCompletionItemKinds", "CompletionItemFeature", "client", "capabilities", "completion", "documentSelector", "options", "id", "triggerCharacters", "defaultCommitCharacters", "selector", "provider", "document", "position", "token", "context", "middleware", "provideCompletionItems", "result", "error", "item", "resolveCompletionItem", "require_hover", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "HoverFeature", "client", "capabilities", "hoverCapability", "documentSelector", "options", "selector", "provider", "document", "position", "token", "provideHover", "result", "error", "middleware", "require_definition", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DefinitionFeature", "client", "capabilities", "definitionSupport", "documentSelector", "options", "selector", "provider", "document", "position", "token", "provideDefinition", "result", "error", "middleware", "require_signatureHelp", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "SignatureHelpFeature", "client", "capabilities", "config", "documentSelector", "options", "provider", "document", "position", "token", "context", "providerSignatureHelp", "result", "error", "middleware", "selector", "triggerCharacters", "metaData", "require_documentHighlight", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DocumentHighlightFeature", "client", "capabilities", "documentSelector", "options", "selector", "provider", "document", "position", "token", "_provideDocumentHighlights", "result", "error", "middleware", "require_documentSymbol", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DocumentSymbolFeature", "client", "capabilities", "symbolCapabilities", "documentSelector", "options", "selector", "provider", "document", "token", "_provideDocumentSymbols", "data", "first", "error", "middleware", "metaData", "require_workspaceSymbol", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "documentSymbol_1", "UUID", "WorkspaceSymbolFeature", "client", "capabilities", "symbolCapabilities", "options", "provider", "query", "token", "provideWorkspaceSymbols", "result", "error", "middleware", "item", "resolveWorkspaceSymbol", "require_reference", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "ReferencesFeature", "client", "capabilities", "documentSelector", "options", "selector", "provider", "document", "position", "token", "_providerReferences", "result", "error", "middleware", "require_codeAction", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "CodeActionFeature", "client", "capabilities", "cap", "documentSelector", "options", "selector", "provider", "document", "range", "context", "token", "_provideCodeActions", "params", "values", "error", "middleware", "item", "resolveCodeAction", "result", "require_codeLens", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "CodeLensFeature", "client", "capabilities", "documentSelector", "provider", "options", "selector", "eventEmitter", "document", "token", "provideCodeLenses", "result", "error", "middleware", "codeLens", "resolveCodeLens", "require_formatting", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "FileFormattingOptions", "fromConfiguration", "document", "filesConfig", "DocumentFormattingFeature", "client", "capabilities", "documentSelector", "options", "selector", "provider", "token", "provideDocumentFormattingEdits", "params", "result", "error", "middleware", "DocumentRangeFormattingFeature", "capability", "range", "provideDocumentRangeFormattingEdits", "ranges", "provideDocumentRangesFormattingEdits", "DocumentOnTypeFormattingFeature", "position", "ch", "provideOnTypeFormattingEdits", "moreTriggerCharacter", "require_rename", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "Is", "features_1", "RenameFeature", "client", "capabilities", "rename", "documentSelector", "options", "selector", "provider", "document", "position", "newName", "token", "provideRenameEdits", "params", "result", "error", "middleware", "prepareRename", "value", "candidate", "require_documentLink", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "DocumentLinkFeature", "client", "capabilities", "documentLinkCapabilities", "documentSelector", "options", "selector", "provider", "document", "token", "provideDocumentLinks", "result", "error", "middleware", "link", "resolveDocumentLink", "require_executeCommand", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "UUID", "features_1", "ExecuteCommandFeature", "client", "capabilities", "data", "middleware", "executeCommand", "command", "args", "params", "error", "disposables", "id", "disposable", "value", "require_fileSystemWatcher", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "FileSystemWatcherFeature", "client", "notifyFileEvent", "capabilities", "_capabilities", "_documentSelector", "data", "disposables", "watcher", "globPattern", "watchCreate", "watchChange", "watchDelete", "fileSystemWatcher", "id", "fileSystemWatchers", "listeners", "resource", "disposable", "require_colorProvider", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "ColorProviderFeature", "client", "capabilities", "documentSelector", "id", "options", "selector", "provider", "color", "context", "token", "provideColorPresentations", "requestParams", "result", "error", "middleware", "document", "provideDocumentColors", "require_implementation", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "ImplementationFeature", "client", "capabilities", "implementationSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideImplementation", "result", "error", "middleware", "require_typeDefinition", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "TypeDefinitionFeature", "client", "capabilities", "typeDefinitionSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideTypeDefinition", "result", "error", "middleware", "require_workspaceFolder", "__commonJSMin", "exports", "UUID", "vscode_1", "vscode_languageserver_protocol_1", "access", "target", "key", "arrayDiff", "left", "right", "element", "WorkspaceFoldersFeature", "client", "params", "folders", "folder", "currentWorkspaceFolders", "capabilities", "token", "workspaceFolders", "middleware", "value", "id", "promise", "removed", "added", "error", "addedFolders", "removedFolders", "data", "disposable", "event", "didChangeWorkspaceFolders", "workspaceFolder", "require_foldingRange", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "FoldingRangeFeature", "client", "capabilities", "capability", "documentSelector", "provider", "id", "options", "selector", "eventEmitter", "document", "context", "token", "provideFoldingRanges", "_", "requestParams", "result", "error", "middleware", "require_declaration", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "DeclarationFeature", "client", "capabilities", "declarationSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideDeclaration", "result", "error", "middleware", "require_selectionRange", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "SelectionRangeFeature", "client", "capabilities", "capability", "documentSelector", "id", "options", "selector", "provider", "document", "positions", "token", "provideSelectionRanges", "requestParams", "ranges", "error", "middleware", "require_progress", "__commonJSMin", "exports", "vscode_languageserver_protocol_1", "progressPart_1", "ensure", "target", "key", "ProgressFeature", "_client", "capabilities", "client", "deleteHandler", "part", "createHandler", "params", "require_callHierarchy", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "CallHierarchyProvider", "client", "document", "position", "token", "middleware", "prepareCallHierarchy", "params", "result", "error", "item", "provideCallHierarchyIncomingCalls", "provideCallHierarchyOutgoingCalls", "CallHierarchyFeature", "cap", "capabilities", "capability", "documentSelector", "id", "options", "provider", "require_semanticTokens", "__commonJSMin", "exports", "vscode", "vscode_languageserver_protocol_1", "features_1", "Is", "SemanticTokensFeature", "client", "capabilities", "capability", "documentSelector", "provider", "id", "options", "selector", "fullProvider", "hasEditProvider", "eventEmitter", "documentProvider", "document", "token", "middleware", "provideDocumentSemanticTokens", "params", "result", "error", "previousResultId", "provideDocumentSemanticTokensEdits", "rangeProvider", "range", "provideDocumentRangeSemanticTokens", "disposables", "legend", "item", "require_fileOperations", "__commonJSMin", "exports", "code", "minimatch", "proto", "UUID", "ensure", "target", "key", "access", "assign", "value", "FileOperationFeature", "_FileOperationFeature", "client", "event", "registrationType", "clientCapability", "serverCapability", "capabilities", "options", "capability", "e", "data", "minimatchFilter", "filter", "matcher", "id", "uri", "prop", "fileMatches", "item", "path", "filters", "fileType", "files", "_", "index", "result", "NotificationFileOperationFeature", "notificationType", "accessUri", "createParams", "originalEvent", "filteredEvent", "next", "CachingNotificationFileOperationFeature", "fsPath", "type", "DidCreateFilesFeature", "i", "middleware", "DidRenameFilesFeature", "DidDeleteFilesFeature", "RequestFileOperationFeature", "requestType", "waitUntil", "WillCreateFilesFeature", "WillRenameFilesFeature", "WillDeleteFilesFeature", "require_linkedEditingRange", "__commonJSMin", "exports", "code", "proto", "features_1", "LinkedEditingFeature", "client", "capabilities", "linkedEditingSupport", "documentSelector", "id", "options", "selector", "provider", "document", "position", "token", "provideLinkedEditing", "result", "error", "middleware", "require_typeHierarchy", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "TypeHierarchyProvider", "client", "document", "position", "token", "middleware", "prepareTypeHierarchy", "params", "result", "error", "item", "provideTypeHierarchySupertypes", "provideTypeHierarchySubtypes", "TypeHierarchyFeature", "capabilities", "capability", "documentSelector", "id", "options", "provider", "require_inlineValue", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "InlineValueFeature", "client", "capabilities", "documentSelector", "provider", "id", "options", "selector", "eventEmitter", "document", "viewPort", "context", "token", "provideInlineValues", "requestParams", "values", "error", "middleware", "require_inlayHint", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "InlayHintsFeature", "client", "capabilities", "inlayHint", "documentSelector", "provider", "id", "options", "selector", "eventEmitter", "document", "viewPort", "token", "provideInlayHints", "requestParams", "values", "error", "middleware", "hint", "resolveInlayHint", "item", "value", "result", "require_inlineCompletion", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "features_1", "UUID", "InlineCompletionItemFeature", "client", "capabilities", "inlineCompletion", "documentSelector", "options", "selector", "provider", "document", "position", "context", "token", "middleware", "provideInlineCompletionItems", "result", "error", "require_client", "__commonJSMin", "exports", "vscode_1", "vscode_languageserver_protocol_1", "c2p", "p2c", "Is", "async_1", "UUID", "progressPart_1", "features_1", "diagnostic_1", "notebook_1", "configuration_1", "textSynchronization_1", "completion_1", "hover_1", "definition_1", "signatureHelp_1", "documentHighlight_1", "documentSymbol_1", "workspaceSymbol_1", "reference_1", "codeAction_1", "codeLens_1", "formatting_1", "rename_1", "documentLink_1", "executeCommand_1", "fileSystemWatcher_1", "colorProvider_1", "implementation_1", "typeDefinition_1", "workspaceFolder_1", "foldingRange_1", "declaration_1", "selectionRange_1", "progress_1", "callHierarchy_1", "semanticTokens_1", "fileOperations_1", "linkedEditingRange_1", "typeHierarchy_1", "inlineValue_1", "inlayHint_1", "inlineCompletion_1", "RevealOutputChannelOn", "ErrorAction", "CloseAction", "State", "SuspendMode", "ResolvedClientOptions", "sanitizeIsTrusted", "isTrusted", "DefaultErrorHandler", "client", "maxRestartCount", "_error", "_message", "count", "ClientState", "MessageTransports", "is", "value", "BaseLanguageClient", "_BaseLanguageClient", "id", "name", "clientOptions", "markdown", "messageOrDataObject", "data", "oldState", "newState", "type", "params", "connection", "_sendRequest", "param", "token", "handler", "method", "disposable", "needsPendingFullTextDocumentSync", "openNotification", "_sendNotification", "error", "handleWorkDoneProgress", "realHandler", "responseError", "message", "showNotification", "reveal", "selection", "promise", "resolve", "reject", "messageFunc", "actions", "showDocument", "uri", "options", "middleware", "_resolve", "_reject", "initOption", "rootPath", "workspaceFolders", "initParams", "part", "result", "textDocumentSyncOptions", "item", "folders", "folder", "timeout", "mode", "tp", "c", "shutdown", "disposables", "feature", "entry", "event", "didChangeWatchedFile", "workSpaceMiddleware", "changes", "document", "key", "next", "diagnostics", "tokenSource", "converted", "errorHandler", "closeHandler", "transports", "createConnection", "handlerResult", "sendNotification", "config", "trace", "traceFormat", "traceConfig", "_connection", "fileEvents", "watchers", "features", "registrationType", "request", "textDocument", "pendingFullTextDocumentChanges", "ProposedFeatures", "workspaceEdit", "windowCapabilities", "showMessage", "generalCapabilities", "documentSelector", "nextParams", "registration", "err", "unregistration", "openTextDocuments", "versionMismatch", "change", "changeUri", "defaultValue", "ConsoleLogger", "input", "output", "logger", "tracer", "sendNotificationOrTraceOptions", "defaultTraceOptions", "createAll", "_client", "require_processes", "__commonJSMin", "exports", "cp", "path_1", "isWindows", "isMacintosh", "isLinux", "terminate", "process", "cwd", "options", "cmd", "result", "require_node", "__commonJSMin", "exports", "module", "require_debug", "__commonJSMin", "exports", "module", "debug", "args", "require_constants", "__commonJSMin", "exports", "module", "SEMVER_SPEC_VERSION", "MAX_SAFE_INTEGER", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "RELEASE_TYPES", "require_re", "__commonJSMin", "exports", "module", "MAX_SAFE_COMPONENT_LENGTH", "MAX_SAFE_BUILD_LENGTH", "MAX_LENGTH", "debug", "re", "safeRe", "src", "safeSrc", "t", "R", "LETTERDASHNUMBER", "safeRegexReplacements", "makeSafeRegex", "value", "token", "max", "createToken", "name", "isGlobal", "safe", "index", "require_parse_options", "__commonJSMin", "exports", "module", "looseOption", "emptyOpts", "parseOptions", "options", "require_identifiers", "__commonJSMin", "exports", "module", "numeric", "compareIdentifiers", "a", "b", "anum", "bnum", "rcompareIdentifiers", "require_semver", "__commonJSMin", "exports", "module", "debug", "MAX_LENGTH", "MAX_SAFE_INTEGER", "re", "t", "parseOptions", "compareIdentifiers", "SemVer", "_SemVer", "version", "options", "m", "id", "num", "other", "i", "a", "b", "release", "identifier", "identifierBase", "match", "base", "prerelease", "require_parse", "__commonJSMin", "exports", "module", "SemVer", "parse", "version", "options", "throwErrors", "er", "require_lrucache", "__commonJSMin", "exports", "module", "LRUCache", "key", "value", "firstKey", "require_compare", "__commonJSMin", "exports", "module", "SemVer", "compare", "a", "b", "loose", "require_eq", "__commonJSMin", "exports", "module", "compare", "eq", "a", "b", "loose", "require_neq", "__commonJSMin", "exports", "module", "compare", "neq", "a", "b", "loose", "require_gt", "__commonJSMin", "exports", "module", "compare", "gt", "a", "b", "loose", "require_gte", "__commonJSMin", "exports", "module", "compare", "gte", "a", "b", "loose", "require_lt", "__commonJSMin", "exports", "module", "compare", "lt", "a", "b", "loose", "require_lte", "__commonJSMin", "exports", "module", "compare", "lte", "a", "b", "loose", "require_cmp", "__commonJSMin", "exports", "module", "eq", "neq", "gt", "gte", "lt", "lte", "cmp", "a", "op", "b", "loose", "require_comparator", "__commonJSMin", "exports", "module", "ANY", "Comparator", "_Comparator", "comp", "options", "parseOptions", "debug", "re", "t", "m", "SemVer", "version", "cmp", "Range", "require_range", "__commonJSMin", "exports", "module", "SPACE_CHARACTERS", "Range", "_Range", "range", "options", "parseOptions", "Comparator", "r", "c", "first", "isNullSet", "isAny", "i", "comps", "k", "memoKey", "FLAG_INCLUDE_PRERELEASE", "FLAG_LOOSE", "cached", "cache", "loose", "hr", "re", "t", "hyphenReplace", "debug", "comparatorTrimReplace", "tildeTrimReplace", "caretTrimReplace", "rangeList", "comp", "parseComparator", "replaceGTE0", "rangeMap", "comparators", "result", "thisComparators", "isSatisfiable", "rangeComparators", "thisComparator", "rangeComparator", "version", "SemVer", "testSet", "LRU", "remainingComparators", "testComparator", "otherComparator", "replaceCarets", "replaceTildes", "replaceXRanges", "replaceStars", "isX", "id", "replaceTilde", "_", "M", "m", "p", "pr", "ret", "replaceCaret", "z", "replaceXRange", "gtlt", "xM", "xm", "xp", "anyX", "incPr", "$0", "from", "fM", "fm", "fp", "fpr", "fb", "to", "tM", "tm", "tp", "tpr", "set", "allowed", "require_satisfies", "__commonJSMin", "exports", "module", "Range", "satisfies", "version", "range", "options", "require_api", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "diagnostic_1", "require_main", "__commonJSMin", "exports", "__createBinding", "o", "m", "k", "k2", "desc", "__exportStar", "p", "cp", "fs", "path", "vscode_1", "Is", "client_1", "processes_1", "node_1", "semverParse", "semverSatisfies", "REQUIRED_VSCODE_VERSION", "TransportKind", "Transport", "isSocket", "value", "candidate", "Executable", "is", "NodeModule", "StreamInfo", "ChildProcessInfo", "LanguageClient", "arg1", "arg2", "arg3", "arg4", "arg5", "id", "name", "serverOptions", "clientOptions", "forceDebug", "error", "codeVersion", "resolve", "timeout", "toCheck", "childProcess", "params", "encoding", "getEnvironment", "env", "fork", "result", "key", "debugStartWith", "debugEquals", "startedInDebugMode", "args", "arg", "assertStdio", "process", "server", "data", "json", "runDebug", "serverWorkingDir", "node", "transport", "options", "element", "execOptions", "runtime", "pipeName", "serverProcess", "handleChildProcessStartError", "protocol", "reject", "sp", "command", "code", "signal", "serverWorkingDirectory", "mainRootPath", "folders", "folder", "cwd", "s", "err", "stats", "SettingMonitor", "_client", "_setting", "index", "primary", "rest", "enabled", "message", "_", "require_node", "__commonJSMin", "exports", "module", "noop", "typeIsObject", "x", "rethrowAssertionErrorRejection", "setFunctionName", "fn", "name", "originalPromise", "originalPromiseThen", "originalPromiseReject", "newPromise", "executor", "promiseResolvedWith", "value", "resolve", "promiseRejectedWith", "reason", "PerformPromiseThen", "promise", "onFulfilled", "onRejected", "uponPromise", "uponFulfillment", "uponRejection", "transformPromiseWith", "fulfillmentHandler", "rejectionHandler", "setPromiseIsHandledToTrue", "_queueMicrotask", "callback", "resolvedPromise", "cb", "reflectCall", "F", "V", "args", "promiseCall", "QUEUE_MAX_ARRAY_SIZE", "SimpleQueue", "element", "oldBack", "newBack", "oldFront", "newFront", "oldCursor", "newCursor", "elements", "i", "node", "front", "cursor", "AbortSteps", "ErrorSteps", "CancelSteps", "PullSteps", "ReleaseSteps", "ReadableStreamReaderGenericInitialize", "reader", "stream", "defaultReaderClosedPromiseInitialize", "defaultReaderClosedPromiseInitializeAsResolved", "defaultReaderClosedPromiseInitializeAsRejected", "ReadableStreamReaderGenericCancel", "ReadableStreamCancel", "ReadableStreamReaderGenericRelease", "defaultReaderClosedPromiseReject", "defaultReaderClosedPromiseResetToRejected", "readerLockException", "reject", "defaultReaderClosedPromiseResolve", "NumberIsFinite", "MathTrunc", "v", "isDictionary", "assertDictionary", "obj", "context", "assertFunction", "isObject", "assertObject", "assertRequiredArgument", "position", "assertRequiredField", "field", "convertUnrestrictedDouble", "censorNegativeZero", "integerPart", "convertUnsignedLongLongWithEnforceRange", "upperBound", "assertReadableStream", "IsReadableStream", "AcquireReadableStreamDefaultReader", "ReadableStreamDefaultReader", "ReadableStreamAddReadRequest", "readRequest", "ReadableStreamFulfillReadRequest", "chunk", "done", "ReadableStreamGetNumReadRequests", "ReadableStreamHasDefaultReader", "IsReadableStreamDefaultReader", "IsReadableStreamLocked", "defaultReaderBrandCheckException", "resolvePromise", "rejectPromise", "ReadableStreamDefaultReaderRead", "e", "ReadableStreamDefaultReaderRelease", "ReadableStreamDefaultReaderErrorReadRequests", "readRequests", "AsyncIteratorPrototype", "ReadableStreamAsyncIteratorImpl", "preventCancel", "nextSteps", "returnSteps", "queueMicrotask", "result", "ReadableStreamAsyncIteratorPrototype", "IsReadableStreamAsyncIterator", "streamAsyncIteratorBrandCheckException", "AcquireReadableStreamAsyncIterator", "impl", "iterator", "NumberIsNaN", "CreateArrayFromList", "CopyDataBlockBytes", "dest", "destOffset", "src", "srcOffset", "n", "TransferArrayBuffer", "O", "buffer", "IsDetachedBuffer", "ArrayBufferSlice", "begin", "end", "length", "slice", "GetMethod", "receiver", "prop", "func", "CreateAsyncFromSyncIterator", "syncIteratorRecord", "syncIterable", "asyncIterator", "nextMethod", "SymbolAsyncIterator", "_c", "_a", "_b", "GetIterator", "hint", "method", "syncMethod", "IteratorNext", "iteratorRecord", "IteratorComplete", "iterResult", "IteratorValue", "IsNonNegativeNumber", "CloneAsUint8Array", "DequeueValue", "container", "pair", "EnqueueValueWithSize", "size", "PeekQueueValue", "ResetQueue", "isDataViewConstructor", "ctor", "isDataView", "view", "arrayBufferViewElementSize", "ReadableStreamBYOBRequest", "IsReadableStreamBYOBRequest", "byobRequestBrandCheckException", "bytesWritten", "ReadableByteStreamControllerRespond", "ReadableByteStreamControllerRespondWithNewView", "ReadableByteStreamController", "IsReadableByteStreamController", "byteStreamControllerBrandCheckException", "ReadableByteStreamControllerGetBYOBRequest", "ReadableByteStreamControllerGetDesiredSize", "state", "ReadableByteStreamControllerClose", "ReadableByteStreamControllerEnqueue", "ReadableByteStreamControllerError", "ReadableByteStreamControllerClearPendingPullIntos", "ReadableByteStreamControllerClearAlgorithms", "ReadableByteStreamControllerFillReadRequestFromQueue", "autoAllocateChunkSize", "bufferE", "pullIntoDescriptor", "ReadableByteStreamControllerCallPullIfNeeded", "firstPullInto", "controller", "ReadableByteStreamControllerShouldCallPull", "pullPromise", "ReadableByteStreamControllerInvalidateBYOBRequest", "ReadableByteStreamControllerCommitPullIntoDescriptor", "filledView", "ReadableByteStreamControllerConvertPullIntoDescriptor", "ReadableStreamFulfillReadIntoRequest", "bytesFilled", "elementSize", "ReadableByteStreamControllerEnqueueChunkToQueue", "byteOffset", "byteLength", "ReadableByteStreamControllerEnqueueClonedChunkToQueue", "clonedChunk", "cloneE", "ReadableByteStreamControllerEnqueueDetachedPullIntoToQueue", "firstDescriptor", "ReadableByteStreamControllerShiftPendingPullInto", "ReadableByteStreamControllerFillPullIntoDescriptorFromQueue", "maxBytesToCopy", "maxBytesFilled", "totalBytesToCopyRemaining", "ready", "remainderBytes", "maxAlignedBytes", "queue", "headOfQueue", "bytesToCopy", "destStart", "ReadableByteStreamControllerFillHeadPullIntoDescriptor", "ReadableByteStreamControllerHandleQueueDrain", "ReadableStreamClose", "ReadableByteStreamControllerProcessPullIntoDescriptorsUsingQueue", "ReadableByteStreamControllerProcessReadRequestsUsingQueue", "ReadableByteStreamControllerPullInto", "min", "readIntoRequest", "minimumFill", "ReadableStreamAddReadIntoRequest", "emptyView", "ReadableByteStreamControllerRespondInClosedState", "ReadableStreamHasBYOBReader", "ReadableStreamGetNumReadIntoRequests", "ReadableByteStreamControllerRespondInReadableState", "remainderSize", "ReadableByteStreamControllerRespondInternal", "firstPendingPullInto", "transferredBuffer", "transferredView", "ReadableStreamError", "entry", "byobRequest", "SetUpReadableStreamBYOBRequest", "viewByteLength", "SetUpReadableByteStreamController", "startAlgorithm", "pullAlgorithm", "cancelAlgorithm", "highWaterMark", "startResult", "r", "SetUpReadableByteStreamControllerFromUnderlyingSource", "underlyingByteSource", "request", "convertReaderOptions", "options", "mode", "convertReadableStreamReaderMode", "convertByobReadOptions", "AcquireReadableStreamBYOBReader", "ReadableStreamBYOBReader", "IsReadableStreamBYOBReader", "byobReaderBrandCheckException", "rawOptions", "ReadableStreamBYOBReaderRead", "ReadableStreamBYOBReaderRelease", "ReadableStreamBYOBReaderErrorReadIntoRequests", "readIntoRequests", "ExtractHighWaterMark", "strategy", "defaultHWM", "ExtractSizeAlgorithm", "convertQueuingStrategy", "init", "convertQueuingStrategySize", "convertUnderlyingSink", "original", "abort", "close", "start", "type", "write", "convertUnderlyingSinkAbortCallback", "convertUnderlyingSinkCloseCallback", "convertUnderlyingSinkStartCallback", "convertUnderlyingSinkWriteCallback", "assertWritableStream", "IsWritableStream", "isAbortSignal", "supportsAbortController", "createAbortController", "WritableStream", "rawUnderlyingSink", "rawStrategy", "underlyingSink", "InitializeWritableStream", "sizeAlgorithm", "SetUpWritableStreamDefaultControllerFromUnderlyingSink", "streamBrandCheckException", "IsWritableStreamLocked", "WritableStreamAbort", "WritableStreamCloseQueuedOrInFlight", "WritableStreamClose", "AcquireWritableStreamDefaultWriter", "WritableStreamDefaultWriter", "CreateWritableStream", "writeAlgorithm", "closeAlgorithm", "abortAlgorithm", "WritableStreamDefaultController", "SetUpWritableStreamDefaultController", "wasAlreadyErroring", "WritableStreamStartErroring", "closeRequest", "writer", "defaultWriterReadyPromiseResolve", "WritableStreamDefaultControllerClose", "WritableStreamAddWriteRequest", "writeRequest", "WritableStreamDealWithRejection", "error", "WritableStreamFinishErroring", "WritableStreamDefaultWriterEnsureReadyPromiseRejected", "WritableStreamHasOperationMarkedInFlight", "storedError", "WritableStreamRejectCloseAndClosedPromiseIfNeeded", "abortRequest", "WritableStreamFinishInFlightWrite", "WritableStreamFinishInFlightWriteWithError", "WritableStreamFinishInFlightClose", "defaultWriterClosedPromiseResolve", "WritableStreamFinishInFlightCloseWithError", "WritableStreamMarkCloseRequestInFlight", "WritableStreamMarkFirstWriteRequestInFlight", "defaultWriterClosedPromiseReject", "WritableStreamUpdateBackpressure", "backpressure", "defaultWriterReadyPromiseReset", "defaultWriterReadyPromiseInitialize", "defaultWriterReadyPromiseInitializeAsResolved", "defaultWriterClosedPromiseInitialize", "defaultWriterReadyPromiseInitializeAsRejected", "defaultWriterClosedPromiseInitializeAsResolved", "defaultWriterClosedPromiseInitializeAsRejected", "IsWritableStreamDefaultWriter", "defaultWriterBrandCheckException", "defaultWriterLockException", "WritableStreamDefaultWriterGetDesiredSize", "WritableStreamDefaultWriterAbort", "WritableStreamDefaultWriterClose", "WritableStreamDefaultWriterRelease", "WritableStreamDefaultWriterWrite", "WritableStreamDefaultWriterCloseWithErrorPropagation", "WritableStreamDefaultWriterEnsureClosedPromiseRejected", "defaultWriterClosedPromiseResetToRejected", "defaultWriterReadyPromiseReject", "defaultWriterReadyPromiseResetToRejected", "WritableStreamDefaultControllerGetDesiredSize", "releasedError", "chunkSize", "WritableStreamDefaultControllerGetChunkSize", "WritableStreamDefaultControllerWrite", "closeSentinel", "IsWritableStreamDefaultController", "defaultControllerBrandCheckException", "WritableStreamDefaultControllerError", "WritableStreamDefaultControllerClearAlgorithms", "WritableStreamDefaultControllerGetBackpressure", "startPromise", "WritableStreamDefaultControllerAdvanceQueueIfNeeded", "chunkSizeE", "WritableStreamDefaultControllerErrorIfNeeded", "enqueueE", "WritableStreamDefaultControllerProcessClose", "WritableStreamDefaultControllerProcessWrite", "sinkClosePromise", "sinkWritePromise", "getGlobals", "globals", "isDOMExceptionConstructor", "getFromGlobal", "createPolyfill", "message", "DOMException", "ReadableStreamPipeTo", "source", "preventClose", "preventAbort", "signal", "shuttingDown", "currentWrite", "actions", "shutdownWithAction", "action", "pipeLoop", "resolveLoop", "rejectLoop", "next", "pipeStep", "resolveRead", "rejectRead", "isOrBecomesErrored", "shutdown", "isOrBecomesClosed", "destClosed", "waitForWritesToFinish", "oldCurrentWrite", "originalIsError", "originalError", "doTheRest", "finalize", "newError", "isError", "ReadableStreamDefaultController", "IsReadableStreamDefaultController", "ReadableStreamDefaultControllerGetDesiredSize", "ReadableStreamDefaultControllerCanCloseOrEnqueue", "ReadableStreamDefaultControllerClose", "ReadableStreamDefaultControllerEnqueue", "ReadableStreamDefaultControllerError", "ReadableStreamDefaultControllerClearAlgorithms", "ReadableStreamDefaultControllerCallPullIfNeeded", "ReadableStreamDefaultControllerShouldCallPull", "ReadableStreamDefaultControllerHasBackpressure", "SetUpReadableStreamDefaultController", "SetUpReadableStreamDefaultControllerFromUnderlyingSource", "underlyingSource", "ReadableStreamTee", "cloneForBranch2", "ReadableByteStreamTee", "ReadableStreamDefaultTee", "reading", "readAgain", "canceled1", "canceled2", "reason1", "reason2", "branch1", "branch2", "resolveCancelPromise", "cancelPromise", "chunk1", "chunk2", "cancel1Algorithm", "compositeReason", "cancelResult", "cancel2Algorithm", "CreateReadableStream", "readAgainForBranch1", "readAgainForBranch2", "forwardReaderError", "thisReader", "pullWithDefaultReader", "pull1Algorithm", "pull2Algorithm", "pullWithBYOBReader", "forBranch2", "byobBranch", "otherBranch", "byobCanceled", "otherCanceled", "CreateReadableByteStream", "isReadableStreamLike", "ReadableStreamFrom", "ReadableStreamFromDefaultReader", "ReadableStreamFromIterable", "asyncIterable", "nextResult", "nextPromise", "returnMethod", "returnResult", "returnPromise", "readPromise", "readResult", "convertUnderlyingDefaultOrByteSource", "cancel", "pull", "convertUnderlyingSourceCancelCallback", "convertUnderlyingSourcePullCallback", "convertUnderlyingSourceStartCallback", "convertReadableStreamType", "convertIteratorOptions", "convertPipeOptions", "assertAbortSignal", "convertReadableWritablePair", "readable", "writable", "ReadableStream", "rawUnderlyingSource", "InitializeReadableStream", "rawTransform", "transform", "destination", "branches", "sourceCancelPromise", "convertQueuingStrategyInit", "byteLengthSizeFunction", "ByteLengthQueuingStrategy", "IsByteLengthQueuingStrategy", "byteLengthBrandCheckException", "countSizeFunction", "CountQueuingStrategy", "IsCountQueuingStrategy", "countBrandCheckException", "convertTransformer", "flush", "readableType", "writableType", "convertTransformerCancelCallback", "convertTransformerFlushCallback", "convertTransformerStartCallback", "convertTransformerTransformCallback", "TransformStream", "rawTransformer", "rawWritableStrategy", "rawReadableStrategy", "writableStrategy", "readableStrategy", "transformer", "readableHighWaterMark", "readableSizeAlgorithm", "writableHighWaterMark", "writableSizeAlgorithm", "startPromise_resolve", "InitializeTransformStream", "SetUpTransformStreamDefaultControllerFromTransformer", "IsTransformStream", "TransformStreamDefaultSinkWriteAlgorithm", "TransformStreamDefaultSinkAbortAlgorithm", "TransformStreamDefaultSinkCloseAlgorithm", "TransformStreamDefaultSourcePullAlgorithm", "TransformStreamDefaultSourceCancelAlgorithm", "TransformStreamSetBackpressure", "TransformStreamError", "TransformStreamErrorWritableAndUnblockWrite", "TransformStreamDefaultControllerClearAlgorithms", "TransformStreamUnblockWrite", "TransformStreamDefaultController", "IsTransformStreamDefaultController", "readableController", "TransformStreamDefaultControllerEnqueue", "TransformStreamDefaultControllerError", "TransformStreamDefaultControllerTerminate", "SetUpTransformStreamDefaultController", "transformAlgorithm", "flushAlgorithm", "transformResultE", "TransformStreamDefaultControllerPerformTransform", "transformPromise", "backpressureChangePromise", "defaultControllerFinishPromiseReject", "defaultControllerFinishPromiseResolve", "flushPromise", "require_streams", "__commonJSMin", "process", "emitWarning", "error", "Blob", "params", "position", "blob", "ctrl", "buffer", "toIterator", "parts", "clone", "part", "position", "end", "size", "POOL_SIZE", "chunk", "b", "buffer", "import_streams", "_Blob", "Blob", "fetch_blob_default", "init_fetch_blob", "__esmMin", "#parts", "#type", "#size", "#endings", "blobParts", "options", "encoder", "element", "type", "decoder", "str", "data", "offset", "it", "ctrl", "start", "relativeStart", "relativeEnd", "span", "added", "blob", "object", "_File", "File", "file_default", "init_file", "__esmMin", "init_fetch_blob", "fetch_blob_default", "#lastModified", "#name", "fileBits", "fileName", "options", "lastModified", "object", "formDataToBlob", "F", "B", "fetch_blob_default", "b", "r", "c", "p", "v", "n", "e", "t", "i", "h", "m", "f", "x", "FormData", "init_esm_min", "__esmMin", "init_fetch_blob", "init_file", "a", "file_default", "#d", "o", "l", "d", "require_node_domexception", "__commonJSMin", "exports", "module", "MessageChannel", "port", "ab", "err", "import_node_fs", "import_node_domexception", "stat", "init_from", "__esmMin", "init_file", "init_fetch_blob", "fs", "multipart_parser_exports", "__export", "toFormData", "_fileName", "headerValue", "m", "match", "filename", "code", "Body", "ct", "parser", "MultipartParser", "headerField", "entryValue", "entryName", "contentType", "entryChunks", "formData", "FormData", "onPartData", "ui8a", "decoder", "appendToFile", "appendFileToFormData", "file", "file_default", "appendEntryToFormData", "chunk", "s", "S", "f", "F", "LF", "CR", "SPACE", "HYPHEN", "COLON", "A", "Z", "lower", "noop", "init_multipart_parser", "__esmMin", "init_from", "init_esm_min", "c", "boundary", "i", "data", "length_", "previousIndex", "lookbehind", "boundaryChars", "index", "state", "flags", "boundaryLength", "boundaryEnd", "bufferLength", "cl", "mark", "name", "clear", "callback", "callbackSymbol", "start", "end", "dataCallback", "markSymbol", "_lookbehind", "require_PullStream", "__commonJSMin", "exports", "module", "Stream", "util", "strFunction", "PullStream", "self", "chunk", "cb", "eof", "includeEof", "p", "done", "callback", "pull", "packet", "match", "len", "data", "buffer", "concatStream", "d", "e", "rejectHandler", "pullStreamRejectHandler", "resolve", "reject", "require_NoopStream", "__commonJSMin", "exports", "module", "Stream", "util", "NoopStream", "d", "cb", "require_BufferStream", "__commonJSMin", "exports", "module", "Stream", "entry", "resolve", "reject", "chunks", "bufferStream", "d", "e", "cb", "require_parseBuffer", "__commonJSMin", "exports", "module", "parseUIntLE", "buffer", "offset", "size", "result", "parse", "format", "key", "require_parseExtraField", "__commonJSMin", "exports", "module", "parseBuffer", "extraField", "vars", "extra", "candidateExtra", "fieldsToExpect", "require_parseDateTime", "__commonJSMin", "exports", "module", "date", "time", "day", "month", "year", "seconds", "minutes", "hours", "require_parse", "__commonJSMin", "exports", "module", "util", "zlib", "Stream", "PullStream", "NoopStream", "BufferStream", "parseExtraField", "parseDateTime", "pipeline", "parseBuffer", "endDirectorySignature", "Parse", "opts", "self", "e", "data", "signature", "loop", "vars", "fileNameBuffer", "fileName", "entry", "__autodraining", "draining", "resolve", "reject", "extraField", "extra", "fileSizeKnown", "eof", "inflater", "err", "require_process_nextick_args", "__commonJSMin", "exports", "module", "nextTick", "fn", "arg1", "arg2", "arg3", "len", "args", "i", "require_isarray", "__commonJSMin", "exports", "module", "toString", "arr", "require_stream", "__commonJSMin", "exports", "module", "require_safe_buffer", "__commonJSMin", "exports", "module", "buffer", "Buffer", "copyProps", "src", "dst", "key", "SafeBuffer", "arg", "encodingOrOffset", "length", "size", "fill", "encoding", "buf", "require_util", "__commonJSMin", "exports", "isArray", "arg", "objectToString", "isBoolean", "isNull", "isNullOrUndefined", "isNumber", "isString", "isSymbol", "isUndefined", "isRegExp", "re", "isObject", "isDate", "d", "isError", "e", "isFunction", "isPrimitive", "o", "require_inherits_browser", "__commonJSMin", "exports", "module", "ctor", "superCtor", "TempCtor", "require_inherits", "__commonJSMin", "exports", "module", "util", "require_BufferList", "__commonJSMin", "exports", "module", "_classCallCheck", "instance", "Constructor", "Buffer", "util", "copyBuffer", "src", "target", "offset", "BufferList", "v", "entry", "ret", "s", "p", "n", "i", "obj", "require_destroy", "__commonJSMin", "exports", "module", "pna", "destroy", "err", "cb", "_this", "readableDestroyed", "writableDestroyed", "emitErrorNT", "undestroy", "self", "require_node", "__commonJSMin", "exports", "module", "require_stream_writable", "__commonJSMin", "exports", "module", "pna", "Writable", "CorkedRequest", "state", "_this", "onCorkedFinish", "asyncWrite", "Duplex", "WritableState", "util", "internalUtil", "Stream", "Buffer", "OurUint8Array", "_uint8ArrayToBuffer", "chunk", "_isUint8Array", "obj", "destroyImpl", "nop", "options", "stream", "isDuplex", "hwm", "writableHwm", "defaultHwm", "noDecode", "er", "onwrite", "current", "out", "realHasInstance", "object", "writeAfterEnd", "cb", "validChunk", "valid", "encoding", "ret", "isBuf", "writeOrBuffer", "clearBuffer", "decodeChunk", "newChunk", "len", "last", "doWrite", "writev", "onwriteError", "sync", "finishMaybe", "onwriteStateUpdate", "finished", "needFinish", "afterWrite", "onwriteDrain", "entry", "l", "buffer", "holder", "count", "allBuffers", "endWritable", "callFinal", "err", "prefinish", "need", "corkReq", "value", "require_stream_duplex", "__commonJSMin", "exports", "module", "pna", "objectKeys", "obj", "keys", "key", "Duplex", "util", "Readable", "Writable", "v", "method", "options", "onend", "onEndNT", "self", "value", "err", "cb", "require_string_decoder", "__commonJSMin", "exports", "Buffer", "isEncoding", "encoding", "_normalizeEncoding", "enc", "retried", "normalizeEncoding", "nenc", "StringDecoder", "nb", "utf16Text", "utf16End", "utf8FillLast", "base64Text", "base64End", "simpleWrite", "simpleEnd", "buf", "r", "i", "utf8End", "utf8Text", "utf8CheckByte", "byte", "utf8CheckIncomplete", "self", "j", "utf8CheckExtraBytes", "p", "total", "end", "c", "n", "require_stream_readable", "__commonJSMin", "exports", "module", "pna", "Readable", "isArray", "Duplex", "ReadableState", "EE", "EElistenerCount", "emitter", "type", "Stream", "Buffer", "OurUint8Array", "_uint8ArrayToBuffer", "chunk", "_isUint8Array", "obj", "util", "debugUtil", "debug", "BufferList", "destroyImpl", "StringDecoder", "kProxyEvents", "prependListener", "event", "fn", "options", "stream", "isDuplex", "hwm", "readableHwm", "defaultHwm", "value", "err", "cb", "encoding", "state", "skipChunkCheck", "readableAddChunk", "addToFront", "onEofChunk", "er", "chunkInvalid", "addChunk", "maybeReadMore", "needMoreData", "emitReadable", "enc", "MAX_HWM", "computeNewHighWaterMark", "n", "howMuchToRead", "nOrig", "endReadable", "doRead", "ret", "fromList", "emitReadable_", "flow", "maybeReadMore_", "len", "dest", "pipeOpts", "src", "doEnd", "endFn", "onend", "unpipe", "onunpipe", "readable", "unpipeInfo", "cleanup", "ondrain", "pipeOnDrain", "cleanedUp", "onclose", "onfinish", "onerror", "ondata", "increasedAwaitDrain", "indexOf", "dests", "i", "index", "ev", "res", "nReadingNextTick", "self", "resume", "resume_", "_this", "paused", "method", "fromListPartial", "list", "hasStrings", "copyFromBufferString", "copyFromBuffer", "p", "c", "str", "nb", "buf", "endReadableNT", "xs", "x", "l", "require_stream_transform", "__commonJSMin", "exports", "module", "Transform", "Duplex", "util", "afterTransform", "er", "data", "ts", "cb", "rs", "options", "prefinish", "_this", "done", "chunk", "encoding", "n", "err", "_this2", "err2", "stream", "require_stream_passthrough", "__commonJSMin", "exports", "module", "PassThrough", "Transform", "util", "options", "chunk", "encoding", "cb", "require_readable", "__commonJSMin", "exports", "module", "Stream", "require_duplexer2", "__commonJSMin", "exports", "module", "stream", "DuplexWrapper", "options", "writable", "readable", "self", "err", "input", "encoding", "done", "buf", "reads", "require_parseOne", "__commonJSMin", "exports", "module", "Stream", "Parse", "duplexer2", "BufferStream", "parseOne", "match", "opts", "inStream", "outStream", "transform", "re", "found", "entry", "e", "cb", "out", "err", "d", "require_universalify", "__commonJSMin", "exports", "fn", "args", "resolve", "reject", "err", "res", "cb", "r", "require_polyfills", "__commonJSMin", "exports", "module", "constants", "origCwd", "cwd", "platform", "chdir", "d", "patch", "fs", "patchLchmod", "patchLutimes", "chownFix", "chmodFix", "chownFixSync", "chmodFixSync", "statFix", "statFixSync", "path", "mode", "cb", "uid", "gid", "fs$rename", "rename", "from", "to", "start", "backoff", "CB", "er", "stater", "st", "fs$read", "read", "fd", "buffer", "offset", "length", "position", "callback_", "callback", "eagCounter", "_", "__", "fs$readSync", "err", "err2", "threw", "ret", "at", "mt", "er2", "_a", "_b", "_c", "orig", "target", "chownErOk", "options", "stats", "nonroot", "require_legacy_streams", "__commonJSMin", "exports", "module", "Stream", "legacy", "fs", "ReadStream", "WriteStream", "path", "options", "self", "keys", "index", "length", "key", "err", "fd", "require_clone", "__commonJSMin", "exports", "module", "clone", "getPrototypeOf", "obj", "copy", "key", "require_graceful_fs", "__commonJSMin", "exports", "module", "fs", "polyfills", "legacy", "clone", "util", "gracefulQueue", "previousSymbol", "noop", "publishQueue", "context", "queue", "debug", "m", "fs$close", "close", "fd", "cb", "err", "resetQueue", "fs$closeSync", "closeSync", "patch", "createReadStream", "createWriteStream", "fs$readFile", "readFile", "path", "options", "go$readFile", "startTime", "enqueue", "fs$writeFile", "writeFile", "data", "go$writeFile", "fs$appendFile", "appendFile", "go$appendFile", "fs$copyFile", "copyFile", "src", "dest", "flags", "go$copyFile", "fs$readdir", "readdir", "noReaddirOptionVersions", "go$readdir", "fs$readdirCallback", "files", "legStreams", "ReadStream", "WriteStream", "fs$ReadStream", "ReadStream$open", "fs$WriteStream", "WriteStream$open", "val", "FileReadStream", "FileWriteStream", "that", "open", "fs$open", "mode", "go$open", "elem", "retry", "retryTimer", "now", "i", "fn", "args", "lastTime", "sinceAttempt", "sinceStart", "desiredDelay", "require_fs", "__commonJSMin", "exports", "u", "fs", "api", "key", "method", "filename", "callback", "resolve", "fd", "buffer", "offset", "length", "position", "reject", "err", "bytesRead", "args", "bytesWritten", "buffers", "require_utils", "__commonJSMin", "exports", "module", "path", "pth", "error", "require_make_dir", "__commonJSMin", "exports", "module", "fs", "checkPath", "getMode", "options", "defaults", "dir", "require_mkdirs", "__commonJSMin", "exports", "module", "u", "_makeDir", "makeDirSync", "makeDir", "require_path_exists", "__commonJSMin", "exports", "module", "u", "fs", "pathExists", "path", "require_utimes", "__commonJSMin", "exports", "module", "fs", "u", "utimesMillis", "path", "atime", "mtime", "fd", "closeErr", "e", "utimesMillisSync", "require_stat", "__commonJSMin", "exports", "module", "fs", "path", "u", "getStats", "src", "dest", "opts", "statFunc", "file", "err", "srcStat", "destStat", "getStatsSync", "checkPaths", "funcName", "areIdentical", "srcBaseName", "destBaseName", "isSrcSubdir", "errMsg", "checkPathsSync", "checkParentPaths", "srcParent", "destParent", "checkParentPathsSync", "srcArr", "destArr", "cur", "i", "require_async", "__commonJSMin", "exports", "module", "asyncIteratorConcurrentProcess", "iterator", "fn", "promises", "item", "err", "promise", "possibleErr", "require_copy", "__commonJSMin", "exports", "module", "fs", "path", "mkdirs", "pathExists", "utimesMillis", "stat", "asyncIteratorConcurrentProcess", "copy", "src", "dest", "opts", "srcStat", "destStat", "runFilter", "destParent", "getStatsAndPerformCopy", "onDir", "onFile", "onLink", "copyFile", "fileIsNotWritable", "makeFileWritable", "updatedSrcStat", "srcMode", "item", "srcItem", "destItem", "resolvedSrc", "resolvedDest", "e", "require_copy_sync", "__commonJSMin", "exports", "module", "fs", "path", "mkdirsSync", "utimesMillisSync", "stat", "copySync", "src", "dest", "opts", "srcStat", "destStat", "destParent", "getStats", "onDir", "onFile", "onLink", "mayCopyFile", "copyFile", "handleTimestamps", "setDestMode", "srcMode", "fileIsNotWritable", "makeFileWritable", "setDestTimestamps", "updatedSrcStat", "copyDir", "mkDirAndCopy", "dir", "dirent", "copyDirItem", "item", "srcItem", "destItem", "resolvedSrc", "resolvedDest", "err", "copyLink", "require_copy", "__commonJSMin", "exports", "module", "u", "require_remove", "__commonJSMin", "exports", "module", "fs", "u", "remove", "path", "callback", "removeSync", "require_empty", "__commonJSMin", "exports", "module", "u", "fs", "path", "mkdir", "remove", "emptyDir", "dir", "items", "item", "emptyDirSync", "require_file", "__commonJSMin", "exports", "module", "u", "path", "fs", "mkdir", "createFile", "file", "stats", "dir", "dirStats", "err", "createFileSync", "require_link", "__commonJSMin", "exports", "module", "u", "path", "fs", "mkdir", "pathExists", "areIdentical", "createLink", "srcpath", "dstpath", "dstStat", "srcStat", "err", "dir", "createLinkSync", "require_symlink_paths", "__commonJSMin", "exports", "module", "path", "fs", "pathExists", "u", "symlinkPaths", "srcpath", "dstpath", "err", "dstdir", "relativeToDst", "symlinkPathsSync", "require_symlink_type", "__commonJSMin", "exports", "module", "fs", "u", "symlinkType", "srcpath", "type", "stats", "symlinkTypeSync", "require_symlink", "__commonJSMin", "exports", "module", "u", "path", "fs", "mkdirs", "mkdirsSync", "symlinkPaths", "symlinkPathsSync", "symlinkType", "symlinkTypeSync", "pathExists", "areIdentical", "createSymlink", "srcpath", "dstpath", "type", "stats", "srcStat", "dstStat", "relative", "toType", "dir", "createSymlinkSync", "require_ensure", "__commonJSMin", "exports", "module", "createFile", "createFileSync", "createLink", "createLinkSync", "createSymlink", "createSymlinkSync", "require_utils", "__commonJSMin", "exports", "module", "stringify", "obj", "EOL", "finalEOL", "replacer", "spaces", "EOF", "stripBom", "content", "require_jsonfile", "__commonJSMin", "exports", "module", "_fs", "universalify", "stringify", "stripBom", "_readFile", "file", "options", "fs", "shouldThrow", "data", "obj", "err", "readFile", "readFileSync", "content", "_writeFile", "str", "writeFile", "writeFileSync", "require_jsonfile", "__commonJSMin", "exports", "module", "jsonFile", "require_output_file", "__commonJSMin", "exports", "module", "u", "fs", "path", "mkdir", "pathExists", "outputFile", "file", "data", "encoding", "dir", "outputFileSync", "args", "require_output_json", "__commonJSMin", "exports", "module", "stringify", "outputFile", "outputJson", "file", "data", "options", "str", "require_output_json_sync", "__commonJSMin", "exports", "module", "stringify", "outputFileSync", "outputJsonSync", "file", "data", "options", "str", "require_json", "__commonJSMin", "exports", "module", "u", "jsonFile", "require_move", "__commonJSMin", "exports", "module", "fs", "path", "copy", "remove", "mkdirp", "pathExists", "stat", "move", "src", "dest", "opts", "overwrite", "srcStat", "isChangingCase", "destParent", "doRename", "err", "moveAcrossDevice", "require_move_sync", "__commonJSMin", "exports", "module", "fs", "path", "copySync", "removeSync", "mkdirpSync", "stat", "moveSync", "src", "dest", "opts", "overwrite", "srcStat", "isChangingCase", "isParentRoot", "doRename", "parent", "rename", "err", "moveAcrossDevice", "require_move", "__commonJSMin", "exports", "module", "u", "require_lib", "__commonJSMin", "exports", "module", "require_extract", "__commonJSMin", "exports", "module", "Extract", "Parse", "fs", "path", "stream", "duplexer2", "opts", "parser", "outStream", "entry", "encoding", "cb", "extractPath", "writer", "extract", "crxHeader", "resolve", "reject", "require_Int64", "__commonJSMin", "exports", "module", "VAL32", "_HEX", "i", "Int64", "a1", "a2", "b", "o", "carry", "v", "hi", "lo", "negate", "allowImprecise", "x", "m", "radix", "sep", "out", "rawBuffer", "targetBuffer", "targetOffset", "other", "require_Decrypt", "__commonJSMin", "exports", "module", "Int64", "Stream", "table", "generateTable", "c", "n", "k", "crc", "ch", "l", "r", "multiply", "a", "b", "ah", "al", "bh", "bl", "Decrypt", "h", "x", "stream", "self", "d", "e", "cb", "i", "require_unzip", "__commonJSMin", "exports", "module", "Decrypt", "PullStream", "Stream", "zlib", "parseExtraField", "parseDateTime", "parseBuffer", "source", "offset", "_password", "directoryVars", "length", "file", "entry", "req", "e", "data", "vars", "fileName", "extraField", "checkEncryption", "header", "decrypt", "d", "i", "check", "fileSizeKnown", "eof", "inflater", "stream", "err", "require_es5", "__commonJSMin", "exports", "module", "isES5", "obj", "prop", "descriptor", "has", "str", "proto", "ObjectKeys", "o", "ret", "key", "ObjectGetDescriptor", "ObjectDefineProperty", "desc", "ObjectFreeze", "ObjectGetPrototypeOf", "ArrayIsArray", "require_util", "__commonJSMin", "target", "fn", "Child", "Parent", "hasProp", "T", "propertyName", "val", "value", "maybeError", "appendee", "len", "ret", "obj", "key", "defaultValue", "desc", "name", "descriptor", "r", "excludedPrototypes", "isExcludedProto", "i", "getKeys", "visitedKeys", "keys", "enumeration", "hasMethods", "hasMethodsOtherThanConstructor", "hasThisAssignmentAndStaticMethods", "str", "count", "prefix", "suffix", "e", "err", "from", "to", "filter", "v", "it", "itResult", "promise", "ctx", "cb", "async", "old", "$_len", "args", "$_i", "version", "supportsAsync", "res", "require_schedule", "__commonJSMin", "exports", "module", "util", "schedule", "noAsyncScheduler", "NativePromise", "GlobalSetImmediate", "ProcessNextTick", "fn", "nativePromise", "div", "opts", "toggleScheduled", "div2", "o2", "scheduleToggle", "o", "require_queue", "__commonJSMin", "exports", "module", "arrayMove", "src", "srcIndex", "dst", "dstIndex", "len", "j", "Queue", "capacity", "size", "arg", "length", "i", "fn", "receiver", "wrapMask", "front", "ret", "oldCapacity", "moveItemsCount", "require_async", "__commonJSMin", "exports", "module", "firstLineError", "e", "schedule", "Queue", "Async", "self", "fn", "prev", "isNode", "arg", "AsyncInvokeLater", "receiver", "AsyncInvoke", "AsyncSettlePromises", "promise", "_drainQueue", "queue", "_drainQueueStep", "require_errors", "__commonJSMin", "exports", "module", "es5", "Objectfreeze", "util", "inherits", "notEnumerableProp", "subError", "nameProperty", "defaultMessage", "SubError", "message", "_TypeError", "_RangeError", "Warning", "CancellationError", "TimeoutError", "AggregateError", "methods", "i", "level", "indent", "ret", "str", "lines", "j", "OperationalError", "errorTypes", "require_thenables", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "util", "errorObj", "isObject", "tryConvertToPromise", "obj", "context", "then", "getThen", "ret", "isAnyBluebirdPromise", "doThenable", "doGetThen", "e", "hasProp", "x", "promise", "synchronous", "result", "resolve", "reject", "value", "reason", "require_promise_array", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "tryConvertToPromise", "apiRejection", "Proxyable", "util", "isArray", "toResolutionValue", "val", "PromiseArray", "values", "promise", "init", "_", "resolveValueIfEmpty", "bitField", "err", "len", "result", "isResolved", "i", "maybePromise", "value", "reason", "index", "totalResolved", "require_context", "__commonJSMin", "exports", "module", "Promise", "longStackTraces", "contextStack", "Context", "peekContext", "trace", "ret", "createContext", "lastIndex", "Promise_pushContext", "Promise_popContext", "Promise_PeekContext", "Promise_peekContext", "Promise_promiseCreated", "ctx", "require_debuggability", "__commonJSMin", "exports", "module", "Promise", "Context", "enableAsyncHooks", "disableAsyncHooks", "async", "Warning", "util", "es5", "canAttachTrace", "unhandledRejectionHandled", "possiblyUnhandledRejection", "bluebirdFramePattern", "nodeFramePattern", "parseLinePattern", "stackFramePattern", "formatStack", "indentStackFrames", "printWarning", "debugging", "warnings", "longStackTraces", "wForgottenReturn", "deferUnhandledRejectionCheck", "promises", "unhandledRejectionCheck", "i", "unhandledRejectionClear", "promise", "target", "fireRejectionEvent", "reason", "message", "shouldUseOwnTrace", "warn", "fn", "context", "disableLongStackTraces", "config", "longStackTracesIsSupported", "Promise_captureStackTrace", "Promise_attachExtraTrace", "Promise_dereferenceTrace", "longStackTracesCaptureStackTrace", "longStackTracesAttachExtraTrace", "longStackTracesDereferenceTrace", "legacyHandlers", "ret", "fireDomEvent", "dispatch", "legacy", "e", "event", "name", "eventData", "domEvent", "fireGlobalEvent", "methodName", "method", "generatePromiseLifecycleEventObject", "eventToObjectGenerator", "child", "warning", "activeFireEvent", "globalEventFired", "domEventFired", "opts", "warningsOption", "cancellationClearCancellationData", "cancellationPropagateFrom", "cancellationOnCancel", "cancellationSetOnCancel", "cancellationAttachCancellationCallback", "cancellationExecute", "propagateFromFunction", "defaultFireEvent", "prev", "cur", "executor", "resolve", "reject", "handler", "onCancel", "parent", "flags", "previousOnCancel", "branchesRemainingToCancel", "bindingPropagateFrom", "boundValueFunction", "CapturedTrace", "error", "ignoreSelf", "trace", "parsed", "parseStackAndMessage", "checkForgottenReturns", "returnValue", "promiseCreated", "handlerLine", "creatorLine", "traceLines", "stack", "cleanStack", "line", "lineMatches", "firstUserLine", "msg", "deprecated", "replacement", "ctx", "formatAndLogError", "reconstructStack", "stacks", "removeDuplicateOrEmptyJumps", "removeCommonRoots", "current", "currentLastIndex", "currentLastLine", "commonRootMeetPoint", "j", "isTraceLine", "isInternalFrame", "shouldIgnore", "stackFramesAsArray", "title", "isSoft", "localHandler", "localEventFired", "formatNonError", "obj", "str", "ruselessToString", "newStr", "snip", "maxChars", "captureStackTrace", "parseLineInfoRegex", "parseLineInfo", "matches", "setBounds", "firstLineError", "lastLineError", "firstStackLines", "lastStackLines", "firstIndex", "lastIndex", "firstFileName", "lastFileName", "result", "info", "length", "nodes", "stackToIndex", "node", "currentStack", "index", "cycleEdgeNode", "currentChildLength", "v8stackFramePattern", "v8stackFormatter", "receiver", "ignoreUntil", "err", "o", "hasStackAfterThrow", "color", "require_catch_filter", "__commonJSMin", "exports", "module", "NEXT_FILTER", "util", "getKeys", "tryCatch", "errorObj", "catchFilter", "instances", "cb", "promise", "e", "boundTo", "predicateLoop", "i", "item", "matchesPredicate", "keys", "j", "key", "require_finally", "__commonJSMin", "exports", "module", "Promise", "tryConvertToPromise", "NEXT_FILTER", "util", "CancellationError", "errorObj", "catchFilter", "PassThroughHandlerContext", "promise", "type", "handler", "FinallyHandlerCancelReaction", "finallyHandler", "checkCancel", "ctx", "reason", "succeed", "fail", "reasonOrValue", "ret", "maybePromise", "success", "handlerOrPredicate", "len", "catchInstances", "j", "i", "item", "require_nodeback", "__commonJSMin", "exports", "module", "util", "maybeWrapAsError", "errors", "OperationalError", "es5", "isUntypedError", "obj", "rErrorKey", "wrapAsOperationalError", "ret", "keys", "i", "key", "nodebackForPromise", "promise", "multiArgs", "err", "value", "wrapped", "$_len", "args", "$_i", "require_method", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "tryConvertToPromise", "apiRejection", "debug", "util", "tryCatch", "fn", "ret", "value", "promiseCreated", "arg", "ctx", "require_bind", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "tryConvertToPromise", "debug", "calledBind", "rejectThis", "_", "e", "targetRejected", "context", "bindingResolved", "thisArg", "bindingRejected", "maybePromise", "ret", "target", "obj", "value", "require_cancel", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "apiRejection", "debug", "util", "tryCatch", "errorObj", "async", "promise", "child", "parent", "canceller", "onCancelCallback", "internalOnly", "i", "e", "require_direct_resolve", "__commonJSMin", "exports", "module", "Promise", "returner", "thrower", "value", "reason", "_reason", "handler", "_value", "require_synchronous_inspection", "__commonJSMin", "exports", "module", "Promise", "PromiseInspection", "promise", "value", "reason", "isFulfilled", "isRejected", "isPending", "isResolved", "target", "require_join", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "tryConvertToPromise", "INTERNAL", "async", "util", "canEvaluate", "tryCatch", "errorObj", "reject", "thenCallback", "i", "promiseSetter", "generateHolderClass", "total", "props", "assignment", "cancellationCode", "prop", "passedArguments", "name", "code", "holderClasses", "thenCallbacks", "promiseSetters", "reason", "last", "fn", "ret", "HolderClass", "holder", "callbacks", "maybePromise", "bitField", "context", "$_len", "args", "$_i", "require_call_get", "__commonJSMin", "exports", "module", "cr", "callerCache", "getterCache", "Promise", "util", "canEvaluate", "isIdentifier", "getMethodCaller", "getGetter", "makeMethodCaller", "methodName", "ensureMethod", "makeGetter", "propertyName", "getCompiled", "name", "compiler", "cache", "ret", "keys", "i", "obj", "fn", "message", "caller", "$_len", "args", "$_i", "maybeCaller", "namedGetter", "indexedGetter", "index", "isIndex", "getter", "maybeGetter", "require_generators", "__commonJSMin", "exports", "module", "Promise", "apiRejection", "INTERNAL", "tryConvertToPromise", "Proxyable", "debug", "errors", "TypeError", "util", "errorObj", "tryCatch", "yieldHandlers", "promiseFromYieldHandler", "value", "traceParent", "i", "result", "ret", "maybePromise", "PromiseSpawn", "generatorFunction", "receiver", "yieldHandler", "stack", "internal", "_finallyPromise", "promise", "implementsReturn", "reason", "bitField", "options", "PromiseSpawn$", "generator", "spawn", "fn", "require_map", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "apiRejection", "tryConvertToPromise", "INTERNAL", "debug", "util", "tryCatch", "errorObj", "async", "MappingPromiseArray", "promises", "fn", "limit", "_filter", "context", "i", "maybePromise", "value", "index", "values", "length", "preservedValues", "promise", "callback", "receiver", "ret", "promiseCreated", "bitField", "totalResolved", "queue", "booleans", "len", "j", "map", "options", "require_nodeify", "__commonJSMin", "exports", "module", "Promise", "util", "async", "tryCatch", "errorObj", "spreadAdapter", "val", "nodeback", "promise", "successAdapter", "ret", "receiver", "errorAdapter", "reason", "newReason", "options", "adapter", "require_promisify", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "THIS", "util", "nodebackForPromise", "withAppended", "maybeWrapAsError", "canEvaluate", "TypeError", "defaultSuffix", "defaultPromisified", "noCopyProps", "noCopyPropsPattern", "defaultFilter", "name", "propsFilter", "key", "isPromisified", "fn", "hasPromisified", "obj", "suffix", "val", "checkValid", "ret", "suffixRegexp", "i", "keyWithoutAsyncSuffix", "j", "promisifiableMethods", "filter", "keys", "value", "passesDefaultFilter", "escapeIdentRegex", "str", "makeNodePromisifiedEval", "switchCaseArgumentOrder", "likelyArgumentCount", "min", "argumentSequence", "argumentCount", "parameterDeclaration", "parameterCount", "callback", "receiver", "originalName", "_", "multiArgs", "newParameterCount", "argumentOrder", "shouldProxyThis", "generateCallForArgumentCount", "count", "args", "comma", "generateArgumentSwitchCase", "getFunctionCode", "body", "makeNodePromisifiedClosure", "__", "defaultThis", "method", "promisified", "_receiver", "promise", "cb", "e", "makeNodePromisified", "promisifyAll", "promisifier", "methods", "len", "promisifiedKey", "promisify", "options", "target", "require_props", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "tryConvertToPromise", "apiRejection", "util", "isObject", "es5", "Es6Map", "mapToEntries", "index", "size", "extractEntry", "value", "key", "map", "ret", "entriesToMap", "entries", "length", "i", "PropertiesPromiseArray", "obj", "isMap", "keys", "len", "totalResolved", "val", "keyOffset", "props", "promises", "castValue", "require_race", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "tryConvertToPromise", "apiRejection", "util", "raceLater", "promise", "array", "race", "promises", "parent", "maybePromise", "ret", "fulfill", "reject", "i", "len", "val", "require_reduce", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "apiRejection", "tryConvertToPromise", "INTERNAL", "debug", "util", "tryCatch", "ReductionPromiseArray", "promises", "fn", "initialValue", "_each", "context", "accum", "value", "sender", "values", "i", "length", "j", "maybePromise", "ctx", "gotAccum", "completed", "reduce", "valueOrReason", "array", "gotValue", "promise", "ret", "promiseCreated", "require_settle", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "debug", "PromiseInspection", "util", "SettledPromiseArray", "values", "index", "inspection", "totalResolved", "value", "ret", "reason", "promises", "require_some", "__commonJSMin", "exports", "module", "Promise", "PromiseArray", "apiRejection", "util", "RangeError", "AggregateError", "isArray", "CANCELLATION", "SomePromiseArray", "values", "isArrayResolved", "count", "value", "reason", "e", "i", "message", "some", "promises", "howMany", "ret", "promise", "require_timers", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "debug", "util", "TimeoutError", "HandleWrapper", "handle", "afterValue", "value", "delay", "ms", "ret", "afterTimeout", "promise", "message", "parent", "err", "successClear", "failureClear", "reason", "handleWrapper", "require_using", "__commonJSMin", "exports", "module", "Promise", "apiRejection", "tryConvertToPromise", "createContext", "INTERNAL", "debug", "util", "TypeError", "inherits", "errorObj", "tryCatch", "NULL", "thrower", "e", "castPreservingDisposable", "thenable", "maybePromise", "dispose", "resources", "inspection", "i", "len", "ret", "iterator", "Disposer", "data", "promise", "context", "resource", "d", "FunctionDisposer", "fn", "maybeUnwrapDisposer", "value", "ResourceList", "length", "item", "input", "spreadArgs", "disposer", "reflectedResources", "resultPromise", "inspections", "promiseCreated", "require_any", "__commonJSMin", "exports", "module", "Promise", "SomePromiseArray", "any", "promises", "ret", "promise", "require_each", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "PromiseReduce", "PromiseAll", "promiseAllThis", "PromiseMapSeries", "promises", "fn", "require_filter", "__commonJSMin", "exports", "module", "Promise", "INTERNAL", "PromiseMap", "fn", "options", "promises", "require_promise", "__commonJSMin", "exports", "module", "makeSelfResolutionError", "TypeError", "reflectHandler", "Promise", "apiRejection", "msg", "Proxyable", "UNDEFINED_BINDING", "util", "getDomain", "domain", "getContextDefault", "getContextDomain", "AsyncResource", "getContextAsyncHooks", "getContext", "enableAsyncHooks", "disableAsyncHooks", "es5", "Async", "async", "errors", "CancellationError", "INTERNAL", "APPLY", "NEXT_FILTER", "tryConvertToPromise", "PromiseArray", "Context", "createContext", "debug", "CapturedTrace", "PassThroughHandlerContext", "catchFilter", "nodebackForPromise", "errorObj", "tryCatch", "check", "self", "executor", "fn", "len", "catchInstances", "j", "i", "item", "didFulfill", "didReject", "promise", "ret", "val", "multiArgs", "result", "promises", "obj", "reason", "_", "receiver", "internalData", "haveInternalData", "target", "bitField", "context", "handler", "value", "settler", "index", "follower", "fulfill", "reject", "base", "proxyable", "arg", "shouldBind", "maybePromise", "synchronous", "ignoreNonErrorWarnings", "trace", "hasStack", "message", "r", "x", "promiseCreated", "isPromise", "asyncGuaranteed", "ctx", "err", "deferResolve", "v", "deferReject", "fillTypes", "p", "require_bluebird", "__commonJSMin", "exports", "module", "old", "noConflict", "bluebird", "require_directory", "__commonJSMin", "exports", "module", "PullStream", "unzip", "BufferStream", "parseExtraField", "path", "fs", "parseDateTime", "parseBuffer", "Bluebird", "signature", "getCrxHeader", "source", "sourceStream", "data", "crxHeader", "getZip64CentralDirectory", "zip64CDL", "d64loc", "dir64", "parseZip64DirRecord", "dir64record", "vars", "options", "endDir", "records", "tailSize", "sourceSize", "startOffset", "size", "error", "d", "zip64CDLOffset", "zip64CDLStream", "comment", "opts", "files", "entry", "extractPath", "writer", "resolve", "reject", "fileNameBuffer", "extraField", "padding", "_password", "totalSize", "require_Open", "__commonJSMin", "exports", "module", "fs", "directory", "Stream", "buffer", "options", "offset", "length", "stream", "end", "filename", "start", "resolve", "reject", "err", "d", "request", "params", "req", "client", "key", "GetObjectCommand", "HeadObjectCommand", "head", "response", "error", "source", "require_unzip", "__commonJSMin", "exports", "app_exports", "__export", "activate", "deactivate", "__toCommonJS", "vscode", "vscode", "import_node", "import_stream", "assertPath", "path", "TypeError", "JSON", "stringify", "normalizeStringPosix", "allowAboveRoot", "code", "res", "lastSegmentLength", "lastSlash", "dots", "i", "length", "charCodeAt", "lastSlashIndex", "lastIndexOf", "slice", "posix", "resolve", "cwd", "resolvedPath", "resolvedAbsolute", "arguments", "process", "normalize", "isAbsolute", "trailingSeparator", "join", "joined", "arg", "relative", "from", "to", "fromStart", "fromEnd", "fromLen", "toStart", "toLen", "lastCommonSep", "fromCode", "out", "_makeLong", "dirname", "hasRoot", "end", "matchedSlash", "basename", "ext", "start", "extIdx", "firstNonSlashEnd", "extname", "startDot", "startPart", "preDotState", "format", "pathObject", "sep", "dir", "root", "base", "name", "parse", "ret", "delimiter", "win32", "module", "exports", "__webpack_module_cache__", "__webpack_require__", "moduleId", "cachedModule", "__webpack_modules__", "d", "definition", "key", "o", "Object", "defineProperty", "enumerable", "get", "obj", "prop", "prototype", "hasOwnProperty", "call", "r", "Symbol", "toStringTag", "value", "isWindows", "l", "I", "platform", "navigator", "userAgent", "indexOf", "_schemePattern", "_singleSlashStart", "_doubleSlashStart", "_validateUri", "_strict", "scheme", "Error", "authority", "query", "fragment", "test", "_empty", "_slash", "_regexp", "URI", "thing", "fsPath", "with", "toString", "schemeOrData", "this", "uriToFsPath", "change", "Uri", "match", "exec", "percentDecode", "replace", "idx", "substring", "components", "result", "skipEncoding", "_asFormatted", "toJSON", "data", "_formatted", "external", "_fsPath", "_sep", "_pathSepMarker", "$mid", "encodeTable", "encodeURIComponentFast", "uriComponent", "isPath", "isAuthority", "nativeEncodePos", "pos", "encodeURIComponent", "charAt", "substr", "escaped", "encodeURIComponentMinimal", "uri", "keepDriveLetterCasing", "toLowerCase", "encoder", "userinfo", "String", "fromCharCode", "decodeURIComponentGraceful", "str", "decodeURIComponent", "_rEncodedAsHex", "x", "posixPath", "slash", "Utils", "t", "joinPath", "paths", "resolvePath", "slashAdded", "LIB", "import_path", "fs", "path", "os", "import_node_http", "import_node_https", "import_node_zlib", "import_node_stream", "import_node_buffer", "dataUriToBuffer", "uri", "firstComma", "meta", "charset", "base64", "type", "typeFull", "i", "encoding", "data", "buffer", "dist_default", "import_node_stream", "import_node_util", "import_node_buffer", "init_fetch_blob", "init_esm_min", "FetchBaseError", "message", "type", "FetchError", "FetchBaseError", "message", "type", "systemError", "NAME", "isURLSearchParameters", "object", "isBlob", "isAbortSignal", "isDomainOrSubdomain", "destination", "original", "orig", "dest", "isSameProtocol", "pipeline", "Stream", "INTERNALS", "Body", "body", "size", "boundary", "isURLSearchParameters", "isBlob", "FormData", "formDataToBlob", "stream", "error_", "error", "FetchBaseError", "FetchError", "buffer", "byteOffset", "byteLength", "consumeBody", "ct", "formData", "parameters", "name", "value", "toFormData", "buf", "fetch_blob_default", "text", "data", "accum", "accumBytes", "chunk", "c", "clone", "instance", "highWaterMark", "p1", "p2", "getNonSpecFormDataBoundary", "extractContentType", "request", "getTotalBytes", "writeToStream", "dest", "import_node_util", "import_node_http", "validateHeaderName", "http", "name", "error", "validateHeaderValue", "value", "Headers", "_Headers", "init", "result", "raw", "values", "method", "pair", "target", "p", "receiver", "callback", "thisArg", "key", "property", "fromRawHeaders", "headers", "index", "array", "redirectStatus", "isRedirect", "code", "INTERNALS", "Response", "_Response", "Body", "body", "options", "status", "headers", "Headers", "contentType", "extractContentType", "clone", "url", "isRedirect", "response", "data", "init", "import_node_url", "import_node_util", "getSearch", "parsedURL", "lastOffset", "hash", "import_node_net", "stripURLForUseAsAReferrer", "url", "originOnly", "ReferrerPolicy", "DEFAULT_REFERRER_POLICY", "validateReferrerPolicy", "referrerPolicy", "isOriginPotentiallyTrustworthy", "hostIp", "hostIPVersion", "isUrlPotentiallyTrustworthy", "determineRequestsReferrer", "request", "referrerURLCallback", "referrerOriginCallback", "policy", "referrerSource", "referrerURL", "referrerOrigin", "currentURL", "parseReferrerPolicyFromHeader", "headers", "policyTokens", "token", "INTERNALS", "isRequest", "object", "doBadDataWarn", "Request", "_Request", "Body", "input", "init", "parsedURL", "method", "inputBody", "clone", "headers", "Headers", "contentType", "extractContentType", "signal", "isAbortSignal", "referrer", "parsedReferrer", "formatUrl", "referrerPolicy", "validateReferrerPolicy", "getNodeRequestOptions", "request", "contentLengthValue", "totalBytes", "getTotalBytes", "DEFAULT_REFERRER_POLICY", "determineRequestsReferrer", "agent", "search", "getSearch", "options", "AbortError", "FetchBaseError", "message", "type", "init_esm_min", "init_from", "supportedSchemas", "fetch", "url", "options_", "resolve", "reject", "request", "Request", "parsedURL", "options", "getNodeRequestOptions", "data", "dist_default", "response", "Response", "send", "https", "http", "signal", "abort", "error", "AbortError", "Stream", "abortAndFinalize", "finalize", "request_", "FetchError", "fixResponseChunkedTransferBadEnding", "s", "endedWithEventsCount", "hadError", "response_", "headers", "fromRawHeaders", "isRedirect", "location", "locationURL", "requestOptions", "Headers", "clone", "isDomainOrSubdomain", "isSameProtocol", "name", "responseReferrerPolicy", "parseReferrerPolicyFromHeader", "body", "pump", "responseOptions", "codings", "zlibOptions", "zlib", "raw", "chunk", "writeToStream", "errorCallback", "LAST_CHUNK", "isChunkedTransfer", "properLastChunkReceived", "previousChunk", "socket", "onSocketClose", "onData", "buf", "unzipper", "Binaries", "INSTALL_DIR", "getPlatform", "plat", "getBinaryPath", "binaryName", "needsInstall", "binPath", "exists", "install", "platform", "zip", "response", "fetch", "zipBuffer", "directory", "fileCount", "file", "fileName", "filePath", "content", "finalBin", "Executor", "_Executor", "workspaceFolder", "targetWorkspace", "sourceRepo", "downloadedBinPath", "getBinaryPath", "downloadedBinDir", "cp", "Server", "_Server", "Executor", "rawUri", "parsed", "URI", "fsPath", "openDoc", "doc", "workspaceFolder", "details", "serverOptions", "data", "requestStream", "buffer", "str", "index", "headerMatch", "contentLength", "headerLength", "jsonPart", "msg", "body", "header", "e", "clientOptions", "lspServer", "activate", "context", "logger", "needsInstall", "install", "Server", "restartCommand", "err", "deactivate"]
}
